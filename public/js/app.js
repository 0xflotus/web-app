var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(b){this.toString=function(){return"CORRUPT: "+this.message};this.message=b},invalid:function(b){this.toString=function(){return"INVALID: "+this.message};this.message=b},bug:function(b){this.toString=function(){return"BUG: "+this.message};this.message=b},notReady:function(b){this.toString=function(){return"NOT READY: "+this.message};this.message=b}}};
sjcl.cipher.aes=function(b){this.s[0][0][0]||this.O();var a,e,c,g,h=this.s[0][4],k=this.s[1];a=b.length;var l=1;if(4!==a&&6!==a&&8!==a)throw new sjcl.exception.invalid("invalid aes key size");this.b=[c=b.slice(0),g=[]];for(b=a;b<4*a+28;b++){e=c[b-1];if(0===b%a||8===a&&4===b%a)e=h[e>>>24]<<24^h[e>>16&255]<<16^h[e>>8&255]<<8^h[e&255],0===b%a&&(e=e<<8^e>>>24^l<<24,l=l<<1^283*(l>>7));c[b]=c[b-a]^e}for(a=0;b;a++,b--)e=c[a&3?b:b-4],g[a]=4>=b||4>a?e:k[0][h[e>>>24]]^k[1][h[e>>16&255]]^k[2][h[e>>8&255]]^k[3][h[e&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(b){return t(this,b,0)},decrypt:function(b){return t(this,b,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var b=this.s[0],a=this.s[1],e=b[4],c=a[4],g,h,k,l=[],m=[],n,p,r,v;for(g=0;256>g;g++)m[(l[g]=g<<1^283*(g>>7))^g]=g;for(h=k=0;!e[h];h^=n||1,k=m[k]||1)for(r=k^k<<1^k<<2^k<<3^k<<4,r=r>>8^r&255^99,e[h]=r,c[r]=h,p=l[g=l[n=l[h]]],v=16843009*p^65537*g^257*n^16843008*h,p=257*l[r]^16843008*r,g=0;4>g;g++)b[g][h]=p=p<<24^p>>>8,a[g][r]=v=v<<24^v>>>8;for(g=
0;5>g;g++)b[g]=b[g].slice(0),a[g]=a[g].slice(0)}};
function t(b,a,e){if(4!==a.length)throw new sjcl.exception.invalid("invalid aes block size");var c=b.b[e],g=a[0]^c[0],h=a[e?3:1]^c[1],k=a[2]^c[2];a=a[e?1:3]^c[3];var l,m,n,p=c.length/4-2,r,v=4,w=[0,0,0,0];l=b.s[e];b=l[0];var L=l[1],J=l[2],V=l[3],ha=l[4];for(r=0;r<p;r++)l=b[g>>>24]^L[h>>16&255]^J[k>>8&255]^V[a&255]^c[v],m=b[h>>>24]^L[k>>16&255]^J[a>>8&255]^V[g&255]^c[v+1],n=b[k>>>24]^L[a>>16&255]^J[g>>8&255]^V[h&255]^c[v+2],a=b[a>>>24]^L[g>>16&255]^J[h>>8&255]^V[k&255]^c[v+3],v+=4,g=l,h=m,k=n;for(r=
0;4>r;r++)w[e?3&-r:r]=ha[g>>>24]<<24^ha[h>>16&255]<<16^ha[k>>8&255]<<8^ha[a&255]^c[v++],l=g,g=h,h=k,k=a,a=l;return w}
sjcl.bitArray={bitSlice:function(b,a,e){b=sjcl.bitArray.$(b.slice(a/32),32-(a&31)).slice(1);return void 0===e?b:sjcl.bitArray.clamp(b,e-a)},extract:function(b,a,e){var c=Math.floor(-a-e&31);return((a+e-1^a)&-32?b[a/32|0]<<32-c^b[a/32+1|0]>>>c:b[a/32|0]>>>c)&(1<<e)-1},concat:function(b,a){if(0===b.length||0===a.length)return b.concat(a);var e=b[b.length-1],c=sjcl.bitArray.getPartial(e);return 32===c?b.concat(a):sjcl.bitArray.$(a,c,e|0,b.slice(0,b.length-1))},bitLength:function(b){var a=b.length;return 0===
a?0:32*(a-1)+sjcl.bitArray.getPartial(b[a-1])},clamp:function(b,a){if(32*b.length<a)return b;b=b.slice(0,Math.ceil(a/32));var e=b.length;a&=31;0<e&&a&&(b[e-1]=sjcl.bitArray.partial(a,b[e-1]&2147483648>>a-1,1));return b},partial:function(b,a,e){return 32===b?a:(e?a|0:a<<32-b)+1099511627776*b},getPartial:function(b){return Math.round(b/1099511627776)||32},equal:function(b,a){if(sjcl.bitArray.bitLength(b)!==sjcl.bitArray.bitLength(a))return!1;var e=0,c;for(c=0;c<b.length;c++)e|=b[c]^a[c];return 0===
e},$:function(b,a,e,c){var g;for(void 0===c&&(c=[]);32<=a;a-=32)c.push(e),e=0;if(0===a)return c.concat(b);for(g=0;g<b.length;g++)c.push(e|b[g]>>>a),e=b[g]<<32-a;g=b.length?b[b.length-1]:0;b=sjcl.bitArray.getPartial(g);c.push(sjcl.bitArray.partial(a+b&31,32<a+b?e:c.pop(),1));return c},i:function(b,a){return[b[0]^a[0],b[1]^a[1],b[2]^a[2],b[3]^a[3]]},byteswapM:function(b){var a,e;for(a=0;a<b.length;++a)e=b[a],b[a]=e>>>24|e>>>8&65280|(e&65280)<<8|e<<24;return b}};
sjcl.codec.utf8String={fromBits:function(b){var a="",e=sjcl.bitArray.bitLength(b),c,g;for(c=0;c<e/8;c++)0===(c&3)&&(g=b[c/4]),a+=String.fromCharCode(g>>>24),g<<=8;return decodeURIComponent(escape(a))},toBits:function(b){b=unescape(encodeURIComponent(b));var a=[],e,c=0;for(e=0;e<b.length;e++)c=c<<8|b.charCodeAt(e),3===(e&3)&&(a.push(c),c=0);e&3&&a.push(sjcl.bitArray.partial(8*(e&3),c));return a}};
sjcl.codec.hex={fromBits:function(b){var a="",e;for(e=0;e<b.length;e++)a+=((b[e]|0)+0xf00000000000).toString(16).substr(4);return a.substr(0,sjcl.bitArray.bitLength(b)/4)},toBits:function(b){var a,e=[],c;b=b.replace(/\s|0x/g,"");c=b.length;b+="00000000";for(a=0;a<b.length;a+=8)e.push(parseInt(b.substr(a,8),16)^0);return sjcl.bitArray.clamp(e,4*c)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(b,a,e){var c=sjcl.codec.base32.BASE,g=sjcl.codec.base32.REMAINING,h="",k=0,l=sjcl.codec.base32.B,m=0,n=sjcl.bitArray.bitLength(b);e&&(l=sjcl.codec.base32.X);for(e=0;h.length*c<n;)h+=l.charAt((m^b[e]>>>k)>>>g),k<c?(m=b[e]<<c-k,k+=g,e++):(m<<=c,k-=c);for(;h.length&7&&!a;)h+="=";return h},toBits:function(b,a){b=b.replace(/\s|=/g,"").toUpperCase();var e=sjcl.codec.base32.BITS,
c=sjcl.codec.base32.BASE,g=sjcl.codec.base32.REMAINING,h=[],k,l=0,m=sjcl.codec.base32.B,n=0,p,r="base32";a&&(m=sjcl.codec.base32.X,r="base32hex");for(k=0;k<b.length;k++){p=m.indexOf(b.charAt(k));if(0>p){if(!a)try{return sjcl.codec.base32hex.toBits(b)}catch(v){}throw new sjcl.exception.invalid("this isn't "+r+"!");}l>g?(l-=g,h.push(n^p>>>l),n=p<<e-l):(l+=c,n^=p<<e-l)}l&56&&h.push(sjcl.bitArray.partial(l&56,n,1));return h}};
sjcl.codec.base32hex={fromBits:function(b,a){return sjcl.codec.base32.fromBits(b,a,1)},toBits:function(b){return sjcl.codec.base32.toBits(b,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(b,a,e){var c="",g=0,h=sjcl.codec.base64.B,k=0,l=sjcl.bitArray.bitLength(b);e&&(h=h.substr(0,62)+"-_");for(e=0;6*c.length<l;)c+=h.charAt((k^b[e]>>>g)>>>26),6>g?(k=b[e]<<6-g,g+=26,e++):(k<<=6,g-=6);for(;c.length&3&&!a;)c+="=";return c},toBits:function(b,a){b=b.replace(/\s|=/g,"");var e=[],c,g=0,h=sjcl.codec.base64.B,k=0,l;a&&(h=h.substr(0,62)+"-_");for(c=0;c<b.length;c++){l=h.indexOf(b.charAt(c));
if(0>l)throw new sjcl.exception.invalid("this isn't base64!");26<g?(g-=26,e.push(k^l>>>g),k=l<<32-g):(g+=6,k^=l<<32-g)}g&56&&e.push(sjcl.bitArray.partial(g&56,k,1));return e}};sjcl.codec.base64url={fromBits:function(b){return sjcl.codec.base64.fromBits(b,1,1)},toBits:function(b){return sjcl.codec.base64.toBits(b,1)}};sjcl.hash.sha256=function(b){this.b[0]||this.O();b?(this.F=b.F.slice(0),this.A=b.A.slice(0),this.l=b.l):this.reset()};sjcl.hash.sha256.hash=function(b){return(new sjcl.hash.sha256).update(b).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(b){"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));var a,e=this.A=sjcl.bitArray.concat(this.A,b);a=this.l;b=this.l=a+sjcl.bitArray.bitLength(b);if(9007199254740991<b)throw new sjcl.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var c=new Uint32Array(e),g=0;for(a=512+a-(512+a&511);a<=b;a+=512)u(this,c.subarray(16*g,
16*(g+1))),g+=1;e.splice(0,16*g)}else for(a=512+a-(512+a&511);a<=b;a+=512)u(this,e.splice(0,16));return this},finalize:function(){var b,a=this.A,e=this.F,a=sjcl.bitArray.concat(a,[sjcl.bitArray.partial(1,1)]);for(b=a.length+2;b&15;b++)a.push(0);a.push(Math.floor(this.l/4294967296));for(a.push(this.l|0);a.length;)u(this,a.splice(0,16));this.reset();return e},Y:[],b:[],O:function(){function b(a){return 4294967296*(a-Math.floor(a))|0}for(var a=0,e=2,c,g;64>a;e++){g=!0;for(c=2;c*c<=e;c++)if(0===e%c){g=
!1;break}g&&(8>a&&(this.Y[a]=b(Math.pow(e,.5))),this.b[a]=b(Math.pow(e,1/3)),a++)}}};
function u(b,a){var e,c,g,h=b.F,k=b.b,l=h[0],m=h[1],n=h[2],p=h[3],r=h[4],v=h[5],w=h[6],L=h[7];for(e=0;64>e;e++)16>e?c=a[e]:(c=a[e+1&15],g=a[e+14&15],c=a[e&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+a[e&15]+a[e+9&15]|0),c=c+L+(r>>>6^r>>>11^r>>>25^r<<26^r<<21^r<<7)+(w^r&(v^w))+k[e],L=w,w=v,v=r,r=p+c|0,p=n,n=m,m=l,l=c+(m&n^p&(m^n))+(m>>>2^m>>>13^m>>>22^m<<30^m<<19^m<<10)|0;h[0]=h[0]+l|0;h[1]=h[1]+m|0;h[2]=h[2]+n|0;h[3]=h[3]+p|0;h[4]=h[4]+r|0;h[5]=h[5]+v|0;h[6]=h[6]+w|0;h[7]=
h[7]+L|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(b){sjcl.mode.ccm.G.push(b)},unListenProgress:function(b){b=sjcl.mode.ccm.G.indexOf(b);-1<b&&sjcl.mode.ccm.G.splice(b,1)},fa:function(b){var a=sjcl.mode.ccm.G.slice(),e;for(e=0;e<a.length;e+=1)a[e](b)},encrypt:function(b,a,e,c,g){var h,k=a.slice(0),l=sjcl.bitArray,m=l.bitLength(e)/8,n=l.bitLength(k)/8;g=g||64;c=c||[];if(7>m)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(h=2;4>h&&n>>>8*h;h++);h<15-m&&(h=15-m);e=l.clamp(e,
8*(15-h));a=sjcl.mode.ccm.V(b,a,e,c,g,h);k=sjcl.mode.ccm.C(b,k,e,a,g,h);return l.concat(k.data,k.tag)},decrypt:function(b,a,e,c,g){g=g||64;c=c||[];var h=sjcl.bitArray,k=h.bitLength(e)/8,l=h.bitLength(a),m=h.clamp(a,l-g),n=h.bitSlice(a,l-g),l=(l-g)/8;if(7>k)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&l>>>8*a;a++);a<15-k&&(a=15-k);e=h.clamp(e,8*(15-a));m=sjcl.mode.ccm.C(b,m,e,n,g,a);b=sjcl.mode.ccm.V(b,m.data,e,c,g,a);if(!h.equal(m.tag,b))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return m.data},na:function(b,a,e,c,g,h){var k=[],l=sjcl.bitArray,m=l.i;c=[l.partial(8,(a.length?64:0)|c-2<<2|h-1)];c=l.concat(c,e);c[3]|=g;c=b.encrypt(c);if(a.length)for(e=l.bitLength(a)/8,65279>=e?k=[l.partial(16,e)]:4294967295>=e&&(k=l.concat([l.partial(16,65534)],[e])),k=l.concat(k,a),a=0;a<k.length;a+=4)c=b.encrypt(m(c,k.slice(a,a+4).concat([0,0,0])));return c},V:function(b,a,e,c,g,h){var k=sjcl.bitArray,l=k.i;g/=8;if(g%2||4>g||16<g)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(4294967295<c.length||4294967295<a.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");e=sjcl.mode.ccm.na(b,c,e,g,k.bitLength(a)/8,h);for(c=0;c<a.length;c+=4)e=b.encrypt(l(e,a.slice(c,c+4).concat([0,0,0])));return k.clamp(e,8*g)},C:function(b,a,e,c,g,h){var k,l=sjcl.bitArray;k=l.i;var m=a.length,n=l.bitLength(a),p=m/50,r=p;e=l.concat([l.partial(8,h-1)],e).concat([0,0,0]).slice(0,4);c=l.bitSlice(k(c,b.encrypt(e)),0,g);if(!m)return{tag:c,data:[]};for(k=0;k<m;k+=4)k>p&&(sjcl.mode.ccm.fa(k/
m),p+=r),e[3]++,g=b.encrypt(e),a[k]^=g[0],a[k+1]^=g[1],a[k+2]^=g[2],a[k+3]^=g[3];return{tag:c,data:l.clamp(a,n)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(b,a,e,c,g,h){if(128!==sjcl.bitArray.bitLength(e))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var k,l=sjcl.mode.ocb2.S,m=sjcl.bitArray,n=m.i,p=[0,0,0,0];e=l(b.encrypt(e));var r,v=[];c=c||[];g=g||64;for(k=0;k+4<a.length;k+=4)r=a.slice(k,k+4),p=n(p,r),v=v.concat(n(e,b.encrypt(n(e,r)))),e=l(e);r=a.slice(k);a=m.bitLength(r);k=b.encrypt(n(e,[0,0,0,a]));r=m.clamp(n(r.concat([0,0,0]),k),a);p=n(p,n(r.concat([0,0,0]),k));p=b.encrypt(n(p,n(e,l(e))));
c.length&&(p=n(p,h?c:sjcl.mode.ocb2.pmac(b,c)));return v.concat(m.concat(r,m.clamp(p,g)))},decrypt:function(b,a,e,c,g,h){if(128!==sjcl.bitArray.bitLength(e))throw new sjcl.exception.invalid("ocb iv must be 128 bits");g=g||64;var k=sjcl.mode.ocb2.S,l=sjcl.bitArray,m=l.i,n=[0,0,0,0],p=k(b.encrypt(e)),r,v,w=sjcl.bitArray.bitLength(a)-g,L=[];c=c||[];for(e=0;e+4<w/32;e+=4)r=m(p,b.decrypt(m(p,a.slice(e,e+4)))),n=m(n,r),L=L.concat(r),p=k(p);v=w-32*e;r=b.encrypt(m(p,[0,0,0,v]));r=m(r,l.clamp(a.slice(e),v).concat([0,
0,0]));n=m(n,r);n=b.encrypt(m(n,m(p,k(p))));c.length&&(n=m(n,h?c:sjcl.mode.ocb2.pmac(b,c)));if(!l.equal(l.clamp(n,g),l.bitSlice(a,w)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return L.concat(l.clamp(r,v))},pmac:function(b,a){var e,c=sjcl.mode.ocb2.S,g=sjcl.bitArray,h=g.i,k=[0,0,0,0],l=b.encrypt([0,0,0,0]),l=h(l,c(c(l)));for(e=0;e+4<a.length;e+=4)l=c(l),k=h(k,b.encrypt(h(l,a.slice(e,e+4))));e=a.slice(e);128>g.bitLength(e)&&(l=h(l,c(l)),e=g.concat(e,[-2147483648,0,0,0]));k=h(k,e);
return b.encrypt(h(c(h(l,c(l))),k))},S:function(b){return[b[0]<<1^b[1]>>>31,b[1]<<1^b[2]>>>31,b[2]<<1^b[3]>>>31,b[3]<<1^135*(b[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(b,a,e,c,g){var h=a.slice(0);a=sjcl.bitArray;c=c||[];b=sjcl.mode.gcm.C(!0,b,h,c,e,g||128);return a.concat(b.data,b.tag)},decrypt:function(b,a,e,c,g){var h=a.slice(0),k=sjcl.bitArray,l=k.bitLength(h);g=g||128;c=c||[];g<=l?(a=k.bitSlice(h,l-g),h=k.bitSlice(h,0,l-g)):(a=h,h=[]);b=sjcl.mode.gcm.C(!1,b,h,c,e,g);if(!k.equal(b.tag,a))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return b.data},ka:function(b,a){var e,c,g,h,k,l=sjcl.bitArray.i;g=[0,0,
0,0];h=a.slice(0);for(e=0;128>e;e++){0!==(b[Math.floor(e/32)]&1<<31-e%32)&&(g=l(g,h));k=0!==(h[3]&1);for(c=3;0<c;c--)h[c]=h[c]>>>1|(h[c-1]&1)<<31;h[0]>>>=1;k&&(h[0]^=-520093696)}return g},j:function(b,a,e){var c,g=e.length;a=a.slice(0);for(c=0;c<g;c+=4)a[0]^=4294967295&e[c],a[1]^=4294967295&e[c+1],a[2]^=4294967295&e[c+2],a[3]^=4294967295&e[c+3],a=sjcl.mode.gcm.ka(a,b);return a},C:function(b,a,e,c,g,h){var k,l,m,n,p,r,v,w,L=sjcl.bitArray;r=e.length;v=L.bitLength(e);w=L.bitLength(c);l=L.bitLength(g);
k=a.encrypt([0,0,0,0]);96===l?(g=g.slice(0),g=L.concat(g,[1])):(g=sjcl.mode.gcm.j(k,[0,0,0,0],g),g=sjcl.mode.gcm.j(k,g,[0,0,Math.floor(l/4294967296),l&4294967295]));l=sjcl.mode.gcm.j(k,[0,0,0,0],c);p=g.slice(0);c=l.slice(0);b||(c=sjcl.mode.gcm.j(k,l,e));for(n=0;n<r;n+=4)p[3]++,m=a.encrypt(p),e[n]^=m[0],e[n+1]^=m[1],e[n+2]^=m[2],e[n+3]^=m[3];e=L.clamp(e,v);b&&(c=sjcl.mode.gcm.j(k,l,e));b=[Math.floor(w/4294967296),w&4294967295,Math.floor(v/4294967296),v&4294967295];c=sjcl.mode.gcm.j(k,c,b);m=a.encrypt(g);
c[0]^=m[0];c[1]^=m[1];c[2]^=m[2];c[3]^=m[3];return{tag:L.bitSlice(c,0,h),data:e}}};sjcl.misc.hmac=function(b,a){this.W=a=a||sjcl.hash.sha256;var e=[[],[]],c,g=a.prototype.blockSize/32;this.w=[new a,new a];b.length>g&&(b=a.hash(b));for(c=0;c<g;c++)e[0][c]=b[c]^909522486,e[1][c]=b[c]^1549556828;this.w[0].update(e[0]);this.w[1].update(e[1]);this.R=new a(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(b){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(b);return this.digest(b)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(b){this.aa=!0;this.R.update(b)};sjcl.misc.hmac.prototype.digest=function(){var b=this.R.finalize(),b=(new this.W(this.w[1])).update(b).finalize();this.reset();return b};
sjcl.misc.pbkdf2=function(b,a,e,c,g){e=e||1E4;if(0>c||0>e)throw new sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));g=g||sjcl.misc.hmac;b=new g(b);var h,k,l,m,n=[],p=sjcl.bitArray;for(m=1;32*n.length<(c||1);m++){g=h=b.encrypt(p.concat(a,[m]));for(k=1;k<e;k++)for(h=b.encrypt(h),l=0;l<h.length;l++)g[l]^=h[l];n=n.concat(g)}c&&(n=p.clamp(n,c));return n};
sjcl.prng=function(b){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=b;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=65536;this.T=[0,48,64,96,128,192,256,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(b,a){var e=[],c;c=this.isReady(a);var g;if(c===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(c&this.J){c=!(c&this.I);g=[];var h=0,k;this.Z=g[0]=(new Date).valueOf()+this.da;for(k=0;16>k;k++)g.push(4294967296*Math.random()|0);for(k=0;k<this.c.length&&(g=g.concat(this.c[k].finalize()),h+=this.m[k],this.m[k]=0,c||!(this.P&1<<k));k++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=h;h>this.o&&(this.o=
h);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(g));this.L=new sjcl.cipher.aes(this.b);for(c=0;4>c&&(this.h[c]=this.h[c]+1|0,!this.h[c]);c++);}for(c=0;c<b;c+=4)0===(c+1)%this.ca&&y(this),g=z(this),e.push(g[0],g[1],g[2],g[3]);y(this);return e.slice(0,b)},setDefaultParanoia:function(b,a){if(0===b&&"Setting paranoia=0 will ruin your security; use it only for testing"!==a)throw new sjcl.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=b},addEntropy:function(b,
a,e){e=e||"user";var c,g,h=(new Date).valueOf(),k=this.H[e],l=this.isReady(),m=0;c=this.U[e];void 0===c&&(c=this.U[e]=this.ha++);void 0===k&&(k=this.H[e]=0);this.H[e]=(this.H[e]+1)%this.c.length;switch(typeof b){case "number":void 0===a&&(a=1);this.c[k].update([c,this.N++,1,a,h,1,b|0]);break;case "object":e=Object.prototype.toString.call(b);if("[object Uint32Array]"===e){g=[];for(e=0;e<b.length;e++)g.push(b[e]);b=g}else for("[object Array]"!==e&&(m=1),e=0;e<b.length&&!m;e++)"number"!==typeof b[e]&&
(m=1);if(!m){if(void 0===a)for(e=a=0;e<b.length;e++)for(g=b[e];0<g;)a++,g>>>=1;this.c[k].update([c,this.N++,2,a,h,b.length].concat(b))}break;case "string":void 0===a&&(a=b.length);this.c[k].update([c,this.N++,3,a,h,b.length]);this.c[k].update(b);break;default:m=1}if(m)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[k]+=a;this.f+=a;l===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},
isReady:function(b){b=this.T[void 0!==b?b:this.M];return this.o&&this.o>=b?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=b?this.J|this.u:this.u},getProgress:function(b){b=this.T[b?b:this.M];return this.o>=b?1:this.f>b?1:this.f/b},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",
this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(b,a){this.K[b][this.ga++]=a},removeEventListener:function(b,a){var e,c,g=this.K[b],h=[];for(c in g)g.hasOwnProperty(c)&&g[c]===a&&h.push(c);for(e=0;e<h.length;e++)c=h[e],delete g[c]},la:function(){C(this,1)},oa:function(b){var a,e;try{a=b.x||b.clientX||b.offsetX||0,e=b.y||b.clientY||b.offsetY||0}catch(c){e=a=0}0!=a&&0!=e&&this.addEntropy([a,e],2,"mouse");C(this,0)},qa:function(b){b=
b.touches[0]||b.changedTouches[0];this.addEntropy([b.pageX||b.clientX,b.pageY||b.clientY],1,"touch");C(this,0)},ma:function(){C(this,2)},ea:function(b){b=b.accelerationIncludingGravity.x||b.accelerationIncludingGravity.y||b.accelerationIncludingGravity.z;if(window.orientation){var a=window.orientation;"number"===typeof a&&this.addEntropy(a,1,"accelerometer")}b&&this.addEntropy(b,2,"accelerometer");C(this,0)}};
function A(b,a){var e,c=sjcl.random.K[b],g=[];for(e in c)c.hasOwnProperty(e)&&g.push(c[e]);for(e=0;e<g.length;e++)g[e](a)}function C(b,a){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?b.addEntropy(window.performance.now(),a,"loadtime"):b.addEntropy((new Date).valueOf(),a,"loadtime")}function y(b){b.b=z(b).concat(z(b));b.L=new sjcl.cipher.aes(b.b)}function z(b){for(var a=0;4>a&&(b.h[a]=b.h[a]+1|0,!b.h[a]);a++);return b.L.encrypt(b.h)}
function B(b,a){return function(){a.apply(b,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(b){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(b){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(b))}
sjcl.json={defaults:{v:1,iter:1E4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(b,a,e,c){e=e||{};c=c||{};var g=sjcl.json,h=g.g({iv:sjcl.random.randomWords(4,0)},g.defaults),k;g.g(h,e);e=h.adata;"string"===typeof h.salt&&(h.salt=sjcl.codec.base64.toBits(h.salt));"string"===typeof h.iv&&(h.iv=sjcl.codec.base64.toBits(h.iv));if(!sjcl.mode[h.mode]||!sjcl.cipher[h.cipher]||"string"===typeof b&&100>=h.iter||64!==h.ts&&96!==h.ts&&128!==h.ts||128!==h.ks&&192!==h.ks&&256!==h.ks||2>h.iv.length||
4<h.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof b?(k=sjcl.misc.cachedPbkdf2(b,h),b=k.key.slice(0,h.ks/32),h.salt=k.salt):sjcl.ecc&&b instanceof sjcl.ecc.elGamal.publicKey&&(k=b.kem(),h.kemtag=k.tag,b=k.key.slice(0,h.ks/32));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));"string"===typeof e&&(h.adata=e=sjcl.codec.utf8String.toBits(e));k=new sjcl.cipher[h.cipher](b);g.g(c,h);c.key=b;h.ct="ccm"===h.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
a instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(k,a,h.iv,e,h.ts):sjcl.mode[h.mode].encrypt(k,a,h.iv,e,h.ts);return h},encrypt:function(b,a,e,c){var g=sjcl.json,h=g.ja.apply(g,arguments);return g.encode(h)},ia:function(b,a,e,c){e=e||{};c=c||{};var g=sjcl.json;a=g.g(g.g(g.g({},g.defaults),a),e,!0);var h,k;h=a.adata;"string"===typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt));"string"===typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv));if(!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"===
typeof b&&100>=a.iter||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||!a.iv||2>a.iv.length||4<a.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof b?(k=sjcl.misc.cachedPbkdf2(b,a),b=k.key.slice(0,a.ks/32),a.salt=k.salt):sjcl.ecc&&b instanceof sjcl.ecc.elGamal.secretKey&&(b=b.unkem(sjcl.codec.base64.toBits(a.kemtag)).slice(0,a.ks/32));"string"===typeof h&&(h=sjcl.codec.utf8String.toBits(h));k=new sjcl.cipher[a.cipher](b);h="ccm"===
a.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&a.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(k,a.ct,a.iv,a.tag,h,a.ts):sjcl.mode[a.mode].decrypt(k,a.ct,a.iv,h,a.ts);g.g(c,a);c.key=b;return 1===e.raw?h:sjcl.codec.utf8String.fromBits(h)},decrypt:function(b,a,e,c){var g=sjcl.json;return g.ia(b,g.decode(a),e,c)},encode:function(b){var a,e="{",c="";for(a in b)if(b.hasOwnProperty(a)){if(!a.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");e+=c+'"'+
a+'":';c=",";switch(typeof b[a]){case "number":case "boolean":e+=b[a];break;case "string":e+='"'+escape(b[a])+'"';break;case "object":e+='"'+sjcl.codec.base64.fromBits(b[a],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return e+"}"},decode:function(b){b=b.replace(/\s/g,"");if(!b.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");b=b.replace(/^\{|\}$/g,"").split(/,/);var a={},e,c;for(e=0;e<b.length;e++){if(!(c=b[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=c[3]?a[c[2]]=parseInt(c[3],10):null!=c[4]?a[c[2]]=c[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(c[4]):unescape(c[4]):null!=c[5]&&(a[c[2]]="true"===c[5])}return a},g:function(b,a,e){void 0===b&&(b={});if(void 0===a)return b;for(var c in a)if(a.hasOwnProperty(c)){if(e&&void 0!==b[c]&&b[c]!==a[c])throw new sjcl.exception.invalid("required parameter overridden");b[c]=a[c]}return b},sa:function(b,a){var e={},c;for(c in b)b.hasOwnProperty(c)&&b[c]!==a[c]&&(e[c]=b[c]);return e},ra:function(b,
a){var e={},c;for(c=0;c<a.length;c++)void 0!==b[a[c]]&&(e[a[c]]=b[a[c]]);return e}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(b,a){var e=sjcl.misc.pa,c;a=a||{};c=a.iter||1E3;e=e[b]=e[b]||{};c=e[c]=e[c]||{firstSalt:a.salt&&a.salt.length?a.salt.slice(0):sjcl.random.randomWords(2,0)};e=void 0===a.salt?c.firstSalt:a.salt;c[e]=c[e]||sjcl.misc.pbkdf2(b,e,a.iter);return{key:c[e].slice(0),salt:e.slice(0)}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).io=b()})(function(){return function a(b,c,g){function h(l,n){if(!c[l]){if(!b[l]){var p="function"==typeof require&&require;if(!n&&p)return p(l,!0);if(k)return k(l,!0);p=Error("Cannot find module '"+l+"'");throw p.code="MODULE_NOT_FOUND",p;}p=c[l]={exports:{}};
b[l][0].call(p.exports,function(a){var c=b[l][1][a];return h(c?c:a)},p,p.exports,a,b,c,g)}return c[l].exports}for(var k="function"==typeof require&&require,l=0;l<g.length;l++)h(g[l]);return h}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){b.exports=a("./socket");b.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,b,c){(function(c){function h(a,b){if(!(this instanceof h))return new h(a,b);b=b||{};a&&"object"==typeof a&&(b=a,a=null);
a?(a=r(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=r(b.host).host);this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol;b.hostname&&!b.port&&(b.port=this.secure?"443":"80");this.agent=b.agent||!1;this.hostname=b.hostname||(c.location?location.hostname:"localhost");this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80);this.query=b.query||{};"string"==typeof this.query&&
(this.query=w.decode(this.query));this.upgrade=!1!==b.upgrade;this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!b.forceJSONP;this.jsonp=!1!==b.jsonp;this.forceBase64=!!b.forceBase64;this.enablesXDR=!!b.enablesXDR;this.timestampParam=b.timestampParam||"t";this.timestampRequests=b.timestampRequests;this.transports=b.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=b.policyPort||843;this.rememberUpgrade=b.rememberUpgrade||!1;this.binaryType=
null;this.onlyBinaryUpgrades=b.onlyBinaryUpgrades;this.perMessageDeflate=!1!==b.perMessageDeflate?b.perMessageDeflate||{}:!1;!0===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=b.pfx||null;this.key=b.key||null;this.passphrase=b.passphrase||null;this.cert=b.cert||null;this.ca=b.ca||null;this.ciphers=b.ciphers||null;this.rejectUnauthorized=void 0===b.rejectUnauthorized?null:b.rejectUnauthorized;
var e="object"==typeof c&&c;e.global===e&&b.extraHeaders&&0<Object.keys(b.extraHeaders).length&&(this.extraHeaders=b.extraHeaders);this.open()}var k=a("./transports"),l=a("component-emitter"),m=a("debug")("engine.io-client:socket"),n=a("indexof"),p=a("engine.io-parser"),r=a("parseuri"),v=a("parsejson"),w=a("parseqs");b.exports=h;h.priorWebsocketSuccess=!1;l(h.prototype);h.protocol=p.protocol;h.Socket=h;h.Transport=a("./transport");h.transports=a("./transports");h.parser=a("engine.io-parser");h.prototype.createTransport=
function(a){m('creating transport "%s"',a);var b=this.query,c={},e;for(e in b)b.hasOwnProperty(e)&&(c[e]=b[e]);c.EIO=p.protocol;c.transport=a;this.id&&(c.sid=this.id);return new k[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:c,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,
key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})};h.prototype.open=function(){var a;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var b=this;setTimeout(function(){b.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState=
"opening";try{a=this.createTransport(a)}catch(c){this.transports.shift();this.open();return}a.open();this.setTransport(a)};h.prototype.setTransport=function(a){m("setting transport %s",a.name);var b=this;this.transport&&(m("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})};
h.prototype.probe=function(a){function b(){if(p.onlyBinaryUpgrades){var c=!this.supportsBinary&&p.transport.supportsBinary;r=r||c}r||(m('probe transport "%s" opened',a),w.send([{type:"ping",data:"probe"}]),w.once("packet",function(b){r||("pong"==b.type&&"probe"==b.data?(m('probe transport "%s" pong',a),p.upgrading=!0,p.emit("upgrading",w),w&&(h.priorWebsocketSuccess="websocket"==w.name,m('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){r||"closed"==p.readyState||(m("changing transport and sending upgrade packet"),
n(),p.setTransport(w),w.send([{type:"upgrade"}]),p.emit("upgrade",w),w=null,p.upgrading=!1,p.flush())}))):(m('probe transport "%s" failed',a),b=Error("probe error"),b.transport=w.name,p.emit("upgradeError",b)))}))}function c(){r||(r=!0,n(),w.close(),w=null)}function e(b){var g=Error("probe error: "+b);g.transport=w.name;c();m('probe transport "%s" failed because of error: %s',a,b);p.emit("upgradeError",g)}function g(){e("transport closed")}function k(){e("socket closed")}function l(a){w&&a.name!=
w.name&&(m('"%s" works - aborting "%s"',a.name,w.name),c())}function n(){w.removeListener("open",b);w.removeListener("error",e);w.removeListener("close",g);p.removeListener("close",k);p.removeListener("upgrading",l)}m('probing transport "%s"',a);var w=this.createTransport(a,{probe:1}),r=!1,p=this;h.priorWebsocketSuccess=!1;w.once("open",b);w.once("error",e);w.once("close",g);this.once("close",k);this.once("upgrading",l);w.open()};h.prototype.onOpen=function(){m("socket open");this.readyState="open";
h.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){m("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};h.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(m('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(v(a.data));break;
case "pong":this.setPing();this.emit("pong");break;case "error":var b=Error("server error");b.code=a.data;this.onError(b);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else m('packet received with socket readyState "%s"',this.readyState)};h.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=
this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};h.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};h.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){m("writing ping packet - expecting pong within %sms",
a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};h.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})};h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};h.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(m("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};h.prototype.write=h.prototype.send=function(a,b,c){this.sendPacket("message",a,b,c);return this};h.prototype.sendPacket=function(a,b,c,e){"function"==typeof b&&(e=b,b=void 0);"function"==typeof c&&(e=c,c=null);if("closing"!=this.readyState&&"closed"!=this.readyState){c=c||{};c.compress=!1!==c.compress;a={type:a,data:b,options:c};this.emit("packetCreate",a);this.writeBuffer.push(a);if(e)this.once("flush",
e);this.flush()}};h.prototype.close=function(){function a(){e.onClose("forced close");m("socket closing - telling transport to close");e.transport.close()}function b(){e.removeListener("upgrade",b);e.removeListener("upgradeError",b);a()}function c(){e.once("upgrade",b);e.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?c():a()});else this.upgrading?c():a()}return this};
h.prototype.onError=function(a){m("socket error %j",a);h.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};h.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState)m('socket close with reason: "%s"',a),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=
null,this.emit("close",a,b),this.writeBuffer=[],this.prevBufferLen=0};h.prototype.filterUpgrades=function(a){for(var b=[],c=0,e=a.length;c<e;c++)~n(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,b,c){function g(a){this.path=a.path;this.hostname=
a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders}var h=a("engine.io-parser");a=a("component-emitter");b.exports=g;a(g.prototype);
g.prototype.onError=function(a,b){var c=Error(a);c.type="TransportError";c.description=b;this.emit("error",c);return this};g.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};g.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};g.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};g.prototype.onOpen=
function(){this.readyState="open";this.writable=!0;this.emit("open")};g.prototype.onData=function(a){a=h.decodePacket(a,this.socket.binaryType);this.onPacket(a)};g.prototype.onPacket=function(a){this.emit("packet",a)};g.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,b,c){(function(b){var e=a("xmlhttprequest-ssl"),k=a("./polling-xhr"),l=a("./polling-jsonp"),m=a("./websocket");c.polling=function(a){var c=!1,m=
!1,v=!1!==a.jsonp;b.location&&(m="https:"==location.protocol,(c=location.port)||(c=m?443:80),c=a.hostname!=location.hostname||c!=a.port,m=a.secure!=m);a.xdomain=c;a.xscheme=m;if("open"in new e(a)&&!a.forceJSONP)return new k(a);if(!v)throw Error("JSONP disabled");return new l(a)};c.websocket=m}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,
b,c){(function(c){function h(){}function k(a){l.call(this,a);this.query=this.query||{};r||(c.___eio||(c.___eio=[]),r=c.___eio);this.index=r.length;var b=this;r.push(function(a){b.onData(a)});this.query.j=this.index;c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=h)},!1)}var l=a("./polling"),m=a("component-inherit");b.exports=k;var n=/\n/g,p=/\\n/g,r;m(k,l);k.prototype.supportsBinary=!1;k.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);l.prototype.doClose.call(this)};k.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b);
this.script=b;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};k.prototype.doWrite=function(a,b){function c(){e();b()}function e(){if(g.iframe)try{g.form.removeChild(g.iframe)}catch(a){g.onError("jsonp polling iframe removal error",a)}try{m=document.createElement('<iframe src="javascript:0" name="'+g.iframeId+'">')}catch(a){m=document.createElement("iframe"),
m.name=g.iframeId,m.src="javascript:0"}m.id=g.iframeId;g.form.appendChild(m);g.iframe=m}var g=this;if(!this.form){var h=document.createElement("form"),k=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index,m;h.className="socketio";h.style.position="absolute";h.style.top="-1000px";h.style.left="-1000px";h.target=l;h.method="POST";h.setAttribute("accept-charset","utf-8");k.name="d";h.appendChild(k);document.body.appendChild(h);this.form=h;this.area=k}this.form.action=this.uri();
e();a=a.replace(p,"\\\n");this.area.value=a.replace(n,"\\n");try{this.form.submit()}catch(r){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==g.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,b,c){(function(c){function h(){}function k(a){p.call(this,a);if(c.location){var b="https:"==location.protocol,
e=location.port;e||(e=b?443:80);this.xd=a.hostname!=c.location.hostname||e!=a.port;this.xs=a.secure!=b}else this.extraHeaders=a.extraHeaders}function l(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=
a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders;this.create()}function m(){for(var a in l.requests)l.requests.hasOwnProperty(a)&&l.requests[a].abort()}var n=a("xmlhttprequest-ssl"),p=a("./polling"),r=a("component-emitter"),v=a("component-inherit"),w=a("debug")("engine.io-client:polling-xhr");b.exports=k;b.exports.Request=l;v(k,p);k.prototype.supportsBinary=!0;k.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||
!1;a.supportsBinary=this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;a.extraHeaders=this.extraHeaders;return new l(a)};k.prototype.doWrite=function(a,b){var c=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a}),e=this;c.on("success",b);c.on("error",function(a){e.onError("xhr post error",a)});this.sendXhr=c};k.prototype.doPoll=
function(){w("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};r(l.prototype);l.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new n(a),e=this;try{w("xhr open %s: %s",
this.method,this.uri);b.open(this.method,this.uri,this.async);try{if(this.extraHeaders){b.setDisableHeaderCheck(!0);for(var h in this.extraHeaders)this.extraHeaders.hasOwnProperty(h)&&b.setRequestHeader(h,this.extraHeaders[h])}}catch(k){}this.supportsBinary&&(b.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(k){}"withCredentials"in b&&(b.withCredentials=
!0);this.hasXDR()?(b.onload=function(){e.onLoad()},b.onerror=function(){e.onError(b.responseText)}):b.onreadystatechange=function(){if(4==b.readyState)if(200==b.status||1223==b.status)e.onLoad();else setTimeout(function(){e.onError(b.status)},0)};w("xhr data %s",this.data);b.send(this.data)}catch(k){setTimeout(function(){e.onError(k)},0);return}c.document&&(this.index=l.requestsCount++,l.requests[this.index]=this)};l.prototype.onSuccess=function(){this.emit("success");this.cleanup()};l.prototype.onData=
function(a){this.emit("data",a);this.onSuccess()};l.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};l.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=h:this.xhr.onreadystatechange=h;if(a)try{this.xhr.abort()}catch(b){}c.document&&delete l.requests[this.index];this.xhr=null}};l.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}if("application/octet-stream"===
b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(c){var e=new Uint8Array(this.xhr.response);b=[];for(var g=0,h=e.length;g<h;g++)b.push(e[g]);a=String.fromCharCode.apply(null,b)}else a=this.xhr.responseText}catch(c){this.onError(c)}if(null!=a)this.onData(a)};l.prototype.hasXDR=function(){return"undefined"!==typeof c.XDomainRequest&&!this.xs&&this.enablesXDR};l.prototype.abort=function(){this.cleanup()};c.document&&(l.requestsCount=
0,l.requests={},c.attachEvent?c.attachEvent("onunload",m):c.addEventListener&&c.addEventListener("beforeunload",m,!1))}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,b,c){function g(a){var b=a&&a.forceBase64;if(!p||b)this.supportsBinary=!1;h.call(this,a)}var h=a("../transport"),k=a("parseqs"),l=a("engine.io-parser");c=
a("component-inherit");var m=a("yeast"),n=a("debug")("engine.io-client:polling");b.exports=g;var p=null!=(new (a("xmlhttprequest-ssl"))({xdomain:!1})).responseType;c(g,h);g.prototype.name="polling";g.prototype.doOpen=function(){this.poll()};g.prototype.pause=function(a){function b(){n("paused");c.readyState="paused";a()}var c=this;this.readyState="pausing";if(this.polling||!this.writable){var e=0;this.polling&&(n("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){n("pre-pause polling complete");
--e||b()}));this.writable||(n("we are currently writing - waiting to pause"),e++,this.once("drain",function(){n("pre-pause writing complete");--e||b()}))}else b()};g.prototype.poll=function(){n("polling");this.polling=!0;this.doPoll();this.emit("poll")};g.prototype.onData=function(a){var b=this;n("polling got data %s",a);l.decodePayload(a,this.socket.binaryType,function(a,c,e){if("opening"==b.readyState)b.onOpen();if("close"==a.type)return b.onClose(),!1;b.onPacket(a)});"closed"!=this.readyState&&
(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():n('ignoring poll - transport state "%s"',this.readyState))};g.prototype.doClose=function(){function a(){n("writing close packet");b.write([{type:"close"}])}var b=this;"open"==this.readyState?(n("transport open - closing"),a()):(n("transport not open - deferring close"),this.once("open",a))};g.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0;b.emit("drain")},b=this;l.encodePayload(a,
this.supportsBinary,function(a){b.doWrite(a,c)})};g.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";!1!==this.timestampRequests&&(a[this.timestampParam]=m());this.supportsBinary||a.sid||(a.b64=1);a=k.encode(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port);a.length&&(a="?"+a);var e=-1!==this.hostname.indexOf(":");return b+"://"+(e?"["+this.hostname+"]":this.hostname)+c+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,
"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,b,c){(function(c){function h(a){a&&a.forceBase64&&(this.supportsBinary=!1);this.perMessageDeflate=a.perMessageDeflate;k.call(this,a)}var k=a("../transport"),l=a("engine.io-parser"),m=a("parseqs"),n=a("component-inherit"),p=a("yeast"),r=a("debug")("engine.io-client:websocket"),v=c.WebSocket||c.MozWebSocket,w=v;if(!w&&"undefined"===typeof window)try{w=a("ws")}catch(L){}b.exports=h;n(h,k);h.prototype.name="websocket";h.prototype.supportsBinary=
!0;h.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent,perMessageDeflate:this.perMessageDeflate};b.pfx=this.pfx;b.key=this.key;b.passphrase=this.passphrase;b.cert=this.cert;b.ca=this.ca;b.ciphers=this.ciphers;b.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(b.headers=this.extraHeaders);this.ws=v?new w(a):new w(a,void 0,b);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=
"buffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};h.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(b){a.onData(b.data)};this.ws.onerror=function(b){a.onError("websocket error",b)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(h.prototype.onData=function(a){var b=this;setTimeout(function(){k.prototype.onData.call(b,a)},0)});h.prototype.write=
function(a){function b(){e.emit("flush");setTimeout(function(){e.writable=!0;e.emit("drain")},0)}var e=this;this.writable=!1;for(var h=a.length,k=0,m=h;k<m;k++)(function(a){l.encodePacket(a,e.supportsBinary,function(k){if(!v){var l={};a.options&&(l.compress=a.options.compress);e.perMessageDeflate&&("string"==typeof k?c.Buffer.byteLength(k):k.length)<e.perMessageDeflate.threshold&&(l.compress=!1)}try{v?e.ws.send(k):e.ws.send(k,l)}catch(m){r("websocket closed before onclose event")}--h||b()})})(a[k])};
h.prototype.onClose=function(){k.prototype.onClose.call(this)};h.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};h.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=p());this.supportsBinary||(a.b64=1);a=m.encode(a);a.length&&(a="?"+a);var e=-1!==this.hostname.indexOf(":");return b+"://"+(e?"["+this.hostname+"]":this.hostname)+
c+this.path+a};h.prototype.check=function(){return!!w&&!("__initialize"in w&&this.name===h.prototype.name)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,b,c){var g=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||g))return new XMLHttpRequest}catch(e){}try{if("undefined"!=
typeof XDomainRequest&&!c&&a)return new XDomainRequest}catch(e){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":22}],11:[function(a,b,c){function g(){}b.exports=function(a,b,c){function e(a,g){if(0>=e.count)throw Error("after called too many times");--e.count;a?(n=!0,b(a),b=c):0!==e.count||n||b(null,g)}var n=!1;c=c||g;e.count=a;return 0===a?b():e}},{}],12:[function(a,b,c){b.exports=function(a,b,c){var e=a.byteLength;b=b||0;c=c||e;if(a.slice)return a.slice(b,c);0>
b&&(b+=e);0>c&&(c+=e);c>e&&(c=e);if(b>=e||b>=c||0===e)return new ArrayBuffer(0);a=new Uint8Array(a);for(var e=new Uint8Array(c-b),m=0;b<c;b++,m++)e[m]=a[b];return e.buffer}},{}],13:[function(a,b,c){(function(a){c.encode=function(b){b=new Uint8Array(b);var c,e=b.length,m="";for(c=0;c<e;c+=3)m+=a[b[c]>>2],m+=a[(b[c]&3)<<4|b[c+1]>>4],m+=a[(b[c+1]&15)<<2|b[c+2]>>6],m+=a[b[c+2]&63];2===e%3?m=m.substring(0,m.length-1)+"=":1===e%3&&(m=m.substring(0,m.length-2)+"==");return m};c.decode=function(b){var c=
.75*b.length,e=b.length,m=0,n,p,r,v;"="===b[b.length-1]&&(c--,"="===b[b.length-2]&&c--);for(var w=new ArrayBuffer(c),L=new Uint8Array(w),c=0;c<e;c+=4)n=a.indexOf(b[c]),p=a.indexOf(b[c+1]),r=a.indexOf(b[c+2]),v=a.indexOf(b[c+3]),L[m++]=n<<2|p>>4,L[m++]=(p&15)<<4|r>>2,L[m++]=(r&3)<<6|v&63;return w}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,b,c){(function(a){function c(a){for(var b=0;b<a.length;b++){var e=a[b];if(e.buffer instanceof ArrayBuffer){var g=
e.buffer;if(e.byteLength!==g.byteLength){var h=new Uint8Array(e.byteLength);h.set(new Uint8Array(g,e.byteOffset,e.byteLength));g=h.buffer}a[b]=g}}}function k(a,b){b=b||{};var e=new m;c(a);for(var g=0;g<a.length;g++)e.append(a[g]);return b.type?e.getBlob(b.type):e.getBlob()}function l(a,b){c(a);return new Blob(a,b||{})}var m=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,n;try{n=2===(new Blob(["hi"])).size}catch(v){n=!1}var p;if(p=n)try{p=2===(new Blob([new Uint8Array([1,2])])).size}catch(v){p=
!1}var r=m&&m.prototype.append&&m.prototype.getBlob;a=n?p?a.Blob:l:r?k:void 0;b.exports=a}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],15:[function(a,b,c){function g(a){if(a){for(var b in g.prototype)a[b]=g.prototype[b];return a}}b.exports=g;g.prototype.on=g.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};g.prototype.once=function(a,
b){function c(){e.off(a,c);b.apply(this,arguments)}var e=this;this._callbacks=this._callbacks||{};c.fn=b;this.on(a,c);return this};g.prototype.off=g.prototype.removeListener=g.prototype.removeAllListeners=g.prototype.removeEventListener=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var e,g=0;g<c.length;g++)if(e=c[g],e===b||e.fn===b){c.splice(g,
1);break}return this};g.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c)for(var c=c.slice(0),e=0,g=c.length;e<g;++e)c[e].apply(this,b);return this};g.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};g.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;
a.prototype.constructor=a}},{}],17:[function(a,b,c){function g(){var a;try{a=c.storage.debug}catch(b){}return a}c=b.exports=a("./debug");c.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};c.formatArgs=function(){var a=arguments,b=this.useColors;a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff);if(!b)return a;var b="color: "+this.color,a=[a[0],b,"color: inherit"].concat(Array.prototype.slice.call(a,
1)),e=0,g=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(g=e))});a.splice(g,0,b);return a};c.save=function(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}};c.load=g;c.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};var h;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)h=
chrome.storage.local;else a:{try{h=window.localStorage;break a}catch(k){}h=void 0}c.storage=h;c.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");c.formatters.j=function(a){return JSON.stringify(a)};c.enable(g())},{"./debug":18}],18:[function(a,b,c){c=b.exports=function(a){function b(){}function e(){var a=+new Date;e.diff=a-(h||a);e.prev=h;h=e.curr=a;null==e.useColors&&(e.useColors=c.useColors());null==e.color&&e.useColors&&(e.color=c.colors[g++%c.colors.length]);
var b=Array.prototype.slice.call(arguments);b[0]=c.coerce(b[0]);"string"!==typeof b[0]&&(b=["%o"].concat(b));var k=0;b[0]=b[0].replace(/%([a-z%])/g,function(a,g){if("%%"===a)return a;k++;var h=c.formatters[g];"function"===typeof h&&(a=h.call(e,b[k]),b.splice(k,1),k--);return a});"function"===typeof c.formatArgs&&(b=c.formatArgs.apply(e,b));(e.log||c.log||console.log.bind(console)).apply(e,b)}b.enabled=!1;e.enabled=!0;var n=c.enabled(a)?e:b;n.namespace=a;return n};c.coerce=function(a){return a instanceof
Error?a.stack||a.message:a};c.disable=function(){c.enable("")};c.enable=function(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),e=b.length,g=0;g<e;g++)b[g]&&(a=b[g].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))};c.enabled=function(a){var b,e;b=0;for(e=c.skips.length;b<e;b++)if(c.skips[b].test(a))return!1;b=0;for(e=c.names.length;b<e;b++)if(c.names[b].test(a))return!0;return!1};c.humanize=a("ms");c.names=[];c.skips=[];c.formatters=
{};var g=0,h},{ms:25}],19:[function(a,b,c){(function(b){function e(a,b,g){if(!b)return c.encodeBase64Packet(a,g);var h=new FileReader;h.onload=function(){a.data=h.result;c.encodePacket(a,b,!0,g)};return h.readAsArrayBuffer(a.data)}function k(a,b,c){var e=Array(a.length);c=r(a.length,c);for(var g=function(a,c,g){b(c,function(b,c){e[a]=c;g(b,e)})},h=0;h<a.length;h++)g(h,a[h],c)}var l=a("./keys"),m=a("has-binary"),n=a("arraybuffer.slice"),p=a("base64-arraybuffer"),r=a("after"),v=a("utf8"),w=navigator.userAgent.match(/Android/i),
L=/PhantomJS/i.test(navigator.userAgent),J=w||L;c.protocol=3;var V=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},ha=l(V),ma={type:"error",data:"parser error"},P=a("blob");c.encodePacket=function(a,k,l,m){"function"==typeof k&&(m=k,k=!1);"function"==typeof l&&(m=l,l=null);var n=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&n instanceof ArrayBuffer){if(k){l=a.data;k=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=V[a.type];for(a=0;a<k.length;a++)l[a+1]=
k[a];a=m(l.buffer)}else a=c.encodeBase64Packet(a,m);return a}if(P&&n instanceof b.Blob)return k?J?a=e(a,k,m):(k=new Uint8Array(1),k[0]=V[a.type],a=new P([k.buffer,a.data]),a=m(a)):a=c.encodeBase64Packet(a,m),a;if(n&&n.base64)return m("b"+c.packets[a.type]+a.data.data);k=V[a.type];void 0!==a.data&&(k+=l?v.encode(String(a.data)):String(a.data));return m(""+k)};c.encodeBase64Packet=function(a,e){var h="b"+c.packets[a.type];if(P&&a.data instanceof b.Blob){var k=new FileReader;k.onload=function(){var a=
k.result.split(",")[1];e(h+a)};return k.readAsDataURL(a.data)}var l;try{l=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(m){l=new Uint8Array(a.data);for(var n=Array(l.length),p=0;p<l.length;p++)n[p]=l[p];l=String.fromCharCode.apply(null,n)}h+=b.btoa(l);return e(h)};c.decodePacket=function(a,b,e){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(e)try{a=v.decode(a)}catch(g){return ma}e=a.charAt(0);return Number(e)==e&&ha[e]?1<a.length?
{type:ha[e],data:a.substring(1)}:{type:ha[e]}:ma}e=(new Uint8Array(a))[0];a=n(a,1);P&&"blob"===b&&(a=new P([a]));return{type:ha[e],data:a}};c.decodeBase64Packet=function(a,c){var e=ha[a.charAt(0)];if(!b.ArrayBuffer)return{type:e,data:{base64:!0,data:a.substr(1)}};var h=p.decode(a.substr(1));"blob"===c&&P&&(h=new P([h]));return{type:e,data:h}};c.encodePayload=function(a,b,e){"function"==typeof b&&(e=b,b=null);var g=m(a);if(b&&g)return P&&!J?c.encodePayloadAsBlob(a,e):c.encodePayloadAsArrayBuffer(a,
e);if(!a.length)return e("0:");k(a,function(a,e){c.encodePacket(a,g?b:!1,!0,function(a){e(null,a.length+":"+a)})},function(a,b){return e(b.join(""))})};c.decodePayload=function(a,b,e){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,e);"function"===typeof b&&(e=b,b=null);var g;if(""==a)return e(ma,0,1);g="";for(var h,k,l=0,m=a.length;l<m;l++)if(k=a.charAt(l),":"!=k)g+=k;else{if(""==g||g!=(h=Number(g)))return e(ma,0,1);k=a.substr(l+1,h);if(g!=k.length)return e(ma,0,1);if(k.length){g=c.decodePacket(k,
b,!0);if(ma.type==g.type&&ma.data==g.data)return e(ma,0,1);if(!1===e(g,l+h,m))return}l+=h;g=""}if(""!=g)return e(ma,0,1)};c.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));k(a,function(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})},function(a,c){var e=c.reduce(function(a,b){var c;c="string"===typeof b?b.length:b.byteLength;return a+c.toString().length+c+2},0),g=new Uint8Array(e),h=0;c.forEach(function(a){var b="string"===typeof a,c=a;if(b){for(var c=
new Uint8Array(a.length),e=0;e<a.length;e++)c[e]=a.charCodeAt(e);c=c.buffer}b?g[h++]=0:g[h++]=1;a=c.byteLength.toString();for(e=0;e<a.length;e++)g[h++]=parseInt(a[e]);g[h++]=255;c=new Uint8Array(c);for(e=0;e<c.length;e++)g[h++]=c[e]});return b(g.buffer)})};c.encodePayloadAsBlob=function(a,b){k(a,function(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var e=new Uint8Array(a.length),g=0;g<a.length;g++)e[g]=a.charCodeAt(g);a=e.buffer;c[0]=0}for(var e=
(a instanceof ArrayBuffer?a.byteLength:a.size).toString(),h=new Uint8Array(e.length+1),g=0;g<e.length;g++)h[g]=parseInt(e[g]);h[e.length]=255;P&&(a=new P([c.buffer,h.buffer,a]),b(null,a))})},function(a,c){return b(new P(c))})};c.decodePayloadAsBinary=function(a,b,e){"function"===typeof b&&(e=b,b=null);for(var g=[],h=!1;0<a.byteLength;){for(var k=new Uint8Array(a),l=0===k[0],m="",p=1;255!=k[p];p++){if(310<m.length){h=!0;break}m+=k[p]}if(h)return e(ma,0,1);a=n(a,2+m.length);m=parseInt(m);k=n(a,0,m);
if(l)try{k=String.fromCharCode.apply(null,new Uint8Array(k))}catch(w){for(l=new Uint8Array(k),k="",p=0;p<l.length;p++)k+=String.fromCharCode(l[p])}g.push(k);a=n(a,m)}var L=g.length;g.forEach(function(a,g){e(c.decodePacket(a,b,!0),g,L)})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,b,c){b.exports=Object.keys||
function(a){var b=[],c=Object.prototype.hasOwnProperty,e;for(e in a)c.call(a,e)&&b.push(e);return b}},{}],21:[function(a,b,c){(function(c){var h=a("isarray");b.exports=function(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(h(a))for(var e=0;e<a.length;e++){if(b(a[e]))return!0}else if(a&&"object"==typeof a)for(e in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,
e)&&b(a[e]))return!0;return!1}return b(a)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:24}],22:[function(a,b,c){try{b.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(g){b.exports=!1}},{}],23:[function(a,b,c){var g=[].indexOf;b.exports=function(a,b){if(g)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],24:[function(a,b,c){b.exports=Array.isArray||
function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],25:[function(a,b,c){function g(a){a=""+a;if(!(1E4<a.length)&&(a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a))){var b=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*b;case "days":case "day":case "d":return 864E5*b;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*
b;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*b;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*b;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return b}}}function h(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}b.exports=function(a,b){b=b||{};return"string"==typeof a?g(a):b["long"]?h(a,864E5,"day")||h(a,36E5,"hour")||h(a,6E4,"minute")||h(a,1E3,"second")||a+" ms":864E5<=a?Math.round(a/
864E5)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],26:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,k=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,l=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,n=/^\s+/,p=/\s+$/;b.exports=function(b){if("string"!=typeof b||!b)return null;b=b.replace(n,"").replace(p,"");if(a.JSON&&JSON.parse)return JSON.parse(b);if(c.test(b.replace(k,"@").replace(l,"]").replace(m,
"")))return(new Function("return "+b))()}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],27:[function(a,b,c){c.encode=function(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};c.decode=function(a){var b={};a=a.split("&");for(var c=0,e=a.length;c<e;c++){var m=a[c].split("=");b[decodeURIComponent(m[0])]=decodeURIComponent(m[1])}return b}},{}],28:[function(a,
b,c){var g=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,h="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");b.exports=function(a){var b=a,c=a.indexOf("["),e=a.indexOf("]");-1!=c&&-1!=e&&(a=a.substring(0,c)+a.substring(c,e).replace(/:/g,";")+a.substring(e,
a.length));a=g.exec(a||"");for(var p={},r=14;r--;)p[h[r]]=a[r]||"";-1!=c&&-1!=e&&(p.source=b,p.host=p.host.substring(1,p.host.length-1).replace(/;/g,":"),p.authority=p.authority.replace("[","").replace("]","").replace(/;/g,":"),p.ipv6uri=!0);return p}},{}],29:[function(a,b,c){(function(a){(function(h){function k(a){for(var b=[],c=0,e=a.length,g,h;c<e;)g=a.charCodeAt(c++),55296<=g&&56319>=g&&c<e?(h=a.charCodeAt(c++),56320==(h&64512)?b.push(((g&1023)<<10)+(h&1023)+65536):(b.push(g),c--)):b.push(g);
return b}function l(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");}function m(){if(V>=J)throw Error("Invalid byte index");var a=L[V]&255;V++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function n(){var a,b,c,e;if(V>J)throw Error("Invalid byte index");if(V==J)return!1;a=L[V]&255;V++;if(0==(a&128))return a;if(192==(a&224)){b=m();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==
(a&240)){b=m();c=m();a=(a&15)<<12|b<<6|c;if(2048<=a)return l(a),a;throw Error("Invalid continuation byte");}if(240==(a&248)&&(b=m(),c=m(),e=m(),a=(a&15)<<18|b<<12|c<<6|e,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var p="object"==typeof c&&c,r="object"==typeof b&&b&&b.exports==p&&b,v="object"==typeof a&&a;if(v.global===v||v.window===v)h=v;var w=String.fromCharCode,L,J,V,v={version:"2.0.0",encode:function(a){a=k(a);for(var b=a.length,c=-1,e,g="";++c<b;){e=a[c];if(0==(e&4294967168))e=
w(e);else{var h="";0==(e&4294965248)?h=w(e>>6&31|192):0==(e&4294901760)?(l(e),h=w(e>>12&15|224),h+=w(e>>6&63|128)):0==(e&4292870144)&&(h=w(e>>18&7|240),h+=w(e>>12&63|128),h+=w(e>>6&63|128));e=h+=w(e&63|128)}g+=e}return g},decode:function(a){L=k(a);J=L.length;V=0;a=[];for(var b;!1!==(b=n());)a.push(b);b=a.length;for(var c=-1,e,g="";++c<b;)e=a[c],65535<e&&(e-=65536,g+=w(e>>>10&1023|55296),e=56320|e&1023),g+=w(e);return g}};if(p&&!p.nodeType)if(r)r.exports=v;else{h={}.hasOwnProperty;for(var ha in v)h.call(v,
ha)&&(p[ha]=v[ha])}else h.utf8=v})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],30:[function(a,b,c){function g(a){var b="";do b=k[a%64]+b,a=Math.floor(a/64);while(0<a);return b}function h(){var a=g(+new Date);return a!==p?(m=0,p=a):a+"."+g(m++)}for(var k="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),l={},m=0,n=0,p;64>n;n++)l[k[n]]=n;h.encode=g;h.decode=function(a){var b=0;for(n=0;n<a.length;n++)b=
64*b+l[a.charAt(n)];return b};b.exports=h},{}],31:[function(a,b,c){function g(a,b){"object"==typeof a&&(b=a,a=void 0);b=b||{};var c=h(a),e=c.source,g=c.id,k=c.path,k=n[g]&&k in n[g].nsps;b.forceNew||b["force new connection"]||!1===b.multiplex||k?(m("ignoring socket cache for %s",e),e=l(e,b)):(n[g]||(m("new io instance for %s",e),n[g]=l(e,b)),e=n[g]);return e.socket(c.path)}var h=a("./url"),k=a("socket.io-parser"),l=a("./manager"),m=a("debug")("socket.io-client");b.exports=c=g;var n=c.managers={};
c.protocol=k.protocol;c.connect=g;c.Manager=a("./manager");c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,b,c){function g(a,b){if(!(this instanceof g))return new g(a,b);a&&"object"==typeof a&&(b=a,a=void 0);b=b||{};b.path=b.path||"/socket.io";this.nsps={};this.subs=[];this.opts=b;this.reconnection(!1!==b.reconnection);this.reconnectionAttempts(b.reconnectionAttempts||Infinity);this.reconnectionDelay(b.reconnectionDelay||1E3);this.reconnectionDelayMax(b.reconnectionDelayMax||
5E3);this.randomizationFactor(b.randomizationFactor||.5);this.backoff=new v({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==b.timeout?2E4:b.timeout);this.readyState="closed";this.uri=a;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];this.encoder=new l.Encoder;this.decoder=new l.Decoder;(this.autoConnect=!1!==b.autoConnect)&&this.open()}var h=a("engine.io-client"),k=a("./socket");c=a("component-emitter");
var l=a("socket.io-parser"),m=a("./on"),n=a("component-bind"),p=a("debug")("socket.io-client:manager"),r=a("indexof"),v=a("backo2"),w=Object.prototype.hasOwnProperty;b.exports=g;g.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)w.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)};g.prototype.updateSocketIds=function(){for(var a in this.nsps)w.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)};c(g.prototype);g.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;
this._reconnection=!!a;return this};g.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};g.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};g.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);
return this};g.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&this.backoff.setMax(a);return this};g.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};g.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};g.prototype.open=g.prototype.connect=function(a){p("readyState %s",this.readyState);
if(~this.readyState.indexOf("open"))return this;p("opening %s",this.uri);var b=this.engine=h(this.uri,this.opts),c=this;this.readyState="opening";this.skipReconnect=!1;var e=m(b,"open",function(){c.onopen();a&&a()}),g=m(b,"error",function(b){p("connect_error");c.cleanup();c.readyState="closed";c.emitAll("connect_error",b);if(a){var e=Error("Connection error");e.data=b;a(e)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var k=this._timeout;p("connect attempt will timeout after %d",k);var l=
setTimeout(function(){p("connect attempt timed out after %d",k);e.destroy();b.close();b.emit("error","timeout");c.emitAll("connect_timeout",k)},k);this.subs.push({destroy:function(){clearTimeout(l)}})}this.subs.push(e);this.subs.push(g);return this};g.prototype.onopen=function(){p("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(m(a,"data",n(this,"ondata")));this.subs.push(m(a,"ping",n(this,"onping")));this.subs.push(m(a,"pong",n(this,"onpong")));this.subs.push(m(a,
"error",n(this,"onerror")));this.subs.push(m(a,"close",n(this,"onclose")));this.subs.push(m(this.decoder,"decoded",n(this,"ondecoded")))};g.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};g.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};g.prototype.ondata=function(a){this.decoder.add(a)};g.prototype.ondecoded=function(a){this.emit("packet",a)};g.prototype.onerror=function(a){p("error",a);this.emitAll("error",a)};g.prototype.socket=function(a){function b(){~r(e.connecting,
c)||e.connecting.push(c)}var c=this.nsps[a];if(!c){c=new k(this,a);this.nsps[a]=c;var e=this;c.on("connecting",b);c.on("connect",function(){c.id=e.engine.id});this.autoConnect&&b()}return c};g.prototype.destroy=function(a){a=r(this.connecting,a);~a&&this.connecting.splice(a,1);this.connecting.length||this.close()};g.prototype.packet=function(a){p("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var e=0;e<c.length;e++)b.engine.write(c[e],
a.options);b.encoding=!1;b.processPacketQueue()}))};g.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};g.prototype.cleanup=function(){p("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};g.prototype.close=g.prototype.disconnect=function(){p("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"==this.readyState&&this.cleanup();
this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};g.prototype.onclose=function(a){p("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};g.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)p("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=
!1;else{var b=this.backoff.duration();p("will wait %dms before reconnect attempt",b);this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(p("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(p("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(p("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}};
g.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,b,c){b.exports=function(a,b,c){a.on(b,c);return{destroy:function(){a.removeListener(b,c)}}}},{}],34:[function(a,b,c){function g(a,b){this.io=a;this.nsp=b;this.json=this;this.ids=0;this.acks=
{};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.io.autoConnect&&this.open()}var h=a("socket.io-parser");c=a("component-emitter");var k=a("to-array"),l=a("./on"),m=a("component-bind"),n=a("debug")("socket.io-client:socket"),p=a("has-binary");b.exports=g;var r={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},v=c.prototype.emit;c(g.prototype);
g.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[l(a,"open",m(this,"onopen")),l(a,"packet",m(this,"onpacket")),l(a,"close",m(this,"onclose"))]}};g.prototype.open=g.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};g.prototype.send=function(){var a=k(arguments);a.unshift("message");this.emit.apply(this,a);return this};g.prototype.emit=function(a){if(r.hasOwnProperty(a))return v.apply(this,
arguments),this;var b=k(arguments),c=h.EVENT;p(b)&&(c=h.BINARY_EVENT);c={type:c,data:b,options:{}};c.options.compress=!this.flags||!1!==this.flags.compress;"function"==typeof b[b.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),c.id=this.ids++);this.connected?this.packet(c):this.sendBuffer.push(c);delete this.flags;return this};g.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};g.prototype.onopen=function(){n("transport is open - connecting");"/"!=
this.nsp&&this.packet({type:h.CONNECT})};g.prototype.onclose=function(a){n("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",a)};g.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case h.CONNECT:this.onconnect();break;case h.EVENT:this.onevent(a);break;case h.BINARY_EVENT:this.onevent(a);break;case h.ACK:this.onack(a);break;case h.BINARY_ACK:this.onack(a);break;case h.DISCONNECT:this.ondisconnect();break;case h.ERROR:this.emit("error",a.data)}};
g.prototype.onevent=function(a){var b=a.data||[];n("emitting event %j",b);null!=a.id&&(n("attaching ack callback to event"),b.push(this.ack(a.id)));this.connected?v.apply(this,b):this.receiveBuffer.push(b)};g.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var e=k(arguments);n("sending ack %j",e);var g=p(e)?h.BINARY_ACK:h.ACK;b.packet({type:g,id:a,data:e})}}};g.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(n("calling ack %s with %j",a.id,a.data),b.apply(this,
a.data),delete this.acks[a.id]):n("bad ack %s",a.id)};g.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};g.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)v.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};g.prototype.ondisconnect=function(){n("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};
g.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};g.prototype.close=g.prototype.disconnect=function(){this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:h.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this};g.prototype.compress=function(a){this.flags=this.flags||{};this.flags.compress=a;return this}},{"./on":33,"component-bind":37,"component-emitter":38,
debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,b,c){(function(c){var h=a("parseuri"),k=a("debug")("socket.io-client:url");b.exports=function(a,b){var e=a;b=b||c.location;null==a&&(a=b.protocol+"//"+b.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(k("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),k("parse %s",a),e=h(a));e.port||(/^(http|ws)$/.test(e.protocol)?e.port=
"80":/^(http|ws)s$/.test(e.protocol)&&(e.port="443"));e.path=e.path||"/";var p=-1!==e.host.indexOf(":")?"["+e.host+"]":e.host;e.id=e.protocol+"://"+p+":"+e.port;e.href=e.protocol+"://"+p+(b&&b.port==e.port?"":":"+e.port);return e}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,b,c){function g(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&
1>=a.jitter?a.jitter:0;this.attempts=0}b.exports=g;g.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter)var b=Math.random(),c=Math.floor(b*this.jitter*a),a=0==(Math.floor(10*b)&1)?a-c:a+c;return Math.min(a,this.max)|0};g.prototype.reset=function(){this.attempts=0};g.prototype.setMin=function(a){this.ms=a};g.prototype.setMax=function(a){this.max=a};g.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,b,c){var g=[].slice;b.exports=function(a,
b){"string"==typeof b&&(b=a[b]);if("function"!=typeof b)throw Error("bind() requires a function");var c=g.call(arguments,2);return function(){return b.apply(a,c.concat(g.call(arguments)))}}},{}],38:[function(a,b,c){function g(a){if(a){for(var b in g.prototype)a[b]=g.prototype[b];return a}}b.exports=g;g.prototype.on=g.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b);return this};g.prototype.once=function(a,b){function c(){this.off(a,
c);b.apply(this,arguments)}c.fn=b;this.on(a,c);return this};g.prototype.off=g.prototype.removeListener=g.prototype.removeAllListeners=g.prototype.removeEventListener=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e,g=0;g<c.length;g++)if(e=c[g],e===b||e.fn===b){c.splice(g,1);break}return this};g.prototype.emit=function(a){this._callbacks=
this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c)for(var c=c.slice(0),e=0,g=c.length;e<g;++e)c[e].apply(this,b);return this};g.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};g.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,
b,c){(function(c){var h=a("isarray");b.exports=function(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(h(a))for(var e=0;e<a.length;e++){if(b(a[e]))return!0}else if(a&&"object"==typeof a)for(e in a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,e)&&b(a[e]))return!0;return!1}return b(a)}}).call(this,"undefined"!==
typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:43}],42:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{dup:23}],43:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,b,c){(function(b){var e=a("isarray"),k=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;
if(k(a)){var g={_placeholder:!0,num:c.length};c.push(a);return g}if(e(a)){for(var g=Array(a.length),l=0;l<a.length;l++)g[l]=b(a[l]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(l in a)g[l]=b(a[l]);return g}return a}var c=[];a.data=b(a.data);a.attachments=c.length;return{packet:a,buffers:c}};c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder)return b[a.num];if(e(a))for(var g=0;g<a.length;g++)a[g]=c(a[g]);else if(a&&"object"==typeof a)for(g in a)a[g]=c(a[g]);return a}
a.data=c(a.data);a.attachments=void 0;return a};c.removeBlobs=function(a,c){function n(a,l,L){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){p++;var J=new FileReader;J.onload=function(){L?L[l]=this.result:r=this.result;--p||c(r)};J.readAsArrayBuffer(a)}else if(e(a))for(J=0;J<a.length;J++)n(a[J],J,a);else if(a&&"object"==typeof a&&!k(a))for(J in a)n(a[J],J,a)}var p=0,r=a;n(r);p||c(r)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==
typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,b,c){function g(){}function h(a){var b,e=!1;b=""+a.type;if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)b+=a.attachments,b+="-";a.nsp&&"/"!=a.nsp&&(e=!0,b+=a.nsp);null!=a.id&&(e&&(b+=",",e=!1),b+=a.id);null!=a.data&&(e&&(b+=","),b+=p.stringify(a.data));n("encoded %j as %s",a,b);return b}function k(a,b){r.removeBlobs(a,function(a){var c=r.deconstructPacket(a);a=h(c.packet);c=c.buffers;c.unshift(a);b(c)})}function l(){this.reconstructor=
null}function m(a){this.reconPack=a;this.buffers=[]}var n=a("debug")("socket.io-parser"),p=a("json3");a("isarray");b=a("component-emitter");var r=a("./binary"),v=a("./is-buffer");c.protocol=4;c.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");c.CONNECT=0;c.DISCONNECT=1;c.EVENT=2;c.ACK=3;c.ERROR=4;c.BINARY_EVENT=5;c.BINARY_ACK=6;c.Encoder=g;c.Decoder=l;g.prototype.encode=function(a,b){n("encoding packet %j",a);if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)k(a,b);else{var e=
h(a);b([e])}};b(l.prototype);l.prototype.add=function(a){if("string"==typeof a){a:{var b={},e=0;b.type=Number(a.charAt(0));if(null==c.types[b.type])a={type:c.ERROR,data:"parser error"};else{if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var g="";"-"!=a.charAt(++e)&&(g+=a.charAt(e),e!=a.length););if(g!=Number(g)||"-"!=a.charAt(e))throw Error("Illegal attachments");b.attachments=Number(g)}if("/"==a.charAt(e+1))for(b.nsp="";++e;){g=a.charAt(e);if(","==g)break;b.nsp+=g;if(e==a.length)break}else b.nsp=
"/";g=a.charAt(e+1);if(""!==g&&Number(g)==g){for(b.id="";++e;){g=a.charAt(e);if(null==g||Number(g)!=g){--e;break}b.id+=a.charAt(e);if(e==a.length)break}b.id=Number(b.id)}if(a.charAt(++e))try{b.data=p.parse(a.substr(e))}catch(h){a={type:c.ERROR,data:"parser error"};break a}n("decoded %s as %j",a,b);a=b}}c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?(this.reconstructor=new m(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(v(a)||a.base64)if(this.reconstructor){if(a=
this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};m.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=r.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};m.prototype.finishedReconstruction=
function(){this.reconPack=null;this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(a,b,c){(function(a){b.exports=function(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],49:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(a,b,c){(function(a){(function(){function h(a,
b){function c(a){if(c[a]!==da)return c[a];var h;if("bug-string-char-index"==a)h=!1;else if("json"==a)h=c("json-stringify")&&c("json-parse");else{var k;if("json-stringify"==a){h=b.stringify;var l="function"==typeof h&&M;if(l){(k=function(){return 1}).toJSON=k;try{l="0"===h(0)&&"0"===h(new e)&&'""'==h(new g)&&h(T)===da&&h(da)===da&&h()===da&&"1"===h(k)&&"[1]"==h([k])&&"[null]"==h([da])&&"null"==h(null)&&"[null,null,null]"==h([da,T,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==h({a:[k,
!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===h(null,k)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new n(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==h(new n(864E13))&&'"-000001-01-01T00:00:00.000Z"'==h(new n(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==h(new n(-1))}catch(m){l=!1}}h=l}if("json-parse"==a){h=b.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){k=h('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var p=5==k.a.length&&1===k.a[0];if(p){try{p=!h('"\t"')}catch(m){}if(p)try{p=
1!==h("01")}catch(m){}if(p)try{p=1!==h("1.")}catch(m){}}}}catch(m){p=!1}h=p}}return c[a]=!!h}a||(a=m.Object());b||(b=m.Object());var e=a.Number||m.Number,g=a.String||m.String,l=a.Object||m.Object,n=a.Date||m.Date,p=a.SyntaxError||m.SyntaxError,r=a.TypeError||m.TypeError,v=a.Math||m.Math,w=a.JSON||m.JSON;"object"==typeof w&&w&&(b.stringify=w.stringify,b.parse=w.parse);var l=l.prototype,T=l.toString,W,Da,da,M=new n(-0xc782b5b800cec);try{M=-109252==M.getUTCFullYear()&&0===M.getUTCMonth()&&1===M.getUTCDate()&&
10==M.getUTCHours()&&37==M.getUTCMinutes()&&6==M.getUTCSeconds()&&708==M.getUTCMilliseconds()}catch(zc){}if(!c("json")){var ua=c("bug-string-char-index");if(!M)var wa=v.floor,Nb=[0,31,59,90,120,151,181,212,243,273,304,334],Va=function(a,b){return Nb[b]+365*(a-1970)+wa((a-1969+(b=+(1<b)))/4)-wa((a-1901+b)/100)+wa((a-1601+b)/400)};(W=l.hasOwnProperty)||(W=function(a){var b={},c;(b.__proto__=null,b.__proto__={toString:1},b).toString!=T?W=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);
this.__proto__=b;return a}:(c=b.constructor,W=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])});b=null;return W.call(this,a)});Da=function(a,b){var c=0,e,g,h;(e=function(){this.valueOf=0}).prototype.valueOf=0;g=new e;for(h in g)W.call(g,h)&&c++;e=g=null;c?Da=2==c?function(a,b){var c={},e="[object Function]"==T.call(a),g;for(g in a)e&&"prototype"==g||W.call(c,g)||!(c[g]=1)||!W.call(a,g)||b(g)}:function(a,b){var c="[object Function]"==T.call(a),e,g;for(e in a)c&&
"prototype"==e||!W.call(a,e)||(g="constructor"===e)||b(e);(g||W.call(a,e="constructor"))&&b(e)}:(g="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),Da=function(a,b){var c="[object Function]"==T.call(a),e,h=!c&&"function"!=typeof a.constructor&&k[typeof a.hasOwnProperty]&&a.hasOwnProperty||W;for(e in a)c&&"prototype"==e||!h.call(a,e)||b(e);for(c=g.length;e=g[--c];h.call(a,e)&&b(e));});return Da(a,b)};if(!c("json-stringify")){var Ac={92:"\\\\",
34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},na=function(a,b){return("000000"+(b||0)).slice(-a)},Ya=function(a){for(var b='"',c=0,e=a.length,g=!ua||10<e,h=g&&(ua?a.split(""):a);c<e;c++){var k=a.charCodeAt(c);switch(k){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=Ac[k];break;default:b=32>k?b+("\\u00"+na(2,k.toString(16))):b+(g?h[c]:a.charAt(c))}}return b+'"'},Za=function(a,b,c,e,g,h,k){var l,m,n,p,w,v,x,L,J;try{l=b[a]}catch(M){}if("object"==typeof l&&l)if(m=T.call(l),"[object Date]"!=
m||W.call(l,"toJSON"))"function"==typeof l.toJSON&&("[object Number]"!=m&&"[object String]"!=m&&"[object Array]"!=m||W.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&l<1/0){if(Va){p=wa(l/864E5);for(m=wa(p/365.2425)+1970-1;Va(m+1,0)<=p;m++);for(n=wa((p-Va(m,0))/30.42);Va(m,n+1)<=p;n++);p=1+p-Va(m,n);w=(l%864E5+864E5)%864E5;v=wa(w/36E5)%24;x=wa(w/6E4)%60;L=wa(w/1E3)%60;w%=1E3}else m=l.getUTCFullYear(),n=l.getUTCMonth(),p=l.getUTCDate(),v=l.getUTCHours(),x=l.getUTCMinutes(),L=l.getUTCSeconds(),w=
l.getUTCMilliseconds();l=(0>=m||1E4<=m?(0>m?"-":"+")+na(6,0>m?-m:m):na(4,m))+"-"+na(2,n+1)+"-"+na(2,p)+"T"+na(2,v)+":"+na(2,x)+":"+na(2,L)+"."+na(3,w)+"Z"}else l=null;c&&(l=c.call(b,a,l));if(null===l)return"null";m=T.call(l);if("[object Boolean]"==m)return""+l;if("[object Number]"==m)return l>-1/0&&l<1/0?""+l:"null";if("[object String]"==m)return Ya(""+l);if("object"==typeof l){for(a=k.length;a--;)if(k[a]===l)throw r();k.push(l);J=[];b=h;h+=g;if("[object Array]"==m){n=0;for(a=l.length;n<a;n++)m=Za(n,
l,c,e,g,h,k),J.push(m===da?"null":m);a=J.length?g?"[\n"+h+J.join(",\n"+h)+"\n"+b+"]":"["+J.join(",")+"]":"[]"}else Da(e||l,function(a){var b=Za(a,l,c,e,g,h,k);b!==da&&J.push(Ya(a)+":"+(g?" ":"")+b)}),a=J.length?g?"{\n"+h+J.join(",\n"+h)+"\n"+b+"}":"{"+J.join(",")+"}":"{}";k.pop();return a}};b.stringify=function(a,b,c){var e,g,h,l;if(k[typeof b]&&b)if("[object Function]"==(l=T.call(b)))g=b;else if("[object Array]"==l){h={};for(var m=0,n=b.length,p;m<n;p=b[m++],(l=T.call(p),"[object String]"==l||"[object Number]"==
l)&&(h[p]=1));}if(c)if("[object Number]"==(l=T.call(c))){if(0<(c-=c%1))for(e="",10<c&&(c=10);e.length<c;e+=" ");}else"[object String]"==l&&(e=10>=c.length?c:c.slice(0,10));return Za("",(p={},p[""]=a,p),g,h,e,"",[])}}if(!c("json-parse")){var Qb=g.fromCharCode,xa={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},x,va,S=function(){x=va=null;throw p();},ea=function(){for(var a=va,b=a.length,c,e,g,h,k;x<b;)switch(k=a.charCodeAt(x),k){case 9:case 10:case 13:case 32:x++;break;case 123:case 125:case 91:case 93:case 58:case 44:return c=
ua?a.charAt(x):a[x],x++,c;case 34:c="@";for(x++;x<b;)if(k=a.charCodeAt(x),32>k)S();else if(92==k)switch(k=a.charCodeAt(++x),k){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=xa[k];x++;break;case 117:e=++x;for(g=x+4;x<g;x++)k=a.charCodeAt(x),48<=k&&57>=k||97<=k&&102>=k||65<=k&&70>=k||S();c+=Qb("0x"+a.slice(e,x));break;default:S()}else{if(34==k)break;k=a.charCodeAt(x);for(e=x;32<=k&&92!=k&&34!=k;)k=a.charCodeAt(++x);c+=a.slice(e,x)}if(34==a.charCodeAt(x))return x++,c;S();default:e=
x;45==k&&(h=!0,k=a.charCodeAt(++x));if(48<=k&&57>=k){for(48==k&&(k=a.charCodeAt(x+1),48<=k&&57>=k)&&S();x<b&&(k=a.charCodeAt(x),48<=k&&57>=k);x++);if(46==a.charCodeAt(x)){for(g=++x;g<b&&(k=a.charCodeAt(g),48<=k&&57>=k);g++);g==x&&S();x=g}k=a.charCodeAt(x);if(101==k||69==k){k=a.charCodeAt(++x);43!=k&&45!=k||x++;for(g=x;g<b&&(k=a.charCodeAt(g),48<=k&&57>=k);g++);g==x&&S();x=g}return+a.slice(e,x)}h&&S();if("true"==a.slice(x,x+4))return x+=4,!0;if("false"==a.slice(x,x+5))return x+=5,!1;if("null"==a.slice(x,
x+4))return x+=4,null;S()}return"$"},Wa=function(a){var b,c;"$"==a&&S();if("string"==typeof a){if("@"==(ua?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;c||(c=!0)){a=ea();if("]"==a)break;c&&(","==a?(a=ea(),"]"==a&&S()):S());","==a&&S();b.push(Wa(a))}return b}if("{"==a){for(b={};;c||(c=!0)){a=ea();if("}"==a)break;c&&(","==a?(a=ea(),"}"==a&&S()):S());","!=a&&"string"==typeof a&&"@"==(ua?a.charAt(0):a[0])&&":"==ea()||S();b[a.slice(1)]=Wa(ea())}return b}S()}return a},rb=function(a,b,c){c=qb(a,
b,c);c===da?delete a[b]:a[b]=c},qb=function(a,b,c){var e=a[b],g;if("object"==typeof e&&e)if("[object Array]"==T.call(e))for(g=e.length;g--;)rb(e,g,c);else Da(e,function(a){rb(e,a,c)});return c.call(a,b,e)};b.parse=function(a,b){var c,e;x=0;va=""+a;c=Wa(ea());"$"!=ea()&&S();x=va=null;return b&&"[object Function]"==T.call(b)?qb((e={},e[""]=c,e),"",b):c}}}b.runInContext=h;return b}var k={"function":!0,object:!0},l=k[typeof c]&&c&&!c.nodeType&&c,m=k[typeof window]&&window||this,n=l&&k[typeof b]&&b&&!b.nodeType&&
"object"==typeof a&&a;!n||n.global!==n&&n.window!==n&&n.self!==n||(m=n);if(l)h(m,l);else{var p=m.JSON,r=m.JSON3,v=!1,w=h(m,m.JSON3={noConflict:function(){v||(v=!0,m.JSON=p,m.JSON3=r,p=r=null);return w}});m.JSON={parse:w.parse,stringify:w.stringify}}}).call(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],51:[function(a,b,c){b.exports=function(a,b){for(var c=[],e=(b=b||0)||0;e<a.length;e++)c[e-b]=a[e];return c}},{}]},{},
[31])(31)});(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):function(){var e=b.Ractive,c=a();c.noConflict=function(){b.Ractive=e;return c};return b.Ractive=c}()})(this,function(){function b(){return N.createDocumentFragment()}function a(d){var q;if(d&&"boolean"!==typeof d)return fa&&N&&d?d.nodeType?d:"string"===typeof d&&(q=N.getElementById(d),!q&&N.querySelector&&(q=N.querySelector(d)),q&&q.nodeType)?q:d[0]&&d[0].nodeType?
d[0]:null:null}function e(d){d&&"unknown"!==typeof d.parentNode&&d.parentNode&&d.parentNode.removeChild(d);return d}function c(d){return null!=d&&d.toString?""+d:""}function g(d){return c(d).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function h(d){return d.replace(tg,function(d){return d.charAt(1).toUpperCase()})}function k(d){return d.replace(ug,function(d){return"-"+d.toLowerCase()})}function l(d){for(var q=[],f=arguments.length-1;0<f--;)q[f]=arguments[f+1];var a;q.forEach(function(q){for(a in q)Xa.call(q,
a)&&(d[a]=q[a])});return d}function m(d){for(var q=[],f=arguments.length-1;0<f--;)q[f]=arguments[f+1];q.forEach(function(q){for(var f in q)!Xa.call(q,f)||f in d||(d[f]=q[f])});return d}function n(d){return"[object Array]"===Rd.call(d)}function p(d,q){return null===d&&null===q?!0:"object"===typeof d||"object"===typeof q?!1:d===q}function r(d){return!isNaN(parseFloat(d))&&isFinite(d)}function v(d){return d&&"[object Object]"===Rd.call(d)}function w(){}function L(d,q){return d.replace(/%s/g,function(){return q.shift()})}
function J(d){for(var q=[],f=arguments.length-1;0<f--;)q[f]=arguments[f+1];d=L(d,q);throw Error(d);}function V(){Z.DEBUG&&Bc.apply(null,arguments)}function ha(d){for(var q=[],f=arguments.length-1;0<f--;)q[f]=arguments[f+1];d=L(d,q);Rb(d,q)}function ma(d){for(var q=[],f=arguments.length-1;0<f--;)q[f]=arguments[f+1];d=L(d,q);Sd[d]||(Sd[d]=!0,Rb(d,q))}function P(){Z.DEBUG&&ha.apply(null,arguments)}function Y(){Z.DEBUG&&ma.apply(null,arguments)}function pb(d,q,f){return(q=yc(d,q,f))?q[d][f]:null}function yc(d,
q,f){for(;q;){if(f in q[d])return q;if(q.isolated)return null;q=q.parent}}function Mb(d,q,f,a){if(d===q)return null;if(a){if(f=pb("interpolators",f,a))return f(d,q)||null;J(ab(a,"interpolator"))}return Sb.number(d,q)||Sb.array(d,q)||Sb.object(d,q)||null}function pg(d){return function(){return d}}function T(d,q){-1===d.indexOf(q)&&d.push(q)}function W(d,q){for(var f=0,a=d.length;f<a;f++)if(d[f]==q)return!0;return!1}function Da(d){return"string"===typeof d?[d]:void 0===d?[]:d}function da(d){return d[d.length-
1]}function M(d,q){if(d){var f=d.indexOf(q);-1!==f&&d.splice(f,1)}}function ua(d){for(var q=[],f=d.length;f--;)q[f]=d[f];return q}function wa(d,q){return function(){for(var f;f=d.shift();)f(q)}}function Nb(d,q,f,a){var b;if(q===d)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(q instanceof ya)q.then(f,a);else if(!q||"object"!==typeof q&&"function"!==typeof q)f(q);else{try{b=q.then}catch(c){a(c);return}if("function"===typeof b){var e,g,h;g=function(q){e||(e=
!0,Nb(d,q,f,a))};h=function(d){e||(e=!0,a(d))};try{b.call(q,g,h)}catch(c){e||(a(c),e=!0)}}else f(q)}}function Va(d){d.detach()}function Ac(d){d.detachNodes()}function na(d){!d.ready||d.outros.length||d.outroChildren||(d.outrosComplete||(d.outrosComplete=!0,d.parent&&!d.parent.outrosComplete?d.parent.decrementOutros(d):d.detachNodes()),d.intros.length||d.totalChildren||("function"===typeof d.callback&&d.callback(),d.parent&&!d.notifiedTotal&&(d.notifiedTotal=!0,d.parent.decrementTotal())))}function Ya(d,
q){if(q){for(var a=d.children.length;a--;)q=Ya(d.children[a],q);return q=q.concat(d.outros)}q=[];for(a=d;a.parent;)a=a.parent;return Ya(a,q)}function Za(d){d.dispatch()}function Qb(){var d=O.immediateObservers;O.immediateObservers=[];d.forEach(Za);var q=O.fragments.length,a,d=O.fragments;O.fragments=[];var b=O.ractives;for(O.ractives=[];q--;){a=d[q];var c=a.ractive;Object.keys(c.viewmodel.changes).length&&Td.fire(c,c.viewmodel.changes);c.viewmodel.changes={};M(b,c);a.update()}for(q=b.length;q--;)d=
b[q],Td.fire(d,d.viewmodel.changes),d.viewmodel.changes={};O.transitionManager.ready();d=O.deferredObservers;O.deferredObservers=[];d.forEach(Za);b=O.tasks;O.tasks=[];for(q=0;q<b.length;q+=1)b[q]();if(O.fragments.length||O.immediateObservers.length||O.deferredObservers.length||O.ractives.length||O.tasks.length)return Qb()}function xa(d){return"string"===typeof d?d.replace(vg,"\\$&"):d}function x(d){var q=[],a;for(d=d?d.replace(Cc,".$1"):"";a=wg.exec(d);)a=a.index+a[1].length,q.push(d.substr(0,a)),
d=d.substr(a+1);q.push(d);return q}function va(d){return"string"===typeof d?d.replace(xg,"$1$2"):d}function S(d,q){if(!/this/.test(d.toString()))return d;var a=d.bind(q),b;for(b in d)a[b]=d[b];return a}function ea(d,q){for(var a=I.start(d,!0),b=q.length;b--;){var c=q[b],e=c[0],c=c[1];"function"===typeof c&&(c=S(c,d));e.set(c)}I.end();return a}function Wa(d,q,a){void 0===a&&(a=d.viewmodel);return yg.test(q)?a.findMatches(x(q)):[a.joinAll(x(q))]}function rb(d,q,a){var b=[];if(v(q)){var c=function(a){q.hasOwnProperty(a)&&
b.push.apply(b,Wa(d,a).map(function(d){return[d,q[a]]}))},e;for(e in q)c(e)}else b.push.apply(b,Wa(d,q).map(function(d){return[d,a]}));return b}function qb(d,q,a){if("string"!==typeof q||!r(a))throw Error("Bad arguments");q=rb(d,q,a);return ea(d,q.map(function(d){var q=d[0];d=d[1];var a=q.get();if(!r(d)||!r(a))throw Error("Cannot add to a non-numeric value");return[q,a+d]}))}function zc(d,q,a,b){b=b||{};var c;b.easing&&(c="function"===typeof b.easing?b.easing:d.easing[b.easing]);b={easing:c||zg,duration:"duration"in
b?b.duration:400,complete:b.complete||w,step:b.step||w};c=q.get();if(p(c,a))return b.complete(b.to),Dc;d=Mb(c,a,d,b.interpolator);return d?q.animate(c,a,b,d):(I.start(),q.set(a),I.end(),Dc)}function qg(d,q){return d.compareDocumentPosition?d.compareDocumentPosition(q)&2?1:-1:Gd(d,q)}function Gd(d,q){for(var a=Id(d.component||d._ractive.proxy),b=Id(q.component||q._ractive.proxy),c=da(a),e=da(b),g;c&&c===e;)a.pop(),b.pop(),g=c,c=da(a),e=da(b);var c=c.component||c,e=e.component||e,h=c.parentFragment,
k=e.parentFragment;if(h===k)return h=h.items.indexOf(c),k=k.items.indexOf(e),h-k||a.length-b.length;if(e=g.iterations)return h=e.indexOf(h),k=e.indexOf(k),h-k||a.length-b.length;throw Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!");}function Hd(d){var q=d.parentFragment;if(q||d.component&&(q=d.component.parentFragment))return q.owner}function Id(d){var q=[d];for(d=Hd(d);d;)q.push(d),
d=Hd(d);return q}function rg(d){var q,a,b,c,e;q=x(d);(d=Tb[q.length])||(d=sg(q.length));c=[];a=function(d,a){return d?"*":q[a]};for(b=d.length;b--;)e=d[b].map(a).join("."),c.hasOwnProperty(e)||(c.push(e),c[e]=!0);return c}function sg(d){var a="",f,b,c,e,g,h,k;if(!Tb[d]){for(b=[];a.length<d;)a+=1;a=parseInt(a,2);c=function(d){return"1"===d};for(e=0;e<=a;e+=1){for(f=e.toString(2);f.length<d;)f="0"+f;k=[];h=f.length;for(g=0;g<h;g++)k.push(c(f[g]));b[e]=k}Tb[d]=b}return Tb[d]}function Jd(d,a,f){void 0===
f&&(f={});if(a)return f.event?f.event.name=a:f.event={name:a,_noArg:!0},a=Kd(a),Ld(d,a,f.event,f.args,!0)}function Kd(d){return Ec.hasOwnProperty(d)?Ec[d]:Ec[d]=rg(d)}function Ld(d,a,f,b,c){void 0===c&&(c=!1);var e,g,h=!0;d.event&&d._eventQueue.push(d.event);d.event=f;for(g=a.length;0<=g;g--)if(e=d._subs[a[g]]){var k=d,l=f,m=b,n=null,p=!1;l&&!l._noArg&&(m=[l].concat(m));e=e.slice();for(var r=0,w=e.length;r<w;r+=1)e[r].off||!1!==e[r].apply(k,m)||(p=!0);l&&!l._noArg&&p&&(n=l.original)&&(n.preventDefault&&
n.preventDefault(),n.stopPropagation&&n.stopPropagation());h=!p&&h}d.event=d._eventQueue.length?d._eventQueue.pop():null;d.parent&&h&&(c&&d.component&&(a=Kd(d.component.name+"."+a[a.length-1]),f&&!f.component&&(f.component=d)),Ld(d.parent,a,f,b));return h}function Md(d){throw Error("An index or key reference ("+d+") cannot have child properties");}function Nd(d,a){for(var f=d.findContext().root,b=x(a),c=b[0],e,g,h;d;){if(d.isIteration){if(c===d.parent.keyRef)return 1<b.length&&Md(c),d.context.getKeyModel(d.key);
if(c===d.parent.indexRef)return 1<b.length&&Md(c),d.context.getKeyModel(d.index)}if(((h=d.owner.aliases)||(h=d.aliases))&&h.hasOwnProperty(c)){var k=h[c];if(1===b.length)return k;if("function"===typeof k.joinAll)return k.joinAll(b.slice(1))}if(d.context){if(!d.isRoot||d.ractive.component)e=!0;if(d.context.has(c))return g?f.createLink(c,d.context.joinKey(b.shift()),c).joinAll(b):d.context.joinAll(b)}d.componentParent&&!d.ractive.isolated?(d=d.componentParent,g=!0):d=d.parent}if(!e)return f.joinAll(b)}
function Od(){var d=sb.pop();tb=sb[sb.length-1];return d}function Oa(d){tb&&tb.push(d)}function Ob(d){d.bind()}function Pd(d){d.cancel()}function aa(d){d.handleChange()}function Pb(d){d.mark()}function bb(d){d.marked()}function Ud(d){d.notifiedUpstream()}function Fc(d){d.render()}function Gc(d){d.teardown()}function Ea(d){d.unbind()}function ub(d){d.unrender()}function Vd(d){d.unrender(!0)}function cb(d){d.update()}function Wd(d){return d.toString()}function Xd(d){return d.toString(!0)}function Yd(d){d.updateFromBindings(!0)}
function Zd(d){for(var a=d.length;a--;)if(d[a].bound){var f=d[a].owner;if(f)return{value:"checked"===f.name?f.node.checked:f.node.value}}}function db(d){if(d){var a=Hc[d];Hc[d]=[];for(var f=a.length;f--;)a[f]();a=Ic[d];Ic[d]=[];for(f=a.length;f--;)a[f].model.register(a[f].item)}else db("early"),db("mark")}function Pa(d,a,f){d=d.r||d;if(!d||"string"!==typeof d||"."===d||"@"===d[0]||(a||f).isKey||(a||f).isKeypath)return a;d=d.split("/");d=x(d[d.length-1]);for(var b=a||f,c=d.length,e=!0,g=!1;b&&c--;)b.shuffling&&
(g=!0),d[c]!=b.key&&(e=!1),b=b.parent;return!a&&e&&g?f:a&&!e&&g?f:a}function $d(){I.start();var d=ae(),a,f;for(a=0;a<vb.length;a+=1)f=vb[a],f.tick(d)||vb.splice(a--,1);I.end();vb.length?be($d):ce=!1}function Ag(d){var a;Jc[d]||(a=d?d+".":"",Jc[d]=function(f,b){var c;if("string"===typeof f)return c={},c[a+f]=b,c;if("object"===typeof f){if(a){c=d;var e={},g;if(c){c+=".";for(g in f)f.hasOwnProperty(g)&&(e[c+g]=f[g]);c=e}else c=f}else c=f;return c}});return Jc[d]}function Bg(d){for(var a=[],f=0;f<d.length;f++)a[f]=
(d.childByKey[f]||{}).value;return a}function pa(d,a){var f=d.findContext();if("."===a||"this"===a)return f;if(0===a.indexOf("@keypath")){var b=de.exec(a);return b&&b[1]&&(b=pa(d,b[1]))?b.getKeypathModel():f.getKeypathModel()}if(0===a.indexOf("@rootpath")){for(;f.isRoot&&f.ractive.component;)f=f.ractive.component.parentFragment.findContext();return(b=de.exec(a))&&b[1]&&(b=pa(d,b[1]))?b.getKeypathModel(d.ractive.root):f.getKeypathModel(d.ractive.root)}if("@index"===a||"@key"===a)return f=d.findRepeatingFragment(),
f.isIteration?f.context.getKeyModel(f["i"===a[1]?"index":"key"]):void 0;if("@this"===a)return d.ractive.viewmodel.getRactiveModel();if("@global"===a)return ee;if("~"===a[0])return d.ractive.viewmodel.joinAll(x(a.slice(2)));if("."===a[0]){for(b=a.split("/");"."===b[0]||".."===b[0];)".."===b.shift()&&(f=f.parent);a=b.join("/");"."===a[0]&&(a=a.slice(1));return f.joinAll(x(a))}return Nd(d,a)}function fe(d){for(var a={},f={};d;){if(d.parent&&(d.parent.indexRef||d.parent.keyRef)){var b=d.parent.indexRef;
!b||b in f||(f[b]=d.index);!(b=d.parent.keyRef)||b in a||(a[b]=d.key)}d=d.componentParent&&!d.ractive.isolated?d.componentParent:d.parent}return{key:a,index:f}}function ge(d,a,f){var b=[],c,e,g;a=Cg(d,a,f);if(!a)return null;e=a.length-2-a[1];f=Math.min(d,a[0]);c=f+a[1];b.startIndex=f;for(g=0;g<f;g+=1)b.push(g);for(;g<c;g+=1)b.push(-1);for(;g<d;g+=1)b.push(g+e);b.touchedFrom=0!==e?a[0]:d;return b}function Cg(d,a,f){switch(a){case "splice":void 0!==f[0]&&0>f[0]&&(f[0]=d+Math.max(f[0],-d));for(void 0===
f[0]&&(f[0]=0);2>f.length;)f.push(d-f[0]);"number"!==typeof f[1]&&(f[1]=d-f[0]);f[1]=Math.min(f[1],d-f[0]);return f;case "sort":case "reverse":return null;case "pop":return d?[d-1,1]:[0,0];case "push":return[d,0].concat(f);case "shift":return[0,d?1:0];case "unshift":return[0,0].concat(f)}}function oa(d){function a(q,b){var c=q.get();if(!n(c)){if(void 0===c){var c=[],e=he[d].apply(c,b),g=I.start(this,!0).then(function(){return e});q.set(c);I.end();return g}throw Error("shuffle array method "+d+" called on non-array at "+
q.getKeypath());}var g=ge(c.length,d,b),h=he[d].apply(c,b),c=I.start(this,!0).then(function(){return h});c.result=h;g?q.shuffle(g):q.set(h);I.end();return c}return{path:function(d){for(var b=[],c=arguments.length-1;0<c--;)b[c]=arguments[c+1];return a(this.viewmodel.joinAll(x(d)),b)},model:a}}function Dg(d){if(!d)return null;if(!0===d)return JSON.stringify;if("function"===typeof d)return d;if("string"===typeof d)return ie[d]||(ie[d]=function(a){return a[d]});throw Error("If supplied, options.compare must be a string, function, or `true`");
}function je(d,a,f,b){d=I.start(d,!0);var c=a.get();if(!n(c)||!n(f))throw Error("You cannot merge an array with a non-array");b=Dg(b&&b.compare);a.merge(f,b);I.end();return d}function ke(d,a){a.parent&&a.parent.wrapper&&a.parent.adapt();var f=I.start(d,!0);a.mark();a.registerChange(a.getKeypath(),a.get());if(!a.isRoot)for(var b=a.parent,c=a.key;b&&!b.isRoot;)b.clearUnresolveds&&b.clearUnresolveds(c),c=b.key,b=b.parent;a.notifyUpstream();I.end();Eg.fire(d,a);return f}function Kc(d,a,f){var b=[];if(v(a))for(var c in a)a.hasOwnProperty(c)&&
b.push([ba(d,c).model,a[c]]);else b.push([ba(d,a).model,f]);return b}function Fg(d){return d?(d=pa(this._element.parentFragment,d))?d.get(!0):void 0:this._element.parentFragment.findContext().get(!0)}function Gg(d,a){var f=ba(this,d),b=f.model,f=f.instance;return b?b.getKeypath(a||f):d}function ba(d,a){var f=d._element.parentFragment;return"string"!==typeof a?{model:f.findContext(),instance:a}:{model:pa(f,a),instance:f.ractive}}function Hg(d,a){void 0===a&&(a=1);if(!r(a))throw Error("Bad arguments");
return ea(this.ractive,Kc(this,d,a).map(function(d){var a=d[0];d=d[1];var q=a.get();if(!r(d)||!r(q))throw Error("Cannot add non-numeric value");return[a,q+d]}))}function Ig(d,a,f){d=ba(this,d).model;return zc(this.ractive,d,a,f)}function Jg(d,a){var f=ba(this,d).model,b=ba(this,a).model,c=I.start(this.ractive,!0);b.link(f,d);I.end();return c}function Kg(d,a,f){return je(this.ractive,ba(this,d).model,a,f)}function Lg(d){return Mg(ba(this,d).model,[])}function Ng(d){for(var a=[],f=arguments.length-
1;0<f--;)a[f]=arguments[f+1];return Og(ba(this,d).model,a)}function Pg(d){return Qg(ba(this,d).model,[])}function Rg(d,a){return ea(this.ractive,Kc(this,d,a))}function Sg(d){return Tg(ba(this,d).model,[])}function Ug(d,a,f){for(var b=[],c=arguments.length-3;0<c--;)b[c]=arguments[c+3];b.unshift(a,f);return Vg(ba(this,d).model,b)}function Wg(d){return Xg(ba(this,d).model,[])}function Yg(d,a){void 0===a&&(a=1);if(!r(a))throw Error("Bad arguments");return ea(this.ractive,Kc(this,d,a).map(function(d){var a=
d[0];d=d[1];var q=a.get();if(!r(d)||!r(q))throw Error("Cannot add non-numeric value");return[a,q-d]}))}function Zg(d){d=ba(this,d).model;return ea(this.ractive,[[d,!d.get()]])}function $g(d){d=ba(this,d).model;var a=I.start(this.ractive,!0);d.owner&&d.owner._link&&d.owner.unlink();I.end();return a}function ah(d){for(var a=[],f=arguments.length-1;0<f--;)a[f]=arguments[f+1];return bh(ba(this,d).model,a)}function ch(d){return ke(this.ractive,ba(this,d).model)}function dh(d,a){var f=ba(this,d).model,
b=I.start(this.ractive,!0);f.updateFromBindings(a);I.end();return b}function eh(){return!!Ub(this).model}function fh(d){var a=Ub(this),f=a.model,a=a.instance;if(f)return f.getKeypath(d||a)}function gh(){var d=Ub(this).model;if(d)return d.get(!0)}function Ub(d){d=d._element;return{model:d.binding&&d.binding.model,instance:d.parentFragment.ractive}}function hh(d){var a=Ub(this).model;return ea(this.ractive,[[a,d]])}function ih(){Y("Object property keypath is deprecated, please use resolve() instead.");
return this.resolve()}function jh(){Y("Object property rootpath is deprecated, please use resolve( ractive.root ) instead.");return this.resolve(this.ractive.root)}function kh(){Y("Object property context is deprecated, please use get() instead.");return this.get()}function lh(){Y('Object property index is deprecated, you can use get( "indexName" ) instead.');return fe(this._element.parentFragment).index}function mh(){Y('Object property key is deprecated, you can use get( "keyName" ) instead.');return fe(this._element.parentFragment).key}
function le(d,a){wb(d,{_element:{value:a},ractive:{value:a.parentFragment.ractive},resolve:{value:Gg},get:{value:Fg},add:{value:Hg},animate:{value:Ig},link:{value:Jg},merge:{value:Kg},pop:{value:Lg},push:{value:Ng},reverse:{value:Pg},set:{value:Rg},shift:{value:Sg},sort:{value:Wg},splice:{value:Ug},subtract:{value:Yg},toggle:{value:Zg},unlink:{value:$g},unshift:{value:ah},update:{value:ch},updateModel:{value:dh},isBound:{value:eh},getBindingPath:{value:fh},getBinding:{value:gh},setBinding:{value:hh},
keypath:{get:ih},rootpath:{get:jh},context:{get:kh},index:{get:lh},key:{get:mh}});return d}function me(d){"string"===typeof d&&ne&&(d=ne.call(document,d));return d&&d._ractive?le({},d._ractive.proxy):{}}function oe(d){nh.fire(d);d.findAllComponents("*").forEach(function(d){oe(d.instance)})}function pe(d,a,f,b){var c=d.viewmodel,e=x(a),g=e.indexOf("*");b.keypath=a;if(!~g){var g=e[0],h;""===g||c.has(g)?h=c.joinAll(e):d.component&&!d.isolated&&(h=pa(d.component.parentFragment,g))&&(c.map(g,h),h=c.joinAll(e));
return new eb(d,h,f,b)}c=0===g?c:c.joinAll(e.slice(0,g));return new fb(d,c,e.splice(g),f,b)}function oh(){return-1}function qe(d){return d.trim()}function re(d){return""!==d}function Vb(d){return(d?Lc.filter(function(a){return~d.indexOf(a.id)}):Lc).reduce(function(d,a){return""+d+"\n\n/* {"+a.id+"} */\n"+a.styles},"/* Ractive.js component styles */")}function se(d,q,f,b){var c=d.transitionsEnabled;d.noIntro&&(d.transitionsEnabled=!1);var e=I.start(d,!0);I.scheduleTask(function(){return ph.fire(d)},
!0);if(d.fragment.rendered)throw Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");f=a(f)||d.anchor;d.el=q;d.anchor=f;d.cssId&&N&&Mc&&(te?Qa.styleSheet.cssText=Vb(null):Qa.innerHTML=Vb(null),Mc=!1);q&&((q.__ractive_instances__||(q.__ractive_instances__=[])).push(d),f?(b=N.createDocumentFragment(),d.fragment.render(b),q.insertBefore(b,f)):d.fragment.render(q,b));I.end();d.transitionsEnabled=c;return e.then(function(){return qh.fire(d)})}function rh(d){return d.trim()}
function sh(d){return d.str}function th(d,a){var f='[data-ractive-css~="{'+a+'}"]';return ue.test(d)?d.replace(ue,f):d.replace(uh,"").replace(vh,function(d,a){if(wh.test(a))return d;var q=a.split(",").map(rh).map(function(d){for(var a=[],q;q=xh.exec(d);)a.push({str:q[0],base:q[1],modifiers:q[2]});d=a.map(sh);q=[];for(var b=a.length;b--;){var Qd=d.slice(),c=a[b];Qd[b]=c.base+f+c.modifiers||"";c=d.slice();c[b]=f+" "+c[b];q.push(Qd.join(" "),c.join(" "))}return q.join(", ")}).join(", ")+" ";return d.replace(a,
q)})}function Ra(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function ve(d,a){a&&a.constructor!==Object&&"function"!==typeof a&&("object"!==typeof a?J("data option must be an object or a function, `"+a+"` is not valid"):P("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"));var f="function"===typeof d,b="function"===typeof a;a||f||(a={});return f||b?function(){var c=b?we(a,this):a,e=f?we(d,this):
d;return xe(c,e)}:xe(a,d)}function we(d,a){var f=d.call(a);if(f)return"object"!==typeof f&&J("Data function must return an object"),f.constructor!==Object&&Y("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),f}function xe(d,a){if(d&&a){for(var f in a)f in d||(d[f]=a[f]);return d}return d||a}function Nc(d,a){void 0===a&&(a=0);for(var f=Array(a);a--;)f[a]="_"+a;return(new Function([],"return function ("+f.join(",")+"){return("+d+");};"))()}
function Oc(d,a){var f,b="return ("+d.replace(yh,function(d,a){f=!0;return'__ractive.get("'+a+'")'})+");";f&&(b="var __ractive = this; "+b);b=new Function(b);return f?b.bind(a):b}function Wb(d,a){if(xb[d])return xb[d];var f;Pc(Nc,"new expression function",ye);f=Nc(d,a);return xb[d]=f}function ze(d){if(d){var a=d.e;a&&Object.keys(a).forEach(function(d){xb[d]||(xb[d]=a[d])})}}function zh(d){var a,f,b;if(!d.matchString("="))return null;a=d.pos;d.allowWhitespace();f=d.matchPattern(Ae);if(!f)return d.pos=
a,null;if(!d.matchPattern(Ah))return null;b=d.matchPattern(Ae);if(!b)return d.pos=a,null;d.allowWhitespace();return d.matchString("=")?[f,b]:(d.pos=a,null)}function Be(d){var a;return(a=d.matchPattern(Bh))?{t:25,v:a}:null}function Qc(d){return d.replace(Ch,"\\$&")}function Xb(d,a){return d.search(Ce[a.join()]||(Ce[a.join()]=new RegExp(a.map(Qc).join("|"))))}function Rc(d){return d.replace(Dh,function(d,a){var b;return(b="#"!==a[0]?De[a]:"x"===a[1]?parseInt(a.substring(2),16):parseInt(a.substring(1),
10))?Eh(b?10===b?32:128>b?b:159>=b?Fh[b-128]:55296>b?b:57343>=b?Yb:65535>=b?b:Ee?65536<=b&&131071>=b||131072<=b&&196607>=b?b:Yb:Yb:Yb):d})}function Sc(d){return d.replace(Gh,"&amp;").replace(Hh,"&lt;").replace(Ih,"&gt;")}function Fe(d){var a;return(a=d.matchPattern(Jh))?{t:20,v:a}:null}function Ge(d){return function(a){for(var f='"',b=!1,c;!b;)(c=a.matchPattern(He)||a.matchPattern(Ie)||a.matchString(d))?f='"'===c?f+'\\"':"\\'"===c?f+"'":f+c:(c=a.matchPattern(Je))?f+="\\u"+("000"+c.charCodeAt(1).toString(16)).slice(-4):
b=!0;return JSON.parse(f+'"')}}function Tc(d){var a,f;a=d.pos;return d.matchString('"')?(f=Kh(d),d.matchString('"')?{t:21,v:f}:(d.pos=a,null)):d.matchString("'")?(f=Lh(d),d.matchString("'")?{t:21,v:f}:(d.pos=a,null)):null}function Ke(d){var a;return(a=Tc(d))?Mh.test(a.v)?a.v:'"'+a.v.replace(/"/g,'\\"')+'"':(a=Fe(d))?a.v:(a=d.matchPattern(Uc))?a:null}function Nh(d){var a,f,b;a=d.pos;d.allowWhitespace();b="'"!==d.nextChar()&&'"'!==d.nextChar();f=Ke(d);if(null===f)return d.pos=a,null;d.allowWhitespace();
if(b&&(","===d.nextChar()||"}"===d.nextChar()))return Uc.test(f)||d.error("Expected a valid reference, but found '"+f+"' instead."),{t:27,k:f,v:{t:30,n:f}};if(!d.matchString(":"))return d.pos=a,null;d.allowWhitespace();b=ia(d);return null===b?(d.pos=a,null):{t:27,k:f,v:b}}function Le(d){var a,f,b;a=d.pos;f=Nh(d);if(null===f)return null;f=[f];return d.matchString(",")?(b=Le(d),b?f.concat(b):(d.pos=a,null)):f}function Vc(d){d.allowWhitespace();var a=ia(d);if(null===a)return null;a=[a];d.allowWhitespace();
if(d.matchString(",")){var f=Vc(d);null===f&&d.error("Expected a JavaScript expression");a.push.apply(a,f)}return a}function Wc(d){var a,f,b,c,e,g;a=d.pos;b=d.matchPattern(Oh);"@keypath"!==b&&"@rootpath"!==b||!d.matchPattern(Ph)||((g=Wc(d))||d.error("Expected a valid reference for a keypath expression"),d.allowWhitespace(),d.matchString(")")||d.error("Unclosed keypath expression"),b+="("+g.n+")");g=!b&&d.spreadArgs&&d.matchPattern(Qh);b||((f=d.matchPattern(Rh)||"",b=!f&&d.relaxedNames&&d.matchPattern(Sh)||
d.matchPattern(Th),b||"."!==f)?!b&&f&&(b=f,f=""):(f="",b="."));if(!b)return null;if(!f&&!d.relaxedNames&&Me.test(b))return d.pos=a,null;if(!f&&Xc.test(b))return b=Xc.exec(b)[0],d.pos=a+b.length,{t:26,v:(g?"...":"")+b};c=(g?3:0)+(f||"").length+b.length;f=(f||"")+(b?b.replace(Cc,".$1"):"");d.matchString("(")&&(e=f.lastIndexOf("."),-1!==e&&"]"!==b[b.length-1]?(b=f.length,f=f.substr(0,e),d.pos=a+(c-(b-e))):--d.pos);return{t:30,n:(g?"...":"")+f.replace(/^this\./,"./").replace(/^this$/,".")}}function Uh(d){var a;
(a=Fe(d))||(a=d.remaining(),"true"===a.substr(0,4)?(d.pos+=4,a={t:24,v:"true"}):"false"===a.substr(0,5)?(d.pos+=5,a={t:24,v:"false"}):a=null);if(!(a=a||Tc(d))){var f;a=d.pos;d.allowWhitespace();d.matchString("{")?(f=Le(d),d.allowWhitespace(),d.matchString("}")?a={t:23,m:f}:(d.pos=a,a=null)):(d.pos=a,a=null)}a||(a=d.pos,d.allowWhitespace(),d.matchString("[")?(f=Vc(d),d.matchString("]")?a={t:22,m:f}:(d.pos=a,a=null)):(d.pos=a,a=null));(a=a||Be(d)||Wc(d))||(d.matchString("(")?(d.allowWhitespace(),(a=
ia(d))||d.error("Expected a JavaScript expression"),d.allowWhitespace(),d.matchString(")")||d.error("Expected closing paren"),a={t:34,x:a}):a=null);if(!a)return null;for(;a;){a:{f=d;f.strictRefinement||f.allowWhitespace();if(f.matchString(".")){f.allowWhitespace();var b=f.matchPattern(Uc);if(b){f={t:31,n:b};break a}f.error("Expected a property name")}f.matchString("[")?(f.allowWhitespace(),(b=ia(f))||f.error("Expected a JavaScript expression"),f.allowWhitespace(),f.matchString("]")||f.error("Expected ']'"),
f={t:31,x:b}):f=null}if(f)a={t:32,x:a,r:f};else if(d.matchString("("))d.allowWhitespace(),f=d.spreadArgs,d.spreadArgs=!0,b=Vc(d),d.spreadArgs=f,d.allowWhitespace(),d.matchString(")")||d.error("Expected closing paren"),a={t:40,x:a},b&&(a.o=b);else break}return a}function ia(d){var a,f,b;f=Vh(d);if(!f)return null;a=d.pos;d.allowWhitespace();if(!d.matchString("?"))return d.pos=a,f;d.allowWhitespace();(a=ia(d))||d.error("Expected a JavaScript expression");d.allowWhitespace();d.matchString(":")||d.error('Expected ":"');
d.allowWhitespace();(b=ia(d))||d.error("Expected a JavaScript expression");return{t:35,o:[f,a,b]}}function Zb(d){function a(d){switch(d.t){case 24:case 26:case 20:case 25:return d.v;case 21:return JSON.stringify(String(d.v));case 22:return"["+(d.m?d.m.map(a).join(","):"")+"]";case 23:return"{"+(d.m?d.m.map(a).join(","):"")+"}";case 27:return d.k+":"+a(d.v);case 33:return("typeof"===d.s?"typeof ":d.s)+a(d.o);case 36:return a(d.o[0])+("in"===d.s.substr(0,2)?" "+d.s+" ":d.s)+a(d.o[1]);case 40:if(d.spread){var c=
b++;return"(spread$"+c+" = "+a(d.x)+").apply(spread$"+c+", [].concat("+(d.o?d.o.map(function(d){return d.n&&0===d.n.indexOf("...")?a(d):"["+a(d)+"]"}).join(","):"")+") )"}return a(d.x)+"("+(d.o?d.o.map(a).join(","):"")+")";case 34:return"("+a(d.x)+")";case 32:return a(d.x)+a(d.r);case 31:return d.n?"."+d.n:"["+a(d.x)+"]";case 35:return a(d.o[0])+"?"+a(d.o[1])+":"+a(d.o[2]);case 30:return"_"+f.indexOf(d.n);default:throw Error("Expected legal JavaScript");}}var f,b=0;gb(d,f=[]);d=a(d);f=f.map(function(d){return 0===
d.indexOf("...")?d.substr(3):d});return{r:f,s:function(d){for(var a=[],f=b-1;0<=f;f--)a.push("spread$"+f);return a.length?"(function(){var "+a.join(",")+";return("+d+");})()":d}(d)}}function gb(d,a){var f,b;30===d.t&&-1===a.indexOf(d.n)&&a.unshift(d.n);if(b=d.o||d.m)if(v(b))gb(b,a);else for(f=b.length;f--;)b[f].n&&0===b[f].n.indexOf("...")&&(d.spread=!0),gb(b[f],a);d.x&&gb(d.x,a);d.r&&gb(d.r,a);d.v&&gb(d.v,a)}function Wh(d){d.allowWhitespace();var a=Ke(d);if(!a)return null;a={key:a};d.allowWhitespace();
if(!d.matchString(":"))return null;d.allowWhitespace();d=d.read();if(!d)return null;a.value=d.v;return a}function $b(d,a){return(new Xh(d,{values:a})).result}function ac(d,a,f){var b,c,e,g;if("string"===typeof d){g=a.pos-d.length;if(71===f||72===f)return a=new Yc("["+d+"]"),{a:Zb(a.result[0])};70===f&&(b=Yh.exec(d))&&(P(a.getContextMessage(g,"Unqualified method events are deprecated. Prefix methods with '@this.' to call methods on the current Ractive instance.")[2]),d="@this."+b[1]+""+d.substr(b[1].length));
if(70===f&&~d.indexOf("(")){b=new Yc("["+d+"]");if(b.result&&b.result[0])return b.remaining().length&&(a.pos=g+d.length-b.remaining().length,a.error("Invalid input after event expression '"+b.remaining()+"'")),{x:Zb(b.result[0])};if(d.indexOf(":")>d.indexOf("(")||!~d.indexOf(":"))a.pos=g,a.error("Invalid input in event expression '"+d+"'")}if(-1===d.indexOf(":"))return d.trim();d=[d]}e=[];g=[];if(d){for(;d.length;)if(b=d.shift(),"string"===typeof b)if(c=b.indexOf(":"),-1===c)e.push(b);else{c&&e.push(b.substr(0,
c));b.length>c+1&&(g[0]=b.substring(c+1));break}else e.push(b);g=g.concat(d)}e.length?g.length||"string"!==typeof e?(d={n:1===e.length&&"string"===typeof e[0]?e[0]:e},1===g.length&&"string"===typeof g[0]?(b=$b("["+g[0]+"]"),d.a=b?b.value:[g[0].trim()]):d.d=g):d=e:d="";g.length&&f&&P(a.getContextMessage(a.pos,"Proxy events with arguments are deprecated. You can fire events with arguments using \"@this.fire('eventName', arg1, arg2, ...)\".")[2]);return d}function Ne(d){var a,f,b,c;a=d.pos;f=d.matchPattern(Zh);
if(!f)return null;b=f;c=d.tags.map(function(d){return d.open});-1!==(b=Xb(b,c))&&(f=f.substr(0,b),d.pos=a+f.length);return f}function Oe(d,a){var f,b,c;f=d.pos;if(!d.matchString(a))return null;d.inAttribute=a;b=[];for(c=hb(d)||Pe(d,a);null!==c;)b.push(c),c=hb(d)||Pe(d,a);if(!d.matchString(a))return d.pos=f,null;d.inAttribute=!1;return b}function Pe(d,a){var f=d.remaining(),b=d.tags.map(function(d){return d.open});b.push(a);b=Xb(f,b);-1===b&&d.error("Quoted attribute value must have a closing quote");
if(!b)return null;d.pos+=b;return f.substr(0,b)}function hb(d){var a,f;if(!1===d.interpolate[d.inside])return null;for(f=0;f<d.tags.length;f+=1)if(a=$h(d,d.tags[f]))return a;if(d.inTag&&!d.inAttribute){a:{var b;var c;d.allowWhitespace();if(a=d.matchPattern(ai)){c=a.length;for(f=0;f<d.tags.length;f++)~(b=a.indexOf(d.tags[f].open))&&b<c&&(c=b);if(c<a.length)d.pos-=a.length-c,a=a.substr(0,c),b={n:a};else{b={n:a};a=d.pos;/[=\/>\s]/.test(d.nextChar())||d.error("Expected `=`, `/`, `>` or whitespace");d.allowWhitespace();
if(d.matchString("=")){d.allowWhitespace();a=d.pos;f=d.sectionDepth;if(!(c=Oe(d,"'")||Oe(d,'"'))){var e;d.inAttribute=!0;c=[];for(e=hb(d)||Ne(d);e;)c.push(e),e=hb(d)||Ne(d);c.length?d.inAttribute=!1:c=null}null===c&&d.error("Expected valid attribute value");d.sectionDepth!==f&&(d.pos=a,d.error("An attribute value must contain as many opening section tags as closing section tags"));a=c.length?1===c.length&&"string"===typeof c[0]?Rc(c[0]):c:""}else d.pos=a,a=null;null!=a&&(b.f=a)}}else b=null;if(b){if(a=
bi[b.n]){b.t=a.t;a.v&&(b.v=a.v);delete b.n;if(72===a.t||71===a.t)b.f=ac(b.f,d);72===a.t?Y(""+("t0"===a.v?"intro-outro":"t1"===a.v?"intro":"outro")+" is deprecated. To specify tranisitions, use the transition name suffixed with '-in', '-out', or '-in-out' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches."):71===a.t&&Y("decorator is deprecated. To specify decorators, use the decorator name prefixed with 'as-' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches.")}else if(a=
ci.exec(b.n))delete b.n,b.t=71,b.f=ac(b.f,d,71),"object"===typeof b.f?b.f.n=a[1]:b.f=a[1];else if(a=di.exec(b.n))delete b.n,b.t=72,b.f=ac(b.f,d,72),"object"===typeof b.f?b.f.n=a[1]:b.f=a[1],b.v="in-out"===a[2]?"t0":"in"===a[2]?"t1":"t2";else if(a=ei.exec(b.n))b.n=a[1],b.t=70,b.f=ac(b.f,d,70),fi.test(b.f.n||b.f)&&(d.pos-=(b.f.n||b.f).length,d.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));else if(d.sanitizeEventAttributes&&
gi.test(b.n)){a={exclude:!0};break a}else b.f=b.f||(""===b.f?"":0),b.t=13;a=b}else a=null}if(a)return d.allowWhitespace(),a}}function $h(d,a){var f,b,c;f=d.pos;if(d.matchString("\\"+a.open)){if(0===f||"\\"!==d.str[f-1])return a.open}else if(!d.matchString(a.open))return null;if(b=zh(d)){if(!d.matchString(a.close))return null;a.open=b[0];a.close=b[1];d.sortMustacheTags();return hi}d.allowWhitespace();if(d.matchString("/"))if(--d.pos,c=d.pos,Be(d))d.pos=c;else{d.pos=c-a.close.length;if(d.inAttribute)return d.pos=
f,null;d.error("Attempted to close a section that wasn't open")}for(c=0;c<a.readers.length;c+=1)if(b=a.readers[c],b=b(d,a))return a.isStatic&&(b.s=!0),d.includeLinePositions&&(b.p=d.getLinePos(f)),b;d.pos=f;return null}function Fa(d,a){if(d){for(;34===d.t&&d.x;)d=d.x;if(30===d.t)a.r=d.n;else{var f;f=d;for(var b=[],c;32===f.t&&31===f.r.t;)c=f.r,c.x?30===c.x.t?b.unshift(c.x):b.unshift(Zb(c.x)):b.unshift(c.n),f=f.x;f=30!==f.t?null:{r:f.n,m:b};f?a.rx=f:a.x=Zb(d)}return a}}function Qe(d,a){var f,b;if(!d.matchString("&"))return null;
d.allowWhitespace();f=ia(d);if(!f)return null;d.matchString(a.close)||d.error("Expected closing delimiter '"+a.close+"'");b={t:3};Fa(f,b);return b}function Re(d){var a=[],f,b=d.pos;d.allowWhitespace();if(f=Zc(d)){f.x=Fa(f.x,{});a.push(f);for(d.allowWhitespace();d.matchString(",");)(f=Zc(d))||d.error("Expected another alias."),f.x=Fa(f.x,{}),a.push(f),d.allowWhitespace();return a}d.pos=b;return null}function Zc(d){var a,f;f=d.pos;d.allowWhitespace();a=ia(d);if(!a)return d.pos=f,null;d.allowWhitespace();
if(!d.matchPattern(ii))return d.pos=f,null;d.allowWhitespace();(f=d.matchPattern(ji))||d.error("Expected a legal alias name.");return{n:f,x:a}}function Se(d,a){var f,b,c;f=d.pos;try{a:{var e=[a.close],g,h,k;g=d.pos;if(h=ia(d)){for(k=0;k<e.length;k+=1)if(d.remaining().substr(0,e[k].length)===e[k]){b=h;break a}d.pos=g;b=Wc(d)}else{var l=d.matchPattern(/^(\w+)/);b=l?{t:30,n:l}:null}}}catch(m){c=m}if(!b){if("!"===d.str.charAt(f))return d.pos=f,null;if(c)throw c;}if(!d.matchString(a.close)&&(d.error("Expected closing delimiter '"+
a.close+"' after reference"),!b)){if("!"===d.nextChar())return null;d.error("Expected expression or legal reference")}f={t:2};Fa(b,f);return f}function $c(d,a){var f,b,c;f=d.pos;if(!d.matchString(a.open))return null;d.allowWhitespace();if(!d.matchString("/"))return d.pos=f,null;d.allowWhitespace();b=d.remaining();c=b.indexOf(a.close);if(-1!==c)return f={t:6,r:b.substr(0,c).split(" ")[0]},d.pos+=c,d.matchString(a.close)||d.error("Expected closing delimiter '"+a.close+"'"),f;d.pos=f;return null}function Te(d,
a){var f,b,c,e,g,h,k,l,m,n=!1;f=d.pos;if(d.matchString("^"))c={t:4,f:[],n:51};else if(d.matchString("#")){if(c={t:4,f:[]},d.matchString("partial")&&(d.pos=f-d.standardDelimiters[0].length,d.error("Partial definitions can only be at the top level of the template, or immediately inside components")),h=d.matchPattern(ki))m=h,c.n=Ue[h]}else return null;d.allowWhitespace();if("with"===h){if(f=Re(d))n=!0,c.z=f,c.t=19}else"each"===h&&(f=Zc(d))&&(c.z=[{n:f.n,x:{r:"."}}],b=f.x);!n&&(b||(b=ia(d)),b||d.error("Expected expression"),
f=d.matchPattern(li))&&((e=d.matchPattern(mi))?c.i=f+","+e:c.i=f);d.allowWhitespace();d.matchString(a.close)||d.error("Expected closing delimiter '"+a.close+"'");d.sectionDepth+=1;e=c.f;do if(h=d.pos,f=$c(d,a))m&&f.r!==m&&(d.pos=h,d.error("Expected "+a.open+"/"+m+""+a.close)),--d.sectionDepth,l=!0;else{if(h=!n){f=d;h=a;var p=f.pos;f.matchString(h.open)?f.matchPattern(ni)?(p=ia(f),f.matchString(h.close)||f.error("Expected closing delimiter '"+h.close+"'"),f={t:61,x:p}):(f.pos=p,f=null):f=null;h=f}if(h)51===
c.n&&d.error("{{else}} not allowed in {{#unless}}"),g&&d.error("illegal {{elseif...}} after {{else}}"),k||(k=[]),h={t:4,n:50,f:e=[]},Fa(f.x,h),k.push(h);else{if(f=!n)f=d,h=a,p=f.pos,f.matchString(h.open)?f.matchPattern(oi)?(f.matchString(h.close)||f.error("Expected closing delimiter '"+h.close+"'"),f={t:60}):(f.pos=p,f=null):f=null;if(f)51===c.n&&d.error("{{else}} not allowed in {{#unless}}"),g&&d.error("there can only be one {{else}} block, at the end of a section"),g=!0,k||(k=[]),k.push({t:4,n:51,
f:e=[]});else{f=d.read(yb);if(!f)break;e.push(f)}}}while(!l);k&&(c.l=k);n||Fa(b,c);c.f.length||delete c.f;return c}function pi(d){var a,f,b,c;for(a=1;a<d.length;a+=1)f=d[a],b=d[a-1],c=d[a-2],ib(f)&&(9===b.t||10===b.t)&&ib(c)&&jb.test(c)&&kb.test(f)&&(d[a-2]=c.replace(jb,"\n"),d[a]=f.replace(kb,"")),(4===f.t||5===f.t)&&f.f&&ib(b)&&jb.test(b)&&ib(f.f[0])&&kb.test(f.f[0])&&(d[a-1]=b.replace(jb,"\n"),f.f[0]=f.f[0].replace(kb,"")),ib(f)&&(4===b.t||5===b.t)&&b.f&&(c=da(b.f),ib(c)&&jb.test(c)&&kb.test(f)&&
(b.f[b.f.length-1]=c.replace(jb,"\n"),d[a]=f.replace(kb,"")));return d}function ib(d){return"string"===typeof d}function Ve(d,a,f){var b;a&&(b=d[0],"string"===typeof b&&((b=b.replace(a,""))?d[0]=b:d.shift()));f&&(b=da(d),"string"===typeof b&&((b=b.replace(f,""))?d[d.length-1]=b:d.pop()))}function Ga(d,a,f,b,c){if("string"!==typeof d){var e,g,h,k,l,m,p;pi(d);for(e=d.length;e--;)g=d[e],g.exclude?d.splice(e,1):a&&9===g.t&&d.splice(e,1);Ve(d,b?We:null,c?Xe:null);for(e=d.length;e--;){g=d[e];if(g.f){h=
7===g.t&&qi.test(g.e);b=f||h;!f&&h&&Ve(g.f,ri,si);if(!b){h=d[e-1];k=d[e+1];if(!h||"string"===typeof h&&Xe.test(h))l=!0;if(!k||"string"===typeof k&&We.test(k))m=!0}Ga(g.f,a,b,l,m);n(g.f.n)&&Ga(g.f.n,a,f,l,c);n(g.f.d)&&Ga(g.f.d,a,f,l,c)}g.l&&(Ga(g.l,a,f,l,m),g.l.forEach(function(d){return d.l=1}),g.l.unshift(e+1,0),d.splice.apply(d,g.l),delete g.l);if(g.a)for(p in g.a)g.a.hasOwnProperty(p)&&"string"!==typeof g.a[p]&&Ga(g.a[p],a,f,l,m);g.m&&(Ga(g.m,a,f,l,m),1>g.m.length&&delete g.m)}for(e=d.length;e--;)"string"===
typeof d[e]&&("string"===typeof d[e+1]&&(d[e]+=d[e+1],d.splice(e+1,1)),f||(d[e]=d[e].replace(ti," ")),""===d[e]&&d.splice(e,1))}}function ui(d){var a,f;a=d.pos;if(!d.matchString("</"))return null;if(f=d.matchPattern(vi))return d.inside&&f!==d.inside?(d.pos=a,null):{t:14,e:f};d.pos-=2;d.error("Illegal closing tag")}function wi(d,a){var f,b;f=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(a);b=Ye[d];return f&&b?!~b.indexOf(f[1].toLowerCase()):!0}function Ze(d,a){Object.keys(d).forEach(function(f){if("s"===f&&n(d.r)){f=
d.s;var b=d.r;a[f]||(a[f]=Nc(f,b.length))}else f=d[f],(n(f)||v(f))&&Ze(f,a)})}function lb(d,a){return(new $e(d,a||{})).result}function Pc(d,a,f){d||J("Missing Ractive.parse - cannot parse "+a+". "+f)}function af(d,a){Pc(Oc,'compution string "${str}"',xi);return Oc(d,a)}function bf(d,a){return a.call(d,{fromId:qa.fromId,isParsed:qa.isParsed,parse:function(a,b){void 0===b&&(b=qa.getParseOptions(d));return qa.parse(a,b)}})}function ad(d,a){if("string"===typeof d){var f=d;"#"===f[0]&&(f=qa.fromId(f));
d=qa.parseFor(f,a)}else{if(void 0==d)throw Error("The template cannot be "+d+".");if("number"!==typeof d.v)throw Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(4!==d.v)throw Error("Mismatched template version (expected 4, got "+d.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");ze(d)}return d}function cf(d,a,f){if(a)for(var b in a)if(f||
!d.hasOwnProperty(b))d[b]=a[b]}function yi(d,a,f){function b(){var d=zi(b._parent,a),c="_super"in this,e=this._super;this._super=d;d=f.apply(this,arguments);c?this._super=e:delete this._super;return d}if(!/_super/.test(f))return f;b._parent=d;b._method=f;return b}function zi(d,a){if(a in d){var f=d[a];return"function"===typeof f?f:function(){return f}}return w}function df(d,a,f){return"options."+d+" has been deprecated in favour of options."+a+"."+(f?" You cannot specify both options, please use options."+
a+".":"")}function zb(d,a,f){if(a in d){if(f in d)throw Error(df(a,f,!0));P(df(a,f));d[f]=d[a]}}function Ai(d){zb(d,"beforeInit","onconstruct");zb(d,"init","onrender");zb(d,"complete","oncomplete");zb(d,"eventDefinitions","events");n(d.adaptors)&&zb(d,"adaptors","adapt")}function ef(d,a,f,b){Ai(b);for(var c in b)if(Bi.hasOwnProperty(c)){var e=b[c];"el"!==c&&"function"===typeof e?P(""+c+" is a Ractive option that does not expect a function and will be ignored","init"===d?f:null):f[c]=e}if(b.append&&
b.enhance)throw Error("Cannot use append and enhance at the same time");Ab.forEach(function(c){c[d](a,f,b)});ff[d](a,f,b);bd[d](a,f,b);gf[d](a,f,b);Ci(a.prototype,f,b)}function Ci(d,a,f){for(var b in f)if(!Di[b]&&f.hasOwnProperty(b)){var c=f[b];"function"===typeof c&&(c=yi(d,b,c));a[b]=c}}function hf(d){var a={};d.forEach(function(d){return a[d]=!0});return a}function Bb(d,a,f,b){d.forEach(function(d){if(8!==d.type||d.refName!==a&&d.name!==a){if(d.fragment)Bb(d.fragment.iterations||d.fragment.items,
a,f,b);else if(n(d.items))Bb(d.items,a,f,b);else if(15===d.type&&d.instance){if(d.instance.partials[a])return;Bb(d.instance.fragment.items,a,f,b)}7===d.type&&n(d.attributes)&&Bb(d.attributes,a,!0,b)}else d.inAttribute=f,b.push(d)})}function Ei(d){d.forceResetTemplate()}function Fi(d,a,f){var b=d.fragment.resolve(a,function(a){M(d.resolvers,b);d.models[f]=a;d.bubble()});d.resolvers.push(b)}function bc(d,a){if(a.r)return pa(d,a.r);if(a.x)return new jf(d,a.x);if(a.rx)return new Gi(d,a.rx)}function kf(d){if(d.template.z){d.aliases=
{};for(var a=d.template.z,f=0;f<a.length;f++)d.aliases[a[f].n]=bc(d.parentFragment,a[f].x)}}function ja(d,a,f){for(void 0===a&&(a=!0);d&&(7!==d.type||f&&d.name!==f)&&(!a||15!==d.type);)d=d.owner?d.owner:d.component?d.containerFragment||d.component.parentFragment:d.parent?d.parent:d.parentFragment?d.parentFragment:void 0;return d}function Hi(d){var a=[];return"string"!==typeof d?{}:d.replace(Ii,function(d){return"\x00"+(a.push(d)-1)}).replace(Ji,"").split(";").filter(function(d){return!!d.trim()}).map(function(d){return d.replace(Ki,
function(d,f){return a[f]})}).reduce(function(d,a){var b=a.indexOf(":"),q=a.substr(0,b).trim();d[q]=a.substr(b+1).trim();return d},{})}function cd(d){d=d.split(Li);for(var a=d.length;a--;)d[a]||d.splice(a,1);return d}function Mi(d){var a=d.element,f=d.name;if("id"===f)return Ni;if("value"===f){d.interpolator&&(d.interpolator.bound=!0);if("select"===a.name&&"value"===f)return a.getAttribute("multiple")?Oi:Pi;if("textarea"===a.name)return lf;if(null!=a.getAttribute("contenteditable"))return Qi;if("input"===
a.name){d=a.getAttribute("type");if("file"===d)return w;if("radio"===d&&a.binding&&"name"===a.binding.attribute.name)return Ri;if(~Si.indexOf(d))return lf}return Ti}var b=a.node;if(d.isTwoway&&"name"===f){if("radio"===b.type)return Ui;if("checkbox"===b.type)return Vi}return"style"===f?Wi:0===f.indexOf("style-")?Xi:"class"!==f||b.namespaceURI&&"http://www.w3.org/1999/xhtml"!==b.namespaceURI?0===f.indexOf("class-")?Zi:d.isBoolean?(a=a.getAttribute("type"),!d.interpolator||"checked"!==f||"checkbox"!==
a&&"radio"!==a||(d.interpolator.bound=!0),$i):d.namespace&&d.namespace!==d.node.namespaceURI?aj:bj:Yi}function Ni(d){var a=this.node,f=this.getValue();this.ractive.nodes[a.id]===a&&delete this.ractive.nodes[a.id];if(d)return a.removeAttribute("id");this.ractive.nodes[f]=a;a.id=f}function Oi(d){var a=this.getValue();n(a)||(a=[a]);var f=this.node.options,b=f.length;if(d)for(;b--;)f[b].selected=!1;else for(;b--;)d=f[b],d.selected=W(a,d._ractive?d._ractive.value:d.value)}function Pi(d){var a=this.getValue();
if(!this.locked){this.node._ractive.value=a;var f=this.node.options,b=f.length,c=!1;if(d)for(;b--;)f[b].selected=!1;else for(;b--;){d=f[b];var e=d._ractive?d._ractive.value:d.value;d.disabled&&d.selected&&(c=!0);if(e==a){d.selected=!0;return}}c||(this.node.selectedIndex=-1)}}function Qi(d){var a=this.getValue();this.locked||(this.node.innerHTML=d?"":void 0===a?"":a)}function Ri(d){var a=this.node,f=a.checked,b=this.getValue();if(d)return a.checked=!1;a.value=this.node._ractive.value=b;a.checked=b===
this.element.getAttribute("name");f&&!a.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function Ti(d){this.locked||(d?(this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null):(d=this.getValue(),this.node.value=this.node._ractive.value=d,this.node.setAttribute("value",d)))}function lf(d){this.locked||(d?(this.node._ractive.value="",this.node.removeAttribute("value")):(d=this.getValue(),
this.node._ractive.value=d,this.node.value=c(d),this.node.setAttribute("value",c(d))))}function Ui(d){this.node.checked=d?!1:this.getValue()==this.node._ractive.value}function Vi(d){var a=this.element;d=this.node;var f=a.binding,b=this.getValue(),a=a.getAttribute("value");if(n(b)){for(var c=b.length;c--;)if(a==b[c]){f.isChecked=d.checked=!0;return}f.isChecked=d.checked=!1}else f.isChecked=d.checked=b==a}function Wi(d){d=d?{}:Hi(this.getValue()||"");for(var a=this.node.style,f=Object.keys(d),b=this.previous||
[],c=0;c<f.length;){if(f[c]in a){var e=d[f[c]].replace("!important","");a.setProperty(f[c],e,e.length!==d[f[c]].length?"important":"")}c++}for(c=b.length;c--;)!~f.indexOf(b[c])&&b[c]in a&&(a[b[c]]="");this.previous=f}function Xi(d){this.styleName||(this.styleName=h(this.name.substr(6)));this.node.style[this.styleName]=d?"":this.getValue()}function Yi(d){d=d?[]:cd(c(this.getValue()));for(var a=cd(this.node.className),f=this.previous||a.slice(0),b=0;b<d.length;)~a.indexOf(d[b])||a.push(d[b]),b++;for(b=
f.length;b--;)if(!~d.indexOf(f[b])){var e=a.indexOf(f[b]);~e&&a.splice(e,1)}a=a.join(" ");a!==this.node.className&&(this.node.className=a);this.previous=d}function Zi(d){var a=this.name.substr(6),f=cd(this.node.className);d=d?!1:this.getValue();this.inlineClass||(this.inlineClass=a);d&&!~f.indexOf(a)?f.push(a):!d&&~f.indexOf(a)&&f.splice(f.indexOf(a),1);this.node.className=f.join(" ")}function $i(d){this.locked||(d?(this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName)):
this.useProperty?this.node[this.propertyName]=this.getValue():this.getValue()?this.node.setAttribute(this.propertyName,""):this.node.removeAttribute(this.propertyName))}function bj(d){d?this.node.removeAttribute(this.name):this.node.setAttribute(this.name,c(this.getString()))}function aj(d){d?this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),c(this.getString()))}function dd(d,a,f){d.value=
0===a?!0:"true"===a?!0:"false"===a||"0"===a?!1:a;a=d.element[d.flag];d.element[d.flag]=d.value;f&&!d.element.attributes.binding&&a!==d.value&&d.element.recreateTwowayBinding();return d.value}function cj(d){Sa=!0;d();Sa=!1}function dj(d,a){var f=a?"svg":"div";return d?(mf.innerHTML="<"+f+" "+d+"></"+f+">")&&ua(mf.childNodes[0].attributes):[]}function ej(d,a,f,b){d=d.__model;b&&d.shuffle(b)}function fj(d,a,f,b){if(d.set&&d.set.__magic)return d.set.__magic.dependants.push({ractive:a,keypath:f}),d;var c,
e=[{ractive:a,keypath:f}];a={get:function(){return"value"in d?d.value:d.get.call(this)},set:function(a){c||("value"in d?d.value=a:d.set.call(this,a),b.locked||(c=!0,e.forEach(function(d){d.ractive.set(d.keypath,a)}),c=!1))},enumerable:!0};a.set.__magic={dependants:e,originalDescriptor:d};return a}function gj(d){d=d.replace(/^\t+/gm,function(d){return d.split("\t").join("  ")}).split("\n");var a=2>d.length?0:d.slice(1).reduce(function(d,a){return Math.min(d,/^\s*/.exec(a)[0].length)},Infinity);return d.map(function(d,
b){return"    "+(b?d.substring(a):d)}).join("\n")}function hj(d,a,f){var b,c,e,g,h;"function"===typeof f&&(b=S(f,d),e=f.toString(),g=!0);"string"===typeof f&&(b=af(f,d),e=f);"object"===typeof f&&("string"===typeof f.get?(b=af(f.get,d),e=f.get):"function"===typeof f.get?(b=S(f.get,d),e=f.get.toString(),g=!0):J("`%s` computation must have a `get()` method",a),"function"===typeof f.set&&(c=S(f.set,d),h=f.set.toString()));return{getter:b,setter:c,getterString:e,setterString:h,getterUseStack:g}}function ed(d,
a){Z.DEBUG&&Cb();ij(d);Ha(d,"data",{get:jj});kj.fire(d,a);lj.forEach(function(f){d[f]=l(ra(d.constructor[f]||null),a[f])});var f=new mj({adapt:nj(d,d.adapt,a),data:cc.init(d.constructor,d,a),ractive:d});d.viewmodel=f;var b=l(ra(d.constructor.prototype.computed),a.computed),c;for(c in b){var e=hj(d,c,b[c]);f.compute(c,e)}}function oj(d){var a=[];d=a.concat.apply(a,d);for(var f=d.length;f--;)~a.indexOf(d[f])||a.unshift(d[f]);return a}function nj(d,a,f){function b(a){"string"===typeof a&&((a=pb("adaptors",
d,a))||J(ab(a,"adaptor")));return a}a=a.map(b);var c=Da(f.adapt).map(b),e=[];a=[a,c];d.parent&&!d.isolated&&a.push(d.parent.viewmodel.adaptors);a.push(e);c="modifyArrays"in f?f.modifyArrays:d.modifyArrays;if("magic"in f?f.magic:d.magic){if(!dc)throw Error("Getters and setters (magic mode) are not supported in this browser");c&&e.push(pj);e.push(fd)}c&&e.push(gd);return oj(a)}function ij(d){d._guid="r-"+qj++;d._subs=ra(null);d._config={};d.nodes={};d.event=null;d._eventQueue=[];d._liveQueries=[];d._liveComponentQueries=
[];d._observers=[];d.component||(d.root=d,d.parent=d.container=null)}function jj(){throw Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead");}function nf(d,a){return d[a._guid]||(d[a._guid]=[])}function of(d,a){var f=nf(d.queue,a);for(d.hook.fire(a);f.length;)of(d,f.shift());delete d.queue[a._guid]}function hd(d,b,f){Object.keys(d.viewmodel.computations).forEach(function(a){var f=d.viewmodel.computations[a];d.viewmodel.value.hasOwnProperty(a)&&f.set(d.viewmodel.value[a])});
id.init(d.constructor,d,b);rj.fire(d);pf.begin(d);var c;if(d.template){var e;if(f.cssIds||d.cssId)e=f.cssIds?f.cssIds.slice():[],d.cssId&&e.push(d.cssId);d.fragment=c=(new K({owner:d,template:d.template,cssIds:e})).bind(d.viewmodel)}pf.end(d);if(c&&(b=a(d.el))&&(b=d.render(b,d.append),Z.DEBUG_PROMISES))b["catch"](function(a){Y("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");
P("An error happened during rendering",{ractive:d});V(a);throw a;})}function sj(d){d.makeDirty()}function tj(d){var a=d.node,f=d.ractive;do for(var b=f._liveQueries,c=b.length;c--;){var e=b["_"+b[c]];e.test(a)&&(e.add(a),d.liveQueries.push(e))}while(f=f.parent)}function qf(d,a){Y("The "+d+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:a})}function Q(){this._ractive.binding.handleChange()}function rf(d,
a,f){d=""+d+"-bindingGroup";return a[d]||(a[d]=new Db(d,a,f))}function uj(){var d=[];this.bindings.filter(function(d){return d.node&&d.node.checked}).map(function(d){return d.element.getAttribute("value")}).forEach(function(a){W(d,a)||d.push(a)});return d}function sf(){Q.call(this);var d=this._ractive.binding.model.get();this.value=void 0==d?"":d}function vj(d){var a;return function(){var f=this;a&&clearTimeout(a);a=setTimeout(function(){f._ractive.binding.rendered&&Q.call(f);a=null},d)}}function jd(d){return d.selectedOptions?
ua(d.selectedOptions):d.options?ua(d.options).filter(function(d){return d.selected}):[]}function wj(){var d=this.bindings.filter(function(d){return d.node.checked});if(0<d.length)return d[0].element.getAttribute("value")}function Ia(d){return d&&d.template.f&&1===d.template.f.length&&2===d.template.f[0].t&&!d.template.f[0].s}function xj(d){var a=d.attributeByName;if(d.getAttribute("contenteditable")||Ia(a.contenteditable))return Ia(a.value)?yj:null;if("input"===d.name){var f=d.getAttribute("type");
if("radio"===f||"checkbox"===f){var b=Ia(a.name),c=Ia(a.checked);if(b&&c)if("radio"===f)P("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:d.root});else return tf;if(b)return"radio"===f?zj:Aj;if(c)return"radio"===f?Bj:tf}return"file"===f&&Ia(a.value)?Cj:Ia(a.value)?"number"===f||"range"===f?Dj:ec:null}if("select"===d.name&&Ia(a.value))return d.getAttribute("multiple")?Ej:Fj;if("textarea"===d.name&&Ia(a.value))return ec}function Gj(d){d.makeDirty()}
function Hj(d){var a=d.attributeByName;d=a.type;var f=a.value,a=a.name;if(d&&"radio"===d.value&&f&&a.interpolator&&f.getValue()===a.interpolator.model.get())return!0}function Ij(d){return(d=d.toString())?" "+d:""}function Jj(d){var a=d.getAttribute("xmlns");return a?a:"svg"===d.name?"http://www.w3.org/2000/svg":(a=d.parent)?"foreignobject"===a.name?"http://www.w3.org/1999/xhtml":a.node.namespaceURI:d.ractive.el.namespaceURI}function uf(){var d=this._ractive.proxy;I.start();d.formBindings.forEach(Kj);
I.end()}function Kj(d){d.model.set(d.resetValue)}function Lj(d){var a=d.template.f,f=d.element.instance.viewmodel,b=f.value;1===a.length&&2===a[0].t?(d.model=bc(d.parentFragment,a[0]),d.model||(Y("The "+d.name+"='{{"+a[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:d.element.instance}),d.parentFragment.ractive.get(d.name),d.model=d.parentFragment.findContext().joinKey(d.name)),d.link=f.createLink(d.name,d.model,
a[0].r),void 0===d.model.get()&&d.name in b&&d.model.set(b[d.name])):(d.boundFragment=(new K({owner:d,template:a})).bind(),d.model=f.joinKey(d.name),d.model.set(d.boundFragment.valueOf()),d.boundFragment.bubble=function(){K.prototype.bubble.call(d.boundFragment);I.scheduleTask(function(){d.boundFragment.update();d.model.set(d.boundFragment.valueOf())})})}function fc(d,a,f){var b;var c=vf(a,(f||{}).owner);c?b=c:(f=yc("partials",d,a))?(c=f.partials[a],"function"===typeof c&&(b=c.bind(f),b.isOwner=f.partials.hasOwnProperty(a),
c=b.call(d,qa)),c||""===c?(qa.isParsed(c)||(c=qa.parseFor(c,f),c.p&&P("Partials ({{>%s}}) cannot contain nested inline partials",a,{ractive:d}),(b?f:f.partials.hasOwnProperty(a)?f:wf(f.constructor,a)).partials[a]=c=c.t),b&&(c._fn=b),b=c.v?c.t:c):(P('A function was specified for "%s" %s, but no %s was returned',a,"partial","partial",{ractive:d}),b=void 0)):b=void 0;if(b)return b;if(b=qa.fromId(a,{noThrow:!0}))return b=qa.parseFor(b,d),b.p&&m(d.partials,b.p),d.partials[a]=b.t}function wf(d,a){if(d)return d.partials.hasOwnProperty(a)?
d:wf(d._Parent,a)}function vf(d,a){if(a){if(a.template&&a.template.p&&a.template.p[d])return a.template.p[d];if(a.parentFragment&&a.parentFragment.owner)return vf(d,a.parentFragment.owner)}}function xf(d,a,f){var b;try{b=qa.parse(a,qa.getParseOptions(f))}catch(c){P("Could not parse partial from expression '"+d+"'\n"+c.message)}return b||{t:[]}}function yf(d){return d.replace(/-([a-zA-Z])/g,function(d,a){return a.toUpperCase()})}function zf(){Eb=!N[gc]}function kd(){Eb=!1}function ld(){Eb=!0}function Af(d){if(!d)return"";
Mj.test(d)&&(d="-"+d);return d.replace(/[A-Z]/g,function(d){return"-"+d.toLowerCase()})}function Nj(d,a){a?d.setAttribute("style",a):(d.getAttribute("style"),d.removeAttribute("style"))}function md(d){return Bf[d]||(Bf[d]=za(d))}function Cf(d,a){var f=yc("components",d,a),b;if(f&&(b=f.components[a],!b._Parent)){var c=b.bind(f);c.isOwner=f.components.hasOwnProperty(a);b=c();if(!b){P('A function was specified for "%s" %s, but no %s was returned',a,"component","component",{ractive:d});return}"string"===
typeof b&&(b=Cf(d,b));b._fn=c;f.components[a]=b}return b}function hc(d){if("string"===typeof d.template)return new Oj(d);if(7===d.template.t){var a=Cf(d.parentFragment.ractive,d.template.e);if(a)return new Pj(d,a);a=d.template.e.toLowerCase();return new (Qj[a]||Fb)(d)}if(13===d.template.t){a=d.owner;if(!a||15!==a.type&&7!==a.type)a=ja(d.parentFragment);d.element=a;a=15===a.type?Rj:Df}else a=sa[d.template.t];if(!a)throw Error("Unrecognised item type "+d.template.t);return new a(d)}function ic(d,a,
f,b){void 0===b&&(b=0);return d.map(function(d){if(1===d.type)return d.template;if(d.fragment)return d.fragment.iterations?d.fragment.iterations.map(function(d){return ic(d.items,a,f,b)}).join(""):ic(d.fragment.items,a,f,b);var c=""+f+"-"+b++;d=d.model||d.newModel;a[c]=d?d.wrapper?d.wrapperValue:d.get():void 0;return"${"+c+"}"}).join("")}function Sj(d){d.unrender(!0)}function Ef(){var d=[this.cssId].concat(this.findAllComponents().map(function(d){return d.cssId})),d=Object.keys(d.reduce(function(d,
a){return d[a]=!0,d},{}));return Vb(d)}function Ff(){return this.fragment.toString(!0)}function Tj(d,a,f){return f||"function"===typeof a&&/_super/.test(d)?function(){var f="_super"in this,b=this._super,c;this._super=a;c=d.apply(this,arguments);f&&(this._super=b);return c}:d}function Uj(d){for(var a={};d;)Vj(d,a),Wj(d,a),d=d._Parent!==Z?d._Parent:!1;return a}function Vj(d,a){Ab.forEach(function(f){Xj(f.useDefaults?d.prototype:d,a,f.name)})}function Xj(d,a,f){var b,c=Object.keys(d[f]);c.length&&((b=
a[f])||(b=a[f]={}),c.filter(function(d){return!(d in b)}).forEach(function(a){return b[a]=d[f][a]}))}function Wj(d,a){Object.keys(d.prototype).forEach(function(f){if("computed"!==f){var b=d.prototype[f];if(!(f in a))a[f]=b._method?b._method:b;else if("function"===typeof a[f]&&"function"===typeof b&&a[f]._method){var c=b._method;c&&(b=b._method);b=Tj(a[f]._method,b);c&&(b._method=b);a[f]=b}}})}function Gf(){for(var d=[],a=arguments.length;a--;)d[a]=arguments[a];return d.length?d.reduce(Hf,this):Hf(this)}
function Hf(d,a){void 0===a&&(a={});var f,b;a.prototype instanceof Z&&(a=Uj(a));f=function(d){if(!(this instanceof f))return new f(d);ed(this,d||{});hd(this,d||{},{})};b=ra(d.prototype);b.constructor=f;wb(f,{defaults:{value:b},extend:{value:Gf,writable:!0,configurable:!0},_Parent:{value:d}});id.extend(d,b,a);cc.extend(d,b,a);a.computed&&(b.computed=l(ra(d.prototype.computed),a.computed));f.prototype=b;return f}function Z(d){if(!(this instanceof Z))return new Z(d);ed(this,d||{});hd(this,d||{},{})}
var If={el:void 0,append:!1,template:null,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,contextLines:0,data:{},computed:{},magic:!1,modifyArrays:!1,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},Jf={linear:function(d){return d},easeIn:function(d){return Math.pow(d,3)},easeOut:function(d){return Math.pow(d-
1,3)+1},easeInOut:function(d){return 1>(d/=.5)?.5*Math.pow(d,3):.5*(Math.pow(d-2,3)+2)}},fa="undefined"!==typeof window?window:null,N=fa?document:null,nd=!!N;"undefined"!==typeof navigator&&/jsDom/.test(navigator.appName);var Kf="undefined"!==typeof console&&"function"===typeof console.warn&&"function"===typeof console.warn.apply,dc;try{Object.defineProperty({},"test",{value:0}),dc=!0}catch(d){dc=!1}var Lf=N?N.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,
Ja=["o","ms","moz","webkit"],Mf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns"},za,Ka,mb,od,Gb,pd,jc,Nf,qd;za=Lf?function(d,a,f){return a&&"http://www.w3.org/1999/xhtml"!==a?f?N.createElementNS(a,d,f):N.createElementNS(a,d):f?N.createElement(d,f):N.createElement(d)}:function(d,a,f){if(a&&"http://www.w3.org/1999/xhtml"!==
a)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return f?N.createElement(d,f):N.createElement(d)};if(nd){mb=za("div");od=["matches","matchesSelector"];qd=function(d){return function(a,f){return a[d](f)}};for(jc=od.length;jc--&&!Ka;)if(Gb=od[jc],mb[Gb])Ka=qd(Gb);else for(Nf=Ja.length;Nf--;)if(pd=
Ja[jc]+Gb.substr(0,1).toUpperCase()+Gb.substring(1),mb[pd]){Ka=qd(pd);break}Ka||(Ka=function(d,a){var f,b;f=d.parentNode;f||(mb.innerHTML="",f=mb,d=d.cloneNode(),mb.appendChild(d));f=f.querySelectorAll(a);for(b=f.length;b--;)if(f[b]===d)return!0;return!1})}else Ka=null;var tg=/(-.)/g,ug=/[A-Z]/g,ra,Ha,wb;try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),N&&Object.defineProperty(za("div"),"test",{value:0}),Ha=Object.defineProperty}catch(d){Ha=function(d,a,b){d[a]=b.get?b.get():
b.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(d){throw d;}N&&Object.defineProperties(za("div"),{test:{value:0}});wb=Object.defineProperties}catch(d){wb=function(d,a){for(var b in a)a.hasOwnProperty(b)&&Ha(d,b,a[b])}}try{Object.create(null),ra=Object.create}catch(d){ra=function(){var d=function(){};return function(a,b){var c;if(null===a)return{};d.prototype=a;c=new d;b&&Object.defineProperties(c,b);return c}}()}var Xa=Object.prototype.hasOwnProperty,Rd=Object.prototype.toString,
Sd={},Bc,Rb,Cb;if(Kf){var Of=["%cRactive.js %c0.8.7 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];Cb=function(){if(!1!==Z.WELCOME_MESSAGE){var d="WELCOME_MESSAGE"in Z?Z.WELCOME_MESSAGE:"You're running Ractive 0.8.7 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",
a=!!console.groupCollapsed;a&&console.groupCollapsed.apply(console,Of);console.log(d);a&&console.groupEnd(Of)}Cb=w};Rb=function(d,a){Cb();if("object"===typeof a[a.length-1]){var b=a.pop(),c=b?b.ractive:null;if(c){var e;c.component&&(e=c.component.name)&&(d="<"+e+"> "+d);var g;(g=b.node||c.fragment&&c.fragment.rendered&&c.find("*"))&&a.push(g)}}console.warn.apply(console,["%cRactive.js: %c"+d,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(a))};Bc=function(){console.log.apply(console,
arguments)}}else Rb=Bc=Cb=w;var ab=function(d,a){return'Missing "'+d+'" '+a+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+a+"s"},Sb={number:function(d,a){var b;if(!r(d)||!r(a))return null;d=+d;return(b=+a-d)?function(a){return d+a*b}:function(){return d}},array:function(d,a){var b,c,e,g;if(!n(d)||!n(a))return null;b=[];c=[];for(g=e=Math.min(d.length,a.length);g--;)c[g]=Mb(d[g],a[g]);for(g=e;g<d.length;g+=1)b[g]=d[g];for(g=e;g<a.length;g+=1)b[g]=a[g];return function(d){for(var a=
e;a--;)b[a]=c[a](d);return b}},object:function(d,a){var b,c,e,g,h;if(!v(d)||!v(a))return null;b=[];g={};e={};for(h in d)Xa.call(d,h)&&(Xa.call(a,h)?(b.push(h),e[h]=Mb(d[h],a[h])||pg(a[h])):g[h]=d[h]);for(h in a)Xa.call(a,h)&&!Xa.call(d,h)&&(g[h]=a[h]);c=b.length;return function(d){for(var a=c,q;a--;)q=b[a],g[q]=e[q](d);return g}}},Yj={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},
complete:{deprecated:"complete",replacement:"oncomplete"}},ca=function(d){this.event=d;this.method="on"+d;this.deprecate=Yj[d]};ca.prototype.call=function(d,a,b){if(a[d])return b?a[d](b):a[d](),!0};ca.prototype.fire=function(d,a){this.call(this.method,d,a);!d[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,d,a)&&(this.deprecate.message?P(this.deprecate.message):P('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',
this.deprecate.deprecated,this.deprecate.replacement));a?d.fire(this.event,a):d.fire(this.event)};var ya,rd={},Pf={},Zj={};"function"===typeof Promise?ya=Promise:(ya=function(d){var a=[],b=[],c=rd,e,g,h,k;h=function(d){return function(h){c===rd&&(e=h,c=d,g=wa(c===Pf?a:b,e),setTimeout(g,0))}};k=h(Pf);h=h(Zj);try{d(k,h)}catch(l){h(l)}return{then:function(d,e){var h=new ya(function(k,$a){var l=function(d,a,b){"function"===typeof d?a.push(function(a){var b;try{b=d(a),Nb(h,b,k,$a)}catch(f){$a(f)}}):a.push(b)};
l(d,a,k);l(e,b,$a);c!==rd&&setTimeout(g,0)});return h},"catch":function(d){return this.then(null,d)}}},ya.all=function(d){return new ya(function(a,b){var c=[],e,g,h;if(d.length)for(h=function(d,g){d&&"function"===typeof d.then?d.then(function(d){c[g]=d;--e||a(c)},b):(c[g]=d,--e||a(c))},e=g=d.length;g--;)h(d[g],g);else a(c)})},ya.resolve=function(d){return new ya(function(a){a(d)})},ya.reject=function(d){return new ya(function(a,b){b(d)})});var La=ya,Ma=function(d,a){this.callback=d;this.parent=a;
this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.outrosComplete=!1;a&&a.addChild(this)};Ma.prototype.add=function(d){(d.isIntro?this.intros:this.outros).push(d)};Ma.prototype.addChild=function(d){this.children.push(d);this.totalChildren+=1;this.outroChildren+=1};Ma.prototype.decrementOutros=function(){--this.outroChildren;na(this)};Ma.prototype.decrementTotal=function(){--this.totalChildren;na(this)};Ma.prototype.detachNodes=function(){this.detachQueue.forEach(Va);
this.children.forEach(Ac)};Ma.prototype.ready=function(){var d=this.detachQueue,a=Ya(this),b=d.length,c=0,e,g;a:for(;b--;){e=d[b].node;for(c=a.length;c--;)if(g=a[c].element.node,g===e||g.contains(e)||e.contains(g))continue a;d[b].detach();d.splice(b,1)}};Ma.prototype.remove=function(a){M(a.isIntro?this.intros:this.outros,a);na(this)};Ma.prototype.start=function(){this.children.forEach(function(a){return a.start()});this.intros.concat(this.outros).forEach(function(a){return a.start()});this.ready=
!0;na(this)};var Td=new ca("change"),O,I={start:function(a,b){var f,c;b&&(f=new La(function(a){return c=a}));O={previousBatch:O,transitionManager:new Ma(c,O&&O.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],ractives:[],instance:a};return f},end:function(){Qb();O.previousBatch||O.transitionManager.start();O=O.previousBatch},addFragment:function(a){T(O.fragments,a)},addFragmentToRoot:function(a){if(O){for(var b=O;b.previousBatch;)b=b.previousBatch;T(b.fragments,
a)}},addInstance:function(a){O&&T(O.ractives,a)},addObserver:function(a,b){T(b?O.deferredObservers:O.immediateObservers,a)},registerTransition:function(a){a._manager=O.transitionManager;O.transitionManager.add(a)},detachWhenReady:function(a){O.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var f;if(O){for(f=O;b&&f.previousBatch;)f=f.previousBatch;f.tasks.push(a)}else a()}},Cc=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,wg=/([^\\](?:\\\\)*)\./,vg=/\\|\./g,xg=/((?:\\)+)\1|\\(\.)/g,yg=/\*/,
Dc=La.resolve();Ha(Dc,"stop",{value:w});var zg=Jf.linear,ak=new ca("detach"),Na=function(a,b,f,c){this.ractive=a;this.selector=b;this.live=f;this.isComponentQuery=c;this.result=[];this.dirty=!0};Na.prototype.add=function(a){this.result.push(a);this.makeDirty()};Na.prototype.cancel=function(){var a=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],b=this.selector,f=a.indexOf(b);-1!==f&&(a.splice(f,1),a[b]=null)};Na.prototype.init=function(){this.dirty=!1};Na.prototype.makeDirty=
function(){var a=this;this.dirty||(this.dirty=!0,I.scheduleTask(function(){return a.update()}))};Na.prototype.remove=function(a){a=this.result.indexOf(this.isComponentQuery?a.instance:a);-1!==a&&this.result.splice(a,1)};Na.prototype.update=function(){this.result.sort(this.isComponentQuery?Gd:qg);this.dirty=!1};Na.prototype.test=function(a){return this.isComponentQuery?!this.selector||a.name===this.selector:a?Ka(a,this.selector):null};var Tb={},Ec={},sb=[],tb,Ba=function(a,b){this.value=a;this.isReadonly=
this.isKey=!0;this.deps=[];this.links=[];this.parent=b};Ba.prototype.get=function(a){a&&Oa(this);return va(this.value)};Ba.prototype.getKeypath=function(){return va(this.value)};Ba.prototype.rebinding=function(a,b){for(var f=this.deps.length;f--;)this.deps[f].rebinding(a,b,!1);for(f=this.links.length;f--;)this.links[f].rebinding(a,b,!1)};Ba.prototype.register=function(a){this.deps.push(a)};Ba.prototype.registerLink=function(a){T(this.links,a)};Ba.prototype.unregister=function(a){M(this.deps,a)};Ba.prototype.unregisterLink=
function(a){M(this.links,a)};var la=function(a,b){this.parent=a;this.value=(this.ractive=b)?a.getKeypath(b):a.getKeypath();this.deps=[];this.children={};this.isReadonly=this.isKeypath=!0};la.prototype.get=function(a){a&&Oa(this);return this.value};la.prototype.getChild=function(a){if(!(a._guid in this.children)){var b=new la(this.parent,a);this.children[a._guid]=b;b.owner=this}return this.children[a._guid]};la.prototype.getKeypath=function(){return this.value};la.prototype.handleChange=function(){for(var a=
Object.keys(this.children),b=a.length;b--;)this.children[a[b]].handleChange();this.deps.forEach(aa)};la.prototype.rebindChildren=function(a){for(var b=Object.keys(this.children),f=b.length;f--;){var c=this.children[b[f]];c.value=a.getKeypath(c.ractive);c.handleChange()}};la.prototype.rebinding=function(a,b){for(var f=a?a.getKeypathModel(this.ractive):void 0,c=Object.keys(this.children),e=c.length;e--;)this.children[c[e]].rebinding(a,b,!1);for(e=this.deps.length;e--;)this.deps[e].rebinding(f,this,
!1)};la.prototype.register=function(a){this.deps.push(a)};la.prototype.removeChild=function(a){a.ractive&&delete this.children[a.ractive._guid]};la.prototype.teardown=function(){this.owner&&this.owner.removeChild(this);for(var a=Object.keys(this.children),b=a.length;b--;)this.children[a[b]].teardown()};la.prototype.unregister=function(a){M(this.deps,a);this.deps.length||this.teardown()};var Qf=Object.prototype.hasOwnProperty,Hc={early:[],mark:[]},Ic={early:[],mark:[]},R=function(a){this.deps=[];this.children=
[];this.childByKey={};this.links=[];this.keyModels={};this.unresolved=[];this.unresolvedByKey={};this.bindings=[];this.patternObservers=[];a&&(this.parent=a,this.root=a.root)};R.prototype.addUnresolved=function(a,b){this.unresolvedByKey[a]||(this.unresolved.push(a),this.unresolvedByKey[a]=[]);this.unresolvedByKey[a].push(b)};R.prototype.addShuffleTask=function(a,b){void 0===b&&(b="early");Hc[b].push(a)};R.prototype.addShuffleRegister=function(a,b){void 0===b&&(b="early");Ic[b].push({model:this,item:a})};
R.prototype.clearUnresolveds=function(a){for(var b=this.unresolved.length;b--;){var f=this.unresolved[b];if(!a||f===a){for(var c=this.unresolvedByKey[f],e=this.has(f),g=c.length;g--;)e&&c[g].attemptResolution(),c[g].resolved&&c.splice(g,1);c.length||(this.unresolved.splice(b,1),this.unresolvedByKey[f]=null)}}};R.prototype.findMatches=function(a){var b=a.length,f=[this],c,e,g=function(){var b=a[e];"*"===b?(c=[],f.forEach(function(a){c.push.apply(c,a.getValueChildren(a.get()))})):c=f.map(function(a){return a.joinKey(b)});
f=c};for(e=0;e<b;e+=1)g();return c};R.prototype.getKeyModel=function(a,b){if(void 0!==a&&!b)return this.parent.getKeyModel(a,!0);a in this.keyModels||(this.keyModels[a]=new Ba(xa(a),this));return this.keyModels[a]};R.prototype.getKeypath=function(a){if(a!==this.ractive&&this._link)return this._link.target.getKeypath(a);this.keypath||(this.keypath=this.parent.isRoot?this.key:""+this.parent.getKeypath(a)+"."+xa(this.key));return this.keypath};R.prototype.getValueChildren=function(a){var b=this,f;if(n(a))f=
[],"length"in this&&this.length!==a.length&&f.push(this.joinKey("length")),a.forEach(function(a,d){f.push(b.joinKey(d))});else if(v(a)||"function"===typeof a)f=Object.keys(a).map(function(a){return b.joinKey(a)});else if(null!=a)return[];return f};R.prototype.getVirtual=function(a){var b=this.get(a,{virtual:!1});if(v(b)){a=n(b)?[]:{};for(var f=Object.keys(b),c=f.length;c--;){var e=this.childByKey[f[c]];a[f[c]]=e?e._link?e._link.getVirtual():e.getVirtual():b[f[c]]}for(c=this.children.length;c--;)b=
this.children[c],b.key in a||!b._link||(a[b.key]=b._link.getVirtual());return a}return b};R.prototype.has=function(a){if(this._link)return this._link.has(a);var b=this.get();if(!b)return!1;a=va(a);if(Qf.call(b,a))return!0;for(b=b.constructor;b!==Function&&b!==Array&&b!==Object;){if(Qf.call(b.prototype,a))return!0;b=b.constructor}return!1};R.prototype.joinAll=function(a,b){for(var f=this,c=0;c<a.length;c+=1){if(b&&!1===b.lastLink&&c+1===a.length&&f.childByKey[a[c]]&&f.childByKey[a[c]]._link)return f.childByKey[a[c]];
f=f.joinKey(a[c],b)}return f};R.prototype.notifyUpstream=function(){for(var a=this.parent,b=[this.key];a;)a.patternObservers.length&&a.patternObservers.forEach(function(a){return a.notify(b.slice())}),b.unshift(a.key),a.links.forEach(Ud),a.deps.forEach(aa),a=a.parent};R.prototype.rebinding=function(a,b,f){for(var c=this.deps.length;c--;)this.deps[c].rebinding&&this.deps[c].rebinding(a,b,f);for(c=this.links.length;c--;){var e=this.links[c];e.owner._link&&e.relinking(a,!0,f)}for(c=this.children.length;c--;)e=
this.children[c],e.rebinding(a?a.joinKey(e.key):void 0,e,f);for(c=this.unresolved.length;c--;)for(var e=this.unresolvedByKey[this.unresolved[c]],g=e.length;g--;)e[g].rebinding(a,b);this.keypathModel&&this.keypathModel.rebinding(a,b,!1);for(c=this.bindings.length;c--;)this.bindings[c].rebinding(a,b,f)};R.prototype.register=function(a){this.deps.push(a)};R.prototype.registerChange=function(a,b){this.isRoot?(this.changes[a]=b,I.addInstance(this.root.ractive)):this.root.registerChange(a,b)};R.prototype.registerLink=
function(a){T(this.links,a)};R.prototype.registerPatternObserver=function(a){this.patternObservers.push(a);this.register(a)};R.prototype.registerTwowayBinding=function(a){this.bindings.push(a)};R.prototype.removeUnresolved=function(a,b){var f=this.unresolvedByKey[a];f&&M(f,b)};R.prototype.shuffled=function(){for(var a=this.children.length;a--;)this.children[a].shuffled();this.wrapper&&(this.wrapper.teardown(),this.wrapper=null,this.rewrap=!0)};R.prototype.unregister=function(a){M(this.deps,a)};R.prototype.unregisterLink=
function(a){M(this.links,a)};R.prototype.unregisterPatternObserver=function(a){M(this.patternObservers,a);this.unregister(a)};R.prototype.unregisterTwowayBinding=function(a){M(this.bindings,a)};R.prototype.updateFromBindings=function(a){for(var b=this.bindings.length;b--;){var f=this.bindings[b].getValue();f!==this.value&&this.set(f)}this.bindings.length||(b=Zd(this.deps))&&b.value!==this.value&&this.set(b.value);a&&(this.children.forEach(Yd),this.links.forEach(Yd),this._link&&this._link.updateFromBindings(a))};
Ba.prototype.addShuffleTask=R.prototype.addShuffleTask;Ba.prototype.addShuffleRegister=R.prototype.addShuffleRegister;la.prototype.addShuffleTask=R.prototype.addShuffleTask;la.prototype.addShuffleRegister=R.prototype.addShuffleRegister;var bk=function(a){function b(f,c,q,e){a.call(this,f);this.owner=c;this.target=q;this.key=void 0===e?c.key:e;c.isLink&&(this.sourcePath=""+c.sourcePath+"."+this.key);q.registerLink(this);this.isReadonly=f.isReadonly;this.isLink=!0}b.prototype=Object.create(a&&a.prototype);
b.prototype.constructor=b;b.prototype.animate=function(a,d,b,c){return this.target.animate(a,d,b,c)};b.prototype.applyValue=function(a){this.target.applyValue(a)};b.prototype.get=function(a,d){a&&(Oa(this),d=d||{},d.unwrap=!0);return this.target.get(!1,d)};b.prototype.getKeypath=function(b){return b&&b!==this.root.ractive?this.target.getKeypath(b):a.prototype.getKeypath.call(this,b)};b.prototype.getKeypathModel=function(a){this.keypathModel||(this.keypathModel=new la(this));return a&&a!==this.root.ractive?
this.keypathModel.getChild(a):this.keypathModel};b.prototype.handleChange=function(){this.deps.forEach(aa);this.links.forEach(aa);this.notifyUpstream()};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var d=new b(this,this,this.target.joinKey(a),a);this.children.push(d);this.childByKey[a]=d}return this.childByKey[a]};b.prototype.mark=function(){this.target.mark()};b.prototype.marked=function(){this.links.forEach(bb);this.deps.forEach(aa);this.clearUnresolveds()};
b.prototype.notifiedUpstream=function(){this.links.forEach(Ud);this.deps.forEach(aa)};b.prototype.relinked=function(){this.target.registerLink(this);this.children.forEach(function(a){return a.relinked()})};b.prototype.relinking=function(a,d,b){var c=this;d&&this.sourcePath&&(a=Pa(this.sourcePath,a,this.target));a&&this.target!==a&&(this.target.unregisterLink(this),this.keypathModel&&this.keypathModel.rebindChildren(a),this.target=a,this.children.forEach(function(d){d.relinking(a.joinKey(d.key),!1,
b)}),d&&this.addShuffleTask(function(){c.relinked();b||c.notifyUpstream()}))};b.prototype.set=function(a){this.target.set(a)};b.prototype.shuffle=function(a){if(!this.shuffling)if(this.target.shuffling){this.shuffling=!0;for(var d=a.length;d--;){var b=a[d];d!==b&&(d in this.childByKey&&this.childByKey[d].rebinding(~b?this.joinKey(b):void 0,this.childByKey[d],!0),!~b&&this.keyModels[d]?this.keyModels[d].rebinding(void 0,this.keyModels[d],!1):~b&&this.keyModels[d]&&(this.keyModels[b]||this.childByKey[b].getKeyModel(b),
this.keyModels[d].rebinding(this.keyModels[b],this.keyModels[d],!1)))}b=this.source().length!==this.source().value.length;this.links.forEach(function(d){return d.shuffle(a)});for(d=this.deps.length;d--;)this.deps[d].shuffle&&this.deps[d].shuffle(a);this.marked();b&&this.notifyUpstream();this.shuffling=!1}else this.target.shuffle(a)};b.prototype.source=function(){return this.target.source?this.target.source():this.target};b.prototype.teardown=function(){this._link&&this._link.teardown();this.children.forEach(Gc)};
return b}(R);R.prototype.link=function(a,b){var f=this._link||new bk(this.parent,this,a,this.key);f.sourcePath=b;this._link&&this._link.relinking(a,!0,!1);this.rebinding(f,this,!1);db();var c=!this._link;this._link=f;c&&this.parent.clearUnresolveds();f.marked();return f};R.prototype.unlink=function(){if(this._link){var a=this._link;this._link=void 0;a.rebinding(this,this._link);db();a.teardown()}};var sd;fa?(function(a,b,f){var c,e;if(!f.requestAnimationFrame){for(c=0;c<a.length&&!f.requestAnimationFrame;++c)f.requestAnimationFrame=
f[a[c]+"RequestAnimationFrame"];f.requestAnimationFrame||(e=f.setTimeout,f.requestAnimationFrame=function(a){var d,f,c;d=Date.now();f=Math.max(0,16-(d-b));c=e(function(){a(d+f)},f);b=d+f;return c})}}(Ja,0,fa),sd=fa.requestAnimationFrame):sd=null;var be=sd,ae=fa&&fa.performance&&"function"===typeof fa.performance.now?function(){return fa.performance.now()}:function(){return Date.now()},vb=[],ce=!1,kc=function(a){this.duration=a.duration;this.step=a.step;this.complete=a.complete;this.easing=a.easing;
this.start=ae();this.end=this.start+this.duration;this.running=!0;vb.push(this);ce||be($d)};kc.prototype.tick=function(a){if(!this.running)return!1;if(a>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;a=this.easing((a-this.start)/this.duration);this.step&&this.step(a);return!0};kc.prototype.stop=function(){this.abort&&this.abort();this.running=!1};var Jc={},Ta=function(a){function b(f,c){a.call(this,f);this.ticker=null;f&&(this.key=va(c),this.isReadonly=f.isReadonly,f.value&&
(this.value=f.value[this.key],n(this.value)&&(this.length=this.value.length),this.adapt()))}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.adapt=function(){var a=this.root.adaptors,d=a.length;this.rewrap=!1;if(0!==d){var b=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,c=this.root.ractive,q=this.getKeypath();if(this.wrapper)if(this.wrapperValue===b?0:!this.wrapper.reset||!1===this.wrapper.reset(b)){if(this.wrapper.teardown(),
this.wrapper=null,void 0!==this.value){var e=this.parent.value||this.parent.createBranch(this.key);e[this.key]!==b&&(e[this.key]=b)}}else{delete this.newWrapperValue;this.wrapperValue=b;this.value=this.wrapper.get();return}for(e=0;e<d;e+=1){var g=a[e];if(g.filter(b,q,c)){this.wrapper=g.wrap(c,b,q,Ag(q));this.wrapperValue=b;this.wrapper.__model=this;this.value=this.wrapper.get();break}}}};b.prototype.animate=function(a,d,b,c){var q=this;this.ticker&&this.ticker.stop();var e;a=new La(function(a){return e=
a});this.ticker=new kc({duration:b.duration,easing:b.easing,step:function(a){var d=c(a);q.applyValue(d);b.step&&b.step(a,d)},complete:function(){q.applyValue(d);b.complete&&b.complete(d);q.ticker=null;e()}});a.stop=this.ticker.stop;return a};b.prototype.applyValue=function(a){p(a,this.value)||(this.registerChange(this.getKeypath(),a),this.parent.wrapper&&this.parent.wrapper.set?(this.parent.wrapper.set(this.key,a),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],
this.wrapper&&(this.newWrapperValue=this.value)):this.wrapper?this.newWrapperValue=a:this.value=(this.parent.value||this.parent.createBranch(this.key))[this.key]=a,this.adapt(),this.parent.clearUnresolveds(),this.clearUnresolveds(),n(a)&&(this.length=a.length),this.links.forEach(aa),this.children.forEach(Pb),this.deps.forEach(aa),this.notifyUpstream(),"length"===this.key&&n(this.parent.value)&&(this.parent.length=this.parent.value.length))};b.prototype.createBranch=function(a){a=r(a)?[]:{};this.set(a);
return a};b.prototype.get=function(a,d){if(this._link)return this._link.get(a,d);a&&Oa(this);return d&&d.virtual?this.getVirtual(!1):(a||d&&d.unwrap)&&this.wrapper?this.wrapperValue:this.value};b.prototype.getKeypathModel=function(a){this.keypathModel||(this.keypathModel=new la(this));return this.keypathModel};b.prototype.joinKey=function(a,d){if(this._link)return!d||!1!==!d.lastLink||void 0!==a&&""!==a?this._link.joinKey(a):this;if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var c=
new b(this,a);this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]._link?this.childByKey[a]._link:this.childByKey[a]};b.prototype.mark=function(){if(this._link)return this._link.mark();var a=this.retrieve();if(!p(a,this.value)){var d=this.value;this.value=a;if(d!==a||this.rewrap)this.wrapper&&(this.newWrapperValue=a),this.adapt();n(a)&&(this.length=a.length);this.children.forEach(Pb);this.links.forEach(bb);this.deps.forEach(aa);this.clearUnresolveds()}};b.prototype.merge=function(a,
d){var b=this.value,c=a;b===c&&(b=Bg(this));d&&(b=b.map(d),c=c.map(d));var q=b.length,e={},g=0,b=b.map(function(a){var d,b=g;do{d=c.indexOf(a,b);if(-1===d)return-1;b=d+1}while(!0===e[d]&&b<q);d===g&&(g+=1);e[d]=!0;return d});this.parent.value[this.key]=a;this.shuffle(b)};b.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0};b.prototype.set=function(a){this.ticker&&this.ticker.stop();this.applyValue(a)};b.prototype.shuffle=function(a){this.shuffling=!0;for(var d=
a.length;d--;){var b=a[d];d!==b&&(d in this.childByKey&&this.childByKey[d].rebinding(~b?this.joinKey(b):void 0,this.childByKey[d],!0),!~b&&this.keyModels[d]?this.keyModels[d].rebinding(void 0,this.keyModels[d],!1):~b&&this.keyModels[d]&&(this.keyModels[b]||this.childByKey[b].getKeyModel(b),this.keyModels[d].rebinding(this.keyModels[b],this.keyModels[d],!1)))}b=this.length!==this.value.length;this.links.forEach(function(d){return d.shuffle(a)});db("early");for(d=this.deps.length;d--;)this.deps[d].shuffle&&
this.deps[d].shuffle(a);this.mark();db("mark");b&&this.notifyUpstream();this.shuffling=!1};b.prototype.teardown=function(){this._link&&this._link.teardown();this.children.forEach(Gc);this.wrapper&&this.wrapper.teardown();this.keypathModel&&this.keypathModel.teardown()};return b}(R),ee=new (function(a){function b(){a.call(this,null,"@global");this.value="undefined"!==typeof global?global:window;this.isRoot=!0;this.root=this;this.adaptors=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.getKeypath=function(){return"@global"};b.prototype.registerChange=function(){};return b}(Ta)),de=/^@[^\(]+\(([^\)]+)\)/,he=Array.prototype,ie={},Eg=new ca("update"),Og=oa("push").model,Mg=oa("pop").model,Tg=oa("shift").model,bh=oa("unshift").model,Xg=oa("sort").model,Vg=oa("splice").model,Qg=oa("reverse").model,ne=N&&N.querySelector,nh=new ca("insert"),nb=function(a,b,f){this.fragment=a;this.reference=b?b.replace(Cc,".$1"):"";this.callback=f;this.keys=x(b);this.resolved=!1;for(this.contexts=
[];a;)a.context&&(a.context.addUnresolved(this.keys[0],this),this.contexts.push(a.context)),a=a.componentParent||a.parent};nb.prototype.attemptResolution=function(){if(!this.resolved){var a=Nd(this.fragment,this.reference);a&&(this.resolved=!0,this.callback(a))}};nb.prototype.forceResolution=function(){if(!this.resolved){var a=this.fragment.findContext().joinAll(this.keys);this.callback(a);this.resolved=!0}};nb.prototype.rebinding=function(a,b){var f=this;b&&b.removeUnresolved(this.keys[0],this);
a&&I.scheduleTask(function(){return a.addUnresolved(f.keys[0],f)})};nb.prototype.unbind=function(){var a=this;this.fragment&&M(this.fragment.unresolved,this);this.resolved||this.contexts.forEach(function(b){return b.removeUnresolved(a.keys[0],a)})};var eb=function(a,b,f,c){var e=this;this.context=c.context||a;this.callback=f;this.ractive=a;b?this.resolved(b):(this.keypath=c.keypath,this.resolver=new nb(a.fragment,c.keypath,function(a){e.resolved(a)}));!1!==c.init?(this.dirty=!0,this.dispatch()):this.oldValue=
this.newValue;this.defer=c.defer;this.once=c.once;this.strict=c.strict;this.dirty=!1};eb.prototype.cancel=function(){this.cancelled=!0;this.model?this.model.unregister(this):this.resolver.unbind()};eb.prototype.dispatch=function(){this.cancelled||(this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.model?this.model.get():this.newValue,this.dirty=!1)};eb.prototype.handleChange=function(){var a=this;if(!this.dirty){var b=this.model.get();p(b,this.oldValue)||
(this.newValue=b,this.strict&&this.newValue===this.oldValue||(I.addObserver(this,this.defer),this.dirty=!0,this.once&&I.scheduleTask(function(){return a.cancel()})))}};eb.prototype.rebinding=function(a,b){var f=this;a=Pa(this.keypath,a,b);if(a===this.model)return!1;this.model&&this.model.unregister(this);a&&a.addShuffleTask(function(){return f.resolved(a)})};eb.prototype.resolved=function(a){this.model=a;this.keypath=a.getKeypath(this.ractive);this.oldValue=void 0;this.newValue=a.get();a.register(this)};
var fb=function(a,b,f,c,e){var g=this;this.context=e.context||a;this.ractive=a;this.baseModel=b;this.keys=f;this.callback=c;f=f.join("\\.").replace(/\*/g,"(.+)");a=b.getKeypath(a);this.pattern=new RegExp("^"+(a?a+"\\.":"")+""+f+"$");this.oldValues={};this.newValues={};this.defer=e.defer;this.once=e.once;this.strict=e.strict;this.dirty=!1;this.changed=[];this.partial=!1;b.findMatches(this.keys).forEach(function(a){g.newValues[a.getKeypath(g.ractive)]=a.get()});!1!==e.init?this.dispatch():this.oldValues=
this.newValues;b.registerPatternObserver(this)};fb.prototype.cancel=function(){this.baseModel.unregisterPatternObserver(this)};fb.prototype.dispatch=function(){var a=this;Object.keys(this.newValues).forEach(function(b){if(!a.newKeys||a.newKeys[b]){var c=a.newValues[b],q=a.oldValues[b];a.strict&&c===q||p(c,q)||(c=[c,q,b],b&&(b=a.pattern.exec(b))&&(c=c.concat(b.slice(1))),a.callback.apply(a.context,c))}});if(this.partial)for(var b in this.newValues)this.oldValues[b]=this.newValues[b];else this.oldValues=
this.newValues;this.newKeys=null;this.dirty=!1};fb.prototype.notify=function(a){this.changed.push(a)};fb.prototype.shuffle=function(a){if(n(this.baseModel.value)){var b=this.baseModel.getKeypath(this.ractive),f=this.baseModel.value.length,c=1<this.keys.length?"."+this.keys.slice(1).join("."):"";this.newKeys={};for(var e=0;e<a.length;e++)-1!==a[e]&&a[e]!==e&&(this.newKeys[""+b+"."+e+""+c]=!0);for(a=a.touchedFrom;a<f;a++)this.newKeys[""+b+"."+a+""+c]=!0}};fb.prototype.handleChange=function(){var a=
this;if(!this.dirty||this.changed.length){this.dirty||(this.newValues={});if(this.changed.length){var b=0,f=this.baseModel.isRoot?this.changed.map(function(a){return a.map(xa).join(".")}):this.changed.map(function(b){return a.baseModel.getKeypath(a.ractive)+"."+b.map(xa).join(".")});this.baseModel.findMatches(this.keys).forEach(function(c){var e=c.getKeypath(a.ractive);f.filter(function(a){return 0===e.indexOf(a)||0===a.indexOf(e)}).length&&(b++,a.newValues[e]=c.get())});if(!b)return;this.partial=
!0}else this.baseModel.findMatches(this.keys).forEach(function(b){var f=b.getKeypath(a.ractive);a.newValues[f]=b.get()}),this.partial=!1;I.addObserver(this,this.defer);this.dirty=!0;this.changed.length=0;this.once&&this.cancel()}};var lc=function(a,b,f,c){this.context=a;this.model=b;this.keypath=b.getKeypath();this.callback=f;this.pending=null;b.register(this);!1!==c.init?(this.sliced=[],this.shuffle([]),this.handleChange()):this.sliced=this.slice()};lc.prototype.handleChange=function(){this.pending?
(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(oh)),this.handleChange())};lc.prototype.shuffle=function(a){var b=this,f=this.slice(),c=[],e=[],g,h={};a.forEach(function(a,d){h[a]=!0;a!==d&&void 0===g&&(g=d);-1===a&&e.push(b.sliced[d])});void 0===g&&(g=a.length);a=f.length;for(var k=0;k<a;k+=1)h[k]||c.push(f[k]);this.pending={inserted:c,deleted:e,start:g};this.sliced=f};lc.prototype.slice=function(){var a=this.model.get();return n(a)?a.slice():[]};var Rf={init:!1,once:!0},
ck=oa("pop").path,dk=oa("push").path,Lc=[],Mc=!1,Qa=null,te=null;!N||Qa&&Qa.parentNode||(Qa=N.createElement("style"),Qa.type="text/css",N.getElementsByTagName("head")[0].appendChild(Qa),te=!!Qa.styleSheet);var ph=new ca("render"),qh=new ca("complete"),ff={extend:function(a,b,f){a=Da(f.adapt);f=b.adapt.slice();for(var c=a.length;c--;)~f.indexOf(a[c])||f.push(a[c]);b.adapt=f},init:function(){}},vh=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,uh=/\/\*[\s\S]*?\*\//g,xh=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,
wh=/^(?:@|\d+%)/,ue=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,gf={name:"css",extend:function(a,b,f){f.css&&(a=Ra()+Ra()+"-"+Ra()+"-"+Ra()+"-"+Ra()+"-"+Ra()+Ra()+Ra(),f=f.noCssTransform?f.css:th(f.css,a),b.cssId=a,Lc.push({id:a,styles:f}),Mc=!0)},init:function(a,b,f){f.css&&P("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}},
cc={name:"data",extend:function(a,b,f){var c;if(f.data&&v(f.data))for(c in f.data)(a=f.data[c])&&"object"===typeof a&&(v(a)||n(a))&&P("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");b.data=ve(b.data,f.data)},init:function(a,b,
f){a=ve(a.prototype.data,f.data);"function"===typeof a&&(a=a.call(b));if(a&&a.constructor===Object)for(var c in a)"function"===typeof a[c]&&(a[c]=S(a[c],b));return a||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.root.set(b);return!0}},yh=/\$\{([^\}]+)\}/g,xb=ra(null),Ua,td,ek=/^\s+/;td=function(a){this.name="ParseError";this.message=a;try{throw Error(a);}catch(b){this.stack=b.stack}};td.prototype=Error.prototype;Ua=function(a,b){var f,c,e=0;this.str=a;this.options=
b||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(a){return e=a=e+a.length+1},0);this.init&&this.init(a,b);for(f=[];this.pos<this.str.length&&(c=this.read());)f.push(c);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(f,b):f};Ua.prototype={read:function(a){var b,f,c,e;a||(a=this.converters);b=this.pos;c=a.length;for(f=0;f<c;f+=1)if(this.pos=b,e=a[f](this))return e;return null},getContextMessage:function(a,b){var f=this.getLinePos(a),
c=f[0],e=f[1];if(-1===this.options.contextLines)return[c,e,""+b+" at line "+c+" character "+e];var f=this.lines[c-1],g="",h="";this.options.contextLines&&(g=0>c-1-this.options.contextLines?0:c-1-this.options.contextLines,g=this.lines.slice(g,c-1-g).join("\n").replace(/\t/g,"  "),h=this.lines.slice(c,c+this.options.contextLines).join("\n").replace(/\t/g,"  "),g&&(g+="\n"),h&&(h="\n"+h));var k=0,f=g+f.replace(/\t/g,function(a,d){d<e&&(k+=1);return"  "})+"\n"+Array(e+k).join(" ")+"^----"+h;return[c,
e,""+b+" at line "+c+" character "+e+":\n"+f]},getLinePos:function(a){for(var b=0,f=0;a>=this.lineEnds[b];)f=this.lineEnds[b],b+=1;return[b+1,a-f+1,a]},error:function(a){var b=this.getContextMessage(this.pos,a),f=b[0],c=b[1],b=new td(b[2]);b.line=f;b.character=c;b.shortMessage=a;throw b;},matchString:function(a){if(this.str.substr(this.pos,a.length)===a)return this.pos+=a.length,a},matchPattern:function(a){if(a=a.exec(this.remaining()))return this.pos+=a[0].length,a[1]||a[0]},allowWhitespace:function(){this.matchPattern(ek)},
remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};Ua.extend=function(a){var b,f;b=function(a,d){Ua.call(this,a,d)};b.prototype=ra(this.prototype);for(f in a)Xa.call(a,f)&&(b.prototype[f]=a[f]);b.extend=Ua.extend;return b};var Ae=/^[^\s=]+/,Ah=/^\s+/,Bh=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Ch=/[-/\\^$*+?.()|[\]{}]/g,Ce={},ud=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,
vd=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,De={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,
AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,
divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,
nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,
uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,
lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Fh=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Dh=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(De).join("|")+"));?","g"),Ee="function"===typeof String.fromCodePoint,Eh=Ee?String.fromCodePoint:String.fromCharCode,Hh=/</g,Ih=/>/g,Gh=/&/g,Yb=65533,Jh=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
He,Ie,Je;He=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;Ie=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;Je=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Lh=Ge('"'),Kh=Ge("'"),Uc=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Mh=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Rh=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,Xc,Me;Xc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/;
Me=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Th=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Sh=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/,Oh=/^@(?:keypath|rootpath|index|key|this|global)/,Ph=/^\s*\(/,Qh=/^\s*\.{3}/,Sf,Tf;Tf=function(a,b){return function(f){var c;if(c=b(f))return c;if(!f.matchString(a))return null;f.allowWhitespace();(c=ia(f))||f.error("Expected a JavaScript expression");
return{s:a,o:c,t:33}}};(function(){var a,b,f,c;c=["!","~","+","-","typeof"];f=Uh;a=0;for(b=c.length;a<b;a+=1)f=Tf(c[a],f);Sf=f})();var fk=Sf,Uf,Vf;Vf=function(a,b){return function(f){var c,e,g;e=b(f);if(!e)return null;for(;;){c=f.pos;f.allowWhitespace();if(!f.matchString(a)||"in"===a&&/[a-zA-Z_$0-9]/.test(f.remaining().charAt(0)))return f.pos=c,e;f.allowWhitespace();g=b(f);if(!g)return f.pos=c,e;e={t:36,s:a,o:[e,g]}}}};(function(){var a,b,f,c;c="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");
f=fk;a=0;for(b=c.length;a<b;a+=1)f=Vf(c[a],f);Uf=f})();var Vh=Uf,Wf={"true":!0,"false":!1,"null":null,undefined:void 0},gk=new RegExp("^(?:"+Object.keys(Wf).join("|")+")"),hk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,ik=/\$\{([^\}]+)\}/g,jk=/^\$\{([^\}]+)\}/,kk=/^\s*$/,Xh=Ua.extend({init:function(a,b){this.values=b.values;this.allowWhitespace()},postProcess:function(a){return 1===a.length&&kk.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){if(!a.values)return null;
var b=a.matchPattern(jk);if(b&&a.values.hasOwnProperty(b))return{v:a.values[b]}},function(a){if(a=a.matchPattern(gk))return{v:Wf[a]}},function(a){if(a=a.matchPattern(hk))return{v:+a}},function(a){var b=Tc(a),f=a.values;return b&&f?{v:b.v.replace(ik,function(a,d){return d in f?f[d]:d})}:b},function(a){if(!a.matchString("{"))return null;var b={};a.allowWhitespace();if(a.matchString("}"))return{v:b};for(var f;f=Wh(a);){b[f.key]=f.value;a.allowWhitespace();if(a.matchString("}"))return{v:b};if(!a.matchString(","))break}return null},
function(a){if(!a.matchString("["))return null;var b=[];a.allowWhitespace();if(a.matchString("]"))return{v:b};for(var f;f=a.read();){b.push(f.v);a.allowWhitespace();if(a.matchString("]"))return{v:b};if(!a.matchString(","))break;a.allowWhitespace()}return null}]}),Yh=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(.*\)\s*$/,Yc;Yc=Ua.extend({converters:[function(a){return ia(a)}],spreadArgs:!0});var ai=/^[^\s"'>\/=]+/,gi=/^on/,ei=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,fi=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,
ci=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,di=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,bi={"intro-outro":{t:72,v:"t0"},intro:{t:72,v:"t1"},outro:{t:72,v:"t2"},lazy:{t:73,v:"l"},twoway:{t:73,v:"t"},decorator:{t:71}},Zh=/^[^\s"'=<>\/`]+/,hi={t:10,exclude:!0},ji=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,ii=/^as/i,lk=/^yield\s*/,oi=/^\s*else\s*/,ni=/^\s*elseif\s+/,Ue={each:52,"if":50,"with":54,unless:51},li=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,mi=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,
ki=new RegExp("^("+Object.keys(Ue).join("|")+")\\b"),kb=/^[ \t\f\r\n]*\r?\n/,jb=/\r?\n[ \t\f\r\n]*$/,ti=/[ \t\f\r\n]+/g,qi=/^(?:pre|script|style|textarea)$/i,We=/^[ \t\f\r\n]+/,Xe=/[ \t\f\r\n]+$/,ri=/^(?:\r\n|\r|\n)/,si=/(?:\r\n|\r|\n)$/,vi=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,mk=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,nk=/^[\s\n\/>]/,ok={exclude:!0},Ye;Ye={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),
rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var pk=/^\x3c!--\s*/,qk=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,rk=/\s*--\x3e/,sk=/^\s*#\s*partial\s+/,tk=[function(a,b){if(!a.matchString(">"))return null;a.allowWhitespace();a.relaxedNames=a.strictRefinement=!0;var f=ia(a);a.relaxedNames=a.strictRefinement=!1;if(!f)return null;var c={t:8};Fa(f,c);
a.allowWhitespace();if(f=Re(a))c={t:19,z:f,f:[c]};else if(f=ia(a))c={t:4,n:53,f:[c]},Fa(f,c);a.allowWhitespace();a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'");return c},Qe,Te,function(a,b){if(!a.matchPattern(lk))return null;var f=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(b.close)||a.error("expected legal partial name");var c={t:16};f&&(c.n=f);return c},Se,function(a,b){var f;if(!a.matchString("!"))return null;f=a.remaining().indexOf(b.close);
if(-1!==f)return a.pos+=f+b.close.length,{t:9}}],Xf=[function(a,b){var f=ia(a),c;if(!f)return null;a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'");c={t:3};Fa(f,c);return c}],uk=[Qe,Te,Se],$e;lb.computedStrings=function(a){if(!a)return[];Object.keys(a).forEach(function(b){var f=a[b];"string"===typeof f&&(a[b]=Oc(f))})};var yb=[hb,function(a){var b,f,c;b=a.pos;if(a.textOnlyMode||!a.matchString("\x3c!--"))return null;f=a.remaining();c=f.indexOf("--\x3e");-1===c&&a.error("Illegal HTML - expected closing comment sequence ('--\x3e')");
f=f.substr(0,c);a.pos+=c+3;c={t:9,c:f};a.includeLinePositions&&(c.p=a.getLinePos(b));return c},function(a){var b,f,c,e,g,h,k,l;b=a.pos;if(a.inside||a.inAttribute||a.textOnlyMode||!a.matchString("<")||"/"===a.nextChar())return null;f={};a.includeLinePositions&&(f.p=a.getLinePos(b));if(a.matchString("!"))return f.t=18,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),f.a=a.matchPattern(/^(.+?)>/),f;f.t=7;f.e=a.matchPattern(mk);if(!f.e)return null;nk.test(a.nextChar())||a.error("Illegal tag name");
a.allowWhitespace();for(a.inTag=!0;b=hb(a);)!1!==b&&(f.m||(f.m=[]),f.m.push(b)),a.allowWhitespace();a.inTag=!1;a.allowWhitespace();a.matchString("/")&&(c=!0);if(!a.matchString(">"))return null;b=f.e.toLowerCase();var m=a.preserveWhitespace;if(!c&&!vd.test(f.e)){a.elementStack.push(b);if("script"===b||"style"===b||"textarea"===b)a.inside=b;c=[];e=ra(null);do l=a.pos,(h=a.remaining())||a.error("Missing end "+(1<a.elementStack.length?"tags":"tag")+" ("+a.elementStack.reverse().map(function(a){return"</"+
a+">"}).join("")+")"),wi(b,h)?(h=ui(a))?(k=!0,h=h.e.toLowerCase(),h!==b&&(a.pos=l,~a.elementStack.indexOf(h)||(l="Unexpected closing tag",vd.test(h)&&(l+=" (<"+h+"> is a void element - it cannot contain children)"),a.error(l)))):(h=$c(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(k=!0,a.pos=l):(h=a.read(Yf))?(e[h.n]&&(a.pos=l,a.error("Duplicate partial definition")),Ga(h.f,a.stripComments,m,!m,!m),e[h.n]=h.f,g=!0):(h=a.read(yb))?c.push(h):k=!0:k=!0;while(!k);c.length&&(f.f=c);
g&&(f.p=e);a.elementStack.pop()}a.inside=null;return a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(b)?ok:f},function(a){var b,f,c;f=a.remaining();a.textOnlyMode?(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),b=Xb(f,b)):(c=a.inside?"</"+a.inside:"<",a.inside&&!a.interpolate[a.inside]?b=f.indexOf(c):(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),!0===a.inAttribute?b.push('"',"'","=","<",">","`"):
a.inAttribute?b.push(a.inAttribute):b.push(c),b=Xb(f,b)));if(!b)return null;-1===b&&(b=f.length);a.pos+=b;return a.inside&&"textarea"!==a.inside||a.textOnlyMode?f.substr(0,b):Rc(f.substr(0,b))}],Yf=[function(a){var b=a.pos,f=a.standardDelimiters[0],c=a.standardDelimiters[1];if(!a.matchPattern(pk)||!a.matchString(f))return a.pos=b,null;var e=a.matchPattern(qk);Y("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+e+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+e+"}} --\x3e ... \x3c!-- {{/"+
e+"}} --\x3e'");if(!a.matchString(c)||!a.matchPattern(rk))return a.pos=b,null;var b=[],g,h=new RegExp("^\x3c!--\\s*"+Qc(f)+"\\s*\\/\\s*"+e+"\\s*"+Qc(c)+"\\s*--\x3e");do if(a.matchPattern(h))g=!0;else{var k=a.read(yb);k||a.error("expected closing comment ('\x3c!-- "+f+"/"+e+""+c+" --\x3e')");b.push(k)}while(!g);return{t:17,f:b,n:e}},function(a){var b,f,c,e;b=a.pos;var g=a.standardDelimiters;if(!a.matchString(g[0]))return null;if(!a.matchPattern(sk))return a.pos=b,null;(b=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/))||
a.error("expected legal partial name");a.allowWhitespace();a.matchString(g[1])||a.error("Expected closing delimiter '"+g[1]+"'");f=[];do $c(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]})?e=!0:((c=a.read(yb))||a.error("Expected "+g[0]+"/partial"+g[1]),f.push(c));while(!e);return{t:17,n:b,f:f}}];$e=Ua.extend({init:function(a,b){var f=b.tripleDelimiters||["{{{","}}}"],c=b.staticDelimiters||["[[","]]"],e=b.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=b.delimiters||["{{",
"}}"];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:tk},{isStatic:!1,isTriple:!0,open:f[0],close:f[1],readers:Xf},{isStatic:!0,isTriple:!1,open:c[0],close:c[1],readers:uk},{isStatic:!0,isTriple:!0,open:e[0],close:e[1],readers:Xf}];this.contextLines=b.contextLines||0;this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!b.interpolate||!1!==b.interpolate.script,style:!b.interpolate||!1!==b.interpolate.style,
textarea:!0};!0===b.sanitize&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0});this.stripComments=!1!==b.stripComments;this.preserveWhitespace=b.preserveWhitespace;this.sanitizeElements=b.sanitize&&b.sanitize.elements;this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes;this.includeLinePositions=b.includeLinePositions;this.textOnlyMode=b.textOnlyMode;this.csp=
b.csp},postProcess:function(a){if(!a.length)return{t:[],v:4};0<this.sectionDepth&&this.error("A section was left open");Ga(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);if(!1!==this.csp){var b={};Ze(a[0].t,b);Object.keys(b).length&&(a[0].e=b)}return a[0]},converters:[function(a){for(var b=[],f=ra(null),c=!1,e=a.preserveWhitespace;a.pos<a.str.length;){var g=a.pos,h,k;(k=a.read(Yf))?(f[k.n]&&(a.pos=g,a.error("Duplicated partial definition")),Ga(k.f,
a.stripComments,e,!e,!e),f[k.n]=k.f,c=!0):(h=a.read(yb))?b.push(h):a.error("Unexpected template content")}a={v:4,t:b};c&&(a.p=f);return a}],sortMustacheTags:function(){this.tags.sort(function(a,b){return b.open.length-a.open.length})}});var vk="delimiters tripleDelimiters staticDelimiters staticTripleDelimiters csp interpolate preserveWhitespace sanitize stripComments contextLines".split(" "),ye="Either preparse or use a ractive runtime source that includes the parser. ",xi="Either use:\n\n\tRactive.parse.computedStrings( component.computed )\n\nat build time to pre-convert the strings to functions, or use functions instead of strings in computed properties.",
qa={fromId:function(a,b){if(!N){if(b&&b.noThrow)return;throw Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.");}a&&(a=a.replace(/^#/,""));var f;if(!(f=N.getElementById(a))){if(b&&b.noThrow)return;throw Error("Could not find template element with id #"+a);}if("SCRIPT"!==f.tagName.toUpperCase()){if(b&&b.noThrow)return;throw Error("Template element with id #"+a+", must be a <script> element");}return"textContent"in f?f.textContent:f.innerHTML},isParsed:function(a){return"string"!==
typeof a},getParseOptions:function(a){a.defaults&&(a=a.defaults);return vk.reduce(function(b,f){b[f]=a[f];return b},{})},parse:function(a,b){Pc(lb,"template",ye);var f=lb(a,b);ze(f);return f},parseFor:function(a,b){return this.parse(a,this.getParseOptions(b))}},bd={name:"template",extend:function(a,b,f){"template"in f&&(a=f.template,b.template="function"===typeof a?a:ad(a,b))},init:function(a,b,f){a=(a="template"in f?f.template:a.prototype.template)||{v:4,t:[]};"function"===typeof a&&(f=a,a=bf(b,
f),b._config.template={fn:f,result:a});a=ad(a,b);b.template=a.t;a.p&&cf(b.partials,a.p)},reset:function(a){var b;if((b=a._config.template)&&b.fn){var f=bf(a,b.fn);b=f!==b.result?b.result=f:void 0}else b=void 0;if(b)return b=ad(b,a),a.template=b.t,cf(a.partials,b.p,!0),!0}},Hb=function(a,b){this.name=a;this.useDefaults=b};Hb.prototype.extend=function(a,b,f){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,f)};Hb.prototype.init=function(){};Hb.prototype.configure=function(a,
b,f){var c=this.name;f=f[c];a=ra(a[c]);for(var e in f)a[e]=f[e];b[c]=a};Hb.prototype.reset=function(a){var b=a[this.name],f=!1;Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],f=!0)});return f};var Ab="adaptors components computed decorators easing events interpolators partials transitions".split(" ").map(function(a){return new Hb(a,"computed"===a)}),mc={adapt:ff,css:gf,data:cc,template:bd},wd=Object.keys(If),Bi=hf(wd.filter(function(a){return!mc[a]})),Di=
hf(wd.concat(Ab.map(function(a){return a.name}))),Zf=[].concat(wd.filter(function(a){return!Ab[a]&&!mc[a]}),Ab,mc.template,mc.css),id={extend:function(a,b,f){return ef("extend",a,b,f)},init:function(a,b,f){return ef("init",a,b,f)},reset:function(a){return Zf.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:Zf},wk=["template","partials","components","decorators","events"],xk=new ca("complete"),yk=new ca("reset"),zk=new ca("render"),Ak=new ca("unrender"),X=function(a){this.parentFragment=
a.parentFragment;this.ractive=a.parentFragment.ractive;this.template=a.template;this.index=a.index;this.type=a.template.t;this.dirty=!1};X.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};X.prototype.destroyed=function(){this.fragment&&this.fragment.destroyed()};X.prototype.find=function(){return null};X.prototype.findAll=function(){};X.prototype.findComponent=function(){return null};X.prototype.findAllComponents=function(){};X.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)};
X.prototype.shuffled=function(){this.fragment&&this.fragment.shuffled()};X.prototype.valueOf=function(){return this.toString()};var $f=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function(a){a&&Oa(this);return(a=this.parent.get())?a[this.key]:void 0};b.prototype.handleChange=function(){this.dirty=!0;this.links.forEach(bb);this.deps.forEach(aa);this.children.forEach(aa);this.clearUnresolveds()};b.prototype.joinKey=
function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var d=new b(this,a);this.children.push(d);this.childByKey[a]=d}return this.childByKey[a]};return b}(Ta),jf=function(a){function b(f,c){var e=this;a.call(this,f.ractive.viewmodel,null);this.fragment=f;this.template=c;this.dirty=this.isReadonly=!0;this.fn=Wb(c.s,c.r.length);this.resolvers=[];this.models=this.template.r.map(function(a,b){var d=pa(e.fragment,a);d||Fi(e,a,b);return d});this.dependencies=[];this.shuffle=
void 0;this.bubble()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(a){void 0===a&&(a=!0);this.registered&&delete this.root.expressions[this.keypath];this.keypath=void 0;a&&(this.dirty=!0,this.handleChange())};b.prototype.get=function(a){a&&Oa(this);this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.wrapper&&(this.newWrapperValue=this.value),this.adapt());return a&&this.wrapper?this.wrapperValue:this.value};b.prototype.getKeypath=function(){var a=
this;if(!this.template)return"@undefined";this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(b,d){if(d>=a.models.length)return b;var c=a.models[d];return c?c.getKeypath():"@undefined"}),this.root.expressions[this.keypath]=this,this.registered=!0);return this.keypath};b.prototype.getValue=function(){var a=this;sb.push(tb=[]);var b;try{var d=this.models.map(function(a){return a?a.get(!0):void 0});b=this.fn.apply(this.fragment.ractive,d)}catch(c){P("Failed to compute "+this.getKeypath()+
": "+(c.message||c))}var e=Od();this.dependencies.filter(function(a){return!~e.indexOf(a)}).forEach(function(b){b.unregister(a);M(a.dependencies,b)});e.filter(function(b){return!~a.dependencies.indexOf(b)}).forEach(function(b){b.register(a);a.dependencies.push(b)});return b};b.prototype.handleChange=function(){this.dirty=!0;this.links.forEach(bb);this.deps.forEach(aa);this.children.forEach(aa);this.clearUnresolveds()};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=
new $f(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};b.prototype.mark=function(){this.handleChange()};b.prototype.rebinding=function(a,b,d){var c=this.models.indexOf(b);~c&&(a=Pa(this.template.r[c],a,b),a!==b&&(b.unregister(this),this.models.splice(c,1,a),a&&a.addShuffleRegister(this,"mark")));this.bubble(!d)};b.prototype.retrieve=function(){return this.get()};b.prototype.teardown=function(){var b=this;this.unbind();this.fragment=void 0;this.dependencies&&this.dependencies.forEach(function(a){return a.unregister(b)});
a.prototype.teardown.call(this)};b.prototype.unregister=function(b){a.prototype.unregister.call(this,b);this.deps.length||this.teardown()};b.prototype.unbind=function(){this.resolvers.forEach(Ea)};return b}(Ta),Bk=function(a){function b(f,c){a.call(this,f,c)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.applyValue=function(a){if(!p(a,this.value))for(var b=this.parent,d=[this.key];b;){if(b.base){b.model.joinAll(d).applyValue(a);break}d.unshift(b.key);b=b.parent}};
b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var d=new b(this,a);this.children.push(d);this.childByKey[a]=d}return this.childByKey[a]};b.prototype.retrieve=function(){var a=this.parent.get();return a&&this.key in a?a[this.key]:void 0};return b}(Ta),Gi=function(a){function b(f,c){var e=this;a.call(this,null,null);this.dirty=!0;this.root=f.ractive.viewmodel;this.template=c;this.resolvers=[];this.base=bc(f,c);var q;this.base||(q=f.resolve(c.r,
function(a){e.base=a;e.bubble();M(e.resolvers,q)}),this.resolvers.push(q));var g=this.intermediary={handleChange:function(){return e.handleChange()},rebinding:function(a,b){if(b===e.base)a=Pa(c,a,b),a!==e.base&&(e.base.unregister(g),e.base=a);else{var d=e.members.indexOf(b);~d&&(a=Pa(c.m[d].n,a,b),a!==e.members[d]&&e.members.splice(d,1,a))}a!==b&&b.unregister(g);a&&a.addShuffleTask(function(){return a.register(g)});e.bubble()}};this.members=c.m.map(function(a,b){if("string"===typeof a)return{get:function(){return a}};
var d,c;if(30===a.t)return(d=pa(f,a.n))?d.register(g):(c=f.resolve(a.n,function(a){e.members[b]=a;a.register(g);e.handleChange();M(e.resolvers,c)}),e.resolvers.push(c)),d;d=new jf(f,a);d.register(g);return d});this.isUnresolved=!0;this.bubble()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){this.base&&(this.dirty||this.handleChange())};b.prototype.forceResolution=function(){this.resolvers.forEach(function(a){return a.forceResolution()});this.dirty=
!0;this.bubble()};b.prototype.get=function(a){if(this.dirty){this.bubble();for(var b=this.members.length,d=!0;d&&b--;)this.members[b]||(d=!1);this.base&&d&&(b=this.members.map(function(a){return xa(String(a.get()))}),b=this.base.joinAll(b),b!==this.model&&(this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.model=b,this.parent=b.parent,this.model.register(this),this.model.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange()));this.value=
this.model?this.model.get(a):void 0;this.dirty=!1;this.mark();return this.value}return this.model?this.model.get(a):void 0};b.prototype.getValue=function(){this.value=this.model?this.model.get():void 0;for(var a=this.bindings.length;a--;){var b=this.bindings[a].getValue();if(b!==this.value)return b}return(a=Zd(this.deps))?a.value:this.value};b.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"};b.prototype.handleChange=function(){this.dirty=!0;this.mark()};b.prototype.joinKey=
function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=new Bk(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};b.prototype.mark=function(){this.dirty&&this.deps.forEach(aa);this.links.forEach(bb);this.children.forEach(Pb);this.clearUnresolveds()};b.prototype.retrieve=function(){return this.value};b.prototype.rebinding=function(){};b.prototype.set=function(a){if(!this.model)throw Error("Unresolved reference expression. This should not happen!");
this.model.set(a)};b.prototype.unbind=function(){this.resolvers.forEach(Ea);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this))};return b}(Ta),Ck=function(a){function c(b){a.call(this,b);this.fragment=null}c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;c.prototype.bind=function(){kf(this);this.fragment=(new K({owner:this,template:this.template.f})).bind()};c.prototype.detach=function(){return this.fragment?this.fragment.detach():b()};c.prototype.find=
function(a){if(this.fragment)return this.fragment.find(a)};c.prototype.findAll=function(a,b){this.fragment&&this.fragment.findAll(a,b)};c.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};c.prototype.findAllComponents=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};c.prototype.firstNode=function(a){return this.fragment&&this.fragment.firstNode(a)};c.prototype.rebinding=function(){var a=this;this.locked||(this.locked=!0,I.scheduleTask(function(){a.locked=
!1;kf(a)}))};c.prototype.render=function(a){this.rendered=!0;this.fragment&&this.fragment.render(a)};c.prototype.toString=function(a){return this.fragment?this.fragment.toString(a):""};c.prototype.unbind=function(){this.aliases={};this.fragment&&this.fragment.unbind()};c.prototype.unrender=function(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};c.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment.update())};return c}(X),Li=/\s+/,Ji=/\/\*(?:[\s\S]*?)\*\//g,
Ii=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\1).)*\2/gi,Ki=/\0(\d+)/g,Si=[void 0,"text","search","url","email","hidden","password","search","reset","submit"],Dk={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",
pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Df=function(a){function b(f){a.call(this,f);this.name=f.template.n;this.namespace=null;this.owner=f.owner||f.parentFragment.owner||f.element||ja(f.parentFragment);this.element=f.element||(this.owner.attributeByName?this.owner:ja(f.parentFragment));this.parentFragment=f.parentFragment;this.ractive=this.parentFragment.ractive;this.rendered=!1;this.fragment=this.updateDelegate=null;this.element.attributeByName[this.name]=
this;n(f.template.f)?this.fragment=new K({owner:this,template:f.template.f}):(this.value=f.template.f,0===this.value&&(this.value=""));if(this.interpolator=this.fragment&&1===this.fragment.items.length&&2===this.fragment.items[0].type&&this.fragment.items[0])this.interpolator.owner=this}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind()};b.prototype.bubble=function(){this.dirty||(this.parentFragment.bubble(),this.element.bubble(),
this.dirty=!0)};b.prototype.destroyed=function(){this.updateDelegate(!0)};b.prototype.getString=function(){return this.fragment?this.fragment.toString():null!=this.value?""+this.value:""};b.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():ud.test(this.name)?!0:this.value};b.prototype.render=function(){var a=this.element.node;this.node=a;if(!a.namespaceURI||a.namespaceURI===Mf.html){this.propertyName=Dk[this.name]||this.name;void 0!==a[this.propertyName]&&(this.useProperty=
!0);if(ud.test(this.name)||this.isTwoway)this.isBoolean=!0;"value"===this.propertyName&&(a._ractive.value=this.value)}if(a.namespaceURI){var b=this.name.indexOf(":");if(-1!==b){a:{for(var b=this.name.slice(0,b),d="xmlns:"+b;a;){if(a.hasAttribute&&a.hasAttribute(d)){a=a.getAttribute(d);break a}a=a.parentNode}a=Mf[b]}this.namespace=a}else this.namespace=a.namespaceURI}this.rendered=!0;this.updateDelegate=Mi(this);this.updateDelegate()};b.prototype.toString=function(){var a=this.getValue();if("value"!==
this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.styleName&&!this.inlineClass){if(this.rendered||this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-"))return ud.test(this.name)?
a?this.name:"":null==a?"":(a=g(this.getString()))?""+this.name+'="'+a+'"':this.name;this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.styleName=h(this.name.substr(6))}}};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(){this.updateDelegate(!0);this.rendered=!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked&&this.interpolator.twowayBinding.lastVal(!0,
this.interpolator.model.get()))};return b}(X),Ek=function(a){function b(f){a.call(this,f);this.owner=f.owner||f.parentFragment.owner||ja(f.parentFragment);this.element=this.owner.attributeByName?this.owner:ja(f.parentFragment);this.flag="l"===f.template.v?"lazy":"twoway";7===this.element.type&&(n(f.template.f)&&(this.fragment=new K({owner:this,template:f.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&2===this.fragment.items[0].type&&this.fragment.items[0])}b.prototype=
Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind();dd(this,this.getValue(),!0)};b.prototype.bubble=function(){this.dirty||(this.element.bubble(),this.dirty=!0)};b.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:"f"in this.template?this.template.f:!0};b.prototype.render=function(){dd(this,this.getValue(),!0)};b.prototype.toString=function(){return""};b.prototype.unbind=function(){this.fragment&&
this.fragment.unbind();delete this.element[this.flag]};b.prototype.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()};b.prototype.update=function(){this.dirty&&(this.fragment&&this.fragment.update(),dd(this,this.getValue(),!0))};return b}(X),mf=N?za("div"):null,Sa=!1,ag=function(a){function b(f){a.call(this,f);this.attributes=[];this.owner=f.owner;this.fragment=new K({ractive:this.ractive,owner:this,template:this.template});this.fragment.findNextNode=w;this.dirty=!1}
b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment.bind()};b.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())};b.prototype.render=function(){if(this.node=this.owner.node)this.isSvg="http://www.w3.org/2000/svg"===this.node.namespaceURI;Sa=!0;this.rendered||this.fragment.render();Sa=!1;this.dirty=this.rendered=!0;this.update()};b.prototype.toString=function(){return this.fragment.toString()};b.prototype.unbind=function(){this.fragment.unbind()};
b.prototype.unrender=function(){this.rendered=!1;this.fragment.unrender()};b.prototype.update=function(){var a=this,b,d;this.dirty&&(this.dirty=!1,Sa=!0,this.fragment.update(),Sa=!1,this.rendered&&this.node&&(b=this.fragment.toString(),d=dj(b,this.isSvg),this.attributes.filter(function(a){a:{for(var b=d.length;b--;)if(d[b].name===a.name){a=!1;break a}a=!0}return a}).forEach(function(b){a.node.removeAttribute(b.name)}),d.forEach(function(b){a.node.setAttribute(b.name,b.value)}),this.attributes=d))};
return b}(X),Ib="pop push reverse shift sort splice unshift".split(" "),xd=[];Ib.forEach(function(a){Ha(xd,a,{value:function(){for(var b=[],f=arguments.length;f--;)b[f]=arguments[f];b=ge(this.length,a,b);this._ractive.wrappers.forEach(function(a){a.magic&&(a.magic.locked=!0)});f=Array.prototype[a].apply(this,arguments);I.start();this._ractive.setting=!0;for(var c=this._ractive.wrappers.length;c--;)ej(this._ractive.wrappers[c],this,a,b);I.end();this._ractive.setting=!1;this._ractive.wrappers.forEach(function(a){a.magic&&
(a.magic.locked=!1)});return f},configurable:!0})});var nc,yd;({}).__proto__?(nc=function(a){return a.__proto__=xd},yd=function(a){return a.__proto__=Array.prototype}):(nc=function(a){for(var b=Ib.length;b--;){var f=Ib[b];Ha(a,f,{value:xd[f],configurable:!0})}},yd=function(a){for(var b=Ib.length;b--;)delete a[Ib[b]]});nc.unpatch=yd;var bg=nc,gd={filter:function(a){return n(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,f){return new oc(a,b,f)}},oc=function(a,b){this.root=a;this.value=b;
this.__model=null;b._ractive||(Ha(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),bg(b));b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a));b._ractive.instances[a._guid]+=1;b._ractive.wrappers.push(this)};oc.prototype.get=function(){return this.value};oc.prototype.reset=function(a){return this.value===a};oc.prototype.teardown=function(){var a,b,f,c;a=this.value;b=a._ractive;f=b.wrappers;c=b.instances;if(b.setting)return!1;b=f.indexOf(this);
if(-1===b)throw Error("Something went wrong in a rather interesting way");f.splice(b,1);if(f.length){if(--c[this.root._guid],!c[this.root._guid]){b=c.indexOf(this.root);if(-1===b)throw Error("Something went wrong in a rather interesting way");c.splice(b,1)}}else delete a._ractive,bg.unpatch(this.value)};var zd;try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),zd={filter:function(a){return a&&"object"===typeof a},wrap:function(a,b,f){return new Jb(a,b,f)}}}catch(d){zd=!1}var fd=
zd,Jb=function(a,b,f){var c=this;this.ractive=a;this.value=b;this.keypath=f;this.originalDescriptors={};Object.keys(b).forEach(function(b){var e=Object.getOwnPropertyDescriptor(c.value,b);c.originalDescriptors[b]=e;var g=f?""+f+"."+xa(b):xa(b),e=fj(e,a,g,c);Object.defineProperty(c.value,b,e)})};Jb.prototype.get=function(){return this.value};Jb.prototype.reset=function(a){return this.value===a};Jb.prototype.set=function(a,b){this.value[a]=b};Jb.prototype.teardown=function(){var a=this;Object.keys(this.value).forEach(function(b){var f=
Object.getOwnPropertyDescriptor(a.value,b);if(f.set&&f.set.__magic){a:if(f.set&&f.set.__magic)for(var c=f.set.__magic,e=c.length;e--;){var g=c[e];if(void 0===g.ractive&&void 0===g.keypath){c.splice(e,1);break a}}1===f.set.__magic.dependants.length&&Object.defineProperty(a.value,b,f.set.__magic.originalDescriptor)}})};var pc=function(a,b,f){this.value=b;this.magic=!0;this.magicWrapper=fd.wrap(a,b,f);this.arrayWrapper=gd.wrap(a,b,f);this.arrayWrapper.magic=this.magicWrapper;Object.defineProperty(this,
"__model",{get:function(){return this.arrayWrapper.__model},set:function(a){this.arrayWrapper.__model=a}})};pc.prototype.get=function(){return this.value};pc.prototype.teardown=function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()};pc.prototype.reset=function(a){return this.arrayWrapper.reset(a)&&this.magicWrapper.reset(a)};var pj={filter:function(a,b,f){return fd.filter(a,b,f)&&gd.filter(a)},wrap:function(a,b,f){return new pc(a,b,f)}},cg=function(a){function b(f,c,e){a.call(this,null,
null);this.root=this.parent=f;this.signature=c;this.isExpression=(this.key=e)&&"@"===e[0];this.isReadonly=!this.signature.setter;this.context=f.computationContext;this.dependencies=[];this.children=[];this.childByKey={};this.deps=[];this.dirty=!0;this.shuffle=void 0}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function(a){a&&Oa(this);this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.wrapper&&(this.newWrapperValue=this.value),this.adapt());return a&&
this.wrapper?this.wrapperValue:this.value};b.prototype.getValue=function(){sb.push(tb=[]);var a;try{a=this.signature.getter.call(this.context)}catch(b){if(P("Failed to compute "+this.getKeypath()+": "+(b.message||b)),Kf){console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var d=gj(this.signature.getterString),c;if(this.signature.getterUseStack){a:if(c=b.stack){c=c.split("\n");for(var e=cg.name+".getValue",g=
[],q=c.length,h=1;h<q;h+=1){var k=c[h];if(~k.indexOf(e)){c=g.join("\n");break a}else g.push(k)}c=void 0}else c="";c="\n\n"+c}else c="";console.error(""+b.name+": "+b.message+"\n\n"+d+""+c);console.groupCollapsed&&console.groupEnd()}}d=Od();this.setDependencies(d);"value"in this&&a!==this.value&&this.registerChange(this.getKeypath(),a);return a};b.prototype.handleChange=function(){this.dirty=!0;this.links.forEach(bb);this.deps.forEach(aa);this.children.forEach(aa);this.clearUnresolveds()};b.prototype.joinKey=
function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=new $f(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};b.prototype.mark=function(){this.handleChange()};b.prototype.rebinding=function(a,b){a!==b&&this.handleChange()};b.prototype.set=function(a){if(!this.signature.setter)throw Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(a);this.mark()};b.prototype.setDependencies=function(a){for(var b=this.dependencies.length;b--;){var d=
this.dependencies[b];~a.indexOf(d)||d.unregister(this)}for(b=a.length;b--;)d=a[b],~this.dependencies.indexOf(d)||d.register(this);this.dependencies=a};b.prototype.teardown=function(){for(var b=this.dependencies.length;b--;)this.dependencies[b]&&this.dependencies[b].unregister(this);this.root.computations[this.key]===this&&delete this.root.computations[this.key];a.prototype.teardown.call(this)};b.prototype.unregister=function(b){a.prototype.unregister.call(this,b);this.isExpression&&0===this.deps.length&&
this.teardown()};return b}(Ta),Fk=function(a){function b(f){a.call(this,null,"");this.value=f;this.isRoot=!0;this.root=this;this.adaptors=[];this.ractive=f;this.changes={}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getKeypath=function(){return"@this"};return b}(Ta),dg=Object.prototype.hasOwnProperty,mj=function(a){function b(f){a.call(this,null,null);this.changes={};this.isRoot=!0;this.root=this;this.ractive=f.ractive;this.value=f.data;this.adaptors=f.adapt;this.adapt();
this.computationContext=f.ractive;this.computations={};this.expressions={}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.applyChanges=function(){this._changeHash={};this.flush();return this._changeHash};b.prototype.compute=function(a,b){var d=new cg(this,b,a);return this.computations[a]=d};b.prototype.createLink=function(a,b,d){a=x(a);for(var c=this;a.length;)c=a.shift(),c=this.childByKey[c]||this.joinKey(c);return c.link(b,d)};b.prototype.get=function(a,b){a&&Oa(this);
if(b&&!1===b.virtual)return this.value;for(var d=this.getVirtual(),c=Object.keys(this.computations),e=c.length;e--;){var g=this.computations[c[e]];g.isExpression||(d[c[e]]=g.get())}return d};b.prototype.getKeypath=function(){return""};b.prototype.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new Fk(this.ractive))};b.prototype.getValueChildren=function(){var b=a.prototype.getValueChildren.call(this,this.value);this.children.forEach(function(a){if(a._link){var d=b.indexOf(a);
~d?b.splice(d,1,a._link):b.push(a._link)}});for(var c in this.computations)b.push(this.computations[c]);return b};b.prototype.handleChange=function(){this.deps.forEach(aa)};b.prototype.has=function(a){var b=this.value;a=va(a);if(dg.call(b,a)||a in this.computations||this.childByKey[a]&&this.childByKey[a]._link||a in this.expressions)return!0;for(b=b.constructor;b!==Function&&b!==Array&&b!==Object;){if(dg.call(b.prototype,a))return!0;b=b.constructor}return!1};b.prototype.joinKey=function(b,c){return"@global"===
b?ee:"@this"===b?this.getRactiveModel():this.expressions.hasOwnProperty(b)?(P("Accessing expression keypaths ("+b.substr(1)+") from the instance is deprecated. You can used a getNodeInfo or event object to access keypaths with expression context."),this.expressions[b]):this.computations.hasOwnProperty(b)?this.computations[b]:a.prototype.joinKey.call(this,b,c)};b.prototype.map=function(a,b){this.joinKey(a).link(b)};b.prototype.rebinding=function(){};b.prototype.set=function(a){var b=this.wrapper;b?
b.reset&&!1!==b.reset(a)||(b.teardown(),this.wrapper=null,this.value=a,this.adapt()):(this.value=a,this.adapt());this.deps.forEach(aa);this.children.forEach(Pb);this.clearUnresolveds()};b.prototype.retrieve=function(){return this.wrapper?this.wrapper.get():this.value};b.prototype.update=function(){};return b}(Ta),kj=new ca("construct"),lj="adaptors components decorators easing events interpolators partials transitions".split(" "),qj=0,Ad=function(a){this.hook=new ca(a);this.inProcess={};this.queue=
{}};Ad.prototype.begin=function(a){this.inProcess[a._guid]=!0};Ad.prototype.end=function(a){var b=a.parent;b&&this.inProcess[b._guid]?nf(this.queue,b).push(a):of(this,a);delete this.inProcess[a._guid]};var rj=new ca("config"),pf=new Ad("init"),Bd=function(a,b){-1!==a.indexOf("*")&&J('Only component proxy-events may contain "*" wildcards, <'+b.name+" on-"+a+'="..."/> is not valid');this.name=a;this.owner=b;this.handler=this.node=null};Bd.prototype.listen=function(a){var b=this.node=this.owner.node,
c=this.name;"on"+c in b||ma(ab(c,"events"));b.addEventListener(c,this.handler=function(c){a.fire({node:b,original:c})},!1)};Bd.prototype.unlisten=function(){this.node.removeEventListener(this.name,this.handler,!1)};var Cd=function(a,b){this.eventPlugin=a;this.owner=b;this.handler=null};Cd.prototype.listen=function(a){var b=this.owner.node;this.handler=this.eventPlugin(b,function(c){void 0===c&&(c={});c.node=c.node||b;a.fire(c)})};Cd.prototype.unlisten=function(){this.handler.teardown()};var qc=function(a,
b){this.ractive=a;this.name=b;this.handler=null};qc.prototype.listen=function(a){var b=this.ractive;this.handler=b.on(this.name,function(){var c;arguments.length&&arguments[0]&&arguments[0].node&&(c=Array.prototype.shift.call(arguments),c.component=b);var e=Array.prototype.slice.call(arguments);a.fire(c,e);return!1})};qc.prototype.unlisten=function(){this.handler.cancel()};var Gk=/^(event|arguments)(\..+)?$/,Hk=/^\$(\d+)(\..+)?$/,ta=function(a){var b=this;this.owner=a.owner||a.parentFragment.owner||
ja(a.parentFragment);this.element=this.owner.attributeByName?this.owner:ja(a.parentFragment);this.template=a.template;this.parentFragment=a.parentFragment;this.ractive=a.parentFragment.ractive;this.events=[];15===this.element.type?this.template.n.split("-").forEach(function(a){b.events.push(new qc(b.element.instance,a))}):this.template.n.split("-").forEach(function(a){var d=pb("events",b.ractive,a);b.events.push(d?new Cd(d,b.element):new Bd(a,b.element))});this.args=this.action=this.models=this.resolvers=
this.context=null};ta.prototype.bind=function(){var a=this;this.context=this.parentFragment.findContext();var b=this.template.f;b.x?(this.fn=Wb(b.x.s,b.x.r.length),this.resolvers=[],this.models=b.x.r.map(function(b,c){var e=Gk.exec(b);if(e)return{special:e[1],keys:e[2]?x(e[2].substr(1)):[]};if(e=Hk.exec(b))return{special:"arguments",keys:[e[1]-1].concat(e[2]?x(e[2].substr(1)):[])};var g;(e=pa(a.parentFragment,b))?e.register(a):(g=a.parentFragment.resolve(b,function(b){a.models[c]=b;M(a.resolvers,
g);b.register(a)}),a.resolvers.push(g));return e})):(this.action="string"===typeof b?b:"string"===typeof b.n?b.n:new K({owner:this,template:b.n}),this.args=b.a?"string"===typeof b.a?[b.a]:b.a:b.d?new K({owner:this,template:b.d}):[]);this.action&&"string"!==typeof this.action&&this.action.bind();this.args&&b.d&&this.args.bind()};ta.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())};ta.prototype.destroyed=function(){this.events.forEach(function(a){return a.unlisten()})};ta.prototype.fire=
function(a,b){void 0===b&&(b=[]);a&&!a.hasOwnProperty("_element")&&le(a,this.owner);if(this.fn){var c=[];a&&b.unshift(a);this.models&&this.models.forEach(function(e){if(!e)return c.push(void 0);if(e.special){var g="event"===e.special?a:b;for(e=e.keys.slice();e.length;)g=g[e.shift()];return c.push(g)}if(e.wrapper)return c.push(e.wrapperValue);c.push(e.get())});var e=this.ractive,g=e.event;e.event=a;if(!1===this.fn.apply(e,c).pop()){var h=a?a.original:void 0;h?(h.preventDefault&&h.preventDefault(),
h.stopPropagation&&h.stopPropagation()):Y("handler '"+this.template.n+"' returned false, but there is no event available to cancel")}e.event=g}else e=this.action.toString(),g=this.template.f.d?this.args.getArgsList():this.args,b.length&&(g=g.concat(b)),a&&(a.name=e),Jd(this.ractive,e,{event:a,args:g})};ta.prototype.handleChange=function(){};ta.prototype.rebinding=function(a,b){var c=this;if(this.models){var e=this.models.indexOf(b);~e&&(this.models.splice(e,1,a),b.unregister(this),a&&a.addShuffleTask(function(){return a.register(c)}))}};
ta.prototype.render=function(){var a=this;I.scheduleTask(function(){return a.events.forEach(function(b){return b.listen(a)},!0)})};ta.prototype.toString=function(){return""};ta.prototype.unbind=function(){var a=this;this.template.f.m?(this.resolvers&&this.resolvers.forEach(Ea),this.resolvers=[],this.models&&this.models.forEach(function(b){b.unregister&&b.unregister(a)}),this.models=null):(this.action&&this.action.unbind&&this.action.unbind(),this.args&&this.args.unbind&&this.args.unbind())};ta.prototype.unrender=
function(){this.events.forEach(function(a){return a.unlisten()})};ta.prototype.update=function(){!this.method&&this.dirty&&(this.dirty=!1,this.action&&this.action.update&&this.action.update(),this.args&&this.args.update&&this.args.update())};var Ik=new ca("teardown"),Pj=function(a){function b(c,e){var g=this;a.call(this,c);this.type=15;var q=ra(e.prototype);this.instance=q;this.name=c.template.e;this.parentFragment=c.parentFragment;this.liveQueries=[];q.el&&P("The <"+this.name+"> component has a default 'el' property; it has been disregarded");
var h=c.template.p||{};"content"in h||(h.content=c.template.f||[]);this._partials=h;this.yielders={};for(var k=c.parentFragment,l;k;){if(16===k.owner.type){l=k.owner.container;break}k=k.parent}q.parent=this.parentFragment.ractive;q.container=l||null;q.root=q.parent.root;q.component=this;ed(this.instance,{partials:h});q._inlinePartials=h;this.attributeByName={};this.attributes=[];var m=[];(this.template.m||[]).forEach(function(a){switch(a.t){case 13:case 70:case 72:g.attributes.push(hc({owner:g,parentFragment:g.parentFragment,
template:a}));break;case 73:case 71:break;default:m.push(a)}});this.attributes.push(new ag({owner:this,parentFragment:this.parentFragment,template:m}));this.eventHandlers=[];this.template.v&&this.setupEvents()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.attributes.forEach(Ob);hd(this.instance,{partials:this._partials},{cssIds:this.parentFragment.cssIds});this.eventHandlers.forEach(Ob);this.bound=!0};b.prototype.bubble=function(){this.dirty||
(this.dirty=!0,this.parentFragment.bubble())};b.prototype.checkYielders=function(){var a=this;Object.keys(this.yielders).forEach(function(b){if(1<a.yielders[b].length)throw I.end(),Error("A component template can only have one {{yield"+(b?" "+b:"")+"}} declaration at a time");})};b.prototype.destroyed=function(){this.instance.fragment&&this.instance.fragment.destroyed()};b.prototype.detach=function(){return this.instance.fragment.detach()};b.prototype.find=function(a){return this.instance.fragment.find(a)};
b.prototype.findAll=function(a,b){this.instance.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(!a||this.name===a)return this.instance;if(this.instance.fragment)return this.instance.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){b.test(this)&&(b.add(this.instance),b.live&&this.liveQueries.push(b));this.instance.fragment.findAllComponents(a,b)};b.prototype.firstNode=function(a){return this.instance.fragment.firstNode(a)};b.prototype.render=function(a,b){se(this.instance,
a,null,b);this.checkYielders();this.attributes.forEach(Fc);this.eventHandlers.forEach(Fc);var d=this.ractive;do for(var c=d._liveComponentQueries,e=c.length;e--;){var g=c["_"+c[e]];g.test(this)&&(g.add(this.instance),this.liveQueries.push(g))}while(d=d.parent);this.rendered=!0};b.prototype.setupEvents=function(){var a=this,b=this.eventHandlers;Object.keys(this.template.v).forEach(function(d){var c=d.split("-"),e=a.template.v[d];c.forEach(function(d){d=new qc(a.instance,d);b.push(new ta(a,d,e))})})};
b.prototype.shuffled=function(){this.liveQueries.forEach(sj);a.prototype.shuffled.call(this)};b.prototype.toString=function(){return this.instance.toHTML()};b.prototype.unbind=function(){this.bound=!1;this.attributes.forEach(Ea);var a=this.instance;a.viewmodel.teardown();a.fragment.unbind();a._observers.forEach(Pd);for(var b=this.ractive;b;){var d=b._liveComponentQueries["_"+this.name];d&&d.remove(this);b=b.parent}a.fragment.rendered&&a.el.__ractive_instances__&&M(a.el.__ractive_instances__,a);Ik.fire(a)};
b.prototype.unrender=function(a){var b=this;this.rendered=!1;this.shouldDestroy=a;this.instance.unrender();this.attributes.forEach(ub);this.eventHandlers.forEach(ub);this.liveQueries.forEach(function(a){return a.remove(b.instance)})};b.prototype.update=function(){this.dirty=!1;this.instance.fragment.update();this.checkYielders();this.attributes.forEach(cb);this.eventHandlers.forEach(cb)};return b}(X),Jk={update:w,teardown:w},Aa=function(a){this.owner=a.owner||a.parentFragment.owner||ja(a.parentFragment);
this.element=this.owner.attributeByName?this.owner:ja(a.parentFragment);this.parentFragment=this.owner.parentFragment;this.ractive=this.owner.ractive;a=this.template=a.template;this.dynamicName="object"===typeof a.f.n;this.dynamicArgs=!!a.f.d;this.dynamicName?this.nameFragment=new K({owner:this,template:a.f.n}):this.name=a.f.n||a.f;this.dynamicArgs?this.argsFragment=new K({owner:this,template:a.f.d}):this.args=a.f.a&&a.f.a.s?[]:a.f.a||[];this.intermediary=this.node=null;this.element.decorators.push(this)};
Aa.prototype.bind=function(){var a=this;this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString());this.dynamicArgs&&this.argsFragment.bind();this.template.f.a&&this.template.f.a.s&&(this.resolvers=[],this.models=this.template.f.a.r.map(function(b,c){var e,g=pa(a.parentFragment,b);g?g.register(a):(e=a.parentFragment.resolve(b,function(b){a.models[c]=b;M(a.resolvers,e);b.register(a)}),a.resolvers.push(e));return g}),this.argsFn=Wb(this.template.f.a.s,this.template.f.a.r.length))};
Aa.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())};Aa.prototype.destroyed=function(){this.intermediary&&this.intermediary.teardown();this.shouldDestroy=!0};Aa.prototype.handleChange=function(){this.bubble()};Aa.prototype.rebinding=function(a,b,c){var e=this.models.indexOf(b);~e&&(a=Pa(this.template.f.a.r[e],a,b),a!==b&&(b.unregister(this),this.models.splice(e,1,a),a&&a.addShuffleRegister(this,"mark"),c||this.bubble()))};Aa.prototype.render=function(){var a=this;I.scheduleTask(function(){var b=
pb("decorators",a.ractive,a.name);if(b){a.node=a.element.node;var c;a.argsFn?(c=a.models.map(function(a){return a?a.get():void 0}),c=a.argsFn.apply(a.ractive,c)):c=a.dynamicArgs?a.argsFragment.getArgsList():a.args;a.intermediary=b.apply(a.ractive,[a.node].concat(c));if(!a.intermediary||!a.intermediary.teardown)throw Error("The '"+a.name+"' decorator must return an object with a teardown method");a.shouldDestroy&&a.destroyed()}else ma(ab(a.name,"decorator")),a.intermediary=Jk},!0);this.rendered=!0};
Aa.prototype.toString=function(){return""};Aa.prototype.unbind=function(){var a=this;this.dynamicName&&this.nameFragment.unbind();this.dynamicArgs&&this.argsFragment.unbind();this.resolvers&&this.resolvers.forEach(Ea);this.models&&this.models.forEach(function(b){b&&b.unregister(a)})};Aa.prototype.unrender=function(a){a&&!this.element.rendered||!this.intermediary||this.intermediary.teardown();this.rendered=!1};Aa.prototype.update=function(){if(this.dirty){var a=this.dirty=!1;if(this.dynamicName&&this.nameFragment.dirty){var b=
this.nameFragment.toString(),a=b!==this.name;this.name=b}this.intermediary&&(a||!this.intermediary.update?(this.unrender(),this.render()):this.dynamicArgs?this.argsFragment.dirty&&(a=this.argsFragment.getArgsList(),this.intermediary.update.apply(this.ractive,a)):this.argsFn?(a=this.models.map(function(a){return a?a.get():void 0}),this.intermediary.update.apply(this.ractive,this.argsFn.apply(this.ractive,a))):this.intermediary.update.apply(this.ractive,this.args));this.dynamicName&&this.nameFragment.dirty&&
this.nameFragment.update();this.dynamicArgs&&this.argsFragment.dirty&&this.argsFragment.update()}};var eg=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){};b.prototype.render=function(){};b.prototype.teardown=function(){};b.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"};b.prototype.unbind=function(){};b.prototype.unrender=function(){};b.prototype.update=function(){};return b}(X),
ka=function(a,b){void 0===b&&(b="value");this.element=a;this.ractive=a.ractive;this.attribute=a.attributeByName[b];var c=this.attribute.interpolator;c.twowayBinding=this;var e=c.model;if(!e)c.resolver.forceResolution(),e=c.model,qf("'"+c.template.r+"' reference",this.ractive);else if(e.isUnresolved)e.forceResolution(),qf("expression",this.ractive);else if(e.isReadonly)return e=e.getKeypath().replace(/^@/,""),Y("Cannot use two-way binding on <"+a.name+"> element: "+e+" is read-only. To suppress this warning use <"+
a.name+" twoway='false'...>",{ractive:this.ractive}),!1;this.attribute.isTwoway=!0;this.model=e;c=e.get();this.wasUndefined=void 0===c;void 0===c&&this.getInitialValue&&(c=this.getInitialValue(),e.set(c));this.lastVal(!0,c);if(e=ja(this.element,!1,"form"))this.resetValue=c,e.formBindings.push(this)};ka.prototype.bind=function(){this.model.registerTwowayBinding(this)};ka.prototype.handleChange=function(){var a=this,b=this.getValue();this.lastVal()!==b&&(I.start(this.root),this.attribute.locked=!0,
this.model.set(b),this.lastVal(!0,b),this.model.get()!==b?this.attribute.locked=!1:I.scheduleTask(function(){return a.attribute.locked=!1}),I.end())};ka.prototype.lastVal=function(a,b){if(a)this.lastValue=b;else return this.lastValue};ka.prototype.rebinding=function(a,b){var c=this;this.model&&this.model===b&&b.unregisterTwowayBinding(this);a&&(this.model=a,I.scheduleTask(function(){return a.registerTwowayBinding(c)}))};ka.prototype.render=function(){this.node=this.element.node;this.node._ractive.binding=
this;this.rendered=!0};ka.prototype.setFromNode=function(a){this.model.set(a.value)};ka.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)};ka.prototype.unrender=function(){};var tf=function(a){function b(c){a.call(this,c,"checked")}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",Q,!1);this.node.attachEvent&&this.node.addEventListener("click",Q,!1)};b.prototype.unrender=
function(){this.node.removeEventListener("change",Q,!1);this.node.removeEventListener("click",Q,!1)};b.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")};b.prototype.getValue=function(){return this.node.checked};b.prototype.setFromNode=function(a){this.model.set(a.checked)};return b}(ka),Db=function(a,b,c){var e=this;this.model=b;this.hash=a;this.getValue=function(){e.value=c.call(e);return e.value};this.bindings=[]};Db.prototype.add=function(a){this.bindings.push(a)};
Db.prototype.bind=function(){this.value=this.model.get();this.model.registerTwowayBinding(this);this.bound=!0};Db.prototype.remove=function(a){M(this.bindings,a);this.bindings.length||this.unbind()};Db.prototype.unbind=function(){this.model.unregisterTwowayBinding(this);this.bound=!1;delete this.model[this.hash]};var Kk=[].push,Aj=function(a){function b(c){a.call(this,c,"name");this.checkboxName=!0;this.group=rf("checkboxes",this.model,uj);this.group.add(this);this.noInitialValue&&(this.group.noInitialValue=
!0);if(this.group.noInitialValue&&this.element.getAttribute("checked")){c=this.model.get();var e=this.element.getAttribute("value");W(c,e)||Kk.call(c,e)}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.group.bound||this.group.bind()};b.prototype.changed=function(){var a=!!this.isChecked;this.isChecked=this.node.checked;return this.isChecked===a};b.prototype.getInitialValue=function(){this.noInitialValue=!0;return[]};b.prototype.getValue=function(){return this.group.value};
b.prototype.handleChange=function(){this.isChecked=this.element.node.checked;this.group.value=this.model.get();var b=this.element.getAttribute("value");this.isChecked&&!W(this.group.value,b)?this.group.value.push(b):!this.isChecked&&W(this.group.value,b)&&M(this.group.value,b);this.lastValue=null;a.prototype.handleChange.call(this)};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node,c=this.model.get(),e=this.element.getAttribute("value");n(c)?this.isChecked=W(c,e):this.isChecked=
c==e;b.name="{{"+this.model.getKeypath()+"}}";b.checked=this.isChecked;b.addEventListener("change",Q,!1);b.attachEvent&&b.addEventListener("click",Q,!1)};b.prototype.setFromNode=function(a){this.group.bindings.forEach(function(a){return a.wasUndefined=!0});a.checked&&(a=this.group.getValue(),a.push(this.element.getAttribute("value")),this.group.model.set(a))};b.prototype.unbind=function(){this.group.remove(this)};b.prototype.unrender=function(){var a=this.element.node;a.removeEventListener("change",
Q,!1);a.removeEventListener("click",Q,!1)};return b}(ka),yj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""};b.prototype.getValue=function(){return this.element.node.innerHTML};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node;b.addEventListener("change",Q,!1);b.addEventListener("blur",Q,!1);this.ractive.lazy||
(b.addEventListener("input",Q,!1),b.attachEvent&&b.addEventListener("keyup",Q,!1))};b.prototype.setFromNode=function(a){this.model.set(a.innerHTML)};b.prototype.unrender=function(){var a=this.node;a.removeEventListener("blur",Q,!1);a.removeEventListener("change",Q,!1);a.removeEventListener("input",Q,!1);a.removeEventListener("keyup",Q,!1)};return b}(ka),ec=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=
function(){return""};b.prototype.getValue=function(){return this.node.value};b.prototype.render=function(){a.prototype.render.call(this);var b=this.ractive.lazy,c=!1;"lazy"in this.element&&(b=this.element.lazy);r(b)&&(c=+b,b=!1);this.handler=c?vj(c):Q;c=this.node;c.addEventListener("change",Q,!1);b||(c.addEventListener("input",this.handler,!1),c.attachEvent&&c.addEventListener("keyup",this.handler,!1));c.addEventListener("blur",sf,!1)};b.prototype.unrender=function(){var a=this.element.node;this.rendered=
!1;a.removeEventListener("change",Q,!1);a.removeEventListener("input",this.handler,!1);a.removeEventListener("keyup",this.handler,!1);a.removeEventListener("blur",sf,!1)};return b}(ka),Cj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){};b.prototype.getValue=function(){return this.node.files};b.prototype.render=function(){this.element.lazy=!1;a.prototype.render.call(this)};b.prototype.setFromNode=
function(a){this.model.set(a.files)};return b}(ec),Ej=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.forceUpdate=function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,I.scheduleTask(function(){return a.attribute.locked=!1}),this.model.set(b))};b.prototype.getInitialValue=function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})};
b.prototype.getValue=function(){for(var a=this.element.node.options,b=a.length,d=[],c=0;c<b;c+=1){var e=a[c];e.selected&&d.push(e._ractive?e._ractive.value:e.value)}return d};b.prototype.handleChange=function(){var b=this.attribute.getValue(),c=this.getValue(),e;if(e=void 0!==b)a:if(n(c)&&n(b)&&c.length===b.length){for(e=c.length;e--;)if(c[e]!==b[e]){e=!1;break a}e=!0}else e=!1;e||a.prototype.handleChange.call(this);return this};b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",
Q,!1);void 0===this.model.get()&&this.handleChange()};b.prototype.setFromNode=function(a){a=jd(a);for(var b=a.length,d=Array(b);b--;){var c=a[b];d[b]=c._ractive?c._ractive.value:c.value}this.model.set(d)};b.prototype.setValue=function(){throw Error("TODO not implemented yet");};b.prototype.unrender=function(){this.node.removeEventListener("change",Q,!1)};b.prototype.updateModel=function(){void 0!==this.attribute.value&&this.attribute.value.length||this.keypath.set(this.initialValue)};return b}(ka),
Dj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){};b.prototype.getValue=function(){var a=parseFloat(this.node.value);return isNaN(a)?void 0:a};b.prototype.setFromNode=function(a){a=parseFloat(a.value);isNaN(a)||this.model.set(a)};return b}(ec),fg={},Bj=function(a){function b(c){a.call(this,c,"checked");c=this.ractive._guid+this.element.getAttribute("name");this.siblings=fg[c]||(fg[c]=[]);
this.siblings.push(this)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getValue=function(){return this.node.checked};b.prototype.handleChange=function(){I.start(this.root);this.siblings.forEach(function(a){a.model.set(a.getValue())});I.end()};b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",Q,!1);this.node.attachEvent&&this.node.addEventListener("click",Q,!1)};b.prototype.setFromNode=function(a){this.model.set(a.checked)};
b.prototype.unbind=function(){M(this.siblings,this)};b.prototype.unrender=function(){this.node.removeEventListener("change",Q,!1);this.node.removeEventListener("click",Q,!1)};return b}(ka),zj=function(a){function b(c){a.call(this,c,"name");this.group=rf("radioname",this.model,wj);this.group.add(this);c.checked&&(this.group.value=this.getValue())}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this;this.group.bound||this.group.bind();this.nameAttributeBinding=
{handleChange:function(){return a.node.name="{{"+a.model.getKeypath()+"}}"}};this.model.getKeypathModel().register(this.nameAttributeBinding)};b.prototype.getInitialValue=function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")};b.prototype.getValue=function(){return this.element.getAttribute("value")};b.prototype.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),a.prototype.handleChange.call(this))};b.prototype.lastVal=function(a,b){if(this.group)if(a)this.group.lastValue=
b;else return this.group.lastValue};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node;b.name="{{"+this.model.getKeypath()+"}}";b.checked=this.model.get()==this.element.getAttribute("value");b.addEventListener("change",Q,!1);b.attachEvent&&b.addEventListener("click",Q,!1)};b.prototype.setFromNode=function(a){a.checked&&this.group.model.set(this.element.getAttribute("value"))};b.prototype.unbind=function(){this.group.remove(this);this.model.getKeypathModel().unregister(this.nameAttributeBinding)};
b.prototype.unrender=function(){var a=this.node;a.removeEventListener("change",Q,!1);a.removeEventListener("click",Q,!1)};return b}(ka),Fj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.forceUpdate=function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,I.scheduleTask(function(){return a.attribute.locked=!1}),this.model.set(b))};b.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var a=
this.element.options,b=a.length;if(b){for(var d,c,e=b;e--;){var g=a[e];if(g.getAttribute("selected")){g.getAttribute("disabled")||(d=g.getAttribute("value"));c=!0;break}}if(!c)for(;++e<b;)if(!a[e].getAttribute("disabled")){d=a[e].getAttribute("value");break}void 0!==d&&(this.element.attributeByName.value.value=d);return d}}};b.prototype.getValue=function(){var a=this.node.options,b=a.length,d;for(d=0;d<b;d+=1){var c=a[d];if(a[d].selected&&!a[d].disabled)return c._ractive?c._ractive.value:c.value}};
b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",Q,!1)};b.prototype.setFromNode=function(a){a=jd(a)[0];this.model.set(a._ractive?a._ractive.value:a.value)};b.prototype.setValue=function(a){this.model.set(a)};b.prototype.unrender=function(){this.node.removeEventListener("change",Q,!1)};return b}(ka),Lk=/;\s*$/,Fb=function(a){function b(c){var e=this;a.call(this,c);this.liveQueries=[];this.name=c.template.e.toLowerCase();this.isVoid=vd.test(this.name);
if((this.parent=ja(this.parentFragment,!1))&&"option"===this.parent.name)throw Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[];this.attributeByName={};this.attributes=[];var g=[];(this.template.m||[]).forEach(function(a){switch(a.t){case 13:case 73:case 71:case 70:case 72:e.attributes.push(hc({owner:e,parentFragment:e.parentFragment,template:a}));break;default:g.push(a)}});g.length&&this.attributes.push(new ag({owner:this,parentFragment:this.parentFragment,
template:g}));for(var h=this.attributes.length;h--;){var q=e.attributes[h];"type"===q.name?e.attributes.unshift(e.attributes.splice(h,1)[0]):"max"===q.name?e.attributes.unshift(e.attributes.splice(h,1)[0]):"min"===q.name?e.attributes.unshift(e.attributes.splice(h,1)[0]):"class"===q.name?e.attributes.unshift(e.attributes.splice(h,1)[0]):"value"===q.name&&e.attributes.push(e.attributes.splice(h,1)[0])}c.template.f&&!c.deferContent&&(this.fragment=new K({template:c.template.f,owner:this,cssIds:null}));
this.binding=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.attributes.binding=!0;this.attributes.forEach(Ob);this.attributes.binding=!1;this.fragment&&this.fragment.bind();this.binding||this.recreateTwowayBinding()};b.prototype.createTwowayBinding=function(){if("twoway"in this?!this.twoway:!this.ractive.twoway)return null;var a=xj(this);return a?(a=new a(this),a.model)?a:null:null};b.prototype.destroyed=function(){this.attributes.forEach(function(a){return a.destroyed()});
this.fragment&&this.fragment.destroyed()};b.prototype.detach=function(){this.rendered||this.destroyed();return e(this.node)};b.prototype.find=function(a){if(this.node&&Ka(this.node,a))return this.node;if(this.fragment)return this.fragment.find(a)};b.prototype.findAll=function(a,b){b.test(this.node)&&(b.add(this.node),b.live&&this.liveQueries.push(b));this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};b.prototype.findAllComponents=
function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.findNextNode=function(){return null};b.prototype.firstNode=function(){return this.node};b.prototype.getAttribute=function(a){return(a=this.attributeByName[a])?a.getValue():void 0};b.prototype.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender());if(this.binding=this.createTwowayBinding())this.binding.bind(),this.rendered&&this.binding.render()};b.prototype.render=function(a,b){this.namespace=
Jj(this);var d,c=!1;if(b)for(var g;g=b.shift();)if(g.nodeName.toUpperCase()===this.template.e.toUpperCase()&&g.namespaceURI===this.namespace){this.node=d=g;c=!0;break}else e(g);d||(this.node=d=za(this.template.e,this.namespace,this.getAttribute("is")));Ha(d,"_ractive",{value:{proxy:this}});this.parentFragment.cssIds&&d.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" "));c&&this.foundNode&&this.foundNode(d);this.fragment&&(g=c?ua(d.childNodes):void 0,
this.fragment.render(d,g),g&&g.forEach(e));if(c)for(this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(d),g=d.attributes.length;g--;){var h=d.attributes[g].name;h in this.attributeByName||d.removeAttribute(h)}this.attributes.forEach(Fc);this.binding&&this.binding.render();tj(this);this._introTransition&&this.ractive.transitionsEnabled&&(this._introTransition.isIntro=!0,I.registerTransition(this._introTransition));c||a.appendChild(d);this.rendered=!0};b.prototype.shuffled=function(){this.liveQueries.forEach(Gj);
a.prototype.shuffled.call(this)};b.prototype.toString=function(){var a=this.template.e,b=this.attributes.map(Ij).join("");"option"===this.name&&this.isSelected()&&(b+=" selected");"input"===this.name&&Hj(this)&&(b+=" checked");var d,c;this.attributes.forEach(function(a){"class"===a.name?c=(c||"")+(c?" ":"")+g(a.getString()):"style"===a.name?(d=(d||"")+(d?" ":"")+g(a.getString()))&&!Lk.test(d)&&(d+=";"):a.styleName?d=(d||"")+(d?" ":"")+""+k(a.styleName)+": "+g(a.getString())+";":a.inlineClass&&a.getValue()&&
(c=(c||"")+(c?" ":"")+a.inlineClass)});void 0!==d&&(b=" style"+(d?'="'+d+'"':"")+b);void 0!==c&&(b=" class"+(c?'="'+c+'"':"")+b);b="<"+a+""+b+">";if(this.isVoid)return b;"textarea"===this.name&&void 0!==this.getAttribute("value")?b+=Sc(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(b+=this.getAttribute("value")||"");this.fragment&&(b+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e)));return b+("</"+a+">")};b.prototype.unbind=function(){this.attributes.forEach(Ea);
this.binding&&this.binding.unbind();this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){if(this.rendered){this.rendered=!1;var b=this._introTransition;b&&b.complete&&b.complete();"option"===this.name?this.detach():a&&I.detachWhenReady(this);this.fragment&&this.fragment.unrender();this.binding&&this.binding.unrender();this._outroTransition&&this.ractive.transitionsEnabled&&(this._outroTransition.isIntro=!1,I.registerTransition(this._outroTransition));for(a=this.liveQueries.length;a--;)this.liveQueries[a].remove(this.node)}};
b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.attributes.forEach(cb),this.fragment&&this.fragment.update())};return b}(X),Mk=function(a){function b(c){a.call(this,c);this.formBindings=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.node.addEventListener("reset",uf,!1)};b.prototype.unrender=function(b){this.node.removeEventListener("reset",uf,!1);a.prototype.unrender.call(this,b)};return b}(Fb),
rc=function(a){function b(c){a.call(this,c);this.parentFragment=c.parentFragment;this.template=c.template;this.index=c.index;c.owner&&(this.parent=c.owner);this.isStatic=!!c.template.s;this.model=null;this.dirty=!1}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this,b=bc(this.parentFragment,this.template),d=b?b.get():void 0;this.isStatic?this.model={get:function(){return d}}:b?(b.register(this),this.model=b):this.resolver=this.parentFragment.resolve(this.template.r,
function(b){a.model=b;b.register(a);a.handleChange();a.resolver=null})};b.prototype.handleChange=function(){this.bubble()};b.prototype.rebinding=function(a,b,d){a=Pa(this.template,a,b);if(this["static"]||a===this.model)return!1;this.model&&this.model.unregister(this);a&&a.addShuffleRegister(this,"mark");this.model=a;d||this.handleChange();return!0};b.prototype.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0,this.resolver&&this.resolver.unbind())};return b}(X),
Nk=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){this.owner&&this.owner.bubble();a.prototype.bubble.call(this)};b.prototype.detach=function(){return e(this.node)};b.prototype.firstNode=function(){return this.node};b.prototype.getString=function(){return this.model?c(this.model.get()):""};b.prototype.render=function(a,b){if(!Sa){var d=this.getString();this.rendered=!0;if(b){var c=b[0];c&&3===c.nodeType?
(b.shift(),c.nodeValue!==d&&(c.nodeValue=d)):(c=this.node=N.createTextNode(d),b[0]?a.insertBefore(c,b[0]):a.appendChild(c));this.node=c}else this.node=N.createTextNode(d),a.appendChild(this.node)}};b.prototype.toString=function(a){var b=this.getString();return a?Sc(b):b};b.prototype.unrender=function(a){a&&this.detach();this.rendered=!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.rendered&&(this.node.data=this.getString()))};b.prototype.valueOf=function(){return this.model?this.model.get():
void 0};return b}(rc),gg=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.node.defaultValue=this.node.value};return b}(Fb),Rj=function(a){function b(c){a.call(this,c);this.name=c.template.n;this.owner=c.owner||c.parentFragment.owner||c.element||ja(c.parentFragment);this.element=c.element||(this.owner.attributeByName?this.owner:ja(c.parentFragment));this.parentFragment=
this.element.parentFragment;this.ractive=this.parentFragment.ractive;this.fragment=null;this.element.attributeByName[this.name]=this;this.value=c.template.f}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind();var a=this.template.f,b=this.element.instance.viewmodel;if(0===a)b.joinKey(this.name).set(!0);else if("string"===typeof a){var d=$b(a);b.joinKey(this.name).set(d?d.value:a)}else n(a)&&Lj(this,!0)};b.prototype.render=
function(){};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind();this.boundFragment&&this.boundFragment.unbind();this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()};b.prototype.unrender=function(){};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.boundFragment&&this.boundFragment.update(),this.rendered&&this.updateDelegate())};return b}(X),Ok=function(a){function b(c){var e=c.template;e.a||(e.a={});void 0!==
e.a.value||"disabled"in e.a||(e.a.value=e.f||"");a.call(this,c);this.select=ja(this.parent||this.parentFragment,!1,"select")}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){if(this.select){var b=this.attributeByName.selected;b&&void 0!==this.select.getAttribute("value")&&(b=this.attributes.indexOf(b),this.attributes.splice(b,1),delete this.attributeByName.selected);a.prototype.bind.call(this);this.select.options.push(this)}else a.prototype.bind.call(this)};
b.prototype.bubble=function(){var b=this.getAttribute("value");this.node&&this.node.value!==b&&(this.node._ractive.value=b);a.prototype.bubble.call(this)};b.prototype.getAttribute=function(a){var b=this.attributeByName[a];return b?b.getValue():"value"===a&&this.fragment?this.fragment.valueOf():void 0};b.prototype.isSelected=function(){var a=this.getAttribute("value");if(void 0===a||!this.select)return!1;var b=this.select.getAttribute("value");if(b==a)return!0;if(this.select.getAttribute("multiple")&&
n(b))for(var d=b.length;d--;)if(b[d]==a)return!0};b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.select&&M(this.select.options,this)};return b}(Fb),Pk=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var b=(this.refName=this.template.r)?
fc(this.ractive,this.refName,this.parentFragment)||null:null,c;b&&(this.named=!0,this.setTemplate(this.template.r,b));b||(a.prototype.bind.call(this),this.model&&(c=this.model.get())&&"object"===typeof c&&("string"===typeof c.template||n(c.t))?(c.template?(this.source=c.template,c=xf(this.template.r,c.template,this.ractive)):this.source=c.t,this.setTemplate(this.template.r,c.t)):this.model&&"string"===typeof this.model.get()||!this.refName?this.setTemplate(this.model.get()):this.setTemplate(this.refName,
b));this.fragment=(new K({owner:this,template:this.partialTemplate})).bind()};b.prototype.detach=function(){return this.fragment.detach()};b.prototype.find=function(a){return this.fragment.find(a)};b.prototype.findAll=function(a,b){this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function(a){return this.fragment.firstNode(a)};b.prototype.forceResetTemplate=
function(){var a=this;this.partialTemplate=void 0;this.refName&&(this.partialTemplate=fc(this.ractive,this.refName,this.parentFragment));this.partialTemplate||(this.partialTemplate=fc(this.ractive,this.name,this.parentFragment));this.partialTemplate||(Y("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]);this.inAttribute?cj(function(){return a.fragment.resetTemplate(a.partialTemplate)}):this.fragment.resetTemplate(this.partialTemplate);this.bubble()};b.prototype.render=
function(a,b){this.fragment.render(a,b)};b.prototype.setTemplate=function(a,b){this.name=a;b||null===b||(b=fc(this.ractive,a,this.parentFragment));b||Y("Could not find template for partial '"+a+"'");this.partialTemplate=b||[]};b.prototype.toString=function(a){return this.fragment.toString(a)};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.fragment.unbind()};b.prototype.unrender=function(a){this.fragment.unrender(a)};b.prototype.update=function(){var a;this.dirty&&(this.dirty=!1,
this.named||(this.model&&(a=this.model.get()),a&&"string"===typeof a&&a!==this.name?(this.setTemplate(a),this.fragment.resetTemplate(this.partialTemplate)):a&&"object"===typeof a&&("string"===typeof a.template||n(a.t))&&a.t!==this.source&&a.template!==this.source&&(a.template?(this.source=a.template,a=xf(this.name,a.template,this.ractive)):this.source=a.t,this.setTemplate(this.name,a.t),this.fragment.resetTemplate(this.partialTemplate))),this.fragment.update())};return b}(rc),U=function(a){this.parent=
a.owner.parentFragment;this.parentFragment=this;this.owner=a.owner;this.ractive=this.parent.ractive;this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.context=null;this.rendered=!1;this.iterations=[];this.template=a.template;this.indexRef=a.indexRef;this.keyRef=a.keyRef;this.previousIterations=this.pendingNewIndices=null;this.isArray=!1};U.prototype.bind=function(a){var b=this;this.context=a;a=a.get();if(this.isArray=n(a)){this.iterations=[];a=a.length;for(var c=0;c<a;c+=1)b.iterations[c]=
b.createIteration(c,c)}else v(a)&&(this.isArray=!1,this.indexRef&&(c=this.indexRef.split(","),this.keyRef=c[0],this.indexRef=c[1]),this.iterations=Object.keys(a).map(function(a,d){return b.createIteration(a,d)}));return this};U.prototype.bubble=function(){this.owner.bubble()};U.prototype.createIteration=function(a,b){var c=new K({owner:this,template:this.template});c.key=a;c.index=b;c.isIteration=!0;var e=this.context.joinKey(a);this.owner.template.z&&(c.aliases={},c.aliases[this.owner.template.z[0].n]=
e);return c.bind(e)};U.prototype.destroyed=function(){this.iterations.forEach(function(a){return a.destroyed()})};U.prototype.detach=function(){var a=b();this.iterations.forEach(function(b){return a.appendChild(b.detach())});return a};U.prototype.find=function(a){var b=this.iterations.length,c;for(c=0;c<b;c+=1){var e=this.iterations[c].find(a);if(e)return e}};U.prototype.findAll=function(a,b){var c=this.iterations.length,e;for(e=0;e<c;e+=1)this.iterations[e].findAll(a,b)};U.prototype.findComponent=
function(a){var b=this.iterations.length,c;for(c=0;c<b;c+=1){var e=this.iterations[c].findComponent(a);if(e)return e}};U.prototype.findAllComponents=function(a,b){var c=this.iterations.length,e;for(e=0;e<c;e+=1)this.iterations[e].findAllComponents(a,b)};U.prototype.findNextNode=function(a){if(a.index<this.iterations.length-1)for(a=a.index+1;a<this.iterations.length;a++){var b=this.iterations[a].firstNode(!0);if(b)return b}return this.owner.findNextNode()};U.prototype.firstNode=function(a){return this.iterations[0]?
this.iterations[0].firstNode(a):null};U.prototype.rebinding=function(a){var b=this;this.context=a;this.iterations.forEach(function(c){var e=a?a.joinKey(c.key||c.index):void 0;c.context=e;b.owner.template.z&&(c.aliases={},c.aliases[b.owner.template.z[0].n]=e)})};U.prototype.render=function(a,b){this.iterations&&this.iterations.forEach(function(c){return c.render(a,b)});this.rendered=!0};U.prototype.shuffle=function(a){var b=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice());
this.pendingNewIndices||(this.pendingNewIndices=[]);this.pendingNewIndices.push(a);var c=[];a.forEach(function(a,d){if(-1!==a){var e=b.iterations[d];c[a]=e;a!==d&&e&&(e.dirty=!0)}});this.iterations=c;this.bubble()};U.prototype.shuffled=function(){this.iterations.forEach(function(a){return a.shuffled()})};U.prototype.toString=function(a){return this.iterations?this.iterations.map(a?Xd:Wd).join(""):""};U.prototype.unbind=function(){this.iterations.forEach(Ea);return this};U.prototype.unrender=function(a){this.iterations.forEach(a?
Vd:ub);this.pendingNewIndices&&this.previousIterations&&this.previousIterations.forEach(function(b){b.rendered&&(a?Vd(b):ub(b))});this.rendered=!1};U.prototype.update=function(){var a=this;if(this.pendingNewIndices)this.updatePostShuffle();else if(!this.updating){this.updating=!0;var c=this.context.get(),e=this.isArray,g,h,k=!0,l;if(this.isArray=n(c))e&&(k=!1,this.iterations.length>c.length&&(g=this.iterations.splice(c.length)));else if(v(c)&&!e)for(k=!1,g=[],h={},l=this.iterations.length;l--;)e=
a.iterations[l],e.key in c?h[e.key]=!0:(a.iterations.splice(l,1),g.push(e));k&&(g=this.iterations,this.iterations=[]);g&&g.forEach(function(a){a.unbind();a.unrender(!0)});this.iterations.forEach(cb);var m,p;if((n(c)?c.length:v(c)?Object.keys(c).length:0)>this.iterations.length){m=this.rendered?b():null;l=this.iterations.length;if(n(c))for(;l<c.length;)p=a.createIteration(l,l),a.iterations.push(p),a.rendered&&p.render(m),l+=1;else v(c)&&(this.indexRef&&!this.keyRef&&(g=this.indexRef.split(","),this.keyRef=
g[0],this.indexRef=g[1]),Object.keys(c).forEach(function(b){h&&b in h||(p=a.createIteration(b,l),a.iterations.push(p),a.rendered&&p.render(m),l+=1)}));this.rendered&&(c=this.parent.findParentNode(),g=this.parent.findNextNode(this.owner),c.insertBefore(m,g))}this.updating=!1}};U.prototype.updatePostShuffle=function(){var a=this,c=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(function(a){c.forEach(function(b,d){c[d]=a[b]})});var e=this.context.get().length,g=this.previousIterations.length,
h,k={};c.forEach(function(b,c){var e=a.previousIterations[c];a.previousIterations[c]=null;if(-1===b)k[c]=e;else if(e.index!==b){var f=a.context.joinKey(b);e.index=b;e.context=f;a.owner.template.z&&(e.aliases={},e.aliases[a.owner.template.z[0].n]=f)}});this.previousIterations.forEach(function(a,b){a&&(k[b]=a)});var l=this.rendered?b():null,m=this.rendered?this.parent.findParentNode():null,n="startIndex"in c;h=n?c.startIndex:0;for(h;h<e;h++){var p=a.iterations[h];p&&n?a.rendered&&(k[h]&&l.appendChild(k[h].detach()),
l.childNodes.length&&m.insertBefore(l,p.firstNode())):(p||(a.iterations[h]=a.createIteration(h,h)),a.rendered&&(k[h]&&l.appendChild(k[h].detach()),p?l.appendChild(p.detach()):a.iterations[h].render(l)))}if(this.rendered){for(h=e;h<g;h++)k[h]&&l.appendChild(k[h].detach());l.childNodes.length&&m.insertBefore(l,this.owner.findNextNode())}Object.keys(k).forEach(function(a){return k[a].unbind().unrender(!0)});this.iterations.forEach(cb);this.pendingNewIndices=null;this.shuffled()};var Qk=function(a){function c(b){a.call(this,
b);this.templateSectionType=this.sectionType=b.template.n||null;this.subordinate=1===b.template.l;this.fragment=null}c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;c.prototype.bind=function(){a.prototype.bind.call(this);this.subordinate&&(this.sibling=this.parentFragment.items[this.parentFragment.items.indexOf(this)-1],this.sibling.nextSibling=this);this.model?(this.dirty=!0,this.update()):!this.sectionType||51!==this.sectionType||this.sibling&&this.sibling.isTruthy()||(this.fragment=
(new K({owner:this,template:this.template.f})).bind())};c.prototype.detach=function(){return this.fragment?this.fragment.detach():b()};c.prototype.find=function(a){if(this.fragment)return this.fragment.find(a)};c.prototype.findAll=function(a,b){this.fragment&&this.fragment.findAll(a,b)};c.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};c.prototype.findAllComponents=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};c.prototype.firstNode=
function(a){return this.fragment&&this.fragment.firstNode(a)};c.prototype.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var a=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,b;if(b=!!a)(b=54===this.templateSectionType)||(b=!(!a||n(a)&&0===a.length||v(a)&&0===Object.keys(a).length));return b};c.prototype.rebinding=function(b,c,e){a.prototype.rebinding.call(this,b,c,e)&&this.fragment&&50!==this.sectionType&&51!==this.sectionType&&this.fragment.rebinding(b,
c)};c.prototype.render=function(a,b){this.rendered=!0;this.fragment&&this.fragment.render(a,b)};c.prototype.shuffle=function(a){this.fragment&&52===this.sectionType&&this.fragment.shuffle(a)};c.prototype.toString=function(a){return this.fragment?this.fragment.toString(a):""};c.prototype.unbind=function(){a.prototype.unbind.call(this);this.fragment&&this.fragment.unbind()};c.prototype.unrender=function(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};c.prototype.update=
function(){if(this.dirty&&(this.fragment&&50!==this.sectionType&&51!==this.sectionType&&(this.fragment.context=this.model),this.model||51===this.sectionType)){this.dirty=!1;var a=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,d=!this.subordinate||!this.sibling.isTruthy(),c=this.sectionType;if(null===this.sectionType||null===this.templateSectionType)this.sectionType=this.template.i||n(a)?52:v(a)||"function"===typeof a?54:void 0===a?null:50;c&&c!==this.sectionType&&this.fragment&&
(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null);var e;52===this.sectionType||53===this.sectionType||d&&(51===this.sectionType?!this.isTruthy():this.isTruthy())?this.fragment?this.fragment.update():52===this.sectionType?e=(new U({owner:this,template:this.template.f,indexRef:this.template.i})).bind(this.model):(e=50!==this.sectionType&&51!==this.sectionType?this.model:null,e=(new K({owner:this,template:this.template.f})).bind(e)):(this.fragment&&this.rendered&&this.fragment.unbind().unrender(!0),
this.fragment=null);e&&(this.rendered&&(d=this.parentFragment.findParentNode(),(a=this.parentFragment.findNextNode(this))?(d=b(),e.render(d),a.parentNode.insertBefore(d,a)):e.render(d)),this.fragment=e);this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update())}};return c}(rc),Rk=function(a){function b(c){a.call(this,c);this.options=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.foundNode=function(a){this.binding&&(a=jd(a),0<a.length&&(this.selectedOptions=
a))};b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.sync();for(var e=this.node,g=e.options.length;g--;)e.options[g].defaultSelected=e.options[g].selected;this.rendered=!0};b.prototype.sync=function(){var a=this,b=this.node;if(b){var d=ua(b.options);if(this.selectedOptions)d.forEach(function(b){0<=a.selectedOptions.indexOf(b)?b.selected=!0:b.selected=!1}),this.binding.setFromNode(b),delete this.selectedOptions;else{var c=this.getAttribute("value"),e=this.getAttribute("multiple");
if(void 0!==c){var g;d.forEach(function(a){var b=a._ractive?a._ractive.value:a.value;if(e)a:{for(var d=c.length;d--;)if(c[d]==b){b=!0;break a}b=void 0}else b=c==b;b&&(g=!0);a.selected=b});g||e||this.binding&&this.binding.forceUpdate()}else this.binding&&this.binding.forceUpdate()}}};b.prototype.update=function(){a.prototype.update.call(this);this.sync()};return b}(Fb),Sk=function(a){function b(c){var e=c.template;c.deferContent=!0;a.call(this,c);this.attributeByName.value||(e.f&&Ia({template:e})?
this.attributes.push(hc({owner:this,template:{t:13,f:e.f,n:"value"},parentFragment:this.parentFragment})):this.fragment=new K({owner:this,cssIds:null,template:e.f}))}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){var a=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&I.scheduleTask(function(){a.dirty=!1;a.node.value=a.fragment.toString()}),this.parentFragment.bubble())};return b}(gg),Oj=function(a){function b(c){a.call(this,
c);this.type=1}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){};b.prototype.detach=function(){return e(this.node)};b.prototype.firstNode=function(){return this.node};b.prototype.render=function(a,b){if(!Sa)if(this.rendered=!0,b){var d=b[0];d&&3===d.nodeType?(b.shift(),d.nodeValue!==this.template&&(d.nodeValue=this.template)):(d=this.node=N.createTextNode(this.template),b[0]?a.insertBefore(d,b[0]):a.appendChild(d));this.node=d}else this.node=N.createTextNode(this.template),
a.appendChild(this.node)};b.prototype.toString=function(a){return a?Sc(this.template):this.template};b.prototype.unbind=function(){};b.prototype.unrender=function(a){this.rendered&&a&&this.detach();this.rendered=!1};b.prototype.update=function(){};b.prototype.valueOf=function(){return this.template};return b}(X),Dd;if(nd){var sc={},hg=za("div").style;Dd=function(a){a=yf(a);if(!sc[a])if(void 0!==hg[a])sc[a]=a;else for(var b=a.charAt(0).toUpperCase()+a.substring(1),c=Ja.length;c--;){var e=Ja[c];if(void 0!==
hg[e+b]){sc[a]=e+b;break}}return sc[a]}}else Dd=null;var Ca=Dd,Eb,gc="hidden";if(N){var tc;if(gc in N)tc="";else for(var ig=Ja.length;ig--;){var jg=Ja[ig],gc=jg+"Hidden";if(gc in N){tc=jg;break}}void 0!==tc?(N.addEventListener(tc+"visibilitychange",zf),zf()):("onfocusout"in N?(N.addEventListener("focusout",kd),N.addEventListener("focusin",ld)):(fa.addEventListener("pagehide",kd),fa.addEventListener("blur",kd),fa.addEventListener("pageshow",ld),fa.addEventListener("focus",ld)),Eb=!0)}var Tk=new RegExp("^-(?:"+
Ja.join("|")+")-"),Mj=new RegExp("^(?:"+Ja.join("|")+")([A-Z])"),Ed;if(nd){var kg=za("div").style,lg=function(a){return a},Fd={},uc={},ob,Kb,Lb,vc,wc,xc;void 0!==kg.transition?(ob="transition",Kb="transitionend",Lb=!0):void 0!==kg.webkitTransition?(ob="webkitTransition",Kb="webkitTransitionEnd",Lb=!0):Lb=!1;ob&&(vc=ob+"Duration",wc=ob+"Property",xc=ob+"TimingFunction");Ed=function(a,b,c,e,g){setTimeout(function(){function h(){clearTimeout(r)}function k(){n&&p&&(a.unregisterCompleteHandler(h),a.ractive.fire(a.name+
":end",a.node,a.isIntro),g())}function l(a){a=e.indexOf(yf(a.propertyName.replace(Tk,"")));-1!==a&&e.splice(a,1);e.length||(clearTimeout(r),m())}function m(){v[wc]=x.property;v[xc]=x.duration;v[vc]=x.timing;a.node.removeEventListener(Kb,l,!1);p=!0;k()}var n,p,r,w=(a.node.namespaceURI||"")+a.node.tagName,v=a.node.style,x={property:v[wc],timing:v[xc],duration:v[vc]};v[wc]=e.map(Ca).map(Af).join(",");v[xc]=Af(c.easing||"linear");v[vc]=c.duration/1E3+"s";a.node.addEventListener(Kb,l,!1);r=setTimeout(function(){e=
[];m()},c.duration+(c.delay||0)+50);a.registerCompleteHandler(h);setTimeout(function(){for(var g=e.length,h,m,r=[],x,$a;g--;)if(x=e[g],h=w+x,Lb&&!uc[h]&&(v[Ca(x)]=b[x],Fd[h]||(m=a.getStyle(x),Fd[h]=a.getStyle(x)!=b[x],uc[h]=!Fd[h],uc[h]&&(v[Ca(x)]=m))),!Lb||uc[h])void 0===m&&(m=a.getStyle(x)),h=e.indexOf(x),-1===h?P("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:a.node}):e.splice(h,1),h=/[^\d]*$/.exec(b[x])[0],
$a=Mb(parseFloat(m),parseFloat(b[x]))||function(){return b[x]},r.push({name:Ca(x),interpolator:$a,suffix:h});r.length?("string"===typeof c.easing?(g=a.ractive.easing[c.easing],g||(Y(ab(c.easing,"easing")),g=lg)):g="function"===typeof c.easing?c.easing:lg,new kc({duration:c.duration,easing:g,step:function(b){for(var c=r.length;c--;){var e=r[c];a.node.style[e.name]=e.interpolator(b)+e.suffix}},complete:function(){n=!0;k()}})):n=!0;e.length||(a.node.removeEventListener(Kb,l,!1),p=!0,k())},0)},c.delay||
0)}}else Ed=null;var Uk=Ed,mg=fa&&(fa.getComputedStyle||null.getComputedStyle),Vk=La.resolve(),Wk={t0:"intro-outro",t1:"intro",t2:"outro"},ga=function(a){this.owner=a.owner||a.parentFragment.owner||ja(a.parentFragment);this.element=this.owner.attributeByName?this.owner:ja(a.parentFragment);this.ractive=this.owner.ractive;this.template=a.template;this.parentFragment=a.parentFragment;this.options=a;this.onComplete=[]};ga.prototype.animateStyle=function(a,b,c){var e=this;if(4===arguments.length)throw Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");
if(!Eb)return this.setStyle(a,b),Vk;var g;"string"===typeof a?(g={},g[a]=b):(g=a,c=b);c||(Y('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);return new La(function(a){if(c.duration){for(var b=Object.keys(g),d=[],h=mg(e.owner.node),k=b.length;k--;){var l=b[k],q=h[Ca(l)];"0px"===q&&(q=0);q!=g[l]&&(d.push(l),e.owner.node.style[Ca(l)]=q)}d.length?
Uk(e,g,c,d,a):a()}else e.setStyle(g),a()})};ga.prototype.bind=function(){var a=this,b=this.options;if(b.template){if("t0"===b.template.v||"t1"==b.template.v)this.element._introTransition=this;if("t0"===b.template.v||"t2"==b.template.v)this.element._outroTransition=this;this.eventName=Wk[b.template.v]}var c=this.owner.ractive;if(b.name)this.name=b.name;else{var e=b.template.f;"string"===typeof e.n&&(e=e.n);if("string"!==typeof e){var g=(new K({owner:this.owner,template:e.n})).bind(),e=g.toString();
g.unbind();if(""===e)return}this.name=e}b.params?this.params=b.params:b.template.f.a&&!b.template.f.a.s?this.params=b.template.f.a:b.template.f.d&&(e=(new K({owner:this.owner,template:b.template.f.d})).bind(),this.params=e.getArgsList(),e.unbind());"function"===typeof this.name?(this._fn=this.name,this.name=this._fn.name):this._fn=pb("transitions",c,this.name);this._fn||Y(ab(this.name,"transition"),{ractive:c});b.template&&this.template.f.a&&this.template.f.a.s&&(this.resolvers=[],this.models=this.template.f.a.r.map(function(b,
c){var e,f=pa(a.parentFragment,b);f?f.register(a):(e=a.parentFragment.resolve(b,function(b){a.models[c]=b;M(a.resolvers,e);b.register(a)}),a.resolvers.push(e));return f}),this.argsFn=Wb(this.template.f.a.s,this.template.f.a.r.length))};ga.prototype.destroyed=function(){};ga.prototype.getStyle=function(a){var b=mg(this.owner.node);if("string"===typeof a)return a=b[Ca(a)],"0px"===a?0:a;if(!n(a))throw Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");
for(var c={},e=a.length;e--;){var g=a[e],h=b[Ca(g)];"0px"===h&&(h=0);c[g]=h}return c};ga.prototype.processParams=function(a,b){"number"===typeof a?a={duration:a}:"string"===typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={});return l({},b,a)};ga.prototype.rebinding=function(a,b){var c=this.models.indexOf(b);~c&&(a=Pa(this.template.f.a.r[c],a,b),a!==b&&(b.unregister(this),this.models.splice(c,1,a),a&&a.addShuffleRegister(this,"mark")))};ga.prototype.registerCompleteHandler=
function(a){T(this.onComplete,a)};ga.prototype.render=function(){};ga.prototype.setStyle=function(a,b){if("string"===typeof a)this.owner.node.style[Ca(a)]=b;else for(var c in a)a.hasOwnProperty(c)&&(this.owner.node.style[Ca(c)]=a[c]);return this};ga.prototype.start=function(){var a=this,b=this.node=this.element.node,c=b.getAttribute("style"),e,g=this.params;this.complete=function(g){e||(a.onComplete.forEach(function(a){return a()}),!g&&a.isIntro&&Nj(b,c),a._manager.remove(a),e=!0)};this._fn?(this.argsFn&&
(g=this.models.map(function(a){return a?a.get():void 0}),g=this.argsFn.apply(this.ractive,g)),(g=this._fn.apply(this.ractive,[this].concat(g)))&&g.then(this.complete)):this.complete()};ga.prototype.toString=function(){return""};ga.prototype.unbind=function(){this.resolvers&&this.resolvers.forEach(Ea)};ga.prototype.unregisterCompleteHandler=function(a){M(this.onComplete,a)};ga.prototype.unrender=function(){};ga.prototype.update=function(){};var Bf={},ng,og;try{za("table").innerHTML="foo"}catch(d){ng=
!0,og={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Xk=function(a){function c(b){a.call(this,b)}c.prototype=Object.create(a&&a.prototype);c.prototype.constructor=c;c.prototype.detach=function(){var a=b();this.nodes.forEach(function(b){return a.appendChild(b)});return a};c.prototype.find=function(a){var b=this.nodes.length,
d;for(d=0;d<b;d+=1){var c=this.nodes[d];if(1===c.nodeType&&(Ka(c,a)||(c=c.querySelector(a))))return c}return null};c.prototype.findAll=function(a,b){var d=this.nodes.length,c;for(c=0;c<d;c+=1){var e=this.nodes[c];if(1===e.nodeType&&(b.test(e)&&b.add(e),e=e.querySelectorAll(a))){var g=e.length,h;for(h=0;h<g;h+=1)b.add(e[h])}}};c.prototype.findComponent=function(){return null};c.prototype.firstNode=function(){return this.nodes[0]};c.prototype.render=function(a){var b=this.model?this.model.get():"",
d=this.parentFragment.findParentNode(),c=[];if(null!=b&&""!==b){var e,g,h;ng&&(g=og[d.tagName])?(e=md("DIV"),e.innerHTML=g[0]+b+g[1],e=e.querySelector(".x"),"SELECT"===e.tagName&&(h=e.options[e.selectedIndex])):"http://www.w3.org/2000/svg"===d.namespaceURI?(e=md("DIV"),e.innerHTML='<svg class="x">'+b+"</svg>",e=e.querySelector(".x")):"TEXTAREA"===d.tagName?(e=za("div"),"undefined"!==typeof e.textContent?e.textContent=b:e.innerHTML=b):(e=md(d.tagName),e.innerHTML=b,"SELECT"===e.tagName&&(h=e.options[e.selectedIndex]));
for(;b=e.firstChild;)c.push(b),a.appendChild(b);if("SELECT"===d.tagName)for(a=c.length;a--;)c[a]!==h&&(c[a].selected=!1)}this.nodes=c;this.rendered=!0};c.prototype.toString=function(){return this.model&&null!=this.model.get()?Rc(""+this.model.get()):""};c.prototype.unrender=function(){this.nodes&&this.nodes.forEach(function(a){return e(a)});this.rendered=!1};c.prototype.update=function(){if(this.rendered&&this.dirty){this.dirty=!1;this.unrender();var a=b();this.render(a);var d=this.parentFragment.findParentNode(),
c=this.parentFragment.findNextNode(this);d.insertBefore(a,c)}else this.dirty=!1};return c}(rc),Yk=function(a){function b(c){a.call(this,c);this.container=c.parentFragment.ractive;this.component=this.container.component;this.containerFragment=c.parentFragment;this.parentFragment=this.component.parentFragment;this.name=c.template.n||""}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this.name;(this.component.yielders[a]||(this.component.yielders[a]=
[])).push(this);var b=this.container._inlinePartials[a||"content"];"string"===typeof b&&(b=lb(b).t);b||(P('Could not find template for partial "'+a+'"',{ractive:this.ractive}),b=[]);this.fragment=(new K({owner:this,ractive:this.container.parent,template:b})).bind()};b.prototype.bubble=function(){this.dirty||(this.containerFragment.bubble(),this.dirty=!0)};b.prototype.detach=function(){return this.fragment.detach()};b.prototype.find=function(a){return this.fragment.find(a)};b.prototype.findAll=function(a,
b){this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment.findAllComponents(a,b)};b.prototype.findNextNode=function(){return this.containerFragment.findNextNode(this)};b.prototype.firstNode=function(a){return this.fragment.firstNode(a)};b.prototype.render=function(a,b){return this.fragment.render(a,b)};b.prototype.setTemplate=function(a){a=this.parentFragment.ractive.partials[a];"string"===
typeof a&&(a=lb(a).t);this.partialTemplate=a||[]};b.prototype.toString=function(a){return this.fragment.toString(a)};b.prototype.unbind=function(){this.fragment.unbind();M(this.component.yielders[this.name],this)};b.prototype.unrender=function(a){this.fragment.unrender(a)};b.prototype.update=function(){this.dirty=!1;this.fragment.update()};return b}(X),sa={};sa[19]=Ck;sa[18]=eg;sa[2]=Nk;sa[8]=Pk;sa[4]=Qk;sa[3]=Xk;sa[16]=Yk;sa[13]=Df;sa[73]=Ek;sa[71]=Aa;sa[70]=ta;sa[72]=ga;var Qj={doctype:eg,form:Mk,
input:gg,option:Ok,select:Rk,textarea:Sk},K=function(a){this.owner=a.owner;this.parent=(this.isRoot=!a.owner.parentFragment)?null:this.owner.parentFragment;this.ractive=a.ractive||(this.isRoot?a.owner:this.parent.ractive);this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null;this.context=null;this.rendered=!1;this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.resolvers=[];this.dirty=!1;this.dirtyArgs=this.dirtyValue=!0;this.template=
a.template||[];this.createItems()};K.prototype.bind=function(a){this.context=a;this.items.forEach(Ob);this.bound=!0;this.dirty&&this.update();return this};K.prototype.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&I.addFragment(this):this.owner.bubble())};K.prototype.createItems=function(){var a=this.template.length;this.items=[];for(var b=0;b<a;b++)this.items[b]=hc({parentFragment:this,
template:this.template[b],index:b})};K.prototype.destroyed=function(){this.items.forEach(function(a){return a.destroyed()})};K.prototype.detach=function(){var a=b();this.items.forEach(function(b){return a.appendChild(b.detach())});return a};K.prototype.find=function(a){var b=this.items.length,c;for(c=0;c<b;c+=1){var e=this.items[c].find(a);if(e)return e}};K.prototype.findAll=function(a,b){if(this.items){var c=this.items.length,e;for(e=0;e<c;e+=1){var g=this.items[e];g.findAll&&g.findAll(a,b)}}return b};
K.prototype.findComponent=function(a){var b=this.items.length,c;for(c=0;c<b;c+=1){var e=this.items[c].findComponent(a);if(e)return e}};K.prototype.findAllComponents=function(a,b){if(this.items){var c=this.items.length,e;for(e=0;e<c;e+=1){var g=this.items[e];g.findAllComponents&&g.findAllComponents(a,b)}}return b};K.prototype.findContext=function(){for(var a=this;a&&!a.context;)a=a.parent;return a?a.context:this.ractive.viewmodel};K.prototype.findNextNode=function(a){if(a)for(a=a.index+1;a<this.items.length;a++)if(this.items[a]){var b=
this.items[a].firstNode(!0);if(b)return b}if(this.isRoot)return this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):null;if(this.parent)return this.owner.findNextNode(this)};K.prototype.findParentNode=function(){var a=this;do{if(7===a.owner.type)return a.owner.node;if(a.isRoot&&!a.ractive.component)return a.ractive.el;a=16===a.owner.type?a.owner.containerFragment:a.componentParent||a.parent}while(a);throw Error("Could not find parent node");};K.prototype.findRepeatingFragment=
function(){for(var a=this;(a.parent||a.componentParent)&&!a.isIteration;)a=a.parent||a.componentParent;return a};K.prototype.firstNode=function(a){for(var b,c=0;c<this.items.length;c++)if(b=this.items[c].firstNode(!0))return b;return a?null:this.parent.findNextNode(this.owner)};K.prototype.getArgsList=function(){if(this.dirtyArgs){var a={},b=ic(this.items,a,this.ractive._guid);this.argsList=(a=$b("["+b+"]",a))?a.value:[this.toString()];this.dirtyArgs=!1}return this.argsList};K.prototype.rebinding=
function(a){this.context=a};K.prototype.render=function(a,b){if(this.rendered)throw Error("Fragment is already rendered!");this.rendered=!0;this.items.forEach(function(c){return c.render(a,b)})};K.prototype.resetTemplate=function(a){var c=this.bound,e=this.rendered;c&&(e&&this.unrender(!0),this.unbind());this.template=a;this.createItems();c&&(this.bind(this.context),e&&(a=this.findParentNode(),(c=this.findNextNode())?(e=b(),this.render(e),a.insertBefore(e,c)):this.render(a)))};K.prototype.resolve=
function(a,b){if(!this.context&&this.parent.resolve)return this.parent.resolve(a,b);var c=new nb(this,a,b);this.resolvers.push(c);return c};K.prototype.shuffled=function(){this.items.forEach(function(a){return a.shuffled()})};K.prototype.toHtml=function(){return this.toString()};K.prototype.toString=function(a){return this.items.map(a?Xd:Wd).join("")};K.prototype.unbind=function(){this.items.forEach(Ea);this.bound=!1;return this};K.prototype.unrender=function(a){this.items.forEach(a?Sj:ub);this.rendered=
!1};K.prototype.update=function(){this.dirty&&(this.updating?this.isRoot&&I.addFragmentToRoot(this):(this.dirty=!1,this.updating=!0,this.items.forEach(cb),this.updating=!1))};K.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var a={},b=ic(this.items,a,this.ractive._guid);this.value=(a=$b(b,a))?a.value:this.toString();this.dirtyValue=!1}return this.value};var Zk=oa("reverse").path,$k=oa("shift").path,al=oa("sort").path,bl=oa("splice").path,cl=
new ca("teardown"),dl=new ca("unrender"),el=oa("unshift").path,fl={add:function(a,b){return qb(this,a,void 0===b?1:+b)},animate:function(a,b,c){if("object"===typeof a)throw b=Object.keys(a),Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+b.map(function(b){return"'"+b+"': "+a[b]}).join("\n  ")+"\n}, {...}), do\n\n"+b.map(function(b){return"ractive.animate('"+b+"', "+a[b]+", {...});"}).join("\n")+"\n");return zc(this,this.viewmodel.joinAll(x(a)),b,c)},detach:function(){if(this.isDetached)return this.el;
this.el&&M(this.el.__ractive_instances__,this);this.el=this.fragment.detach();this.isDetached=!0;ak.fire(this);return this.el},find:function(a){if(!this.el)throw Error("Cannot call ractive.find('"+a+"') unless instance is rendered to the DOM");return this.fragment.find(a)},findAll:function(a,b){if(!this.el)throw Error("Cannot call ractive.findAll('"+a+"', ...) unless instance is rendered to the DOM");b=b||{};var c=this._liveQueries,e=c[a];if(e)return b&&b.live?e:e.slice();e=new Na(this,a,!!b.live,
!1);e.live&&(c.push(a),c["_"+a]=e);this.fragment.findAll(a,e);e.init();return e.result},findAllComponents:function(a,b){b=b||{};var c=this._liveComponentQueries,e=c[a];if(e)return b&&b.live?e:e.slice();e=new Na(this,a,!!b.live,!0);e.live&&(c.push(a),c["_"+a]=e);this.fragment.findAllComponents(a,e);e.init();return e.result},findComponent:function(a){return this.fragment.findComponent(a)},findContainer:function(a){return this.container?this.container.component&&this.container.component.name===a?this.container:
this.container.findContainer(a):null},findParent:function(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null},fire:function(a){for(var b=[],c=arguments.length-1;0<c--;)b[c]=arguments[c+1];return Jd(this,a,{args:b})},get:function(a,b){if("string"!==typeof a)return this.viewmodel.get(!0,a);var c=x(a),e=c[0],g;this.viewmodel.has(e)||!this.component||this.isolated||(g=pa(this.component.parentFragment,e))&&this.viewmodel.map(e,g);g=this.viewmodel.joinAll(c);
return g.get(!0,b)},getNodeInfo:function(a){"string"===typeof a&&(a=this.find(a));return me(a)},insert:function(b,c){if(!this.fragment.rendered)throw Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");b=a(b);c=a(c)||null;if(!b)throw Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),c);this.el=b;(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this);
this.isDetached=!1;oe(this)},link:function(a,b){if(b===a||0===(a+".").indexOf(b+".")||0===(b+".").indexOf(a+"."))throw Error("A keypath cannot be linked to itself.");var c=I.start(),e,g=x(a);!this.viewmodel.has(g[0])&&this.component&&(e=pa(this.component.parentFragment,g[0]),e=e.joinAll(g.slice(1)));this.viewmodel.joinAll(x(b)).link(e||this.viewmodel.joinAll(g),a);I.end();return c},merge:function(a,b,c){return je(this,this.viewmodel.joinAll(x(a)),b,c)},observe:function(a,b,c){var e=this,g=[];if(v(a))c=
b||{},Object.keys(a).forEach(function(b){var h=a[b];b=b.split(" ");1<b.length&&(b=b.filter(function(a){return a}));b.forEach(function(a){g.push(pe(e,a,h,c))})});else{var h;"function"===typeof a?(c=b,b=a,h=[""]):h=a.split(" ");1<h.length&&(h=h.filter(function(a){return a}));h.forEach(function(a){g.push(pe(e,a,b,c||{}))})}this._observers.push.apply(this._observers,g);return{cancel:function(){g.forEach(function(a){M(e._observers,a);a.cancel()})}}},observeList:function(a,b,c){if("string"!==typeof a)throw Error("ractive.observeList() must be passed a string as its first argument");
a=this.viewmodel.joinAll(x(a));var e=new lc(this,a,b,c||{});this._observers.push(e);return{cancel:function(){e.cancel()}}},observeOnce:function(a,b,c){if(v(a)||"function"===typeof a)return c=l(b||{},Rf),this.observe(a,c);c=l(c||{},Rf);return this.observe(a,b,c)},off:function(a,b){var c=this;if(a)a.split(" ").map(qe).filter(re).forEach(function(a){var d=c._subs[a];d&&(b?(b.off=!0,a=d.indexOf(b),-1!==a&&d.splice(a,1)):c._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this},on:function(a,
b){var c=this;if("object"===typeof a){var e=[],g;for(g in a)a.hasOwnProperty(g)&&e.push(this.on(g,a[g]));return{cancel:function(){for(var a;a=e.pop();)a.cancel()}}}a.split(" ").map(qe).filter(re).forEach(function(a){(c._subs[a]||(c._subs[a]=[])).push(b)});return{cancel:function(){return c.off(a,b)}}},once:function(a,b){var c=this.on(a,function(){b.apply(this,arguments);c.cancel()});return c},pop:ck,push:dk,render:function(b,c){if(this.torndown)return P("ractive.render() was called on a Ractive instance that was already torn down"),
Promise.resolve();b=a(b)||this.el;if(!this.append&&b){var e=b.__ractive_instances__;e&&e.forEach(Gc);this.enhance||(b.innerHTML="")}var e=this.enhance?ua(b.childNodes):null,g=se(this,b,c,e);if(e)for(;e.length;)b.removeChild(e.pop());return g},reset:function(a){a=a||{};if("object"!==typeof a)throw Error("The reset method takes either no arguments, or an object containing new data");a=cc.init(this.constructor,this,{data:a});var b=I.start(this,!0),c=this.viewmodel.wrapper;c&&c.reset?!1===c.reset(a)&&
this.viewmodel.set(a):this.viewmodel.set(a);for(var c=id.reset(this),e,g=c.length;g--;)if(-1<wk.indexOf(c[g])){e=!0;break}e&&(Ak.fire(this),this.fragment.resetTemplate(this.template),zk.fire(this),xk.fire(this));I.end();yk.fire(this,a);return b},resetPartial:function(a,b){var c=[];Bb(this.fragment.items,a,!1,c);var e=I.start(this,!0);this.partials[a]=b;c.forEach(Ei);I.end();return e},resetTemplate:function(a){bd.init(null,this,{template:a});a=this.transitionsEnabled;this.transitionsEnabled=!1;var c=
this.component;c&&(c.shouldDestroy=!0);this.unrender();c&&(c.shouldDestroy=!1);this.fragment.unbind().unrender(!0);this.fragment=new K({template:this.template,root:this,owner:this});var e=b();this.fragment.bind(this.viewmodel).render(e);c?this.fragment.findParentNode().insertBefore(e,c.findNextNode()):this.el.insertBefore(e,this.anchor);this.transitionsEnabled=a},reverse:Zk,set:function(a,b){return ea(this,rb(this,a,b))},shift:$k,sort:al,splice:bl,subtract:function(a,b){return qb(this,a,void 0===
b?-1:-b)},teardown:function(){if(this.torndown)return P("ractive.teardown() was called on a Ractive instance that was already torn down"),La.resolve();this.torndown=!0;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(Pd);this.fragment.rendered&&this.el.__ractive_instances__&&M(this.el.__ractive_instances__,this);this.shouldDestroy=!0;var a=this.fragment.rendered?this.unrender():La.resolve();cl.fire(this);return a},toggle:function(a){if("string"!==typeof a)throw new TypeError("Bad arguments");
return ea(this,Wa(this,a).map(function(a){return[a,!a.get()]}))},toCSS:Ef,toCss:Ef,toHTML:Ff,toHtml:Ff,toText:function(){return this.fragment.toString(!1)},transition:function(a,b,c){b instanceof HTMLElement||v(b)&&(c=b);(b=b||this.event.node)&&b._ractive||J("No node was supplied for transition "+a);c=c||{};b=b._ractive.proxy;var e=new ga({owner:b,parentFragment:b.parentFragment,name:a,params:c});e.bind();a=I.start(this,!0);I.registerTransition(e);I.end();a.then(function(){return e.unbind()});return a},
unlink:function(a){var b=I.start();this.viewmodel.joinAll(x(a),{lastLink:!1}).unlink();I.end();return b},unrender:function(){if(!this.fragment.rendered)return P("ractive.unrender() was called on a Ractive instance that was not rendered"),La.resolve();var a=I.start(this,!0);this.fragment.unrender(!this.component||this.component.shouldDestroy||this.shouldDestroy);M(this.el.__ractive_instances__,this);dl.fire(this);I.end();return a},unshift:el,update:function(a){a&&(a=x(a));return ke(this,a?this.viewmodel.joinAll(a):
this.viewmodel)},updateModel:function(a,b){var c=I.start(this,!0);a?this.viewmodel.joinAll(x(a)).updateFromBindings(!1!==b):this.viewmodel.updateFromBindings(!0);I.end();return c}};if("function"!==typeof Date.now||"function"!==typeof String.prototype.trim||"function"!==typeof Object.keys||"function"!==typeof Array.prototype.indexOf||"function"!==typeof Array.prototype.forEach||"function"!==typeof Array.prototype.map||"function"!==typeof Array.prototype.filter||fa&&"function"!==typeof fa.addEventListener)throw Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");
l(Z.prototype,fl,If);Z.prototype.constructor=Z;Z.defaults=Z.prototype;wb(Z,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Gf},escapeKey:{value:xa},getNodeInfo:{value:me},joinKeys:{value:function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];return a.map(xa).join(".")}},parse:{value:lb},splitKeypath:{value:function(a){return x(a).map(va)}},unescapeKey:{value:va},getCSS:{value:Vb},Promise:{value:La},enhance:{writable:!0,value:!1},svg:{value:Lf},magic:{value:dc},
VERSION:{value:"0.8.7"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Jf},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Sb},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}});return Z});(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):b.Ractive.events.tap=a()})(this,function(){function b(a,b){this.node=a;this.callback=b;this.preventMousedownEvents=!1;this.bind(a)}function a(a){this.__tap_handler__.mousedown(a)}function e(a){this.__tap_handler__.touchdown(a)}function c(){this.addEventListener("keydown",h,!1);this.addEventListener("blur",g,!1)}function g(){this.removeEventListener("keydown",h,
!1);this.removeEventListener("blur",g,!1)}function h(a){32===a.which&&this.__tap_handler__.fire()}b.prototype={bind:function(b){window.navigator.pointerEnabled?b.addEventListener("pointerdown",a,!1):window.navigator.msPointerEnabled?b.addEventListener("MSPointerDown",a,!1):b.addEventListener("mousedown",a,!1);b.addEventListener("touchstart",e,!1);"BUTTON"!==b.tagName&&"button"!==b.type||b.addEventListener("focus",c,!1);b.__tap_handler__=this},fire:function(a,b,c){this.callback({node:this.node,original:a,
x:b,y:c})},mousedown:function(a){var b=this;if(!this.preventMousedownEvents&&(void 0===a.which||1===a.which)){var c=a.clientX,e=a.clientY,g=a.pointerId,h=function(a){a.pointerId==g&&(b.fire(a,c,e),w())},v=function(a){a.pointerId==g&&(5<=Math.abs(a.clientX-c)||5<=Math.abs(a.clientY-e))&&w()},w=function J(){b.node.removeEventListener("MSPointerUp",h,!1);document.removeEventListener("MSPointerMove",v,!1);document.removeEventListener("MSPointerCancel",J,!1);b.node.removeEventListener("pointerup",h,!1);
document.removeEventListener("pointermove",v,!1);document.removeEventListener("pointercancel",J,!1);b.node.removeEventListener("click",h,!1);document.removeEventListener("mousemove",v,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",h,!1),document.addEventListener("pointermove",v,!1),document.addEventListener("pointercancel",w,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",h,!1),document.addEventListener("MSPointerMove",v,!1),document.addEventListener("MSPointerCancel",
w,!1)):(this.node.addEventListener("click",h,!1),document.addEventListener("mousemove",v,!1));setTimeout(w,400)}},touchdown:function(){var a=this,b=event.touches[0],c=b.clientX,e=b.clientY,g=b.identifier,h=function(b){b.changedTouches[0].identifier===g&&(b.preventDefault(),a.preventMousedownEvents=!0,clearTimeout(a.preventMousedownTimeout),a.preventMousedownTimeout=setTimeout(function(){a.preventMousedownEvents=!1},400),a.fire(b,c,e));w()},v=function(a){1===a.touches.length&&a.touches[0].identifier===
g||w();a=a.touches[0];(5<=Math.abs(a.clientX-c)||5<=Math.abs(a.clientY-e))&&w()},w=function J(){a.node.removeEventListener("touchend",h,!1);window.removeEventListener("touchmove",v,!1);window.removeEventListener("touchcancel",J,!1)};this.node.addEventListener("touchend",h,!1);window.addEventListener("touchmove",v,!1);window.addEventListener("touchcancel",w,!1);setTimeout(w,400)},teardown:function(){var b=this.node;b.removeEventListener("pointerdown",a,!1);b.removeEventListener("MSPointerDown",a,!1);
b.removeEventListener("mousedown",a,!1);b.removeEventListener("touchstart",e,!1);b.removeEventListener("focus",c,!1)}};return function(a,c){return new b(a,c)}});(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):a(b.Ractive.events)})(this,function(b){function a(a,b){return function(c,e){function g(h){function k(){h.preventDefault();e({node:c,original:h})}(h.which||h.keyCode)===a&&(b?h[b]&&k():k())}c.addEventListener("keydown",g,!1);return{teardown:function(){c.removeEventListener("keydown",g,!1)}}}}var e=a(13),c=a(9),g=a(27),h=a(32),k=a(37),l=a(39),m=a(40),n=a(38),
p=a(13,"ctrlKey");b.enter=e;b.ctrlenter=p;b.tab=c;b.escape=g;b.space=h;b.leftarrow=k;b.rightarrow=l;b.downarrow=m;b.uparrow=n});(function(b,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?module.exports=a():b.Autolinker=a()})(this,function(){var b=function(a){a=a||{};this.version=b.version;this.urls=this.normalizeUrlsCfg(a.urls);this.email="boolean"===typeof a.email?a.email:!0;this.twitter="boolean"===typeof a.twitter?a.twitter:!0;this.phone="boolean"===typeof a.phone?a.phone:!0;this.hashtag=a.hashtag||!1;this.newWindow="boolean"===typeof a.newWindow?a.newWindow:!0;this.stripPrefix="boolean"===
typeof a.stripPrefix?a.stripPrefix:!0;var e=this.hashtag;if(!1!==e&&"twitter"!==e&&"facebook"!==e&&"instagram"!==e)throw Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(a.truncate);this.className=a.className||"";this.replaceFn=a.replaceFn||null;this.tagBuilder=this.matchers=this.htmlParser=null};b.link=function(a,e){return(new b(e)).link(a)};b.version="0.26.0";b.prototype={constructor:b,normalizeUrlsCfg:function(a){null==a&&(a=!0);return"boolean"===typeof a?{schemeMatches:a,
wwwMatches:a,tldMatches:a}:{schemeMatches:"boolean"===typeof a.schemeMatches?a.schemeMatches:!0,wwwMatches:"boolean"===typeof a.wwwMatches?a.wwwMatches:!0,tldMatches:"boolean"===typeof a.tldMatches?a.tldMatches:!0}},normalizeTruncateCfg:function(a){return"number"===typeof a?{length:a,location:"end"}:b.Util.defaults(a||{},{length:Number.POSITIVE_INFINITY,location:"end"})},parse:function(a){a=this.getHtmlParser().parse(a);for(var b=0,c=[],g=0,h=a.length;g<h;g++){var k=a[g],l=k.getType();"element"===
l&&"a"===k.getTagName()?k.isClosing()?b=Math.max(b-1,0):b++:"text"===l&&0===b&&(k=this.parseText(k.getText(),k.getOffset()),c.push.apply(c,k))}c=this.compactMatches(c);return c=this.removeUnwantedMatches(c)},compactMatches:function(a){a.sort(function(a,b){return a.getOffset()-b.getOffset()});for(var b=0;b<a.length-1;b++)for(var c=a[b],c=c.getOffset()+c.getMatchedText().length;b+1<a.length&&a[b+1].getOffset()<=c;)a.splice(b+1,1);return a},removeUnwantedMatches:function(a){var e=b.Util.remove;this.hashtag||
e(a,function(a){return"hashtag"===a.getType()});this.email||e(a,function(a){return"email"===a.getType()});this.phone||e(a,function(a){return"phone"===a.getType()});this.twitter||e(a,function(a){return"twitter"===a.getType()});this.urls.schemeMatches||e(a,function(a){return"url"===a.getType()&&"scheme"===a.getUrlMatchType()});this.urls.wwwMatches||e(a,function(a){return"url"===a.getType()&&"www"===a.getUrlMatchType()});this.urls.tldMatches||e(a,function(a){return"url"===a.getType()&&"tld"===a.getUrlMatchType()});
return a},parseText:function(a,b){b=b||0;for(var c=this.getMatchers(),g=[],h=0,k=c.length;h<k;h++){for(var l=c[h].parseMatches(a),m=0,n=l.length;m<n;m++)l[m].setOffset(b+l[m].getOffset());g.push.apply(g,l)}return g},link:function(a){if(!a)return"";for(var b=this.parse(a),c=[],g=0,h=0,k=b.length;h<k;h++){var l=b[h];c.push(a.substring(g,l.getOffset()));c.push(this.createMatchReturnVal(l));g=l.getOffset()+l.getMatchedText().length}c.push(a.substring(g));return c.join("")},createMatchReturnVal:function(a){var e;
this.replaceFn&&(e=this.replaceFn.call(this,this,a));return"string"===typeof e?e:!1===e?a.getMatchedText():e instanceof b.HtmlTag?e.toAnchorString():a.buildTag().toAnchorString()},getHtmlParser:function(){var a=this.htmlParser;a||(a=this.htmlParser=new b.htmlParser.HtmlParser);return a},getMatchers:function(){if(this.matchers)return this.matchers;var a=b.matcher,e=this.getTagBuilder();return this.matchers=[new a.Hashtag({tagBuilder:e,serviceName:this.hashtag}),new a.Email({tagBuilder:e}),new a.Phone({tagBuilder:e}),
new a.Twitter({tagBuilder:e}),new a.Url({tagBuilder:e,stripPrefix:this.stripPrefix})]},getTagBuilder:function(){var a=this.tagBuilder;a||(a=this.tagBuilder=new b.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className}));return a}};b.match={};b.matcher={};b.htmlParser={};b.truncate={};b.Util={abstractMethod:function(){throw"abstract";},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},defaults:function(a,
b){for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c]);return a},extend:function(a,e){var c=a.prototype,g=function(){};g.prototype=c;var h;h=e.hasOwnProperty("constructor")?e.constructor:function(){c.constructor.apply(this,arguments)};g=h.prototype=new g;g.constructor=h;g.superclass=c;delete e.constructor;b.Util.assign(g,e);return h},ellipsis:function(a,b,c){a.length>b&&(c=null==c?"..":c,a=a.substring(0,b-c.length)+c);return a},indexOf:function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);
for(var c=0,g=a.length;c<g;c++)if(a[c]===b)return c;return-1},remove:function(a,b){for(var c=a.length-1;0<=c;c--)!0===b(a[c])&&a.splice(c,1)},splitAndCapture:function(a,b){if(!b.global)throw Error("`splitRegex` must have the 'g' flag set");for(var c=[],g=0,h;h=b.exec(a);)c.push(a.substring(g,h.index)),c.push(h[0]),g=h.index+h[0].length;c.push(a.substring(g));return c},trim:function(a){return a.replace(this.trimRegex,"")}};b.HtmlTag=b.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(a){b.Util.assign(this,
a);this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){this.tagName=a;return this},getTagName:function(){return this.tagName||""},setAttr:function(a,b){this.getAttrs()[a]=b;return this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(a){var e=this.getAttrs();b.Util.assign(e,a);return this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(a){var e=this.getClass(),c=this.whitespaceRegex,
g=b.Util.indexOf,e=e?e.split(c):[];for(a=a.split(c);c=a.shift();)-1===g(e,c)&&e.push(c);this.getAttrs()["class"]=e.join(" ");return this},removeClass:function(a){var e=this.getClass(),c=this.whitespaceRegex,g=b.Util.indexOf,e=e?e.split(c):[];a=a.split(c);for(var h;e.length&&(h=a.shift());)c=g(e,h),-1!==c&&e.splice(c,1);this.getAttrs()["class"]=e.join(" ");return this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},
setInnerHtml:function(a){this.innerHtml=a;return this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var a=this.getTagName(),b=this.buildAttrsStr();return["<",a,b?" "+b:"",">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+'="'+a[c]+'"');return b.join(" ")}});b.RegexLib={alphaNumericCharsStr:"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
domainNameRegex:RegExp("[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19.\\-]*[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19\\-]"),
tldRegex:/(?:travelersinsurance|sandvikcoromant|kerryproperties|cancerresearch|weatherchannel|kerrylogistics|spreadbetting|international|wolterskluwer|lifeinsurance|construction|pamperedchef|scholarships|versicherung|bridgestone|creditunion|kerryhotels|investments|productions|blackfriday|enterprises|lamborghini|photography|motorcycles|williamhill|playstation|contractors|barclaycard|accountants|redumbrella|engineering|management|telefonica|protection|consulting|tatamotors|creditcard|vlaanderen|schaeffler|associates|properties|foundation|republican|bnpparibas|boehringer|eurovision|extraspace|industries|immobilien|university|technology|volkswagen|healthcare|restaurant|cuisinella|vistaprint|apartments|accountant|travelers|homedepot|institute|vacations|furniture|fresenius|insurance|christmas|bloomberg|solutions|barcelona|firestone|financial|kuokgroup|fairwinds|community|passagens|goldpoint|equipment|lifestyle|yodobashi|aquarelle|marketing|analytics|education|amsterdam|statefarm|melbourne|allfinanz|directory|microsoft|stockholm|montblanc|accenture|lancaster|landrover|everbank|istanbul|graphics|grainger|ipiranga|softbank|attorney|pharmacy|saarland|catering|airforce|yokohama|mortgage|frontier|mutuelle|stcgroup|memorial|pictures|football|symantec|cipriani|ventures|telecity|cityeats|verisign|flsmidth|boutique|cleaning|firmdale|clinique|clothing|redstone|infiniti|deloitte|feedback|services|broadway|plumbing|commbank|training|barclays|exchange|computer|brussels|software|delivery|barefoot|builders|business|bargains|engineer|holdings|download|security|helsinki|lighting|movistar|discount|hdfcbank|supplies|marriott|property|diamonds|capetown|partners|democrat|jpmorgan|bradesco|budapest|rexroth|zuerich|shriram|academy|science|support|youtube|singles|surgery|alibaba|statoil|dentist|schwarz|android|cruises|cricket|digital|markets|starhub|systems|courses|coupons|netbank|country|domains|corsica|network|neustar|realtor|lincoln|limited|schmidt|yamaxun|cooking|contact|auction|spiegel|liaison|leclerc|latrobe|lasalle|abogado|compare|lanxess|exposed|express|company|cologne|college|avianca|lacaixa|fashion|recipes|ferrero|komatsu|storage|wanggou|clubmed|sandvik|fishing|fitness|bauhaus|kitchen|flights|florist|flowers|watches|weather|temasek|samsung|bentley|forsale|channel|theater|frogans|theatre|okinawa|website|tickets|jewelry|gallery|tiffany|iselect|shiksha|brother|organic|wedding|genting|toshiba|origins|philips|hyundai|hotmail|hoteles|hosting|rentals|windows|cartier|bugatti|holiday|careers|whoswho|hitachi|panerai|caravan|reviews|guitars|capital|trading|hamburg|hangout|finance|stream|family|abbott|health|review|travel|report|hermes|hiphop|gratis|career|toyota|hockey|dating|repair|google|social|soccer|reisen|global|otsuka|giving|unicom|casino|photos|center|broker|rocher|orange|bostik|garden|insure|ryukyu|bharti|safety|physio|sakura|oracle|online|jaguar|gallup|piaget|tienda|futbol|pictet|joburg|webcam|berlin|office|juegos|kaufen|chanel|chrome|xihuan|church|tennis|circle|kinder|flickr|bayern|claims|clinic|viajes|nowruz|xperia|norton|yachts|studio|coffee|camera|sanofi|nissan|author|expert|events|comsec|lawyer|tattoo|viking|estate|villas|condos|realty|yandex|energy|emerck|virgin|vision|durban|living|school|coupon|london|taobao|natura|taipei|nagoya|luxury|walter|aramco|sydney|madrid|credit|maison|makeup|schule|market|anquan|direct|design|swatch|suzuki|alsace|vuelos|dental|alipay|voyage|shouji|voting|airtel|mutual|degree|supply|agency|museum|mobily|dealer|monash|select|mormon|active|moscow|racing|datsun|quebec|nissay|rodeo|email|gifts|works|photo|chloe|edeka|cheap|earth|vista|tushu|koeln|glass|shoes|globo|tunes|gmail|nokia|space|kyoto|black|ricoh|seven|lamer|sener|epson|cisco|praxi|trust|citic|crown|shell|lease|green|legal|lexus|ninja|tatar|gripe|nikon|group|video|wales|autos|gucci|party|nexus|guide|linde|adult|parts|amica|lixil|boats|azure|loans|locus|cymru|lotte|lotto|stada|click|poker|quest|dabur|lupin|nadex|paris|faith|dance|canon|place|gives|trade|skype|rocks|mango|cloud|boots|smile|final|swiss|homes|honda|media|horse|cards|deals|watch|bosch|house|pizza|miami|osaka|tours|total|xerox|coach|sucks|style|delta|toray|iinet|tools|money|codes|beats|tokyo|salon|archi|movie|baidu|study|actor|yahoo|store|apple|world|forex|today|bible|tmall|tirol|irish|tires|forum|reise|vegas|vodka|sharp|omega|weber|jetzt|audio|promo|build|bingo|chase|gallo|drive|dubai|rehab|press|solar|sale|beer|bbva|bank|band|auto|sapo|sarl|saxo|audi|asia|arte|arpa|army|yoga|ally|zara|scor|scot|sexy|seat|zero|seek|aero|adac|zone|aarp|maif|meet|meme|menu|surf|mini|mobi|mtpc|porn|desi|star|ltda|name|talk|navy|love|loan|live|link|news|limo|like|spot|life|nico|lidl|lgbt|land|taxi|team|tech|kred|kpmg|sony|song|kiwi|kddi|jprs|jobs|sohu|java|itau|tips|info|immo|icbc|hsbc|town|host|page|toys|here|help|pars|haus|guru|guge|tube|goog|golf|gold|sncf|gmbh|gift|ggee|gent|gbiz|game|vana|pics|fund|ford|ping|pink|fish|film|fast|farm|play|fans|fail|plus|skin|pohl|fage|moda|post|erni|dvag|prod|doha|prof|docs|viva|diet|luxe|site|dell|sina|dclk|show|qpon|date|vote|cyou|voto|read|coop|cool|wang|club|city|chat|cern|cash|reit|rent|casa|cars|care|camp|rest|call|cafe|weir|wien|rich|wiki|buzz|wine|book|bond|room|work|rsvp|shia|ruhr|blue|bing|shaw|bike|safe|xbox|best|pwc|mtn|lds|aig|boo|fyi|nra|nrw|ntt|car|gal|obi|zip|aeg|vin|how|one|ong|onl|dad|ooo|bet|esq|org|htc|bar|uol|ibm|ovh|gdn|ice|icu|uno|gea|ifm|bot|top|wtf|lol|day|pet|eus|wtc|ubs|tvs|aco|ing|ltd|ink|tab|abb|afl|cat|int|pid|pin|bid|cba|gle|com|cbn|ads|man|wed|ceb|gmo|sky|ist|gmx|tui|mba|fan|ski|iwc|app|pro|med|ceo|jcb|jcp|goo|dev|men|aaa|meo|pub|jlc|bom|jll|gop|jmp|mil|got|gov|win|jot|mma|joy|trv|red|cfa|cfd|bio|moe|moi|mom|ren|biz|aws|xin|bbc|dnp|buy|kfh|mov|thd|xyz|fit|kia|rio|rip|kim|dog|vet|nyc|bcg|mtr|bcn|bms|bmw|run|bzh|rwe|tel|stc|axa|kpn|fly|krd|cab|bnl|foo|crs|eat|tci|sap|srl|nec|sas|net|cal|sbs|sfr|sca|scb|csc|edu|new|xxx|hiv|fox|wme|ngo|nhk|vip|sex|frl|lat|yun|law|you|tax|soy|sew|om|ac|hu|se|sc|sg|sh|sb|sa|rw|ru|rs|ro|re|qa|py|si|pw|pt|ps|sj|sk|pr|pn|pm|pl|sl|sm|pk|sn|ph|so|pg|pf|pe|pa|zw|nz|nu|nr|np|no|nl|ni|ng|nf|sr|ne|st|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|su|mn|mm|ml|mk|mh|mg|me|sv|md|mc|sx|sy|ma|ly|lv|sz|lu|lt|ls|lr|lk|li|lc|lb|la|tc|kz|td|ky|kw|kr|kp|kn|km|ki|kh|tf|tg|th|kg|ke|jp|jo|jm|je|it|is|ir|tj|tk|tl|tm|iq|tn|to|io|in|im|il|ie|ad|sd|ht|hr|hn|hm|tr|hk|gy|gw|gu|gt|gs|gr|gq|tt|gp|gn|gm|gl|tv|gi|tw|tz|ua|gh|ug|uk|gg|gf|ge|gd|us|uy|uz|va|gb|ga|vc|ve|fr|fo|fm|fk|fj|vg|vi|fi|eu|et|es|er|eg|ee|ec|dz|do|dm|dk|vn|dj|de|cz|cy|cx|cw|vu|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|wf|bz|by|bw|bv|bt|bs|br|bo|bn|bm|bj|bi|ws|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ye|ar|aq|ao|am|al|yt|ai|za|ag|af|ae|zm|id)\b/};
b.AnchorTagBuilder=b.Util.extend(Object,{constructor:function(a){b.Util.assign(this,a)},build:function(a){return new b.HtmlTag({tagName:"a",attrs:this.createAttrs(a.getType(),a.getAnchorHref()),innerHtml:this.processAnchorText(a.getAnchorText())})},createAttrs:function(a,b){var c={href:b},g=this.createCssClass(a);g&&(c["class"]=g);this.newWindow&&(c.target="_blank",c.rel="noopener noreferrer");return c},createCssClass:function(a){var b=this.className;return b?b+" "+b+"-"+a:""},processAnchorText:function(a){return a=
this.doTruncate(a)},doTruncate:function(a){var e=this.truncate;if(!e||!e.length)return a;var c=e.length,e=e.location;return"smart"===e?b.truncate.TruncateSmart(a,c,".."):"middle"===e?b.truncate.TruncateMiddle(a,c,".."):b.truncate.TruncateEnd(a,c,"..")}});b.htmlParser.HtmlParser=b.Util.extend(Object,{htmlRegex:function(){var a=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,b=/[^\s\0"'>\/=\x01-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+a.source+")?";return new RegExp(["(?:<(!DOCTYPE)(?:\\s+(?:",b,"|",a.source+")",")*>)|(?:<(/)?(?:",
/!--([\s\S]+?)--/.source,"|(?:","("+/[0-9a-zA-Z][0-9a-zA-Z:]*/.source+")","(?:\\s*",b,")*\\s*/?))>)"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(a){for(var b=this.htmlRegex,c,g=0,h=[];null!==(c=b.exec(a));){var k=c[0],l=c[3],m=c[1]||c[4],n=!!c[2];c=c.index;var p=a.substring(g,c);p&&(g=this.parseTextAndEntityNodes(g,p),h.push.apply(h,g));l?h.push(this.createCommentNode(c,k,l)):h.push(this.createElementNode(c,k,m,n));g=c+
k.length}g<a.length&&(a=a.substring(g))&&(g=this.parseTextAndEntityNodes(g,a),h.push.apply(h,g));return h},parseTextAndEntityNodes:function(a,e){for(var c=[],g=b.Util.splitAndCapture(e,this.htmlCharacterEntitiesRegex),h=0,k=g.length;h<k;h+=2){var l=g[h],m=g[h+1];l&&(c.push(this.createTextNode(a,l)),a+=l.length);m&&(c.push(this.createEntityNode(a,m)),a+=m.length)}return c},createCommentNode:function(a,e,c){return new b.htmlParser.CommentNode({offset:a,text:e,comment:b.Util.trim(c)})},createElementNode:function(a,
e,c,g){return new b.htmlParser.ElementNode({offset:a,text:e,tagName:c.toLowerCase(),closing:g})},createEntityNode:function(a,e){return new b.htmlParser.EntityNode({offset:a,text:e})},createTextNode:function(a,e){return new b.htmlParser.TextNode({offset:a,text:e})}});b.htmlParser.HtmlNode=b.Util.extend(Object,{offset:void 0,text:void 0,constructor:function(a){b.Util.assign(this,a);if(null==this.offset)throw Error("`offset` cfg required");if(null==this.text)throw Error("`text` cfg required");},getType:b.Util.abstractMethod,
getOffset:function(){return this.offset},getText:function(){return this.text}});b.htmlParser.CommentNode=b.Util.extend(b.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}});b.htmlParser.ElementNode=b.Util.extend(b.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}});b.htmlParser.EntityNode=b.Util.extend(b.htmlParser.HtmlNode,
{getType:function(){return"entity"}});b.htmlParser.TextNode=b.Util.extend(b.htmlParser.HtmlNode,{getType:function(){return"text"}});b.match.Match=b.Util.extend(Object,{constructor:function(a){if(null==a.tagBuilder)throw Error("`tagBuilder` cfg required");if(null==a.matchedText)throw Error("`matchedText` cfg required");if(null==a.offset)throw Error("`offset` cfg required");this.tagBuilder=a.tagBuilder;this.matchedText=a.matchedText;this.offset=a.offset},getType:b.Util.abstractMethod,getMatchedText:function(){return this.matchedText},
setOffset:function(a){this.offset=a},getOffset:function(){return this.offset},getAnchorHref:b.Util.abstractMethod,getAnchorText:b.Util.abstractMethod,buildTag:function(){return this.tagBuilder.build(this)}});b.match.Email=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.email)throw Error("`email` cfg required");this.email=a.email},getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+
this.email},getAnchorText:function(){return this.email}});b.match.Hashtag=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.hashtag)throw Error("`hashtag` cfg required");this.serviceName=a.serviceName;this.hashtag=a.hashtag},getType:function(){return"hashtag"},getServiceName:function(){return this.serviceName},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var a=this.serviceName,b=this.hashtag;switch(a){case "twitter":return"https://twitter.com/hashtag/"+
b;case "facebook":return"https://www.facebook.com/hashtag/"+b;case "instagram":return"https://instagram.com/explore/tags/"+b;default:throw Error("Unknown service name to point hashtag to: ",a);}},getAnchorText:function(){return"#"+this.hashtag}});b.match.Phone=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.number)throw Error("`number` cfg required");if(null==a.plusSign)throw Error("`plusSign` cfg required");this.number=a.number;this.plusSign=
a.plusSign},getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+(this.plusSign?"+":"")+this.number},getAnchorText:function(){return this.matchedText}});b.match.Twitter=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.twitterHandle)throw Error("`twitterHandle` cfg required");this.twitterHandle=a.twitterHandle},getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},
getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}});b.match.Url=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if("scheme"!==a.urlMatchType&&"www"!==a.urlMatchType&&"tld"!==a.urlMatchType)throw Error('`urlMatchType` cfg must be one of: "scheme", "www", or "tld"');if(!a.url)throw Error("`url` cfg required");if(null==a.protocolUrlMatch)throw Error("`protocolUrlMatch` cfg required");
if(null==a.protocolRelativeMatch)throw Error("`protocolRelativeMatch` cfg required");if(null==a.stripPrefix)throw Error("`stripPrefix` cfg required");this.urlMatchType=a.urlMatchType;this.url=a.url;this.protocolUrlMatch=a.protocolUrlMatch;this.protocolRelativeMatch=a.protocolRelativeMatch;this.stripPrefix=a.stripPrefix},urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrlMatchType:function(){return this.urlMatchType},getUrl:function(){var a=
this.url;this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0);return a},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var a=this.getMatchedText();this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a));this.stripPrefix&&(a=this.stripUrlPrefix(a));return a=this.removeTrailingSlash(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,
"")},removeTrailingSlash:function(a){"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1));return a}});b.matcher.Matcher=b.Util.extend(Object,{constructor:function(a){if(!a.tagBuilder)throw Error("`tagBuilder` cfg required");this.tagBuilder=a.tagBuilder},parseMatches:b.Util.abstractMethod});b.matcher.Email=b.Util.extend(b.matcher.Matcher,{matcherRegex:new RegExp([(new RegExp("["+b.RegexLib.alphaNumericCharsStr+"\\-;:&=+$.,]+@")).source,b.RegexLib.domainNameRegex.source,"\\.",b.RegexLib.tldRegex.source].join(""),
"gi"),parseMatches:function(a){for(var e=this.matcherRegex,c=this.tagBuilder,g=[],h;null!==(h=e.exec(a));){var k=h[0];g.push(new b.match.Email({tagBuilder:c,matchedText:k,offset:h.index,email:k}))}return g}});b.matcher.Hashtag=b.Util.extend(b.matcher.Matcher,{matcherRegex:new RegExp("#[_"+b.RegexLib.alphaNumericCharsStr+"]{1,139}","g"),nonWordCharRegex:new RegExp("[^"+b.RegexLib.alphaNumericCharsStr+"]"),constructor:function(a){b.matcher.Matcher.prototype.constructor.call(this,a);this.serviceName=
a.serviceName},parseMatches:function(a){for(var e=this.matcherRegex,c=this.nonWordCharRegex,g=this.serviceName,h=this.tagBuilder,k=[],l;null!==(l=e.exec(a));){var m=l.index,n=a.charAt(m-1);if(0===m||c.test(n))n=l[0],l=l[0].slice(1),k.push(new b.match.Hashtag({tagBuilder:h,matchedText:n,offset:m,serviceName:g,hashtag:l}))}return k}});b.matcher.Phone=b.Util.extend(b.matcher.Matcher,{matcherRegex:/(?:(\+)?\d{1,3}[-\040.])?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]\d{4}/g,parseMatches:function(a){for(var e=this.matcherRegex,
c=this.tagBuilder,g=[],h;null!==(h=e.exec(a));){var k=h[0],l=k.replace(/\D/g,"");g.push(new b.match.Phone({tagBuilder:c,matchedText:k,offset:h.index,number:l,plusSign:!!h[1]}))}return g}});b.matcher.Twitter=b.Util.extend(b.matcher.Matcher,{matcherRegex:new RegExp("@[_"+b.RegexLib.alphaNumericCharsStr+"]{1,20}","g"),nonWordCharRegex:new RegExp("[^"+b.RegexLib.alphaNumericCharsStr+"]"),parseMatches:function(a){for(var e=this.matcherRegex,c=this.nonWordCharRegex,g=this.tagBuilder,h=[],k;null!==(k=e.exec(a));){var l=
k.index,m=a.charAt(l-1);if(0===l||c.test(m))m=k[0],k=k[0].slice(1),h.push(new b.match.Twitter({tagBuilder:g,matchedText:m,offset:l,twitterHandle:k}))}return h}});b.matcher.Url=b.Util.extend(b.matcher.Matcher,{matcherRegex:function(){var a=b.RegexLib.domainNameRegex,e=b.RegexLib.alphaNumericCharsStr;return new RegExp(["(?:(",/(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,a.source,")|((//)?",/(?:www\.)/.source,a.source,")|((//)?",a.source+"\\.",b.RegexLib.tldRegex.source,
"))","(?:"+(new RegExp("["+e+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;]*["+e+"\\-+&@#/%=~_()|'$*\\[\\]]")).source+")?"].join(""),"gi")}(),wordCharRegExp:/\w/,openParensRe:/\(/g,closeParensRe:/\)/g,constructor:function(a){b.matcher.Matcher.prototype.constructor.call(this,a);this.stripPrefix=a.stripPrefix;if(null==this.stripPrefix)throw Error("`stripPrefix` cfg required");},parseMatches:function(a){for(var e=this.matcherRegex,c=this.stripPrefix,g=this.tagBuilder,h=[],k;null!==(k=e.exec(a));){var l=k[0],m=k[1],
n=k[2],p=k[5],r=k.index;k=k[3]||p;p=a.charAt(r-1);!b.matcher.UrlMatchValidator.isValid(l,m)||0<r&&"@"===p||0<r&&k&&this.wordCharRegExp.test(p)||(this.matchHasUnbalancedClosingParen(l)?l=l.substr(0,l.length-1):(p=this.matchHasInvalidCharAfterTld(l,m),-1<p&&(l=l.substr(0,p))),h.push(new b.match.Url({tagBuilder:g,matchedText:l,offset:r,urlMatchType:m?"scheme":n?"www":"tld",url:l,protocolUrlMatch:!!m,protocolRelativeMatch:!!k,stripPrefix:c})))}return h},matchHasUnbalancedClosingParen:function(a){if(")"===
a.charAt(a.length-1)){var b=a.match(this.openParensRe);a=a.match(this.closeParensRe);if((b&&b.length||0)<(a&&a.length||0))return!0}return!1},matchHasInvalidCharAfterTld:function(a,b){if(!a)return-1;var c=0;b&&(c=a.indexOf(":"),a=a.slice(c));var g=/^((.?\/\/)?[A-Za-z0-9\u00C0-\u017F\.\-]*[A-Za-z0-9\u00C0-\u017F\-]\.[A-Za-z]+)/.exec(a);if(null===g)return-1;c+=g[1].length;a=a.slice(g[1].length);return/^[^.A-Za-z:\/?#]/.test(a)?c:-1}});b.matcher.UrlMatchValidator={hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,
uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z\u00C0-\u017F]/,isValid:function(a,b){return b&&!this.isValidUriScheme(b)||this.urlMatchDoesNotHaveProtocolOrDot(a,b)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,b)?!1:!0},isValidUriScheme:function(a){a=a.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==a&&"vbscript:"!==a},urlMatchDoesNotHaveProtocolOrDot:function(a,b){return!!a&&(!b||!this.hasFullProtocolRegex.test(b))&&-1===a.indexOf(".")},
urlMatchDoesNotHaveAtLeastOneWordChar:function(a,b){return a&&b?!this.hasWordCharAfterProtocolRegex.test(a):!1}};b.truncate.TruncateEnd=function(a,e,c){return b.Util.ellipsis(a,e,c)};b.truncate.TruncateMiddle=function(a,b,c){if(a.length<=b)return a;var g=b-c.length,h="";0<g&&(h=a.substr(-1*Math.floor(g/2)));return(a.substr(0,Math.ceil(g/2))+c+h).substr(0,b)};b.truncate.TruncateSmart=function(a,b,c){var g=function(a){var b="";a.scheme&&a.host&&(b+=a.scheme+"://");a.host&&(b+=a.host);a.path&&(b+="/"+
a.path);a.query&&(b+="?"+a.query);a.fragment&&(b+="#"+a.fragment);return b},h=function(a,b){var e=b/2,g=Math.ceil(e),e=-1*Math.floor(e),h="";0>e&&(h=a.substr(e));return a.substr(0,g)+c+h};if(a.length<=b)return a;var k=b-c.length,l=function(a){var b={},c=a.match(/^([a-z]+):\/\//i);c&&(b.scheme=c[1],a=a.substr(c[0].length));if(c=a.match(/^(.*?)(?=(\?|#|\/|$))/i))b.host=c[1],a=a.substr(c[0].length);if(c=a.match(/^\/(.*?)(?=(\?|#|$))/i))b.path=c[1],a=a.substr(c[0].length);if(c=a.match(/^\?(.*?)(?=(#|$))/i))b.query=
c[1],a=a.substr(c[0].length);if(c=a.match(/^#(.*?)$/i))b.fragment=c[1];return b}(a);if(l.query){var m=l.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);m&&(l.query=l.query.substr(0,m[1].length),a=g(l))}if(a.length<=b)return a;l.host&&(l.host=l.host.replace(/^www\./,""),a=g(l));if(a.length<=b)return a;a="";l.host&&(a+=l.host);if(a.length>=k)return l.host.length==b?(l.host.substr(0,b-c.length)+c).substr(0,b):h(a,k).substr(0,b);g="";l.path&&(g+="/"+l.path);l.query&&(g+="?"+l.query);if(g){if((a+g).length>=k)return(a+
g).length==b?(a+g).substr(0,b):(a+h(g,k-a.length)).substr(0,b);a+=g}if(l.fragment){g="#"+l.fragment;if((a+g).length>=k)return(a+g).length==b?(a+g).substr(0,b):(a+h(g,k-a.length)).substr(0,b);a+=g}if(l.scheme&&l.host&&(h=l.scheme+"://",(a+h).length<k))return(h+a).substr(0,b);if(a.length<=b)return a;h="";0<k&&(h=a.substr(-1*Math.floor(k/2)));return(a.substr(0,Math.ceil(k/2))+c+h).substr(0,b)};return b});window.SECU=window.SECU||{};
window.SECU.Ajax={_data:{url:{api:{host:"https://api.secu.su",port:"3000",feedback:"/feedback",post:"/s",get:"/s/",stat:"/stat",chat:"/r"},web:{host:"https://secu.su",page:"/",chat:"/c/"}}},assignHost:function(){var b=this._data,a=window.location.host;"secu.su"!==window.location.host&&(b.url.api.host="http://api-test.secu.su",b.url.api.port="7001",b.url.web.host=a)},call:function(b){return new Promise(function(a,e){var c=new XMLHttpRequest;c.open(b.method,b.url,!0);b.contentType&&c.setRequestHeader("Content-type",
b.contentType);c.send(b.data);c.onload=function(){200<=this.status&&300>this.status?a(this.response):e(this.statusText)};c.onerror=function(){e(this.statusText)}})},sendFeedback:function(b){var a=this._data;return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(b),url:a.url.api.host+a.url.api.feedback})},requestContainer:function(b){var a=this._data;return this.call({method:"GET",url:a.url.api.host+a.url.api.get+b})},sendContainer:function(b){var a=this._data;
return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(b),url:a.url.api.host+a.url.api.post})}};window.SECU=window.SECU||{};
window.SECU.Socket={_data:{},initStats:function(){var b=this._data;b.stats=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port,{secure:!0});b.stats.on("secu-channel:App\\Events\\SecuWasCreated",function(a){window.SECU.App.refreshCount(a.id)})},initChat:function(){var b=this._data,a=window.SECU.App._data.app;b.chat=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port+"/c",{secure:!0});b.chat.on("connect",function(){window.SECU.Chat.enable()});
b.chat.on("reconnect",function(){window.SECU.Chat.enable()});b.chat.on("connecting",function(){window.SECU.Chat.disable()});b.chat.on("reconnecting",function(){window.SECU.Chat.disable()});b.chat.on("reconnect_failed",function(){window.SECU.Chat.disable()});b.chat.on("disconnect",function(){window.SECU.Chat.disable()});b.chat.on("connect_failed",function(){window.SECU.Chat.disable()});b.chat.on("connect_error",function(){window.SECU.Chat.disable()});b.chat.on("close",function(){window.SECU.Chat.disable()});
b.chat.on("error",function(){window.SECU.Chat.disable()});b.chat.on("room.create",function(b){b.success?(a.set("chat.form.room",b.room),window.SECU.Chat.join(a.get("chat.form"))):(a.set("chat.formDisabled",!1),a.set("chat.formActive",!0),window.SECU.Error.show(b.errors))});b.chat.on("room.join",function(b){b.success?b.hasOwnProperty("key")?(a.set("chat.formDisabled",!1),window.SECU.Chat.start(b)):window.SECU.Chat.appendData({sender:"SYS",data:{text:b.name+" joined the room"}}):(a.set("chat.formDisabled",
!1),a.set("chat.formActive",!0),window.SECU.Error.show(b.errors))});b.chat.on("room.join.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});b.chat.on("room.data.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});b.chat.on("room.leave",function(a){a.success?a.self||window.SECU.Chat.appendData({sender:"SYS",data:{text:a.name+" left the room"}}):window.SECU.Error.show(a.errors)});b.chat.on("room.roster",function(a){a=window.SECU.Chat.sortRoster(a);
window.SECU.Chat.refreshRoster(a)});b.chat.on("room.data",function(a){a.hasOwnProperty("sender")&&a.hasOwnProperty("data")?window.SECU.Chat.appendData(a):window.SECU.Chat.appendOwnData(a)})},init:function(){this.initStats();this.initChat()}};window.SECU=window.SECU||{};
window.SECU.Crypt={_data:{encryptionParameters:{iterations:4096,keySize:256,authenticationStrength:128,authenticatedData:"S\u00cbCU",cipherMode:"gcm"}},getRandomHexValue:function(b,a){return sjcl.random.randomWords(b,a)},decrypt:function(b){return sjcl.decrypt(b.password,b.message,{},{})},encrypt:function(b){var a=this._data.encryptionParameters,a={adata:a.authenticatedData+"-"+(new Date).getTime(),iter:a.iterations,mode:a.cipherMode,ts:a.authenticationStrength,ks:a.keySize,iv:this.getRandomHexValue(4,
0),salt:this.getRandomHexValue(2,0)};return sjcl.encrypt(b.password,b.message,a,{})}};window.SECU=window.SECU||{};
window.SECU.Helpers={_data:{},getHumanTime:function(b){function a(a){1===a.toString().length&&(a="0"+a);return a}b=new Date(b);return a(b.getHours())+":"+a(b.getMinutes())},checkVisibility:function(){var b=window.SECU.App._data.app;switch(document.visibilityState){case "hidden":b.set("windowFocused",!1);break;default:b.set("windowFocused",!0)}},watchWindowFocus:function(){document.addEventListener("visibilitychange",this.checkVisibility)},parseNewLines:function(b){return b=b.replace(/(?:\r\n|\r|\n)/g,
"<br>")},convertToPlainText:function(b){return b.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})},getPosition:function(b){b=b.getBoundingClientRect();var a=document.body,e=document.documentElement;return{top:Math.round(b.top+(window.pageYOffset||e.scrollTop||a.scrollTop)-(e.clientTop||a.clientTop||0)),left:Math.round(b.left+(window.pageXOffset||e.scrollLeft||a.scrollLeft)-(e.clientLeft||a.clientLeft||0))}},generateTimestamp:function(b){var a=null,
a=b?new Date(b):new Date;return a.getTime()},watchResize:function(){window.addEventListener("resize",this.fixChatFeedHeight,!1)},dockNavbar:function(b){window.SECU.App._data.app.set("dock.navbar",b)},watchScroll:function(){var b=this._data,a=window.SECU.App._data.app;b.nav={};b.nav.spacer=document.getElementsByClassName("navbar-spacer")[0];window.addEventListener("scroll",function(e){if(!a.get("show.chat")||a.get("chat.formActive"))document.body.scrollTop>b.nav.spacer.offsetTop?window.SECU.Helpers.dockNavbar(!0):
window.SECU.Helpers.dockNavbar(!1)},!1)},watchDragDrop:function(){function b(b){b.preventDefault();clearTimeout(e.dropTimeout);var g=null,h=null,k=null;switch(b.type){case "dragenter":case "dragover":a.set("dropActive",!0);e.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "dragleave":e.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "drop":a.set("dropActive",!1),k=b.dataTransfer.files,document.getElementById("chatFile")?(g="room",h="chat.room.rawFile"):
document.getElementById("messageFile")&&(g="encrypt",h="encrypt.rawFile"),k.length&&g&&h&&(a.set(h,[b.dataTransfer.files[0]]),a.fire("checkFile",null,g))}}var a=window.SECU.App._data.app,e=this._data;a.get("supportedFeatures.dragdrop")&&(document.body.addEventListener("dragover",b,!1),document.body.addEventListener("dragenter",b,!1),document.body.addEventListener("dragleave",b,!1),document.body.addEventListener("drop",b,!1))},checkLocation:function(){var b=null;-1<window.location.pathname.indexOf("/c/")?
(b=window.location.pathname.substring(3),b.length&&window.SECU.App._data.app.set("chat.form.room",b),window.SECU.App._data.app.fire("toggleView",null,"chat")):(b=window.location.pathname.substring(1),b.length&&window.SECU.App._data.app.set("decrypt.hash",b))},checkNotification:function(){window.SECU.App._data.app.set("supportedFeatures.notification","Notification"in window)},checkCopy:function(){window.SECU.App._data.app.set("supportedFeatures.copy",document.queryCommandSupported("copy"))},checkDownload:function(){window.SECU.App._data.app.set("supportedFeatures.download",
"download"in document.createElement("a"))},checkDragDrop:function(){var b=document.createElement("div");window.SECU.App._data.app.set("supportedFeatures.dragdrop","ondragstart"in b&&"ondrop"in b)},fixChatFeedHeight:function(){var b=window.SECU.Helpers,a=document.getElementById("chat-feed-block"),e=document.getElementById("chat-form-block"),c=window.SECU.Chat.scrolledToBottom();a&&(a.style.height="0px",a.style.height=b.getPosition(e).top-b.getPosition(a).top+"px",c&&window.SECU.Chat.updateScroll("bottom"))},
fixTextareaHeight:function(b,a){var e=window.SECU.App._data.app,c=b?b.node:document.getElementById(a+"ContainerBody"),g=getComputedStyle(c).getPropertyValue("border-width"),g=g.length?parseInt(g,10):1;e.set(a+".textareaHeight","0px");c.scrollHeight>c.offsetHeight&&e.set(a+".textareaHeight",c.scrollHeight+2*g+"px")},copyText:function(b){b.select();document.execCommand("copy");b.blur();window.getSelection().removeAllRanges()},formatCounter:function(b){b=parseInt(b,10);return b.toLocaleString()}};window.SECU=window.SECU||{};
window.SECU.File={_data:{maxFileSize:1572864},base64ToBlob:function(b){var a=atob(b.split(",")[1]);b=b.split(",")[0].split(":")[1].split(";")[0];for(var e=new ArrayBuffer(a.length),c=new Uint8Array(e),g=0;g<a.length;g++)c[g]=a.charCodeAt(g);a=new Blob([e],{type:b});return URL.createObjectURL(a)},fileToBase64:function(b){var a=new FileReader;return new Promise(function(e,c){try{a.onload=function(a){e(a.target.result)},a.readAsDataURL(b)}catch(g){c(g)}})},getExtension:function(b){return b.split(".").pop()},prettifySize:function(b){b=
Math.round(b/1E3);return b=1E3<=b?(b/1E3).toFixed(1)+"MB":b+"KB"},validated:function(b){return(b=b[0])?b.size>this._data.maxFileSize?["The file is too big"]:b:!1}};window.SECU=window.SECU||{};window.SECU.Error={_data:{},show:function(b){var a=window.SECU.Error,e=a._data,c=window.SECU.App._data.app;c.set("errors.messages",b);c.set("errors.show",!0);clearTimeout(e.errorTimeout);e.errorTimeout=setTimeout(function(){a.hide()},3E3)},hide:function(){var b=window.SECU.Error._data;window.SECU.App._data.app.set("errors.show",!1);clearTimeout(b.errorTimeout)}};window.SECU=window.SECU||{};
window.SECU.Chat={_data:{sentQueue:[]},unreadPos:function(){var b=this.getChat().getElementsByClassName("unread");return b[b.length-1].offsetTop},watchFeedScroll:function(b){function a(a){c.set("chat.room.unread",!1);c.set("chat.room.scrolled",e.scrolledToBottom())}var e=this,c=window.SECU.App._data.app,g=this.getChat();g&&(b?g.removeEventListener("scroll",a,!1):g.addEventListener("scroll",a,!1))},logout:function(b){window.SECU.Socket._data.chat.emit("room.leave",b)},sortRoster:function(b){var a=window.SECU.App._data.app.get("chat.room.connection.name"),
e=null;if(1===b.length||b[0].name===a)return b;for(var c=0;c<b.length;c++)if(b[c].name===a){e=b[c];b.splice(c,1);break}b.unshift(e);return b},addSentQueue:function(b){this._data.sentQueue.push(JSON.parse(JSON.stringify(b)))},extractSentQueue:function(b){for(var a=this._data.sentQueue,e=null,c=0;c<a.length;c++)if(a[c].sent_at===b){e=a[c];break}a.splice(c,1);e.sender=window.SECU.App._data.app.get("chat.room.connection.name");return e},getChat:function(){var b=document.getElementById("chat-feed-block");
return b?b.children[0]:!1},scrollPresent:function(){var b=this.getChat();return b?b.scrollHeight===b.offsetHeight?!1:!0:!1},scrolledToBottom:function(){var b=this.getChat();return b?b.scrollTop>=b.scrollHeight-b.offsetHeight?!0:!1:!1},updateScroll:function(b){var a=this.getChat();if(a){switch(b){case "top":b=0;break;case "bottom":b=a.scrollHeight}a.scrollTop=b}},decryptData:function(b){var a="",e=null,c=[];if("string"!==typeof b.text)try{a=window.SECU.Crypt.decrypt({message:JSON.stringify(b.text),
password:window.SECU.App._data.app.get("chat.room.connection.key")})}catch(g){a="Error. Couldn't decrypt text data."}else a=b.text;b.files&&b.files.length&&(e=b.files[0],c[0]={name:e.name,extension:window.SECU.File.getExtension(e.name)},c[0].data="string"===typeof e.data?window.SECU.File.base64ToBlob(e.data):window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt({message:JSON.stringify(e.data),password:window.SECU.App._data.app.get("chat.room.connection.key")})));return{text:a,files:c}},appendOwnData:function(b){this.appendData(this.extractSentQueue(b.sent_at))},
appendData:function(b){var a=window.SECU.App._data.app,e=this.scrolledToBottom(),c=a.get("windowFocused");b.data=this.decryptData(b.data);b.data.text=window.SECU.Helpers.convertToPlainText(b.data.text);b.data.text=window.SECU.Helpers.parseNewLines(b.data.text);b.data.text=window.SECU.Helpers.Autolinker.link(b.data.text);b.delivered_at=b.delivered_at||window.SECU.Helpers.generateTimestamp();a.get("chat.room.unread")||c&&a.get("show.chat")&&(!this.scrollPresent()||e)||(a.set("chat.room.feed.*.unread",
!1),b.unread=!0);a.push("chat.room.feed",b);c?b.sender===a.get("chat.room.connection.name")||e?(a.set("chat.room.feed.*.unread",!1),this.updateScroll("bottom")):!this.scrollPresent()&&a.get("show.chat")||a.set("chat.room.unread",!0):(a.set("chat.room.unread",!0),a.set("chat.room.scrolled",this.scrolledToBottom()));a.get("supportedFeatures.notification")&&!c&&(a=null,a="SYS"===b.sender?b.data.text:b.sender+" has sent a message",window.SECU.Notifications.fire({body:a}))},sendData:function(b){window.SECU.Socket._data.chat.emit("room.data",
b)},refreshRoster:function(b){window.SECU.App._data.app.set("chat.room.roster",b)},join:function(b){window.SECU.Socket._data.chat.emit("room.join",b)},create:function(b){window.SECU.Socket._data.chat.emit("room.create",{password:b.password})},enable:function(){window.SECU.App._data.app.set("chat.enabled",!0)},disable:function(){var b=window.SECU.App._data.app;b.get("show.chat")&&window.SECU.App._data.app.fire("toggleView",null,"main");b.get("chat.room.connection.key").length&&(window.SECU.App.reinitApp("chat"),
window.SECU.Error.show(["Connection error"]));b.set("chat.enabled",!1);this.watchFeedScroll(!0)},start:function(b){var a=window.SECU.App._data.app,e=window.SECU.Ajax._data.url,c=a.get("chat.form.room");a.set("chat.done",!0);a.set("chat.room.connection",{link:e.web.host+e.web.chat+c,room:c,name:b.name,key:b.key});this.appendData({sender:"SYS",data:{text:b.name+" joined the room"}});a.set("chat.formActive",!1);a.set("chat.form",{room:"",password:""});a.set("dock.chat",!0);window.SECU.Helpers.dockNavbar(!0);
setTimeout(function(){window.SECU.Helpers.fixChatFeedHeight()},0);this.watchFeedScroll();a.get("supportedFeatures.notification")&&window.SECU.Notifications.init()},init:function(){window.SECU.Helpers.fixChatFeedHeight();this.watchFeedScroll();window.SECU.App._data.app.get("chat.room.unread")?this.updateScroll(this.unreadPos()):this.updateScroll("bottom")}};window.SECU=window.SECU||{};
window.SECU.Notifications={_data:{active:null,activeTimeout:null,timeout:4E3},fire:function(b){if("granted"===Notification.permission){var a=this._data;clearTimeout(a.activeTimeout);a.active&&(b.vibrate=200);b.tag="SECU_SYS";b.icon="/images/secu.png";a.active=new Notification("S\u00cbCU",b);a.activeTimeout=setTimeout(function(){a.active.close();a.active=null},a.timeout)}},init:function(){if("denied"!==Notification.permission){var b=this;"granted"!==Notification.permission&&Notification.requestPermission(function(a){"granted"===
a&&b.fire({body:"Thanks!"})})}}};Ractive.DEBUG=!1;window.SECU=window.SECU||{};
window.SECU.App={_data:{params:{encrypt:{done:!1,link:"",formActive:!0,formDisabled:!1,rawFile:[],fileData:{size:"",name:"",extension:""},file:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},decrypt:{done:!1,success:!0,hash:"",loaded:!1,formDisabled:!1,formActive:!1,message:"",files:[],fileForm:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},feedback:{formDisabled:!1,sent:!1,form:{body:"",email:""},textareaHeight:"0px"},chat:{enabled:!1,done:!1,
formDisabled:!1,formActive:!0,room:{scrolled:!0,unread:!1,connection:{link:"",room:"",name:"",key:""},feed:[],roster:[],rawFile:[],fileData:{size:"",name:"",extension:""},input:{text:"",file:""},feedHeight:"0px"},form:{room:"",password:""}}}},reinitApp:function(b){var a=this._data,e=a.app;e.set("textCopied",!1);e.set("dropActive",!1);b&&(window.SECU.Error.hide(),history.replaceState({},"S\u00ebcu","/"));switch(b){case "package":e.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt)));e.set("encrypt",
JSON.parse(JSON.stringify(a.params.encrypt)));break;case "feedback":e.set("feedback",JSON.parse(JSON.stringify(a.params.feedback)));break;case "chat":e.set("chat",JSON.parse(JSON.stringify(a.params.chat)));break;default:e.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt))),e.set("encrypt",JSON.parse(JSON.stringify(a.params.encrypt))),e.set("feedback",JSON.parse(JSON.stringify(a.params.feedback))),e.set("chat",JSON.parse(JSON.stringify(a.params.chat)))}},refreshCount:function(b){var a=this._data;
a.app.set("counter.number",window.SECU.Helpers.formatCounter(b));a.app.set("counter.show",!0)},init:function(){var b=this,a=this._data,e=new Ractive({el:document.getElementsByClassName("secuApp")[0],template:"#secuApp",data:{windowFocused:!0,dock:{navbar:!1,chat:!1},modal:{active:!1,closeText:"Close"},counter:{show:!1,number:"9000"},show:{main:!0,chat:!1,faq:!1,feedback:!1},textCopied:!1,dropActive:!1,supportedFeatures:{copy:!0,download:!0,dragdrop:!0},errors:{show:!1,messages:[]},humanTime:window.SECU.Helpers.getHumanTime}});
a.app=e;this.reinitApp();e.on({scrollToBottom:function(){this.get("chat.room.unread")?window.SECU.Chat.updateScroll(window.SECU.Chat.unreadPos()):window.SECU.Chat.updateScroll("bottom")},cancelSubmit:function(){return!1},hideError:function(){window.SECU.Error.hide()},chatLogout:function(){window.SECU.Chat.logout({room:this.get("chat.room.connection.room")});b.reinitApp("chat");window.SECU.Chat.enable();this.set("dock.chat",!1);window.SECU.Helpers.dockNavbar(!1);this.fire("modalClose")},showChatLogout:function(){this.set("modal.type",
"chatLogout");this.set("modal.closeText","No");this.set("modal.active",!0)},showChatLink:function(){this.set("modal.type","chatLink");this.set("modal.closeText","Close");this.set("modal.active",!0)},showChatUsers:function(){this.set("modal.type","chatRoster");this.set("modal.closeText","Close");this.set("modal.active",!0)},modalClose:function(){document.activeElement.blur();this.set("modal.active",!1)},toggleView:function(a,b){a&&a.original&&a.original.preventDefault();if(this.get("show."+b))return!1;
window.SECU.Error.hide();var h=this.get("show"),k;for(k in h)this.set("show."+k,!1);this.set("show."+b,!0);"chat"===b?this.get("chat.formActive")||(this.set("dock.chat",!0),window.SECU.Helpers.dockNavbar(!0),setTimeout(function(){window.SECU.Chat.init();(!window.SECU.Chat.scrollPresent()||window.SECU.Chat.scrollPresent()&&window.SECU.Chat.scrolledToBottom())&&e.set("chat.room.unread",!1)},0)):(this.set("dock.chat",!1),window.SECU.Chat.watchFeedScroll(!0),window.SECU.Helpers.dockNavbar(!1))},sendFeedback:function(a){a&&
a.original&&a.original.preventDefault();a=this.get("feedback.form");var b=this;window.SECU.Error.hide();if(!a.body.length)return window.SECU.Error.show(["The message can't be empty"]),!1;b.set("feedback.formDisabled",!0);window.SECU.Ajax.sendFeedback(a).then(function(a){b.set("feedback.sent",!0);b.set("feedback.formDisabled",!1);b.set("feedback.form",{body:"",email:""})},function(a){window.SECU.Error.show([a])})},fixTextareaHeight:window.SECU.Helpers.fixTextareaHeight,attachFile:function(a,b){a&&
a.original&&a.original.preventDefault();var e=null;switch(b){case "room":e={raw:"chat.room.rawFile",ractive:"chat.room.input.file",id:"#chatFile"};break;case "encrypt":e={raw:"encrypt.rawFile",ractive:"encrypt.file.message",id:"#messageFile"}}this.get(e.raw).length?(this.set(e.raw,[]),this.set(e.ractive,""),this.find(e.id).value=""):this.find(e.id).click()},downloadFile:function(a){this.get("supportedFeatures.download")||(a&&a.original&&a.original.preventDefault(),window.open(a.node.href,"_blank").focus())},
checkFile:function(a,b){window.SECU.Error.hide();var e=this,k=null;switch(b){case "room":k={raw:"chat.room.rawFile",ractive:"chat.room.input.file",data:"chat.room.fileData"};break;case "encrypt":k={raw:"encrypt.rawFile",ractive:"encrypt.file.message",data:"encrypt.fileData"}}k||window.SECU.Error.show(["No file domain"]);var l=window.SECU.File.validated(this.get(k.raw));if(l&&!l[0]){var m=window.SECU.File.prettifySize(l.size),n=window.SECU.File.getExtension(l.name);window.SECU.File.fileToBase64(l).then(function(a){e.set(k.ractive,
a);e.set(k.data,{name:l.name,size:m,extension:n})},function(a){window.SECU.Error.show([a])})}else this.set(k.data,{name:"",size:"",extension:""}),l[0]&&(this.set(k.raw,[]),window.SECU.Error.show(["The file is too big"]))},resetApp:function(a,e){a&&a.original&&a.original.preventDefault();b.reinitApp(e)},requestContainer:function(a,b){a&&a.original&&a.original.preventDefault();var e=this,k=null;e.set("decrypt.formDisabled",!0);window.SECU.Ajax.requestContainer(b).then(function(a){a=JSON.parse(a);"string"===
typeof a.data.text?(e.set("decrypt.message",a.data.text),e.set("decrypt.done",!0),a.data.text.length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt")},0)):e.set("decrypt.form.message",JSON.stringify(a.data.text));a.data.files&&a.data.files[0]&&(k=a.data.files[0],e.set("decrypt.files.0.name",k.name),e.set("decrypt.files.0.extension",window.SECU.File.getExtension(k.name)),"string"===typeof k.data?(e.set("decrypt.done",!0),e.set("decrypt.files.0.data",window.SECU.File.base64ToBlob(k.data))):
e.set("decrypt.fileForm.message",JSON.stringify(k.data)));e.set("decrypt.loaded",!0);e.set("decrypt.formActive",!0);e.set("decrypt.formDisabled",!1)},function(a){window.SECU.Error.show([a])})},selectInput:function(a){a.node.select()},copyText:function(a,b){a&&a.original&&a.original.preventDefault();var e=this;window.SECU.Helpers.copyText(document.getElementById(b));this.set("textCopied",!0);setTimeout(function(){e.set("textCopied",!1)},1E3)},sendChat:function(a){a&&a.original&&a.original.preventDefault();
a=this.get("chat.room");var b=a.input.text,e=a.input.file;if(b.trim().length||e.length){var b=b.trim().length?JSON.parse(window.SECU.Crypt.encrypt({message:b,password:a.connection.key})):"",e=e.length?[{data:JSON.parse(window.SECU.Crypt.encrypt({message:e,password:a.connection.key})),name:a.fileData.name}]:[],k=window.SECU.Helpers.generateTimestamp();a={room:a.connection.room,data:{text:b,files:e},sent_at:k};window.SECU.Chat.addSentQueue(a);window.SECU.Chat.sendData(a);this.set("chat.room.input",
{text:"",file:""});this.set("chat.room.rawFile",[]);this.find("#chatFile").value=""}},createChat:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("chat.form.password").length)return window.SECU.Error.show(["You should provide a password"]),!1;this.set("chat.formDisabled",!0);a=this.get("chat.form");a.room.length?window.SECU.Chat.join(a):window.SECU.Chat.create(a)},createContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();
if(!this.get("encrypt.form.message").length&&!this.get("encrypt.rawFile").length)return window.SECU.Error.show(["There should be either message or file"]),!1;this.set("encrypt.formDisabled",!0);var b=this;a=this.get("encrypt.form.password");var e="",k=[],e=a.length?JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.form"))):this.get("encrypt.form.message");this.get("encrypt.rawFile").length&&(a.length?(this.set("encrypt.file.password",a),k.push({data:JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.file"))),
name:this.get("encrypt.fileData.name")})):k.push({data:this.get("encrypt.file.message"),name:this.get("encrypt.fileData.name")}));window.SECU.Ajax.sendContainer({data:{text:e,files:k}}).then(function(a){a=JSON.parse(a);b.set("encrypt.link",window.SECU.Ajax._data.url.web.host+window.SECU.Ajax._data.url.web.page+a.hash);b.set("encrypt.formActive",!1);b.set("encrypt.done",!0);b.set("encrypt.formDisabled",!1);setTimeout(function(){document.getElementById("containerLink").select()},0)},function(a){window.SECU.Error.show([a])})},
decryptContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("decrypt.form.password").length)return window.SECU.Error.show(["You must provide a password"]),!1;a=this.get("decrypt.form.password");this.set("decrypt.formDisabled",!0);this.set("decrypt.fileForm.password",a);if(this.get("decrypt.form.message").length)try{this.set("decrypt.message",window.SECU.Crypt.decrypt(this.get("decrypt.form")))}catch(b){this.set("decrypt.success",!1)}if(this.get("decrypt.fileForm.message").length)try{this.set("decrypt.files.0.data",
window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt(this.get("decrypt.fileForm"))))}catch(b){this.set("decrypt.success",!1)}this.set("decrypt.fileForm",{message:"",password:""});this.set("decrypt.form",{message:"",password:""});this.set("decrypt.done",!0);this.set("decrypt.formDisabled",!1);this.get("decrypt.success")&&this.get("decrypt.message").length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt");setTimeout(function(){document.getElementById("decryptContainerBody").select()},
0)},0)}});e.observe("windowFocused",function(a,b,e){a&&this.get("show.chat")&&(window.SECU.Chat.scrollPresent()||this.set("chat.room.unread",!1))});window.SECU.Helpers.Autolinker=new Autolinker({twitter:!1});window.SECU.Helpers.checkLocation();window.SECU.Helpers.checkCopy();window.SECU.Helpers.checkDownload();window.SECU.Helpers.checkDragDrop();window.SECU.Helpers.checkNotification();window.SECU.Helpers.watchDragDrop();window.SECU.Helpers.watchScroll();window.SECU.Helpers.watchResize();window.SECU.Helpers.watchWindowFocus();
window.SECU.Helpers.checkVisibility();window.SECU.Ajax.assignHost();window.SECU.Socket.init()}};window.SECU.App.init();
