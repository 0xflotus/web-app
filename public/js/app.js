var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(d){this.toString=function(){return"CORRUPT: "+this.message};this.message=d},invalid:function(d){this.toString=function(){return"INVALID: "+this.message};this.message=d},bug:function(d){this.toString=function(){return"BUG: "+this.message};this.message=d},notReady:function(d){this.toString=function(){return"NOT READY: "+this.message};this.message=d}}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});
sjcl.cipher.aes=function(d){this.s[0][0][0]||this.O();var f,g,h,l,m=this.s[0][4],n=this.s[1];f=d.length;var p=1;if(4!==f&&6!==f&&8!==f)throw new sjcl.exception.invalid("invalid aes key size");this.b=[h=d.slice(0),l=[]];for(d=f;d<4*f+28;d++){g=h[d-1];if(0===d%f||8===f&&4===d%f)g=m[g>>>24]<<24^m[g>>16&255]<<16^m[g>>8&255]<<8^m[g&255],0===d%f&&(g=g<<8^g>>>24^p<<24,p=p<<1^283*(p>>7));h[d]=h[d-f]^g}for(f=0;d;f++,d--)g=h[f&3?d:d-4],l[f]=4>=d||4>f?g:n[0][m[g>>>24]]^n[1][m[g>>16&255]]^n[2][m[g>>8&255]]^n[3][m[g&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(d){return u(this,d,0)},decrypt:function(d){return u(this,d,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var d=this.s[0],f=this.s[1],g=d[4],h=f[4],l,m,n,p=[],q=[],r,t,x,I;for(l=0;256>l;l++)q[(p[l]=l<<1^283*(l>>7))^l]=l;for(m=n=0;!g[m];m^=r||1,n=q[n]||1)for(x=n^n<<1^n<<2^n<<3^n<<4,x=x>>8^x&255^99,g[m]=x,h[x]=m,t=p[l=p[r=p[m]]],I=16843009*t^65537*l^257*r^16843008*m,t=257*p[x]^16843008*x,l=0;4>l;l++)d[l][m]=t=t<<24^t>>>8,f[l][x]=I=I<<24^I>>>8;for(l=
0;5>l;l++)d[l]=d[l].slice(0),f[l]=f[l].slice(0)}};
function u(d,f,g){if(4!==f.length)throw new sjcl.exception.invalid("invalid aes block size");var h=d.b[g],l=f[0]^h[0],m=f[g?3:1]^h[1],n=f[2]^h[2];f=f[g?1:3]^h[3];var p,q,r,t=h.length/4-2,x,I=4,L=[0,0,0,0];p=d.s[g];d=p[0];var J=p[1],P=p[2],aa=p[3],la=p[4];for(x=0;x<t;x++)p=d[l>>>24]^J[m>>16&255]^P[n>>8&255]^aa[f&255]^h[I],q=d[m>>>24]^J[n>>16&255]^P[f>>8&255]^aa[l&255]^h[I+1],r=d[n>>>24]^J[f>>16&255]^P[l>>8&255]^aa[m&255]^h[I+2],f=d[f>>>24]^J[l>>16&255]^P[m>>8&255]^aa[n&255]^h[I+3],I+=4,l=p,m=q,n=r;
for(x=0;4>x;x++)L[g?3&-x:x]=la[l>>>24]<<24^la[m>>16&255]<<16^la[n>>8&255]<<8^la[f&255]^h[I++],p=l,l=m,m=n,n=f,f=p;return L}
sjcl.bitArray={bitSlice:function(d,f,g){d=sjcl.bitArray.$(d.slice(f/32),32-(f&31)).slice(1);return void 0===g?d:sjcl.bitArray.clamp(d,g-f)},extract:function(d,f,g){var h=Math.floor(-f-g&31);return((f+g-1^f)&-32?d[f/32|0]<<32-h^d[f/32+1|0]>>>h:d[f/32|0]>>>h)&(1<<g)-1},concat:function(d,f){if(0===d.length||0===f.length)return d.concat(f);var g=d[d.length-1],h=sjcl.bitArray.getPartial(g);return 32===h?d.concat(f):sjcl.bitArray.$(f,h,g|0,d.slice(0,d.length-1))},bitLength:function(d){var f=d.length;return 0===
f?0:32*(f-1)+sjcl.bitArray.getPartial(d[f-1])},clamp:function(d,f){if(32*d.length<f)return d;d=d.slice(0,Math.ceil(f/32));var g=d.length;f&=31;0<g&&f&&(d[g-1]=sjcl.bitArray.partial(f,d[g-1]&2147483648>>f-1,1));return d},partial:function(d,f,g){return 32===d?f:(g?f|0:f<<32-d)+1099511627776*d},getPartial:function(d){return Math.round(d/1099511627776)||32},equal:function(d,f){if(sjcl.bitArray.bitLength(d)!==sjcl.bitArray.bitLength(f))return!1;var g=0,h;for(h=0;h<d.length;h++)g|=d[h]^f[h];return 0===
g},$:function(d,f,g,h){var l;for(void 0===h&&(h=[]);32<=f;f-=32)h.push(g),g=0;if(0===f)return h.concat(d);for(l=0;l<d.length;l++)h.push(g|d[l]>>>f),g=d[l]<<32-f;l=d.length?d[d.length-1]:0;d=sjcl.bitArray.getPartial(l);h.push(sjcl.bitArray.partial(f+d&31,32<f+d?g:h.pop(),1));return h},i:function(d,f){return[d[0]^f[0],d[1]^f[1],d[2]^f[2],d[3]^f[3]]},byteswapM:function(d){var f,g;for(f=0;f<d.length;++f)g=d[f],d[f]=g>>>24|g>>>8&65280|(g&65280)<<8|g<<24;return d}};
sjcl.codec.utf8String={fromBits:function(d){var f="",g=sjcl.bitArray.bitLength(d),h,l;for(h=0;h<g/8;h++)0===(h&3)&&(l=d[h/4]),f+=String.fromCharCode(l>>>24),l<<=8;return decodeURIComponent(escape(f))},toBits:function(d){d=unescape(encodeURIComponent(d));var f=[],g,h=0;for(g=0;g<d.length;g++)h=h<<8|d.charCodeAt(g),3===(g&3)&&(f.push(h),h=0);g&3&&f.push(sjcl.bitArray.partial(8*(g&3),h));return f}};
sjcl.codec.hex={fromBits:function(d){var f="",g;for(g=0;g<d.length;g++)f+=((d[g]|0)+0xf00000000000).toString(16).substr(4);return f.substr(0,sjcl.bitArray.bitLength(d)/4)},toBits:function(d){var f,g=[],h;d=d.replace(/\s|0x/g,"");h=d.length;d+="00000000";for(f=0;f<d.length;f+=8)g.push(parseInt(d.substr(f,8),16)^0);return sjcl.bitArray.clamp(g,4*h)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(d,f,g){var h=sjcl.codec.base32.BASE,l=sjcl.codec.base32.REMAINING,m="",n=0,p=sjcl.codec.base32.B,q=0,r=sjcl.bitArray.bitLength(d);g&&(p=sjcl.codec.base32.X);for(g=0;m.length*h<r;)m+=p.charAt((q^d[g]>>>n)>>>l),n<h?(q=d[g]<<h-n,n+=l,g++):(q<<=h,n-=h);for(;m.length&7&&!f;)m+="=";return m},toBits:function(d,f){d=d.replace(/\s|=/g,"").toUpperCase();var g=sjcl.codec.base32.BITS,
h=sjcl.codec.base32.BASE,l=sjcl.codec.base32.REMAINING,m=[],n,p=0,q=sjcl.codec.base32.B,r=0,t,x="base32";f&&(q=sjcl.codec.base32.X,x="base32hex");for(n=0;n<d.length;n++){t=q.indexOf(d.charAt(n));if(0>t){if(!f)try{return sjcl.codec.base32hex.toBits(d)}catch(I){}throw new sjcl.exception.invalid("this isn't "+x+"!");}p>l?(p-=l,m.push(r^t>>>p),r=t<<g-p):(p+=h,r^=t<<g-p)}p&56&&m.push(sjcl.bitArray.partial(p&56,r,1));return m}};
sjcl.codec.base32hex={fromBits:function(d,f){return sjcl.codec.base32.fromBits(d,f,1)},toBits:function(d){return sjcl.codec.base32.toBits(d,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(d,f,g){var h="",l=0,m=sjcl.codec.base64.B,n=0,p=sjcl.bitArray.bitLength(d);g&&(m=m.substr(0,62)+"-_");for(g=0;6*h.length<p;)h+=m.charAt((n^d[g]>>>l)>>>26),6>l?(n=d[g]<<6-l,l+=26,g++):(n<<=6,l-=6);for(;h.length&3&&!f;)h+="=";return h},toBits:function(d,f){d=d.replace(/\s|=/g,"");var g=[],h,l=0,m=sjcl.codec.base64.B,n=0,p;f&&(m=m.substr(0,62)+"-_");for(h=0;h<d.length;h++){p=m.indexOf(d.charAt(h));
if(0>p)throw new sjcl.exception.invalid("this isn't base64!");26<l?(l-=26,g.push(n^p>>>l),n=p<<32-l):(l+=6,n^=p<<32-l)}l&56&&g.push(sjcl.bitArray.partial(l&56,n,1));return g}};sjcl.codec.base64url={fromBits:function(d){return sjcl.codec.base64.fromBits(d,1,1)},toBits:function(d){return sjcl.codec.base64.toBits(d,1)}};sjcl.hash.sha256=function(d){this.b[0]||this.O();d?(this.F=d.F.slice(0),this.A=d.A.slice(0),this.l=d.l):this.reset()};sjcl.hash.sha256.hash=function(d){return(new sjcl.hash.sha256).update(d).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(d){"string"===typeof d&&(d=sjcl.codec.utf8String.toBits(d));var f,g=this.A=sjcl.bitArray.concat(this.A,d);f=this.l;d=this.l=f+sjcl.bitArray.bitLength(d);for(f=512+f&-512;f<=d;f+=512)v(this,g.splice(0,16));return this},finalize:function(){var d,f=this.A,g=this.F,f=sjcl.bitArray.concat(f,[sjcl.bitArray.partial(1,1)]);for(d=f.length+2;d&15;d++)f.push(0);f.push(Math.floor(this.l/
4294967296));for(f.push(this.l|0);f.length;)v(this,f.splice(0,16));this.reset();return g},Y:[],b:[],O:function(){function d(d){return 4294967296*(d-Math.floor(d))|0}var f=0,g=2,h;a:for(;64>f;g++){for(h=2;h*h<=g;h++)if(0===g%h)continue a;8>f&&(this.Y[f]=d(Math.pow(g,.5)));this.b[f]=d(Math.pow(g,1/3));f++}}};
function v(d,f){var g,h,l,m=f.slice(0),n=d.F,p=d.b,q=n[0],r=n[1],t=n[2],x=n[3],I=n[4],L=n[5],J=n[6],P=n[7];for(g=0;64>g;g++)16>g?h=m[g]:(h=m[g+1&15],l=m[g+14&15],h=m[g&15]=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+m[g&15]+m[g+9&15]|0),h=h+P+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(J^I&(L^J))+p[g],P=J,J=L,L=I,I=x+h|0,x=t,t=r,r=q,q=h+(r&t^x&(r^t))+(r>>>2^r>>>13^r>>>22^r<<30^r<<19^r<<10)|0;n[0]=n[0]+q|0;n[1]=n[1]+r|0;n[2]=n[2]+t|0;n[3]=n[3]+x|0;n[4]=n[4]+I|0;n[5]=n[5]+L|0;n[6]=
n[6]+J|0;n[7]=n[7]+P|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(d){sjcl.mode.ccm.G.push(d)},unListenProgress:function(d){d=sjcl.mode.ccm.G.indexOf(d);-1<d&&sjcl.mode.ccm.G.splice(d,1)},fa:function(d){var f=sjcl.mode.ccm.G.slice(),g;for(g=0;g<f.length;g+=1)f[g](d)},encrypt:function(d,f,g,h,l){var m,n=f.slice(0),p=sjcl.bitArray,q=p.bitLength(g)/8,r=p.bitLength(n)/8;l=l||64;h=h||[];if(7>q)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(m=2;4>m&&r>>>8*m;m++);m<15-q&&(m=15-q);g=p.clamp(g,
8*(15-m));f=sjcl.mode.ccm.V(d,f,g,h,l,m);n=sjcl.mode.ccm.C(d,n,g,f,l,m);return p.concat(n.data,n.tag)},decrypt:function(d,f,g,h,l){l=l||64;h=h||[];var m=sjcl.bitArray,n=m.bitLength(g)/8,p=m.bitLength(f),q=m.clamp(f,p-l),r=m.bitSlice(f,p-l),p=(p-l)/8;if(7>n)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(f=2;4>f&&p>>>8*f;f++);f<15-n&&(f=15-n);g=m.clamp(g,8*(15-f));q=sjcl.mode.ccm.C(d,q,g,r,l,f);d=sjcl.mode.ccm.V(d,q.data,g,h,l,f);if(!m.equal(q.tag,d))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return q.data},na:function(d,f,g,h,l,m){var n=[],p=sjcl.bitArray,q=p.i;h=[p.partial(8,(f.length?64:0)|h-2<<2|m-1)];h=p.concat(h,g);h[3]|=l;h=d.encrypt(h);if(f.length)for(g=p.bitLength(f)/8,65279>=g?n=[p.partial(16,g)]:4294967295>=g&&(n=p.concat([p.partial(16,65534)],[g])),n=p.concat(n,f),f=0;f<n.length;f+=4)h=d.encrypt(q(h,n.slice(f,f+4).concat([0,0,0])));return h},V:function(d,f,g,h,l,m){var n=sjcl.bitArray,p=n.i;l/=8;if(l%2||4>l||16<l)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(4294967295<h.length||4294967295<f.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");g=sjcl.mode.ccm.na(d,h,g,l,n.bitLength(f)/8,m);for(h=0;h<f.length;h+=4)g=d.encrypt(p(g,f.slice(h,h+4).concat([0,0,0])));return n.clamp(g,8*l)},C:function(d,f,g,h,l,m){var n,p=sjcl.bitArray;n=p.i;var q=f.length,r=p.bitLength(f),t=q/50,x=t;g=p.concat([p.partial(8,m-1)],g).concat([0,0,0]).slice(0,4);h=p.bitSlice(n(h,d.encrypt(g)),0,l);if(!q)return{tag:h,data:[]};for(n=0;n<q;n+=4)n>t&&(sjcl.mode.ccm.fa(n/
q),t+=x),g[3]++,l=d.encrypt(g),f[n]^=l[0],f[n+1]^=l[1],f[n+2]^=l[2],f[n+3]^=l[3];return{tag:h,data:p.clamp(f,r)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(d,f,g,h,l,m){if(128!==sjcl.bitArray.bitLength(g))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var n,p=sjcl.mode.ocb2.S,q=sjcl.bitArray,r=q.i,t=[0,0,0,0];g=p(d.encrypt(g));var x,I=[];h=h||[];l=l||64;for(n=0;n+4<f.length;n+=4)x=f.slice(n,n+4),t=r(t,x),I=I.concat(r(g,d.encrypt(r(g,x)))),g=p(g);x=f.slice(n);f=q.bitLength(x);n=d.encrypt(r(g,[0,0,0,f]));x=q.clamp(r(x.concat([0,0,0]),n),f);t=r(t,r(x.concat([0,0,0]),n));t=d.encrypt(r(t,r(g,p(g))));
h.length&&(t=r(t,m?h:sjcl.mode.ocb2.pmac(d,h)));return I.concat(q.concat(x,q.clamp(t,l)))},decrypt:function(d,f,g,h,l,m){if(128!==sjcl.bitArray.bitLength(g))throw new sjcl.exception.invalid("ocb iv must be 128 bits");l=l||64;var n=sjcl.mode.ocb2.S,p=sjcl.bitArray,q=p.i,r=[0,0,0,0],t=n(d.encrypt(g)),x,I,L=sjcl.bitArray.bitLength(f)-l,J=[];h=h||[];for(g=0;g+4<L/32;g+=4)x=q(t,d.decrypt(q(t,f.slice(g,g+4)))),r=q(r,x),J=J.concat(x),t=n(t);I=L-32*g;x=d.encrypt(q(t,[0,0,0,I]));x=q(x,p.clamp(f.slice(g),I).concat([0,
0,0]));r=q(r,x);r=d.encrypt(q(r,q(t,n(t))));h.length&&(r=q(r,m?h:sjcl.mode.ocb2.pmac(d,h)));if(!p.equal(p.clamp(r,l),p.bitSlice(f,L)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return J.concat(p.clamp(x,I))},pmac:function(d,f){var g,h=sjcl.mode.ocb2.S,l=sjcl.bitArray,m=l.i,n=[0,0,0,0],p=d.encrypt([0,0,0,0]),p=m(p,h(h(p)));for(g=0;g+4<f.length;g+=4)p=h(p),n=m(n,d.encrypt(m(p,f.slice(g,g+4))));g=f.slice(g);128>l.bitLength(g)&&(p=m(p,h(p)),g=l.concat(g,[-2147483648,0,0,0]));n=m(n,g);
return d.encrypt(m(h(m(p,h(p))),n))},S:function(d){return[d[0]<<1^d[1]>>>31,d[1]<<1^d[2]>>>31,d[2]<<1^d[3]>>>31,d[3]<<1^135*(d[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(d,f,g,h,l){var m=f.slice(0);f=sjcl.bitArray;h=h||[];d=sjcl.mode.gcm.C(!0,d,m,h,g,l||128);return f.concat(d.data,d.tag)},decrypt:function(d,f,g,h,l){var m=f.slice(0),n=sjcl.bitArray,p=n.bitLength(m);l=l||128;h=h||[];l<=p?(f=n.bitSlice(m,p-l),m=n.bitSlice(m,0,p-l)):(f=m,m=[]);d=sjcl.mode.gcm.C(!1,d,m,h,g,l);if(!n.equal(d.tag,f))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return d.data},ka:function(d,f){var g,h,l,m,n,p=sjcl.bitArray.i;l=[0,0,
0,0];m=f.slice(0);for(g=0;128>g;g++){0!==(d[Math.floor(g/32)]&1<<31-g%32)&&(l=p(l,m));n=0!==(m[3]&1);for(h=3;0<h;h--)m[h]=m[h]>>>1|(m[h-1]&1)<<31;m[0]>>>=1;n&&(m[0]^=-520093696)}return l},j:function(d,f,g){var h,l=g.length;f=f.slice(0);for(h=0;h<l;h+=4)f[0]^=4294967295&g[h],f[1]^=4294967295&g[h+1],f[2]^=4294967295&g[h+2],f[3]^=4294967295&g[h+3],f=sjcl.mode.gcm.ka(f,d);return f},C:function(d,f,g,h,l,m){var n,p,q,r,t,x,I,L,J=sjcl.bitArray;x=g.length;I=J.bitLength(g);L=J.bitLength(h);p=J.bitLength(l);
n=f.encrypt([0,0,0,0]);96===p?(l=l.slice(0),l=J.concat(l,[1])):(l=sjcl.mode.gcm.j(n,[0,0,0,0],l),l=sjcl.mode.gcm.j(n,l,[0,0,Math.floor(p/4294967296),p&4294967295]));p=sjcl.mode.gcm.j(n,[0,0,0,0],h);t=l.slice(0);h=p.slice(0);d||(h=sjcl.mode.gcm.j(n,p,g));for(r=0;r<x;r+=4)t[3]++,q=f.encrypt(t),g[r]^=q[0],g[r+1]^=q[1],g[r+2]^=q[2],g[r+3]^=q[3];g=J.clamp(g,I);d&&(h=sjcl.mode.gcm.j(n,p,g));d=[Math.floor(L/4294967296),L&4294967295,Math.floor(I/4294967296),I&4294967295];h=sjcl.mode.gcm.j(n,h,d);q=f.encrypt(l);
h[0]^=q[0];h[1]^=q[1];h[2]^=q[2];h[3]^=q[3];return{tag:J.bitSlice(h,0,m),data:g}}};sjcl.misc.hmac=function(d,f){this.W=f=f||sjcl.hash.sha256;var g=[[],[]],h,l=f.prototype.blockSize/32;this.w=[new f,new f];d.length>l&&(d=f.hash(d));for(h=0;h<l;h++)g[0][h]=d[h]^909522486,g[1][h]=d[h]^1549556828;this.w[0].update(g[0]);this.w[1].update(g[1]);this.R=new f(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(d){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(d);return this.digest(d)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(d){this.aa=!0;this.R.update(d)};sjcl.misc.hmac.prototype.digest=function(){var d=this.R.finalize(),d=(new this.W(this.w[1])).update(d).finalize();this.reset();return d};
sjcl.misc.pbkdf2=function(d,f,g,h,l){g=g||1E3;if(0>h||0>g)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof d&&(d=sjcl.codec.utf8String.toBits(d));"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));l=l||sjcl.misc.hmac;d=new l(d);var m,n,p,q,r=[],t=sjcl.bitArray;for(q=1;32*r.length<(h||1);q++){l=m=d.encrypt(t.concat(f,[q]));for(n=1;n<g;n++)for(m=d.encrypt(m),p=0;p<m.length;p++)l[p]^=m[p];r=r.concat(l)}h&&(r=t.clamp(r,h));return r};
sjcl.prng=function(d){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=d;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=65536;this.T=[0,48,64,96,128,192,256,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(d,f){var g=[],h;h=this.isReady(f);var l;if(h===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(h&this.J){h=!(h&this.I);l=[];var m=0,n;this.Z=l[0]=(new Date).valueOf()+this.da;for(n=0;16>n;n++)l.push(4294967296*Math.random()|0);for(n=0;n<this.c.length&&(l=l.concat(this.c[n].finalize()),m+=this.m[n],this.m[n]=0,h||!(this.P&1<<n));n++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=m;m>this.o&&(this.o=
m);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(l));this.L=new sjcl.cipher.aes(this.b);for(h=0;4>h&&(this.h[h]=this.h[h]+1|0,!this.h[h]);h++);}for(h=0;h<d;h+=4)0===(h+1)%this.ca&&y(this),l=z(this),g.push(l[0],l[1],l[2],l[3]);y(this);return g.slice(0,d)},setDefaultParanoia:function(d,f){if(0===d&&"Setting paranoia=0 will ruin your security; use it only for testing"!==f)throw"Setting paranoia=0 will ruin your security; use it only for testing";this.M=d},addEntropy:function(d,f,g){g=g||"user";
var h,l,m=(new Date).valueOf(),n=this.H[g],p=this.isReady(),q=0;h=this.U[g];void 0===h&&(h=this.U[g]=this.ha++);void 0===n&&(n=this.H[g]=0);this.H[g]=(this.H[g]+1)%this.c.length;switch(typeof d){case "number":void 0===f&&(f=1);this.c[n].update([h,this.N++,1,f,m,1,d|0]);break;case "object":g=Object.prototype.toString.call(d);if("[object Uint32Array]"===g){l=[];for(g=0;g<d.length;g++)l.push(d[g]);d=l}else for("[object Array]"!==g&&(q=1),g=0;g<d.length&&!q;g++)"number"!==typeof d[g]&&(q=1);if(!q){if(void 0===
f)for(g=f=0;g<d.length;g++)for(l=d[g];0<l;)f++,l>>>=1;this.c[n].update([h,this.N++,2,f,m,d.length].concat(d))}break;case "string":void 0===f&&(f=d.length);this.c[n].update([h,this.N++,3,f,m,d.length]);this.c[n].update(d);break;default:q=1}if(q)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[n]+=f;this.f+=f;p===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},isReady:function(d){d=this.T[void 0!==
d?d:this.M];return this.o&&this.o>=d?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=d?this.J|this.u:this.u},getProgress:function(d){d=this.T[d?d:this.M];return this.o>=d?1:this.f>d?1:this.f/d},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,
!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(d,f){this.K[d][this.ga++]=f},removeEventListener:function(d,f){var g,h,l=this.K[d],m=[];for(h in l)l.hasOwnProperty(h)&&l[h]===f&&m.push(h);for(g=0;g<m.length;g++)h=m[g],delete l[h]},la:function(){C(1)},oa:function(d){var f,g;try{f=d.x||d.clientX||d.offsetX||0,g=d.y||d.clientY||d.offsetY||0}catch(h){g=f=0}0!=f&&0!=g&&sjcl.random.addEntropy([f,g],2,"mouse");C(0)},qa:function(d){d=
d.touches[0]||d.changedTouches[0];sjcl.random.addEntropy([d.pageX||d.clientX,d.pageY||d.clientY],1,"touch");C(0)},ma:function(){C(2)},ea:function(d){d=d.accelerationIncludingGravity.x||d.accelerationIncludingGravity.y||d.accelerationIncludingGravity.z;if(window.orientation){var f=window.orientation;"number"===typeof f&&sjcl.random.addEntropy(f,1,"accelerometer")}d&&sjcl.random.addEntropy(d,2,"accelerometer");C(0)}};
function A(d,f){var g,h=sjcl.random.K[d],l=[];for(g in h)h.hasOwnProperty(g)&&l.push(h[g]);for(g=0;g<l.length;g++)l[g](f)}function C(d){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),d,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),d,"loadtime")}function y(d){d.b=z(d).concat(z(d));d.L=new sjcl.cipher.aes(d.b)}
function z(d){for(var f=0;4>f&&(d.h[f]=d.h[f]+1|0,!d.h[f]);f++);return d.L.encrypt(d.h)}function B(d,f){return function(){f.apply(d,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(d){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(d){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(d))}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(d,f,g,h){g=g||{};h=h||{};var l=sjcl.json,m=l.g({iv:sjcl.random.randomWords(4,0)},l.defaults),n;l.g(m,g);g=m.adata;"string"===typeof m.salt&&(m.salt=sjcl.codec.base64.toBits(m.salt));"string"===typeof m.iv&&(m.iv=sjcl.codec.base64.toBits(m.iv));if(!sjcl.mode[m.mode]||!sjcl.cipher[m.cipher]||"string"===typeof d&&100>=m.iter||64!==m.ts&&96!==m.ts&&128!==m.ts||128!==m.ks&&192!==m.ks&&256!==m.ks||2>m.iv.length||
4<m.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof d?(n=sjcl.misc.cachedPbkdf2(d,m),d=n.key.slice(0,m.ks/32),m.salt=n.salt):sjcl.ecc&&d instanceof sjcl.ecc.elGamal.publicKey&&(n=d.kem(),m.kemtag=n.tag,d=n.key.slice(0,m.ks/32));"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));"string"===typeof g&&(m.adata=g=sjcl.codec.utf8String.toBits(g));n=new sjcl.cipher[m.cipher](d);l.g(h,m);h.key=d;m.ct="ccm"===m.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
f instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(n,f,m.iv,g,m.ts):sjcl.mode[m.mode].encrypt(n,f,m.iv,g,m.ts);return m},encrypt:function(d,f,g,h){var l=sjcl.json,m=l.ja.apply(l,arguments);return l.encode(m)},ia:function(d,f,g,h){g=g||{};h=h||{};var l=sjcl.json;f=l.g(l.g(l.g({},l.defaults),f),g,!0);var m,n;m=f.adata;"string"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));"string"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));if(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||"string"===
typeof d&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&256!==f.ks||!f.iv||2>f.iv.length||4<f.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof d?(n=sjcl.misc.cachedPbkdf2(d,f),d=n.key.slice(0,f.ks/32),f.salt=n.salt):sjcl.ecc&&d instanceof sjcl.ecc.elGamal.secretKey&&(d=d.unkem(sjcl.codec.base64.toBits(f.kemtag)).slice(0,f.ks/32));"string"===typeof m&&(m=sjcl.codec.utf8String.toBits(m));n=new sjcl.cipher[f.cipher](d);m="ccm"===
f.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&f.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(n,f.ct,f.iv,f.tag,m,f.ts):sjcl.mode[f.mode].decrypt(n,f.ct,f.iv,m,f.ts);l.g(h,f);h.key=d;return 1===g.raw?m:sjcl.codec.utf8String.fromBits(m)},decrypt:function(d,f,g,h){var l=sjcl.json;return l.ia(d,l.decode(f),g,h)},encode:function(d){var f,g="{",h="";for(f in d)if(d.hasOwnProperty(f)){if(!f.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");g+=h+'"'+
f+'":';h=",";switch(typeof d[f]){case "number":case "boolean":g+=d[f];break;case "string":g+='"'+escape(d[f])+'"';break;case "object":g+='"'+sjcl.codec.base64.fromBits(d[f],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return g+"}"},decode:function(d){d=d.replace(/\s/g,"");if(!d.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");d=d.replace(/^\{|\}$/g,"").split(/,/);var f={},g,h;for(g=0;g<d.length;g++){if(!(h=d[g].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=h[3]?f[h[2]]=parseInt(h[3],10):null!=h[4]?f[h[2]]=h[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(h[4]):unescape(h[4]):null!=h[5]&&(f[h[2]]="true"===h[5])}return f},g:function(d,f,g){void 0===d&&(d={});if(void 0===f)return d;for(var h in f)if(f.hasOwnProperty(h)){if(g&&void 0!==d[h]&&d[h]!==f[h])throw new sjcl.exception.invalid("required parameter overridden");d[h]=f[h]}return d},sa:function(d,f){var g={},h;for(h in d)d.hasOwnProperty(h)&&d[h]!==f[h]&&(g[h]=d[h]);return g},ra:function(d,
f){var g={},h;for(h=0;h<f.length;h++)void 0!==d[f[h]]&&(g[f[h]]=d[f[h]]);return g}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(d,f){var g=sjcl.misc.pa,h;f=f||{};h=f.iter||1E3;g=g[d]=g[d]||{};h=g[h]=g[h]||{firstSalt:f.salt&&f.salt.length?f.salt.slice(0):sjcl.random.randomWords(2,0)};g=void 0===f.salt?h.firstSalt:f.salt;h[g]=h[g]||sjcl.misc.pbkdf2(d,g,f.iter);return{key:h[g].slice(0),salt:g.slice(0)}};(function(d,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):d.Ractive=f()})(this,function(){function d(a){var b;if(a&&"boolean"!==typeof a)return"undefined"!==typeof window&&document&&a?a.nodeType?a:"string"===typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function f(a){a&&"unknown"!==typeof a.parentNode&&a.parentNode&&
a.parentNode.removeChild(a);return a}function g(a){return null!=a&&a.toString?a:""}function h(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];for(var k;b=c.shift();)for(k in b)ra.call(b,k)&&(a[k]=b[k]);return a}function l(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];c.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])});return a}function m(a){return"[object Array]"===La.call(a)}function n(a,b){return null===
a&&null===b?!0:"object"===typeof a||"object"===typeof b?!1:a===b}function p(a){return!isNaN(parseFloat(a))&&isFinite(a)}function q(a){return a&&"[object Object]"===La.call(a)}function r(a,b){return a.replace(/%s/g,function(){return b.shift()})}function t(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];a=r(a,c);throw Error(a);}function x(){ma.DEBUG&&vb.apply(null,arguments)}function I(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];
a=r(a,c);ab(a,c)}function L(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];a=r(a,c);Vc[a]||(Vc[a]=!0,ab(a,c))}function J(){ma.DEBUG&&I.apply(null,arguments)}function P(){ma.DEBUG&&L.apply(null,arguments)}function aa(a,b,c){return(b=la(a,b,c))?b[a][c]:null}function la(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function wb(a){return function(){return a}}function pg(a){var b="",c,e,k,d,f,h,g;if(!bb[a]){for(e=[];b.length<a;)b+=1;b=parseInt(b,
2);k=function(a){return"1"===a};for(d=0;d<=b;d+=1){for(c=d.toString(2);c.length<a;)c="0"+c;g=[];h=c.length;for(f=0;f<h;f++)g.push(k(c[f]));e[d]=g}bb[a]=e}return bb[a]}function Wc(a,b,c,e){var k=a[b];if(!k||!k.equalsOrStartsWith(e)&&k.equalsOrStartsWith(c))return a[b]=k?k.replace(c,e):e,!0}function K(a){if(null==a)return a;xb.hasOwnProperty(a)||(xb[a]=new Xc(a));return xb[a]}function cb(a,b){function c(b,c){var e,k;e=c.isRoot?[].concat(Object.keys(a.viewmodel.data),Object.keys(a.viewmodel.mappings),
Object.keys(a.viewmodel.computations)):(k=(e=a.viewmodel.wrapped[c.str])?e.get():a.viewmodel.get(c))?Object.keys(k):null;e&&e.forEach(function(a){"_ractive"===a&&m(k)||b.push(c.join(a))});return b}var e,k,d;e=b.str.split(".");for(d=[sa];k=e.shift();)"*"===k?d=d.reduce(c,[]):d[0]===sa?d[0]=K(k):d=d.map(qg(k));return d}function qg(a){return function(b){return b.join(a)}}function ba(a){return a?a.replace(rg,".$1"):""}function Yc(a){this.event=a;this.method="on"+a;this.deprecate=sg[a]}function Zc(a,b){for(var c=
0,e=a.length;c<e;c++)if(a[c]==b)return!0;return!1}function yb(a,b){var c;if(!m(a)||!m(b)||a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function $c(a){return"string"===typeof a?[a]:void 0===a?[]:a}function na(a){return a[a.length-1]}function T(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function zb(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function tg(a,b){return function(){for(var c;c=a.shift();)c(b)}}function ad(a,b,c,e){var k;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");
if(b instanceof Y)b.then(c,e);else if(!b||"object"!==typeof b&&"function"!==typeof b)c(b);else{try{k=b.then}catch(d){e(d);return}if("function"===typeof k){var f,h,g;h=function(b){f||(f=!0,ad(a,b,c,e))};g=function(a){f||(f=!0,e(a))};try{k.call(b,h,g)}catch(d){f||(e(d),f=!0)}}else c(b)}}function ug(a,b){var c;void 0!=a&&"string"!==typeof a&&(a=a.str);if("."===b)return K(a);c=a?a.split("."):[];if("../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw Error('Could not resolve reference - too many "../" prefixes');
c.pop();b=b.substring(3)}c.push(b);return K(c.join("."))}return a?K(a+b.replace(/^\.\//,".")):K(b.replace(/^\.\/?/,""))}function Ab(a,b,c,e){var k,d,f,h;if(b.isRoot)return b;for(d=b.firstKey;c;)if(k=c.context,c=c.parent,k&&(h=!0,(f=a.viewmodel.get(k))&&("object"===typeof f||"function"===typeof f)&&d in f))return k.join(b.str);if(bd(a.viewmodel,d))return b;if(a.parent&&!a.isolated&&(h=!0,c=a.component.parentFragment,d=K(d),c=Ab(a.parent,d,c,!0)))return a.viewmodel.map(d,{origin:a.parent.viewmodel,
keypath:c}),b;if(!e&&!h)return a.viewmodel.set(b,void 0),b}function cd(a,b){var c;!a.parent||a.isolated||bd(a.viewmodel,b)||(b=K(b),(c=Ab(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function bd(a,b){return""===b||b in a.data||b in a.computations||b in a.mappings}function dd(a){a.teardown()}function ca(a){a.unbind()}function vg(a){a.unrender()}function ed(a){a.cancel()}function wg(a){a.detach()}function xg(a){a.detachNodes()}function db(a){!a.ready||
a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"===typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function fd(){for(var a,b,c;M.ractives.length;)b=M.ractives.pop(),(c=b.viewmodel.applyChanges())&&yg.fire(b,c);var e;for(b=wa.length;b--;)if(c=wa[b],c.keypath)wa.splice(b,1);else if(e=eb(c.root,c.ref,c.parentFragment))(a||(a=[])).push({item:c,keypath:e}),
wa.splice(b,1);a&&a.forEach(zg);for(a=0;a<M.views.length;a+=1)M.views[a].update();for(a=M.views.length=0;a<M.tasks.length;a+=1)M.tasks[a]();M.tasks.length=0;if(M.ractives.length)return fd()}function zg(a){a.item.resolve(a.keypath)}function Bb(a,b,c,e){var k,d;b&&(b=K(ba(b)));null!==b&&(d=a.viewmodel.get(b));Cb.abort(b,a);if(n(d,c))return e.complete&&e.complete(e.to),Ag;e.easing&&(k="function"===typeof e.easing?e.easing:a.easing[e.easing],"function"!==typeof k&&(k=null));b=new Bg({keypath:b,from:d,
to:c,root:a,duration:void 0===e.duration?400:e.duration,easing:k,interpolator:e.interpolator,step:e.step,complete:e.complete});Cb.add(b);a._animations.push(b);return b}function gd(a){var b;if((b=a.parentFragment)||a.component&&(b=a.component.parentFragment))return b.owner}function hd(a){var b;b=[a];for(a=gd(a);a;)b.push(a),a=gd(a);return b}function id(a,b,c,e,k){k=void 0===k?!1:k;var d,f,h=!0;fb.enqueue(a,c);for(f=b.length;0<=f;f--)if(d=a._subs[b[f]]){var g=a,n=c,l=e,m=null,p=!1;n&&!n._noArg&&(l=
[n].concat(l));d=d.slice();for(var q=0,r=d.length;q<r;q+=1)!1===d[q].apply(g,l)&&(p=!0);n&&!n._noArg&&p&&(m=n.original)&&(m.preventDefault&&m.preventDefault(),m.stopPropagation&&m.stopPropagation());h=!p&&h}fb.dequeue(a);a.parent&&h&&(k&&a.component&&(b=K(a.component.name+"."+b[b.length-1]).wildcardMatches(),c&&(c.component=a)),id(a.parent,b,c,e))}function jd(a){Cg.fire(a);a.findAllComponents("*").forEach(function(a){jd(a.instance)})}function Dg(a,b,c){switch(b){case "splice":for(void 0!==c[0]&&0>
c[0]&&(c[0]=a.length+Math.max(c[0],-a.length));2>c.length;)c.push(0);c[1]=Math.min(c[1],a.length-c[0]);return c;case "sort":case "reverse":return null;case "pop":return a.length?[a.length-1,1]:[0,0];case "push":return[a.length,0].concat(c);case "shift":return[0,a.length?1:0];case "unshift":return[0,0].concat(c)}}function Eg(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Fg(a){return a.str}function kd(a,b){b&&b.constructor!==Object&&"function"!==typeof b&&("object"!==typeof b?
t("data option must be an object or a function, `"+b+"` is not valid"):J("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"));var c="function"===typeof a,e="function"===typeof b;b||c||(b={});return c||e?function(){var k=e?ld(b,this):b,d=c?ld(a,this):a;return md(k,d)}:md(b,a)}function ld(a,b){var c=a.call(b);if(c)return"object"!==typeof c&&t("Data function must return an object"),c.constructor!==Object&&P("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),
c}function md(a,b){if(a&&b){for(var c in b)c in a||(a[c]=b[c]);return a}return a||b}function Gg(a,b){var c,e,k;c=a.pos;if(a.matchString("\\"+b.open)){if(0===c||"\\"!==a.str[c-1])return b.open}else if(!a.matchString(b.open))return null;if(e=Hg(a)){if(!a.matchString(b.close))return null;b.open=e[0];b.close=e[1];a.sortMustacheTags();return Ig}a.allowWhitespace();a.matchString("/")&&(--a.pos,k=a.pos,nd(a)?a.pos=k:(a.pos=k-b.close.length,a.error("Attempted to close a section that wasn't open")));for(k=
0;k<b.readers.length;k+=1)if(e=b.readers[k],e=e(a,b))return b.isStatic&&(e.s=!0),a.includeLinePositions&&(e.p=a.getLinePos(c)),e;a.pos=c;return null}function od(a){var b,c,e;b=a.pos;c=Jg(a);if(null===c)return null;c=[c];return a.matchString(",")?(e=od(a),e?c.concat(e):(a.pos=b,null)):c}function Db(a){function b(a){c.push(a)}var c,e;a.allowWhitespace();e=R(a);if(null===e)return null;c=[e];a.allowWhitespace();a.matchString(",")&&(e=Db(a),null===e&&a.error("Expected a JavaScript expression"),e.forEach(b));
return c}function xa(a,b){var c,e;30===a.t&&-1===b.indexOf(a.n)&&b.unshift(a.n);if(e=a.o||a.m)if(q(e))xa(e,b);else for(c=e.length;c--;)xa(e[c],b);a.x&&xa(a.x,b);a.r&&xa(a.r,b);a.v&&xa(a.v,b)}function pd(a,b){var c;53===b?(c={t:4,n:50,f:[]},oa(qd(a),c)):(c={t:4,n:51,f:[]},oa(a,c));return c}function qd(a){return 33===a.t&&"!"===a.s?a.o:{t:33,s:"!",o:{t:34,x:a}}}function Eb(a){if(1===a.length)return a[0];var b={t:34,x:a[0]};a=Eb(a.slice(1));return{t:36,s:"&&",o:[b,{t:34,x:a}]}}function Fb(a){return a.replace(rd,
function(a,c){var e;return(e="#"!==c[0]?Gb[c]:"x"===c[1]?parseInt(c.substring(2),16):parseInt(c.substring(1),10))?String.fromCharCode(e?10===e?32:128>e?e:159>=e?sd[e-128]:55296>e?e:57343>=e?65533:65535>=e?e:65533:65533):a})}function Hb(a){return a.replace(td,"&amp;").replace(ud,"&lt;").replace(vd,"&gt;")}function ya(a){return"string"===typeof a}function ja(a,b,c,e,k){var d,f,h,g,n,l,p;for(d=1;d<a.length;d+=1)f=a[d],h=a[d-1],p=a[d-2],ya(f)&&(9===h.t||10===h.t)&&ya(p)&&za.test(p)&&Aa.test(f)&&(a[d-
2]=p.replace(za,"\n"),a[d]=f.replace(Aa,"")),(4===f.t||5===f.t)&&f.f&&ya(h)&&za.test(h)&&ya(f.f[0])&&Aa.test(f.f[0])&&(a[d-1]=h.replace(za,"\n"),f.f[0]=f.f[0].replace(Aa,"")),ya(f)&&(4===h.t||5===h.t)&&h.f&&(p=na(h.f),ya(p)&&za.test(p)&&Aa.test(f)&&(h.f[h.f.length-1]=p.replace(za,"\n"),a[d]=f.replace(Aa,"")));for(d=a.length;d--;)f=a[d],f.exclude?a.splice(d,1):b&&9===f.t&&a.splice(d,1);wd(a,e?xd:null,k?yd:null);for(d=a.length;d--;){f=a[d];if(f.f){k=7===f.t&&Kg.test(f.e);e=c||k;!c&&k&&wd(f.f,Lg,Mg);
if(!e){k=a[d-1];h=a[d+1];if(!k||"string"===typeof k&&yd.test(k))g=!0;if(!h||"string"===typeof h&&xd.test(h))n=!0}ja(f.f,b,e,g,n)}f.l&&(ja(f.l.f,b,c,g,n),a.splice(d+1,0,f.l),delete f.l);if(f.a)for(l in f.a)f.a.hasOwnProperty(l)&&"string"!==typeof f.a[l]&&ja(f.a[l],b,c,g,n);f.m&&ja(f.m,b,c,g,n);if(f.v)for(l in f.v)f.v.hasOwnProperty(l)&&(m(f.v[l].n)&&ja(f.v[l].n,b,c,g,n),m(f.v[l].d)&&ja(f.v[l].d,b,c,g,n))}for(d=a.length;d--;)"string"===typeof a[d]&&("string"===typeof a[d+1]&&(a[d]+=a[d+1],a.splice(d+
1,1)),c||(a[d]=a[d].replace(Ng," ")),""===a[d]&&a.splice(d,1))}function zd(a){var b,c,e,k;b=a.pos;c=a.matchPattern(Og);if(!c)return null;e=c;k=a.tags.map(function(a){return a.open});-1!==(e=Ib(e,k))&&(c=c.substr(0,e),a.pos=b+c.length);return c}function Ad(a,b){var c,e,k;c=a.pos;if(!a.matchString(b))return null;a.inAttribute=b;e=[];for(k=Ba(a)||Bd(a,b);null!==k;)e.push(k),k=Ba(a)||Bd(a,b);if(!a.matchString(b))return a.pos=c,null;a.inAttribute=!1;return e}function Bd(a,b){var c,e;e=a.remaining();c=
a.tags.map(function(a){return a.open});c.push(b);c=Ib(e,c);-1===c&&a.error("Quoted attribute value must have a closing quote");if(!c)return null;a.pos+=c;return e.substr(0,c)}function Pg(a){var b;a.allowWhitespace();b=Cd(a);if(!b)return null;b={key:b};a.allowWhitespace();if(!a.matchString(":"))return null;a.allowWhitespace();a=a.read();if(!a)return null;b.value=a.v;return b}function Qg(a,b){var c,e;c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b);e=Dd[a];return c&&e?!~e.indexOf(c[1].toLowerCase()):!0}function Ed(a,
b){if(!gb)throw Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return gb(a,b||this.options)}function Fd(a){return a&&"#"===a[0]}function Gd(a,b){var c=Rg(X.getParseOptions(a));return b.call(a,c)}function Rg(a){var b=O(X);b.parse=function(b,e){return X.parse(b,e||a)};return b}function hb(a,b){if("string"===typeof a)"#"===a[0]&&(a=X.fromId(a)),a=gb(a,X.getParseOptions(b));else{if(void 0==a)throw Error("The template cannot be "+a+".");
if("number"!==typeof a.v)throw Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(3!==a.v)throw Error("Mismatched template version (expected 3, got "+a.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");}return a}function Hd(a,b,c){if(b)for(var e in b)if(c||!a.hasOwnProperty(e))a[e]=b[e]}function Sg(a,b){var c,e;b in a?(c=
a[b],e="function"===typeof c?c:function(){return c}):e=S;return e}function Id(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function Ma(a,b,c){if(b in a){if(c in a)throw Error(Id(b,c,!0));J(Id(b,c));a[c]=a[b]}}function Jd(a,b,c,e){Tg(e);for(var k in e)if(Kd.hasOwnProperty(k)){var d=e[k];"el"!==k&&"function"===typeof d?J(""+k+" is a Ractive option that does not expect a function and will be ignored",
"init"===a?c:null):c[k]=d}Na.forEach(function(k){k[a](b,c,e)});Ld[a](b,c,e);Jb[a](b,c,e);Md[a](b,c,e);Ug(b.prototype,c,e)}function Ug(a,b,c){for(var e in c)if(!Nd[e]&&c.hasOwnProperty(e)){var k=c[e];"function"===typeof k&&(k=Vg(a,e,k));b[e]=k}}function Od(a){var b={};a.forEach(function(a){return b[a]=!0});return b}function Kb(a,b,c,e){e=e||0;return a.map(function(a){var d,f;if(a.text)return a.text;if(a.fragments)return a.fragments.map(function(a){return Kb(a.items,b,c,e)}).join("");d=c+"-"+e++;a=
a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue();b[d]=a;return"${"+d+"}"}).join("")}function Lb(a,b){for(var c,e=0;e<b.prop.length;e++)if(void 0!==(c=a[b.prop[e]]))return c}function Ca(a,b){var c={},e,k,d,f,h,g=!1;b||(c.refs=e={});for(;a;){if((h=a.owner)&&(k=h.indexRefs)){if(b&&(d=h.getIndexRef(b)))return c.ref={fragment:a,ref:d},c;if(!b)for(f in k)d=k[f],e[d.n]||(g=!0,e[d.n]={fragment:a,ref:d})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?
(c.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}if(g)return c}function Wg(a){return a.call()}function Xg(a,b){return a.replace(/_([0-9]+)/g,function(a,e){var k;if(+e>=b.length)return"_"+e;k=b[e];return void 0===k?"undefined":k.isSpecial?(k=k.value,"number"===typeof k?k:'"'+k+'"'):k.str})}function Yg(a){return void 0!==a&&"@"!==a[0]}function Zg(a,b){var c,e,k;if(a.__ractive_nowrap)return a;e="__ractive_"+b._guid;if(c=a[e])return c;if(/this/.test(a.toString())){da(a,e,{value:$g.call(a,
b),configurable:!0});for(k in a)a.hasOwnProperty(k)&&(a[e][k]=a[k]);b._boundFunctions.push({fn:a,prop:e});return a[e]}da(a,"__ractive_nowrap",{value:a});return a.__ractive_nowrap}function ah(a){return a.value}function bh(a){return void 0!=a}function ch(a){a.forceResolution()}function dh(a){a.rebind("","")}function Oa(a,b,c){if(52===b&&a.indexRefs&&a.indexRefs[0]){var e=a.indexRefs[0];(c&&"i"===e.t||!c&&"k"===e.t)&&!c&&(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}));
e.t=c?"k":"i"}a.currentSubtype=b}function eh(a,b){var c={template:a.template.f||[],root:a.root,pElement:a.parentFragment.pElement,owner:a};a.hasContext=!0;if(a.subtype)switch(a.subtype){case 50:return a.hasContext=!1,Mb(a,b,!1,c);case 51:return a.hasContext=!1,Mb(a,b,!0,c);case 53:return Nb(a,c);case 54:return c=b?Nb(a,c):Pd(a),c;case 52:if(q(b))return Oa(a,a.subtype,!0),Qd(a,b,c)}a.ordered=!!Ob.test(La.call(b));if(a.ordered){Oa(a,52,!1);var e,k,d;k=b.length;if(k===a.length)c=!1;else{if(k<a.length)a.fragmentsToUnrender=
a.fragments.splice(k,a.length-k),a.fragmentsToUnrender.forEach(ca);else if(k>a.length)for(e=a.length;e<k;e+=1)c.context=a.keypath.join(e),c.index=e,d=new Q(c),a.fragmentsToRender.push(a.fragments[e]=d);a.length=k;c=!0}return c}if(q(b)||"function"===typeof b){if(a.template.i)return Oa(a,52,!0),Qd(a,b,c);Oa(a,53,!1);return Nb(a,c)}Oa(a,50,!1);a.hasContext=!1;return Mb(a,b,!1,c)}function Qd(a,b,c){var e,k,d,f,h,g;d=a.hasKey||(a.hasKey={});for(k=a.fragments.length;k--;)f=a.fragments[k],f.key in b||(h=
!0,f.unbind(),a.fragmentsToUnrender.push(f),a.fragments.splice(k,1),d[f.key]=!1);for(k=a.fragments.length;k--;)f=a.fragments[k],f.index!==k&&(f.index=k,(g=f.registeredIndexRefs)&&g.forEach(fh));k=a.fragments.length;for(e in b)d[e]||(h=!0,c.context=a.keypath.join(e),c.key=e,c.index=k++,f=new Q(c),a.fragmentsToRender.push(f),a.fragments.push(f),d[e]=!0);a.length=a.fragments.length;return h}function Nb(a,b){var c;if(!a.length)return b.context=a.keypath,b.index=0,c=new Q(b),a.fragmentsToRender.push(a.fragments[0]=
c),a.length=1,!0}function Mb(a,b,c,e){var k,d,f;k=Ob.test(La.call(b))&&0===b.length;d=!1;if(!Ob.test(La.call(b))&&q(b))for(f in d=!0,b){d=!1;break}if(c?k||d||!b:b&&!k&&!d){if(!a.length)return e.index=0,b=new Q(e),a.fragmentsToRender.push(a.fragments[0]=b),a.length=1,!0;if(1<a.length)return a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(ca),!0}else return Pd(a)}function Pd(a){if(a.length)return a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(gh),a.fragmentsToUnrender.forEach(ca),
a.length=a.fragmentsToRender.length=0,!0}function gh(a){return a.rendered}function fh(a){a.rebind("","")}function hh(a){a.unrender(!0)}function ih(a){a.unrender(!1)}function Pb(a){return Rd[a]||(Rd[a]=ka(a))}function jh(a){return a.selected}function kh(a,b){var c=b?"svg":"div";Qb.innerHTML="<"+c+" "+a+"></"+c+">";return zb(Qb.childNodes[0].attributes)}function Sd(){var a;N.call(this);a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath);this.value=void 0==a?"":a}function lh(){var a=this._ractive.binding,
b=this;a._timeout&&clearTimeout(a._timeout);a._timeout=setTimeout(function(){a.rendered&&N.call(b);a._timeout=void 0},a.element.lazy)}function mh(a){return a.isChecked}function nh(a){return a.element.getAttribute("value")}function pa(a){return a&&a.isBindable}function oh(a){var b,c;b=this.root;if("function"!==typeof b[this.method])throw Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var k,d,f;if(void 0!==c){if(c.eventObject){if(k=a,d=c.refinements.length)for(f=
0;f<d;f+=1)k=k[c.refinements[f]]}else k=b.viewmodel.get(c);return k}});fb.enqueue(b,a);c=this.fn.apply(null,c);b[this.method].apply(b,c);fb.dequeue(b)}function ph(a){Pa(this.root,this.getAction(),{event:a,args:this.params})}function qh(a){var b=this.dynamicParams.getArgsList();"string"===typeof b&&(b=b.substr(1,b.length-2));Pa(this.root,this.getAction(),{event:a,args:b})}function rh(a){Rb[a]||(Rb[a]=function(b){var c=b.node._ractive;b.index=c.index;b.keypath=c.keypath.str;b.context=c.root.viewmodel.get(c.keypath);
c.events[a].fire(b)});return Rb[a]}function sh(){var a=this;this.dirty||(this.dirty=!0,w.scheduleTask(function(){th(a);a.dirty=!1}));this.parentFragment.bubble()}function th(a){var b,c,e,k;if(b=a.node)b=zb(b.options),c=a.getAttribute("value"),e=a.getAttribute("multiple"),void 0!==c?(b.forEach(function(a){var b;b=a._ractive?a._ractive.value:a.value;if(e)a:{for(var d=c.length;d--;)if(c[d]==b){b=!0;break a}b=void 0}else b=c==b;b&&(k=!0);a.selected=b}),k||(b[0]&&(b[0].selected=!0),a.binding&&a.binding.forceUpdate())):
a.binding&&a.binding.forceUpdate()}function uh(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),e=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c);void 0!==e&&a.node.setAttribute("height",e);a.node.removeEventListener("load",b,!1)},!1)}function Td(){var a=this._ractive.proxy;w.start();a.formBindings.forEach(vh);w.end()}function vh(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Ud(a){return a}
function Vd(){Da.hidden=document[Qa]}function Sb(){Da.hidden=!0}function Tb(){Da.hidden=!1}function wh(a){var b,c;return(b=a.getAttribute("xmlns"))?b:"svg"===a.name?Z.svg:(c=a.parent)?"foreignObject"===c.name?Z.html:c.node.namespaceURI:a.root.el.namespaceURI}function xh(a){var b,c,e;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&m(c))for(e=c.length;e--;){if(b==c[e]){a.node.selected=!0;break}}else a.node.selected=b==c}function yh(a){var b,
c,e,k;b=a.root;do for(c=b._liveQueries,e=c.length;e--;)k=c[e],k=c["_"+k],k._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(k);while(b=b.parent)}function Wd(a){return(a=a.toString())?" "+a:""}function zh(a){var b,c;for(c=a.liveQueries.length;c--;)b=a.liveQueries[c],b._remove(a.node)}function Ah(a,b){var c=Bh.exec(b)[0];return null===a||c.length<a.length?c:a}function Xd(a,b){if(a)return a.partials.hasOwnProperty(b)?a:Xd(a._Parent,b)}function Yd(a,b){if(b){if(b.template&&b.template.p&&b.template.p[a])return b.template.p[a];
if(b.parentFragment&&b.parentFragment.owner)return Yd(a,b.parentFragment.owner)}}function Zd(a,b){var c,e=la("components",a,b);if(e&&(c=e.components[b],!c._Parent)){var k=c.bind(e);k.isOwner=e.components.hasOwnProperty(b);c=k();if(!c){J('A function was specified for "%s" %s, but no %s was returned',b,"component","component",{ractive:a});return}"string"===typeof c&&(c=Zd(a,c));c._fn=k;e.components[b]=c}return c}function Ch(a,b,c){function e(a){var c,e;a.value=b;a.updating||(e=a.ractive,c=a.keypath,
a.updating=!0,w.start(e),e.viewmodel.mark(c),w.end(),a.updating=!1)}var k,d,f,h,g;k=a.obj;d=a.prop;if(c&&!c.configurable){if("length"===d)return;throw Error('Cannot use magic mode with property "'+d+'" - object is not configurable');}c&&(f=c.get,h=c.set);g=function(a){h&&h(a);b=f?f():a;g._ractiveWrappers.forEach(e)};g._ractiveWrappers=[a];Object.defineProperty(k,d,{get:f||function(){return b},set:g,enumerable:!0,configurable:!0})}function Dh(a){var b;Ub[a]||(b=a?a+".":"",Ub[a]=function(c,e){var k;
if("string"===typeof c)return k={},k[b+c]=e,k;if("object"===typeof c){if(b){k=a;var d={},f;if(k){k+=".";for(f in c)c.hasOwnProperty(f)&&(d[k+f]=c[f]);k=d}else k=c}else k=c;return k}});return Ub[a]}function $d(a,b,c){var e,k;b=b.str||b;(b=(e=a.depsMap.patternObservers)&&e[b])&&b.forEach(function(b){k=c.join(b.lastKey);ae(a,k);$d(a,b,k)})}function ae(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function be(a,b,c,e){var k;if(e=ce(a,c,e))k=a.get(c),e.forEach(function(a){b&&
a.refineValue?b.push(a):a.setValue(k)})}function Eh(a,b,c){b.forEach(function(b){for(var k=!1,d=0,f=c.length,h=[];d<f;){var g=c[d];if(g===b.keypath){k=!0;break}g.slice(0,b.keypath.length)===b.keypath&&h.push(g);d++}k&&b.setValue(a.get(b.keypath));h.length&&b.refineValue(h)})}function de(a,b,c){function e(a){a.forEach(k);a.forEach(d)}function k(b){var e=ce(a,b,c);e&&f.push({keypath:b,deps:e})}function d(b){var k;(k=a.depsMap[c][b.str])&&e(k)}var f=[];e(b);f.forEach(function(b){var c=a.get(b.keypath);
b.deps.forEach(function(a){return a.setValue(c)})})}function ce(a,b,c){return(a=a.deps[c])?a[b.str]:null}function Fh(a){return JSON.stringify(a)}function Gh(a){if(!0===a)return Fh;if("string"===typeof a)return Vb[a]||(Vb[a]=function(b){return b[a]}),Vb[a];if("function"===typeof a)return a;throw Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");}function Hh(a,b,c){var e,k,d,f;d=function(){e.set?e.set(b.lastKey,c):(k=e.get(),
f())};f=function(){k||(k=ee.test(b.lastKey)?[]:{},a.set(b.parent,k,{silent:!0}));k[b.lastKey]=c};(e=a.wrapped[b.parent.str])?d():(k=a.get(b.parent),(e=a.wrapped[b.parent.str])?d():f())}function Ih(a){return"function"===typeof a.shuffle}function Wb(a){this.hook=new U(a);this.inProcess={};this.queue={}}function fe(a,b){return a[b._guid]||(a[b._guid]=[])}function ge(a,b){var c=fe(a.queue,b);for(a.hook.fire(b);c.length;)ge(a,c.shift());delete a.queue[b._guid]}function he(a,b){var c,e;c="return ("+b.replace(Jh,
function(a,b){e=!0;return'__ractive.get("'+b+'")'})+");";e&&(c="var __ractive = this; "+c);c=new Function(c);return e?c.bind(a):c}function Xb(a,b){return/this/.test(a.toString())?a.bind(b):a}function Kh(a,b,c){function e(b){"string"===typeof b&&((b=aa("adaptors",a,b))||t(Ea(b,"adaptor")));return b}var k;b=b.map(e);k=$c(c.adapt).map(e);k=Lh(b,k);b="magic"in c?c.magic:a.magic;c="modifyArrays"in c?c.modifyArrays:a.modifyArrays;if(b){if(!ib)throw Error("Getters and setters (magic mode) are not supported in this browser");
c&&k.push(Mh);k.push(jb)}c&&k.push(Yb);return k}function Lh(a,b){for(var c=a.slice(),e=b.length;e--;)~c.indexOf(b[e])||c.push(b[e]);return c}function Nh(a,b){a._guid="r-"+Oh++;a._subs=O(null);a._config={};a._twowayBindings=O(null);a._animations=[];a.nodes={};a._liveQueries=[];a._liveComponentQueries=[];a._boundFunctions=[];a._observers=[];b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):
(a.root=a,a.parent=a.container=null)}function Ph(){throw Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead");}function ie(a,b,c){this.parentFragment=a.parentFragment;this.callback=c;this.fragment=new Q({template:b,root:a.root,owner:this});this.update()}function Qh(a,b,c){var e;b.r?e=Ra(a,b.r,c):b.x?e=new Zb(a,a.parentFragment,b.x,c):b.rx&&(e=new je(a,b.rx,c));return e}function Rh(a,b,c,e){"string"!==typeof e&&t("Components currently only support simple events - you cannot include arguments. Sorry!");
a.on(c,function(){var a,c;arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments));c=Array.prototype.slice.call(arguments);Pa(b,e,{event:a,args:c});return!1})}function Sh(a){if("string"===typeof a.template)return new Th(a);switch(a.template.t){case 16:return new Uh(a);case 2:return new Vh(a);case 4:return new Wh(a);case 3:return new Xh(a);case 7:var b=void 0;return(b=Yh(a.parentFragment.root,a.template.e))?new Zh(a,b):new $h(a);case 8:return new ai(a);case 9:return new bi(a);
case 18:return new ci(a);default:throw Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!");}}function di(a){return a.toString()}function ei(a){return a.toString(!0)}function fi(a){a.unbind&&a.unbind()}function ke(a,b,c){b=K(ba(b));b.isPattern?cb(a,b).forEach(function(b){a.viewmodel.set(b,c)}):a.viewmodel.set(b,c)}function gi(a){delete a.fn[a.prop]}function hi(a,b){var c={},e=[];b.forEach(function(a){var b,d;if(!a.radioName||a.element.node.checked)a.checkboxName?
e[a.keypath.str]||a.changed()||(e.push(a.keypath),e[a.keypath.str]=a):(b=a.attribute.value,d=a.getValue(),yb(b,d)||n(b,d)||(c[a.keypath.str]=d))});e.length&&e.forEach(function(a){var b,d;b=e[a.str];d=b.attribute.value;b=b.getValue();yb(d,b)||(c[a.str]=b)});return c}function ii(a,b){Na.forEach(function(c){ji(c.useDefaults?a.prototype:a,b,c.name)})}function ji(a,b,c){var e,k=Object.keys(a[c]);k.length&&((e=b[c])||(e=b[c]={}),k.filter(function(a){return!(a in e)}).forEach(function(b){return e[b]=a[c][b]}))}
function ki(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var e=a.prototype[c];if(!(c in b))b[c]=e._method?e._method:e;else if("function"===typeof b[c]&&"function"===typeof e&&b[c]._method){var k=void 0,d=e._method;d&&(e=e._method);k=li(b[c]._method,e);d&&(k._method=k);b[c]=k}}})}function le(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.length?b.reduce(me,this):me(this)}function me(a,b){var c=void 0===b?{}:b,e,k;c.prototype instanceof ma&&(c=
mi(c));e=function(a){if(!(this instanceof e))return new e(a);$b(this,a)};k=O(a.prototype);k.constructor=e;Fa(e,{defaults:{value:k},extend:{value:le,writable:!0,configurable:!0},_Parent:{value:a}});ac.extend(a,k,c);bc.extend(a,k,c);c.computed&&(k.computed=h(O(a.prototype.computed),c.computed));e.prototype=k;return e}var ne={el:void 0,append:!1,template:{v:3,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},
magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ea,oe,pe,ib,Z,cc,fa;ea="object"===typeof document;oe="undefined"!==typeof navigator&&/jsDom/.test(navigator.appName);pe="undefined"!==typeof console&&"function"===typeof console.warn&&"function"===typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),ib=!0}catch(a){ib=!1}Z={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",
svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};cc="undefined"===typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");fa=["o","ms","moz","webkit"];var ka,ga,Ga,dc,Sa,ec,kb,qe,fc;ka=cc?function(a,b){return b&&b!==Z.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==Z.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";
return document.createElement(a)};if(ea){Ga=ka("div");dc=["matches","matchesSelector"];fc=function(a){return function(b,c){return b[a](c)}};for(kb=dc.length;kb--&&!ga;)if(Sa=dc[kb],Ga[Sa])ga=fc(Sa);else for(qe=fa.length;qe--;)if(ec=fa[kb]+Sa.substr(0,1).toUpperCase()+Sa.substring(1),Ga[ec]){ga=fc(ec);break}ga||(ga=function(a,b){var c,e;c=a.parentNode;c||(Ga.innerHTML="",c=Ga,a=a.cloneNode(),Ga.appendChild(a));c=c.querySelectorAll(b);for(e=c.length;e--;)if(c[e]===a)return!0;return!1})}else ga=null;
var O,da,Fa;try{Object.defineProperty({},"test",{value:0}),ea&&Object.defineProperty(document.createElement("div"),"test",{value:0}),da=Object.defineProperty}catch(a){da=function(a,c,e){a[c]=e.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(a){throw a;}ea&&Object.defineProperties(ka("div"),{test:{value:0}});Fa=Object.defineProperties}catch(a){Fa=function(a,c){for(var e in c)c.hasOwnProperty(e)&&da(a,e,c[e])}}try{Object.create(null),O=Object.create}catch(a){O=function(){var a=function(){};
return function(c,e){var k;if(null===c)return{};a.prototype=c;k=new a;e&&Object.defineProperties(k,e);return k}}()}var ra=Object.prototype.hasOwnProperty,La=Object.prototype.toString,Ob=/^\[object (?:Array|FileList)\]$/,S=function(){},Vc={},vb,ab,Ta;pe?function(){var a=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];
Ta=function(){var b=!!console.groupCollapsed;console[b?"groupCollapsed":"log"].apply(console,a);console.log("You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n");
b&&console.groupEnd(a);Ta=S};ab=function(a,c){Ta();if("object"===typeof c[c.length-1]){var e=c.pop(),k=e?e.ractive:null;if(k){var d=void 0;k.component&&(d=k.component.name)&&(a="<"+d+"> "+a);d=void 0;(d=e.node||k.fragment&&k.fragment.rendered&&k.find("*"))&&c.push(d)}}console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(c))};vb=function(){console.log.apply(console,arguments)}}():ab=vb=Ta=S;var Ea=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+
b+"s"},mb=function(a,b,c,e){if(a===b)return wb(b);if(e){if(c=aa("interpolators",c,e))return c(a,b)||wb(b);t(Ea(e,"interpolator"))}return lb.number(a,b)||lb.array(a,b)||lb.object(a,b)||wb(b)},lb={number:function(a,b){var c;if(!p(a)||!p(b))return null;a=+a;return(c=+b-a)?function(b){return a+b*c}:function(){return a}},array:function(a,b){var c,e,k,d;if(!m(a)||!m(b))return null;c=[];e=[];for(d=k=Math.min(a.length,b.length);d--;)e[d]=mb(a[d],b[d]);for(d=k;d<a.length;d+=1)c[d]=a[d];for(d=k;d<b.length;d+=
1)c[d]=b[d];return function(a){for(var b=k;b--;)c[b]=e[b](a);return c}},object:function(a,b){var c,e,k,d,f;if(!q(a)||!q(b))return null;c=[];d={};k={};for(f in a)ra.call(a,f)&&(ra.call(b,f)?(c.push(f),k[f]=mb(a[f],b[f])):d[f]=a[f]);for(f in b)ra.call(b,f)&&!ra.call(a,f)&&(d[f]=b[f]);e=c.length;return function(a){for(var b=e,f;b--;)f=c[b],d[f]=k[f](a);return d}}},ni=function(a){var b,c,e,k,d;b=a.split(".");(a=bb[b.length])||(a=pg(b.length));k=[];c=function(a,c){return a?"*":b[c]};for(e=a.length;e--;)d=
a[e].map(c).join("."),k.hasOwnProperty(d)||(k.push(d),k[d]=!0);return k},bb={},rg=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,oi=/\*/,xb={},Xc=function(a){var b=a.split(".");this.str=a;if("@"===a[0]){this.isSpecial=!0;var c;c=a.slice(2);c="i"===a[1]?p(c)?+c:c:c;this.value=c}this.firstKey=b[0];this.lastKey=b.pop();this.isPattern=oi.test(a);this.parent=""===a?null:K(b.join("."));this.isRoot=!a};Xc.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return K(this.isRoot?
String(a):this.str+"."+a)},replace:function(a,b){if(this===a)return b;if(this.startsWith(a))return null===b?b:K(this.str.replace(a.str+".",b.str+"."))},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw Error("Bad coercion");},valueOf:function(){throw Error("Bad coercion");},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=ni(this.str))}};var sa=K(""),se=function(a,b,c){if("string"!==typeof b||!p(c))throw Error("Bad arguments");
var e=void 0,k=void 0;if(/\*/.test(b))return k={},cb(a,K(ba(b))).forEach(function(b){var e=a.viewmodel.get(b);if(!p(e))throw Error(re);k[b.str]=e+c}),a.set(k);e=a.get(b);if(!p(e))throw Error(re);return a.set(b,+e+c)},re="Cannot add to a non-numeric value",gc;"undefined"===typeof window?gc=null:(function(a,b,c){var e,k;if(!c.requestAnimationFrame){for(e=0;e<a.length&&!c.requestAnimationFrame;++e)c.requestAnimationFrame=c[a[e]+"RequestAnimationFrame"];c.requestAnimationFrame||(k=c.setTimeout,c.requestAnimationFrame=
function(a){var c,e,d;c=Date.now();e=Math.max(0,16-(c-b));d=k(function(){a(c+e)},e);b=c+e;return d})}}(fa,0,window),gc=window.requestAnimationFrame);var te=gc,ue="undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},sg={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},
complete:{deprecated:"complete",replacement:"oncomplete"}};Yc.prototype.fire=function(a,b){function c(c){if(a[c])return b?a[c](b):a[c](),!0}c(this.method);!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?J(this.deprecate.message):J('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));b?a.fire(this.event,
b):a.fire(this.event)};var U=Yc,Y,hc={},ve={},pi={};"function"===typeof Promise?Y=Promise:(Y=function(a){var b=[],c=[],e=hc,k,d,f,h;f=function(a){return function(f){e===hc&&(k=f,e=a,d=tg(e===ve?b:c,k),setTimeout(d,0))}};h=f(ve);f=f(pi);try{a(h,f)}catch(g){f(g)}return{then:function(a,k){var f=new Y(function(h,g){var n=function(a,b,c){"function"===typeof a?b.push(function(b){var c;try{c=a(b),ad(f,c,h,g)}catch(e){g(e)}}):b.push(c)};n(a,b,h);n(k,c,g);e!==hc&&setTimeout(d,0)});return f},"catch":function(a){return this.then(null,
a)}}},Y.all=function(a){return new Y(function(b,c){var e=[],k,d,f;if(a.length)for(f=function(a,d){a&&"function"===typeof a.then?a.then(function(a){e[d]=a;--k||b(e)},c):(e[d]=a,--k||b(e))},k=d=a.length;d--;)f(a[d],d);else b(e)})},Y.resolve=function(a){return new Y(function(b){b(a)})},Y.reject=function(a){return new Y(function(b,c){c(a)})});var ta=Y,we=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return sa},eb=function(a,b,c){b=ba(b);"~/"===b.substr(0,2)?(b=K(b.substring(2)),
cd(a,b.firstKey,c)):"."===b[0]?(b=ug(we(c),b))&&cd(a,b.firstKey,c):b=Ab(a,K(b),c);return b},xe=function(a,b){this.callback=a;this.parent=b;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.decoratorQueue=[];this.outrosComplete=!1;b&&b.addChild(this)};xe.prototype={addChild:function(a){this.children.push(a);this.totalChildren+=1;this.outroChildren+=1},decrementOutros:function(){--this.outroChildren;db(this)},decrementTotal:function(){--this.totalChildren;
db(this)},add:function(a){(a.isIntro?this.intros:this.outros).push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){T(a.isIntro?this.intros:this.outros,a);db(this)},init:function(){this.ready=!0;db(this)},detachNodes:function(){this.decoratorQueue.forEach(dd);this.detachQueue.forEach(wg);this.children.forEach(xg)}};var M,wa=[],yg=new U("change"),w={start:function(a,b){var c,e;b&&(c=new ta(function(a){return e=a}));M={previousBatch:M,transitionManager:new xe(e,M&&M.transitionManager),
views:[],tasks:[],ractives:[],instance:a};a&&M.ractives.push(a);return c},end:function(){fd();M.transitionManager.init();!M.previousBatch&&M.instance&&(M.instance.viewmodel.changes=[]);M=M.previousBatch},addRactive:function(a){if(M){var b=M.ractives;-1===b.indexOf(a)&&b.push(a)}},registerTransition:function(a){a._manager=M.transitionManager;M.transitionManager.add(a)},registerDecorator:function(a){M.transitionManager.addDecorator(a)},addView:function(a){M.views.push(a)},addUnresolved:function(a){wa.push(a)},
removeUnresolved:function(a){T(wa,a)},detachWhenReady:function(a){M.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(M){for(c=M;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}},ua=[],Ha={tick:function(){var a,b,c;c=ue();w.start();for(a=0;a<ua.length;a+=1)b=ua[a],b.tick(c)||ua.splice(a--,1);w.end();ua.length?te(Ha.tick):Ha.running=!1},add:function(a){ua.push(a);Ha.running||(Ha.running=!0,te(Ha.tick))},abort:function(a,b){for(var c=ua.length,e;c--;)e=ua[c],
e.root===b&&e.keypath===a&&e.stop()}},Cb=Ha,ye=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=mb(this.from,this.to,this.root,this.interpolator);this.running=!0;this.tick()};ye.prototype={tick:function(){var a,b,c;c=this.keypath;if(this.running){a=Date.now();a-=this.startTime;if(a>=this.duration)return null!==c&&(w.start(this.root),this.root.viewmodel.set(c,this.to),w.end()),this.step&&this.step(1,this.to),this.complete(this.to),b=this.root._animations.indexOf(this),
-1===b&&J("Animation was not found"),this.root._animations.splice(b,1),this.running=!1;a=this.easing?this.easing(a/this.duration):a/this.duration;null!==c&&(b=this.interpolator(a),w.start(this.root),this.root.viewmodel.set(c,b),w.end());this.step&&this.step(a,b);return!0}return!1},stop:function(){var a;this.running=!1;a=this.root._animations.indexOf(this);-1===a&&J("Animation was not found");this.root._animations.splice(a,1)}};var Bg=ye,Ag={stop:S},qi=new U("detach"),ri=function(a,b){if(this._isComponentQuery?
!this.selector||a.name===this.selector:a.node&&ga(a.node,this.selector))return this.push(a.node||a.instance),b||this._makeDirty(),!0},si=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];b=this.selector;c=a.indexOf(b);-1!==c&&(a.splice(c,1),a[b]=null)},ze=function(a,b){var c,e,k,d,f,h,g;c=hd(a.component||a._ractive.proxy);e=hd(b.component||b._ractive.proxy);k=na(c);for(d=na(e);k&&k===d;)c.pop(),e.pop(),f=k,k=na(c),d=na(e);k=k.component||k;d=d.component||
d;h=k.parentFragment;g=d.parentFragment;if(h===g)return h=h.items.indexOf(k),g=g.items.indexOf(d),h-g||c.length-e.length;if(d=f.fragments)return h=d.indexOf(h),g=d.indexOf(g),h-g||c.length-e.length;throw Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!");},ti=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),c&2?1:-1):ze(a,b)},ui=function(){this.sort(this._isComponentQuery?
ze:ti);this._dirty=!1},vi=function(){var a=this;this._dirty||(this._dirty=!0,w.scheduleTask(function(){a._sort()}))},wi=function(a){a=this.indexOf(this._isComponentQuery?a.instance:a);-1!==a&&this.splice(a,1)},Ae=function(a,b,c,e){var k=[];Fa(k,{selector:{value:b},live:{value:c},_isComponentQuery:{value:e},_test:{value:ri}});if(!c)return k;Fa(k,{cancel:{value:si},_root:{value:a},_sort:{value:ui},_makeDirty:{value:vi},_remove:{value:wi},_dirty:{value:!1,writable:!0}});return k},fb={enqueue:function(a,
b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event));a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Pa=function(a,b,c){c=void 0===c?{}:c;b&&(c.event?c.event.name=b:c.event={name:b,_noArg:!0},b=K(b).wildcardMatches(),id(a,b,c.event,c.args,!0))},xi={capture:!0,noUnwrap:!0,fullRootGet:!0},Cg=new U("insert"),Be=function(a,b,c,e){this.root=a;this.keypath=b;this.callback=c;this.defer=e.defer;this.context=e&&e.context?
e.context:a};Be.prototype={init:function(a){this.value=this.root.get(this.keypath.str);!1!==a?this.update():this.oldValue=this.value},setValue:function(a){var b=this;n(a,this.value)||(this.value=a,this.defer&&this.ready?w.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Ce=function(a,b){var c,e;c=cb(a,b);e={};c.forEach(function(b){e[b.str]=
a.get(b.str)});return e},ic,yi=Array.prototype.slice;ic=function(a,b,c,e){this.root=a;this.callback=c;this.defer=e.defer;this.keypath=b;this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$");this.values={};this.defer&&(this.proxies=[]);this.context=e&&e.context?e.context:a};ic.prototype={init:function(a){var b,c;b=Ce(this.root,this.keypath);if(!1!==a)for(c in b)b.hasOwnProperty(c)&&this.update(K(c));else this.values=b},update:function(a){var b=this,c;if(a.isPattern)for(a in c=
Ce(this.root,a),c)c.hasOwnProperty(a)&&this.update(K(a));else this.root.viewmodel.implicitChanges[a.str]||(this.defer&&this.ready?w.scheduleTask(function(){return b.getProxy(a).update()}):this.reallyUpdate(a))},reallyUpdate:function(a){var b,c;b=a.str;a=this.root.viewmodel.get(a);this.updating?this.values[b]=a:(this.updating=!0,n(a,this.values[b])&&this.ready||(c=yi.call(this.regex.exec(b),1),c=[a,this.values[b],b].concat(c),this.values[b]=a,this.callback.apply(this.context,c)),this.updating=!1)},
getProxy:function(a){var b=this;this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}});return this.proxies[a.str]}};var jc=function(a,b,c,e){var k,d,f;b=K(ba(b));e=e||zi;b.isPattern?(k=new ic(a,b,c,e),a.viewmodel.patternObservers.push(k),d=!0):k=new Be(a,b,c,e);k.init(e.init);a.viewmodel.register(b,k,d?"patternObservers":"observers");k.ready=!0;c={cancel:function(){var c;f||(d?(c=a.viewmodel.patternObservers.indexOf(k),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,
k,"patternObservers")):a.viewmodel.unregister(b,k,"observers"),f=!0)}};a._observers.push(c);return c},zi={},De=function(a){return a.trim()},Ee=function(a){return""!==a},Fe=function(a,b,c){var e=[],k,d,f,h;b=Dg(a,b,c);if(!b)return null;c=a.length;f=b.length-2-b[1];k=Math.min(c,b[0]);d=k+b[1];for(h=0;h<k;h+=1)e.push(h);for(;h<d;h+=1)e.push(-1);for(;h<c;h+=1)e.push(h+f);e.touchedFrom=0!==f?b[0]:a.length;return e},Ai=Array.prototype,va=function(a){return function(b){for(var c=arguments.length,e=Array(1<
c?c-1:0),k=1;k<c;k++)e[k-1]=arguments[k];var k=[],d;b=K(ba(b));c=this.viewmodel.get(b);if(!m(c))throw Error("Called ractive."+a+"('"+b.str+"'), but '"+b.str+"' does not refer to an array");k=Fe(c,a,e);d=Ai[a].apply(c,e);e=w.start(this,!0).then(function(){return d});k?this.viewmodel.smartUpdate(b,c,k):this.viewmodel.mark(b);w.end();return e}},Bi=va("pop"),Ci=va("push"),kc,Ge,Ua,He,lc,mc,Ie=[],nc=!1;ea?(Ua=document.createElement("style"),Ua.type="text/css",He=document.getElementsByTagName("head")[0],
mc=!1,lc=Ua.styleSheet,Ge=function(){var a="/* Ractive.js component styles */\n"+Ie.map(function(a){return"\n/* {"+a.id+"} */\n"+a.styles}).join("\n");lc?lc.cssText=a:Ua.innerHTML=a;mc||(He.appendChild(Ua),mc=!0)},kc={add:function(a){Ie.push(a);nc=!0},apply:function(){nc&&(Ge(),nc=!1)}}):kc={add:S,apply:S};var Je=kc,Di=new U("render"),Ei=new U("complete"),Ld={extend:function(a,b,c){a=$c(c.adapt);c=b.adapt.slice();for(var e=a.length;e--;)~c.indexOf(a[e])||c.push(a[e]);b.adapt=c},init:function(){}},
Ji=function(a,b){var c,e;c='[data-ractive-css~="{'+b+'}"]';e=function(a){var b,e,d,f,h=[];for(b=[];e=Fi.exec(a);)b.push({str:e[0],base:e[1],modifiers:e[2]});a=b.map(Fg);for(f=b.length;f--;)e=a.slice(),d=b[f],e[f]=d.base+c+d.modifiers||"",d=a.slice(),d[f]=c+" "+d[f],h.push(e.join(" "),d.join(" "));return h.join(", ")};return Ke.test(a)?a.replace(Ke,c):a.replace(Gi,"").replace(Hi,function(a,b){var c;if(Ii.test(b))return a;c=b.split(",").map(Eg).map(e).join(", ")+" ";return a.replace(b,c)})},Hi=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,
Gi=/\/\*.*?\*\//g,Fi=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Ii=/^@media/,Ke=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Ki=1,Md={name:"css",extend:function(a,b,c){c.css&&(a=Ki++,c=c.noCssTransform?c.css:Ji(c.css,a),b.cssId=a,Je.add({id:a,styles:c}))},init:function(){}},bc={name:"data",extend:function(a,b,c){var e=a=void 0;if(c.data&&q(c.data))for(a in c.data)(e=c.data[a])&&"object"===typeof e&&(q(e)||m(e))&&J("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");
b.data=kd(b.data,c.data)},init:function(a,b,c){a=kd(a.prototype.data,c.data);"function"===typeof a&&(a=a.call(b));return a||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.reset(b);return!0}},qa,oc,Li=/^\s+/;oc=function(a){this.name="ParseError";this.message=a;try{throw Error(a);}catch(b){this.stack=b.stack}};oc.prototype=Error.prototype;qa=function(a,b){var c,e,k=0;this.str=a;this.options=b||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(a){return k=
a=k+a.length+1},0);this.init&&this.init(a,b);for(c=[];this.pos<this.str.length&&(e=this.read());)c.push(e);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(c,b):c};qa.prototype={read:function(a){var b,c,e,k;a||(a=this.converters);b=this.pos;e=a.length;for(c=0;c<e;c+=1)if(this.pos=b,k=a[c](this))return k;return null},getLinePos:function(a){for(var b=0,c=0;a>=this.lineEnds[b];)c=this.lineEnds[b],b+=1;return[b+1,a-c+1,a]},error:function(a){var b=this.getLinePos(this.pos),
c=b[0],e=b[1],k=0,d=this.lines[b[0]-1].replace(/\t/g,function(a,c){c<b[1]&&(k+=1);return"  "})+"\n"+Array(b[1]+k).join(" ")+"^----",c=new oc(""+a+" at line "+c+" character "+e+":\n"+d);c.line=b[0];c.character=b[1];c.shortMessage=a;throw c;},matchString:function(a){if(this.str.substr(this.pos,a.length)===a)return this.pos+=a.length,a},matchPattern:function(a){if(a=a.exec(this.remaining()))return this.pos+=a[0].length,a[1]||a[0]},allowWhitespace:function(){this.matchPattern(Li)},remaining:function(){return this.str.substring(this.pos)},
nextChar:function(){return this.str.charAt(this.pos)}};qa.extend=function(a){var b,c;b=function(a,b){qa.call(this,a,b)};b.prototype=O(this.prototype);for(c in a)ra.call(a,c)&&(b.prototype[c]=a[c]);b.extend=qa.extend;return b};var Hg=function(a){var b,c,e;if(!a.matchString("="))return null;b=a.pos;a.allowWhitespace();c=a.matchPattern(Le);if(!c)return a.pos=b,null;if(!a.matchPattern(Mi))return null;e=a.matchPattern(Le);if(!e)return a.pos=b,null;a.allowWhitespace();return a.matchString("=")?[c,e]:(a.pos=
b,null)},Le=/^[^\s=]+/,Mi=/^\s+/,nd=function(a){var b;return(b=a.matchPattern(Ni))?{t:25,v:b}:null},Ni=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Ba=function(a){var b,c;if(!1===a.interpolate[a.inside])return null;for(c=0;c<a.tags.length;c+=1)if(b=Gg(a,a.tags[c]))return b},Ig={t:10,exclude:!0},Me=function(a){var b;return(b=a.matchPattern(Oi))?{t:20,v:b}:null},Oi=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
Ne,Oe,Pe;Ne=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;Oe=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;Pe=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Qe=function(a){return function(b){var c,e,k;c='"';for(e=!1;!e;)(k=b.matchPattern(Ne)||b.matchPattern(Oe)||b.matchString(a))?c='"'===k?c+'\\"':"\\'"===k?c+"'":c+k:(k=b.matchPattern(Pe))?c+="\\u"+("000"+k.charCodeAt(1).toString(16)).slice(-4):e=!0;return JSON.parse(c+'"')}},Pi=Qe('"'),Qi=Qe("'"),pc=function(a){var b,c;b=a.pos;
return a.matchString('"')?(c=Qi(a),a.matchString('"')?{t:21,v:c}:(a.pos=b,null)):a.matchString("'")?(c=Pi(a),a.matchString("'")?{t:21,v:c}:(a.pos=b,null)):null},Re=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Cd=function(a){var b;if(b=pc(a))return Ri.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"';if(b=Me(a))return b.v;if(b=a.matchPattern(Re))return b},Ri=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Jg=function(a){var b,c,e;b=a.pos;a.allowWhitespace();c=Cd(a);if(null===c)return a.pos=b,null;a.allowWhitespace();if(!a.matchString(":"))return a.pos=
b,null;a.allowWhitespace();e=R(a);return null===e?(a.pos=b,null):{t:27,k:c,v:e}},Te=function(a){var b,c,e;b=a.pos;e=a.matchPattern(/^@(?:keypath|index|key)/);e||(c=a.matchPattern(Si)||"",e=!c&&a.relaxedNames&&a.matchPattern(Ti)||a.matchPattern(Ui),e||"."!==c||(c="",e="."));if(!e)return null;if(!c&&!a.relaxedNames&&Se.test(e))return a.pos=b,null;if(!c&&qc.test(e))return c=qc.exec(e)[0],a.pos=b+c.length,{t:26,v:c};c=(c||"")+ba(e);a.matchString("(")&&(e=c.lastIndexOf("."),-1!==e?(c=c.substr(0,e),a.pos=
b+c.length):--a.pos);return{t:30,n:c.replace(/^this\./,"./").replace(/^this$/,".")}},Si=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,qc,Se;qc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/;Se=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Ui=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,
Ti=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Vi=function(a){var b,c;(b=Me(a))||(b=a.remaining(),"true"===b.substr(0,4)?(a.pos+=4,b={t:24,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,b={t:24,v:"false"}):b=null);(b=b||pc(a))||(b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=od(a),a.allowWhitespace(),a.matchString("}")?b={t:23,m:c}:(a.pos=b,b=null)):(a.pos=b,b=null));b||(b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=Db(a),a.matchString("]")?b={t:22,m:c}:(a.pos=b,b=null)):(a.pos=b,b=null));(b=b||nd(a)||Te(a))||
(a.matchString("(")?(a.allowWhitespace(),(b=R(a))||a.error("Expected a JavaScript expression"),a.allowWhitespace(),a.matchString(")")||a.error("Expected closing paren"),b={t:34,x:b}):b=null);if(!b)return null;for(;b;){a:{c=a;var e=void 0,e=void 0;c.allowWhitespace();if(c.matchString(".")){c.allowWhitespace();if(e=c.matchPattern(Re)){c={t:31,n:e};break a}c.error("Expected a property name")}c.matchString("[")?(c.allowWhitespace(),(e=R(c))||c.error("Expected a JavaScript expression"),c.allowWhitespace(),
c.matchString("]")||c.error("Expected ']'"),c={t:31,x:e}):c=null}if(c)b={t:32,x:b,r:c};else if(a.matchString("("))a.allowWhitespace(),c=Db(a),a.allowWhitespace(),a.matchString(")")||a.error("Expected closing paren"),b={t:40,x:b},c&&(b.o=c);else break}return b},Ue,Ve;Ve=function(a,b){return function(c){var e;if(e=b(c))return e;if(!c.matchString(a))return null;c.allowWhitespace();(e=R(c))||c.error("Expected a JavaScript expression");return{s:a,o:e,t:33}}};(function(){var a,b,c,e;e=["!","~","+","-",
"typeof"];c=Vi;a=0;for(b=e.length;a<b;a+=1)c=Ve(e[a],c);Ue=c})();var Wi=Ue,We,Xe;Xe=function(a,b){return function(c){var e,k,d;k=b(c);if(!k)return null;for(;;){e=c.pos;c.allowWhitespace();if(!c.matchString(a)||"in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=e,k;c.allowWhitespace();d=b(c);if(!d)return c.pos=e,k;k={t:36,s:a,o:[k,d]}}}};(function(){var a,b,c,e;e="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");c=Wi;a=0;for(b=e.length;a<b;a+=1)c=
Xe(e[a],c);We=c})();var Xi=We,R=function(a){var b,c,e;c=Xi(a);if(!c)return null;b=a.pos;a.allowWhitespace();if(!a.matchString("?"))return a.pos=b,c;a.allowWhitespace();(b=R(a))||a.error("Expected a JavaScript expression");a.allowWhitespace();a.matchString(":")||a.error('Expected ":"');a.allowWhitespace();(e=R(a))||a.error("Expected a JavaScript expression");return{t:35,o:[c,b,e]}},Va=function(a){function b(a){switch(a.t){case 24:case 26:case 20:case 25:return a.v;case 21:return JSON.stringify(String(a.v));
case 22:return"["+(a.m?a.m.map(b).join(","):"")+"]";case 23:return"{"+(a.m?a.m.map(b).join(","):"")+"}";case 27:return a.k+":"+b(a.v);case 33:return("typeof"===a.s?"typeof ":a.s)+b(a.o);case 36:return b(a.o[0])+("in"===a.s.substr(0,2)?" "+a.s+" ":a.s)+b(a.o[1]);case 40:return b(a.x)+"("+(a.o?a.o.map(b).join(","):"")+")";case 34:return"("+b(a.x)+")";case 32:return b(a.x)+b(a.r);case 31:return a.n?"."+a.n:"["+b(a.x)+"]";case 35:return b(a.o[0])+"?"+b(a.o[1])+":"+b(a.o[2]);case 30:return"_"+c.indexOf(a.n);
default:throw Error("Expected legal JavaScript");}}var c;xa(a,c=[]);return{r:c,s:b(a)}},oa=function(a,b){if(a){for(;34===a.t&&a.x;)a=a.x;if(30===a.t)b.r=a.n;else if(20===a.t&&Yi.test(a.v))b.r=a.v;else{var c;c=a;for(var e=[],k;32===c.t&&31===c.r.t;)k=c.r,k.x?30===k.x.t?e.unshift(k.x):e.unshift(Va(k.x)):e.unshift(k.n),c=c.x;c=30!==c.t?null:{r:c.n,m:e};c?b.rx=c:b.x=Va(a)}return b}},Yi=/^[0-9][1-9]*$/,Ye=function(a,b){var c,e;if(!a.matchString("&"))return null;a.allowWhitespace();c=R(a);if(!c)return null;
a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'");e={t:3};oa(c,e);return e},Ze=function(a,b){var c,e,k;c=a.pos;try{a:{var d=[b.close],f,h,g;f=a.pos;if(h=R(a)){for(g=0;g<d.length;g+=1)if(a.remaining().substr(0,d[g].length)===d[g]){e=h;break a}a.pos=f;e=Te(a)}else e=null}}catch(n){k=n}if(!e){if("!"===a.str.charAt(c))return a.pos=c,null;if(k)throw k;}if(!a.matchString(b.close)&&(a.error("Expected closing delimiter '"+b.close+"' after reference"),!e)){if("!"===a.nextChar())return null;
a.error("Expected expression or legal reference")}c={t:2};oa(e,c);return c},Zi=/^yield\s*/,rc=function(a,b){var c,e,k;c=a.pos;if(!a.matchString(b.open))return null;a.allowWhitespace();if(!a.matchString("/"))return a.pos=c,null;a.allowWhitespace();e=a.remaining();k=e.indexOf(b.close);if(-1!==k)return c={t:6,r:e.substr(0,k).split(" ")[0]},a.pos+=k,a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),c;a.pos=c;return null},$i=/^\s*else\s*/,aj=/^\s*elseif\s+/,$e={each:52,"if":50,
"if-with":54,"with":53,unless:51},af=function(a,b){var c,e,k,d,f,h,g,n,l;c=a.pos;if(a.matchString("^"))e={t:4,f:[],n:51};else if(a.matchString("#")){if(e={t:4,f:[]},a.matchString("partial")&&(a.pos=c-a.standardDelimiters[0].length,a.error("Partial definitions can only be at the top level of the template, or immediately inside components")),c=a.matchPattern(bj))l=c,e.n=$e[c]}else return null;a.allowWhitespace();(c=R(a))||a.error("Expected expression");if(d=a.matchPattern(cj))g=void 0,(g=a.matchPattern(dj))?
e.i=d+","+g:e.i=d;a.allowWhitespace();a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'");a.sectionDepth+=1;d=e.f;g=[];do if(k=rc(a,b))l&&k.r!==l&&a.error("Expected "+b.open+"/"+l+""+b.close),--a.sectionDepth,n=!0;else{k=a;var m=b,p=k.pos,q=void 0;k.matchString(m.open)?k.matchPattern(aj)?(q=R(k),k.matchString(m.close)||k.error("Expected closing delimiter '"+m.close+"'"),k={t:61,x:q}):(k.pos=p,k=null):k=null;if(k)51===e.n&&a.error("{{else}} not allowed in {{#unless}}"),f&&a.error("illegal {{elseif...}} after {{else}}"),
h||(h=pd(c,e.n)),h.f.push({t:4,n:50,x:Va(Eb(g.concat(k.x))),f:d=[]}),g.push(qd(k.x));else if(k=a,m=b,p=k.pos,k.matchString(m.open)?k.matchPattern($i)?(k.matchString(m.close)||k.error("Expected closing delimiter '"+m.close+"'"),k={t:60}):(k.pos=p,k=null):k=null,k)51===e.n&&a.error("{{else}} not allowed in {{#unless}}"),f&&a.error("there can only be one {{else}} block, at the end of a section"),f=!0,h?h.f.push({t:4,n:50,x:Va(Eb(g)),f:d=[]}):(h=pd(c,e.n),d=h.f);else{k=a.read(Wa);if(!k)break;d.push(k)}}while(!n);
h&&(53===e.n&&(e.n=54),e.l=h);oa(c,e);e.f.length||delete e.f;return e},cj=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,dj=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,bj=new RegExp("^("+Object.keys($e).join("|")+")\\b"),bf,nb,Gb,sd,rd,ud,vd,td;bf=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;
nb=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;Gb={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,
AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,
divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,
nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,
uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,
lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};sd=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];rd=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Gb).join("|")+"));?","g");ud=/</g;vd=/>/g;td=/&/g;var Aa=/^\s*\r?\n/,za=/\r?\n\s*$/,wd=function(a,b,c){var e;b&&(e=a[0],"string"===typeof e&&((e=e.replace(b,""))?a[0]=e:a.shift()));c&&(e=na(a),"string"===
typeof e&&((e=e.replace(c,""))?a[a.length-1]=e:a.pop()))},Ng=/[ \t\f\r\n]+/g,Kg=/^(?:pre|script|style|textarea)$/i,xd=/^[ \t\f\r\n]+/,yd=/[ \t\f\r\n]+$/,Lg=/^(?:\r\n|\r|\n)/,Mg=/(?:\r\n|\r|\n)$/,fj=function(a){var b,c;b=a.pos;if(!a.matchString("</"))return null;if(c=a.matchPattern(ej))return a.inside&&c!==a.inside?(a.pos=b,null):{t:14,e:c};a.pos-=2;a.error("Illegal closing tag")},ej=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Ib=function(a,b){var c,e,k;for(c=b.length;c--;){e=a.indexOf(b[c]);if(!e)return 0;
-1!==e&&(!k||e<k)&&(k=e)}return k||-1},hj=function(a){var b;a.allowWhitespace();b=a.matchPattern(gj);if(!b)return null;b={name:b};var c,e,k;c=a.pos;/[=\/>\s]/.test(a.nextChar())||a.error("Expected `=`, `/`, `>` or whitespace");a.allowWhitespace();if(a.matchString("=")){a.allowWhitespace();c=a.pos;e=a.sectionDepth;if(!(k=Ad(a,"'")||Ad(a,'"'))){var d;a.inAttribute=!0;k=[];for(d=Ba(a)||zd(a);null!==d;)k.push(d),d=Ba(a)||zd(a);k.length?a.inAttribute=!1:k=null}null===k&&a.error("Expected valid attribute value");
a.sectionDepth!==e&&(a.pos=c,a.error("An attribute value must contain as many opening section tags as closing section tags"));a=k.length?1===k.length&&"string"===typeof k[0]?Fb(k[0]):k:""}else a.pos=c,a=null;null!=a&&(b.value=a);return b},gj=/^[^\s"'>\/=]+/,Og=/^[^\s"'=<>`]+/,cf,sc,df,ef,ff,gf,hf;sc={"true":!0,"false":!1,undefined:void 0,"null":null};df=new RegExp("^(?:"+Object.keys(sc).join("|")+")");ef=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;
ff=/\$\{([^\}]+)\}/g;gf=/^\$\{([^\}]+)\}/;hf=/^\s*$/;cf=qa.extend({init:function(a,b){this.values=b.values;this.allowWhitespace()},postProcess:function(a){return 1===a.length&&hf.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;if(!a.values)return null;if((b=a.matchPattern(gf))&&a.values.hasOwnProperty(b))return{v:a.values[b]}},function(a){if(a=a.matchPattern(df))return{v:sc[a]}},function(a){if(a=a.matchPattern(ef))return{v:+a}},function(a){var b=pc(a),c;return b&&(c=a.values)?
{v:b.v.replace(ff,function(a,b){return b in c?c[b]:b})}:b},function(a){var b,c;if(!a.matchString("{"))return null;b={};a.allowWhitespace();if(a.matchString("}"))return{v:b};for(;c=Pg(a);){b[c.key]=c.value;a.allowWhitespace();if(a.matchString("}"))return{v:b};if(!a.matchString(","))break}return null},function(a){var b,c;if(!a.matchString("["))return null;b=[];a.allowWhitespace();if(a.matchString("]"))return{v:b};for(;c=a.read();){b.push(c.v);a.allowWhitespace();if(a.matchString("]"))return{v:b};if(!a.matchString(","))break;
a.allowWhitespace()}return null}]});var ob=function(a,b){return(new cf(a,{values:b})).result},kf=function(a,b){var c,e,k,d;if("string"===typeof a){if(c=ij.exec(a))return e=a.lastIndexOf(")"),jj.test(a)||b.error("Invalid input after method call expression '"+a.slice(e+1)+"'"),c={m:c[1]},e="["+a.slice(c.m.length+1,e)+"]",e=new jf(e),c.a=Va(e.result[0]),c;if(-1===a.indexOf(":"))return a.trim();a=[a]}d=[];e=[];if(a){for(;a.length;)if(c=a.shift(),"string"===typeof c)if(k=c.indexOf(":"),-1===k)d.push(c);
else{k&&d.push(c.substr(0,k));c.length>k+1&&(e[0]=c.substring(k+1));break}else d.push(c);e=e.concat(a)}d.length?e.length||"string"!==typeof d?(c={n:1===d.length&&"string"===typeof d[0]?d[0]:d},1===e.length&&"string"===typeof e[0]?(k=ob("["+e[0]+"]"),c.a=k?k.value:e[0].trim()):c.d=e):c=d:c="";return c},ij=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,jj=/\)\s*$/,jf;jf=qa.extend({converters:[function(a){return R(a)}]});var kj=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,lj=/^[\s\n\/>]/,mj=/^on/,nj=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,
oj=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,pj={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},qj={exclude:!0},Dd;Dd={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],
tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var lf=/[-/\\^$*+?.()|[\]{}]/g,rj=/^\x3c!--\s*/,sj=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,tj=/\s*--\x3e/,mf,uj=/^#\s*partial\s+/,gb=function(a,b){return(new nf(a,b||{})).result},vj=[function(a,b){var c,e,d;if(!a.matchString(">"))return null;a.allowWhitespace();a.relaxedNames=!0;c=R(a);a.relaxedNames=!1;a.allowWhitespace();e=R(a);a.allowWhitespace();if(!c)return null;d={t:8};oa(c,d);a.allowWhitespace();e&&(d={t:4,n:53,f:[d]},oa(e,d));a.matchString(b.close)||
a.error("Expected closing delimiter '"+b.close+"'");return d},Ye,af,function(a,b){var c,e;if(!a.matchPattern(Zi))return null;c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(b.close)||a.error("expected legal partial name");e={t:16};c&&(e.n=c);return e},Ze,function(a,b){var c;if(!a.matchString("!"))return null;c=a.remaining().indexOf(b.close);if(-1!==c)return a.pos+=c+b.close.length,{t:9}}],of=[function(a,b){var c=R(a),e;if(!c)return null;a.matchString(b.close)||a.error("Expected closing delimiter '"+
b.close+"'");e={t:3};oa(c,e);return e}],wj=[Ye,af,Ze],nf=void 0,Wa=[Ba,function(a){var b,c,e;b=a.pos;if(!a.matchString("\x3c!--"))return null;c=a.remaining();e=c.indexOf("--\x3e");-1===e&&a.error("Illegal HTML - expected closing comment sequence ('--\x3e')");c=c.substr(0,e);a.pos+=e+3;e={t:9,c:c};a.includeLinePositions&&(e.p=a.getLinePos(b));return e},function(a){var b,c,e,d,f,h,g,n,l;b=a.pos;if(a.inside||a.inAttribute||!a.matchString("<")||"/"===a.nextChar())return null;c={};a.includeLinePositions&&
(c.p=a.getLinePos(b));if(a.matchString("!"))return c.t=18,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),c.a=a.matchPattern(/^(.+?)>/),c;c.t=7;c.e=a.matchPattern(kj);if(!c.e)return null;lj.test(a.nextChar())||a.error("Illegal tag name");b=function(b,e){var d=e.n||e;oj.test(d)&&(a.pos-=d.length,a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));c.v[b]=e};for(a.allowWhitespace();d=Ba(a)||hj(a);)d.name?
(e=pj[d.name])?c[e]=kf(d.value,a):(e=nj.exec(d.name))?(c.v||(c.v={}),d=kf(d.value,a),b(e[1],d)):a.sanitizeEventAttributes&&mj.test(d.name)||(c.a||(c.a={}),c.a[d.name]=d.value||(""===d.value?"":0)):(c.m||(c.m=[]),c.m.push(d)),a.allowWhitespace();a.allowWhitespace();a.matchString("/")&&(f=!0);if(!a.matchString(">"))return null;b=c.e.toLowerCase();e=a.preserveWhitespace;if(!f&&!nb.test(c.e)){a.elementStack.push(b);if("script"===b||"style"===b)a.inside=b;f=[];d=O(null);do l=a.pos,g=a.remaining(),Qg(b,
g)?(g=fj(a))?(n=!0,g=g.e.toLowerCase(),g!==b&&(a.pos=l,~a.elementStack.indexOf(g)||(l="Unexpected closing tag",nb.test(g)&&(l+=" (<"+g+"> is a void element - it cannot contain children)"),a.error(l)))):(g=rc(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(n=!0,a.pos=l):(g=a.read(pf))?(d[g.n]&&(a.pos=l,a.error("Duplicate partial definition")),ja(g.f,a.stripComments,e,!e,!e),d[g.n]=g.f,h=!0):(g=a.read(Wa))?f.push(g):n=!0:n=!0;while(!n);f.length&&(c.f=f);h&&(c.p=d);a.elementStack.pop()}a.inside=
null;return a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(b)?qj:c},function(a){var b,c,e;c=a.remaining();e=a.inside?"</"+a.inside:"<";a.inside&&!a.interpolate[a.inside]?b=c.indexOf(e):(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),!0===a.inAttribute?b.push('"',"'","=","<",">","`"):a.inAttribute?b.push(a.inAttribute):b.push(e),b=Ib(c,b));if(!b)return null;-1===b&&(b=c.length);a.pos+=b;return a.inside?c.substr(0,b):Fb(c.substr(0,b))}],pf=[function(a){var b=
a.pos,c=a.standardDelimiters[0],e=a.standardDelimiters[1],d=void 0,f=void 0;if(!a.matchPattern(rj)||!a.matchString(c))return a.pos=b,null;var h=a.matchPattern(sj);P("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+h+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+h+"}} --\x3e ... \x3c!-- {{/"+h+"}} --\x3e'");if(!a.matchString(e)||!a.matchPattern(tj))return a.pos=b,null;d=[];b=new RegExp("^\x3c!--\\s*"+c.replace(lf,"\\$&")+"\\s*\\/\\s*"+h+"\\s*"+e.replace(lf,"\\$&")+
"\\s*--\x3e");do a.matchPattern(b)?f=!0:((mf=a.read(Wa))||a.error("expected closing comment ('\x3c!-- "+c+"/"+h+""+e+" --\x3e')"),d.push(mf));while(!f);return{t:17,f:d,n:h}},function(a){var b,c,e,d;b=a.pos;var f=a.standardDelimiters;if(!a.matchString(f[0]))return null;if(!a.matchPattern(uj))return a.pos=b,null;(b=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/))||a.error("expected legal partial name");a.matchString(f[1])||a.error("Expected closing delimiter '"+f[1]+"'");c=[];do(e=rc(a,{open:a.standardDelimiters[0],
close:a.standardDelimiters[1]}))?("partial"===!e.r&&a.error("Expected "+f[0]+"/partial"+f[1]),d=!0):((e=a.read(Wa))||a.error("Expected "+f[0]+"/partial"+f[1]),c.push(e));while(!d);return{t:17,n:b,f:c}}],nf=qa.extend({init:function(a,b){var c=b.tripleDelimiters||["{{{","}}}"],e=b.staticDelimiters||["[[","]]"],d=b.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=b.delimiters||["{{","}}"];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],
readers:vj},{isStatic:!1,isTriple:!0,open:c[0],close:c[1],readers:of},{isStatic:!0,isTriple:!1,open:e[0],close:e[1],readers:wj},{isStatic:!0,isTriple:!0,open:d[0],close:d[1],readers:of}];this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!b.interpolate||!1!==b.interpolate.script,style:!b.interpolate||!1!==b.interpolate.style};!0===b.sanitize&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),
eventAttributes:!0});this.stripComments=!1!==b.stripComments;this.preserveWhitespace=b.preserveWhitespace;this.sanitizeElements=b.sanitize&&b.sanitize.elements;this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes;this.includeLinePositions=b.includeLinePositions},postProcess:function(a){if(!a.length)return{t:[],v:3};0<this.sectionDepth&&this.error("A section was left open");ja(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);return a[0]},
converters:[function(a){for(var b=[],c=O(null),e=!1,d=a.preserveWhitespace;a.pos<a.str.length;){var f=a.pos,h=void 0,g=void 0;(g=a.read(pf))?(c[g.n]&&(a.pos=f,a.error("Duplicated partial definition")),ja(g.f,a.stripComments,d,!d,!d),c[g.n]=g.f,e=!0):(h=a.read(Wa))?b.push(h):a.error("Unexpected template content")}a={v:3,t:b};e&&(a.p=c);return a}],sortMustacheTags:function(){this.tags.sort(function(a,b){return b.open.length-a.open.length})}}),xj="preserveWhitespace sanitize stripComments delimiters tripleDelimiters interpolate".split(" "),
qf={fromId:function(a,b){var c;if(!ea){if(b&&b.noThrow)return;throw Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.");}Fd(a)&&(a=a.substring(1));if(!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw Error("Could not find template element with id #"+a);}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw Error("Template element with id #"+a+", must be a <script> element");}return"textContent"in c?c.textContent:c.innerHTML},isHashedId:Fd,isParsed:function(a){return"string"!==
typeof a},getParseOptions:function(a){a.defaults&&(a=a.defaults);return xj.reduce(function(b,c){b[c]=a[c];return b},{})},createHelper:function(a){var b=O(qf);b.parse=function(b,e){return Ed(b,e||a)};return b},parse:Ed},X=qf,Jb={name:"template",extend:function(a,b,c){"template"in c&&(a=c.template,b.template="function"===typeof a?a:hb(a,b))},init:function(a,b,c){a="template"in c?c.template:a.prototype.template;"function"===typeof a&&(c=a,a=Gd(b,c),b._config.template={fn:c,result:a});a=hb(a,b);b.template=
a.t;a.p&&Hd(b.partials,a.p)},reset:function(a){var b;b=a._config.template;var c;b&&b.fn?(c=Gd(a,b.fn),c!==b.result?(b.result=c,b=c=hb(c,a)):b=void 0):b=void 0;if(b)return b=hb(b,a),a.template=b.t,Hd(a.partials,b.p,!0),!0}},pb;pb=function(a,b){this.name=a;this.useDefaults=b};pb.prototype={constructor:pb,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(){},configure:function(a,b,c){var e=this.name;c=c[e];a=O(a[e]);for(var d in c)a[d]=
c[d];b[e]=a},reset:function(a){var b=a[this.name],c=!1;Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)});return c}};var Na="adaptors components computed decorators easing events interpolators partials transitions".split(" ").map(function(a){return new pb(a,"computed"===a)}),Vg=function(a,b,c){if(!/_super/.test(c))return c;var e=function(){var a=Sg(e._parent,b),d="_super"in this,f=this._super;this._super=a;a=c.apply(this,arguments);d?this._super=f:delete this._super;
return a};e._parent=a;e._method=c;return e},Tg=function(a){Ma(a,"beforeInit","onconstruct");Ma(a,"init","onrender");Ma(a,"complete","oncomplete");Ma(a,"eventDefinitions","events");m(a.adaptors)&&Ma(a,"adaptors","adapt")},tc,qb,Ia,Nd,Kd;Ia={adapt:Ld,css:Md,data:bc,template:Jb};qb=Object.keys(ne);Kd=Od(qb.filter(function(a){return!Ia[a]}));Nd=Od(qb.concat(Na.map(function(a){return a.name})));tc=[].concat(qb.filter(function(a){return!Na[a]&&!Ia[a]}),Na,Ia.data,Ia.template,Ia.css);var ac={extend:function(a,
b,c){return Jd("extend",a,b,c)},init:function(a,b,c){return Jd("init",a,b,c)},reset:function(a){return tc.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:tc},uc=function(){return f(this.node)},rf=function(a){this.type=1;this.text=a.template};rf.prototype={detach:uc,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createTextNode(this.text));return this.node},toString:function(a){return a?Hb(this.text):this.text},unrender:function(a){if(a)return this.detach()}};
var Th=rf,Ja=function(){this.registered&&this.root.viewmodel.unregister(this.keypath,this);this.resolver&&this.resolver.unbind()},vc=function(a,b,c){this.ref=b;this.resolved=!1;this.root=a.root;this.parentFragment=a.parentFragment;this.callback=c;a=eb(a.root,b,a.parentFragment);void 0!=a?this.resolve(a):w.addUnresolved(this)};vc.prototype={resolve:function(a){this.keypath&&!a&&w.addUnresolved(this);this.resolved=!0;this.keypath=a;this.callback(a)},forceResolution:function(){this.resolve(K(this.ref))},
rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||w.removeUnresolved(this)}};var sf=function(a,b,c){this.parentFragment=a.parentFragment;this.ref=b;this.callback=c;this.rebind()},yj={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};sf.prototype={rebind:function(){var a=this.ref,b=this.parentFragment,c=yj[a],e;if(!c)throw Error('Unknown special reference "'+
a+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(K("@"+c.prefix+Lb(this.cached,c)));if(-1!==c.prop.indexOf("index")||-1!==c.prop.indexOf("key"))for(;b;){if(52===b.owner.currentSubtype&&void 0!==(e=Lb(b,c)))return this.cached=b,b.registerIndexRef(this),this.callback(K("@"+c.prefix+e));b=!b.parent&&b.owner&&b.owner.component&&b.owner.component.parentFragment&&!b.owner.component.instance.isolated?b.owner.component.parentFragment:b.parent}else for(;b;){if(void 0!==
(e=Lb(b,c)))return this.callback(K("@"+c.prefix+e.str));b=b.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var tf=function(a,b,c){this.parentFragment=a.parentFragment;this.ref=b;this.callback=c;b.ref.fragment.registerIndexRef(this);this.rebind()};tf.prototype={rebind:function(){var a;a=this.ref.ref;a="k"===a.ref.t?"k"+a.fragment.key:"i"+a.fragment.index;void 0!==a&&this.callback(K("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};Ca.resolve=
function(a){var b={},c,e;for(c in a.refs)e=a.refs[c],b[e.ref.n]="k"===e.ref.t?e.fragment.key:e.fragment.index;return b};var Ra=function(a,b,c){var e;return"@"===b.charAt(0)?new sf(a,b,c):(e=Ca(a.parentFragment,b))?new tf(a,e,c):new vc(a,b,c)},uf=function(a,b){var c;if(wc[a])return wc[a];for(c=[];b--;)c[b]="_"+b;c=new Function(c.join(","),"return("+a+")");return wc[a]=c},wc={},xc,$g=Function.prototype.bind;xc=function(a,b,c,e){var d=this;this.root=a.root;this.parentFragment=b;this.callback=e;this.owner=
a;this.str=c.s;this.keypaths=[];this.pending=c.r.length;this.refResolvers=c.r.map(function(a,b){return Ra(d,a,function(a){d.resolve(b,a)})});this.ready=!0;this.bubble()};xc.prototype={bubble:function(){this.ready&&(this.uniqueString=Xg(this.str,this.keypaths),this.keypath=K("${"+this.uniqueString.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=
b;this.bubble()},createEvaluator:function(){var a=this,b,c,e,d;e=this.keypath;(b=this.root.viewmodel.computations[e.str])?this.root.viewmodel.mark(e):(d=uf(this.str,this.refResolvers.length),c=this.keypaths.map(function(b){var c;return"undefined"===b?function(){}:b.isSpecial?(c=b.value,function(){return c}):function(){var c=a.root.viewmodel.get(b,{noUnwrap:!0,fullRootGet:!0});"function"===typeof c&&(c=Zg(c,a.root));return c}}),b={deps:this.keypaths.filter(Yg),getter:function(){var a=c.map(Wg);return d.apply(null,
a)}},b=this.root.viewmodel.compute(e,b))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var Zb=xc,vf=function(a,b,c){var e=this;this.resolver=b;this.root=b.root;this.parentFragment=c;this.viewmodel=b.root.viewmodel;"string"===typeof a?this.value=a:30===a.t?this.refResolver=Ra(this,a.n,function(a){e.resolve(a)}):new Zb(b,c,a,function(a){e.resolve(a)})};vf.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.keypath=a;this.value=
this.viewmodel.get(a);this.bind();this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a;this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var wf=function(a,b,c){var e=this,d,f,h;this.parentFragment=
h=a.parentFragment;this.root=d=a.root;this.mustache=a;this.ref=a=b.r;this.callback=c;this.unresolved=[];(f=eb(d,a,h))?this.base=f:this.baseResolver=new vc(this,a,function(a){e.base=a;e.baseResolver=null;e.bubble()});this.members=b.m.map(function(a){return new vf(a,e,h)});this.ready=!0;this.bubble()};wf.prototype={getKeypath:function(){var a=this.members.map(ah);return!a.every(bh)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},
unbind:function(){this.members.forEach(ca)},rebind:function(a,b){var c;if(this.base){var e=this.base.replace(a,b);e&&e!==this.base&&(this.base=e,c=!0)}this.members.forEach(function(e){e.rebind(a,b)&&(c=!0)});c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=K(this.ref),this.baseResolver.unbind(),this.baseResolver=null);this.members.forEach(ch);this.bubble()}};var je=wf,xf=function(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)});this.resolver&&
this.resolver.rebind(a,b)},V={getValue:function(){return this.value},init:function(a,b){function c(b){a.resolve(b)}function e(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var d,f;f=b.parentFragment;d=b.template;a.root=f.root;a.parentFragment=f;a.pElement=f.pElement;a.template=b.template;a.index=b.index||0;a.isStatic=b.template.s;a.type=b.template.t;a.registered=!1;if(d=d.r)a.resolver=Ra(a,d,c);b.template.x&&(a.resolver=new Zb(a,f,
b.template.x,e));b.template.rx&&(a.resolver=new je(a,b.template.rx,e));51!==a.template.n||a.hasOwnProperty("value")||a.setValue(void 0)},resolve:function(a){var b,c,e;a&&a.isSpecial?(this.keypath=a,this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),b&&(e=this.twowayBinding)&&e.rebound())},rebind:xf},yf=
function(a){this.type=2;V.init(this,a)};yf.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:V.resolve,rebind:V.rebind,detach:uc,unbind:Ja,render:function(){this.node||(this.node=document.createTextNode(g(this.value)));return this.node},unrender:function(a){a&&f(this.node)},getValue:V.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get());n(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&
w.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=""+g(this.value);return a?Hb(b):b}};var Vh=yf,zf=function(a){this.type=4;this.subtype=this.currentSubtype=a.template.n;this.inverted=51===this.subtype;this.pElement=a.pElement;this.fragments=[];this.fragmentsToCreate=[];this.fragmentsToRender=[];this.fragmentsToUnrender=[];a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,c){return{n:a,t:0===c?"k":"i"}}));this.renderedFragments=[];this.length=0;
V.init(this,a)};zf.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var a;if(1===this.fragments.length)return this.fragments[0].detach();a=document.createDocumentFragment();this.fragments.forEach(function(b){a.appendChild(b.detach())});return a},find:function(a){var b,c,e;c=this.fragments.length;for(b=0;b<c;b+=1)if(e=this.fragments[b].find(a))return e;return null},findAll:function(a,b){var c,e;e=this.fragments.length;for(c=0;c<e;c+=1)this.fragments[c].findAll(a,b)},findAllComponents:function(a,
b){var c,e;e=this.fragments.length;for(c=0;c<e;c+=1)this.fragments[c].findAllComponents(a,b)},findComponent:function(a){var b,c,e;c=this.fragments.length;for(b=0;b<c;b+=1)if(e=this.fragments[b].findComponent(a))return e;return null},findNextNode:function(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)},firstNode:function(){var a,b,c;if(a=this.fragments.length)for(b=0;b<a;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)},
getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:V.getValue,shuffle:function(a){var b=this,c,e,d,f;if(!this.shuffling&&!this.unbound&&52===this.currentSubtype){this.shuffling=!0;w.scheduleTask(function(){return b.shuffling=!1});d=[];a.forEach(function(a,e){var f,h,g,n;a===e?d[a]=b.fragments[e]:(f=b.fragments[e],void 0===c&&(c=e),-1===a?(b.fragmentsToUnrender.push(f),f.unbind()):(h=b.keypath.join(e),g=b.keypath.join(a),
f.index=a,(n=f.registeredIndexRefs)&&n.forEach(dh),f.rebind(h,g),d[a]=f))});e=this.root.viewmodel.get(this.keypath).length;if(void 0===c){if(this.length===e)return;c=this.length}this.length=this.fragments.length=e;this.rendered&&w.addView(this);for(a=c;a<e;a+=1)(f=d[a])||this.fragmentsToCreate.push(a),this.fragments[a]=f}},rebind:function(a,b){V.rebind.call(this,a,b)},render:function(){var a=this;this.docFrag=document.createDocumentFragment();this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())});
this.renderedFragments=this.fragments.slice();this.fragmentsToRender=[];this.rendered=!0;return this.docFrag},resolve:V.resolve,setValue:function(a){var b=this,c,e;this.updating||(this.updating=!0,this.keypath&&(c=this.root.viewmodel.wrapped[this.keypath.str])&&(a=c.get()),this.fragmentsToCreate.length?(e={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var c;e.context=b.keypath.join(a);e.index=a;c=new Q(e);b.fragmentsToRender.push(b.fragments[a]=
c)}),this.fragmentsToCreate.length=0):eh(this,a)&&(this.bubble(),this.rendered&&w.addView(this)),this.value=a,this.updating=!1)},toString:function(a){var b,c,e;b="";e=this.length;for(c=0;c<e;c+=1)b+=this.fragments[c].toString(a);return b},unbind:function(){var a=this;this.fragments.forEach(ca);this.fragmentsToRender.forEach(function(b){return T(a.fragments,b)});this.fragmentsToRender=[];Ja.call(this);this.length=0;this.unbound=!0},unrender:function(a){this.fragments.forEach(a?hh:ih);this.renderedFragments=
[];this.rendered=!1},update:function(){var a,b,c,e,d,f;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();this.rendered&&(e=this.parentFragment.getNode());f=this.fragments.length;for(d=0;d<f;d+=1)a=this.fragments[d],b=c.indexOf(a,d),b===d?this.docFrag.childNodes.length&&(a=a.firstNode(),e.insertBefore(this.docFrag,a)):(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(d,0,a));this.rendered&&
this.docFrag.childNodes.length&&(a=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,a));this.renderedFragments=this.fragments.slice()}};var Wh=zf,Rd={},Af,Bf;try{ka("table").innerHTML="foo"}catch(a){Af=!0,Bf={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Cf=function(a,b,c){var e,d=[],f,h;if(null!=
a&&""!==a){Af&&(f=Bf[b.tagName])?(e=Pb("DIV"),e.innerHTML=f[0]+a+f[1],e=e.querySelector(".x"),"SELECT"===e.tagName&&(h=e.options[e.selectedIndex])):b.namespaceURI===Z.svg?(e=Pb("DIV"),e.innerHTML='<svg class="x">'+a+"</svg>",e=e.querySelector(".x")):(e=Pb(b.tagName),e.innerHTML=a,"SELECT"===e.tagName&&(h=e.options[e.selectedIndex]));for(;a=e.firstChild;)d.push(a),c.appendChild(a);if("SELECT"===b.tagName)for(b=d.length;b--;)d[b]!==h&&(d[b].selected=!1)}return d},Df=function(a){var b,c;if(a&&"select"===
a.name&&a.binding){b=zb(a.node.options).filter(jh);if(a.getAttribute("multiple"))c=b.map(function(a){return a.value});else if(b=b[0])c=b.value;void 0!==c&&a.binding.setValue(c);a.bubble()}},Ef=function(a){this.type=3;V.init(this,a)};Ef.prototype={detach:function(){var a,b;if(this.docFrag){a=this.nodes.length;for(b=0;b<a;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}},find:function(a){var b,c,e;c=this.nodes.length;for(b=0;b<c;b+=1)if(e=this.nodes[b],1===e.nodeType&&(ga(e,a)||(e=
e.querySelector(a))))return e;return null},findAll:function(a,b){var c,e,d,f,h;e=this.nodes.length;for(c=0;c<e;c+=1)if(d=this.nodes[c],1===d.nodeType&&(ga(d,a)&&b.push(d),d=d.querySelectorAll(a)))for(f=d.length,h=0;h<f;h+=1)b.push(d[h])},firstNode:function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},getValue:V.getValue,rebind:V.rebind,render:function(){if(this.rendered)throw Error("Attempted to render an item that was already rendered");this.docFrag=
document.createDocumentFragment();this.nodes=Cf(this.value,this.parentFragment.getNode(),this.docFrag);Df(this.pElement);this.rendered=!0;return this.docFrag},resolve:V.resolve,setValue:function(a){var b;if(b=this.root.viewmodel.wrapped[this.keypath.str])a=b.get();a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&w.addView(this))},toString:function(){return void 0!=this.value?Fb(""+this.value):""},unbind:Ja,unrender:function(a){this.rendered&&a&&(this.nodes.forEach(f),this.rendered=
!1)},update:function(){var a;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);a=this.parentFragment.getNode();this.nodes=Cf(this.value,a,this.docFrag);a.insertBefore(this.docFrag,this.parentFragment.findNextNode(this));Df(this.pElement)}}};var Xh=Ef,Ff=/^true|on|yes|1$/i,zj=/^[0-9]+$/,Gf;Gf=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b}("altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ").concat("attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ")));
var yc=function(a){a=a.toLowerCase();return Gf[a]||a},Aj={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Bj=function(){var a=this.value,b,c,e,d;if(!this.locked)for(this.node._ractive.value=
a,b=this.node.options,d=b.length;d--;)if(c=b[d],e=c._ractive?c._ractive.value:c.value,e==a){c.selected=!0;break}},Cj=function(){var a=this.value,b,c,e,d;m(a)||(a=[a]);b=this.node.options;for(c=b.length;c--;)e=b[c],d=e._ractive?e._ractive.value:e.value,e.selected=Zc(a,d)},Dj=function(){var a=this.node;a.checked=this.value==a._ractive.value},Ej=function(){var a,b=this.node,c;a=b.checked;b.value=this.element.getAttribute("value");b.checked=this.element.getAttribute("value")===this.element.getAttribute("name");
if(a&&!b.checked&&this.element.binding&&(a=this.element.binding.siblings,b=a.length)){for(;b--;){c=a[b];if(!c.element.node)return;if(c.element.node.checked)return w.addRactive(c.root),c.handleChange()}this.root.viewmodel.set(c.keypath,void 0)}},Fj=function(){var a=this.element,b=this.node,c=this.value,e=a.binding,d,a=a.getAttribute("value");if(m(c)){for(d=c.length;d--;)if(a==c[d]){e.isChecked=b.checked=!0;return}e.isChecked=b.checked=!1}else e.isChecked=b.checked=c==a},Gj=function(){this.node.className=
g(this.value)},Hj=function(){var a=this.node,b=this.value;this.root.nodes[b]=a;a.id=b},Ij=function(){var a,b;a=this.node;b=this.value;void 0===b&&(b="");a.style.setAttribute("cssText",b)},Jj=function(){var a=this.value;void 0===a&&(a="");this.locked||(this.node.innerHTML=a)},Hf=function(){var a=this.node,b=this.value;a._ractive.value=b;this.locked||(a.value=void 0==b?"":b)},Kj=function(){this.locked||(this.node[this.propertyName]=this.value)},Lj=function(){var a=this.node,b=this.namespace,c=this.name,
e=this.value,d=this.fragment;b?a.setAttributeNS(b,c,(d||e).toString()):this.isBoolean?e?a.setAttribute(c,""):a.removeAttribute(c):null==e?a.removeAttribute(c):a.setAttribute(c,(d||e).toString())},If=function(a){this.init(a)};If.prototype={bubble:function(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();n(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),
this.rendered&&w.addView(this))},init:function(a){this.type=13;this.element=a.element;this.root=a.root;a:{var b=a.name,c,e;c=b.indexOf(":");if(-1!==c&&(e=b.substr(0,c),"xmlns"!==e)){b=b.substring(c+1);this.name=yc(b);this.namespace=Z[e.toLowerCase()];this.namespacePrefix=e;if(!this.namespace)throw'Unknown namespace ("'+e+'")';break a}this.name=this.element.namespace!==Z.html?yc(b):b}this.isBoolean=bf.test(this.name);a.value&&"string"!==typeof a.value?(this.parentFragment=this.element.parentFragment,
this.fragment=new Q({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),a=this.fragment.items,a=1===a.length&&2===a[0].type?a[0]:void 0,this.interpolator=a,this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,this.ready=!0):this.value=this.isBoolean?!0:a.value||""},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},render:function(a){var b;this.node=a;if(!a.namespaceURI||a.namespaceURI===Z.html){b=Aj[this.name]||this.name;void 0!==a[b]&&(this.propertyName=
b);if(this.isBoolean||this.isTwoway)this.useProperty=!0;"value"===b&&(a._ractive.value=this.value)}this.rendered=!0;this.update()},toString:function(){var a=this.name,b=this.namespacePrefix,c=this.value,e=this.interpolator,d=this.fragment;if("value"!==a||"select"!==this.element.name&&"textarea"!==this.element.name)if("value"!==a||void 0===this.element.getAttribute("contenteditable")){if("name"===a&&"input"===this.element.name&&e)return"name={{"+(e.keypath.str||e.ref)+"}}";if(this.isBoolean)return c?
a:"";if(d){if(1===d.items.length&&null==d.items[0].value)return"";c=d.toString()}b&&(a=b+":"+a);return c?a+'="'+c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")+'"':a}},unbind:function(){this.fragment&&this.fragment.unbind();"id"===this.name&&delete this.root.nodes[this.value]},update:function(){var a=this.name,b=this.element,c=this.node,e;"id"===a?e=Hj:"value"===a?"select"===b.name&&"value"===a?e=b.getAttribute("multiple")?Cj:Bj:"textarea"===b.name?e=Hf:null!=b.getAttribute("contenteditable")?
e=Jj:"input"===b.name&&(a=b.getAttribute("type"),e="file"===a?S:"radio"===a&&b.binding&&"name"===b.binding.name?Ej:Hf):this.isTwoway&&"name"===a?"radio"===c.type?e=Dj:"checkbox"===c.type&&(e=Fj):"style"===a&&c.style.setAttribute?e=Ij:"class"!==a||c.namespaceURI&&c.namespaceURI!==Z.html?this.useProperty&&(e=Kj):e=Gj;e||(e=Lj);this.update=e;this.update()}};var Qb;"undefined"!==typeof document&&(Qb=ka("div"));var Jf=function(a,b){this.element=a;this.root=a.root;this.parentFragment=a.parentFragment;this.attributes=
[];this.fragment=new Q({root:a.root,owner:this,template:[b]})};Jf.prototype={bubble:function(){this.node&&this.update();this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a;this.isSvg=a.namespaceURI===Z.svg;this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a=this,b;b=kh(this.fragment.toString(),this.isSvg);this.attributes.filter(function(a){a:{for(var e=b.length;e--;)if(b[e].name===a.name){a=!1;break a}a=!0}return a}).forEach(function(b){a.node.removeAttribute(b.name)});
b.forEach(function(b){a.node.setAttribute(b.name,b.value)});this.attributes=b},toString:function(){return this.fragment.toString()}};var Mj=function(a,b){return b?b.map(function(b){return new Jf(a,b)}):[]},W=function(a){var b,c;this.element=a;this.root=a.root;this.attribute=a.attributes[this.name||"value"];b=this.attribute.interpolator;b.twowayBinding=this;if(c=b.keypath){if("}"===c.str.slice(-1))return P("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name,
{ractive:this.root}),!1;if(c.isSpecial)return P("Two-way binding does not work with %s",b.resolver.ref,{ractive:this.root}),!1}else J("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",b.template.r?"'"+b.template.r+"' reference":"expression",{ractive:this.root}),b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0;this.keypath=c;b=this.root.viewmodel.get(c);void 0===b&&this.getInitialValue&&
(b=this.getInitialValue(),void 0!==b&&this.root.viewmodel.set(c,b));a:{for(;a=a.parent;)if("form"===a.name)break a;a=void 0}a&&(this.resetValue=b,a.formBindings.push(this))};W.prototype={handleChange:function(){var a=this;w.start(this.root);this.attribute.locked=!0;this.root.viewmodel.set(this.keypath,this.getValue());w.scheduleTask(function(){return a.attribute.locked=!1});w.end()},rebound:function(){var a,b;a=this.keypath;b=this.attribute.interpolator.keypath;a!==b&&(T(this.root._twowayBindings[a.str],
this),this.keypath=b,a=this.root._twowayBindings[b.str]||(this.root._twowayBindings[b.str]=[]),a.push(this))},unbind:function(){}};W.extend=function(a){var b;b=function(a){W.call(this,a);this.init&&this.init()};b.prototype=O(this.prototype);h(b.prototype,a);b.extend=W.extend;return b};var N=function(){this._ractive.binding.handleChange()},rb=W.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a=this.element.node,b,c=!1;this.rendered=
!0;b=this.root.lazy;!0===this.element.lazy?b=!0:!1===this.element.lazy?b=!1:p(this.element.lazy)?(b=!1,c=+this.element.lazy):p(b||"")&&(c=+b,b=!1,this.element.lazy=c);this.handler=c?lh:N;a.addEventListener("change",N,!1);b||(a.addEventListener("input",this.handler,!1),a.attachEvent&&a.addEventListener("keyup",this.handler,!1));a.addEventListener("blur",Sd,!1)},unrender:function(){var a=this.element.node;this.rendered=!1;a.removeEventListener("change",N,!1);a.removeEventListener("input",this.handler,
!1);a.removeEventListener("keyup",this.handler,!1);a.removeEventListener("blur",Sd,!1)}}),Nj=rb.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),zc=function(a,b,c){a=a+b+c;return Kf[a]||(Kf[a]=[])},Kf={},Oj=W.extend({name:"checked",init:function(){this.siblings=zc(this.root._guid,"radio",this.element.getAttribute("name"));this.siblings.push(this)},render:function(){var a=this.element.node;
a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},handleChange:function(){w.start(this.root);this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())});w.end()},getValue:function(){return this.element.node.checked},unbind:function(){T(this.siblings,this)}}),Pj=W.extend({name:"name",init:function(){this.siblings=zc(this.root._guid,
"radioname",this.keypath.str);this.siblings.push(this);this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}";a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value");a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",
N,!1);a.removeEventListener("click",N,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&W.prototype.handleChange.call(this)},rebound:function(a,b){var c;W.prototype.rebound.call(this,a,b);if(c=this.element.node)c.name="{{"+this.keypath.str+"}}"},unbind:function(){T(this.siblings,this)}}),Qj=W.extend({name:"name",getInitialValue:function(){this.noInitialValue=!0;return[]},init:function(){var a,b;this.checkboxName=
!0;this.siblings=zc(this.root._guid,"checkboxes",this.keypath.str);this.siblings.push(this);this.noInitialValue&&(this.siblings.noInitialValue=!0);this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){T(this.siblings,this)},render:function(){var a=this.element.node,b,c;b=this.root.viewmodel.get(this.keypath);c=this.element.getAttribute("value");m(b)?this.isChecked=Zc(b,c):this.isChecked=
b==c;a.name="{{"+this.keypath.str+"}}";a.checked=this.isChecked;a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},changed:function(){var a=!!this.isChecked;this.isChecked=this.element.node.checked;return this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked;W.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(mh).map(nh)}}),
Rj=W.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},getValue:function(){return this.element.node.checked}}),Ac=W.extend({getInitialValue:function(){var a=this.element.options,b,c,e,d;if(void 0===this.element.getAttribute("value")&&(c=b=a.length)){for(;c--;)if(a[c].getAttribute("selected")){e=
a[c].getAttribute("value");d=!0;break}if(!d)for(;++c<b;)if(!a[c].getAttribute("disabled")){e=a[c].getAttribute("value");break}void 0!==e&&(this.element.attributes.value.value=e);return e}},render:function(){this.element.node.addEventListener("change",N,!1)},unrender:function(){this.element.node.removeEventListener("change",N,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,e;a=this.element.node.options;c=a.length;for(b=0;b<c;b+=1)if(e=a[b],a[b].selected)return a=
e._ractive?e._ractive.value:e.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,w.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),Sj=Ac.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){this.element.node.addEventListener("change",N,!1);void 0===this.root.viewmodel.get(this.keypath)&&
this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",N,!1)},setValue:function(){throw Error("TODO not implemented yet");},getValue:function(){var a,b,c,e,d;a=[];b=this.element.node.options;e=b.length;for(c=0;c<e;c+=1)d=b[c],d.selected&&(d=d._ractive?d._ractive.value:d.value,a.push(d));return a},handleChange:function(){var a,b;a=this.attribute.value;b=this.getValue();void 0!==a&&yb(b,a)||Ac.prototype.handleChange.call(this);return this},forceUpdate:function(){var a=
this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,w.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Tj=W.extend({render:function(){this.element.node.addEventListener("change",N,!1)},unrender:function(){this.element.node.removeEventListener("change",N,!1)},getValue:function(){return this.element.node.files}}),
Uj=rb.extend({getInitialValue:function(){},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Vj=/^event(?:\.(.+))?/,Lf=function(a){var b,c,e,d={};b=this._ractive;c=b.events[a.type];if(e=Ca(c.element.parentFragment))d=Ca.resolve(e);c.fire({node:this,original:a,index:d,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})},Rb={},Wj={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Mf=function(a,b,c){this.init(a,b,c)};Mf.prototype=
{bubble:function(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()},fire:function(a){Pa(this.root,this.getAction(),{event:a})},getAction:function(){return this.action.toString().trim()},init:function(a,b,c){var e=this;this.element=a;this.root=a.root;this.parentFragment=a.parentFragment;this.name=b;-1!==b.indexOf("*")&&(t('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0);c.m?(b=c.a.r,this.method=
c.m,this.keypaths=[],this.fn=uf(c.a.s,b.length),this.parentFragment=a.parentFragment,this.refResolvers=[],b.forEach(function(a,b){var c=void 0;(c=Vj.exec(a))?e.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:e.refResolvers.push(Ra(e,a,function(a){return e.resolve(b,a)}))}),this.fire=oh):(a=c.n||c,"string"!==typeof a&&(a=new Q({template:a,root:this.root,owner:this})),this.action=a,c.d?(this.dynamicParams=new Q({template:c.d,root:this.root,owner:this.element}),this.fire=qh):c.a&&(this.params=
c.a,this.fire=ph))},listen:function(){var a,b=this.name;if(!this.invalid){if(a=aa("events",this.root,b))this.custom=a(this.node,rh(b));else{if(!("on"+b in this.node||window&&"on"+b in window||oe)){Wj[b]||P(Ea(b,"event"),{node:this.node});return}this.node.addEventListener(b,Lf,!1)}this.hasListener=!0}},rebind:function(a,b){function c(c){c&&c.rebind(a,b)}this.method?this.refResolvers.forEach(c):("string"!==typeof this.action&&c(this.action),this.dynamicParams&&c(this.dynamicParams))},render:function(){this.node=
this.element.node;this.node._ractive.events[this.name]=this;(this.method||this.getAction())&&this.listen()},resolve:function(a,b){this.keypaths[a]=b},unbind:function(){this.method?this.refResolvers.forEach(ca):("string"!==typeof this.action&&this.action.unbind(),this.dynamicParams&&this.dynamicParams.unbind())},unrender:function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Lf,!1);this.hasListener=!1}};var Nf=function(a,b){var c=this,e,d,f;this.element=a;this.root=e=
a.root;d=b.n||b;if("string"!==typeof d&&(f=new Q({template:d,root:e,owner:a}),d=f.toString(),f.unbind(),""===d))return;b.a?this.params=b.a:b.d&&(this.fragment=new Q({template:b.d,root:e,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;c.params=this.getArgsList();c.ready&&c.update()});(this.fn=aa("decorators",e,d))||t(Ea(d,"decorator"))};Nf.prototype={init:function(){var a;a=this.element.node;this.params?(a=[a].concat(this.params),
a=this.fn.apply(this.root,a)):a=this.fn.call(this.root,a);if(!a||!a.teardown)throw Error("Decorator definition must return an object with a teardown method");this.actual=a;this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0;this.ready&&this.actual.teardown();!a&&this.fragment&&this.fragment.unbind()}};var Bc=function(a){return a.replace(/-([a-zA-Z])/g,
function(a,c){return c.toUpperCase()})},Cc,Xa,Dc;ea?(Xa={},Dc=ka("div").style,Cc=function(a){var b,c,e;a=Bc(a);if(!Xa[a])if(void 0!==Dc[a])Xa[a]=a;else for(e=a.charAt(0).toUpperCase()+a.substring(1),b=fa.length;b--;)if(c=fa[b],void 0!==Dc[c+e]){Xa[a]=c+e;break}return Xa[a]}):Cc=null;var ha=Cc,Ec,Of;ea?(Of=window.getComputedStyle||null.getComputedStyle,Ec=function(a){var b,c,e,d,f;b=Of(this.node);if("string"===typeof a)return f=b[ha(a)],"0px"===f&&(f=0),f;if(!m(a))throw Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");
c={};for(e=a.length;e--;)d=a[e],f=b[ha(d)],"0px"===f&&(f=0),c[d]=f;return c}):Ec=null;var Xj=Ec,Pf=function(a){var b;this.duration=a.duration;this.step=a.step;this.complete=a.complete;"string"===typeof a.easing?(b=a.root.easing[a.easing],b||(P(Ea(a.easing,"easing")),b=Ud)):b="function"===typeof a.easing?a.easing:Ud;this.easing=b;this.start=ue();this.end=this.start+this.duration;this.running=!0;Cb.add(this)};Pf.prototype={tick:function(a){if(!this.running)return!1;if(a>this.end)return this.step&&this.step(1),
this.complete&&this.complete(1),!1;a=this.easing((a-this.start)/this.duration);this.step&&this.step(a);return!0},stop:function(){this.abort&&this.abort();this.running=!1}};var Yj=new RegExp("^-(?:"+fa.join("|")+")-"),Zj=new RegExp("^(?:"+fa.join("|")+")([A-Z])"),Qf=function(a){if(!a)return"";Zj.test(a)&&(a="-"+a);return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},Fc,Gc,Ka,Ya,Za,Rf,Sf,Tf,Hc={},sb={};ea?(Gc=ka("div").style,void 0!==Gc.transition?(Ka="transition",Ya="transitionend",Za=
!0):void 0!==Gc.webkitTransition?(Ka="webkitTransition",Ya="webkitTransitionEnd",Za=!0):Za=!1,Ka&&(Rf=Ka+"Duration",Sf=Ka+"Property",Tf=Ka+"TimingFunction"),Fc=function(a,b,c,e,d){setTimeout(function(){var f,h,g,n,l;n=function(){h&&g&&(a.root.fire(a.name+":end",a.node,a.isIntro),d())};f=(a.node.namespaceURI||"")+a.node.tagName;a.node.style[Sf]=e.map(ha).map(Qf).join(",");a.node.style[Tf]=Qf(c.easing||"linear");a.node.style[Rf]=c.duration/1E3+"s";l=function(b){b=e.indexOf(Bc(b.propertyName.replace(Yj,
"")));-1!==b&&e.splice(b,1);e.length||(a.node.removeEventListener(Ya,l,!1),g=!0,n())};a.node.addEventListener(Ya,l,!1);setTimeout(function(){for(var d=e.length,k,m,p=[],q;d--;)if(q=e[d],k=f+q,Za&&!sb[k]&&(a.node.style[ha(q)]=b[q],Hc[k]||(m=a.getStyle(q),Hc[k]=a.getStyle(q)!=b[q],sb[k]=!Hc[k],sb[k]&&(a.node.style[ha(q)]=m))),!Za||sb[k])void 0===m&&(m=a.getStyle(q)),k=e.indexOf(q),-1===k?J("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",
{node:a.node}):e.splice(k,1),k=/[^\d]*$/.exec(b[q])[0],p.push({name:ha(q),interpolator:mb(parseFloat(m),parseFloat(b[q])),suffix:k});p.length?new Pf({root:a.root,duration:c.duration,easing:Bc(c.easing||""),step:function(b){var c,e;for(e=p.length;e--;)c=p[e],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){h=!0;n()}}):h=!0;e.length||(a.node.removeEventListener(Ya,l,!1),g=!0,n())},0)},c.delay||0)}):Fc=null;var ak=Fc,Qa,Ic,tb,Jc,Da;if("undefined"!==typeof document){Qa="hidden";Da=
{};if(Qa in document)tb="";else for(Jc=fa.length;Jc--;)Ic=fa[Jc],Qa=Ic+"Hidden",Qa in document&&(tb=Ic);void 0!==tb?(document.addEventListener(tb+"visibilitychange",Vd),Vd()):("onfocusout"in document?(document.addEventListener("focusout",Sb),document.addEventListener("focusin",Tb)):(window.addEventListener("pagehide",Sb),window.addEventListener("blur",Sb),window.addEventListener("pageshow",Tb),window.addEventListener("focus",Tb)),Da.hidden=!1)}var bk=Da,Kc,Uf,Vf;ea?(Uf=window.getComputedStyle||null.getComputedStyle,
Kc=function(a,b,c){var e=this,d;if(4===arguments.length)throw Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(bk.hidden)return this.setStyle(a,b),Vf||(Vf=ta.resolve());"string"===typeof a?(d={},d[a]=b):(d=a,c=b);c||(P('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);return new ta(function(a){var b,
f,h,g,n,l;if(c.duration){b=Object.keys(d);f=[];h=Uf(e.node);for(n=b.length;n--;)l=b[n],g=h[ha(l)],"0px"===g&&(g=0),g!=d[l]&&(f.push(l),e.node.style[ha(l)]=g);f.length?ak(e,d,c,f,a):a()}else e.setStyle(d),a()})}):Kc=null;var Lc=function(a,b,c){this.init(a,b,c)};Lc.prototype={init:function(a,b,c){var e,d;this.element=a;this.root=e=a.root;this.isIntro=c;c=b.n||b;if("string"!==typeof c&&(d=new Q({template:c,root:e,owner:a}),c=d.toString(),d.unbind(),""===c))return;this.name=c;b.a?this.params=b.a:b.d&&
(d=new Q({template:b.d,root:e,owner:a}),this.params=d.getArgsList(),d.unbind());(this._fn=aa("transitions",e,c))||P(Ea(c,"transition"),{ractive:this.root})},start:function(){var a=this,b,c,e;b=this.node=this.element.node;c=b.getAttribute("style");this.complete=function(d){e||(!d&&a.isIntro&&(c?b.setAttribute("style",c):(b.getAttribute("style"),b.removeAttribute("style"))),b._ractive.transition=null,a._manager.remove(a),e=!0)};this._fn?this._fn.apply(this.root,[this].concat(this.params)):this.complete()},
getStyle:Xj,setStyle:function(a,b){var c;if("string"===typeof a)this.node.style[ha(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[ha(c)]=a[c]);return this},animateStyle:Kc,processParams:function(a,b){"number"===typeof a?a={duration:a}:"string"===typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={});return l({},a,b)}};var Wf,Xf;Wf=function(){var a=this.node,b=this.fragment.toString(!1);window&&window.appearsToBeIELessEqual8&&(a.type="text/css");if(a.styleSheet)a.styleSheet.cssText=
b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}};Xf=function(){this.node.type&&"text/javascript"!==this.node.type||J("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root});this.node.text=this.fragment.toString(!1)};var Yf=function(a){this.init(a)};Yf.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var a=this.node,b;if(a)return(b=a.parentNode)&&b.removeChild(a),a},find:function(a){if(!this.node)return null;
if(ga(this.node,a))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(a)},findAll:function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b);this.fragment&&this.fragment.findAll(a,b)},findAllComponents:function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},findComponent:function(a){if(this.fragment)return this.fragment.findComponent(a)},findNextNode:function(){return null},firstNode:function(){return this.node},getAttribute:function(a){if(this.attributes&&
this.attributes[a])return this.attributes[a].value},init:function(a){var b,c,e,d,f,h;this.type=7;c=this.parentFragment=a.parentFragment;e=this.template=a.template;this.parent=a.pElement||c.pElement;this.root=c=c.root;this.index=a.index;this.key=a.key;this.name=yc(e.e);if("option"===this.name){b:{if(a=this.parent){do if("select"===a.name)break b;while(a=a.parent)}a=void 0}if(this.select=a)this.select.options.push(this),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),
"selected"in e.a&&void 0!==this.select.getAttribute("value")&&delete e.a.selected}"select"===this.name&&(this.options=[],this.bubble=sh);"form"===this.name&&(this.formBindings=[]);var g,n;n=e.a||{};b=a=void 0;g=n.twoway;void 0!==g&&(a=0===g||Ff.test(g));g=n.lazy;void 0!==g&&(0!==g&&zj.test(g)?b=parseInt(g):b=0===g||Ff.test(g));g=e.a;var l;n=[];for(h in g)"twoway"!==h&&"lazy"!==h&&g.hasOwnProperty(h)&&(l=new If({element:this,name:h,value:g[h],root:this.root}),n[h]=l,"value"!==h&&n.push(l));(l=n.value)&&
n.push(l);this.attributes=n;this.conditionalAttributes=Mj(this,e.m);e.f&&(this.fragment=new Q({template:e.f,root:c,owner:this,pElement:this,cssIds:null}));h=c.twoway;!1===a?h=!1:!0===a&&(h=!0);this.twoway=h;this.lazy=b;if(h){var m;l=this.attributes;this.binding&&(this.binding.teardown(),this.binding=null);(this.getAttribute("contenteditable")||l.contenteditable&&pa(l.contenteditable))&&pa(l.value)?m=Nj:"input"===this.name?(d=this.getAttribute("type"),"radio"===d||"checkbox"===d?(h=pa(l.name),l=pa(l.checked),
h&&l&&J("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:this.root}),h?m="radio"===d?Pj:Qj:l&&(m="radio"===d?Oj:Rj)):"file"===d&&pa(l.value)?m=Tj:pa(l.value)&&(m="number"===d||"range"===d?Uj:rb)):"select"===this.name&&pa(l.value)?m=this.getAttribute("multiple")?Sj:Ac:"textarea"===this.name&&pa(l.value)&&(m=rb);m=m&&(f=new m(this))&&f.keypath?f:void 0;h=d=m}h&&(this.binding=d,f=this.root._twowayBindings[d.keypath.str]||(this.root._twowayBindings[d.keypath.str]=
[]),f.push(d));if(e.v){f=e.v;var p;l=[];for(p in f)if(f.hasOwnProperty(p))for(d=p.split("-"),m=d.length;m--;)h=new Mf(this,d[m],f[p]),l.push(h);this.eventHandlers=l}e.o&&(this.decorator=new Nf(this,e.o));this.intro=e.t0||e.t1;this.outro=e.t0||e.t2},rebind:function(a,b){function c(c){c.rebind(a,b)}var e,d,f;this.attributes&&this.attributes.forEach(c);this.conditionalAttributes&&this.conditionalAttributes.forEach(c);this.eventHandlers&&this.eventHandlers.forEach(c);this.decorator&&c(this.decorator);
this.fragment&&c(this.fragment);if(f=this.liveQueries)for(e=f.length;e--;)f[e]._makeDirty();this.node&&(d=this.node._ractive)&&Wc(d,"keypath",a,b)},render:function(){var a=this,b=this.root,c,e,d;c=wh(this);e=this.node=ka(this.name,c);this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" "));da(this.node,"_ractive",{value:{proxy:this,keypath:we(this.parentFragment),events:O(null),root:b}});this.attributes.forEach(function(a){return a.render(e)});
this.conditionalAttributes.forEach(function(a){return a.render(e)});this.fragment&&("script"===this.name?(this.bubble=Xf,this.node.text=this.fragment.toString(!1),this.fragment.unrender=S):"style"===this.name?(this.bubble=Wf,this.bubble(),this.fragment.unrender=S):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=S:this.node.appendChild(this.fragment.render()));this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding);this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()});
"option"===this.name&&xh(this);"img"===this.name?uh(this):"form"===this.name?this.node.addEventListener("reset",Td,!1):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected);this.decorator&&this.decorator.fn&&w.scheduleTask(function(){a.decorator.torndown||a.decorator.init()},!0);b.transitionsEnabled&&this.intro&&(d=new Lc(this,this.intro,!0),w.registerTransition(d),w.scheduleTask(function(){return d.start()},
!0),this.transition=d);this.node.autofocus&&w.scheduleTask(function(){return a.node.focus()},!0);yh(this);return this.node},toString:function(){var a,b;if(this.template.y)return"<!DOCTYPE"+this.template.dd+">";a="<"+this.template.e;a+=this.attributes.map(Wd).join("")+this.conditionalAttributes.map(Wd).join("");if(b="option"===this.name)a:{var c,e;b=this.getAttribute("value");if(void 0!==b&&this.select)if(c=this.select.getAttribute("value"),c==b)b=!0;else{if(this.select.getAttribute("multiple")&&m(c))for(e=
c.length;e--;)if(c[e]==b){b=!0;break a}b=void 0}else b=!1}b&&(a+=" selected");if(b="input"===this.name)e=this.attributes,b=e.type,c=e.value,e=e.name,b=b&&"radio"===b.value&&c&&e.interpolator?c.value===e.interpolator.value?!0:void 0:void 0;b&&(a+=" checked");a+=">";"textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Hb(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")||"");this.fragment&&(b="script"!==this.name&&"style"!==this.name,
a+=this.fragment.toString(b));nb.test(this.template.e)||(a+="</"+this.template.e+">");return a},unbind:function(){this.fragment&&this.fragment.unbind();this.binding&&this.binding.unbind();this.eventHandlers&&this.eventHandlers.forEach(ca);"option"===this.name&&this.select&&T(this.select.options,this);this.attributes.forEach(ca);this.conditionalAttributes.forEach(ca)},unrender:function(a){var b,c;(c=this.transition)&&c.complete();"option"===this.name?this.detach():a&&w.detachWhenReady(this);this.fragment&&
this.fragment.unrender(!1);if(a=this.binding)this.binding.unrender(),this.node._ractive.binding=null,b=this.root._twowayBindings[a.keypath.str],b.splice(b.indexOf(a),1);this.eventHandlers&&this.eventHandlers.forEach(vg);this.decorator&&w.registerDecorator(this.decorator);this.root.transitionsEnabled&&this.outro&&(c=new Lc(this,this.outro,!1),w.registerTransition(c),w.scheduleTask(function(){return c.start()}));this.liveQueries&&zh(this);"form"===this.name&&this.node.removeEventListener("reset",Td,
!1)}};var $h=Yf,Zf=/^\s*$/,Bh=/^\s*/,ck=function(a){var b,c,e;b=a.split("\n");c=b[0];void 0!==c&&Zf.test(c)&&b.shift();c=na(b);void 0!==c&&Zf.test(c)&&b.pop();(e=b.reduce(Ah,null))&&(a=b.map(function(a){return a.replace(e,"")}).join("\n"));return a},Mc=function(a,b,c){var e;e=void 0;var d=Yd(b,(c||{}).owner);d?e=d:(c=la("partials",a,b))?(d=c.partials[b],"function"===typeof d&&(e=d.bind(c),e.isOwner=c.partials.hasOwnProperty(b),d=e.call(a,X)),d||""===d?(X.isParsed(d)||(d=X.parse(d,X.getParseOptions(c)),
d.p&&J("Partials ({{>%s}}) cannot contain nested inline partials",b,{ractive:a}),(e?c:c.partials.hasOwnProperty(b)?c:Xd(c.constructor,b)).partials[b]=d=d.t),e&&(d._fn=e),e=d.v?d.t:d):(J('A function was specified for "%s" %s, but no %s was returned',b,"partial","partial",{ractive:a}),e=void 0)):e=void 0;if(e)return e;if(e=X.fromId(b,{noThrow:!0}))return e=ck(e),e=X.parse(e,X.getParseOptions(a)),a.partials[b]=e.t},dk=function(a,b){return b?a.split("\n").map(function(a,e){return e?b+a:a}).join("\n"):
a},$f=function(a){var b;b=this.parentFragment=a.parentFragment;this.root=b.root;this.type=8;this.index=a.index;this.name=a.template.r;this.rendered=!1;this.fragment=this.fragmentToRender=this.fragmentToUnrender=null;V.init(this,a);this.keypath||((a=Mc(this.root,this.name,b))?(Ja.call(this),this.isNamed=!0,this.setTemplate(a)):P('Could not find template for partial "%s"',this.name))};$f.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},
findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,
b){this.isNamed||xf.call(this,a,b);this.fragment&&this.fragment.rebind(a,b)},render:function(){this.docFrag=document.createDocumentFragment();this.update();this.rendered=!0;return this.docFrag},resolve:V.resolve,setValue:function(a){var b;if(void 0===a||a!==this.value)void 0!==a&&(b=Mc(this.root,""+a,this.parentFragment)),!b&&this.name&&(b=Mc(this.root,this.name,this.parentFragment))&&(Ja.call(this),this.isNamed=!0),b||P('Could not find template for partial "%s"',this.name,{ractive:this.root}),this.value=
a,this.setTemplate(b||[]),this.bubble(),this.rendered&&w.addView(this)},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment));this.fragmentToRender=this.fragment=new Q({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement})},toString:function(a){var b,c;a=this.fragment.toString(a);b=this.parentFragment.items[this.index-1];if(!b||1!==b.type)return a;b=b.text.split("\n").pop();return(c=/^\s+$/.exec(b))?dk(a,c[0]):
a},unbind:function(){this.isNamed||Ja.call(this);this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null);this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null);this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),
a.insertBefore(this.docFrag,b))}};var ai=$f,Yh=Zd,ek=new U("detach"),Nc=[],$a="pop push reverse shift sort splice unshift".split(" "),ub,Oc;$a.forEach(function(a){da(Nc,a,{value:function(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];var d,b=Fe(this,a,c),c=Array.prototype[a].apply(this,arguments);w.start();this._ractive.setting=!0;for(e=this._ractive.wrappers.length;e--;){d=this._ractive.wrappers[e];w.addRactive(d.root);var f=d.root;d=d.keypath;b?f.viewmodel.smartUpdate(d,this,
b):f.viewmodel.mark(d)}w.end();this._ractive.setting=!1;return c}})});({}).__proto__?(ub=function(a){a.__proto__=Nc},Oc=function(a){a.__proto__=Array.prototype}):(ub=function(a){var b,c;for(b=$a.length;b--;)c=$a[b],da(a,c,{value:Nc[c],configurable:!0})},Oc=function(a){var b;for(b=$a.length;b--;)delete a[$a[b]]});ub.unpatch=Oc;var ag=ub,Pc,Qc;Pc=function(a,b,c){this.root=a;this.value=b;this.keypath=K(c);b._ractive||(da(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),ag(b));
b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a));b._ractive.instances[a._guid]+=1;b._ractive.wrappers.push(this)};Pc.prototype={get:function(){return this.value},teardown:function(){var a,b,c,e;a=this.value;b=a._ractive;c=b.wrappers;e=b.instances;if(b.setting)return!1;b=c.indexOf(this);if(-1===b)throw Error(Qc);c.splice(b,1);if(c.length){if(--e[this.root._guid],!e[this.root._guid]){b=e.indexOf(this.root);if(-1===b)throw Error(Qc);e.splice(b,1)}}else delete a._ractive,
ag.unpatch(this.value)}};Qc="Something went wrong in a rather interesting way";var Yb={filter:function(a){return m(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new Pc(a,b,c)}},ee=/^\s*[0-9]+\s*$/,Rc,Sc;try{Object.defineProperty({},"test",{value:0}),Rc={filter:function(a,b,c){var e;if(!b)return!1;b=K(b);if((e=c.viewmodel.wrapped[b.parent.str])&&!e.magic)return!1;a=c.viewmodel.get(b.parent);return m(a)&&/^[0-9]+$/.test(b.lastKey)?!1:a&&("object"===typeof a||"function"===typeof a)},
wrap:function(a,b,c){return new Sc(a,b,c)}},Sc=function(a,b,c){var e;c=K(c);this.magic=!0;this.ractive=a;this.keypath=c;this.value=b;this.prop=c.lastKey;c=c.parent;this.obj=c.isRoot?a.viewmodel.data:a.viewmodel.get(c);(a=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&a.set&&(e=a.set._ractiveWrappers)?-1===e.indexOf(this)&&e.push(this):Ch(this,b,a)},Sc.prototype={get:function(){return this.value},reset:function(a){if(!this.updating)return this.updating=!0,this.obj[this.prop]=
a,w.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=ee.test(a)?[]:{},this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b;if(this.updating)return!1;if(a=(a=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&a.set)a=a._ractiveWrappers,b=a.indexOf(this),-1!==b&&a.splice(b,1),a.length||(a=this.obj[this.prop],Object.defineProperty(this.obj,
this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=a)}}}catch(a){Rc=!1}var jb=Rc,bg,Tc;jb&&(bg={filter:function(a,b,c){return jb.filter(a,b,c)&&Yb.filter(a)},wrap:function(a,b,c){return new Tc(a,b,c)}},Tc=function(a,b,c){this.value=b;this.magic=!0;this.magicWrapper=jb.wrap(a,b,c);this.arrayWrapper=Yb.wrap(a,b,c)},Tc.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});
var Mh=bg,Ub={},fk=function(a){var b=[sa],c,e;for(c=a.length;c--;)for(e=a[c].parent;e&&!e.isRoot;){if(-1===a.indexOf(e)){var d=b,f=e;-1===d.indexOf(f)&&d.push(f)}e=e.parent}return b},cg=function(a,b,c){ae(a,b);c||(c=b.wildcardMatches(),c.forEach(function(c){$d(a,c,b)}))},dg=function(a,b){this.computation=a;this.viewmodel=a.viewmodel;this.ref=b;this.root=this.viewmodel.ractive;this.parentFragment=this.root.component&&this.root.component.parentFragment};dg.prototype={resolve:function(a){this.computation.softDeps.push(a);
this.computation.unresolvedDeps[a.str]=null;this.viewmodel.register(a,this.computation,"computed")}};var Uc=function(a,b){this.key=a;this.getter=b.getter;this.setter=b.setter;this.hardDeps=b.deps||[];this.softDeps=[];this.unresolvedDeps={};this.depValues={};this._dirty=this._firstRun=!0};Uc.prototype={constructor:Uc,init:function(a){var b=this,c;this.viewmodel=a;this.bypass=!0;c=a.get(this.key);a.clearCache(this.key.str);this.bypass=!1;this.setter&&void 0!==c&&this.set(c);this.hardDeps&&this.hardDeps.forEach(function(c){return a.register(c,
b,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var a=this,b,c=!1;if(this.getting)return L("The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`"),this.value;this.getting=!0;if(this._dirty){this._firstRun||!this.hardDeps.length&&!this.softDeps.length?c=!0:[this.hardDeps,this.softDeps].forEach(function(b){var d,
f,h;if(!c)for(h=b.length;h--;)if(d=b[h],f=a.viewmodel.get(d),!n(f,a.depValues[d.str])){a.depValues[d.str]=f;c=!0;break}});if(c){this.viewmodel.capture();try{this.value=this.getter()}catch(e){J('Failed to compute "%s"',this.key.str),x(e.stack||e),this.value=void 0}b=this.viewmodel.release();(b=this.updateDependencies(b))&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){a.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}this.getting=this._firstRun=!1;return this.value},
set:function(a){if(this.setting)this.value=a;else{if(!this.setter)throw Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(a)}},updateDependencies:function(a){var b,c,e,d,f;c=this.softDeps;for(b=c.length;b--;)e=c[b],-1===a.indexOf(e)&&(d=!0,this.viewmodel.unregister(e,this,"computed"));for(b=a.length;b--;)if(e=a[b],-1===c.indexOf(e)&&(!this.hardDeps||-1===this.hardDeps.indexOf(e))){d=!0;f=this.viewmodel;var h=e.firstKey;h in f.data||
h in f.computations||h in f.mappings||this.unresolvedDeps[e.str]?this.viewmodel.register(e,this,"computed"):(f=new dg(this,e.str),a.splice(b,1),this.unresolvedDeps[e.str]=f,w.addUnresolved(f))}d&&(this.softDeps=a.slice());return d}};var eg={FAILED_LOOKUP:!0},gk={},fg=function(a,b){this.localKey=a;this.keypath=b.keypath;this.origin=b.origin;this.deps=[];this.unresolved=[];this.resolved=!1};fg.prototype={forceResolution:function(){this.keypath=this.localKey;this.setup()},get:function(a,b){return this.resolved?
this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a;this.setup()},map:function(a){return void 0===typeof this.keypath?this.localKey:a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c});this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0);this.keypath=a;this.setup()},set:function(a,b){this.resolved||
this.forceResolution();this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group);if(b.dep.setValue)b.dep.setValue(a.origin.get(c));else if(b.dep.invalidate)b.dep.invalidate();else throw Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");
this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey];this.resolved&&(this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(a,b,c){var e,d;if(this.resolved){e=this.deps;for(d=e.length;d--;)if(e[d].dep===b){e.splice(d,1);break}this.origin.unregister(this.map(a),b,c)}}};var hk=function(a,b){var c,e;c={};e=0;return a.map(function(a,
d){var f,h,g;h=e;g=b.length;do{f=b.indexOf(a,h);if(-1===f)return-1;h=f+1}while(c[f]&&h<g);f===e&&(e+=1);c[f]=!0;return f})},Vb={},ik={implicit:!0},gg={noCascade:!0},hg=function(a){var b=a.adapt,c=a.data,e=a.computed,d=a.mappings,f,h;this.ractive=a.ractive;this.adaptors=b;this.onchange=a.onchange;this.cache={};this.cacheMap=O(null);this.deps={computed:O(null),"default":O(null)};this.depsMap={computed:O(null),"default":O(null)};this.patternObservers=[];this.specials=O(null);this.wrapped=O(null);this.computations=
O(null);this.captureGroups=[];this.unresolvedImplicitDependencies=[];this.changes=[];this.implicitChanges={};this.noCascade={};this.data=c;this.mappings=O(null);for(f in d)this.map(K(f),d[f]);if(c)for(f in c)(h=this.mappings[f])&&void 0===h.getValue()&&h.setValue(c[f]);for(f in e)d&&f in d&&t("Cannot map to a computed property ('%s')",f),this.compute(K(f),e[f]);this.ready=!0};hg.prototype={adapt:function(a,b){var c,e,d;if(this.adaptors)for(c=this.adaptors.length,e=0;e<c;e+=1)if(d=this.adaptors[e],
d.filter(b,a,this.ractive)){c=this.wrapped[a]=d.wrap(this.ractive,b,a,Dh(a));c.value=b;break}},applyChanges:function(){function a(a){var c=a.key;a.viewmodel===e?(e.clearCache(c.str),a.invalidate(),d.push(c),b(c)):a.viewmodel.mark(c)}function b(c){var d,f;e.noCascade.hasOwnProperty(c.str)||((f=e.deps.computed[c.str])&&f.forEach(a),(d=e.depsMap.computed[c.str])&&d.forEach(b))}var c=this,e=this,d,f,h={},g;d=this.changes;if(d.length)return d.slice().forEach(b),f=fk(d),f.forEach(function(b){var c;-1===
d.indexOf(b)&&(c=e.deps.computed[b.str])&&c.forEach(a)}),this.changes=[],this.patternObservers.length&&(f.forEach(function(a){return cg(c,a,!0)}),d.forEach(function(a){return cg(c,a)})),this.deps.observers&&(f.forEach(function(a){return be(c,null,a,"observers")}),de(this,d,"observers")),this.deps["default"]&&(g=[],f.forEach(function(a){return be(c,g,a,"default")}),g.length&&Eh(this,g,d),de(this,d,"default")),d.forEach(function(a){h[a.str]=c.get(a)}),this.implicitChanges={},this.noCascade={},h},capture:function(){this.captureGroups.push([])},
clearCache:function(a,b){var c;b||(c=this.wrapped[a])&&!1!==c.teardown()&&(this.wrapped[a]=null);this.cache[a]=void 0;if(c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())},compute:function(a,b){var c=new Uc(a,b);this.ready&&c.init(this);return this.computations[a.str]=c},get:function(a,b){var c=this.cache,e,d,f,h,g=a.str,l;b=b||gk;b.capture&&(h=na(this.captureGroups))&&(~h.indexOf(a)||h.push(a));if(ra.call(this.mappings,a.firstKey))return this.mappings[a.firstKey].get(a,b);if(a.isSpecial)return a.value;
if(void 0===c[g]){if((d=this.computations[g])&&!d.bypass)e=d.get(),this.adapt(g,e);else if(f=this.wrapped[g])e=f.value;else if(a.isRoot)this.adapt("",this.data),e=this.data;else{d=this.get(a.parent);if(h=this.wrapped[a.parent.str])d=h.get();null===d||void 0===d?e=void 0:((e=this.cacheMap[a.parent.str])?-1===e.indexOf(a.str)&&e.push(a.str):this.cacheMap[a.parent.str]=[a.str],"object"!==typeof d||a.lastKey in d?(e=d[a.lastKey],this.adapt(a.str,e,!1),this.cache[a.str]=e):e=this.cache[a.str]=eg)}c[g]=
e}else e=c[g];!b.noUnwrap&&(f=this.wrapped[g])&&(e=f.get());if(a.isRoot&&b.fullRootGet)for(l in this.mappings)e[l]=this.mappings[l].getValue();return e===eg?void 0:e},init:function(){for(var a in this.computations)this.computations[a].init(this)},map:function(a,b){var c=this.mappings[a.str]=new fg(a,b);c.initViewmodel(this);return c},mark:function(a,b){var c,e=a.str;b&&(b.implicit&&(this.implicitChanges[e]=!0),b.noCascade&&(this.noCascade[e]=!0));(c=this.computations[e])&&c.invalidate();-1===this.changes.indexOf(a)&&
this.changes.push(a);this.clearCache(e,b?b.keepExistingWrapper:!1);if(this.ready)this.onchange()},merge:function(a,b,c,e){var d,f;this.mark(a);if(e&&e.compare){e=Gh(e.compare);try{d=b.map(e),f=c.map(e)}catch(h){J('merge(): "%s" comparison failed. Falling back to identity checking',a),d=b,f=c}}else d=b,f=c;d=hk(d,f);this.smartUpdate(a,c,d,b.length!==c.length)},register:function(a,b,c){c=void 0===c?"default":c;var e;if(!b.isStatic)if(e=this.mappings[a.firstKey])e.register(a,b,c);else if(e=this.deps[c]||
(this.deps[c]={}),e=e[a.str]||(e[a.str]=[]),e.push(b),this.depsMap[c]||(this.depsMap[c]={}),!a.isRoot)for(;!a.isRoot;)b=this.depsMap[c],b=b[a.parent.str]||(b[a.parent.str]=[]),e=a.str,void 0===b["_"+e]&&(b["_"+e]=0,b.push(a)),b["_"+e]+=1,a=a.parent},release:function(){return this.captureGroups.pop()},reset:function(a){this.data=a;this.clearCache("")},set:function(a,b,c){c=void 0===c?{}:c;var e,d,f;if(!c.noMapping&&(e=this.mappings[a.firstKey]))return e.set(a,b);if(e=this.computations[a.str]){if(e.setting)return;
e.set(b);b=e.get()}n(this.cache[a.str],b)||((d=this.wrapped[a.str])&&d.reset&&(f=!1!==d.reset(b))&&(b=d.get()),e||f||Hh(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))},smartUpdate:function(a,b,c){var e=this,d,f;f=c.length;c.forEach(function(b,c){-1===b&&e.mark(a.join(c),gg)});this.set(a,b,{silent:!0});(d=this.deps["default"][a.str])&&d.filter(Ih).forEach(function(a){return a.shuffle(c,b)});if(f!==b.length){this.mark(a.join("length"),ik);for(d=c.touchedFrom;d<b.length;d+=1)this.mark(a.join(d));
for(d=b.length;d<f;d+=1)this.mark(a.join(d),gg)}},teardown:function(){var a=this,b;for(Object.keys(this.cache).forEach(function(b){return a.clearCache(b)});b=this.unresolvedImplicitDependencies.pop();)b.teardown()},unregister:function(a,b,c){c=void 0===c?"default":c;var e;if(!b.isStatic){if(e=this.mappings[a.firstKey])return e.unregister(a,b,c);e=this.deps[c][a.str];b=e.indexOf(b);if(-1===b)throw Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");
e.splice(b,1);if(!a.isRoot)for(;!a.isRoot;)b=this.depsMap[c],b=b[a.parent.str],--b["_"+a.str],b["_"+a.str]||(T(b,a),b["_"+a.str]=void 0),a=a.parent}}};Wb.prototype={constructor:Wb,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?fe(this.queue,b).push(a):ge(this,a);delete this.inProcess[a._guid]}};var jk=function(a,b){var c={},e;for(e in b){var d=e,f=a,h=e,g=b[e],l=void 0,n=void 0;"function"===typeof g&&(l=Xb(g,f));"string"===typeof g&&(l=he(f,
g));"object"===typeof g&&("string"===typeof g.get?l=he(f,g.get):"function"===typeof g.get?l=Xb(g.get,f):t("`%s` computation must have a `get()` method",h),"function"===typeof g.set&&(n=Xb(g.set,f)));c[d]={getter:l,setter:n}}return c},Jh=/\$\{([^\}]+)\}/g,kk=new U("construct"),lk=new U("config"),ig=new Wb("init"),Oh=0,mk="adaptors components decorators easing events interpolators partials transitions".split(" "),$b=function(a,b,c){var e=void 0===b?{}:b;b=void 0===c?{}:c;ma.DEBUG&&Ta();Nh(a,b);da(a,
"data",{get:Ph});kk.fire(a,e);mk.forEach(function(b){a[b]=h(O(a.constructor[b]||null),e[b])});c=new hg({adapt:Kh(a,a.adapt,e),data:bc.init(a.constructor,a,e),computed:jk(a,h(O(a.constructor.prototype.computed),e.computed)),mappings:b.mappings,ractive:a,onchange:function(){return w.addRactive(a)}});a.viewmodel=c;c.init();ac.init(a.constructor,a,e);lk.fire(a);ig.begin(a);if(a.template){c=void 0;if(b.cssIds||a.cssId)c=b.cssIds?b.cssIds.slice():[],a.cssId&&c.push(a.cssId);a.fragment=new Q({template:a.template,
root:a,owner:a,cssIds:c})}ig.end(a);if(b=d(a.el))if(b=a.render(b,a.append),ma.DEBUG_PROMISES)b["catch"](function(b){P("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");J("An error happened during rendering",{ractive:a});b.stack&&x(b.stack);throw b;})};ie.prototype={bubble:function(){this.dirty||(this.dirty=!0,w.addView(this))},
update:function(){this.callback(this.fragment.getValue());this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var nk=function(a,b,c,e,d){var f,g,l,n,p={},q={},r={},t,x=[];g=a.parentFragment;l=a.root;d=d||{};h(p,d);d.content=e||[];p[""]=d.content;b.defaults.el&&J("The <%s/> component has a default `el` property; it has been disregarded",a.name);for(e=g;e;){if(16===e.owner.type){n=e.owner.container;break}e=e.parent}c&&Object.keys(c).forEach(function(b){var e=
c[b],d;if("string"===typeof e)d=ob(e),q[b]=d?d.value:e;else if(0===e)q[b]=!0;else if(m(e))1===e.length&&2===e[0].t?(r[b]={origin:a.root.viewmodel,keypath:void 0},e=Qh(a,e[0],function(a){a.isSpecial?t?f.set(b,a.value):(q[b]=a.value,delete r[b]):t?f.viewmodel.mappings[b].resolve(a):r[b].keypath=a})):e=new ie(a,e,function(a){t?f.set(b,a):q[b]=a}),x.push(e);else throw Error("erm wut");});f=O(b.prototype);$b(f,{el:null,append:!0,data:q,partials:d,magic:l.magic||b.defaults.magic,modifyArrays:l.modifyArrays,
adapt:l.adapt},{parent:l,component:a,container:n,mappings:r,inlinePartials:p,cssIds:g.cssIds});t=!0;a.resolvers=x;return f},ok=new U("teardown"),jg=function(a,b){this.init(a,b)};jg.prototype={detach:function(){var a=this.instance.fragment.detach();ek.fire(this.instance);return a},find:function(a){return this.instance.fragment.find(a)},findAll:function(a,b){return this.instance.fragment.findAll(a,b)},findAllComponents:function(a,b){b._test(this,!0);this.instance.fragment&&this.instance.fragment.findAllComponents(a,
b)},findComponent:function(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance},findNextNode:function(){return this.parentFragment.findNextNode(this)},firstNode:function(){return this.rendered?this.instance.fragment.firstNode():null},init:function(a,b){if(!b)throw Error('Component "'+this.name+'" not found');this.root=(this.parentFragment=a.parentFragment).root;this.type=15;this.name=a.template.e;this.index=a.index;this.indexRefBindings={};
this.yielders={};this.resolvers=[];nk(this,b,a.template.a,a.template.f,a.template.p);var c=a.template.v,e;for(e in c)c.hasOwnProperty(e)&&Rh(this.instance,this.root,e,c[e]);(a.template.t0||a.template.t1||a.template.t2||a.template.o)&&J('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});for(var d,c=this.root;c;)(d=c._liveComponentQueries["_"+this.name])&&d.push(this.instance),c=c.parent},rebind:function(a,b){function c(c){c.rebind(a,b)}var e;this.resolvers.forEach(c);
for(var d in this.yielders)this.yielders[d][0]&&c(this.yielders[d][0]);(e=this.root._liveComponentQueries["_"+this.name])&&e._makeDirty()},render:function(){var a=this.instance;a.render(this.parentFragment.getNode());this.rendered=!0;return a.fragment.detach()},toString:function(){return this.instance.fragment.toString()},unbind:function(){var a=this.instance;this.resolvers.forEach(ca);var b,c;b=this.root;do(c=b._liveComponentQueries["_"+this.name])&&c._remove(this);while(b=b.parent);a._observers.forEach(ed);
a.fragment.unbind();a.viewmodel.teardown();a.fragment.rendered&&a.el.__ractive_instances__&&T(a.el.__ractive_instances__,a);ok.fire(a)},unrender:function(a){this.shouldDestroy=a;this.instance.unrender()}};var Zh=jg,kg=function(a){this.type=9;this.value=a.template.c};kg.prototype={detach:uc,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createComment(this.value));return this.node},toString:function(){return"\x3c!--"+this.value+"--\x3e"},unrender:function(a){a&&
this.node.parentNode.removeChild(this.node)}};var bi=kg,lg=function(a){var b,c;this.type=16;this.container=b=a.parentFragment.root;this.component=c=b.component;this.container=b;this.containerFragment=a.parentFragment;this.parentFragment=c.parentFragment;var e=this.name=a.template.n||"",d=b._inlinePartials[e];d||(J('Could not find template for partial "'+e+'"',{ractive:a.root}),d=[]);this.fragment=new Q({owner:this,root:b.parent,template:d,pElement:this.containerFragment.pElement});m(c.yielders[e])?
c.yielders[e].push(this):c.yielders[e]=[this];w.scheduleTask(function(){if(1<c.yielders[e].length)throw Error("A component template can only have one {{yield"+(e?" "+e:"")+"}} declaration at a time");})};lg.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,
b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a);T(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Uh=lg,mg=function(a){this.declaration=
a.template.a};mg.prototype={init:S,render:S,unrender:S,teardown:S,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var ci=mg,ng=function(a){this.init(a)};ng.prototype={bubble:function(){this.dirtyValue=this.dirtyArgs=!0;this.bound&&"function"===typeof this.owner.bubble&&this.owner.bubble()},detach:function(){var a;if(1===this.items.length)return this.items[0].detach();a=document.createDocumentFragment();this.items.forEach(function(b){(b=b.detach())&&a.appendChild(b)});return a},find:function(a){var b,
c,e,d;if(this.items){c=this.items.length;for(b=0;b<c;b+=1)if(e=this.items[b],e.find&&(d=e.find(a)))return d;return null}},findAll:function(a,b){var c,e,d;if(this.items)for(e=this.items.length,c=0;c<e;c+=1)d=this.items[c],d.findAll&&d.findAll(a,b);return b},findAllComponents:function(a,b){var c,e,d;if(this.items)for(e=this.items.length,c=0;c<e;c+=1)d=this.items[c],d.findAllComponents&&d.findAllComponents(a,b);return b},findComponent:function(a){var b,c,e,d;if(this.items){b=this.items.length;for(c=
0;c<b;c+=1)if(e=this.items[c],e.findComponent&&(d=e.findComponent(a)))return d;return null}},findNextNode:function(a){a=a.index;return this.items[a+1]?this.items[a+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():null},getArgsList:function(){var a,b;this.dirtyArgs&&(b=Kb(this.items,a={},this.root._guid),this.argsList=a=(a=ob("["+b+"]",a))?
a.value:[this.toString()],this.dirtyArgs=!1);return this.argsList},getNode:function(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el},getValue:function(){var a,b;this.dirtyValue&&(b=Kb(this.items,a={},this.root._guid),this.value=a=(a=ob(b,a))?a.value:this.toString(),this.dirtyValue=!1);return this.value},init:function(a){var b=this;this.owner=a.owner;this.parent=this.owner.parentFragment;this.root=a.root;this.pElement=a.pElement;this.context=
a.context;this.index=a.index;this.key=a.key;this.registeredIndexRefs=[];this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.items=a.template.map(function(c,e){return Sh({parentFragment:b,pElement:a.pElement,template:c,index:e})});this.value=this.argsList=null;this.bound=this.dirtyArgs=this.dirtyValue=!0},rebind:function(a,b){this.owner&&!this.owner.hasContext||Wc(this,"context",a,b);this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})},registerIndexRef:function(a){var b=
this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:function(){var a;1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())}));this.rendered=!0;return a},toString:function(a){return this.items?this.items.map(a?ei:di).join(""):""},unbind:function(){this.bound&&(this.items.forEach(fi),this.bound=!1)},unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:function(a){if(!this.rendered)throw Error("Attempted to unrender a fragment that was not rendered");
this.items.forEach(function(b){return b.unrender(a)});this.rendered=!1}};var Q=ng,pk=["template","partials","components","decorators","events"],qk=new U("reset"),rk=va("reverse"),sk=va("shift"),tk=va("sort"),uk=va("splice"),vk=new U("teardown"),og=function(){return this.fragment.toString(!0)},wk=new U("unrender"),xk=va("unshift"),yk=new U("update"),zk={add:function(a,b){return se(this,a,void 0===b?1:+b)},animate:function(a,b,c){var e,d,f,h,g,l,n,m,p,q,r,t;e=new ta(function(a){return d=a});if("object"===
typeof a){c=b||{};b=c.easing;l=c.duration;g=[];n=c.step;m=c.complete;if(n||m)q={},c.step=null,c.complete=null,p=function(a){return function(b,c){q[a]=c}};for(f in a)if(a.hasOwnProperty(f)){if(n||m)r=p(f),c={easing:b,duration:l},n&&(c.step=r);c.complete=m?r:S;g.push(Bb(this,f,a[f],c))}a={easing:b,duration:l};n&&(a.step=function(a){return n(a,q)});m&&e.then(function(a){return m(a,q)});a.complete=d;t=Bb(this,null,null,a);g.push(t);e.stop=function(){for(var a;a=g.pop();)a.stop();t&&t.stop()};return e}c=
c||{};c.complete&&e.then(c.complete);c.complete=d;h=Bb(this,a,b,c);e.stop=function(){return h.stop()};return e},detach:function(){if(this.detached)return this.detached;this.el&&T(this.el.__ractive_instances__,this);this.detached=this.fragment.detach();qi.fire(this);return this.detached},find:function(a){return this.el?this.fragment.find(a):null},findAll:function(a,b){var c,e;if(!this.el)return[];b=b||{};c=this._liveQueries;if(e=c[a])return b&&b.live?e:e.slice();e=Ae(this,a,!!b.live,!1);e.live&&(c.push(a),
c["_"+a]=e);this.fragment.findAll(a,e);return e},findAllComponents:function(a,b){var c,e;b=b||{};c=this._liveComponentQueries;if(e=c[a])return b&&b.live?e:e.slice();e=Ae(this,a,!!b.live,!0);e.live&&(c.push(a),c["_"+a]=e);this.fragment.findAllComponents(a,e);return e},findComponent:function(a){return this.fragment.findComponent(a)},findContainer:function(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null},findParent:function(a){return this.parent?
this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null},fire:function(a){var b={args:Array.prototype.slice.call(arguments,1)};Pa(this,a,b)},get:function(a){var b;a=K(ba(a));b=this.viewmodel.get(a,xi);void 0===b&&this.parent&&!this.isolated&&eb(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a));return b},insert:function(a,b){if(!this.fragment.rendered)throw Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");
a=d(a);b=d(b)||null;if(!a)throw Error("You must specify a valid target to insert into");a.insertBefore(this.detach(),b);this.el=a;(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this);this.detached=null;jd(this)},merge:function(a,b,c){var e,d;a=K(ba(a));e=this.viewmodel.get(a);if(!m(e)||!m(b))return this.set(a,b,c&&c.complete);d=w.start(this,!0);this.viewmodel.merge(a,e,b,c);w.end();return d},observe:function(a,b,c){var e,d,f;if(q(a)){c=b;d=a;e=[];for(a in d)d.hasOwnProperty(a)&&(b=d[a],
e.push(this.observe(a,b,c)));return{cancel:function(){for(;e.length;)e.pop().cancel()}}}if("function"===typeof a)return c=b,b=a,jc(this,"",b,c);d=a.split(" ");if(1===d.length)return jc(this,a,b,c);e=[];for(f=d.length;f--;)(a=d[f])&&e.push(jc(this,a,b,c));return{cancel:function(){for(;e.length;)e.pop().cancel()}}},observeOnce:function(a,b,c){var e=this.observe(a,function(){b.apply(this,arguments);e.cancel()},{init:!1,defer:c&&c.defer});return e},off:function(a,b){var c=this,e;if(a)e=a.split(" ").map(De).filter(Ee),
e.forEach(function(a){var e;if(e=c._subs[a])b?(a=e.indexOf(b),-1!==a&&e.splice(a,1)):c._subs[a]=[]});else for(a in this._subs)delete this._subs[a];return this},on:function(a,b){var c=this,e,d;if("object"===typeof a){e=[];for(d in a)a.hasOwnProperty(d)&&e.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=e.pop();)a.cancel()}}}a.split(" ").map(De).filter(Ee).forEach(function(a){(c._subs[a]||(c._subs[a]=[])).push(b)});return{cancel:function(){return c.off(a,b)}}},once:function(a,b){var c=this.on(a,
function(){b.apply(this,arguments);c.cancel()});return c},pop:Bi,push:Ci,render:function(a,b){var c=this,e,f,h;h=this.transitionsEnabled;this.noIntro&&(this.transitionsEnabled=!1);e=w.start(this,!0);w.scheduleTask(function(){return Di.fire(c)},!0);if(this.fragment.rendered)throw Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");a=d(a)||this.el;b=d(b)||this.anchor;this.el=a;this.anchor=b;if(!this.append&&a){var g=a.__ractive_instances__;g&&g.length&&
g.splice(0,g.length).forEach(dd);a.innerHTML=""}this.cssId&&Je.apply();a&&((f=a.__ractive_instances__)?f.push(this):a.__ractive_instances__=[this],b?a.insertBefore(this.fragment.render(),b):a.appendChild(this.fragment.render()));w.end();this.transitionsEnabled=h;return e.then(function(){return Ei.fire(c)})},reset:function(a){var b,c,e;a=a||{};if("object"!==typeof a)throw Error("The reset method takes either no arguments, or an object containing new data");(c=this.viewmodel.wrapped[""])&&c.reset?!1===
c.reset(a)&&this.viewmodel.reset(a):this.viewmodel.reset(a);c=ac.reset(this);for(e=c.length;e--;)if(-1<pk.indexOf(c[e])){b=!0;break}if(b){b=void 0;this.viewmodel.mark(sa);if(b=this.component)b.shouldDestroy=!0;this.unrender();b&&(b.shouldDestroy=!1);this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Q({template:this.template,root:this,owner:this}));b=this.render(this.el,this.anchor)}else b=w.start(this,!0),this.viewmodel.mark(sa),w.end();qk.fire(this,a);return b},resetPartial:function(a,
b){function c(b,e,d){d&&d.partials[a]||b.forEach(function(b){8===b.type&&b.getPartialName()===a&&e.push(b);b.fragment&&c(b.fragment.items,e,d);m(b.fragments)?c(b.fragments,e,d):m(b.items)?c(b.items,e,d):15===b.type&&b.instance&&c(b.instance.fragment.items,e,b.instance);7===b.type&&(m(b.attributes)&&c(b.attributes,e,d),m(b.conditionalAttributes)&&c(b.conditionalAttributes,e,d))})}var e,d=[];c(this.fragment.items,d);this.partials[a]=b;e=w.start(this,!0);d.forEach(function(b){b.value=void 0;b.setValue(a)});
w.end();return e},resetTemplate:function(a){var b;Jb.init(null,this,{template:a});a=this.transitionsEnabled;this.transitionsEnabled=!1;if(b=this.component)b.shouldDestroy=!0;this.unrender();b&&(b.shouldDestroy=!1);this.fragment.unbind();this.fragment=new Q({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled=a},reverse:rk,set:function(a,b){var c,e;e=w.start(this,!0);if(q(a))for(a in c=a,c)c.hasOwnProperty(a)&&(b=c[a],ke(this,a,b));else ke(this,a,
b);w.end();return e},shift:sk,sort:tk,splice:uk,subtract:function(a,b){return se(this,a,void 0===b?-1:-b)},teardown:function(){var a;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(ed);this.fragment.rendered&&this.el.__ractive_instances__&&T(this.el.__ractive_instances__,this);this.shouldDestroy=!0;a=this.fragment.rendered?this.unrender():ta.resolve();vk.fire(this);this._boundFunctions.forEach(gi);return a},toggle:function(a){var b=this;if("string"!==typeof a)throw new TypeError("Bad arguments");
var c=void 0;return/\*/.test(a)?(c={},cb(this,K(ba(a))).forEach(function(a){c[a.str]=!b.viewmodel.get(a)}),this.set(c)):this.set(a,!this.get(a))},toHTML:og,toHtml:og,unrender:function(){var a,b;if(!this.fragment.rendered)return J("ractive.unrender() was called on a Ractive instance that was not rendered"),ta.resolve();a=w.start(this,!0);for(b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();this.fragment.unrender(b);T(this.el.__ractive_instances__,
this);wk.fire(this);w.end();return a},unshift:xk,update:function(a){var b;a=K(a)||sa;b=w.start(this,!0);this.viewmodel.mark(a);w.end();yk.fire(this,a);return b},updateModel:function(a,b){var c,e;if("string"!==typeof a||b)for(c in e=[],this._twowayBindings)a&&!K(c).equalsOrStartsWith(a)||e.push.apply(e,this._twowayBindings[c]);else e=this._twowayBindings[a];c=hi(this,e);return this.set(c)}},li=function(a,b,c){return c||"function"===typeof b&&/_super/.test(a)?function(){var c="_super"in this,d=this._super,
f;this._super=b;f=a.apply(this,arguments);c&&(this._super=d);return f}:a},mi=function(a){for(var b={};a;)ii(a,b),ki(a,b),a=a._Parent!==ma?a._Parent:!1;return b},ia;ia=function(a){if(!(this instanceof ia))return new ia(a);$b(this,a)};Fa(ia,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:le},getNodeInfo:{value:function(a){var b={},c;if(!a||!(c=a._ractive))return b;b.ractive=c.root;b.keypath=c.keypath.str;b.index={};if(a=Ca(c.proxy.parentFragment))b.index=Ca.resolve(a);
return b}},parse:{value:gb},Promise:{value:ta},svg:{value:cc},magic:{value:ib},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:{linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return 1>(a/=.5)?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}}},events:{writable:!0,value:{}},interpolators:{writable:!0,value:lb},partials:{writable:!0,
value:{}},transitions:{writable:!0,value:{}}});ia.prototype=h(zk,ne);ia.prototype.constructor=ia;ia.defaults=ia.prototype;if("function"!==typeof Date.now||"function"!==typeof String.prototype.trim||"function"!==typeof Object.keys||"function"!==typeof Array.prototype.indexOf||"function"!==typeof Array.prototype.forEach||"function"!==typeof Array.prototype.map||"function"!==typeof Array.prototype.filter||"undefined"!==typeof window&&"function"!==typeof window.addEventListener)throw Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");
var ma=ia;return ma});(function(d,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):d.Ractive.events.tap=f()})(this,function(){function d(d,f){this.node=d;this.callback=f;this.preventMousedownEvents=!1;this.bind(d)}function f(d){this.__tap_handler__.mousedown(d)}function g(d){this.__tap_handler__.touchdown(d)}function h(){this.addEventListener("keydown",m,!1);this.addEventListener("blur",l,!1)}function l(){this.removeEventListener("keydown",m,
!1);this.removeEventListener("blur",l,!1)}function m(d){32===d.which&&this.__tap_handler__.fire()}d.prototype={bind:function(d){window.navigator.pointerEnabled?d.addEventListener("pointerdown",f,!1):window.navigator.msPointerEnabled?d.addEventListener("MSPointerDown",f,!1):d.addEventListener("mousedown",f,!1);d.addEventListener("touchstart",g,!1);"BUTTON"!==d.tagName&&"button"!==d.type||d.addEventListener("focus",h,!1);d.__tap_handler__=this},fire:function(d,f,h){this.callback({node:this.node,original:d,
x:f,y:h})},mousedown:function(d){var f=this;if(!this.preventMousedownEvents&&(void 0===d.which||1===d.which)){var h=d.clientX,g=d.clientY,l=d.pointerId,m=function(d){d.pointerId==l&&(f.fire(d,h,g),L())},I=function(d){d.pointerId==l&&(5<=Math.abs(d.clientX-h)||5<=Math.abs(d.clientY-g))&&L()},L=function P(){f.node.removeEventListener("MSPointerUp",m,!1);document.removeEventListener("MSPointerMove",I,!1);document.removeEventListener("MSPointerCancel",P,!1);f.node.removeEventListener("pointerup",m,!1);
document.removeEventListener("pointermove",I,!1);document.removeEventListener("pointercancel",P,!1);f.node.removeEventListener("click",m,!1);document.removeEventListener("mousemove",I,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",m,!1),document.addEventListener("pointermove",I,!1),document.addEventListener("pointercancel",L,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",m,!1),document.addEventListener("MSPointerMove",I,!1),document.addEventListener("MSPointerCancel",
L,!1)):(this.node.addEventListener("click",m,!1),document.addEventListener("mousemove",I,!1));setTimeout(L,400)}},touchdown:function(){var d=this,f=event.touches[0],h=f.clientX,g=f.clientY,l=f.identifier,m=function(f){f.changedTouches[0].identifier===l&&(f.preventDefault(),d.preventMousedownEvents=!0,clearTimeout(d.preventMousedownTimeout),d.preventMousedownTimeout=setTimeout(function(){d.preventMousedownEvents=!1},400),d.fire(f,h,g));L()},I=function(d){1===d.touches.length&&d.touches[0].identifier===
l||L();d=d.touches[0];(5<=Math.abs(d.clientX-h)||5<=Math.abs(d.clientY-g))&&L()},L=function P(){d.node.removeEventListener("touchend",m,!1);window.removeEventListener("touchmove",I,!1);window.removeEventListener("touchcancel",P,!1)};this.node.addEventListener("touchend",m,!1);window.addEventListener("touchmove",I,!1);window.addEventListener("touchcancel",L,!1);setTimeout(L,400)},teardown:function(){var d=this.node;d.removeEventListener("pointerdown",f,!1);d.removeEventListener("MSPointerDown",f,!1);
d.removeEventListener("mousedown",f,!1);d.removeEventListener("touchstart",g,!1);d.removeEventListener("focus",h,!1)}};return function(f,h){return new d(f,h)}});(function(d,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(d.Ractive.events)})(this,function(d){function f(d){return function(f,h){function g(l){(l.which||l.keyCode)===d&&(l.preventDefault(),h({node:f,original:l}))}f.addEventListener("keydown",g,!1);return{teardown:function(){f.removeEventListener("keydown",g,!1)}}}}var g=f(13),h=f(9),l=f(27),m=f(32),n=f(37),p=f(39),q=f(40),r=f(38);d.enter=g;d.tab=h;d.escape=l;d.space=
m;d.leftarrow=n;d.rightarrow=p;d.downarrow=q;d.uparrow=r});window.SECU=window.SECU||{};
window.SECU.Ajax={_data:{url:{api:{host:"https://api.secu.su",feedback:"/feedback",post:"/s",get:"/s/",stat:"/stat"},web:{host:"https://secu.su",page:"/"}}},assignHost:function(){var d=this._data,f=window.location.host;-1<f.indexOf("localhost")&&(d.url.api.host="https://api-test.secu.su",d.url.web.host=f)},call:function(d){return new Promise(function(f,g){var h=new XMLHttpRequest;h.open(d.method,d.url,!0);d.contentType&&h.setRequestHeader("Content-type",d.contentType);h.send(d.data);h.onload=function(){200<=
this.status&&300>this.status?f(this.response):g(this.statusText)};h.onerror=function(){g(this.statusText)}})},sendFeedback:function(d){var f=this._data;return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(d),url:f.url.api.host+f.url.api.feedback})},requestContainer:function(d){var f=this._data;return this.call({method:"GET",url:f.url.api.host+f.url.api.get+d})},sendContainer:function(d){var f=this._data;return this.call({method:"POST",contentType:"application/json;charset=UTF-8",
data:JSON.stringify(d),url:f.url.api.host+f.url.api.post})},getCount:function(){var d=this._data;return this.call({method:"GET",url:d.url.api.host+d.url.api.stat})}};window.SECU=window.SECU||{};
window.SECU.Crypt={_data:{encryptionParameters:{iterations:4096,keySize:256,authenticationStrength:128,authenticatedData:"S\u00cbCU",cipherMode:"gcm"}},getRandomHexValue:function(d,f){return sjcl.random.randomWords(d,f)},decrypt:function(d){return sjcl.decrypt(d.password,d.message,{},{})},encrypt:function(d){var f=this._data.encryptionParameters,f={adata:f.authenticatedData+"-"+(new Date).getTime(),iter:f.iterations,mode:f.cipherMode,ts:f.authenticationStrength,ks:f.keySize,iv:this.getRandomHexValue(4,
0),salt:this.getRandomHexValue(2,0)};return sjcl.encrypt(d.password,d.message,f,{})}};window.SECU=window.SECU||{};
window.SECU.Helpers={_data:{},watchScroll:function(){var d=this._data;d.nav={};d.nav.bar=document.getElementsByClassName("navbar")[0];d.nav.spacer=document.getElementsByClassName("navbar-spacer")[0];window.addEventListener("scroll",function(f){document.body.scrollTop>d.nav.spacer.offsetTop?(d.nav.bar.classList.add("docked"),d.nav.spacer.classList.add("docked")):(d.nav.bar.classList.remove("docked"),d.nav.spacer.classList.remove("docked"))},!1)},watchDragDrop:function(){function d(d){d.preventDefault();clearTimeout(g.dropTimeout);
switch(d.type){case "dragenter":case "dragover":f.set("dropActive",!0);g.dropTimeout=setTimeout(function(){f.set("dropActive",!1)},1E3);break;case "dragleave":g.dropTimeout=setTimeout(function(){f.set("dropActive",!1)},1E3);break;case "drop":f.set("dropActive",!1),document.getElementsByClassName("attachedFile").length&&(f.set("encrypt.rawFile",[d.dataTransfer.files[0]]),f.fire("checkFile"))}}var f=window.SECU.App._data.app,g=this._data;f.get("supportedFeatures.dragdrop")&&(document.body.addEventListener("dragover",
d,!1),document.body.addEventListener("dragenter",d,!1),document.body.addEventListener("dragleave",d,!1),document.body.addEventListener("drop",d,!1))},checkLocation:function(){var d=window.location.pathname.substring(1);d.length&&window.SECU.App._data.app.set("decrypt.hash",d)},checkCopy:function(){window.SECU.App._data.app.set("supportedFeatures.copy",document.queryCommandSupported("copy"))},checkDownload:function(){window.SECU.App._data.app.set("supportedFeatures.download","download"in document.createElement("a"))},
checkDragDrop:function(){var d=document.createElement("div");window.SECU.App._data.app.set("supportedFeatures.dragdrop","ondragstart"in d&&"ondrop"in d)},fixHeight:function(d,f){var g=window.SECU.App._data.app,h=d?d.node:document.getElementById(f+"ContainerBody"),l=getComputedStyle(h).getPropertyValue("border-width"),l=l.length?parseInt(l,10):1;g.set(f+".textareaHeight","0px");h.scrollHeight>h.offsetHeight&&g.set(f+".textareaHeight",h.scrollHeight+2*l+"px")},copyText:function(d){d.select();document.execCommand("copy");
d.blur();window.getSelection().removeAllRanges()},formatCounter:function(d){d=parseInt(d,10);return d.toLocaleString()}};window.SECU=window.SECU||{};
window.SECU.File={_data:{maxFileSize:1572864},base64ToBlob:function(d){var f=atob(d.split(",")[1]);d=d.split(",")[0].split(":")[1].split(";")[0];for(var g=new ArrayBuffer(f.length),h=new Uint8Array(g),l=0;l<f.length;l++)h[l]=f.charCodeAt(l);f=new Blob([g],{type:d});return URL.createObjectURL(f)},fileToBase64:function(d){var f=new FileReader;return new Promise(function(g,h){try{f.onload=function(d){g(d.target.result)},f.readAsDataURL(d)}catch(l){h(l)}})},getExtension:function(d){return d.split(".").pop()},prettifySize:function(d){d=
Math.round(d/1E3);return d=1E3<=d?(d/1E3).toFixed(1)+"MB":d+"KB"},validated:function(d){return(d=d[0])?d.size>this._data.maxFileSize?["The file is too big"]:d:!1}};window.SECU=window.SECU||{};window.SECU.Error={_data:{},show:function(d){var f=window.SECU.Error,g=f._data,h=window.SECU.App._data.app;h.set("errors.messages",d);h.set("errors.show",!0);clearTimeout(g.errorTimeout);g.errorTimeout=setTimeout(function(){f.hide()},3E3)},hide:function(){var d=window.SECU.Error._data;window.SECU.App._data.app.set("errors.show",!1);clearTimeout(d.errorTimeout)}};Ractive.DEBUG=!1;window.SECU=window.SECU||{};
window.SECU.App={_data:{params:{encrypt:{done:!1,link:"",formActive:!0,rawFile:[],fileData:{size:"",name:"",extension:""},file:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},decrypt:{done:!1,success:!0,hash:"",loaded:!1,formActive:!1,message:"",files:[],fileForm:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},feedback:{sent:!1,form:{body:"",email:""},textareaHeight:"0px"}}},reinitApp:function(d){var f=this._data,g=f.app;d&&(window.SECU.Error.hide(),
history.replaceState({},"S\u00ebcu","/"));g.set("formDisabled",!1);g.set("textCopied",!1);g.set("dropActive",!1);g.set("decrypt",JSON.parse(JSON.stringify(f.params.decrypt)));g.set("encrypt",JSON.parse(JSON.stringify(f.params.encrypt)));g.set("feedback",JSON.parse(JSON.stringify(f.params.feedback)))},refreshCount:function(d){var f=this._data;f.app.set("counter.number",window.SECU.Helpers.formatCounter(d));f.app.set("counter.show",!0)},requestCount:function(){var d=this;window.SECU.Ajax.getCount().then(function(f){f=
JSON.parse(f);d.refreshCount(f.secu.count)},function(d){window.SECU.Error.show([d])})},init:function(){var d=this,f=this._data,g=new Ractive({el:document.getElementsByClassName("secuApp")[0],template:"#secuApp",data:{counter:{show:!1,number:"9000"},show:{main:!0,faq:!1,feedback:!1},formDisabled:!1,textCopied:!1,dropActive:!1,supportedFeatures:{copy:!0,download:!0,dragdrop:!0},errors:{show:!1,messages:[]}}});f.app=g;this.reinitApp();g.set("encrypt.formActive",!1);g.on({hideError:function(){window.SECU.Error.hide()},
toggleView:function(d,f){d.original&&d.original.preventDefault();if(this.get("show."+f))return!1;window.SECU.Error.hide();var g=this.get("show"),n;for(n in g)this.set("show."+n,!1);this.set("show."+f,!0)},sendFeedback:function(d){d.original&&d.original.preventDefault();d=this.get("feedback.form");var f=this;window.SECU.Error.hide();if(!d.body.length)return window.SECU.Error.show(["The message can't be empty"]),!1;f.set("formDisabled",!0);window.SECU.Ajax.sendFeedback(d).then(function(d){f.set("feedback.sent",
!0);f.set("formDisabled",!1);f.set("feedback.form",{body:"",email:""})},function(d){window.SECU.Error.show([d])})},fixHeight:window.SECU.Helpers.fixHeight,attachFile:function(d){d.original&&d.original.preventDefault();this.get("encrypt.rawFile").length?(this.set("encrypt.rawFile",[]),this.find("#messageFile").value=""):this.find("#messageFile").click()},downloadFile:function(d){this.get("supportedFeatures.download")||(d.original&&d.original.preventDefault(),window.open(d.node.href,"_blank").focus())},
checkFile:function(d){window.SECU.Error.hide();var f=this,g=window.SECU.File.validated(this.get("encrypt.rawFile"));if(g&&!g[0]){var n=window.SECU.File.prettifySize(g.size),p=window.SECU.File.getExtension(g.name);window.SECU.File.fileToBase64(g).then(function(d){f.set("encrypt.file.message",d);f.set("encrypt.fileData",{name:g.name,size:n,extension:p})},function(d){window.SECU.Error.show([d])})}else this.set("encrypt.fileData",{name:"",size:"",extension:""}),g[0]&&(this.set("encrypt.rawFile",[]),window.SECU.Error.show(["The file is too big"]))},
resetApp:function(f,g){f.original&&f.original.preventDefault();d.reinitApp(g)},requestContainer:function(f,g){f.original&&f.original.preventDefault();var m=this,n=null;m.set("formDisabled",!0);window.SECU.Ajax.requestContainer(g).then(function(f){f=JSON.parse(f);f.data.hasOwnProperty("text")?"string"===typeof f.data.text?(m.set("decrypt.message",f.data.text),m.set("decrypt.done",!0),f.data.text.length&&setTimeout(function(){window.SECU.Helpers.fixHeight(null,"decrypt")},0)):m.set("decrypt.form.message",
JSON.stringify(f.data.text)):f.data.hasOwnProperty("plaintext")?(m.set("decrypt.message",f.data.plaintext),m.set("decrypt.done",!0),f.data.plaintext.length&&setTimeout(function(){window.SECU.Helpers.fixHeight(null,"decrypt")},0)):m.set("decrypt.form.message",JSON.stringify(f.data));f.data.files&&f.data.files[0]&&(n=f.data.files[0],m.set("decrypt.files.0.name",n.name),m.set("decrypt.files.0.extension",window.SECU.File.getExtension(n.name)),"string"===typeof n.data?(m.set("decrypt.done",!0),m.set("decrypt.files.0.data",
window.SECU.File.base64ToBlob(n.data))):m.set("decrypt.fileForm.message",JSON.stringify(n.data)));m.set("decrypt.loaded",!0);m.set("decrypt.formActive",!0);m.set("formDisabled",!1);d.refreshCount(f.stat.secu.count)},function(d){window.SECU.Error.show([d])})},selectInput:function(d){d.node.select()},copyText:function(d,f){d.original&&d.original.preventDefault();var g=this;window.SECU.Helpers.copyText(document.getElementById(f));this.set("textCopied",!0);setTimeout(function(){g.set("textCopied",!1)},
1E3)},createContainer:function(f){f.original&&f.original.preventDefault();window.SECU.Error.hide();if(!this.get("encrypt.form.message").length&&!this.get("encrypt.rawFile").length)return window.SECU.Error.show(["There should be either message or file"]),!1;this.set("formDisabled",!0);var g=this;f=this.get("encrypt.form.password");var m="",n=[],m=f.length?JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.form"))):this.get("encrypt.form.message");this.get("encrypt.rawFile").length&&(f.length?(this.set("encrypt.file.password",
f),n.push({data:JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.file"))),name:this.get("encrypt.fileData.name")})):n.push({data:this.get("encrypt.file.message"),name:this.get("encrypt.fileData.name")}));window.SECU.Ajax.sendContainer({data:{text:m,files:n}}).then(function(f){f=JSON.parse(f);g.set("encrypt.link",window.SECU.Ajax._data.url.web.host+window.SECU.Ajax._data.url.web.page+f.hash);g.set("encrypt.formActive",!1);g.set("encrypt.done",!0);g.set("formDisabled",!1);setTimeout(function(){document.getElementById("containerLink").select()},
0);d.refreshCount(f.stat.secu.count)},function(d){window.SECU.Error.show([d])})},decryptContainer:function(d){d.original&&d.original.preventDefault();window.SECU.Error.hide();if(!this.get("decrypt.form.password").length)return window.SECU.Error.show(["You must provide a password"]),!1;d=this.get("decrypt.form.password");this.set("formDisabled",!0);this.set("decrypt.fileForm.password",d);if(this.get("decrypt.form.message").length)try{this.set("decrypt.message",window.SECU.Crypt.decrypt(this.get("decrypt.form")))}catch(f){this.set("decrypt.success",
!1)}if(this.get("decrypt.fileForm.message").length)try{this.set("decrypt.files.0.data",window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt(this.get("decrypt.fileForm"))))}catch(f){this.set("decrypt.success",!1)}this.set("decrypt.fileForm",{message:"",password:""});this.set("decrypt.form",{message:"",password:""});this.set("decrypt.done",!0);this.set("formDisabled",!1);this.get("decrypt.success")&&this.get("decrypt.message").length&&setTimeout(function(){window.SECU.Helpers.fixHeight(null,"decrypt");
setTimeout(function(){document.getElementById("decryptContainerBody").select()},0)},0)}});window.SECU.Helpers.checkLocation();window.SECU.Helpers.checkCopy();window.SECU.Helpers.checkDownload();window.SECU.Helpers.checkDragDrop();window.SECU.Helpers.watchDragDrop();window.SECU.Helpers.watchScroll();window.SECU.Ajax.assignHost();this.requestCount()}};window.SECU.App.init();
