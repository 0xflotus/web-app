var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(f){this.toString=function(){return"CORRUPT: "+this.message};this.message=f},invalid:function(f){this.toString=function(){return"INVALID: "+this.message};this.message=f},bug:function(f){this.toString=function(){return"BUG: "+this.message};this.message=f},notReady:function(f){this.toString=function(){return"NOT READY: "+this.message};this.message=f}}};
sjcl.cipher.aes=function(f){this.s[0][0][0]||this.O();var a,d,c,e,k=this.s[0][4],l=this.s[1];a=f.length;var m=1;if(4!==a&&6!==a&&8!==a)throw new sjcl.exception.invalid("invalid aes key size");this.b=[c=f.slice(0),e=[]];for(f=a;f<4*a+28;f++){d=c[f-1];if(0===f%a||8===a&&4===f%a)d=k[d>>>24]<<24^k[d>>16&255]<<16^k[d>>8&255]<<8^k[d&255],0===f%a&&(d=d<<8^d>>>24^m<<24,m=m<<1^283*(m>>7));c[f]=c[f-a]^d}for(a=0;f;a++,f--)d=c[a&3?f:f-4],e[a]=4>=f||4>a?d:l[0][k[d>>>24]]^l[1][k[d>>16&255]]^l[2][k[d>>8&255]]^l[3][k[d&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(f){return t(this,f,0)},decrypt:function(f){return t(this,f,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var f=this.s[0],a=this.s[1],d=f[4],c=a[4],e,k,l,m=[],n=[],r,v,q,x;for(e=0;256>e;e++)n[(m[e]=e<<1^283*(e>>7))^e]=e;for(k=l=0;!d[k];k^=r||1,l=n[l]||1)for(q=l^l<<1^l<<2^l<<3^l<<4,q=q>>8^q&255^99,d[k]=q,c[q]=k,v=m[e=m[r=m[k]]],x=16843009*v^65537*e^257*r^16843008*k,v=257*m[q]^16843008*q,e=0;4>e;e++)f[e][k]=v=v<<24^v>>>8,a[e][q]=x=x<<24^x>>>8;for(e=
0;5>e;e++)f[e]=f[e].slice(0),a[e]=a[e].slice(0)}};
function t(f,a,d){if(4!==a.length)throw new sjcl.exception.invalid("invalid aes block size");var c=f.b[d],e=a[0]^c[0],k=a[d?3:1]^c[1],l=a[2]^c[2];a=a[d?1:3]^c[3];var m,n,r,v=c.length/4-2,q,x=4,w=[0,0,0,0];m=f.s[d];f=m[0];var J=m[1],N=m[2],L=m[3],ca=m[4];for(q=0;q<v;q++)m=f[e>>>24]^J[k>>16&255]^N[l>>8&255]^L[a&255]^c[x],n=f[k>>>24]^J[l>>16&255]^N[a>>8&255]^L[e&255]^c[x+1],r=f[l>>>24]^J[a>>16&255]^N[e>>8&255]^L[k&255]^c[x+2],a=f[a>>>24]^J[e>>16&255]^N[k>>8&255]^L[l&255]^c[x+3],x+=4,e=m,k=n,l=r;for(q=
0;4>q;q++)w[d?3&-q:q]=ca[e>>>24]<<24^ca[k>>16&255]<<16^ca[l>>8&255]<<8^ca[a&255]^c[x++],m=e,e=k,k=l,l=a,a=m;return w}
sjcl.bitArray={bitSlice:function(f,a,d){f=sjcl.bitArray.$(f.slice(a/32),32-(a&31)).slice(1);return void 0===d?f:sjcl.bitArray.clamp(f,d-a)},extract:function(f,a,d){var c=Math.floor(-a-d&31);return((a+d-1^a)&-32?f[a/32|0]<<32-c^f[a/32+1|0]>>>c:f[a/32|0]>>>c)&(1<<d)-1},concat:function(f,a){if(0===f.length||0===a.length)return f.concat(a);var d=f[f.length-1],c=sjcl.bitArray.getPartial(d);return 32===c?f.concat(a):sjcl.bitArray.$(a,c,d|0,f.slice(0,f.length-1))},bitLength:function(f){var a=f.length;return 0===
a?0:32*(a-1)+sjcl.bitArray.getPartial(f[a-1])},clamp:function(f,a){if(32*f.length<a)return f;f=f.slice(0,Math.ceil(a/32));var d=f.length;a&=31;0<d&&a&&(f[d-1]=sjcl.bitArray.partial(a,f[d-1]&2147483648>>a-1,1));return f},partial:function(f,a,d){return 32===f?a:(d?a|0:a<<32-f)+1099511627776*f},getPartial:function(f){return Math.round(f/1099511627776)||32},equal:function(f,a){if(sjcl.bitArray.bitLength(f)!==sjcl.bitArray.bitLength(a))return!1;var d=0,c;for(c=0;c<f.length;c++)d|=f[c]^a[c];return 0===
d},$:function(f,a,d,c){var e;for(void 0===c&&(c=[]);32<=a;a-=32)c.push(d),d=0;if(0===a)return c.concat(f);for(e=0;e<f.length;e++)c.push(d|f[e]>>>a),d=f[e]<<32-a;e=f.length?f[f.length-1]:0;f=sjcl.bitArray.getPartial(e);c.push(sjcl.bitArray.partial(a+f&31,32<a+f?d:c.pop(),1));return c},i:function(f,a){return[f[0]^a[0],f[1]^a[1],f[2]^a[2],f[3]^a[3]]},byteswapM:function(f){var a,d;for(a=0;a<f.length;++a)d=f[a],f[a]=d>>>24|d>>>8&65280|(d&65280)<<8|d<<24;return f}};
sjcl.codec.utf8String={fromBits:function(f){var a="",d=sjcl.bitArray.bitLength(f),c,e;for(c=0;c<d/8;c++)0===(c&3)&&(e=f[c/4]),a+=String.fromCharCode(e>>>24),e<<=8;return decodeURIComponent(escape(a))},toBits:function(f){f=unescape(encodeURIComponent(f));var a=[],d,c=0;for(d=0;d<f.length;d++)c=c<<8|f.charCodeAt(d),3===(d&3)&&(a.push(c),c=0);d&3&&a.push(sjcl.bitArray.partial(8*(d&3),c));return a}};
sjcl.codec.hex={fromBits:function(f){var a="",d;for(d=0;d<f.length;d++)a+=((f[d]|0)+0xf00000000000).toString(16).substr(4);return a.substr(0,sjcl.bitArray.bitLength(f)/4)},toBits:function(f){var a,d=[],c;f=f.replace(/\s|0x/g,"");c=f.length;f+="00000000";for(a=0;a<f.length;a+=8)d.push(parseInt(f.substr(a,8),16)^0);return sjcl.bitArray.clamp(d,4*c)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(f,a,d){var c=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,k="",l=0,m=sjcl.codec.base32.B,n=0,r=sjcl.bitArray.bitLength(f);d&&(m=sjcl.codec.base32.X);for(d=0;k.length*c<r;)k+=m.charAt((n^f[d]>>>l)>>>e),l<c?(n=f[d]<<c-l,l+=e,d++):(n<<=c,l-=c);for(;k.length&7&&!a;)k+="=";return k},toBits:function(f,a){f=f.replace(/\s|=/g,"").toUpperCase();var d=sjcl.codec.base32.BITS,
c=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,k=[],l,m=0,n=sjcl.codec.base32.B,r=0,v,q="base32";a&&(n=sjcl.codec.base32.X,q="base32hex");for(l=0;l<f.length;l++){v=n.indexOf(f.charAt(l));if(0>v){if(!a)try{return sjcl.codec.base32hex.toBits(f)}catch(x){}throw new sjcl.exception.invalid("this isn't "+q+"!");}m>e?(m-=e,k.push(r^v>>>m),r=v<<d-m):(m+=c,r^=v<<d-m)}m&56&&k.push(sjcl.bitArray.partial(m&56,r,1));return k}};
sjcl.codec.base32hex={fromBits:function(f,a){return sjcl.codec.base32.fromBits(f,a,1)},toBits:function(f){return sjcl.codec.base32.toBits(f,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(f,a,d){var c="",e=0,k=sjcl.codec.base64.B,l=0,m=sjcl.bitArray.bitLength(f);d&&(k=k.substr(0,62)+"-_");for(d=0;6*c.length<m;)c+=k.charAt((l^f[d]>>>e)>>>26),6>e?(l=f[d]<<6-e,e+=26,d++):(l<<=6,e-=6);for(;c.length&3&&!a;)c+="=";return c},toBits:function(f,a){f=f.replace(/\s|=/g,"");var d=[],c,e=0,k=sjcl.codec.base64.B,l=0,m;a&&(k=k.substr(0,62)+"-_");for(c=0;c<f.length;c++){m=k.indexOf(f.charAt(c));
if(0>m)throw new sjcl.exception.invalid("this isn't base64!");26<e?(e-=26,d.push(l^m>>>e),l=m<<32-e):(e+=6,l^=m<<32-e)}e&56&&d.push(sjcl.bitArray.partial(e&56,l,1));return d}};sjcl.codec.base64url={fromBits:function(f){return sjcl.codec.base64.fromBits(f,1,1)},toBits:function(f){return sjcl.codec.base64.toBits(f,1)}};sjcl.hash.sha256=function(f){this.b[0]||this.O();f?(this.F=f.F.slice(0),this.A=f.A.slice(0),this.l=f.l):this.reset()};sjcl.hash.sha256.hash=function(f){return(new sjcl.hash.sha256).update(f).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(f){"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));var a,d=this.A=sjcl.bitArray.concat(this.A,f);a=this.l;f=this.l=a+sjcl.bitArray.bitLength(f);if(9007199254740991<f)throw new sjcl.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!==typeof Uint32Array){var c=new Uint32Array(d),e=0;for(a=512+a-(512+a&511);a<=f;a+=512)u(this,c.subarray(16*e,
16*(e+1))),e+=1;d.splice(0,16*e)}else for(a=512+a-(512+a&511);a<=f;a+=512)u(this,d.splice(0,16));return this},finalize:function(){var f,a=this.A,d=this.F,a=sjcl.bitArray.concat(a,[sjcl.bitArray.partial(1,1)]);for(f=a.length+2;f&15;f++)a.push(0);a.push(Math.floor(this.l/4294967296));for(a.push(this.l|0);a.length;)u(this,a.splice(0,16));this.reset();return d},Y:[],b:[],O:function(){function f(a){return 4294967296*(a-Math.floor(a))|0}for(var a=0,d=2,c,e;64>a;d++){e=!0;for(c=2;c*c<=d;c++)if(0===d%c){e=
!1;break}e&&(8>a&&(this.Y[a]=f(Math.pow(d,.5))),this.b[a]=f(Math.pow(d,1/3)),a++)}}};
function u(f,a){var d,c,e,k=f.F,l=f.b,m=k[0],n=k[1],r=k[2],v=k[3],q=k[4],x=k[5],w=k[6],J=k[7];for(d=0;64>d;d++)16>d?c=a[d]:(c=a[d+1&15],e=a[d+14&15],c=a[d&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+a[d&15]+a[d+9&15]|0),c=c+J+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(w^q&(x^w))+l[d],J=w,w=x,x=q,q=v+c|0,v=r,r=n,n=m,m=c+(n&r^v&(n^r))+(n>>>2^n>>>13^n>>>22^n<<30^n<<19^n<<10)|0;k[0]=k[0]+m|0;k[1]=k[1]+n|0;k[2]=k[2]+r|0;k[3]=k[3]+v|0;k[4]=k[4]+q|0;k[5]=k[5]+x|0;k[6]=k[6]+w|0;k[7]=
k[7]+J|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(f){sjcl.mode.ccm.G.push(f)},unListenProgress:function(f){f=sjcl.mode.ccm.G.indexOf(f);-1<f&&sjcl.mode.ccm.G.splice(f,1)},fa:function(f){var a=sjcl.mode.ccm.G.slice(),d;for(d=0;d<a.length;d+=1)a[d](f)},encrypt:function(f,a,d,c,e){var k,l=a.slice(0),m=sjcl.bitArray,n=m.bitLength(d)/8,r=m.bitLength(l)/8;e=e||64;c=c||[];if(7>n)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(k=2;4>k&&r>>>8*k;k++);k<15-n&&(k=15-n);d=m.clamp(d,
8*(15-k));a=sjcl.mode.ccm.V(f,a,d,c,e,k);l=sjcl.mode.ccm.C(f,l,d,a,e,k);return m.concat(l.data,l.tag)},decrypt:function(f,a,d,c,e){e=e||64;c=c||[];var k=sjcl.bitArray,l=k.bitLength(d)/8,m=k.bitLength(a),n=k.clamp(a,m-e),r=k.bitSlice(a,m-e),m=(m-e)/8;if(7>l)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&m>>>8*a;a++);a<15-l&&(a=15-l);d=k.clamp(d,8*(15-a));n=sjcl.mode.ccm.C(f,n,d,r,e,a);f=sjcl.mode.ccm.V(f,n.data,d,c,e,a);if(!k.equal(n.tag,f))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return n.data},na:function(f,a,d,c,e,k){var l=[],m=sjcl.bitArray,n=m.i;c=[m.partial(8,(a.length?64:0)|c-2<<2|k-1)];c=m.concat(c,d);c[3]|=e;c=f.encrypt(c);if(a.length)for(d=m.bitLength(a)/8,65279>=d?l=[m.partial(16,d)]:4294967295>=d&&(l=m.concat([m.partial(16,65534)],[d])),l=m.concat(l,a),a=0;a<l.length;a+=4)c=f.encrypt(n(c,l.slice(a,a+4).concat([0,0,0])));return c},V:function(f,a,d,c,e,k){var l=sjcl.bitArray,m=l.i;e/=8;if(e%2||4>e||16<e)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(4294967295<c.length||4294967295<a.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");d=sjcl.mode.ccm.na(f,c,d,e,l.bitLength(a)/8,k);for(c=0;c<a.length;c+=4)d=f.encrypt(m(d,a.slice(c,c+4).concat([0,0,0])));return l.clamp(d,8*e)},C:function(f,a,d,c,e,k){var l,m=sjcl.bitArray;l=m.i;var n=a.length,r=m.bitLength(a),v=n/50,q=v;d=m.concat([m.partial(8,k-1)],d).concat([0,0,0]).slice(0,4);c=m.bitSlice(l(c,f.encrypt(d)),0,e);if(!n)return{tag:c,data:[]};for(l=0;l<n;l+=4)l>v&&(sjcl.mode.ccm.fa(l/
n),v+=q),d[3]++,e=f.encrypt(d),a[l]^=e[0],a[l+1]^=e[1],a[l+2]^=e[2],a[l+3]^=e[3];return{tag:c,data:m.clamp(a,r)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(f,a,d,c,e,k){if(128!==sjcl.bitArray.bitLength(d))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var l,m=sjcl.mode.ocb2.S,n=sjcl.bitArray,r=n.i,v=[0,0,0,0];d=m(f.encrypt(d));var q,x=[];c=c||[];e=e||64;for(l=0;l+4<a.length;l+=4)q=a.slice(l,l+4),v=r(v,q),x=x.concat(r(d,f.encrypt(r(d,q)))),d=m(d);q=a.slice(l);a=n.bitLength(q);l=f.encrypt(r(d,[0,0,0,a]));q=n.clamp(r(q.concat([0,0,0]),l),a);v=r(v,r(q.concat([0,0,0]),l));v=f.encrypt(r(v,r(d,m(d))));
c.length&&(v=r(v,k?c:sjcl.mode.ocb2.pmac(f,c)));return x.concat(n.concat(q,n.clamp(v,e)))},decrypt:function(f,a,d,c,e,k){if(128!==sjcl.bitArray.bitLength(d))throw new sjcl.exception.invalid("ocb iv must be 128 bits");e=e||64;var l=sjcl.mode.ocb2.S,m=sjcl.bitArray,n=m.i,r=[0,0,0,0],v=l(f.encrypt(d)),q,x,w=sjcl.bitArray.bitLength(a)-e,J=[];c=c||[];for(d=0;d+4<w/32;d+=4)q=n(v,f.decrypt(n(v,a.slice(d,d+4)))),r=n(r,q),J=J.concat(q),v=l(v);x=w-32*d;q=f.encrypt(n(v,[0,0,0,x]));q=n(q,m.clamp(a.slice(d),x).concat([0,
0,0]));r=n(r,q);r=f.encrypt(n(r,n(v,l(v))));c.length&&(r=n(r,k?c:sjcl.mode.ocb2.pmac(f,c)));if(!m.equal(m.clamp(r,e),m.bitSlice(a,w)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return J.concat(m.clamp(q,x))},pmac:function(f,a){var d,c=sjcl.mode.ocb2.S,e=sjcl.bitArray,k=e.i,l=[0,0,0,0],m=f.encrypt([0,0,0,0]),m=k(m,c(c(m)));for(d=0;d+4<a.length;d+=4)m=c(m),l=k(l,f.encrypt(k(m,a.slice(d,d+4))));d=a.slice(d);128>e.bitLength(d)&&(m=k(m,c(m)),d=e.concat(d,[-2147483648,0,0,0]));l=k(l,d);
return f.encrypt(k(c(k(m,c(m))),l))},S:function(f){return[f[0]<<1^f[1]>>>31,f[1]<<1^f[2]>>>31,f[2]<<1^f[3]>>>31,f[3]<<1^135*(f[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(f,a,d,c,e){var k=a.slice(0);a=sjcl.bitArray;c=c||[];f=sjcl.mode.gcm.C(!0,f,k,c,d,e||128);return a.concat(f.data,f.tag)},decrypt:function(f,a,d,c,e){var k=a.slice(0),l=sjcl.bitArray,m=l.bitLength(k);e=e||128;c=c||[];e<=m?(a=l.bitSlice(k,m-e),k=l.bitSlice(k,0,m-e)):(a=k,k=[]);f=sjcl.mode.gcm.C(!1,f,k,c,d,e);if(!l.equal(f.tag,a))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return f.data},ka:function(f,a){var d,c,e,k,l,m=sjcl.bitArray.i;e=[0,0,
0,0];k=a.slice(0);for(d=0;128>d;d++){0!==(f[Math.floor(d/32)]&1<<31-d%32)&&(e=m(e,k));l=0!==(k[3]&1);for(c=3;0<c;c--)k[c]=k[c]>>>1|(k[c-1]&1)<<31;k[0]>>>=1;l&&(k[0]^=-520093696)}return e},j:function(f,a,d){var c,e=d.length;a=a.slice(0);for(c=0;c<e;c+=4)a[0]^=4294967295&d[c],a[1]^=4294967295&d[c+1],a[2]^=4294967295&d[c+2],a[3]^=4294967295&d[c+3],a=sjcl.mode.gcm.ka(a,f);return a},C:function(f,a,d,c,e,k){var l,m,n,r,v,q,x,w,J=sjcl.bitArray;q=d.length;x=J.bitLength(d);w=J.bitLength(c);m=J.bitLength(e);
l=a.encrypt([0,0,0,0]);96===m?(e=e.slice(0),e=J.concat(e,[1])):(e=sjcl.mode.gcm.j(l,[0,0,0,0],e),e=sjcl.mode.gcm.j(l,e,[0,0,Math.floor(m/4294967296),m&4294967295]));m=sjcl.mode.gcm.j(l,[0,0,0,0],c);v=e.slice(0);c=m.slice(0);f||(c=sjcl.mode.gcm.j(l,m,d));for(r=0;r<q;r+=4)v[3]++,n=a.encrypt(v),d[r]^=n[0],d[r+1]^=n[1],d[r+2]^=n[2],d[r+3]^=n[3];d=J.clamp(d,x);f&&(c=sjcl.mode.gcm.j(l,m,d));f=[Math.floor(w/4294967296),w&4294967295,Math.floor(x/4294967296),x&4294967295];c=sjcl.mode.gcm.j(l,c,f);n=a.encrypt(e);
c[0]^=n[0];c[1]^=n[1];c[2]^=n[2];c[3]^=n[3];return{tag:J.bitSlice(c,0,k),data:d}}};sjcl.misc.hmac=function(f,a){this.W=a=a||sjcl.hash.sha256;var d=[[],[]],c,e=a.prototype.blockSize/32;this.w=[new a,new a];f.length>e&&(f=a.hash(f));for(c=0;c<e;c++)d[0][c]=f[c]^909522486,d[1][c]=f[c]^1549556828;this.w[0].update(d[0]);this.w[1].update(d[1]);this.R=new a(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(f){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(f);return this.digest(f)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(f){this.aa=!0;this.R.update(f)};sjcl.misc.hmac.prototype.digest=function(){var f=this.R.finalize(),f=(new this.W(this.w[1])).update(f).finalize();this.reset();return f};
sjcl.misc.pbkdf2=function(f,a,d,c,e){d=d||1E4;if(0>c||0>d)throw new sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));e=e||sjcl.misc.hmac;f=new e(f);var k,l,m,n,r=[],v=sjcl.bitArray;for(n=1;32*r.length<(c||1);n++){e=k=f.encrypt(v.concat(a,[n]));for(l=1;l<d;l++)for(k=f.encrypt(k),m=0;m<k.length;m++)e[m]^=k[m];r=r.concat(e)}c&&(r=v.clamp(r,c));return r};
sjcl.prng=function(f){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=f;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=65536;this.T=[0,48,64,96,128,192,256,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(f,a){var d=[],c;c=this.isReady(a);var e;if(c===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(c&this.J){c=!(c&this.I);e=[];var k=0,l;this.Z=e[0]=(new Date).valueOf()+this.da;for(l=0;16>l;l++)e.push(4294967296*Math.random()|0);for(l=0;l<this.c.length&&(e=e.concat(this.c[l].finalize()),k+=this.m[l],this.m[l]=0,c||!(this.P&1<<l));l++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=k;k>this.o&&(this.o=
k);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(e));this.L=new sjcl.cipher.aes(this.b);for(c=0;4>c&&(this.h[c]=this.h[c]+1|0,!this.h[c]);c++);}for(c=0;c<f;c+=4)0===(c+1)%this.ca&&y(this),e=z(this),d.push(e[0],e[1],e[2],e[3]);y(this);return d.slice(0,f)},setDefaultParanoia:function(f,a){if(0===f&&"Setting paranoia=0 will ruin your security; use it only for testing"!==a)throw new sjcl.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=f},addEntropy:function(f,
a,d){d=d||"user";var c,e,k=(new Date).valueOf(),l=this.H[d],m=this.isReady(),n=0;c=this.U[d];void 0===c&&(c=this.U[d]=this.ha++);void 0===l&&(l=this.H[d]=0);this.H[d]=(this.H[d]+1)%this.c.length;switch(typeof f){case "number":void 0===a&&(a=1);this.c[l].update([c,this.N++,1,a,k,1,f|0]);break;case "object":d=Object.prototype.toString.call(f);if("[object Uint32Array]"===d){e=[];for(d=0;d<f.length;d++)e.push(f[d]);f=e}else for("[object Array]"!==d&&(n=1),d=0;d<f.length&&!n;d++)"number"!==typeof f[d]&&
(n=1);if(!n){if(void 0===a)for(d=a=0;d<f.length;d++)for(e=f[d];0<e;)a++,e>>>=1;this.c[l].update([c,this.N++,2,a,k,f.length].concat(f))}break;case "string":void 0===a&&(a=f.length);this.c[l].update([c,this.N++,3,a,k,f.length]);this.c[l].update(f);break;default:n=1}if(n)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[l]+=a;this.f+=a;m===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},
isReady:function(f){f=this.T[void 0!==f?f:this.M];return this.o&&this.o>=f?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=f?this.J|this.u:this.u},getProgress:function(f){f=this.T[f?f:this.M];return this.o>=f?1:this.f>f?1:this.f/f},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",
this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(f,a){this.K[f][this.ga++]=a},removeEventListener:function(f,a){var d,c,e=this.K[f],k=[];for(c in e)e.hasOwnProperty(c)&&e[c]===a&&k.push(c);for(d=0;d<k.length;d++)c=k[d],delete e[c]},la:function(){C(this,1)},oa:function(f){var a,d;try{a=f.x||f.clientX||f.offsetX||0,d=f.y||f.clientY||f.offsetY||0}catch(c){d=a=0}0!=a&&0!=d&&this.addEntropy([a,d],2,"mouse");C(this,0)},qa:function(f){f=
f.touches[0]||f.changedTouches[0];this.addEntropy([f.pageX||f.clientX,f.pageY||f.clientY],1,"touch");C(this,0)},ma:function(){C(this,2)},ea:function(f){f=f.accelerationIncludingGravity.x||f.accelerationIncludingGravity.y||f.accelerationIncludingGravity.z;if(window.orientation){var a=window.orientation;"number"===typeof a&&this.addEntropy(a,1,"accelerometer")}f&&this.addEntropy(f,2,"accelerometer");C(this,0)}};
function A(f,a){var d,c=sjcl.random.K[f],e=[];for(d in c)c.hasOwnProperty(d)&&e.push(c[d]);for(d=0;d<e.length;d++)e[d](a)}function C(f,a){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?f.addEntropy(window.performance.now(),a,"loadtime"):f.addEntropy((new Date).valueOf(),a,"loadtime")}function y(f){f.b=z(f).concat(z(f));f.L=new sjcl.cipher.aes(f.b)}function z(f){for(var a=0;4>a&&(f.h[a]=f.h[a]+1|0,!f.h[a]);a++);return f.L.encrypt(f.h)}
function B(f,a){return function(){a.apply(f,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(f){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(f){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(f))}
sjcl.json={defaults:{v:1,iter:1E4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(f,a,d,c){d=d||{};c=c||{};var e=sjcl.json,k=e.g({iv:sjcl.random.randomWords(4,0)},e.defaults),l;e.g(k,d);d=k.adata;"string"===typeof k.salt&&(k.salt=sjcl.codec.base64.toBits(k.salt));"string"===typeof k.iv&&(k.iv=sjcl.codec.base64.toBits(k.iv));if(!sjcl.mode[k.mode]||!sjcl.cipher[k.cipher]||"string"===typeof f&&100>=k.iter||64!==k.ts&&96!==k.ts&&128!==k.ts||128!==k.ks&&192!==k.ks&&256!==k.ks||2>k.iv.length||
4<k.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof f?(l=sjcl.misc.cachedPbkdf2(f,k),f=l.key.slice(0,k.ks/32),k.salt=l.salt):sjcl.ecc&&f instanceof sjcl.ecc.elGamal.publicKey&&(l=f.kem(),k.kemtag=l.tag,f=l.key.slice(0,k.ks/32));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));"string"===typeof d&&(k.adata=d=sjcl.codec.utf8String.toBits(d));l=new sjcl.cipher[k.cipher](f);e.g(c,k);c.key=f;k.ct="ccm"===k.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
a instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(l,a,k.iv,d,k.ts):sjcl.mode[k.mode].encrypt(l,a,k.iv,d,k.ts);return k},encrypt:function(f,a,d,c){var e=sjcl.json,k=e.ja.apply(e,arguments);return e.encode(k)},ia:function(f,a,d,c){d=d||{};c=c||{};var e=sjcl.json;a=e.g(e.g(e.g({},e.defaults),a),d,!0);var k,l;k=a.adata;"string"===typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt));"string"===typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv));if(!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"===
typeof f&&100>=a.iter||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||!a.iv||2>a.iv.length||4<a.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof f?(l=sjcl.misc.cachedPbkdf2(f,a),f=l.key.slice(0,a.ks/32),a.salt=l.salt):sjcl.ecc&&f instanceof sjcl.ecc.elGamal.secretKey&&(f=f.unkem(sjcl.codec.base64.toBits(a.kemtag)).slice(0,a.ks/32));"string"===typeof k&&(k=sjcl.codec.utf8String.toBits(k));l=new sjcl.cipher[a.cipher](f);k="ccm"===
a.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&a.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(l,a.ct,a.iv,a.tag,k,a.ts):sjcl.mode[a.mode].decrypt(l,a.ct,a.iv,k,a.ts);e.g(c,a);c.key=f;return 1===d.raw?k:sjcl.codec.utf8String.fromBits(k)},decrypt:function(f,a,d,c){var e=sjcl.json;return e.ia(f,e.decode(a),d,c)},encode:function(f){var a,d="{",c="";for(a in f)if(f.hasOwnProperty(a)){if(!a.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");d+=c+'"'+
a+'":';c=",";switch(typeof f[a]){case "number":case "boolean":d+=f[a];break;case "string":d+='"'+escape(f[a])+'"';break;case "object":d+='"'+sjcl.codec.base64.fromBits(f[a],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return d+"}"},decode:function(f){f=f.replace(/\s/g,"");if(!f.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");f=f.replace(/^\{|\}$/g,"").split(/,/);var a={},d,c;for(d=0;d<f.length;d++){if(!(c=f[d].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=c[3]?a[c[2]]=parseInt(c[3],10):null!=c[4]?a[c[2]]=c[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(c[4]):unescape(c[4]):null!=c[5]&&(a[c[2]]="true"===c[5])}return a},g:function(f,a,d){void 0===f&&(f={});if(void 0===a)return f;for(var c in a)if(a.hasOwnProperty(c)){if(d&&void 0!==f[c]&&f[c]!==a[c])throw new sjcl.exception.invalid("required parameter overridden");f[c]=a[c]}return f},sa:function(f,a){var d={},c;for(c in f)f.hasOwnProperty(c)&&f[c]!==a[c]&&(d[c]=f[c]);return d},ra:function(f,
a){var d={},c;for(c=0;c<a.length;c++)void 0!==f[a[c]]&&(d[a[c]]=f[a[c]]);return d}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(f,a){var d=sjcl.misc.pa,c;a=a||{};c=a.iter||1E3;d=d[f]=d[f]||{};c=d[c]=d[c]||{firstSalt:a.salt&&a.salt.length?a.salt.slice(0):sjcl.random.randomWords(2,0)};d=void 0===a.salt?c.firstSalt:a.salt;c[d]=c[d]||sjcl.misc.pbkdf2(f,d,a.iter);return{key:c[d].slice(0),salt:d.slice(0)}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});/*
 https://mths.be/utf8js v2.0.0 by @mathias  JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */
(function(f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define([],f):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).io=f()})(function(){return function a(d,c,e){function k(m,r){if(!c[m]){if(!d[m]){var n="function"==typeof require&&require;if(!r&&n)return n(m,!0);if(l)return l(m,!0);n=Error("Cannot find module '"+m+"'");throw n.code="MODULE_NOT_FOUND",n;}n=c[m]={exports:{}};
d[m][0].call(n.exports,function(a){var c=d[m][1][a];return k(c?c:a)},n,n.exports,a,d,c,e)}return c[m].exports}for(var l="function"==typeof require&&require,m=0;m<e.length;m++)k(e[m]);return k}({1:[function(a,d,c){d.exports=a("./lib/")},{"./lib/":2}],2:[function(a,d,c){d.exports=a("./socket");d.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,d,c){(function(c){function e(a,d){if(!(this instanceof e))return new e(a,d);d=d||{};a&&"object"==typeof a&&(d=a,a=null);
a?(a=q(a),d.hostname=a.host,d.secure="https"==a.protocol||"wss"==a.protocol,d.port=a.port,a.query&&(d.query=a.query)):d.host&&(d.hostname=q(d.host).host);this.secure=null!=d.secure?d.secure:c.location&&"https:"==location.protocol;d.hostname&&!d.port&&(d.port=this.secure?"443":"80");this.agent=d.agent||!1;this.hostname=d.hostname||(c.location?location.hostname:"localhost");this.port=d.port||(c.location&&location.port?location.port:this.secure?443:80);this.query=d.query||{};"string"==typeof this.query&&
(this.query=w.decode(this.query));this.upgrade=!1!==d.upgrade;this.path=(d.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!d.forceJSONP;this.jsonp=!1!==d.jsonp;this.forceBase64=!!d.forceBase64;this.enablesXDR=!!d.enablesXDR;this.timestampParam=d.timestampParam||"t";this.timestampRequests=d.timestampRequests;this.transports=d.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=d.policyPort||843;this.rememberUpgrade=d.rememberUpgrade||!1;this.binaryType=
null;this.onlyBinaryUpgrades=d.onlyBinaryUpgrades;this.perMessageDeflate=!1!==d.perMessageDeflate?d.perMessageDeflate||{}:!1;!0===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=d.pfx||null;this.key=d.key||null;this.passphrase=d.passphrase||null;this.cert=d.cert||null;this.ca=d.ca||null;this.ciphers=d.ciphers||null;this.rejectUnauthorized=void 0===d.rejectUnauthorized?null:d.rejectUnauthorized;
var l="object"==typeof c&&c;l.global===l&&d.extraHeaders&&0<Object.keys(d.extraHeaders).length&&(this.extraHeaders=d.extraHeaders);this.open()}var l=a("./transports"),m=a("component-emitter"),n=a("debug")("engine.io-client:socket"),r=a("indexof"),v=a("engine.io-parser"),q=a("parseuri"),x=a("parsejson"),w=a("parseqs");d.exports=e;e.priorWebsocketSuccess=!1;m(e.prototype);e.protocol=v.protocol;e.Socket=e;e.Transport=a("./transport");e.transports=a("./transports");e.parser=a("engine.io-parser");e.prototype.createTransport=
function(a){n('creating transport "%s"',a);var c=this.query,d={},e;for(e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);d.EIO=v.protocol;d.transport=a;this.id&&(d.sid=this.id);return new l[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:d,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,
key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})};e.prototype.open=function(){var a;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var c=this;setTimeout(function(){c.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState=
"opening";try{a=this.createTransport(a)}catch(L){this.transports.shift();this.open();return}a.open();this.setTransport(a)};e.prototype.setTransport=function(a){n("setting transport %s",a.name);var c=this;this.transport&&(n("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){c.onDrain()}).on("packet",function(a){c.onPacket(a)}).on("error",function(a){c.onError(a)}).on("close",function(){c.onClose("transport close")})};
e.prototype.probe=function(a){function c(){if(x.onlyBinaryUpgrades){var c=!this.supportsBinary&&x.transport.supportsBinary;w=w||c}w||(n('probe transport "%s" opened',a),q.send([{type:"ping",data:"probe"}]),q.once("packet",function(c){w||("pong"==c.type&&"probe"==c.data?(n('probe transport "%s" pong',a),x.upgrading=!0,x.emit("upgrading",q),q&&(e.priorWebsocketSuccess="websocket"==q.name,n('pausing current transport "%s"',x.transport.name),x.transport.pause(function(){w||"closed"==x.readyState||(n("changing transport and sending upgrade packet"),
r(),x.setTransport(q),q.send([{type:"upgrade"}]),x.emit("upgrade",q),q=null,x.upgrading=!1,x.flush())}))):(n('probe transport "%s" failed',a),c=Error("probe error"),c.transport=q.name,x.emit("upgradeError",c)))}))}function d(){w||(w=!0,r(),q.close(),q=null)}function l(c){var e=Error("probe error: "+c);e.transport=q.name;d();n('probe transport "%s" failed because of error: %s',a,c);x.emit("upgradeError",e)}function k(){l("transport closed")}function m(){l("socket closed")}function J(a){q&&a.name!=
q.name&&(n('"%s" works - aborting "%s"',a.name,q.name),d())}function r(){q.removeListener("open",c);q.removeListener("error",l);q.removeListener("close",k);x.removeListener("close",m);x.removeListener("upgrading",J)}n('probing transport "%s"',a);var q=this.createTransport(a,{probe:1}),w=!1,x=this;e.priorWebsocketSuccess=!1;q.once("open",c);q.once("error",l);q.once("close",k);this.once("close",m);this.once("upgrading",J);q.open()};e.prototype.onOpen=function(){n("socket open");this.readyState="open";
e.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){n("starting upgrade probes");for(var a=0,c=this.upgrades.length;a<c;a++)this.probe(this.upgrades[a])}};e.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(n('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(x(a.data));break;
case "pong":this.setPing();this.emit("pong");break;case "error":var c=Error("server error");c.code=a.data;this.onError(c);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else n('packet received with socket readyState "%s"',this.readyState)};e.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=
this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};e.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var c=this;c.pingTimeoutTimer=setTimeout(function(){if("closed"!=c.readyState)c.onClose("ping timeout")},a||c.pingInterval+c.pingTimeout)};e.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){n("writing ping packet - expecting pong within %sms",
a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};e.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})};e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};e.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(n("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};e.prototype.write=e.prototype.send=function(a,c,d){this.sendPacket("message",a,c,d);return this};e.prototype.sendPacket=function(a,c,d,e){"function"==typeof c&&(e=c,c=void 0);"function"==typeof d&&(e=d,d=null);if("closing"!=this.readyState&&"closed"!=this.readyState){d=d||{};d.compress=!1!==d.compress;a={type:a,data:c,options:d};this.emit("packetCreate",a);this.writeBuffer.push(a);if(e)this.once("flush",
e);this.flush()}};e.prototype.close=function(){function a(){e.onClose("forced close");n("socket closing - telling transport to close");e.transport.close()}function c(){e.removeListener("upgrade",c);e.removeListener("upgradeError",c);a()}function d(){e.once("upgrade",c);e.once("upgradeError",c)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?d():a()});else this.upgrading?d():a()}return this};
e.prototype.onError=function(a){n("socket error %j",a);e.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};e.prototype.onClose=function(a,c){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState)n('socket close with reason: "%s"',a),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=
null,this.emit("close",a,c),this.writeBuffer=[],this.prevBufferLen=0};e.prototype.filterUpgrades=function(a){for(var c=[],d=0,e=a.length;d<e;d++)~r(this.transports,a[d])&&c.push(a[d]);return c}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,d,c){function e(a){this.path=a.path;this.hostname=
a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders}var k=a("engine.io-parser");a=a("component-emitter");d.exports=e;a(e.prototype);
e.prototype.onError=function(a,c){var d=Error(a);d.type="TransportError";d.description=c;this.emit("error",d);return this};e.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};e.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};e.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};e.prototype.onOpen=
function(){this.readyState="open";this.writable=!0;this.emit("open")};e.prototype.onData=function(a){a=k.decodePacket(a,this.socket.binaryType);this.onPacket(a)};e.prototype.onPacket=function(a){this.emit("packet",a)};e.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,d,c){(function(d){var e=a("xmlhttprequest-ssl"),l=a("./polling-xhr"),m=a("./polling-jsonp"),n=a("./websocket");c.polling=function(a){var c=!1,k=
!1,n=!1!==a.jsonp;d.location&&(k="https:"==location.protocol,(c=location.port)||(c=k?443:80),c=a.hostname!=location.hostname||c!=a.port,k=a.secure!=k);a.xdomain=c;a.xscheme=k;if("open"in new e(a)&&!a.forceJSONP)return new l(a);if(!n)throw Error("JSONP disabled");return new m(a)};c.websocket=n}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,
d,c){(function(c){function e(){}function l(a){m.call(this,a);this.query=this.query||{};q||(c.___eio||(c.___eio=[]),q=c.___eio);this.index=q.length;var d=this;q.push(function(a){d.onData(a)});this.query.j=this.index;c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){d.script&&(d.script.onerror=e)},!1)}var m=a("./polling"),n=a("component-inherit");d.exports=l;var r=/\n/g,v=/\\n/g,q;n(l,m);l.prototype.supportsBinary=!1;l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);m.prototype.doClose.call(this)};l.prototype.doPoll=function(){var a=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);c.async=!0;c.src=this.uri();c.onerror=function(c){a.onError("jsonp poll error",c)};var d=document.getElementsByTagName("script")[0];d?d.parentNode.insertBefore(c,d):(document.head||document.body).appendChild(c);
this.script=c;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};l.prototype.doWrite=function(a,c){function d(){e();c()}function e(){if(k.iframe)try{k.form.removeChild(k.iframe)}catch(Ua){k.onError("jsonp polling iframe removal error",Ua)}try{q=document.createElement('<iframe src="javascript:0" name="'+k.iframeId+'">')}catch(Ua){q=document.createElement("iframe"),
q.name=k.iframeId,q.src="javascript:0"}q.id=k.iframeId;k.form.appendChild(q);k.iframe=q}var k=this;if(!this.form){var l=document.createElement("form"),m=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index,q;l.className="socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=n;l.method="POST";l.setAttribute("accept-charset","utf-8");m.name="d";l.appendChild(m);document.body.appendChild(l);this.form=l;this.area=m}this.form.action=this.uri();
e();a=a.replace(v,"\\\n");this.area.value=a.replace(r,"\\n");try{this.form.submit()}catch(Ua){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==k.iframe.readyState&&d()}:this.iframe.onload=d}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,d,c){(function(c){function e(){}function l(a){v.call(this,a);if(c.location){var d="https:"==location.protocol,
e=location.port;e||(e=d?443:80);this.xd=a.hostname!=c.location.hostname||e!=a.port;this.xs=a.secure!=d}else this.extraHeaders=a.extraHeaders}function m(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=
a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders;this.create()}function n(){for(var a in m.requests)m.requests.hasOwnProperty(a)&&m.requests[a].abort()}var r=a("xmlhttprequest-ssl"),v=a("./polling"),q=a("component-emitter"),x=a("component-inherit"),w=a("debug")("engine.io-client:polling-xhr");d.exports=l;d.exports.Request=m;x(l,v);l.prototype.supportsBinary=!0;l.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||
!1;a.supportsBinary=this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;a.extraHeaders=this.extraHeaders;return new m(a)};l.prototype.doWrite=function(a,c){var d=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a}),e=this;d.on("success",c);d.on("error",function(a){e.onError("xhr post error",a)});this.sendXhr=d};l.prototype.doPoll=
function(){w("xhr poll");var a=this.request(),c=this;a.on("data",function(a){c.onData(a)});a.on("error",function(a){c.onError("xhr poll error",a)});this.pollXhr=a};q(m.prototype);m.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new r(a),e=this;try{w("xhr open %s: %s",
this.method,this.uri);d.open(this.method,this.uri,this.async);try{if(this.extraHeaders){d.setDisableHeaderCheck(!0);for(var k in this.extraHeaders)this.extraHeaders.hasOwnProperty(k)&&d.setRequestHeader(k,this.extraHeaders[k])}}catch(Z){}this.supportsBinary&&(d.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Z){}"withCredentials"in d&&(d.withCredentials=
!0);this.hasXDR()?(d.onload=function(){e.onLoad()},d.onerror=function(){e.onError(d.responseText)}):d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status||1223==d.status)e.onLoad();else setTimeout(function(){e.onError(d.status)},0)};w("xhr data %s",this.data);d.send(this.data)}catch(Z){setTimeout(function(){e.onError(Z)},0);return}c.document&&(this.index=m.requestsCount++,m.requests[this.index]=this)};m.prototype.onSuccess=function(){this.emit("success");this.cleanup()};m.prototype.onData=
function(a){this.emit("data",a);this.onSuccess()};m.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};m.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e;if(a)try{this.xhr.abort()}catch(N){}c.document&&delete m.requests[this.index];this.xhr=null}};m.prototype.onLoad=function(){var a;try{var c;try{c=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(aa){}if("application/octet-stream"===
c)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(aa){var d=new Uint8Array(this.xhr.response);c=[];for(var e=0,k=d.length;e<k;e++)c.push(d[e]);a=String.fromCharCode.apply(null,c)}else a=this.xhr.responseText}catch(aa){this.onError(aa)}if(null!=a)this.onData(a)};m.prototype.hasXDR=function(){return"undefined"!==typeof c.XDomainRequest&&!this.xs&&this.enablesXDR};m.prototype.abort=function(){this.cleanup()};c.document&&(m.requestsCount=
0,m.requests={},c.attachEvent?c.attachEvent("onunload",n):c.addEventListener&&c.addEventListener("beforeunload",n,!1))}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,d,c){function e(a){var c=a&&a.forceBase64;if(!v||c)this.supportsBinary=!1;k.call(this,a)}var k=a("../transport"),l=a("parseqs"),m=a("engine.io-parser");c=
a("component-inherit");var n=a("yeast"),r=a("debug")("engine.io-client:polling");d.exports=e;var v=null!=(new (a("xmlhttprequest-ssl"))({xdomain:!1})).responseType;c(e,k);e.prototype.name="polling";e.prototype.doOpen=function(){this.poll()};e.prototype.pause=function(a){function c(){r("paused");d.readyState="paused";a()}var d=this;this.readyState="pausing";if(this.polling||!this.writable){var e=0;this.polling&&(r("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){r("pre-pause polling complete");
--e||c()}));this.writable||(r("we are currently writing - waiting to pause"),e++,this.once("drain",function(){r("pre-pause writing complete");--e||c()}))}else c()};e.prototype.poll=function(){r("polling");this.polling=!0;this.doPoll();this.emit("poll")};e.prototype.onData=function(a){var c=this;r("polling got data %s",a);m.decodePayload(a,this.socket.binaryType,function(a,d,e){if("opening"==c.readyState)c.onOpen();if("close"==a.type)return c.onClose(),!1;c.onPacket(a)});"closed"!=this.readyState&&
(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():r('ignoring poll - transport state "%s"',this.readyState))};e.prototype.doClose=function(){function a(){r("writing close packet");c.write([{type:"close"}])}var c=this;"open"==this.readyState?(r("transport open - closing"),a()):(r("transport not open - deferring close"),this.once("open",a))};e.prototype.write=function(a){var c=this;this.writable=!1;var d=function(){c.writable=!0;c.emit("drain")},c=this;m.encodePayload(a,
this.supportsBinary,function(a){c.doWrite(a,d)})};e.prototype.uri=function(){var a=this.query||{},c=this.secure?"https":"http",d="";!1!==this.timestampRequests&&(a[this.timestampParam]=n());this.supportsBinary||a.sid||(a.b64=1);a=l.encode(a);this.port&&("https"==c&&443!=this.port||"http"==c&&80!=this.port)&&(d=":"+this.port);a.length&&(a="?"+a);var e=-1!==this.hostname.indexOf(":");return c+"://"+(e?"["+this.hostname+"]":this.hostname)+d+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,
"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,d,c){(function(c){function e(a){a&&a.forceBase64&&(this.supportsBinary=!1);this.perMessageDeflate=a.perMessageDeflate;l.call(this,a)}var l=a("../transport"),m=a("engine.io-parser"),n=a("parseqs"),r=a("component-inherit"),v=a("yeast"),q=a("debug")("engine.io-client:websocket"),x=c.WebSocket||c.MozWebSocket,w=x;if(!w&&"undefined"===typeof window)try{w=a("ws")}catch(J){}d.exports=e;r(e,l);e.prototype.name="websocket";e.prototype.supportsBinary=
!0;e.prototype.doOpen=function(){if(this.check()){var a=this.uri(),c={agent:this.agent,perMessageDeflate:this.perMessageDeflate};c.pfx=this.pfx;c.key=this.key;c.passphrase=this.passphrase;c.cert=this.cert;c.ca=this.ca;c.ciphers=this.ciphers;c.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(c.headers=this.extraHeaders);this.ws=x?new w(a):new w(a,void 0,c);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=
"buffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};e.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(c){a.onData(c.data)};this.ws.onerror=function(c){a.onError("websocket error",c)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(e.prototype.onData=function(a){var c=this;setTimeout(function(){l.prototype.onData.call(c,a)},0)});e.prototype.write=
function(a){function d(){e.emit("flush");setTimeout(function(){e.writable=!0;e.emit("drain")},0)}var e=this;this.writable=!1;for(var l=a.length,k=0,n=l;k<n;k++)(function(a){m.encodePacket(a,e.supportsBinary,function(k){if(!x){var m={};a.options&&(m.compress=a.options.compress);e.perMessageDeflate&&("string"==typeof k?c.Buffer.byteLength(k):k.length)<e.perMessageDeflate.threshold&&(m.compress=!1)}try{x?e.ws.send(k):e.ws.send(k,m)}catch(wb){q("websocket closed before onclose event")}--l||d()})})(a[k])};
e.prototype.onClose=function(){l.prototype.onClose.call(this)};e.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};e.prototype.uri=function(){var a=this.query||{},c=this.secure?"wss":"ws",d="";this.port&&("wss"==c&&443!=this.port||"ws"==c&&80!=this.port)&&(d=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=v());this.supportsBinary||(a.b64=1);a=n.encode(a);a.length&&(a="?"+a);var e=-1!==this.hostname.indexOf(":");return c+"://"+(e?"["+this.hostname+"]":this.hostname)+
d+this.path+a};e.prototype.check=function(){return!!w&&!("__initialize"in w&&this.name===e.prototype.name)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,d,c){var e=a("has-cors");d.exports=function(a){var c=a.xdomain,d=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!c||e))return new XMLHttpRequest}catch(n){}try{if("undefined"!=
typeof XDomainRequest&&!d&&a)return new XDomainRequest}catch(n){}if(!c)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}},{"has-cors":22}],11:[function(a,d,c){function e(){}d.exports=function(a,c,d){function k(a,e){if(0>=k.count)throw Error("after called too many times");--k.count;a?(l=!0,c(a),c=d):0!==k.count||l||c(null,e)}var l=!1;d=d||e;k.count=a;return 0===a?c():k}},{}],12:[function(a,d,c){d.exports=function(a,c,d){var e=a.byteLength;c=c||0;d=d||e;if(a.slice)return a.slice(c,d);0>
c&&(c+=e);0>d&&(d+=e);d>e&&(d=e);if(c>=e||c>=d||0===e)return new ArrayBuffer(0);a=new Uint8Array(a);for(var e=new Uint8Array(d-c),k=0;c<d;c++,k++)e[k]=a[c];return e.buffer}},{}],13:[function(a,d,c){(function(a){c.encode=function(c){c=new Uint8Array(c);var d,e=c.length,k="";for(d=0;d<e;d+=3)k+=a[c[d]>>2],k+=a[(c[d]&3)<<4|c[d+1]>>4],k+=a[(c[d+1]&15)<<2|c[d+2]>>6],k+=a[c[d+2]&63];2===e%3?k=k.substring(0,k.length-1)+"=":1===e%3&&(k=k.substring(0,k.length-2)+"==");return k};c.decode=function(c){var d=
.75*c.length,e=c.length,k=0,r,v,q,x;"="===c[c.length-1]&&(d--,"="===c[c.length-2]&&d--);for(var w=new ArrayBuffer(d),J=new Uint8Array(w),d=0;d<e;d+=4)r=a.indexOf(c[d]),v=a.indexOf(c[d+1]),q=a.indexOf(c[d+2]),x=a.indexOf(c[d+3]),J[k++]=r<<2|v>>4,J[k++]=(v&15)<<4|q>>2,J[k++]=(q&3)<<6|x&63;return w}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,d,c){(function(a){function c(a){for(var c=0;c<a.length;c++){var d=a[c];if(d.buffer instanceof ArrayBuffer){var e=
d.buffer;if(d.byteLength!==e.byteLength){var k=new Uint8Array(d.byteLength);k.set(new Uint8Array(e,d.byteOffset,d.byteLength));e=k.buffer}a[c]=e}}}function e(a,d){d=d||{};var e=new n;c(a);for(var k=0;k<a.length;k++)e.append(a[k]);return d.type?e.getBlob(d.type):e.getBlob()}function m(a,d){c(a);return new Blob(a,d||{})}var n=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,r;try{r=2===(new Blob(["hi"])).size}catch(x){r=!1}var v;if(v=r)try{v=2===(new Blob([new Uint8Array([1,2])])).size}catch(x){v=
!1}var q=n&&n.prototype.append&&n.prototype.getBlob;a=r?v?a.Blob:m:q?e:void 0;d.exports=a}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],15:[function(a,d,c){function e(a){if(a){for(var c in e.prototype)a[c]=e.prototype[c];return a}}d.exports=e;e.prototype.on=e.prototype.addEventListener=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(c);return this};e.prototype.once=function(a,
c){function d(){e.off(a,d);c.apply(this,arguments)}var e=this;this._callbacks=this._callbacks||{};d.fn=c;this.on(a,d);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(a,c){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks[a];if(!d)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var e,k=0;k<d.length;k++)if(e=d[k],e===c||e.fn===c){d.splice(k,
1);break}return this};e.prototype.emit=function(a){this._callbacks=this._callbacks||{};var c=[].slice.call(arguments,1),d=this._callbacks[a];if(d)for(var d=d.slice(0),e=0,k=d.length;e<k;++e)d[e].apply(this,c);return this};e.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};e.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,d,c){d.exports=function(a,c){var d=function(){};d.prototype=c.prototype;a.prototype=new d;
a.prototype.constructor=a}},{}],17:[function(a,d,c){function e(){var a;try{a=c.storage.debug}catch(m){}return a}c=d.exports=a("./debug");c.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};c.formatArgs=function(){var a=arguments,d=this.useColors;a[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+a[0]+(d?"%c ":" ")+"+"+c.humanize(this.diff);if(!d)return a;var d="color: "+this.color,a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,
1)),e=0,k=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(k=e))});a.splice(k,0,d);return a};c.save=function(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(m){}};c.load=e;c.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};var k;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)k=
chrome.storage.local;else a:{try{k=window.localStorage;break a}catch(l){}k=void 0}c.storage=k;c.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");c.formatters.j=function(a){return JSON.stringify(a)};c.enable(e())},{"./debug":18}],18:[function(a,d,c){c=d.exports=function(a){function d(){}function l(){var a=+new Date;l.diff=a-(k||a);l.prev=k;k=l.curr=a;null==l.useColors&&(l.useColors=c.useColors());null==l.color&&l.useColors&&(l.color=c.colors[e++%c.colors.length]);
var d=Array.prototype.slice.call(arguments);d[0]=c.coerce(d[0]);"string"!==typeof d[0]&&(d=["%o"].concat(d));var m=0;d[0]=d[0].replace(/%([a-z%])/g,function(a,e){if("%%"===a)return a;m++;var k=c.formatters[e];"function"===typeof k&&(a=k.call(l,d[m]),d.splice(m,1),m--);return a});"function"===typeof c.formatArgs&&(d=c.formatArgs.apply(l,d));(l.log||c.log||console.log.bind(console)).apply(l,d)}d.enabled=!1;l.enabled=!0;var r=c.enabled(a)?l:d;r.namespace=a;return r};c.coerce=function(a){return a instanceof
Error?a.stack||a.message:a};c.disable=function(){c.enable("")};c.enable=function(a){c.save(a);for(var d=(a||"").split(/[\s,]+/),e=d.length,k=0;k<e;k++)d[k]&&(a=d[k].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))};c.enabled=function(a){var d,e;d=0;for(e=c.skips.length;d<e;d++)if(c.skips[d].test(a))return!1;d=0;for(e=c.names.length;d<e;d++)if(c.names[d].test(a))return!0;return!1};c.humanize=a("ms");c.names=[];c.skips=[];c.formatters=
{};var e=0,k},{ms:25}],19:[function(a,d,c){(function(d){function e(a,d,e){if(!d)return c.encodeBase64Packet(a,e);var k=new FileReader;k.onload=function(){a.data=k.result;c.encodePacket(a,d,!0,e)};return k.readAsArrayBuffer(a.data)}function l(a,c,d){var e=Array(a.length);d=q(a.length,d);for(var k=function(a,d,k){c(d,function(c,d){e[a]=d;k(c,e)})},l=0;l<a.length;l++)k(l,a[l],d)}var m=a("./keys"),n=a("has-binary"),r=a("arraybuffer.slice"),v=a("base64-arraybuffer"),q=a("after"),x=a("utf8"),w=navigator.userAgent.match(/Android/i),
J=/PhantomJS/i.test(navigator.userAgent),N=w||J;c.protocol=3;var L=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},ca=m(L),Z={type:"error",data:"parser error"},aa=a("blob");c.encodePacket=function(a,k,l,m){"function"==typeof k&&(m=k,k=!1);"function"==typeof l&&(m=l,l=null);var n=void 0===a.data?void 0:a.data.buffer||a.data;if(d.ArrayBuffer&&n instanceof ArrayBuffer){if(k){l=a.data;k=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=L[a.type];for(a=0;a<k.length;a++)l[a+1]=
k[a];a=m(l.buffer)}else a=c.encodeBase64Packet(a,m);return a}if(aa&&n instanceof d.Blob)return k?N?a=e(a,k,m):(k=new Uint8Array(1),k[0]=L[a.type],a=new aa([k.buffer,a.data]),a=m(a)):a=c.encodeBase64Packet(a,m),a;if(n&&n.base64)return m("b"+c.packets[a.type]+a.data.data);k=L[a.type];void 0!==a.data&&(k+=l?x.encode(String(a.data)):String(a.data));return m(""+k)};c.encodeBase64Packet=function(a,e){var k="b"+c.packets[a.type];if(aa&&a.data instanceof d.Blob){var l=new FileReader;l.onload=function(){var a=
l.result.split(",")[1];e(k+a)};return l.readAsDataURL(a.data)}var m;try{m=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(ua){m=new Uint8Array(a.data);for(var n=Array(m.length),q=0;q<m.length;q++)n[q]=m[q];m=String.fromCharCode.apply(null,n)}k+=d.btoa(m);return e(k)};c.decodePacket=function(a,d,e){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),d);if(e)try{a=x.decode(a)}catch(wb){return Z}e=a.charAt(0);return Number(e)==e&&ca[e]?1<a.length?
{type:ca[e],data:a.substring(1)}:{type:ca[e]}:Z}e=(new Uint8Array(a))[0];a=r(a,1);aa&&"blob"===d&&(a=new aa([a]));return{type:ca[e],data:a}};c.decodeBase64Packet=function(a,c){var e=ca[a.charAt(0)];if(!d.ArrayBuffer)return{type:e,data:{base64:!0,data:a.substr(1)}};var k=v.decode(a.substr(1));"blob"===c&&aa&&(k=new aa([k]));return{type:e,data:k}};c.encodePayload=function(a,d,e){"function"==typeof d&&(e=d,d=null);var k=n(a);if(d&&k)return aa&&!N?c.encodePayloadAsBlob(a,e):c.encodePayloadAsArrayBuffer(a,
e);if(!a.length)return e("0:");l(a,function(a,e){c.encodePacket(a,k?d:!1,!0,function(a){e(null,a.length+":"+a)})},function(a,c){return e(c.join(""))})};c.decodePayload=function(a,d,e){if("string"!=typeof a)return c.decodePayloadAsBinary(a,d,e);"function"===typeof d&&(e=d,d=null);var k;if(""==a)return e(Z,0,1);k="";for(var l,m,n=0,q=a.length;n<q;n++)if(m=a.charAt(n),":"!=m)k+=m;else{if(""==k||k!=(l=Number(k)))return e(Z,0,1);m=a.substr(n+1,l);if(k!=m.length)return e(Z,0,1);if(m.length){k=c.decodePacket(m,
d,!0);if(Z.type==k.type&&Z.data==k.data)return e(Z,0,1);if(!1===e(k,n+l,q))return}n+=l;k=""}if(""!=k)return e(Z,0,1)};c.encodePayloadAsArrayBuffer=function(a,d){if(!a.length)return d(new ArrayBuffer(0));l(a,function(a,d){c.encodePacket(a,!0,!0,function(a){return d(null,a)})},function(a,c){var e=c.reduce(function(a,d){var c;c="string"===typeof d?d.length:d.byteLength;return a+c.toString().length+c+2},0),k=new Uint8Array(e),l=0;c.forEach(function(a){var d="string"===typeof a,c=a;if(d){for(var c=new Uint8Array(a.length),
e=0;e<a.length;e++)c[e]=a.charCodeAt(e);c=c.buffer}d?k[l++]=0:k[l++]=1;a=c.byteLength.toString();for(e=0;e<a.length;e++)k[l++]=parseInt(a[e]);k[l++]=255;c=new Uint8Array(c);for(e=0;e<c.length;e++)k[l++]=c[e]});return d(k.buffer)})};c.encodePayloadAsBlob=function(a,d){l(a,function(a,d){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var e=new Uint8Array(a.length),k=0;k<a.length;k++)e[k]=a.charCodeAt(k);a=e.buffer;c[0]=0}for(var e=(a instanceof ArrayBuffer?
a.byteLength:a.size).toString(),l=new Uint8Array(e.length+1),k=0;k<e.length;k++)l[k]=parseInt(e[k]);l[e.length]=255;aa&&(a=new aa([c.buffer,l.buffer,a]),d(null,a))})},function(a,c){return d(new aa(c))})};c.decodePayloadAsBinary=function(a,d,e){"function"===typeof d&&(e=d,d=null);for(var k=[],l=!1;0<a.byteLength;){for(var m=new Uint8Array(a),n=0===m[0],q="",J=1;255!=m[J];J++){if(310<q.length){l=!0;break}q+=m[J]}if(l)return e(Z,0,1);a=r(a,2+q.length);q=parseInt(q);m=r(a,0,q);if(n)try{m=String.fromCharCode.apply(null,
new Uint8Array(m))}catch(Ga){for(n=new Uint8Array(m),m="",J=0;J<n.length;J++)m+=String.fromCharCode(n[J])}k.push(m);a=r(a,q)}var w=k.length;k.forEach(function(a,k){e(c.decodePacket(a,d,!0),k,w)})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,d,c){d.exports=Object.keys||function(a){var c=[],d=Object.prototype.hasOwnProperty,
e;for(e in a)d.call(a,e)&&c.push(e);return c}},{}],21:[function(a,d,c){(function(c){var e=a("isarray");d.exports=function(a){function d(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a))for(var k=0;k<a.length;k++){if(d(a[k]))return!0}else if(a&&"object"==typeof a)for(k in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,k)&&d(a[k]))return!0;return!1}return d(a)}}).call(this,
"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:24}],22:[function(a,d,c){try{d.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){d.exports=!1}},{}],23:[function(a,d,c){var e=[].indexOf;d.exports=function(a,c){if(e)return a.indexOf(c);for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}},{}],24:[function(a,d,c){d.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},
{}],25:[function(a,d,c){function e(a){a=""+a;if(!(1E4<a.length)&&(a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a))){var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*c;case "days":case "day":case "d":return 864E5*c;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*
c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function k(a,c,d){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+d:Math.ceil(a/c)+" "+d+"s"}d.exports=function(a,c){c=c||{};return"string"==typeof a?e(a):c["long"]?k(a,864E5,"day")||k(a,36E5,"hour")||k(a,6E4,"minute")||k(a,1E3,"second")||a+" ms":864E5<=a?Math.round(a/864E5)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=
a?Math.round(a/1E3)+"s":a+"ms"}},{}],26:[function(a,d,c){(function(a){var c=/^[\],:{}\s]*$/,e=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,n=/(?:^|:|,)(?:\s*\[)+/g,r=/^\s+/,v=/\s+$/;d.exports=function(d){if("string"!=typeof d||!d)return null;d=d.replace(r,"").replace(v,"");if(a.JSON&&JSON.parse)return JSON.parse(d);if(c.test(d.replace(e,"@").replace(m,"]").replace(n,"")))return(new Function("return "+d))()}}).call(this,"undefined"!==typeof self?
self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],27:[function(a,d,c){c.encode=function(a){var c="",d;for(d in a)a.hasOwnProperty(d)&&(c.length&&(c+="&"),c+=encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return c};c.decode=function(a){var c={};a=a.split("&");for(var d=0,e=a.length;d<e;d++){var n=a[d].split("=");c[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return c}},{}],28:[function(a,d,c){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
k="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");d.exports=function(a){var c=a,d=a.indexOf("["),l=a.indexOf("]");-1!=d&&-1!=l&&(a=a.substring(0,d)+a.substring(d,l).replace(/:/g,";")+a.substring(l,a.length));a=e.exec(a||"");for(var v={},q=14;q--;)v[k[q]]=a[q]||"";-1!=d&&-1!=l&&(v.source=c,v.host=v.host.substring(1,v.host.length-1).replace(/;/g,":"),v.authority=v.authority.replace("[","").replace("]","").replace(/;/g,":"),v.ipv6uri=
!0);return v}},{}],29:[function(a,d,c){(function(a){(function(e){function k(a){for(var c=[],d=0,e=a.length,k,l;d<e;)k=a.charCodeAt(d++),55296<=k&&56319>=k&&d<e?(l=a.charCodeAt(d++),56320==(l&64512)?c.push(((k&1023)<<10)+(l&1023)+65536):(c.push(k),d--)):c.push(k);return c}function m(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");}function n(){if(L>=N)throw Error("Invalid byte index");var a=J[L]&255;L++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");
}function r(){var a,c,d,e;if(L>N)throw Error("Invalid byte index");if(L==N)return!1;a=J[L]&255;L++;if(0==(a&128))return a;if(192==(a&224)){c=n();a=(a&31)<<6|c;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){c=n();d=n();a=(a&15)<<12|c<<6|d;if(2048<=a)return m(a),a;throw Error("Invalid continuation byte");}if(240==(a&248)&&(c=n(),d=n(),e=n(),a=(a&15)<<18|c<<12|d<<6|e,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var v="object"==typeof c&&c,q="object"==
typeof d&&d&&d.exports==v&&d,x="object"==typeof a&&a;if(x.global===x||x.window===x)e=x;var w=String.fromCharCode,J,N,L,x={version:"2.0.0",encode:function(a){a=k(a);for(var c=a.length,d=-1,e,l="";++d<c;){e=a[d];if(0==(e&4294967168))e=w(e);else{var n="";0==(e&4294965248)?n=w(e>>6&31|192):0==(e&4294901760)?(m(e),n=w(e>>12&15|224),n+=w(e>>6&63|128)):0==(e&4292870144)&&(n=w(e>>18&7|240),n+=w(e>>12&63|128),n+=w(e>>6&63|128));e=n+=w(e&63|128)}l+=e}return l},decode:function(a){J=k(a);N=J.length;L=0;a=[];
for(var c;!1!==(c=r());)a.push(c);c=a.length;for(var d=-1,e,l="";++d<c;)e=a[d],65535<e&&(e-=65536,l+=w(e>>>10&1023|55296),e=56320|e&1023),l+=w(e);return l}};if(v&&!v.nodeType)if(q)q.exports=x;else{e={}.hasOwnProperty;for(var ca in x)e.call(x,ca)&&(v[ca]=x[ca])}else e.utf8=x})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],30:[function(a,d,c){function e(a){var c="";do c=l[a%64]+c,a=Math.floor(a/64);while(0<a);return c}
function k(){var a=e(+new Date);return a!==v?(n=0,v=a):a+"."+e(n++)}for(var l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),m={},n=0,r=0,v;64>r;r++)m[l[r]]=r;k.encode=e;k.decode=function(a){var c=0;for(r=0;r<a.length;r++)c=64*c+m[a.charAt(r)];return c};d.exports=k},{}],31:[function(a,d,c){function e(a,c){"object"==typeof a&&(c=a,a=void 0);c=c||{};var d=k(a),e=d.source,l=d.id,q=d.path,q=r[l]&&q in r[l].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||q?(n("ignoring socket cache for %s",
e),e=m(e,c)):(r[l]||(n("new io instance for %s",e),r[l]=m(e,c)),e=r[l]);return e.socket(d.path)}var k=a("./url"),l=a("socket.io-parser"),m=a("./manager"),n=a("debug")("socket.io-client");d.exports=c=e;var r=c.managers={};c.protocol=l.protocol;c.connect=e;c.Manager=a("./manager");c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,d,c){function e(a,c){if(!(this instanceof e))return new e(a,c);a&&"object"==typeof a&&(c=a,a=void 0);c=c||{};
c.path=c.path||"/socket.io";this.nsps={};this.subs=[];this.opts=c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||5E3);this.randomizationFactor(c.randomizationFactor||.5);this.backoff=new x({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);this.readyState="closed";
this.uri=a;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];this.encoder=new m.Encoder;this.decoder=new m.Decoder;(this.autoConnect=!1!==c.autoConnect)&&this.open()}var k=a("engine.io-client"),l=a("./socket");c=a("component-emitter");var m=a("socket.io-parser"),n=a("./on"),r=a("component-bind"),v=a("debug")("socket.io-client:manager"),q=a("indexof"),x=a("backo2"),w=Object.prototype.hasOwnProperty;d.exports=e;e.prototype.emitAll=function(){this.emit.apply(this,arguments);
for(var a in this.nsps)w.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)};e.prototype.updateSocketIds=function(){for(var a in this.nsps)w.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)};c(e.prototype);e.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};e.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};e.prototype.reconnectionDelay=
function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};e.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};e.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&this.backoff.setMax(a);return this};e.prototype.timeout=
function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};e.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};e.prototype.open=e.prototype.connect=function(a){v("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;v("opening %s",this.uri);var c=this.engine=k(this.uri,this.opts),d=this;this.readyState="opening";this.skipReconnect=!1;var e=n(c,"open",function(){d.onopen();
a&&a()}),l=n(c,"error",function(c){v("connect_error");d.cleanup();d.readyState="closed";d.emitAll("connect_error",c);if(a){var e=Error("Connection error");e.data=c;a(e)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var m=this._timeout;v("connect attempt will timeout after %d",m);var q=setTimeout(function(){v("connect attempt timed out after %d",m);e.destroy();c.close();c.emit("error","timeout");d.emitAll("connect_timeout",m)},m);this.subs.push({destroy:function(){clearTimeout(q)}})}this.subs.push(e);
this.subs.push(l);return this};e.prototype.onopen=function(){v("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(n(a,"data",r(this,"ondata")));this.subs.push(n(a,"ping",r(this,"onping")));this.subs.push(n(a,"pong",r(this,"onpong")));this.subs.push(n(a,"error",r(this,"onerror")));this.subs.push(n(a,"close",r(this,"onclose")));this.subs.push(n(this.decoder,"decoded",r(this,"ondecoded")))};e.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};
e.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};e.prototype.ondata=function(a){this.decoder.add(a)};e.prototype.ondecoded=function(a){this.emit("packet",a)};e.prototype.onerror=function(a){v("error",a);this.emitAll("error",a)};e.prototype.socket=function(a){function c(){~q(e.connecting,d)||e.connecting.push(d)}var d=this.nsps[a];if(!d){d=new l(this,a);this.nsps[a]=d;var e=this;d.on("connecting",c);d.on("connect",function(){d.id=e.engine.id});this.autoConnect&&c()}return d};
e.prototype.destroy=function(a){a=q(this.connecting,a);~a&&this.connecting.splice(a,1);this.connecting.length||this.close()};e.prototype.packet=function(a){v("writing packet %j",a);var c=this;c.encoding?c.packetBuffer.push(a):(c.encoding=!0,this.encoder.encode(a,function(d){for(var e=0;e<d.length;e++)c.engine.write(d[e],a.options);c.encoding=!1;c.processPacketQueue()}))};e.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};
e.prototype.cleanup=function(){v("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};e.prototype.close=e.prototype.disconnect=function(){v("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"==this.readyState&&this.cleanup();this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};e.prototype.onclose=function(a){v("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";
this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};e.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)v("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var c=this.backoff.duration();v("will wait %dms before reconnect attempt",c);this.reconnecting=!0;var d=setTimeout(function(){a.skipReconnect||(v("attempting reconnect"),
a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(c){c?(v("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",c.data)):(v("reconnect success"),a.onreconnect())}))},c);this.subs.push({destroy:function(){clearTimeout(d)}})}};e.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":33,
"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,d,c){d.exports=function(a,c,d){a.on(c,d);return{destroy:function(){a.removeListener(c,d)}}}},{}],34:[function(a,d,c){function e(a,c){this.io=a;this.nsp=c;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.io.autoConnect&&this.open()}var k=a("socket.io-parser");c=a("component-emitter");
var l=a("to-array"),m=a("./on"),n=a("component-bind"),r=a("debug")("socket.io-client:socket"),v=a("has-binary");d.exports=e;var q={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},x=c.prototype.emit;c(e.prototype);e.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[m(a,"open",n(this,"onopen")),m(a,"packet",n(this,"onpacket")),m(a,"close",n(this,"onclose"))]}};
e.prototype.open=e.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};e.prototype.send=function(){var a=l(arguments);a.unshift("message");this.emit.apply(this,a);return this};e.prototype.emit=function(a){if(q.hasOwnProperty(a))return x.apply(this,arguments),this;var c=l(arguments),d=k.EVENT;v(c)&&(d=k.BINARY_EVENT);d={type:d,data:c,options:{}};d.options.compress=!this.flags||!1!==
this.flags.compress;"function"==typeof c[c.length-1]&&(r("emitting packet with ack id %d",this.ids),this.acks[this.ids]=c.pop(),d.id=this.ids++);this.connected?this.packet(d):this.sendBuffer.push(d);delete this.flags;return this};e.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};e.prototype.onopen=function(){r("transport is open - connecting");"/"!=this.nsp&&this.packet({type:k.CONNECT})};e.prototype.onclose=function(a){r("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;
this.emit("disconnect",a)};e.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case k.CONNECT:this.onconnect();break;case k.EVENT:this.onevent(a);break;case k.BINARY_EVENT:this.onevent(a);break;case k.ACK:this.onack(a);break;case k.BINARY_ACK:this.onack(a);break;case k.DISCONNECT:this.ondisconnect();break;case k.ERROR:this.emit("error",a.data)}};e.prototype.onevent=function(a){var c=a.data||[];r("emitting event %j",c);null!=a.id&&(r("attaching ack callback to event"),c.push(this.ack(a.id)));
this.connected?x.apply(this,c):this.receiveBuffer.push(c)};e.prototype.ack=function(a){var c=this,d=!1;return function(){if(!d){d=!0;var e=l(arguments);r("sending ack %j",e);var m=v(e)?k.BINARY_ACK:k.ACK;c.packet({type:m,id:a,data:e})}}};e.prototype.onack=function(a){var c=this.acks[a.id];"function"==typeof c?(r("calling ack %s with %j",a.id,a.data),c.apply(this,a.data),delete this.acks[a.id]):r("bad ack %s",a.id)};e.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");
this.emitBuffered()};e.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)x.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};e.prototype.ondisconnect=function(){r("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};e.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};
e.prototype.close=e.prototype.disconnect=function(){this.connected&&(r("performing disconnect (%s)",this.nsp),this.packet({type:k.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this};e.prototype.compress=function(a){this.flags=this.flags||{};this.flags.compress=a;return this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,d,c){(function(c){var e=a("parseuri"),l=a("debug")("socket.io-client:url");
d.exports=function(a,d){var k=a;d=d||c.location;null==a&&(a=d.protocol+"//"+d.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?d.protocol+a:d.host+a),/^(https?|wss?):\/\//.test(a)||(l("protocol-less url %s",a),a="undefined"!=typeof d?d.protocol+"//"+a:"https://"+a),l("parse %s",a),k=e(a));k.port||(/^(http|ws)$/.test(k.protocol)?k.port="80":/^(http|ws)s$/.test(k.protocol)&&(k.port="443"));k.path=k.path||"/";var m=-1!==k.host.indexOf(":")?"["+k.host+"]":k.host;k.id=k.protocol+"://"+
m+":"+k.port;k.href=k.protocol+"://"+m+(d&&d.port==k.port?"":":"+k.port);return k}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,d,c){function e(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}d.exports=e;e.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter)var c=
Math.random(),d=Math.floor(c*this.jitter*a),a=0==(Math.floor(10*c)&1)?a-d:a+d;return Math.min(a,this.max)|0};e.prototype.reset=function(){this.attempts=0};e.prototype.setMin=function(a){this.ms=a};e.prototype.setMax=function(a){this.max=a};e.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,d,c){var e=[].slice;d.exports=function(a,c){"string"==typeof c&&(c=a[c]);if("function"!=typeof c)throw Error("bind() requires a function");var d=e.call(arguments,2);return function(){return c.apply(a,
d.concat(e.call(arguments)))}}},{}],38:[function(a,d,c){function e(a){if(a){for(var c in e.prototype)a[c]=e.prototype[c];return a}}d.exports=e;e.prototype.on=e.prototype.addEventListener=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(c);return this};e.prototype.once=function(a,c){function d(){this.off(a,d);c.apply(this,arguments)}d.fn=c;this.on(a,d);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=
function(a,c){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e,k=0;k<d.length;k++)if(e=d[k],e===c||e.fn===c){d.splice(k,1);break}return this};e.prototype.emit=function(a){this._callbacks=this._callbacks||{};var c=[].slice.call(arguments,1),d=this._callbacks["$"+a];if(d)for(var d=d.slice(0),e=0,k=d.length;e<k;++e)d[e].apply(this,c);return this};
e.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};e.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,d,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,d,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,d,c){(function(c){var e=a("isarray");d.exports=function(a){function d(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&
a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a))for(var k=0;k<a.length;k++){if(d(a[k]))return!0}else if(a&&"object"==typeof a)for(k in a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,k)&&d(a[k]))return!0;return!1}return d(a)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:43}],42:[function(a,d,c){arguments[4][23][0].apply(c,
arguments)},{dup:23}],43:[function(a,d,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,d,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,d,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,d,c){(function(d){var e=a("isarray"),l=a("./is-buffer");c.deconstructPacket=function(a){function c(a){if(!a)return a;if(l(a)){var k={_placeholder:!0,num:d.length};d.push(a);return k}if(e(a)){for(var k=Array(a.length),m=0;m<a.length;m++)k[m]=c(a[m]);return k}if("object"==
typeof a&&!(a instanceof Date)){k={};for(m in a)k[m]=c(a[m]);return k}return a}var d=[];a.data=c(a.data);a.attachments=d.length;return{packet:a,buffers:d}};c.reconstructPacket=function(a,c){function d(a){if(a&&a._placeholder)return c[a.num];if(e(a))for(var k=0;k<a.length;k++)a[k]=d(a[k]);else if(a&&"object"==typeof a)for(k in a)a[k]=d(a[k]);return a}a.data=d(a.data);a.attachments=void 0;return a};c.removeBlobs=function(a,c){function k(a,q,r){if(!a)return a;if(d.Blob&&a instanceof Blob||d.File&&a instanceof
File){m++;var w=new FileReader;w.onload=function(){r?r[q]=this.result:n=this.result;--m||c(n)};w.readAsArrayBuffer(a)}else if(e(a))for(w=0;w<a.length;w++)k(a[w],w,a);else if(a&&"object"==typeof a&&!l(a))for(w in a)k(a[w],w,a)}var m=0,n=a;k(n);m||c(n)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,d,c){function e(){}function k(a){var d,e=!1;d=""+a.type;if(c.BINARY_EVENT==a.type||c.BINARY_ACK==
a.type)d+=a.attachments,d+="-";a.nsp&&"/"!=a.nsp&&(e=!0,d+=a.nsp);null!=a.id&&(e&&(d+=",",e=!1),d+=a.id);null!=a.data&&(e&&(d+=","),d+=v.stringify(a.data));r("encoded %j as %s",a,d);return d}function l(a,c){q.removeBlobs(a,function(a){var d=q.deconstructPacket(a);a=k(d.packet);d=d.buffers;d.unshift(a);c(d)})}function m(){this.reconstructor=null}function n(a){this.reconPack=a;this.buffers=[]}var r=a("debug")("socket.io-parser"),v=a("json3");a("isarray");d=a("component-emitter");var q=a("./binary"),
x=a("./is-buffer");c.protocol=4;c.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");c.CONNECT=0;c.DISCONNECT=1;c.EVENT=2;c.ACK=3;c.ERROR=4;c.BINARY_EVENT=5;c.BINARY_ACK=6;c.Encoder=e;c.Decoder=m;e.prototype.encode=function(a,d){r("encoding packet %j",a);if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)l(a,d);else{var e=k(a);d([e])}};d(m.prototype);m.prototype.add=function(a){if("string"==typeof a){a:{var d={},e=0;d.type=Number(a.charAt(0));if(null==c.types[d.type])a={type:c.ERROR,
data:"parser error"};else{if(c.BINARY_EVENT==d.type||c.BINARY_ACK==d.type){for(var k="";"-"!=a.charAt(++e)&&(k+=a.charAt(e),e!=a.length););if(k!=Number(k)||"-"!=a.charAt(e))throw Error("Illegal attachments");d.attachments=Number(k)}if("/"==a.charAt(e+1))for(d.nsp="";++e;){k=a.charAt(e);if(","==k)break;d.nsp+=k;if(e==a.length)break}else d.nsp="/";k=a.charAt(e+1);if(""!==k&&Number(k)==k){for(d.id="";++e;){k=a.charAt(e);if(null==k||Number(k)!=k){--e;break}d.id+=a.charAt(e);if(e==a.length)break}d.id=
Number(d.id)}if(a.charAt(++e))try{d.data=v.parse(a.substr(e))}catch(ca){a={type:c.ERROR,data:"parser error"};break a}r("decoded %s as %j",a,d);a=d}}c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?(this.reconstructor=new n(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(x(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");
else throw Error("Unknown type: "+a);};m.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};n.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=q.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};n.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],
48:[function(a,d,c){(function(a){d.exports=function(c){return a.Buffer&&a.Buffer.isBuffer(c)||a.ArrayBuffer&&c instanceof ArrayBuffer}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],49:[function(a,d,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(a,d,c){(function(a){(function(){function e(a,c){function d(a){if(d[a]!==R)return d[a];var e;if("bug-string-char-index"==a)e=!1;else if("json"==a)e=d("json-stringify")&&
d("json-parse");else{var l;if("json-stringify"==a){e=c.stringify;var n="function"==typeof e&&da;if(n){(l=function(){return 1}).toJSON=l;try{n="0"===e(0)&&"0"===e(new k)&&'""'==e(new m)&&e(N)===R&&e(R)===R&&e()===R&&"1"===e(l)&&"[1]"==e([l])&&"[null]"==e([R])&&"null"==e(null)&&"[null,null,null]"==e([R,N,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==e({a:[l,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===e(null,l)&&"[\n 1,\n 2\n]"==e([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==e(new r(-864E13))&&
'"+275760-09-13T00:00:00.000Z"'==e(new r(864E13))&&'"-000001-01-01T00:00:00.000Z"'==e(new r(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==e(new r(-1))}catch(Wa){n=!1}}e=n}if("json-parse"==a){e=c.parse;if("function"==typeof e)try{if(0===e("0")&&!e(!1)){l=e('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var q=5==l.a.length&&1===l.a[0];if(q){try{q=!e('"\t"')}catch(Wa){}if(q)try{q=1!==e("01")}catch(Wa){}if(q)try{q=1!==e("1.")}catch(Wa){}}}}catch(Wa){q=!1}e=q}}return d[a]=!!e}a||(a=n.Object());
c||(c=n.Object());var k=a.Number||n.Number,m=a.String||n.String,q=a.Object||n.Object,r=a.Date||n.Date,v=a.SyntaxError||n.SyntaxError,x=a.TypeError||n.TypeError,w=a.Math||n.Math,J=a.JSON||n.JSON;"object"==typeof J&&J&&(c.stringify=J.stringify,c.parse=J.parse);var q=q.prototype,N=q.toString,V,ua,R,da=new r(-0xc782b5b800cec);try{da=-109252==da.getUTCFullYear()&&0===da.getUTCMonth()&&1===da.getUTCDate()&&10==da.getUTCHours()&&37==da.getUTCMinutes()&&6==da.getUTCSeconds()&&708==da.getUTCMilliseconds()}catch(Va){}if(!d("json")){var Ga=
d("bug-string-char-index");if(!da)var ia=w.floor,Oa=[0,31,59,90,120,151,181,212,243,273,304,334],Xa=function(a,c){return Oa[c]+365*(a-1970)+ia((a-1969+(c=+(1<c)))/4)-ia((a-1901+c)/100)+ia((a-1601+c)/400)};(V=q.hasOwnProperty)||(V=function(a){var c={},d;(c.__proto__=null,c.__proto__={toString:1},c).toString!=N?V=function(a){var c=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=c;return a}:(d=c.constructor,V=function(a){var c=(this.constructor||d).prototype;return a in this&&!(a in c&&
this[a]===c[a])});c=null;return V.call(this,a)});ua=function(a,c){var d=0,e,k,m;(e=function(){this.valueOf=0}).prototype.valueOf=0;k=new e;for(m in k)V.call(k,m)&&d++;e=k=null;d?ua=2==d?function(a,c){var d={},e="[object Function]"==N.call(a),k;for(k in a)e&&"prototype"==k||V.call(d,k)||!(d[k]=1)||!V.call(a,k)||c(k)}:function(a,c){var d="[object Function]"==N.call(a),e,k;for(e in a)d&&"prototype"==e||!V.call(a,e)||(k="constructor"===e)||c(e);(k||V.call(a,e="constructor"))&&c(e)}:(k="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),
ua=function(a,c){var d="[object Function]"==N.call(a),e,m=!d&&"function"!=typeof a.constructor&&l[typeof a.hasOwnProperty]&&a.hasOwnProperty||V;for(e in a)d&&"prototype"==e||!m.call(a,e)||c(e);for(d=k.length;e=k[--d];m.call(a,e)&&c(e));});return ua(a,c)};if(!d("json-stringify")){var yb={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},W=function(a,c){return("000000"+(c||0)).slice(-a)},Pa=function(a){for(var c='"',d=0,e=a.length,k=!Ga||10<e,l=k&&(Ga?a.split(""):a);d<e;d++){var m=a.charCodeAt(d);
switch(m){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=yb[m];break;default:c=32>m?c+("\\u00"+W(2,m.toString(16))):c+(k?l[d]:a.charAt(d))}}return c+'"'},zb=function(a,c,d,e,k,l,m){var n,q,r,v,w,J,Va,Aa,K;try{n=c[a]}catch(Ha){}if("object"==typeof n&&n)if(q=N.call(n),"[object Date]"!=q||V.call(n,"toJSON"))"function"==typeof n.toJSON&&("[object Number]"!=q&&"[object String]"!=q&&"[object Array]"!=q||V.call(n,"toJSON"))&&(n=n.toJSON(a));else if(n>-1/0&&n<1/0){if(Xa){v=ia(n/864E5);for(q=ia(v/
365.2425)+1970-1;Xa(q+1,0)<=v;q++);for(r=ia((v-Xa(q,0))/30.42);Xa(q,r+1)<=v;r++);v=1+v-Xa(q,r);w=(n%864E5+864E5)%864E5;J=ia(w/36E5)%24;Va=ia(w/6E4)%60;Aa=ia(w/1E3)%60;w%=1E3}else q=n.getUTCFullYear(),r=n.getUTCMonth(),v=n.getUTCDate(),J=n.getUTCHours(),Va=n.getUTCMinutes(),Aa=n.getUTCSeconds(),w=n.getUTCMilliseconds();n=(0>=q||1E4<=q?(0>q?"-":"+")+W(6,0>q?-q:q):W(4,q))+"-"+W(2,r+1)+"-"+W(2,v)+"T"+W(2,J)+":"+W(2,Va)+":"+W(2,Aa)+"."+W(3,w)+"Z"}else n=null;d&&(n=d.call(c,a,n));if(null===n)return"null";
q=N.call(n);if("[object Boolean]"==q)return""+n;if("[object Number]"==q)return n>-1/0&&n<1/0?""+n:"null";if("[object String]"==q)return Pa(""+n);if("object"==typeof n){for(a=m.length;a--;)if(m[a]===n)throw x();m.push(n);K=[];c=l;l+=k;if("[object Array]"==q){r=0;for(a=n.length;r<a;r++)q=zb(r,n,d,e,k,l,m),K.push(q===R?"null":q);a=K.length?k?"[\n"+l+K.join(",\n"+l)+"\n"+c+"]":"["+K.join(",")+"]":"[]"}else ua(e||n,function(a){var c=zb(a,n,d,e,k,l,m);c!==R&&K.push(Pa(a)+":"+(k?" ":"")+c)}),a=K.length?
k?"{\n"+l+K.join(",\n"+l)+"\n"+c+"}":"{"+K.join(",")+"}":"{}";m.pop();return a}};c.stringify=function(a,c,d){var e,k,m,n;if(l[typeof c]&&c)if("[object Function]"==(n=N.call(c)))k=c;else if("[object Array]"==n){m={};for(var q=0,r=c.length,v;q<r;v=c[q++],(n=N.call(v),"[object String]"==n||"[object Number]"==n)&&(m[v]=1));}if(d)if("[object Number]"==(n=N.call(d))){if(0<(d-=d%1))for(e="",10<d&&(d=10);e.length<d;e+=" ");}else"[object String]"==n&&(e=10>=d.length?d:d.slice(0,10));return zb("",(v={},v[""]=
a,v),k,m,e,"",[])}}if(!d("json-parse")){var eb=m.fromCharCode,Ec={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},K,Za,Y=function(){K=Za=null;throw v();},ma=function(){for(var a=Za,c=a.length,d,e,k,l,m;K<c;)switch(m=a.charCodeAt(K),m){case 9:case 10:case 13:case 32:K++;break;case 123:case 125:case 91:case 93:case 58:case 44:return d=Ga?a.charAt(K):a[K],K++,d;case 34:d="@";for(K++;K<c;)if(m=a.charCodeAt(K),32>m)Y();else if(92==m)switch(m=a.charCodeAt(++K),m){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:d+=
Ec[m];K++;break;case 117:e=++K;for(k=K+4;K<k;K++)m=a.charCodeAt(K),48<=m&&57>=m||97<=m&&102>=m||65<=m&&70>=m||Y();d+=eb("0x"+a.slice(e,K));break;default:Y()}else{if(34==m)break;m=a.charCodeAt(K);for(e=K;32<=m&&92!=m&&34!=m;)m=a.charCodeAt(++K);d+=a.slice(e,K)}if(34==a.charCodeAt(K))return K++,d;Y();default:e=K;45==m&&(l=!0,m=a.charCodeAt(++K));if(48<=m&&57>=m){for(48==m&&(m=a.charCodeAt(K+1),48<=m&&57>=m)&&Y();K<c&&(m=a.charCodeAt(K),48<=m&&57>=m);K++);if(46==a.charCodeAt(K)){for(k=++K;k<c&&(m=a.charCodeAt(k),
48<=m&&57>=m);k++);k==K&&Y();K=k}m=a.charCodeAt(K);if(101==m||69==m){m=a.charCodeAt(++K);43!=m&&45!=m||K++;for(k=K;k<c&&(m=a.charCodeAt(k),48<=m&&57>=m);k++);k==K&&Y();K=k}return+a.slice(e,K)}l&&Y();if("true"==a.slice(K,K+4))return K+=4,!0;if("false"==a.slice(K,K+5))return K+=5,!1;if("null"==a.slice(K,K+4))return K+=4,null;Y()}return"$"},wa=function(a){var c,d;"$"==a&&Y();if("string"==typeof a){if("@"==(Ga?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(c=[];;d||(d=!0)){a=ma();if("]"==a)break;
d&&(","==a?(a=ma(),"]"==a&&Y()):Y());","==a&&Y();c.push(wa(a))}return c}if("{"==a){for(c={};;d||(d=!0)){a=ma();if("}"==a)break;d&&(","==a?(a=ma(),"}"==a&&Y()):Y());","!=a&&"string"==typeof a&&"@"==(Ga?a.charAt(0):a[0])&&":"==ma()||Y();c[a.slice(1)]=wa(ma())}return c}Y()}return a},Ab=function(a,c,d){d=Ia(a,c,d);d===R?delete a[c]:a[c]=d},Ia=function(a,c,d){var e=a[c],k;if("object"==typeof e&&e)if("[object Array]"==N.call(e))for(k=e.length;k--;)Ab(e,k,d);else ua(e,function(a){Ab(e,a,d)});return d.call(a,
c,e)};c.parse=function(a,c){var d,e;K=0;Za=""+a;d=wa(ma());"$"!=ma()&&Y();K=Za=null;return c&&"[object Function]"==N.call(c)?Ia((e={},e[""]=d,e),"",c):d}}}c.runInContext=e;return c}var l={"function":!0,object:!0},m=l[typeof c]&&c&&!c.nodeType&&c,n=l[typeof window]&&window||this,r=m&&l[typeof d]&&d&&!d.nodeType&&"object"==typeof a&&a;!r||r.global!==r&&r.window!==r&&r.self!==r||(n=r);if(m)e(n,m);else{var v=n.JSON,q=n.JSON3,x=!1,w=e(n,n.JSON3={noConflict:function(){x||(x=!0,n.JSON=v,n.JSON3=q,v=q=null);
return w}});n.JSON={parse:w.parse,stringify:w.stringify}}}).call(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],51:[function(a,d,c){d.exports=function(a,c){for(var d=[],e=(c=c||0)||0;e<a.length;e++)d[e-c]=a[e];return d}},{}]},{},[31])(31)});(function(f,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):function(){var d=f.Ractive,c=a();f.Ractive=c;c.noConflict=function(){f.Ractive=d;return c}}()})(this,function(){function f(b,g){return null===b&&null===g?!0:"object"===typeof b||"object"===typeof g?!1:b===g}function a(b){return!isNaN(parseFloat(b))&&isFinite(b)}function d(b){return b&&"[object Object]"===Pg.call(b)}function c(b,g){return b.replace(/%s/g,function(){return g.shift()})}
function e(b){for(var g=[],h=arguments.length-1;0<h--;)g[h]=arguments[h+1];b=c(b,g);throw Error(b);}function k(){X.DEBUG&&Fc.apply(null,arguments)}function l(b){for(var g=[],h=arguments.length-1;0<h--;)g[h]=arguments[h+1];b=c(b,g);Zb(b,g)}function m(b){for(var g=[],h=arguments.length-1;0<h--;)g[h]=arguments[h+1];b=c(b,g);Zd[b]||(Zd[b]=!0,Zb(b,g))}function n(){X.DEBUG&&l.apply(null,arguments)}function r(){X.DEBUG&&m.apply(null,arguments)}function v(b,g,h){return(g=q(b,g,h))?g[b][h]:null}function q(b,
g,h){for(;g;){if(h in g[b])return g;if(g.isolated)return null;g=g.parent}}function x(b,g,h,a){if(b===g)return null;if(a){if(h=v("interpolators",h,a))return h(b,g)||null;e(Bb(a,"interpolator"))}return $b.number(b,g)||$b.array(b,g)||$b.object(b,g)||null}function w(b){return function(){return b}}function J(b,g){-1===b.indexOf(g)&&b.push(g)}function N(b){return"string"===typeof b?[b]:void 0===b?[]:b}function L(b,g){if(b){var h=b.indexOf(g);-1!==h&&b.splice(h,1)}}function ca(){for(var b=[],g=arguments.length;g--;)b[g]=
arguments[g];b=b.concat.apply([],b);for(g=b.length;g--;){var h=b.indexOf(b[g]);~h&&h<g&&b.splice(g,1)}return b}function Z(b){for(var g=[],h=b.length;h--;)g[h]=b[h];return g}function aa(b,g){for(var h=b.length,a=0;a<h;a++){var c=g(b[a]);if(c)return c}}function Mg(b){b.detach()}function Ua(b){b.detachNodes()}function Xb(b){!b.ready||b.outros.length||b.outroChildren||(b.outrosComplete||(b.outrosComplete=!0,b.parent&&!b.parent.outrosComplete?b.parent.decrementOutros(b):b.detachNodes()),b.intros.length||
b.totalChildren||("function"===typeof b.callback&&b.callback(),b.parent&&!b.notifiedTotal&&(b.notifiedTotal=!0,b.parent.decrementTotal())))}function wb(b,g){var h=g;if(h){for(var a=b.children.length;a--;)h=wb(b.children[a],h);b.outros.length&&(h=h.concat(b.outros));return h}h=[];for(a=b;a.parent;)a=a.parent;return wb(a,h)}function Sd(b){b.dispatch()}function Td(){var b=P.immediateObservers;P.immediateObservers=[];b.forEach(Sd);var g=P.fragments.length,a,b=P.fragments;for(P.fragments=[];g--;)a=b[g],
a.update();P.transitionManager.ready();b=P.deferredObservers;P.deferredObservers=[];b.forEach(Sd);b=P.tasks;P.tasks=[];for(g=0;g<b.length;g+=1)b[g]();if(P.fragments.length||P.immediateObservers.length||P.deferredObservers.length||P.tasks.length)return Td()}function V(b){return"string"===typeof b?b.replace(Qg,"\\$&"):b}function ua(b){return b?b.replace(Rg,".$1"):""}function R(b){var g=[],a;for(b=ua(b);a=Sg.exec(b);)a=a.index+a[1].length,g.push(b.substr(0,a)),b=b.substr(a+1);g.push(b);return g}function da(b){return"string"===
typeof b?b.replace(Tg,"$1$2"):b}function Ga(){var b=Cb.pop();Db=Cb[Cb.length-1];return b}function ia(b){Db&&Db.push(b)}function Oa(b){b.bind()}function Xa(b){b.cancel()}function yb(b){b.destroyed()}function W(b){b.handleChange()}function Pa(b){b.mark()}function zb(b){b.mark(!0)}function eb(b){b.marked()}function Ec(b){b.markedAll()}function K(b){b.render()}function Za(b){b.shuffled()}function Y(b){b.teardown()}function ma(b){b.unbind()}function wa(b){b.unrender()}function Ab(b){b.unrender(!0)}function Ia(b){b.update()}
function Va(b){return b.toString()}function Ud(b){return b.toString(!0)}function xb(b,g){if(!/this/.test(b.toString()))return b;var a=Ug.call(b,g),p;for(p in b)a[p]=b[p];return a}function Bc(b,g,a){return a&&"function"===typeof g&&b.parent&&b.parent.isRoot?(b.boundValue||(b.boundValue=xb(g._r_unbound||g,b.parent.ractive)),b.boundValue):g}function Vd(b){b.updateFromBindings(!0)}function Wa(b){for(var g=b.length;g--;)if(b[g].bound){var a=b[g].owner;if(a)return{value:"checked"===a.name?a.node.checked:
a.node.value}}}function Aa(b){if(b){var g=Gc[b];Gc[b]=[];for(var a=g.length;a--;)g[a]();g=Hc[b];Hc[b]=[];for(a=g.length;a--;)g[a].model.register(g[a].item)}else Aa("early"),Aa("mark")}function Wd(b,g,a,p){b.shuffling=!0;for(var h=g.length;h--;){var c=g[h];h!==c&&(h in b.childByKey&&b.childByKey[h].rebind(~c?b.joinKey(c):void 0,b.childByKey[h],!p),!~c&&b.keyModels[h]?b.keyModels[h].rebind(void 0,b.keyModels[h],!1):~c&&b.keyModels[h]&&(b.keyModels[c]||b.childByKey[c].getKeyModel(c),b.keyModels[h].rebind(b.keyModels[c],
b.keyModels[h],!1)))}p=b.source().length!==b.source().value.length;b.links.forEach(function(b){return b.shuffle(g)});a||Aa("early");for(h=b.deps.length;h--;)b.deps[h].shuffle&&b.deps[h].shuffle(g);b[a?"marked":"mark"]();a||Aa("mark");p&&b.notifyUpstream();b.shuffling=!1}function Ya(b,g,a,p){b=b.r||b;if(!b||"string"!==typeof b||"."===b||"@"===b[0]||(g||a).isKey||(g||a).isKeypath)return g;b=b.split("/");b=R(b[b.length-1]);var h=b[b.length-1],c=g||a;if(c&&1===b.length&&h!==c.key&&p){a:{for(;p;){var d=
p.aliases;if(d&&d[h]){p=(p.owner.iterations?p.owner:p).owner.template.z;for(d=0;d<p.length;d++)if(p[d].n===h){h=p[d].x;if(!h.r){h=!1;break a}h=h.r.split("/");h=R(h[h.length-1]);break a}h=void 0;break a}p=p.componentParent||p.parent}h=void 0}b=h||b}h=b.length;p=!0;for(d=!1;c&&h--;)c.shuffling&&(d=!0),b[h]!=c.key&&(p=!1),c=c.parent;return!g&&p&&d?a:g&&!p&&d?a:g}function Xd(){I.start();var b=performance.now(),g,a;for(g=0;g<Eb.length;g+=1)a=Eb[g],a.tick(b)||Eb.splice(g--,1);I.end();Eb.length?requestAnimationFrame(Xd):
ae=!1}function Ng(b){var g;Ic[b]||(g=b?b+".":"",Ic[b]=function(a,p){var h;if("string"===typeof a)return h={},h[g+a]=p,h;if("object"===typeof a){if(g){h=b;var c={};if(h){h+=".";for(var d in a)a.hasOwnProperty(d)&&(c[h+d]=a[d]);h=c}else h=a}else h=a;return h}});return Ic[b]}function Og(b){for(var g=[],a=0;a<b.length;a++)g[a]=(b.childByKey[a]||{}).value;return g}function va(b,g){var a=b;if("."===g)return b.findContext();if("~"===g[0])return b.ractive.viewmodel.joinAll(R(g.slice(2)));if("."===g[0]||"^"===
g[0]){var p=b,c=g.split("/"),d="^^"===c[0],e=d?null:b.findContext();for(d&&c.unshift("^^");"^^"===c[0];)for(c.shift(),e=null;p&&!e;)e=p.context,p=p.parent.component?p.parent.component.parentFragment:p.parent;if(!e&&d)throw Error("Invalid context parent reference ('"+g+"'). There is not context at that level.");for(;"."===c[0]||".."===c[0];)".."===c.shift()&&(e=e.parent);g=c.join("/");"."===g[0]&&(g=g.slice(1));return e.joinAll(R(g))}p=R(g);if(p.length){c=p.shift();if("@"===c[0]){if("@this"===c||"@"===
c)return b.ractive.viewmodel.getRactiveModel().joinAll(p);if("@index"===c||"@key"===c)return p.length&&Cc(c),p=b.findRepeatingFragment(),p.isIteration?p.context&&p.context.getKeyModel(p["i"===g[1]?"index":"key"]):void 0;if("@global"===c)return be.joinAll(p);if("@shared"===c)return ce.joinAll(p);if("@keypath"===c||"@rootpath"===c){p="r"===g[1]?b.ractive.root:null;for(c=b.findContext();p&&c.isRoot&&c.ractive.component;)c=c.ractive.component.parentFragment.findContext();return c.getKeypathModel(p)}if("@context"===
c)return new de(b.getContext());if("@local"===c)return b.getContext()._data.joinAll(p);throw Error("Invalid special reference '"+c+"'");}d=b.findContext();if(d.has(c))return d.joinKey(c).joinAll(p);for(var f=!1,e=b.ractive.warnAboutAmbiguity;b;){if(b.isIteration){if(c===b.parent.keyRef)return p.length&&Cc(c),b.context.getKeyModel(b.key);if(c===b.parent.indexRef)return p.length&&Cc(c),b.context.getKeyModel(b.index)}if(b.aliases&&b.aliases.hasOwnProperty(c)){var k=b.aliases[c];if(0===p.length)return k;
if("function"===typeof k.joinAll)return k.joinAll(p)}if(b.context&&b.context.has(c)){if(f)return e&&n("'"+g+"' resolved but is ambiguous and will create a mapping to a parent component."),d.root.createLink(c,b.context.joinKey(c),c,{implicit:!0}).joinAll(p);e&&n("'"+g+"' resolved but is ambiguous.");return b.context.joinKey(c).joinAll(p)}(b.componentParent||!b.parent&&b.ractive.component)&&!b.ractive.isolated?(b=b.componentParent||b.ractive.component.parentFragment,f=!0):b=b.parent}a=a.ractive;if(a.resolveInstanceMembers&&
"data"!==c&&c in a)return a.viewmodel.getRactiveModel().joinKey(c).joinAll(p);e&&n("'"+g+"' is ambiguous and did not resolve.");return d.joinKey(c).joinAll(p)}}function Cc(b){throw Error("An index or key reference ("+b+") cannot have child properties");}function Yb(b){for(var g=[],a=arguments.length-1;0<a--;)g[a]=arguments[a+1];a=b.fragment||b._fakeFragment||(b._fakeFragment=new Gb(b));return a.getContext.apply(a,g)}function Yd(){for(var b=[],g=arguments.length;g--;)b[g]=arguments[g];this.ctx||(this.ctx=
new ee.Context(this));b.unshift(Object.create(this.ctx));return Object.assign.apply(null,b)}function Ha(b,g,a){var h=ac,c=a&&a.deep,d=a&&a.shuffle;b=I.start(b,!0);a&&"keep"in a&&(ac=a.keep);for(a=g.length;a--;){var e=g[a][0],f=g[a][1],k=g[a][2];if(!e)throw I.end(),Error("Failed to set invalid keypath '"+k+"'");if(c)fe(e,f);else if(d)if(k=e.get(),f||(f=k),void 0===k)e.set(f);else{if(!Array.isArray(k)||!Array.isArray(f))throw I.end(),Error("You cannot merge an array with a non-array");k=Vg(d);e.merge(f,
k)}else e.set(f)}I.end();ac=h;return b}function Dc(b,g,a,p){if(!a&&("."===g[0]||"^"===g[1]))return n("Attempted to set a relative keypath from a non-relative context. You can use a context object to set relative keypaths."),[];var h=R(g);a=a||b.viewmodel;return Wg.test(g)?a.findMatches(h):a===b.viewmodel?!b.component||b.isolated||a.has(h[0])||"@"===g[0]||!g[0]||p?[a.joinAll(h)]:[va(b.fragment||new Gb(b),g)]:[a.joinAll(h)]}function ge(b,g,a,p){var h=[];if(d(g)){var c=function(a){g.hasOwnProperty(a)&&
h.push.apply(h,Dc(b,a,null,p).map(function(b){return[b,g[a],a]}))},e;for(e in g)c(e)}else h.push.apply(h,Dc(b,g,null,p).map(function(b){return[b,a,g]}));return h}function fe(b,g){var a=b.get(!1,Xg);if(null==a||"object"!==typeof g||"object"!==typeof a)return b.set(g);for(var p in g)g.hasOwnProperty(p)&&fe(b.joinKey(p),g[p])}function Vg(b){if(!0===b)return null;if("function"===typeof b)return b;if("string"===typeof b)return he[b]||(he[b]=function(g){return g[b]});throw Error("If supplied, options.compare must be a string, function, or true");
}function ie(b,g,h,p){if("string"!==typeof g||!a(h))throw Error("Bad arguments");g=ge(b,g,h,p&&p.isolated);return Ha(b,g.map(function(b){var g=b[0];b=b[1];var h=g.get();if(!a(b)||!a(h))throw Error("Cannot add to a non-numeric value");return[g,h+b]}))}function je(b){b=Promise.resolve(b);Object.defineProperty(b,"stop",{value:S});return b}function ke(b,g,a,p){p=p||{};var h;p.easing&&(h="function"===typeof p.easing?p.easing:b.easing[p.easing]);p={easing:h||Yg,duration:"duration"in p?p.duration:400,complete:p.complete||
S,step:p.step||S,interpolator:p.interpolator};h=g.get();if(f(h,a))return p.complete(p.to),je(a);b=x(h,a,b,p.interpolator);return b?g.animate(h,a,p,b):(I.start(),g.set(a),I.end(),je(a))}function Jc(b,g){var a=g?Zg:$g;if(a[b])return a[b];var p=b.split("."),c=[],d=!1;g&&(p.unshift("this"),d=!0);for(var e=Math.pow(2,p.length)-(g?1:0),f=0;f<e;f++){for(var k=[],l=0;l<p.length;l++)k.push(1&f>>l?"*":p[l]);c.unshift(k.join("."))}d&&(2<p.length?c.push.apply(c,Jc(b,!1)):(c.push("*"),c.push(b)));return a[b]=
c}function bc(b,g,a,p){void 0===p&&(p=[]);if(g)return a.name=g,p.unshift(a),g=b._nsSubs?Jc(g,!0):["*",g],le(b,g,a,p,!0)}function le(b,g,a,p,c){void 0===c&&(c=!1);var h=!0;if(c||b._nsSubs){b.event&&b._eventQueue.push(b.event);b.event=a;for(var d=g.length;d--;)if(g[d]in b._subs){for(var e=b,na=b._subs[g[d]],f=a,k=p,l=null,m=!1,na=na.slice(),n=0,q=na.length;n<q;n+=1)na[n].off||!1!==na[n].handler.apply(e,k)||(m=!0);f&&m&&(l=f.event)&&(l.preventDefault&&l.preventDefault(),l.stopPropagation&&l.stopPropagation());
h=!m&&h}b.event=b._eventQueue.length?b._eventQueue.pop():null}b.parent&&h&&(c&&b.component&&(g=Jc(b.component.name+"."+g[g.length-1],!1),a&&!a.component&&(a.component=b)),h=le(b.parent,g,a,p));return h}function ah(b,g){void 0===g&&(g=null);var a=[];cc(b,g,a);return a}function cc(b,g,a){b.isAnchor?g&&b.name!==g||a.push(b):b.items?b.items.forEach(function(b){return cc(b,g,a)}):b.iterations?b.iterations.forEach(function(b){return cc(b,g,a)}):b.fragment&&!b.component&&cc(b.fragment,g,a)}function Kc(b,
g){void 0===g&&(g=null);var a=ah(b.fragment,g),p={},c=b._children.byName;a.forEach(function(b){var g=b.name;g in p||(p[g]=0);var a=(c[g]||[])[p[g]];a&&a.lastBound!==b&&(a.lastBound&&a.lastBound.removeChild(a),b.addChild(a));p[g]++})}function bh(b){b.instance.fragment.rendered&&(b.shouldDestroy=!0,b.instance.unrender());b.instance.el=null}function ch(){I.addFragment(this.instance.fragment)}function dh(){if(this.anchor)return this.anchor.findNextNode()}function eh(b,g,a){var h=[];g=fh(b,g,a);if(!g)return null;
a=g.length-2-g[1];var c=Math.min(b,g[0]),d=c+g[1];h.startIndex=c;var e;for(e=0;e<c;e+=1)h.push(e);for(;e<d;e+=1)h.push(-1);for(;e<b;e+=1)h.push(e+a);h.touchedFrom=0!==a?g[0]:b;return h}function fh(b,a,h){switch(a){case "splice":void 0!==h[0]&&0>h[0]&&(h[0]=b+Math.max(h[0],-b));for(void 0===h[0]&&(h[0]=0);2>h.length;)h.push(b-h[0]);"number"!==typeof h[1]&&(h[1]=b-h[0]);h[1]=Math.min(h[1],b-h[0]);return h;case "sort":case "reverse":return null;case "pop":return b?[b-1,1]:[0,0];case "push":return[b,
0].concat(h);case "shift":return[0,b?1:0];case "unshift":return[0,0].concat(h)}}function me(b,a,h){a.parent&&a.parent.wrapper&&a.parent.adapt();var g=I.start(b,!0);a.mark(h&&h.force);a.notifyUpstream();I.end();gh.fire(b,a);return g}function ea(b,a,h){for(void 0===a&&(a=!0);b&&(7!==b.type||h&&b.name!==h)&&(!a||15!==b.type&&11!==b.type);)b=b.owner?b.owner:b.component?b.containerFragment||b.component.parentFragment:b.parent?b.parent:b.parentFragment?b.parentFragment:void 0;return b}function Lc(b,a,h){var g=
[];if(d(a))for(var c in a)a.hasOwnProperty(c)&&g.push([fa(b,c).model,a[c]]);else g.push([fa(b,a).model,h]);return g}function fa(b,a){var g=b.fragment;return"string"!==typeof a?{model:g.findContext(),instance:a}:{model:va(g,a),instance:g.ractive}}function Mc(b){"string"===typeof b&&ne&&(b=ne.call(document,b));var a;if(b){if(b._ractive)return b._ractive.proxy.getContext();if((a=b.__ractive_instances__)&&1===a.length)return Yb(a[0])}}function oe(b){r("getNodeInfo has been renamed to getContext, and the getNodeInfo alias will be removed in a future release.");
return Mc(b)}function xa(){return Q.createDocumentFragment()}function fb(b){var a;if(b&&"boolean"!==typeof b){if(!ra||!Q||!b)return null;if(b.nodeType)return b;if("string"===typeof b){a=Q.getElementById(b);if(!a&&Q.querySelector)try{a=Q.querySelector(b)}catch(h){}if(a&&a.nodeType)return a}return b[0]&&b[0].nodeType?b[0]:null}}function gb(b){b&&"unknown"!==typeof b.parentNode&&b.parentNode&&b.parentNode.removeChild(b);return b}function Ja(b){return null!=b&&b.toString?""+b:""}function Hb(b){return Ja(b).replace(/&/g,
"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function pe(b){hh.fire(b);b.findAllComponents("*").forEach(function(b){pe(b.instance)})}function qe(b,a){for(var g=a;g;){if(g===b)return!0;g=g.target||g.parent}}function ih(b,a){return a}function jh(){return-1}function dc(b){return(b?Nc.filter(function(a){return~b.indexOf(a.id)}):Nc).reduce(function(b,a){return b+"\n\n/* {"+a.id+"} */\n"+a.styles},"/* Ractive.js component styles */")}function kh(b){for(var a=[],h=arguments.length-1;0<h--;)a[h]=
arguments[h+1];for(h=0;h<a.length;h++){var p=a[h],c;for(c in p)c in b||!Object.prototype.hasOwnProperty.call(p,c)||(b[c]=p[c])}return b}function Oc(b){void 0===b&&(b={});var a=[],h;for(h in b)Object.prototype.hasOwnProperty.call(b,h)&&a.push([h,b[h]]);return a}function lh(b){return b.trim()}function mh(b){return b.str}function nh(b,a){var g='[data-ractive-css~="{'+a+'}"]';return re.test(b)?b.replace(re,g):se(b,function(b,a){b=b.replace(oh,function(b,a){if(ph.test(a))return b;var h=a.split(",").map(lh).map(function(b){for(var a=
[],h;h=qh.exec(b);)a.push({str:h[0],base:h[1],modifiers:h[2]});b=a.map(mh);h=[];for(var p=a.length;p--;){var c=b.slice(),d=a[p];c[p]=d.base+g+d.modifiers||"";d=b.slice();d[p]=g+" "+d[p];h.push(c.join(" "),d.join(" "))}return h.join(", ")}).join(", ")+" ";return b.replace(a,h)});return a(b)},[rh])}function Qa(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function te(b,a){a&&a.constructor!==Object&&"function"!==typeof a&&("object"!==typeof a?e("data option must be an object or a function, `"+
a+"` is not valid"):n("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"));var g="function"===typeof b,p="function"===typeof a;a||g||(a={});return g||p?function(){var h=p?ue(a,this):a,c=g?ue(b,this):b;return ve(h,c)}:ve(a,b)}function ue(b,a){var g=b.call(a);if(g)return"object"!==typeof g&&e("Data function must return an object"),g.constructor!==Object&&r("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),
g}function ve(b,a){if(b&&a){for(var g in a)g in b||(b[g]=a[g]);return b}return b||a}function Pc(b,a){void 0===a&&(a=0);for(var g=Array(a);a--;)g[a]="_"+a;return(new Function([],"return function ("+g.join(",")+"){return("+b+");};"))()}function we(b,a){var g,p="return ("+b.replace(sh,function(b,a){g=!0;return'__ractive.get("'+a+'")'})+");";g&&(p="var __ractive = this; "+p);p=new Function(p);return g?p.bind(a):p}function xe(b,a){if(Ib[b])return Ib[b];var g;Qc(Pc,"new expression function",ye);g=Pc(b,
a);return Ib[b]=g}function ze(b){if(b){var a=b.e;a&&Object.keys(a).forEach(function(b){Ib[b]||(Ib[b]=a[b])})}}function th(b){if(!b.matchString("="))return null;var a=b.pos;b.allowWhitespace();var h=b.matchPattern(Ae);if(!h)return b.pos=a,null;if(!b.matchPattern(uh))return null;var p=b.matchPattern(Ae);if(!p)return b.pos=a,null;b.allowWhitespace();return b.matchString("=")?[h,p]:(b.pos=a,null)}function Be(b){var a;return(a=b.matchPattern(vh))?{t:25,v:a}:null}function wh(b){return b.replace(xh,"\\$&")}
function Rc(b){return b.replace(yh,function(b,a){var g;return(g="#"!==a[0]?Ce[a]:"x"===a[1]?parseInt(a.substring(2),16):parseInt(a.substring(1),10))?zh(g?10===g?32:128>g?g:159>=g?Ah[g-128]:55296>g?g:57343>=g?ec:65535>=g?g:De?65536<=g&&131071>=g||131072<=g&&196607>=g?g:ec:ec:ec):b})}function Sc(b){return b.replace(Bh,"&amp;").replace(Ch,"&lt;").replace(Dh,"&gt;")}function Ee(b){var a;return(a=b.matchPattern(Eh))?{t:20,v:a}:null}function Fe(b){switch(b){case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t";
case "\b":return"\\b";case "\f":return"\\f"}}function Ge(b){var a;return(a=Tc(b))?Fh.test(a.v)?a.v:'"'+a.v.replace(/"/g,'\\"')+'"':(a=Ee(b))?a.v:(a=b.matchPattern(Uc))?a:null}function Gh(b){var a,h=b.pos;b.allowWhitespace();var p="'"!==b.nextChar()&&'"'!==b.nextChar();p&&(a=b.matchPattern(He));var c=a?ja(b):Ge(b);if(null===c)return b.pos=h,null;b.allowWhitespace();if(p&&(","===b.nextChar()||"}"===b.nextChar()))return a||Uc.test(c)||b.error("Expected a valid reference, but found '"+c+"' instead."),
b={t:27,k:c,v:{t:30,n:c}},a&&(b.p=!0),b;if(!b.matchString(":"))return b.pos=h,null;b.allowWhitespace();a=ja(b);return null===a?(b.pos=h,null):{t:27,k:c,v:a}}function Ie(b){var a=b.pos,h=Gh(b);if(null===h)return null;h=[h];if(b.matchString(",")){var p=Ie(b);return p?h.concat(p):(b.pos=a,null)}return h}function Je(b){var a,h,p,c,d=b.pos;a=b.matchPattern(Hh)||"";h=!a&&b.relaxedNames&&b.matchPattern(Ih)||b.matchPattern(Jh);p=a.length+(h&&h.length||0);"@."===a&&(a="@",h=h?"this."+h:"this");!h&&a&&(h=a,
a="");if(!h)return null;if("@"===a)if(!Kh.test(h))b.error("Unrecognized special reference @"+h);else if((~h.indexOf("event")||~h.indexOf("node"))&&!b.inEvent)b.error("@event and @node are only valid references within an event directive");else if(~h.indexOf("context"))return b.pos-=h.length-7,{t:34,x:{t:30,n:"@context"}};if(!a&&!b.relaxedNames&&Lh.test(h))return b.pos=d,null;if(!a&&Ke.test(h))return p=Ke.exec(h)[0],b.pos=d+p.length,{t:26,v:p};a=(a||"")+ua(h);b.matchString("(")&&(c=a.lastIndexOf("."),
-1!==c&&"]"!==h[h.length-1]?(h=a.length,a=a.substr(0,c),b.pos=d+(p-(h-c))):--b.pos);return{t:30,n:a.replace(/^this\./,"./").replace(/^this$/,".")}}function ja(b){var a=Mh(b);if(!a)return null;var h=b.pos;b.allowWhitespace();if(!b.matchString("?"))return b.pos=h,a;b.allowWhitespace();(h=ja(b))||b.error("Expected a JavaScript expression");b.allowWhitespace();b.matchString(":")||b.error('Expected ":"');b.allowWhitespace();var p=ja(b);p||b.error("Expected a JavaScript expression");return{t:35,o:[a,h,
p]}}function Vc(b,a){var g,p=[],c=b.pos;do{b.allowWhitespace();a&&(g=b.matchPattern(He));var d=ja(b);if(null===d&&p.length)b.error("Expected a JavaScript expression");else if(null===d)return b.pos=c,null;g&&(d.p=!0);p.push(d);b.allowWhitespace()}while(b.matchString(","));return p}function Le(b,a){var g=b.pos,p=ja(b);if(!p)return(g=b.matchPattern(/^(\w+)/))?{t:30,n:g}:null;for(var c=0;c<a.length;c+=1)if(b.remaining().substr(0,a[c].length)===a[c])return p;b.pos=g;return Je(b)}function fc(b){function a(b){if("string"===
typeof b)return b;switch(b.t){case 24:case 26:case 20:case 25:return b.v;case 21:return JSON.stringify(String(b.v));case 22:return b.m&&Wc(b.m)?"[].concat("+p(b.m,"[","]",a)+")":"["+(b.m?b.m.map(a).join(","):"")+"]";case 23:return b.m&&Wc(b.m)?"Object.assign({},"+p(b.m,"{","}",h)+")":"{"+(b.m?b.m.map(function(b){return b.k+":"+a(b.v)}).join(","):"")+"}";case 33:return("typeof"===b.s?"typeof ":b.s)+a(b.o);case 36:return a(b.o[0])+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+a(b.o[1]);case 40:if(b.o&&Wc(b.o)){var g=
d++;return"(x$"+g+"="+a(b.x)+").apply(x$"+g+","+a({t:22,m:b.o})+")"}return a(b.x)+"("+(b.o?b.o.map(a).join(","):"")+")";case 34:return"("+a(b.x)+")";case 32:return a(b.x)+a(b.r);case 31:return b.n?"."+b.n:"["+a(b.x)+"]";case 35:return a(b.o[0])+"?"+a(b.o[1])+":"+a(b.o[2]);case 30:return"_"+c.indexOf(b.n);default:throw Error("Expected legal JavaScript");}}function h(b){return b.p?a(b.k):b.k+":"+a(b.v)}function p(b,a,g,h){b=b.reduce(function(b,p){b.str=p.p?b.str+(""+(b.open?g+",":b.str.length?",":"")+
h(p)):b.str+(""+(b.str.length?b.open?",":","+a:a)+h(p));b.open=!p.p;return b},{open:!1,str:""});b.open&&(b.str+=g);return b.str}var c,d=0;ab(b,c=[]);b=a(b);return{r:c,s:function(b){for(var a=[],g=d-1;0<=g;g--)a.push("x$"+g);return a.length?"(function(){var "+a.join(",")+";return("+b+");})()":b}(b)}}function Wc(b){for(var a=0;a<b.length;a++)if(b[a].p)return!0;return!1}function ab(b,a){30===b.t&&"string"===typeof b.n&&(~a.indexOf(b.n)||a.unshift(b.n));var g=b.o||b.m;if(g)if(d(g))ab(g,a);else for(var p=
g.length;p--;)ab(g[p],a);b.k&&27===b.t&&"string"!==typeof b.k&&ab(b.k,a);b.x&&ab(b.x,a);b.r&&ab(b.r,a);b.v&&ab(b.v,a)}function Ba(b,a){if(b){for(;34===b.t&&b.x;)b=b.x;if(30===b.t)~b.n.indexOf("@context")?a.x=fc(b):a.r=b.n;else{var g;g=b;for(var p=[],c;32===g.t&&31===g.r.t;)c=g.r,c.x?30===c.x.t?p.unshift(c.x):p.unshift(fc(c.x)):p.unshift(c.n),g=g.x;g=30!==g.t?null:{r:g.n,m:p};g?a.rx=g:a.x=fc(b)}return a}}function Me(b){var a=b.pos;/[=\/>\s]/.test(b.nextChar())||b.error("Expected `=`, `/`, `>` or whitespace");
b.allowWhitespace();if(!b.matchString("="))return b.pos=a,null;b.allowWhitespace();var a=b.pos,h=b.sectionDepth,p;if(!(p=Ne(b,"'")||Ne(b,'"'))){b.inAttribute=!0;p=[];for(var c=hb(b)||Oe(b);c;)p.push(c),c=hb(b)||Oe(b);p.length?b.inAttribute=!1:p=null}null===p&&b.error("Expected valid attribute value");b.sectionDepth!==h&&(b.pos=a,b.error("An attribute value must contain as many opening section tags as closing section tags"));return p.length?1===p.length&&"string"===typeof p[0]?Rc(p[0]):p:""}function Oe(b){var a,
h,p=b.pos;a=b.matchPattern(Nh);if(!a)return null;h=a;var c=b.tags.map(function(b){return b.open});-1!==(h=gc(h,c))&&(a=a.substr(0,h),b.pos=p+a.length);return a}function Ne(b,a){var g=b.pos;if(!b.matchString(a))return null;b.inAttribute=a;for(var p=[],c=hb(b)||Pe(b,a);null!==c;)p.push(c),c=hb(b)||Pe(b,a);if(!b.matchString(a))return b.pos=g,null;b.inAttribute=!1;return p}function Pe(b,a){var g=b.remaining(),p=b.tags.map(function(b){return b.open});p.push(a);p=gc(g,p);-1===p&&b.error("Quoted attribute value must have a closing quote");
if(!p)return null;b.pos+=p;return g.substr(0,p)}function hc(b,a,h,p){void 0===h&&(h=!1);void 0===p&&(p=!1);b.allowWhitespace();if(b.matchString("=")){b.allowWhitespace();var g=b.matchString('"')||b.matchString("'"),c=b.spreadArgs;b.spreadArgs=!0;b.inUnquotedAttribute=!g;h=p?Le(b,[g||" ","/",">"]):{m:Vc(b),t:22};b.inUnquotedAttribute=!1;b.spreadArgs=c;g&&(b.allowWhitespace(),b.matchString(g)!==g&&b.error("Expected matching quote '"+g+"'"));p?(b={t:Ka},Ba(h,b),a.f=[b]):a.f=fc(h)}else h&&b.error("Missing required directive arguments")}
function hb(b){var a,h;if(!1===b.interpolate[b.inside])return null;for(h=0;h<b.tags.length;h+=1)if(a=Oh(b,b.tags[h]))return a;if(b.inTag&&!b.inAttribute){a:{var p;b:{var c;b.allowWhitespace();if(a=b.matchPattern(Ph)){c=a.length;for(h=0;h<b.tags.length;h++)~(p=a.indexOf(b.tags[h].open))&&p<c&&(c=p);if(c<a.length&&(b.pos-=a.length-c,a=a.substr(0,c),!a)){p=null;break b}p={n:a}}else p=null}if(p){if(a=Qh[p.n])p.t=a.t,a.v&&(p.v=a.v),delete p.n,b.allowWhitespace(),"="===b.nextChar()&&(p.f=Me(b));else if(a=
Rh.exec(p.n))p.n=a[1],p.t=71,hc(b,p);else if(a=Sh.exec(p.n))p.n=a[1],p.t=72,hc(b,p),p.v="in-out"===a[2]?"t0":"in"===a[2]?"t1":"t2";else if(a=Th.exec(p.n)){a=a[1];h=[];for(var d=c=0;d<a.length;d++)"-"===a[d]&&"\\"!==a[d-1]&&(h.push(a.substring(c,d).replace(Qe,"")),c=d+1);h.push(a.substring(c).replace(Qe,""));p.n=h;p.t=70;b.inEvent=!0;b:{a=p;h=b.pos;b.matchString("=")||b.error("Missing required directive arguments");c=b.matchString("'")||b.matchString('"');b.allowWhitespace();d=b.matchPattern(Uh);if(void 0!==
d)if(c){if(b.allowWhitespace(),b.matchString(c)){a=(a.f=d)||!0;break b}}else if(b.matchPattern(Vh)){a=(a.f=d)||!0;break b}b.pos=h;a=void 0}a?Wh.test(p.f)&&(b.pos-=p.f.length,b.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, complete, detach, insert, destruct, attachchild, detachchild)")):hc(b,p,!0);b.inEvent=!1}else if(a=Xh.exec(p.n))h="bind"===a[2],p.n=h?a[3]:a[1],p.t=Ca,hc(b,p,!1,!0),!p.f&&h&&(p.f=[{t:Ka,r:a[3]}]);else if(b.allowWhitespace(),
a="="===b.nextChar()?Me(b):null,p.f=null!=a?a:p.f,b.sanitizeEventAttributes&&Yh.test(p.n)){a={exclude:!0};break a}else p.f=p.f||(""===p.f?"":0),p.t=Ca;a=p}else a=null}if(a)return b.allowWhitespace(),a}}function Oh(b,a){var g,p,c=b.pos;if(b.matchString("\\"+a.open)){if(0===c||"\\"!==b.str[c-1])return a.open}else if(!b.matchString(a.open))return null;if(g=th(b)){if(!b.matchString(a.close))return null;a.open=g[0];a.close=g[1];b.sortMustacheTags();return Zh}b.allowWhitespace();if(b.matchString("/"))if(--b.pos,
p=b.pos,Be(b))b.pos=p;else{b.pos=p-a.close.length;if(b.inAttribute)return b.pos=c,null;b.error("Attempted to close a section that wasn't open")}for(p=0;p<a.readers.length;p+=1)if(g=a.readers[p],g=g(b,a))return a.isStatic&&(g.s=1),b.includeLinePositions&&(g.p=b.getLinePos(c)),g;b.pos=c;return null}function Re(b,a){if(!b.matchString("&"))return null;b.allowWhitespace();var g=ja(b);if(!g)return null;b.matchString(a.close)||b.error("Expected closing delimiter '"+a.close+"'");var p={t:3};Ba(g,p);return p}
function Se(b){var a=[],h,p=b.pos;b.allowWhitespace();if(h=Xc(b)){h.x=Ba(h.x,{});a.push(h);for(b.allowWhitespace();b.matchString(",");)(h=Xc(b))||b.error("Expected another alias."),h.x=Ba(h.x,{}),a.push(h),b.allowWhitespace();return a}b.pos=p;return null}function Xc(b){var a=b.pos;b.allowWhitespace();var h=ja(b);if(!h)return b.pos=a,null;b.allowWhitespace();if(!b.matchPattern($h))return b.pos=a,null;b.allowWhitespace();(a=b.matchPattern(ai))||b.error("Expected a legal alias name.");return{n:a,x:h}}
function Te(b,a){var g,p,c=b.pos;try{g=Le(b,[a.close])}catch($a){p=$a}if(!g){if("!"===b.str.charAt(c))return b.pos=c,null;if(p)throw p;}if(!b.matchString(a.close)&&(b.error("Expected closing delimiter '"+a.close+"' after reference"),!g)){if("!"===b.nextChar())return null;b.error("Expected expression or legal reference")}p={t:Ka};Ba(g,p);return p}function Yc(b,a){var g=b.pos;if(!b.matchString(a.open))return null;b.allowWhitespace();if(!b.matchString("/"))return b.pos=g,null;b.allowWhitespace();var p=
b.remaining(),c=p.indexOf(a.close);if(-1!==c)return g={t:6,r:p.substr(0,c).split(" ")[0]},b.pos+=c,b.matchString(a.close)||b.error("Expected closing delimiter '"+a.close+"'"),g;b.pos=g;return null}function Ue(b,a){var g,p,c,d,e,f,k,l,m,n=!1;c=b.pos;if(b.matchString("^")){if(b.matchString("^/"))return b.pos=c,null;p={t:4,f:[],n:51}}else if(b.matchString("#")){if(p={t:4,f:[]},b.matchString("partial")&&(b.pos=c-b.standardDelimiters[0].length,b.error("Partial definitions can only be at the top level of the template, or immediately inside components")),
f=b.matchPattern(bi))m=f,p.n=Ve[f]}else return null;b.allowWhitespace();if("with"===f){if(c=Se(b))n=!0,p.z=c,p.t=19}else"each"===f&&(c=Xc(b))&&(p.z=[{n:c.n,x:{r:"."}}],g=c.x);if(!n){g||(g=ja(b));g||b.error("Expected expression");if(c=b.matchPattern(ci))(d=b.matchPattern(di))?p.i=c+","+d:p.i=c;!f&&g.n&&(m=g.n)}b.allowWhitespace();b.matchString(a.close)||b.error("Expected closing delimiter '"+a.close+"'");b.sectionDepth+=1;d=p.f;var q;do if(q=b.pos,c=Yc(b,a))m&&c.r!==m&&(f?(b.pos=q,b.error("Expected "+
a.open+"/"+m+a.close)):c.r&&b.warn("Expected "+a.open+"/"+m+a.close+" but found "+a.open+"/"+c.r+a.close)),--b.sectionDepth,l=!0;else{if(q=!n){c=b;q=a;var r=c.pos;c.matchString(q.open)?c.matchPattern(ei)?(r=ja(c),c.matchString(q.close)||c.error("Expected closing delimiter '"+q.close+"'"),c={t:61,x:r}):(c.pos=r,c=null):c=null;q=c}if(q)51===p.n&&b.error("{{else}} not allowed in {{#unless}}"),e&&b.error("illegal {{elseif...}} after {{else}}"),k||(k=[]),q={t:4,n:50,f:d=[]},Ba(c.x,q),k.push(q);else{if(c=
!n)c=b,q=a,r=c.pos,c.matchString(q.open)?c.matchPattern(fi)?(c.matchString(q.close)||c.error("Expected closing delimiter '"+q.close+"'"),c={t:60}):(c.pos=r,c=null):c=null;if(c)51===p.n&&b.error("{{else}} not allowed in {{#unless}}"),e&&b.error("there can only be one {{else}} block, at the end of a section"),e=!0,k||(k=[]),k.push({t:4,n:51,f:d=[]});else{c=b.read(ic);if(!c)break;d.push(c)}}}while(!l);k&&(p.l=k);n||Ba(g,p);p.f.length||delete p.f;return p}function ib(b){return"string"===typeof b}function jb(b,
a,h,c,d){if("string"!==typeof b){var g,p,e,f,na;gi(b);for(g=b.length;g--;)p=b[g],p.exclude?b.splice(g,1):a&&9===p.t&&b.splice(g,1);We(b,c?Xe:null,d?Ye:null);for(g=b.length;g--;){p=b[g];if(p.f){d=7===p.t&&hi.test(p.e);c=h||d;!h&&d&&We(p.f,ii,ji);if(!c){d=b[g-1];e=b[g+1];if(!d||"string"===typeof d&&Ye.test(d))f=!0;if(!e||"string"===typeof e&&Xe.test(e))na=!0}jb(p.f,a,c,f,na)}p.l&&(jb(p.l,a,h,f,na),p.l.forEach(function(b){return b.l=1}),p.l.unshift(g+1,0),b.splice.apply(b,p.l),delete p.l);p.m&&(jb(p.m,
a,h,f,na),1>p.m.length&&delete p.m)}for(g=b.length;g--;)"string"===typeof b[g]&&("string"===typeof b[g+1]&&(b[g]+=b[g+1],b.splice(g+1,1)),h||(b[g]=b[g].replace(ki," ")),""===b[g]&&b.splice(g,1))}}function li(b){var a,h=b.pos;if(!b.matchString("</"))return null;if(a=b.matchPattern(mi))return b.inside&&a!==b.inside?(b.pos=h,null):{t:14,e:a};b.pos-=2;b.error("Illegal closing tag")}function ni(b,a){var g=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(a),c=oi[b];return g&&c?!~c.indexOf(g[1].toLowerCase()):!0}function pi(b,
a){var g=b.pos;if(!b.matchString("</"))return null;b.matchString("#");b.allowWhitespace();if(!b.matchString(a))return b.pos=g,null;b.allowWhitespace();return b.matchString(">")?!0:(b.pos=g,null)}function Ze(b,a){Object.keys(b).forEach(function(g){if("s"===g&&Array.isArray(b.r)){g=b.s;var h=b.r;a[g]||(a[g]=Pc(g,h.length))}else g=b[g],(Array.isArray(g)||d(g))&&Ze(g,a)})}function Zc(b,a){return(new qi(b,a||{})).result}function Qc(b,a,h){b||e("Missing Ractive.parse - cannot parse "+a+". "+h)}function $e(b,
a){Qc(we,'compution string "${str}"',ri);return we(b,a)}function af(b,a){return a.call(b,{fromId:sa.fromId,isParsed:sa.isParsed,parse:function(a,g){void 0===g&&(g=sa.getParseOptions(b));return sa.parse(a,g)}})}function $c(b,a){if("string"===typeof b){var g=b;"#"===g[0]&&(g=sa.fromId(g));b=sa.parseFor(g,a)}else{if(void 0==b)throw Error("The template cannot be "+b+".");if("number"!==typeof b.v)throw Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");
if(4!==b.v)throw Error("Mismatched template version (expected 4, got "+b.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");ze(b)}return b}function bf(b,a,h){if(a)for(var g in a)if(h||!b.hasOwnProperty(g))b[g]=a[g]}function si(b,a,h){function g(){var b=ti(g._parent,a),c="_super"in this,p=this._super;this._super=b;b=h.apply(this,arguments);c?this._super=p:delete this._super;return b}if(!/_super/.test(h))return h;g._parent=b;g._method=h;
return g}function ti(b,a){if(a in b){var g=b[a];return"function"===typeof g?g:function(){return g}}return S}function cf(b,a,h){return"options."+b+" has been deprecated in favour of options."+a+"."+(h?" You cannot specify both options, please use options."+a+".":"")}function Jb(b,a,h){if(a in b){if(h in b)throw Error(cf(a,h,!0));n(cf(a,h));b[h]=b[a]}}function ui(b){Jb(b,"beforeInit","onconstruct");Jb(b,"init","onrender");Jb(b,"complete","oncomplete");Jb(b,"eventDefinitions","events");Array.isArray(b.adaptors)&&
Jb(b,"adaptors","adapt")}function df(b,a,h,c){ui(c);for(var g in c)if(vi.hasOwnProperty(g)){var p=c[g];"el"!==g&&"function"===typeof p?n(g+" is a Ractive option that does not expect a function and will be ignored","init"===b?h:null):h[g]=p}if(c.append&&c.enhance)throw Error("Cannot use append and enhance at the same time");jc.forEach(function(g){g[b](a,h,c)});ef[b](a,h,c);ad[b](a,h,c);ff[b](a,h,c);wi(a.prototype,h,c)}function wi(b,a,h){for(var g in h)if(!xi[g]&&h.hasOwnProperty(g)){var c=h[g];"function"===
typeof c&&(g in bd&&!gf.test(c.toString())&&n("Overriding Ractive prototype function '"+g+"' without calling the '"+gf+"' method can be very dangerous."),c=si(b,g,c));a[g]=c}}function hf(b){var a={};b.forEach(function(b){return a[b]=!0});return a}function kc(b,a){if(a.r)return va(b,a.r);if(a.x)return new cd(b,a.x);if(a.rx)return new yi(b,a.rx)}function jf(b,a){for(var g={},c=0;c<b.length;c++)g[b[c].n]=kc(a,b[c].x);for(var d in g)g[d].reference();return g}function zi(b){return"string"!==typeof b?{}:
se(b,function(b,a){return b.split(";").filter(function(b){return!!b.trim()}).map(a).reduce(function(b,a){var g=a.indexOf(":"),h=a.substr(0,g).trim();b[h]=a.substr(g+1).trim();return b},{})})}function dd(b){b=b.split(Ai);for(var a=b.length;a--;)b[a]||b.splice(a,1);return b}function Bi(b){var a=b.element,h=b.name;if("value"===h){b.interpolator&&(b.interpolator.bound=!0);if("select"===a.name&&"value"===h)return a.getAttribute("multiple")?Ci:Di;if("textarea"===a.name)return kf;if(null!=a.getAttribute("contenteditable"))return Ei;
if("input"===a.name){b=a.getAttribute("type");if("file"===b)return S;if("radio"===b&&a.binding&&"name"===a.binding.attribute.name)return Fi;if(~Gi.indexOf(b))return kf}return Hi}var c=a.node;if(b.isTwoway&&"name"===h){if("radio"===c.type)return Ii;if("checkbox"===c.type)return Ji}return"style"===h?Ki:0===h.indexOf("style-")?Li:"class"!==h||c.namespaceURI&&"http://www.w3.org/1999/xhtml"!==c.namespaceURI?0===h.indexOf("class-")?Ni:b.isBoolean?(a=a.getAttribute("type"),!b.interpolator||"checked"!==h||
"checkbox"!==a&&"radio"!==a||(b.interpolator.bound=!0),Oi):b.namespace&&b.namespace!==b.node.namespaceURI?Pi:Qi:Mi}function Ci(b){var a=this.getValue();Array.isArray(a)||(a=[a]);var h=this.node.options,c=h.length;if(b)for(;c--;)h[c].selected=!1;else for(;c--;){var d=h[c];b=d._ractive?d._ractive.value:d.value;a:{for(var e=0,f=a.length;e<f;e++)if(a[e]==b){b=!0;break a}b=!1}d.selected=b}}function Di(b){var a=this.getValue();if(!this.locked){this.node._ractive.value=a;var h=this.node.options,c=h.length,
d=!1;if(b)for(;c--;)h[c].selected=!1;else for(;c--;){b=h[c];var e=b._ractive?b._ractive.value:b.value;b.disabled&&b.selected&&(d=!0);if(e==a){b.selected=!0;return}}d||(this.node.selectedIndex=-1)}}function Ei(b){var a=this.getValue();this.locked||(this.node.innerHTML=b?"":void 0===a?"":a)}function Fi(b){var a=this.node,h=a.checked,c=this.getValue();if(b)return a.checked=!1;a.value=this.node._ractive.value=c;a.checked=this.element.compare(c,this.element.getAttribute("name"));h&&!a.checked&&this.element.binding&&
this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function Hi(b){this.locked||(b?(this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null):(b=this.getValue(),this.node.value=this.node._ractive.value=b,this.node.setAttribute("value",Ja(b))))}function kf(b){this.locked||(b?(this.node._ractive.value="",this.node.removeAttribute("value")):(b=this.getValue(),this.node._ractive.value=b,this.node.value=Ja(b),this.node.setAttribute("value",
Ja(b))))}function Ii(b){this.node.checked=b?!1:this.element.compare(this.getValue(),this.element.binding.getValue())}function Ji(b){b=this.element;var a=this.node,h=b.binding,c=this.getValue(),d=b.getAttribute("value");if(Array.isArray(c)){for(var e=c.length;e--;)if(b.compare(d,c[e])){h.isChecked=a.checked=!0;return}h.isChecked=a.checked=!1}else h.isChecked=a.checked=b.compare(c,d)}function Ki(b){b=b?{}:zi(this.getValue()||"");for(var a=this.node.style,h=Object.keys(b),c=this.previous||[],d=0;d<h.length;){if(h[d]in
a){var e=b[h[d]].replace("!important","");a.setProperty(h[d],e,e.length!==b[h[d]].length?"important":"")}d++}for(d=c.length;d--;)!~h.indexOf(c[d])&&c[d]in a&&a.setProperty(c[d],"","");this.previous=h}function Li(b){this.style||(this.style=ed(this.name.substr(6)));b=b?"":Ja(this.getValue());var a=b.replace("!important","");this.node.style.setProperty(this.style,a,a.length!==b.length?"important":"")}function Mi(b){b=b?[]:dd(Ja(this.getValue()));var a=this.node.className,a=void 0!==a.baseVal?a.baseVal:
a,h=dd(a),c=this.previous||h.slice(0),h=b.concat(h.filter(function(b){return!~c.indexOf(b)})).join(" ");h!==a&&("string"!==typeof this.node.className?this.node.className.baseVal=h:this.node.className=h);this.previous=b}function Ni(b){var a=this.name.substr(6),h=this.node.className,h=void 0!==h.baseVal?h.baseVal:h,h=dd(h);b=b?!1:this.getValue();this.inlineClass||(this.inlineClass=a);b&&!~h.indexOf(a)?h.push(a):!b&&~h.indexOf(a)&&h.splice(h.indexOf(a),1);"string"!==typeof this.node.className?this.node.className.baseVal=
h.join(" "):this.node.className=h.join(" ")}function Oi(b){this.locked||(b?(this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName)):this.useProperty?this.node[this.propertyName]=this.getValue():(b=this.getValue())?this.node.setAttribute(this.propertyName,"string"===typeof b?b:""):this.node.removeAttribute(this.propertyName))}function Qi(b){b?this.node.removeAttribute(this.name):this.node.setAttribute(this.name,Ja(this.getString()))}function Pi(b){b?this.node.removeAttributeNS(this.namespace,
this.name.slice(this.name.indexOf(":")+1)):this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),Ja(this.getString()))}function Ri(b){Da=!0;b();Da=!1}function Si(b,a){if(Ti.test(b))return[];var g=a?"svg":"div";return b?(lf.innerHTML="<"+g+" "+b+"></"+g+">")&&Z(lf.childNodes[0].attributes):[]}function fd(b,a,h){b.value=0===a?!0:"true"===a?!0:"false"===a||"0"===a?!1:a;a=b.element[b.flag];b.element[b.flag]=b.value;h&&!b.element.attributes.binding&&a!==b.value&&b.element.recreateTwowayBinding();
return b.value}function Ui(b,a){b.applyValue=function(b){(this.parent.value[a]=b)&&b.viewmodel?this.link(b.viewmodel.getRactiveModel(),a):this.link(Object.create(Kb),a);this._link.markedAll()};b.applyValue(b.parent.ractive[a],a);b._link.set=function(a){return b.applyValue(a)};b._link.applyValue=function(a){return b.applyValue(a)};return b._link}function mf(b,a){b._link&&b._link.implicit&&b._link.isDetached()&&b.attach(a);for(var g in b.childByKey)if(g in b.value)mf(b.childByKey[g],a);else if(!b.childByKey[g]._link||
b.childByKey[g]._link.isDetached()){var c=va(a,g);c&&b.childByKey[g].link(c,g,{implicit:!0})}}function nf(b){b._link&&b._link.implicit&&b.unlink();for(var a in b.childByKey)nf(b.childByKey[a])}function gd(b,a){X.DEBUG&&Lb();b._guid="r-"+Vi++;b._subs=Object.create(null);b._nsSubs=0;b._config={};b.event=null;b._eventQueue=[];b._observers=[];b._children=[];b._children.byName={};b.children=b._children;b.component||(b.root=b,b.parent=b.container=null);Wi(b);!a.hasOwnProperty("delegate")&&b.parent&&b.parent.delegate!==
b.delegate&&(b.delegate=!1);Xi.fire(b,a);for(var g=of.length;g--;){var c=of[g];b[c]=Object.assign(Object.create(b.constructor[c]||null),a[c])}b._attributePartial&&(b.partials["extra-attributes"]=b._attributePartial,delete b._attributePartial);g=new pf({adapt:Yi(b,b.adapt,a),data:lc.init(b.constructor,b,a),ractive:b});b.viewmodel=g;var c=Object.assign(Object.create(b.constructor.prototype.computed),a.computed),d;for(d in c)if("__proto__"!==d){var f=void 0,k=void 0,l=void 0,m=void 0,n=void 0,q=b,r=
d,v=c[d];"function"===typeof v&&(n=xb(v,q),l=v.toString(),k=!0);"string"===typeof v&&(n=$e(v,q),l=v);"object"===typeof v&&("string"===typeof v.get?(n=$e(v.get,q),l=v.get):"function"===typeof v.get?(n=xb(v.get,q),l=v.get.toString(),k=!0):e("`%s` computation must have a `get()` method",r),"function"===typeof v.set&&(m=xb(v.set,q),f=v.set.toString()));g.compute(d,{getter:n,setter:m,getterString:l,setterString:f,getterUseStack:k})}}function Yi(b,a,h){function g(a){"string"===typeof a&&((a=v("adaptors",
b,a))||e(Bb(a,"adaptor")));return a}a=a.map(g);h=N(h.adapt).map(g);a=[a,h];b.parent&&!b.isolated&&a.push(b.parent.viewmodel.adaptors);return ca.apply(null,a)}function Wi(b){var a=b.component,h=b.constructor.attributes;if(h&&a){var c=a.template,d=c.m?c.m.slice():[],e=d.filter(function(b){return b.t===Ca}).map(function(b){return b.n});h.required.forEach(function(b){~e.indexOf(b)||n("Component '"+a.name+"' requires attribute '"+b+"' to be provided")});for(var f=h.optional.concat(h.required),k=[],l=d.length;l--;){var m=
d[l];m.t!==Ca||~f.indexOf(m.n)||(h.mapAll?k.unshift({t:Ca,n:m.n,f:[{t:Ka,r:"~/"+m.n}]}):k.unshift(d.splice(l,1)[0]))}k.length&&(a.template={t:c.t,e:c.e,f:c.f,m:d,p:c.p});b._attributePartial=k}}function qf(b,a){b.torndown=!0;b.viewmodel.teardown();b.fragment.unbind();b._observers.slice().forEach(Xa);b.el&&b.el.__ractive_instances__&&L(b.el.__ractive_instances__,b);var g=a();Zi.fire(b);g.then(function(){return $i.fire(b)});return g}function aj(b){this.item&&this.removeChild(this.item);var a=b.instance;
b.anchor=this;b.parentFragment=this.parentFragment;b.name=b.nameOption||this.name;this.name=b.name;a.isolated||a.viewmodel.attached(this.parentFragment);if(this.rendered&&this.rendered){b.shouldDestroy=!1;b.parentFragment=this.parentFragment;this.item=b;this.instance=b.instance;a=this.parentFragment.findNextNode(this);b.instance.fragment.rendered&&b.instance.unrender();b.partials=b.instance.partials;b.instance.partials=Object.assign({},b.partials,this._partials);b.instance.fragment.unbind();b.instance.fragment.bind(b.instance.viewmodel);
this.attributes.forEach(Oa);this.eventHandlers.forEach(Oa);this.attributes.forEach(K);this.eventHandlers.forEach(K);var h=this.parentFragment.findParentNode();hd(b.instance,h,h.contains(a)?a:null,this.occupants);b.lastBound!==this&&(b.lastBound=this)}}function bj(b){this.item===b&&(rf(this,b),this.name=this.template.n)}function rf(b,a){b.rendered&&(a.shouldDestroy=!0,a.instance.unrender(),b.eventHandlers.forEach(wa),b.attributes.forEach(wa),b.eventHandlers.forEach(ma),b.attributes.forEach(ma),a.instance.el=
a.instance.anchor=null,a.parentFragment=null,a.anchor=null,b.item=null,b.instance=null)}function id(){var b=kb;kb=[];b.forEach(Kc)}function jd(b,a,h,c){void 0===c&&(c={});a&&a.f&&a.f.s&&(b.fn=xe(a.f.s,a.f.r.length),!0===c.register&&(b.models=kd(b,a,h,c)))}function kd(b,a,h,c){void 0===c&&(c={});return a.f.r.map(function(a,g){var p;if(c.specialRef&&(p=c.specialRef(a,g)))return p;p=va(h,a);!0===c.register&&p.register(b);return p})}function cj(b,a){a&&a.f&&a.f.s&&(b.models&&b.models.forEach(function(a){a&&
a.unregister&&a.unregister(b)}),b.models=null)}function T(){this._ractive.binding.handleChange()}function sf(b,a,h){b+="-bindingGroup";return a[b]||(a[b]=new lb(b,a,h))}function dj(){var b=this,a=[];this.bindings.filter(function(b){return b.node&&b.node.checked}).map(function(b){return b.element.getAttribute("value")}).forEach(function(g){b.bindings[0].arrayContains(a,g)||a.push(g)});return a}function tf(){T.call(this);var b=this._ractive.binding.model.get();this.value=void 0==b?"":b}function ej(b){var a;
return function(){var g=this;a&&clearTimeout(a);a=setTimeout(function(){g._ractive.binding.rendered&&T.call(g);a=null},b)}}function ld(b){return b.selectedOptions?Z(b.selectedOptions):b.options?Z(b.options).filter(function(b){return b.selected}):[]}function fj(){var b=this.bindings.filter(function(b){return b.node.checked});if(0<b.length)return b[0].element.getAttribute("value")}function bb(b){if(!b||!b.template.f||1!==b.template.f.length||b.template.f[0].s)return!1;if(b.template.f[0].t===Ka)return!0;
3===b.template.f[0].t&&n("It is not possible create a binding using a triple mustache.");return!1}function gj(b){var a=b.name,h=b.attributeByName,c=bb(h.value),d=bb(h.contenteditable);return(b.getAttribute("contenteditable")||d)&&c?hj:"input"===a?(a=b.getAttribute("type"),"radio"===a?(c=bb(h.name),h=bb(h.checked),c&&h?(n("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:b.root}),uf):c?uf:h?ij:null):"checkbox"===a?(b=bb(h.name),h=bb(h.checked),
b&&h?vf:b?jj:h?vf:null):"file"===a&&c?kj:"number"===a&&c||"range"===a&&c?lj:c?mc:null):"select"===a&&c?b.getAttribute("multiple")?mj:nj:"textarea"===a&&c?mc:null}function oj(b){var a=b.attributeByName.name;return"radio"===b.getAttribute("type")&&(a||{}).interpolator&&b.getAttribute("value")===a.interpolator.model.get()}function pj(b){return(b=b.toString())?" "+b:""}function qj(b){var a=b.getAttribute("xmlns");return a?a:"svg"===b.name?"http://www.w3.org/2000/svg":(a=b.parent)?"foreignobject"===a.name?
"http://www.w3.org/1999/xhtml":a.node.namespaceURI:b.ractive.el.namespaceURI}function wf(b){for(var a=b.type,h=b.currentTarget,c=h._ractive&&h._ractive.proxy,d=b.target,e=!0,f;e&&d&&d!==h;)(f=d._ractive&&d._ractive.proxy)&&f.parentFragment.delegate===c&&rj(b,d,h)&&(f=f.listeners&&f.listeners[a])&&f.forEach(function(a){e=!1!==a.call(d,b)&&e}),d=d.parentNode;return e}function rj(b,a,h){if(xf&&b instanceof xf)for(b=a;b&&b!==h;){if(b.disabled)return!1;b=b.parentNode}return!0}function Ra(b){var a=this,
h=this._ractive.proxy;h.listeners&&h.listeners[b.type]&&h.listeners[b.type].forEach(function(g){return g.call(a,b)})}function yf(){var b=this._ractive.proxy;I.start();b.formBindings.forEach(sj);I.end()}function sj(b){b.model.set(b.resetValue)}function zf(b,a,h,c){if(h){var g=h[0];g&&3===g.nodeType?(a=g.nodeValue.indexOf(c),h.shift(),0===a?g.nodeValue.length!==c.length&&h.unshift(g.splitText(c.length)):g.nodeValue=c):(g=b.node=Q.createTextNode(c),h[0]?a.insertBefore(g,h[0]):a.appendChild(g));b.node=
g}else b.node||(b.node=Q.createTextNode(c)),a.appendChild(b.node)}function tj(b){b.allowWhitespace();var a=Ge(b);if(!a)return null;a={key:a};b.allowWhitespace();if(!b.matchString(":"))return null;b.allowWhitespace();b=b.read();if(!b)return null;a.value=b.v;return a}function uj(b){var a=b.template.f,h=b.element.instance.viewmodel,c=h.value;if(1===a.length&&a[0].t===Ka){var d=kc(b.parentFragment,a[0]),e=d.get(!1);a[0].s?"object"!==typeof e||a[0].x?h.joinKey(R(b.name)).set(e):n("Cannot copy non-computed object value from static mapping '"+
b.name+"'"):(b.model=d,b.link=h.createLink(b.name,d,a[0].r,{mapping:!0}),void 0===e&&!d.isReadonly&&b.name in c&&d.set(c[b.name]))}else b.boundFragment=(new M({owner:b,template:a})).bind(),b.model=h.joinKey(R(b.name)),b.model.set(b.boundFragment.valueOf()),b.boundFragment.bubble=function(){M.prototype.bubble.call(b.boundFragment);I.scheduleTask(function(){b.boundFragment.update();b.model.set(b.boundFragment.valueOf())})}}function nc(b,a,h){var g;var c=Af(a,(h||{}).owner);c?g=c:(h=q("partials",b,a))?
(c=h.partials[a],"function"===typeof c&&(g=c.bind(h),g.isOwner=h.partials.hasOwnProperty(a),c=g.call(b,sa)),c||""===c?(sa.isParsed(c)||(c=sa.parseFor(c,h),c.p&&n("Partials ({{>%s}}) cannot contain nested inline partials",a,{ractive:b}),(g?h:h.partials.hasOwnProperty(a)?h:Bf(h.constructor,a)).partials[a]=c=c.t),g&&(c._fn=g),g=c.v?c.t:c):(n('A function was specified for "%s" %s, but no %s was returned',a,"partial","partial",{ractive:b}),g=void 0)):g=void 0;if(g)return g;if(g=sa.fromId(a,{noThrow:!0}))return g=
sa.parseFor(g,b),g.p&&kh(b.partials,g.p),b.partials[a]=g.t}function Bf(b,a){if(b)return b.partials.hasOwnProperty(a)?b:Bf(b.Parent,a)}function Af(b,a){if(a){if(a.template&&a.template.p&&a.template.p[b])return a.template.p[b];if(a.parentFragment&&a.parentFragment.owner)return Af(b,a.parentFragment.owner)}}function Cf(b,a,h){var g;try{g=sa.parse(a,sa.getParseOptions(h))}catch(na){n("Could not parse partial from expression '"+b+"'\n"+na.message)}return g||{t:[]}}function vj(b,a){return a||Array.isArray(b)?
52:d(b)||"function"===typeof b?54:void 0===b?null:50}function Df(b,a){var g=b.parentFragment.findNextNode(b);if(g){var c=xa();a.render(c);g.parentNode.insertBefore(c,g)}else a.render(b.parentFragment.findParentNode())}function Ef(){Mb=!Q[oc]}function md(){Mb=!1}function nd(){Mb=!0}function od(b,a,h){for(var g=a;g;){if(g.hasOwnProperty(b)&&(void 0===h||h?g.rendering:g.unrendering))return g[b];g=g.component&&g.component.ractive}return a[b]}function pd(b){return Ff[b]||(Ff[b]=La(b))}function Gf(b,a){var g=
q("components",b,a),c;if(g&&(c=g.components[a])&&!c.Parent){var d=c.bind(g);d.isOwner=g.components.hasOwnProperty(a);c=d();if(!c){n('A function was specified for "%s" %s, but no %s was returned',a,"component","component",{ractive:b});return}"string"===typeof c&&(c=Gf(b,c));c._fn=d;g.components[a]=c}return c}function pc(b){if("string"===typeof b.template)return new Hf(b);if(7===b.template.t){var a=Gf(b.parentFragment.ractive,b.template.e);if(a)return new If(b,a);a=b.template.e.toLowerCase();return new (wj[a]||
Nb)(b)}if(b.template.t===Ca){a=b.owner;if(!a||11!==a.type&&15!==a.type&&7!==a.type)a=ea(b.parentFragment);b.element=a;a=15===a.type||11===a.type?xj:Jf}else a=pa[b.template.t];if(!a)throw Error("Unrecognised item type "+b.template.t);return new a(b)}function qd(b,a,h,c){void 0===c&&(c=0);return b.map(function(b){if(1===b.type)return b.template;if(b.fragment)return b.fragment.iterations?b.fragment.iterations.map(function(b){return qd(b.items,a,h,c)}).join(""):qd(b.fragment.items,a,h,c);var g=h+"-"+
c++;b=b.model||b.newModel;a[g]=b?b.wrapper?b.wrapperValue:b.get():void 0;return"${"+g+"}"}).join("")}function yj(b){b.unrender(!0)}function Kf(b,a){return b[a._guid]||(b[a._guid]=[])}function Lf(b,a){var g=Kf(b.queue,a);for(b.hook.fire(a);g.length;)Lf(b,g.shift());delete b.queue[a._guid]}function rd(b,a,h){Object.keys(b.viewmodel.computations).forEach(function(a){var g=b.viewmodel.computations[a];b.viewmodel.value.hasOwnProperty(a)&&g.set(b.viewmodel.value[a])});Mf(b,a,"on");sd.init(b.constructor,
b,a);zj.fire(b);Mf(b,a,"observe");Nf.begin(b);(a=b.fragment=Of(b,h))&&a.bind(b.viewmodel);Nf.end(b);a&&(a=fb(b.el||b.target))&&(a=b.render(a,b.append),X.DEBUG_PROMISES&&a["catch"](function(a){r("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");n("An error happened during rendering",{ractive:b});k(a);throw a;}))}function Of(b,
a){void 0===a&&(a={});if(b.template){var g;if(a.cssIds||b.cssId)g=a.cssIds?a.cssIds.slice():[],b.cssId&&g.push(b.cssId);return new M({owner:b,template:b.template,cssIds:g})}}function Mf(b,a,h){a=(b.constructor["_"+h]||[]).concat(Oc(a[h]||[]));var g="on"===h?"once":h+"Once";a.forEach(function(a){var c=a[0];a=a[1];if("function"===typeof a)b[h](c,a);else if("object"===typeof a&&"function"===typeof a.handler)b[a.once?g:h](c,a.handler,a)})}function hd(b,a,h,c){b.rendering=!0;var g=I.start(b,!0);I.scheduleTask(function(){return Aj.fire(b)},
!0);if(b.fragment.rendered)throw Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");b.destroyed&&(b.destroyed=!1,b.fragment=Of(b).bind(b.viewmodel));h=fb(h)||b.anchor;b.el=b.target=a;b.anchor=h;b.cssId&&Q&&td&&(Pf?Sa.styleSheet.cssText=dc(null):Sa.innerHTML=dc(null),td=!1);a&&((a.__ractive_instances__||(a.__ractive_instances__=[])).push(b),h?(c=Q.createDocumentFragment(),b.fragment.render(c),a.insertBefore(c,h)):b.fragment.render(a,c));I.end();
b.rendering=!1;return g.then(function(){b.torndown||Bj.fire(b)})}function Ob(b,a,h,c){b.forEach(function(b){if(8!==b.type||b.refName!==a&&b.name!==a){if(b.fragment)Ob(b.fragment.iterations||b.fragment.items,a,h,c);else if(Array.isArray(b.items))Ob(b.items,a,h,c);else if(15===b.type&&b.instance){if(b.instance.partials[a])return;Ob(b.instance.fragment.items,a,h,c)}7===b.type&&Array.isArray(b.attributes)&&Ob(b.attributes,a,!0,c)}else b.inAttribute=h,c.push(b)})}function Cj(b){b.forceResetTemplate()}
function Qf(){var b=[this.cssId].concat(this.findAllComponents().map(function(b){return b.cssId})),b=Object.keys(b.reduce(function(b,a){return b[a]=!0,b},{}));return dc(b)}function Rf(){return this.fragment.toString(!0)}function Sf(b){return b&&b instanceof this}function Tf(){for(var b=[],a=arguments.length;a--;)b[a]=arguments[a];return b.length?b.reduce(ud,this):ud(this)}function Uf(b,a){void 0===a&&(a={});return ud(this,a,b)}function ud(b,a,h){void 0===a&&(a={});var g="function"===typeof h&&h;if(a.prototype instanceof
X)throw Error("Ractive no longer supports multiple inheritance.");if(g){if(!(g.prototype instanceof b))throw Error("Only classes that inherit the appropriate prototype may be used with extend");if(!Dj.test(g.toString()))throw Error("Only classes that call super in their constructor may be used with extend");h=g.prototype}else g=function(b){if(!(this instanceof g))return new g(b);gd(this,b||{});rd(this,b||{},{})},h=Object.create(b.prototype),h.constructor=g,g.prototype=h;Object.defineProperties(g,
{defaults:{value:h},extend:{value:Tf,writable:!0,configurable:!0},extendClass:{value:Uf,writable:!0,configurable:!0},Parent:{value:b},Ractive:{value:X},isInstance:{value:Sf}});sd.extend(b,h,a);g._on=(b._on||[]).concat(Oc(a.on));g._observe=(b._observe||[]).concat(Oc(a.observe));if(a.attributes){var c;c=Array.isArray(a.attributes)?{optional:a.attributes,required:[]}:a.attributes;Array.isArray(c.required)||(c.required=[]);Array.isArray(c.optional)||(c.optional=[]);g.attributes=c}lc.extend(b,h,a);a.computed&&
(h.computed=Object.assign(Object.create(b.prototype.computed),a.computed));return g}function X(b){if(!(this instanceof X))return new X(b);gd(this,b||{});rd(this,b||{},{})}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(b,a){if(null===this||void 0===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof b)throw new TypeError(b+" is not a function");for(var g=Object(this),c=g.length>>>0,d=0;d<c;d++)if(Object.hasOwnProperty.call(g,
d)&&b.call(a,g[d],d,g))return g[d]},configurable:!0,writable:!0});"undefined"!==typeof window&&window.Node&&window.Node.prototype&&!window.Node.prototype.contains&&(Node.prototype.contains=function(b){if(!b)throw new TypeError("node required");do if(this===b)return!0;while(b=b&&b.parentNode);return!1});Object.assign||(Object.assign=function(b){for(var a=[],h=arguments.length-1;0<h--;)a[h]=arguments[h+1];if(null==b)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(b),
c=a.length,d=0;d<c;d++){var e=a[d],f;for(f in e)Object.prototype.hasOwnProperty.call(e,f)&&(h[f]=e[f])}return h});if("undefined"!==typeof window&&window.performance&&!window.performance.now){window.performance=window.performance||{};var Ej=Date.now();window.performance.now=function(){return Date.now()-Ej}}if("undefined"!==typeof window&&!window.Promise){var vd={},Vf={},Fj={},Ta=window.Promise=function(b){var a=[],h=[],c=vd,d,e,f=function(b){return function(g){c===vd&&(d=g,c=b,e=Gj(c===Vf?a:h,d),setTimeout(e,
0))}},k=f(Vf),f=f(Fj);try{b(k,f)}catch(Fb){f(Fb)}return{then:function(b,g){var d=new Ta(function(p,f){var k=function(b,a,g){"function"===typeof b?a.push(function(a){try{Wf(d,b(a),p,f)}catch(Hj){f(Hj)}}):a.push(g)};k(b,a,p);k(g,h,f);c!==vd&&setTimeout(e,0)});return d},"catch":function(b){return this.then(null,b)}}};Ta.all=function(b){return new Ta(function(a,h){var g=[],c,d;if(b.length){var e=function(b,d){b&&"function"===typeof b.then?b.then(function(b){g[d]=b;--c||a(g)},h):(g[d]=b,--c||a(g))};for(c=
d=b.length;d--;)e(b[d],d)}else a(g)})};Ta.resolve=function(b){return new Ta(function(a){a(b)})};Ta.reject=function(b){return new Ta(function(a,h){h(b)})};var Gj=function(b,a){return function(){for(var g;g=b.shift();)g(a)}},Wf=function(b,a,h,c){var g;if(a===b)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(a instanceof Ta)a.then(h,c);else if(!a||"object"!==typeof a&&"function"!==typeof a)h(a);else{try{g=a.then}catch(Fb){c(Fb);return}if("function"===typeof g){var d,
p=function(a){d||(d=!0,Wf(b,a,h,c))},e=function(b){d||(d=!0,c(b))};try{g.call(a,p,e)}catch(Fb){d||(c(Fb),d=!0)}}else h(a)}}}if(!("undefined"===typeof window||window.requestAnimationFrame&&window.cancelAnimationFrame)){var Xf=0;window.requestAnimationFrame=function(b){var a=Date.now(),h=Math.max(0,16-(a-Xf)),c=window.setTimeout(function(){b(a+h)},h);Xf=a+h;return c};window.cancelAnimationFrame=function(b){clearTimeout(b)}}var Yf={el:void 0,append:!1,delegate:!0,template:null,delimiters:["{{","}}"],
tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,contextLines:0,parserTransforms:[],data:{},computed:{},syncComputedChildren:!1,resolveInstanceMembers:!0,warnAboutAmbiguity:!1,adapt:[],isolated:!0,twoway:!0,lazy:!1,noIntro:!1,noOutro:!1,transitionsEnabled:!0,complete:void 0,nestedTransitions:!0,css:null,noCssTransform:!1},Zf={linear:function(b){return b},easeIn:function(b){return Math.pow(b,
3)},easeOut:function(b){return Math.pow(b-1,3)+1},easeInOut:function(b){return 1>(b/=.5)?.5*Math.pow(b,3):.5*(Math.pow(b-2,3)+2)}},Pg=Object.prototype.toString,ra="undefined"!==typeof window?window:null,Q=ra?document:null,wd=!!Q,$f="undefined"!==typeof console&&"function"===typeof console.warn&&"function"===typeof console.warn.apply,ag=Q?Q.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,cb=["o","ms","moz","webkit"],S=function(){},Zd={},Fc,Zb,Lb;if($f){var bg=
["%cRactive.js %c0.9.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];Lb=function(){if(!1!==X.WELCOME_MESSAGE){var b="WELCOME_MESSAGE"in X?X.WELCOME_MESSAGE:"You're running Ractive 0.9.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",
a=!!console.groupCollapsed;a&&console.groupCollapsed.apply(console,bg);console.log(b);a&&console.groupEnd(bg)}Lb=S};Zb=function(b,a){Lb();if("object"===typeof a[a.length-1]){var g=a.pop(),c=g?g.ractive:null;if(c){var d;c.component&&(d=c.component.name)&&(b="<"+d+"> "+b);var e;(e=g.node||c.fragment&&c.fragment.rendered&&c.find("*"))&&a.push(e)}}console.warn.apply(console,["%cRactive.js: %c"+b,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(a))};Fc=function(){console.log.apply(console,
arguments)}}else Zb=Fc=Lb=S;var Bb=function(b,a){return'Missing "'+b+'" '+a+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+a+"s"},$b={number:function(b,g){if(!a(b)||!a(g))return null;b=+b;var h=+g-b;return h?function(a){return b+a*h}:function(){return b}},array:function(b,a){var g,c;if(!Array.isArray(b)||!Array.isArray(a))return null;var d=[],e=[];for(c=g=Math.min(b.length,a.length);c--;)e[c]=x(b[c],a[c]);for(c=g;c<b.length;c+=1)d[c]=b[c];for(c=g;c<a.length;c+=
1)d[c]=a[c];return function(b){for(var a=g;a--;)d[a]=e[a](b);return d}},object:function(b,a){if(!d(b)||!d(a))return null;var g=[],c={},e={},f;for(f in b)b.hasOwnProperty(f)&&(a.hasOwnProperty(f)?(g.push(f),e[f]=x(b[f],a[f])||w(a[f])):c[f]=b[f]);for(var k in a)a.hasOwnProperty(k)&&!b.hasOwnProperty(k)&&(c[k]=a[k]);var l=g.length;return function(b){for(var a=l;a--;){var h=g[a];c[h]=e[h](b)}return c}}},Ma=function(b,a){this.callback=b;this.parent=a;this.intros=[];this.outros=[];this.children=[];this.totalChildren=
this.outroChildren=0;this.detachQueue=[];this.outrosComplete=!1;a&&a.addChild(this)};Ma.prototype.add=function(b){var a=b.isIntro?this.intros:this.outros;b.starting=!0;a.push(b)};Ma.prototype.addChild=function(b){this.children.push(b);this.totalChildren+=1;this.outroChildren+=1};Ma.prototype.decrementOutros=function(){--this.outroChildren;Xb(this)};Ma.prototype.decrementTotal=function(){--this.totalChildren;Xb(this)};Ma.prototype.detachNodes=function(){this.detachQueue.forEach(Mg);this.children.forEach(Ua);
this.detachQueue=[]};Ma.prototype.ready=function(){if(this.detachQueue.length){var b=this.detachQueue,a=wb(this),h=b.length,c,d,e;a:for(;h--;){d=b[h].node;for(c=a.length;c--;)if(e=a[c].element.node,e===d||e.contains(d)||d.contains(e))continue a;b[h].detach();b.splice(h,1)}}};Ma.prototype.remove=function(b){L(b.isIntro?this.intros:this.outros,b);Xb(this)};Ma.prototype.start=function(){this.children.forEach(function(b){return b.start()});this.intros.concat(this.outros).forEach(function(b){return b.start()});
this.ready=!0;Xb(this)};var P,I={start:function(b){var a,h=new Promise(function(b){return a=b});P={previousBatch:P,transitionManager:new Ma(a,P&&P.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],instance:b,promise:h};return h},end:function(){Td();P.previousBatch||P.transitionManager.start();P=P.previousBatch},addFragment:function(b){J(P.fragments,b)},addFragmentToRoot:function(b){if(P){for(var a=P;a.previousBatch;)a=a.previousBatch;J(a.fragments,b)}},addObserver:function(b,
a){P?J(a?P.deferredObservers:P.immediateObservers,b):b.dispatch()},registerTransition:function(b){b._manager=P.transitionManager;P.transitionManager.add(b)},detachWhenReady:function(b){P.transitionManager.detachQueue.push(b)},scheduleTask:function(b,a){var g;if(P){for(g=P;a&&g.previousBatch;)g=g.previousBatch;g.tasks.push(b)}else b()},promise:function(){if(!P)return Promise.resolve();for(var b=P;b.previousBatch;)b=b.previousBatch;return b.promise||Promise.resolve()}},Rg=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,
Sg=/([^\\](?:\\\\)*)\./,Qg=/\\|\./g,Tg=/((?:\\)+)\1|\\(\.)/g,Cb=[],Db,ta=function(b,a){this.value=b;this.isReadonly=this.isKey=!0;this.deps=[];this.links=[];this.parent=a};ta.prototype.get=function(b){b&&ia(this);return da(this.value)};ta.prototype.getKeypath=function(){return da(this.value)};ta.prototype.rebind=function(b,a){for(var g=this.deps.length;g--;)this.deps[g].rebind(b,a,!1);for(g=this.links.length;g--;)this.links[g].relinking(b,!1)};ta.prototype.register=function(b){this.deps.push(b)};
ta.prototype.registerLink=function(b){J(this.links,b)};ta.prototype.unregister=function(b){L(this.deps,b)};ta.prototype.unregisterLink=function(b){L(this.links,b)};ta.prototype.reference=S;ta.prototype.unreference=S;var ka=function(b,a){this.parent=b;this.value=(this.ractive=a)?b.getKeypath(a):b.getKeypath();this.deps=[];this.children={};this.isReadonly=this.isKeypath=!0};ka.prototype.get=function(b){b&&ia(this);return this.value};ka.prototype.getChild=function(b){if(!(b._guid in this.children)){var a=
new ka(this.parent,b);this.children[b._guid]=a;a.owner=this}return this.children[b._guid]};ka.prototype.getKeypath=function(){return this.value};ka.prototype.handleChange=function(){for(var b=Object.keys(this.children),a=b.length;a--;)this.children[b[a]].handleChange();this.deps.forEach(W)};ka.prototype.rebindChildren=function(b){for(var a=Object.keys(this.children),h=a.length;h--;){var c=this.children[a[h]];c.value=b.getKeypath(c.ractive);c.handleChange()}};ka.prototype.rebind=function(b,a){for(var g=
b?b.getKeypathModel(this.ractive):void 0,c=Object.keys(this.children),d=c.length;d--;)this.children[c[d]].rebind(b,a,!1);for(d=this.deps.length;d--;)this.deps[d].rebind(g,this,!1)};ka.prototype.register=function(b){this.deps.push(b)};ka.prototype.removeChild=function(b){b.ractive&&delete this.children[b.ractive._guid]};ka.prototype.teardown=function(){this.owner&&this.owner.removeChild(this);for(var b=Object.keys(this.children),a=b.length;a--;)this.children[b[a]].teardown()};ka.prototype.unregister=
function(b){L(this.deps,b);this.deps.length||this.teardown()};ka.prototype.reference=S;ka.prototype.unreference=S;var Ug=Function.prototype.bind,cg=Object.prototype.hasOwnProperty,Gc={early:[],mark:[]},Hc={early:[],mark:[]},U=function(b){this.deps=[];this.children=[];this.childByKey={};this.links=[];this.keyModels={};this.bindings=[];this.patternObservers=[];b&&(this.parent=b,this.root=b.root)};U.prototype.addShuffleTask=function(b,a){void 0===a&&(a="early");Gc[a].push(b)};U.prototype.addShuffleRegister=
function(b,a){void 0===a&&(a="early");Hc[a].push({model:this,item:b})};U.prototype.findMatches=function(b){var a=b.length,h=[this],c,d,e=function(){var a=b[d];"*"===a?(c=[],h.forEach(function(b){c.push.apply(c,b.getValueChildren(b.get()))})):c=h.map(function(b){return b.joinKey(a)});h=c};for(d=0;d<a;d+=1)e();return c};U.prototype.getKeyModel=function(b,a){if(void 0!==b&&!a)return this.parent.getKeyModel(b,!0);b in this.keyModels||(this.keyModels[b]=new ta(V(b),this));return this.keyModels[b]};U.prototype.getKeypath=
function(b){if(b!==this.ractive&&this._link)return this._link.target.getKeypath(b);this.keypath||(this.keypath=this.parent&&this.parent.getKeypath(b)?this.parent.getKeypath(b)+"."+V(this.key):V(this.key));return this.keypath};U.prototype.getValueChildren=function(b){var a=this,h;if(Array.isArray(b))h=[],"length"in this&&this.length!==b.length&&h.push(this.joinKey("length")),b.forEach(function(b,g){h.push(a.joinKey(g))});else if(d(b)||"function"===typeof b)h=Object.keys(b).map(function(b){return a.joinKey(b)});
else if(null!=b)return[];return h};U.prototype.getVirtual=function(b){var a=this.get(b,{virtual:!1});if(d(a)){b=Array.isArray(a)?[]:{};for(var h=Object.keys(a),c=h.length;c--;){var e=this.childByKey[h[c]];b[h[c]]=e?e._link?e._link.getVirtual():e.getVirtual():a[h[c]]}for(c=this.children.length;c--;)a=this.children[c],a.key in b||!a._link||(b[a.key]=a._link.getVirtual());return b}return a};U.prototype.has=function(b){if(this._link)return this._link.has(b);var a=this.get();if(!a)return!1;b=da(b);if(cg.call(a,
b))return!0;for(a=a.constructor;a!==Function&&a!==Array&&a!==Object;){if(cg.call(a.prototype,b))return!0;a=a.constructor}return!1};U.prototype.joinAll=function(b,a){for(var h=this,g=0;g<b.length;g+=1){if(a&&!1===a.lastLink&&g+1===b.length&&h.childByKey[b[g]]&&h.childByKey[b[g]]._link)return h.childByKey[b[g]];h=h.joinKey(b[g],a)}return h};U.prototype.notifyUpstream=function(b){for(var a=this,h=this.parent,c=b||[this.key];h;)h.patternObservers.length&&h.patternObservers.forEach(function(b){return b.notify(c.slice())}),
c.unshift(h.key),h.links.forEach(function(b){return b.notifiedUpstream(c,a.root)}),h.deps.forEach(W),h=h.parent};U.prototype.rebind=function(b,a,h){for(var g=this.deps.length;g--;)this.deps[g].rebind&&this.deps[g].rebind(b,a,h);for(g=this.links.length;g--;){var c=this.links[g];c.owner._link&&c.relinking(b,h)}for(g=this.children.length;g--;)c=this.children[g],c.rebind(b?b.joinKey(c.key):void 0,c,h);this.keypathModel&&this.keypathModel.rebind(b,a,!1);for(g=this.bindings.length;g--;)this.bindings[g].rebind(b,
a,h)};U.prototype.reference=function(){"refs"in this?this.refs++:this.refs=1};U.prototype.register=function(b){this.deps.push(b)};U.prototype.registerLink=function(b){J(this.links,b)};U.prototype.registerPatternObserver=function(b){this.patternObservers.push(b);this.register(b)};U.prototype.registerTwowayBinding=function(b){this.bindings.push(b)};U.prototype.unreference=function(){"refs"in this&&this.refs--};U.prototype.unregister=function(b){L(this.deps,b)};U.prototype.unregisterLink=function(b){L(this.links,
b)};U.prototype.unregisterPatternObserver=function(b){L(this.patternObservers,b);this.unregister(b)};U.prototype.unregisterTwowayBinding=function(b){L(this.bindings,b)};U.prototype.updateFromBindings=function(b){for(var a=this.bindings.length;a--;){var h=this.bindings[a].getValue();h!==this.value&&this.set(h)}this.bindings.length||(a=Wa(this.deps))&&a.value!==this.value&&this.set(a.value);b&&(this.children.forEach(Vd),this.links.forEach(Vd),this._link&&this._link.updateFromBindings(b))};ta.prototype.addShuffleTask=
U.prototype.addShuffleTask;ta.prototype.addShuffleRegister=U.prototype.addShuffleRegister;ka.prototype.addShuffleTask=U.prototype.addShuffleTask;ka.prototype.addShuffleRegister=U.prototype.addShuffleRegister;var Kb={key:"@missing",animate:S,applyValue:S,get:S,getKeypath:function(){return this.key},joinAll:function(){return this},joinKey:function(){return this},mark:S,registerLink:S,shufle:S,set:S,unregisterLink:S};Kb.parent=Kb;var Ij=function(b){function a(a,g,c,d){b.call(this,a);this.owner=g;this.target=
c;this.key=void 0===d?g.key:d;g.isLink&&(this.sourcePath=g.sourcePath+"."+this.key);c.registerLink(this);a&&(this.isReadonly=a.isReadonly);this.isLink=!0}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;a.prototype.animate=function(b,a,g,c){return this.target.animate(b,a,g,c)};a.prototype.applyValue=function(b){this.boundValue&&(this.boundValue=null);this.target.applyValue(b)};a.prototype.attach=function(b){(b=va(b,this.key))?this.relinking(b,!1):this.owner.unlink()};
a.prototype.detach=function(){this.relinking(Kb,!1)};a.prototype.get=function(b,a){void 0===a&&(a={});b&&(ia(this),a.unwrap=!0);var h="shouldBind"in a?a.shouldBind:!0;a.shouldBind=this.mapping&&this.target.parent.isRoot;return Bc(this,this.target.get(!1,a),h)};a.prototype.getKeypath=function(a){return a&&a!==this.root.ractive?this.target.getKeypath(a):b.prototype.getKeypath.call(this,a)};a.prototype.getKeypathModel=function(b){this.keypathModel||(this.keypathModel=new ka(this));return b&&b!==this.root.ractive?
this.keypathModel.getChild(b):this.keypathModel};a.prototype.handleChange=function(){this.deps.forEach(W);this.links.forEach(W);this.notifyUpstream()};a.prototype.isDetached=function(){return this.virtual&&this.target===Kb};a.prototype.joinKey=function(b){if(void 0===b||""===b)return this;if(!this.childByKey.hasOwnProperty(b)){var h=new a(this,this,this.target.joinKey(b),b);this.children.push(h);this.childByKey[b]=h}return this.childByKey[b]};a.prototype.mark=function(b){this.target.mark(b)};a.prototype.marked=
function(){this.boundValue&&(this.boundValue=null);this.links.forEach(eb);this.deps.forEach(W)};a.prototype.markedAll=function(){this.children.forEach(Ec);this.marked()};a.prototype.notifiedUpstream=function(b,a){var h=this;this.links.forEach(function(a){return a.notifiedUpstream(b,h.root)});this.deps.forEach(W);if(b&&this.rootLink&&this.root!==a){var g=b.slice(1);g.unshift(this.key);this.notifyUpstream(g)}};a.prototype.relinked=function(){this.target.registerLink(this);this.children.forEach(function(b){return b.relinked()})};
a.prototype.relinking=function(b,a){var g=this;this.rootLink&&this.sourcePath&&(b=Ya(this.sourcePath,b,this.target));b&&this.target!==b&&(this.target.unregisterLink(this),this.keypathModel&&this.keypathModel.rebindChildren(b),this.target=b,this.children.forEach(function(g){g.relinking(b.joinKey(g.key),a)}),this.rootLink&&this.addShuffleTask(function(){g.relinked();a||(g.markedAll(),g.notifyUpstream())}))};a.prototype.set=function(b){this.boundValue&&(this.boundValue=null);this.target.set(b)};a.prototype.shuffle=
function(b){this.shuffling||(this.target.shuffling?Wd(this,b,!0):this.target.shuffle(b))};a.prototype.source=function(){return this.target.source?this.target.source():this.target};a.prototype.teardown=function(){this._link&&this._link.teardown();this.target.unregisterLink(this);this.children.forEach(Y)};return a}(U);U.prototype.link=function(b,a,h){var g=this._link||new Ij(this.parent,this,b,this.key);g.implicit=h&&h.implicit;g.mapping=h&&h.mapping;g.sourcePath=a;g.rootLink=!0;this._link&&this._link.relinking(b,
!1);this.rebind(g,this,!1);Aa();this._link=g;g.markedAll();this.notifyUpstream();return g};U.prototype.unlink=function(){if(this._link){var b=this._link;this._link=void 0;b.rebind(this,b,!1);Aa();b.teardown();this.notifyUpstream()}};var Eb=[],ae=!1,qc=function(b){this.duration=b.duration;this.step=b.step;this.complete=b.complete;this.easing=b.easing;this.start=performance.now();this.end=this.start+this.duration;this.running=!0;Eb.push(this);ae||requestAnimationFrame(Xd)};qc.prototype.tick=function(b){if(!this.running)return!1;
if(b>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;b=this.easing((b-this.start)/this.duration);this.step&&this.step(b);return!0};qc.prototype.stop=function(){this.abort&&this.abort();this.running=!1};var Ic={},Na=function(b){function g(a,g){b.call(this,a);this.ticker=null;a&&(this.key=da(g),this.isReadonly=a.isReadonly,a.value&&(this.value=a.value[this.key],Array.isArray(this.value)&&(this.length=this.value.length),this.adapt()))}b&&(g.__proto__=b);g.prototype=Object.create(b&&
b.prototype);g.prototype.constructor=g;g.prototype.adapt=function(){var b=this.root.adaptors,a=b.length;this.rewrap=!1;if(0!==a){var g=this.wrapper?"newWrapperValue"in this?this.newWrapperValue:this.wrapperValue:this.value,c=this.root.ractive,d=this.getKeypath();if(this.wrapper)if(this.wrapperValue===g?0:!this.wrapper.reset||!1===this.wrapper.reset(g)){if(this.wrapper.teardown(),this.wrapper=null,void 0!==this.value){var e=this.parent.value||this.parent.createBranch(this.key);e[this.key]!==g&&(e[this.key]=
g)}}else{delete this.newWrapperValue;this.wrapperValue=g;this.value=this.wrapper.get();return}for(e=0;e<a;e+=1){var f=b[e];if(f.filter(g,d,c)){this.wrapper=f.wrap(c,g,d,Ng(d));this.wrapperValue=g;this.wrapper.__model=this;this.value=this.wrapper.get();break}}}};g.prototype.animate=function(b,a,g,c){var h=this;this.ticker&&this.ticker.stop();var d;b=new Promise(function(b){return d=b});this.ticker=new qc({duration:g.duration,easing:g.easing,step:function(b){var a=c(b);h.applyValue(a);g.step&&g.step(b,
a)},complete:function(){h.applyValue(a);g.complete&&g.complete(a);h.ticker=null;d(a)}});b.stop=this.ticker.stop;return b};g.prototype.applyValue=function(b,a){void 0===a&&(a=!0);if(!f(b,this.value)){this.boundValue&&(this.boundValue=null);if(this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,b),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.wrapper&&(this.newWrapperValue=this.value);else if(this.wrapper)this.newWrapperValue=b;else{var g=
this.parent.value||this.parent.createBranch(this.key),h;g?(h=typeof g,h="object"===h||"function"===h?!0:void 0):h=!1;if(h)g[this.key]=b;else{n("Attempted to set a property of a non-object '"+this.getKeypath()+"'");return}this.value=b}this.adapt();Array.isArray(b)?(this.length=b.length,this.isArray=!0):this.isArray=!1;this.links.forEach(W);this.children.forEach(Pa);this.deps.forEach(W);a&&this.notifyUpstream();this.parent.isArray&&("length"===this.key?this.parent.length=b:this.parent.joinKey("length").mark())}};
g.prototype.createBranch=function(b){b=a(b)?[]:{};this.applyValue(b,!1);return b};g.prototype.get=function(b,a){if(this._link)return this._link.get(b,a);b&&ia(this);return a&&a.virtual?this.getVirtual(!1):Bc(this,(a&&"unwrap"in a?!1!==a.unwrap:b)&&this.wrapper?this.wrapperValue:this.value,!a||!1!==a.shouldBind)};g.prototype.getKeypathModel=function(){this.keypathModel||(this.keypathModel=new ka(this));return this.keypathModel};g.prototype.joinKey=function(b,a){if(this._link)return!a||!1===a.lastLink||
void 0!==b&&""!==b?this._link.joinKey(b):this;if(void 0===b||""===b)return this;if(!this.childByKey.hasOwnProperty(b)){var h=new g(this,b);this.children.push(h);this.childByKey[b]=h}return!this.childByKey[b]._link||a&&!1===a.lastLink?this.childByKey[b]:this.childByKey[b]._link};g.prototype.mark=function(b){if(this._link)return this._link.mark(b);var a=this.value,g=this.retrieve();if(b||!f(g,a)){this.value=g;this.boundValue&&(this.boundValue=null);if(a!==g||this.rewrap)this.wrapper&&(this.newWrapperValue=
g),this.adapt();Array.isArray(g)?(this.length=g.length,this.isArray=!0):this.isArray=!1;this.children.forEach(b?zb:Pa);this.links.forEach(eb);this.deps.forEach(W)}};g.prototype.merge=function(b,a){var g=this.value,h=b;g===h&&(g=Og(this));a&&(g=g.map(a),h=h.map(a));var c=g.length,d={},p=0,g=g.map(function(b){var a,g=p;do{a=h.indexOf(b,g);if(-1===a)return-1;g=a+1}while(!0===d[a]&&g<c);a===p&&(p+=1);d[a]=!0;return a});this.parent.value[this.key]=b;this.shuffle(g,!0)};g.prototype.retrieve=function(){return this.parent.value?
this.parent.value[this.key]:void 0};g.prototype.set=function(b){this.ticker&&this.ticker.stop();this.applyValue(b)};g.prototype.shuffle=function(b,a){Wd(this,b,!1,a)};g.prototype.source=function(){return this};g.prototype.teardown=function(){this._link&&this._link.teardown();this.children.forEach(Y);this.wrapper&&this.wrapper.teardown();this.keypathModel&&this.keypathModel.teardown()};return g}(U),dg=function(b){function a(a,g){b.call(this,null,"@"+g);this.key="@"+g;this.value=a;this.isRoot=!0;this.root=
this;this.adaptors=[]}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;a.prototype.getKeypath=function(){return this.key};return a}(Na),ce=new dg({},"shared"),be=new dg("undefined"!==typeof global?global:window,"global"),de=function(b){this.context=b};de.prototype.get=function(){return this.context};var ee={},Gb=function(b){this.ractive=b};Gb.prototype.findContext=function(){return this.ractive.viewmodel};var Pb=Gb.prototype;Pb.getContext=Yd;Pb.find=Pb.findComponent=
Pb.findAll=Pb.findAllComponents=S;var ac=!1,Wg=/\*/,Xg={virtual:!1},he={},Yg=Zf.linear,Zg={},$g={},ga=function(b){this.event=b;this.method="on"+b};ga.prototype.fire=function(b,a){var g=Yb(b);b[this.method]&&(a?b[this.method](g,a):b[this.method](g));bc(b,this.event,g,a?[a,b]:[b])};var Jj=new ga("attachchild"),Kj=new ga("detach"),Lj=new ga("detachchild"),eg=Array.prototype,qa=function(b){function a(a,g){var h=a.get();if(!Array.isArray(h)){if(void 0===h){var h=[],c=eg[b].apply(h,g),d=I.start(this,!0).then(function(){return c});
a.set(h);I.end();return d}throw Error("shuffle array method "+b+" called on non-array at "+a.getKeypath());}var d=eh(h.length,b,g),p=eg[b].apply(h,g),h=I.start(this,!0).then(function(){return p});h.result=p;d?a.shuffle(d):a.set(p);I.end();return h}return{path:function(b){for(var g=[],h=arguments.length-1;0<h--;)g[h]=arguments[h+1];return a(this.viewmodel.joinAll(R(b)),g)},model:a}},gh=new ga("update"),Ka=2,Ca=13,Mj=qa("push").model,Nj=qa("pop").model,Oj=qa("shift").model,Pj=qa("unshift").model,Qj=
qa("sort").model,Rj=qa("splice").model,Sj=qa("reverse").model,Tj=function(b){function a(a){b.call(this,null,null);this.isRoot=!0;this.root=this;this.value={};this.ractive=a.ractive;this.adaptors=[];this.context=a.context}b&&(a.__proto__=b);a.prototype=Object.create(b&&b.prototype);a.prototype.constructor=a;a.prototype.getKeypath=function(){return"@context.data"};return a}(Na),O=function(b,a){this.fragment=b;this.node=(this.element=a||ea(b))&&this.element.node;this.ractive=b.ractive;this.root=this},
xd={decorators:{},_data:{}};xd.decorators.get=function(){var b={};if(!this.element)return b;this.element.decorators.forEach(function(a){return b[a.name]=a.intermediary});return b};xd._data.get=function(){return this.model||(this.root.model=new Tj({ractive:this.ractive,context:this.root}))};O.prototype.add=function(b,g,h){h="object"===typeof g?g:h;return Ha(this.ractive,Lc(this,b,"number"===typeof g?+g:1).map(function(b){var g=b[0];b=b[1];var h=g.get();if(!a(b)||!a(h))throw Error("Cannot add non-numeric value");
return[g,h+b]}),h)};O.prototype.animate=function(b,a,h){b=fa(this,b).model;return ke(this.ractive,b,a,h)};O.prototype.get=function(b){return b?(b=fa(this,b).model)?b.get(!0):void 0:this.fragment.findContext().get(!0)};O.prototype.link=function(b,a){var g=fa(this,b).model,c=fa(this,a).model,d=I.start(this.ractive,!0);c.link(g,b);I.end();return d};O.prototype.listen=function(b,a){var g=this.element;g.on(b,a);return{cancel:function(){g.off(b,a)}}};O.prototype.observe=function(b,a,h){void 0===h&&(h={});
d(b)&&(h=a||{});h.fragment=this.fragment;return this.ractive.observe(b,a,h)};O.prototype.observeOnce=function(b,a,h){void 0===h&&(h={});d(b)&&(h=a||{});h.fragment=this.fragment;return this.ractive.observeOnce(b,a,h)};O.prototype.pop=function(b){return Nj(fa(this,b).model,[])};O.prototype.push=function(b){for(var a=[],h=arguments.length-1;0<h--;)a[h]=arguments[h+1];return Mj(fa(this,b).model,a)};O.prototype.raise=function(b,a){for(var g=[],c=arguments.length-2;0<c--;)g[c]=arguments[c+2];for(var d=
this.element,e,f,k;d;){f=(e=d.events)&&e.length;for(k=0;k<f;k++)if(c=e[k],~c.template.n.indexOf(b))return d=a&&"original"in a?c.element.getContext(a||{}):c.element.getContext(a||{},{original:{}}),c.fire(d,g);d=d.parent}};O.prototype.readLink=function(b,a){return this.ractive.readLink(this.resolve(b),a)};O.prototype.resolve=function(b,a){var g=fa(this,b),c=g.model,g=g.instance;return c?c.getKeypath(a||g):b};O.prototype.reverse=function(b){return Sj(fa(this,b).model,[])};O.prototype.set=function(b,
a,h){return Ha(this.ractive,Lc(this,b,a),h)};O.prototype.shift=function(b){return Oj(fa(this,b).model,[])};O.prototype.splice=function(b,a,h){for(var g=[],c=arguments.length-3;0<c--;)g[c]=arguments[c+3];g.unshift(a,h);return Rj(fa(this,b).model,g)};O.prototype.sort=function(b){return Qj(fa(this,b).model,[])};O.prototype.subtract=function(b,g,h){h="object"===typeof g?g:h;return Ha(this.ractive,Lc(this,b,"number"===typeof g?g:1).map(function(b){var g=b[0];b=b[1];var h=g.get();if(!a(b)||!a(h))throw Error("Cannot add non-numeric value");
return[g,h-b]}),h)};O.prototype.toggle=function(b,a){var g=fa(this,b).model;return Ha(this.ractive,[[g,!g.get()]],a)};O.prototype.unlink=function(b){b=fa(this,b).model;var a=I.start(this.ractive,!0);b.owner&&b.owner._link&&b.owner.unlink();I.end();return a};O.prototype.unlisten=function(b,a){this.element.off(b,a)};O.prototype.unshift=function(b){for(var a=[],h=arguments.length-1;0<h--;)a[h]=arguments[h+1];return Pj(fa(this,b).model,a)};O.prototype.update=function(b,a){return me(this.ractive,fa(this,
b).model,a)};O.prototype.updateModel=function(b,a){var g=fa(this,b).model,c=I.start(this.ractive,!0);g.updateFromBindings(a);I.end();return c};O.prototype.isBound=function(){return!!this.getBindingModel(this).model};O.prototype.getBindingPath=function(b){var a=this.getBindingModel(this),h=a.model,a=a.instance;if(h)return h.getKeypath(b||a)};O.prototype.getBinding=function(){var b=this.getBindingModel(this).model;if(b)return b.get(!0)};O.prototype.getBindingModel=function(b){b=b.element;return{model:b.binding&&
b.binding.model,instance:b.parentFragment.ractive}};O.prototype.setBinding=function(b){var a=this.getBindingModel(this).model;return Ha(this.ractive,[[a,b]])};Object.defineProperties(O.prototype,xd);O.forRactive=Yb;ee.Context=O;var ne=Q&&Q.querySelector,fg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns"},La,Ea,mb,yd,
Qb,zd,rc,gg,Ad;La=ag?function(b,a,h){return a&&"http://www.w3.org/1999/xhtml"!==a?h?Q.createElementNS(a,b,h):Q.createElementNS(a,b):h?Q.createElement(b,h):Q.createElement(b)}:function(b,a,h){if(a&&"http://www.w3.org/1999/xhtml"!==a)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return h?
Q.createElement(b,h):Q.createElement(b)};if(wd){mb=La("div");yd=["matches","matchesSelector"];Ad=function(b){return function(a,h){return a[b](h)}};for(rc=yd.length;rc--&&!Ea;)if(Qb=yd[rc],mb[Qb])Ea=Ad(Qb);else for(gg=cb.length;gg--;)if(zd=cb[rc]+Qb.substr(0,1).toUpperCase()+Qb.substring(1),mb[zd]){Ea=Ad(zd);break}Ea||(Ea=function(b,a){var g;g=b.parentNode;g||(mb.innerHTML="",g=mb,b=b.cloneNode(),mb.appendChild(b));var c=g.querySelectorAll(a);for(g=c.length;g--;)if(c[g]===b)return!0;return!1})}else Ea=
null;var hh=new ga("insert"),nb=function(b,a,h,c){this.context=c.context||b;this.callback=h;this.ractive=b;this.keypath=c.keypath;this.options=c;a&&this.resolved(a);"function"===typeof c.old?(this.oldContext=Object.create(b),this.old=c.old):this.old=ih;!1!==c.init?(this.dirty=!0,this.dispatch()):this.oldValue=this.old.call(this.oldContext,void 0,this.newValue);this.dirty=!1};nb.prototype.cancel=function(){this.cancelled=!0;this.model?this.model.unregister(this):this.resolver.unbind();L(this.ractive._observers,
this)};nb.prototype.dispatch=function(){this.cancelled||(this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.old.call(this.oldContext,this.oldValue,this.model?this.model.get():this.newValue),this.dirty=!1)};nb.prototype.handleChange=function(){var b=this;if(!this.dirty){var a=this.model.get();f(a,this.oldValue)||(this.newValue=a,this.options.strict&&this.newValue===this.oldValue||(I.addObserver(this,this.options.defer),this.dirty=!0,this.options.once&&I.scheduleTask(function(){return b.cancel()})))}};
nb.prototype.rebind=function(b,a){var g=this;b=Ya(this.keypath,b,a);if(b===this.model)return!1;this.model&&this.model.unregister(this);b&&b.addShuffleTask(function(){return g.resolved(b)})};nb.prototype.resolved=function(b){this.model=b;this.oldValue=void 0;this.newValue=b.get();b.register(this)};var Uj=/\*+/g,ob=function(b,a,h,c,d){var g=this;this.context=d.context||b;this.ractive=b;this.baseModel=a;this.keys=h;this.callback=c;c=h.join("\\.").replace(Uj,"(.+)");b=this.baseKeypath=a.getKeypath(b);
this.pattern=new RegExp("^"+(b?b+"\\.":"")+c+"$");if(this.recursive=1===h.length&&"**"===h[0])this.keys=["*"];this.oldValues={};this.newValues={};this.defer=d.defer;this.once=d.once;this.strict=d.strict;this.dirty=!1;this.changed=[];this.partial=!1;this.links=d.links;a.findMatches(this.keys).forEach(function(b){g.newValues[b.getKeypath(g.ractive)]=b.get()});!1!==d.init?this.dispatch():this.oldValues=this.newValues;a.registerPatternObserver(this)};ob.prototype.cancel=function(){this.baseModel.unregisterPatternObserver(this);
L(this.ractive._observers,this)};ob.prototype.dispatch=function(){var b=this,a=this.newValues;this.newValues={};Object.keys(a).forEach(function(g){var h=a[g],c=b.oldValues[g];b.strict&&h===c||f(h,c)||(h=[h,c,g],g&&(g=b.pattern.exec(g))&&(h=h.concat(g.slice(1))),b.callback.apply(b.context,h))});if(this.partial)for(var h in a)b.oldValues[h]=a[h];else this.oldValues=a;this.dirty=!1};ob.prototype.notify=function(b){this.changed.push(b)};ob.prototype.shuffle=function(b){if(Array.isArray(this.baseModel.value)){for(var a=
this.baseModel.value.length,h=0;h<b.length;h++)-1!==b[h]&&b[h]!==h&&this.changed.push([h]);for(b=b.touchedFrom;b<a;b++)this.changed.push([b])}};ob.prototype.handleChange=function(){var b=this;if(!this.dirty||this.changed.length){this.dirty||(this.newValues={});if(this.changed.length){var a=0;if(this.recursive)this.changed.forEach(function(g){g=b.baseModel.joinAll(g);if(!g.isLink||b.links)a++,b.newValues[g.getKeypath(b.ractive)]=g.get()});else{var h=this.baseModel.isRoot?this.changed.map(function(b){return b.map(V).join(".")}):
this.changed.map(function(a){return b.baseKeypath+"."+a.map(V).join(".")});this.baseModel.findMatches(this.keys).forEach(function(g){var c=g.getKeypath(b.ractive);h.filter(function(b){return 0===b.indexOf(c)&&(b.length===c.length||"."===b[c.length])||0===c.indexOf(b)&&(b.length===c.length||"."===c[b.length])}).length&&(a++,b.newValues[c]=g.get())})}if(!a)return;this.partial=!0}else this.baseModel.findMatches(this.keys).forEach(function(a){var g=a.getKeypath(b.ractive);b.newValues[g]=a.get()}),this.partial=
!1;I.addObserver(this,this.defer);this.dirty=!0;this.changed.length=0;this.once&&this.cancel()}};var pb=function(b,a,h,c){this.ractive=b;this.model=a;this.keypath=a.getKeypath();this.callback=h;this.options=c;this.pending=null;a.register(this);!1!==c.init?(this.sliced=[],this.shuffle([]),this.dispatch()):this.sliced=this.slice()};pb.prototype.cancel=function(){this.model.unregister(this);L(this.ractive._observers,this)};pb.prototype.dispatch=function(){this.callback(this.pending);this.pending=null;
this.options.once&&this.cancel()};pb.prototype.handleChange=function(){this.pending?I.addObserver(this,this.options.defer):(this.shuffle(this.sliced.map(jh)),this.handleChange())};pb.prototype.shuffle=function(b){var a=this,h=this.slice(),c=[],d=[],e,f={};b.forEach(function(b,g){f[b]=!0;b!==g&&void 0===e&&(e=g);-1===b&&d.push(a.sliced[g])});void 0===e&&(e=b.length);b=h.length;for(var k=0;k<b;k+=1)f[k]||c.push(h[k]);this.pending={inserted:c,deleted:d,start:e};this.sliced=h};pb.prototype.slice=function(){var b=
this.model.get();return Array.isArray(b)?b.slice():[]};var hg={init:!1,once:!0},ig=function(b){return b.trim()},jg=function(b){return""!==b},Vj=qa("pop").path,Wj=qa("push").path,Nc=[],td=!1,Sa=null,Pf=null;!Q||Sa&&Sa.parentNode||(Sa=Q.createElement("style"),Sa.type="text/css",Q.getElementsByTagName("head")[0].appendChild(Sa),Pf=!!Sa.styleSheet);var ef={extend:function(b,a,h){a.adapt=ca(a.adapt,N(h.adapt))},init:function(){}},Xj=/\/\*(?:[\s\S]*?)\*\//g,Yj=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\2).)*\2/gi,
Zj=/\0(\d+)/g,se=function(b,a,h){void 0===h&&(h=[]);var g=[];b=b.replace(Yj,function(b){return"\x00"+(g.push(b)-1)}).replace(Xj,"");h.forEach(function(a){b=b.replace(a,function(b){return"\x00"+(g.push(b)-1)})});return a(b,function(b){return b.replace(Zj,function(b,a){return g[a]})})},oh=/(?:^|\}|\{)\s*([^\{\}\0]+)\s*(?=\{)/g,rh=/@keyframes\s+[^\{\}]+\s*\{(?:[^{}]+|\{[^{}]+})*}/gi,qh=/((?:(?:\[[^\]]+\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,ph=/^(?:@|\d+%)/,
re=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,ak=/\{/,ff={name:"css",extend:function(b,a,h){if(h.css){var g="string"!==typeof h.css||ak.test(h.css)?h.css:fb(h.css)||h.css;b=h.cssId||Qa()+Qa()+"-"+Qa()+"-"+Qa()+"-"+Qa()+"-"+Qa()+Qa()+Qa();"object"===typeof g&&(g="textContent"in g?g.textContent:g.innerHTML);g&&(h=h.noCssTransform?g:nh(g,b),a.cssId=b,Nc.push({id:b,styles:h}),td=!0)}},init:function(b,a,h){h.css&&n("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}},
lc={name:"data",extend:function(b,a,h){var g;if(h.data&&d(h.data))for(g in h.data)(b=h.data[g])&&"object"===typeof b&&(d(b)||Array.isArray(b))&&n("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");a.data=te(a.data,h.data)},init:function(b,
a,h){b=te(b.prototype.data,h.data);"function"===typeof b&&(b=b.call(a));if(b&&b.constructor===Object)for(var g in b)"function"===typeof b[g]&&(h=b[g],b[g]=xb(h,a),b[g]._r_unbound=h);return b||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.root.set(b);return!0}},sh=/\$\{([^\}]+)\}/g,Ib=Object.create(null),bk=/^\s+/,kg=function(a){this.name="ParseError";this.message=a;try{throw Error(a);}catch(g){this.stack=g.stack}};kg.prototype=Error.prototype;var qb=function(a,g){var b,
c=0;this.str=a;this.options=g||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(a){return c=a=c+a.length+1},0);this.init&&this.init(a,g);for(var d=[];this.pos<this.str.length&&(b=this.read());)d.push(b);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(d,g):d};qb.prototype={read:function(a){var b,h;a||(a=this.converters);var c=this.pos,d=a.length;for(b=0;b<d;b+=1)if(this.pos=c,h=a[b](this))return h;return null},getContextMessage:function(a,
g){var b=this.getLinePos(a),c=b[0],d=b[1];if(-1===this.options.contextLines)return[c,d,g+" at line "+c+" character "+d];var b=this.lines[c-1],e="",f="";this.options.contextLines&&(e=0>c-1-this.options.contextLines?0:c-1-this.options.contextLines,e=this.lines.slice(e,c-1-e).join("\n").replace(/\t/g,"  "),f=this.lines.slice(c,c+this.options.contextLines).join("\n").replace(/\t/g,"  "),e&&(e+="\n"),f&&(f="\n"+f));var k=0,b=e+b.replace(/\t/g,function(a,b){b<d&&(k+=1);return"  "})+"\n"+Array(d+k).join(" ")+
"^----"+f;return[c,d,g+" at line "+c+" character "+d+":\n"+b]},getLinePos:function(a){for(var b=0,h=0;a>=this.lineEnds[b];)h=this.lineEnds[b],b+=1;return[b+1,a-h+1,a]},error:function(a){var b=this.getContextMessage(this.pos,a),h=b[0],c=b[1],b=new kg(b[2]);b.line=h;b.character=c;b.shortMessage=a;throw b;},matchString:function(a){if(this.str.substr(this.pos,a.length)===a)return this.pos+=a.length,a},matchPattern:function(a){if(a=a.exec(this.remaining()))return this.pos+=a[0].length,a[1]||a[0]},allowWhitespace:function(){this.matchPattern(bk)},
remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)},warn:function(a){a=this.getContextMessage(this.pos,a)[2];n(a)}};qb.extend=function(a){var b=function(a,b){qb.call(this,a,b)};b.prototype=Object.create(this.prototype);for(var h in a)a.hasOwnProperty(h)&&(b.prototype[h]=a[h]);b.extend=qb.extend;return b};var Ae=/^[^\s=]+/,uh=/^\s+/,vh=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,
xh=/[-/\\^$*+?.()|[\]{}]/g,lg={},gc=function(a,g){return a.search(lg[g.join()]||(lg[g.join()]=new RegExp(g.map(wh).join("|"))))},Bd=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,
Cd=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Ce={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,
AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,
divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,
nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,
uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,
lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Ah=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],yh=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Ce).join("|")+"));?","g"),De="function"===typeof String.fromCodePoint,zh=De?String.fromCodePoint:String.fromCharCode,Ch=/</g,Dh=/>/g,Bh=/&/g,ec=65533,Eh=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
ck=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,mg=/^\\(?:[`'"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,ng=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/,og=function(a){return function(b){for(var g='"',c=!1,d;!c;)(d=b.matchPattern(ck)||b.matchPattern(mg)||b.matchString(a))?g='"'===d?g+'\\"':"\\'"===d?g+"'":g+d:(d=b.matchPattern(ng))?g+="\\u"+("000"+d.charCodeAt(1).toString(16)).slice(-4):c=!0;return JSON.parse(g+'"')}},dk=og('"'),ek=og("'"),Tc=function(a){var b=a.pos,h=a.matchString("'")||
a.matchString('"');if(h){var c=("'"===h?dk:ek)(a);return a.matchString(h)?{t:21,v:c}:(a.pos=b,null)}return null},fk=/^[^`"\\\$]+?(?:(?=[`"\\\$]))/,pg=/[\r\n\t\b\f]/g,Uc=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,He=/^\s*\.{3}/,Jh=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Ih=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*(?:\.(?:[a-zA-Z_$][-\/a-zA-Z_$0-9]*))*/,Fh=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Ke=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,
Lh=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/,Hh=/^(?:\@\.|\@|~\/|(?:\^\^\/(?:\^\^\/)*(?:\.\.\/)*)|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,Kh=/^(key|index|keypath|rootpath|this|global|shared|context|event|node|local)/,gk=function(a){var b;(b=Ee(a))||(b=a.remaining(),"true"===b.substr(0,4)?(a.pos+=4,b={t:24,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,b={t:24,v:"false"}):b=null);if(!(b=b||Tc(a)))if(a.matchString("`")){var h=
"",c=!1,d;for(b=[];!c;)(d=a.matchPattern(fk)||a.matchPattern(mg)||a.matchString("$")||a.matchString('"'))?'"'===d?h+='\\"':"\\`"===d?h+="`":"$"===d?a.matchString("{")?(b.push({t:21,v:JSON.parse('"'+h.replace(pg,Fe)+'"')}),h="",a.allowWhitespace(),(d=ja(a))||a.error("Expected valid expression"),b.push({t:34,x:d}),a.allowWhitespace(),a.matchString("}")||a.error("Expected closing '}' after interpolated expression")):h+="$":h+=d:(d=a.matchPattern(ng))?h+="\\u"+("000"+d.charCodeAt(1).toString(16)).slice(-4):
c=!0;h.length&&b.push({t:21,v:JSON.parse('"'+h.replace(pg,Fe)+'"')});a.matchString("`")||a.error("Expected closing '`'");if(1===b.length)b=b[0];else{for(h=b.pop();c=b.pop();)h={t:36,s:"+",o:[c,h]};b={t:34,x:h}}}else b=null;b||(b=a.pos,a.allowWhitespace(),a.matchString("{")?(h=Ie(a),a.allowWhitespace(),a.matchString("}")?b={t:23,m:h}:(a.pos=b,b=null)):(a.pos=b,b=null));b||(b=a.pos,a.allowWhitespace(),a.matchString("[")?(h=Vc(a,!0),a.matchString("]")?b={t:22,m:h}:(a.pos=b,b=null)):(a.pos=b,b=null));
(b=b||Be(a)||Je(a))||(a.matchString("(")?(a.allowWhitespace(),(b=ja(a))||a.error("Expected a JavaScript expression"),a.allowWhitespace(),a.matchString(")")||a.error("Expected closing paren"),b={t:34,x:b}):b=null);if(!b)return null;for(;b;){a:{h=a;h.strictRefinement||h.allowWhitespace();if(h.matchString(".")){h.allowWhitespace();if(c=h.matchPattern(Uc)){h={t:31,n:c};break a}h.error("Expected a property name")}h.matchString("[")?(h.allowWhitespace(),(c=ja(h))||h.error("Expected a JavaScript expression"),
h.allowWhitespace(),h.matchString("]")||h.error("Expected ']'"),h={t:31,x:c}):h=null}if(h)b={t:32,x:b,r:h};else if(a.matchString("("))a.allowWhitespace(),h=Vc(a,!0),a.allowWhitespace(),a.matchString(")")||a.error("Expected closing paren"),b={t:40,x:b},h&&(b.o=h);else break}return b},qg,hk=function(a,g){return function(b){var c;if(c=g(b))return c;if(!b.matchString(a))return null;b.allowWhitespace();(c=ja(b))||b.error("Expected a JavaScript expression");return{s:a,o:c,t:33}}};(function(){var a,g,c,
d=["!","~","+","-","typeof"];c=gk;a=0;for(g=d.length;a<g;a+=1)c=hk(d[a],c);qg=c})();var ik=qg,rg,jk=function(a,g){return function(b){if(b.inUnquotedAttribute&&(">"===a||"/"===a))return g(b);var c,h,d;h=g(b);if(!h)return null;for(;;){c=b.pos;b.allowWhitespace();if(!b.matchString(a)||"in"===a&&/[a-zA-Z_$0-9]/.test(b.remaining().charAt(0)))return b.pos=c,h;b.allowWhitespace();d=g(b);if(!d)return b.pos=c,h;h={t:36,s:a,o:[h,d]}}}};(function(){var a,g,c,d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");
c=ik;a=0;for(g=d.length;a<g;a+=1)c=jk(d[a],c);rg=c})();var Mh=rg,Ph=/^[^\s"'>\/=]+/,Yh=/^on/,Th=/^on-([a-zA-Z\*\.$_]((?:[a-zA-Z\*\.$_0-9\-]|\\-)+))$/,Wh=/^(?:change|reset|teardown|update|construct|config|init|render|complete|unrender|detach|insert|destruct|attachchild|detachchild)$/,Rh=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,Sh=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,Xh=/^((bind|class)-(([-a-zA-Z0-9_])+))$/,Qh={lazy:{t:73,v:"l"},twoway:{t:73,v:"t"},"no-delegation":{t:74}},Nh=/^[^\s"'=<>\/`]+/,
Uh=/^[^\s"'=<>@\[\]()]*/,Vh=/^\s+/,Qe=/\\/g,Zh={t:10,exclude:!0},ai=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,$h=/^as/i,fi=/^\s*else\s*/,ei=/^\s*elseif\s+/,Ve={each:52,"if":50,"with":54,unless:51},ci=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,di=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,bi=new RegExp("^("+Object.keys(Ve).join("|")+")\\b"),rb=/^[ \t\f\r\n]*\r?\n/,sb=/\r?\n[ \t\f\r\n]*$/,gi=function(a){var b,c,d,e;for(b=1;b<a.length;b+=1)c=a[b],d=a[b-1],e=a[b-2],ib(c)&&(9===d.t||
10===d.t)&&ib(e)&&sb.test(e)&&rb.test(c)&&(a[b-2]=e.replace(sb,"\n"),a[b]=c.replace(rb,"")),(4===c.t||5===c.t)&&c.f&&ib(d)&&sb.test(d)&&ib(c.f[0])&&rb.test(c.f[0])&&(a[b-1]=d.replace(sb,"\n"),c.f[0]=c.f[0].replace(rb,"")),ib(c)&&(4===d.t||5===d.t)&&d.f&&(e=d.f,e=e[e.length-1],ib(e)&&sb.test(e)&&rb.test(c)&&(d.f[d.f.length-1]=e.replace(sb,"\n"),a[b]=c.replace(rb,"")));return a},We=function(a,c,h){var b;c&&(b=a[0],"string"===typeof b&&((b=b.replace(c,""))?a[0]=b:a.shift()));h&&(b=a[a.length-1],"string"===
typeof b&&((b=b.replace(h,""))?a[a.length-1]=b:a.pop()))},ki=/[ \t\f\r\n]+/g,hi=/^(?:pre|script|style|textarea)$/i,Xe=/^[ \t\f\r\n]+/,Ye=/[ \t\f\r\n]+$/,ii=/^(?:\r\n|\r|\n)/,ji=/(?:\r\n|\r|\n)$/,mi=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,kk=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,lk=/^[a-zA-Z_$][-a-zA-Z0-9_$]*/,mk=/^[\s\n\/>]/,nk={exclude:!0},oi={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),
rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]},ok=/^\s*#\s*partial\s+/,ya={},pk=[function(a,c){var b=a.matchString(">")||a.matchString("yield"),g={t:">"===b?8:16},d;if(!b)return null;a.allowWhitespace();if(">"===b||!(d=a.matchString("with"))){a.relaxedNames=a.strictRefinement=!0;var e=ja(a);a.relaxedNames=a.strictRefinement=!1;if(!e&&">"===b)return null;
e&&(Ba(e,g),a.allowWhitespace(),">"!==b&&(d=a.matchString("with")))}a.allowWhitespace();if(d||">"===b)if((d=Se(a))&&d.length)g.z=d;else if(">"===b){if(b=ja(a))g.c={},Ba(b,g.c)}else a.error("Expected one or more aliases");a.allowWhitespace();a.matchString(c.close)||a.error("Expected closing delimiter '"+c.close+"'");return g},Re,Ue,Te,function(a,c){if(!a.matchString("!"))return null;var b=a.remaining().indexOf(c.close);if(-1!==b)return a.pos+=b+c.close.length,{t:9}}],sg=[function(a,c){var b=ja(a);
if(!b)return null;a.matchString(c.close)||a.error("Expected closing delimiter '"+c.close+"'");var g={t:3};Ba(b,g);return g}],qk=[Re,Ue,Te],ic=[hb,function(a){var b=a.pos;if(a.textOnlyMode||!a.matchString("\x3c!--"))return null;var c=a.remaining(),d=c.indexOf("--\x3e");-1===d&&a.error("Illegal HTML - expected closing comment sequence ('--\x3e')");c=c.substr(0,d);a.pos+=d+3;d={t:9,c:c};a.includeLinePositions&&(d.p=a.getLinePos(b));return d},function(a){var b,c,d,e,f,k,l,m,n;n=a.pos;if(a.inside||a.inAttribute||
a.textOnlyMode||!a.matchString("<")||"/"===a.nextChar())return null;var q={};a.includeLinePositions&&(q.p=a.getLinePos(n));if(a.matchString("!"))return q.t=18,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),q.a=a.matchPattern(/^(.+?)>/),q;if(n=a.matchString("#"))a.allowWhitespace(),q.t=11,q.n=a.matchPattern(lk);else if(q.t=7,q.e=a.matchPattern(kk),!q.e)return null;mk.test(a.nextChar())||a.error("Illegal tag name");a.allowWhitespace();for(a.inTag=!0;b=hb(a);)!1!==b&&(q.m||(q.m=
[]),q.m.push(b)),a.allowWhitespace();a.inTag=!1;a.allowWhitespace();a.matchString("/")&&(c=!0);if(!a.matchString(">"))return null;b=(q.e||q.n).toLowerCase();var r=a.preserveWhitespace;if(!c&&(n||!Cd.test(q.e))){n||(a.elementStack.push(b),b in a.interpolate&&(a.inside=b));c=[];d=Object.create(null);do l=a.pos,(f=a.remaining())||a.error("Missing end "+(1<a.elementStack.length?"tags":"tag")+" ("+a.elementStack.reverse().map(function(a){return"</"+a+">"}).join("")+")"),n||ni(b,f)?!n&&(m=li(a))?(k=!0,
f=m.e.toLowerCase(),f!==b&&(a.pos=l,~a.elementStack.indexOf(f)||(l="Unexpected closing tag",Cd.test(f)&&(l+=" (<"+f+"> is a void element - it cannot contain children)"),a.error(l)))):n&&pi(a,q.n)?k=!0:(f=Yc(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(k=!0,a.pos=l):(f=a.read(tg))?(d[f.n]&&(a.pos=l,a.error("Duplicate partial definition")),jb(f.f,a.stripComments,r,!r,!r),d[f.n]=f.f,e=!0):(f=a.read(ic))?c.push(f):k=!0:k=!0;while(!k);c.length&&(q.f=c);e&&(q.p=d);a.elementStack.pop()}a.inside=
null;return a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(b)?nk:q},function(a){var b,c,d=a.remaining();a.textOnlyMode?(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),b=gc(d,b)):(c=a.inside?"</"+a.inside:"<",a.inside&&!a.interpolate[a.inside]?b=d.indexOf(c):(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),!0===a.inAttribute?b.push('"',"'","=","<",">","`"):a.inAttribute?b.push(a.inAttribute):b.push(c),
b=gc(d,b)));if(!b)return null;-1===b&&(b=d.length);a.pos+=b;return a.inside&&"textarea"!==a.inside||a.textOnlyMode?d.substr(0,b):Rc(d.substr(0,b))}],tg=[function(a){var b,c,d=a.pos;b=a.standardDelimiters;if(!a.matchString(b[0]))return null;if(!a.matchPattern(ok))return a.pos=d,null;(d=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/))||a.error("expected legal partial name");a.allowWhitespace();a.matchString(b[1])||a.error("Expected closing delimiter '"+b[1]+"'");var e=[],f=b[0],k=b[1];do(b=Yc(a,{open:f,
close:k}))?("partial"!==b.r&&a.error("Expected "+f+"/partial"+k),c=!0):((b=a.read(ic))||a.error("Expected "+f+"/partial"+k),e.push(b));while(!c);return{t:17,n:d,f:e}}],rk=["script","style","template"],qi=qb.extend({init:function(a,c){var b=this,g=c.tripleDelimiters||ya.defaults.tripleDelimiters,d=c.staticDelimiters||ya.defaults.staticDelimiters,e=c.staticTripleDelimiters||ya.defaults.staticTripleDelimiters;this.standardDelimiters=c.delimiters||ya.defaults.delimiters;this.tags=[{isStatic:!1,isTriple:!1,
open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:pk},{isStatic:!1,isTriple:!0,open:g[0],close:g[1],readers:sg},{isStatic:!0,isTriple:!1,open:d[0],close:d[1],readers:qk},{isStatic:!0,isTriple:!0,open:e[0],close:e[1],readers:sg}];this.contextLines=c.contextLines||ya.defaults.contextLines;this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate=Object.create(c.interpolate||ya.defaults.interpolate||{});this.interpolate.textarea=!0;rk.forEach(function(a){return b.interpolate[a]=
!c.interpolate||!1!==c.interpolate[a]});!0===c.sanitize&&(c.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0});this.stripComments=!1!==c.stripComments;this.preserveWhitespace=c.preserveWhitespace;this.sanitizeElements=c.sanitize&&c.sanitize.elements;this.sanitizeEventAttributes=c.sanitize&&c.sanitize.eventAttributes;this.includeLinePositions=c.includeLinePositions;this.textOnlyMode=
c.textOnlyMode;this.csp=c.csp;this.transforms=(this.transforms=c.transforms||c.parserTransforms)?this.transforms.concat(ya.defaults.parserTransforms):ya.defaults.parserTransforms},postProcess:function(a){if(!a.length)return{t:[],v:4};0<this.sectionDepth&&this.error("A section was left open");jb(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);var b=this.transforms;if(b.length){var c=b.length,d=function(a){for(var g=a.length,h=0;h<g;h++){var e=a[h];
if(7===e.t){for(var p=0;p<c;p++){var f=b[p].call(ya.Ractive,e);if(f)if(f.remove){a.splice(h--,1);g--;break}else if(f.replace){Array.isArray(f.replace)?(a.splice.apply(a,[h--,1].concat(f.replace)),g+=f.replace.length-1):a[h--]=e=f.replace;break}}if(e.p)for(var k in e.p)d(e.p[k])}e.f&&d(e.f)}};d(a[0].t);if(a[0].p)for(var e in a[0].p)d(a[0].p[e])}!1!==this.csp&&(e={},Ze(a[0].t,e),Object.keys(e).length&&(a[0].e=e));return a[0]},converters:[function(a){for(var b=[],c=Object.create(null),d=!1,e=a.preserveWhitespace;a.pos<
a.str.length;){var f=a.pos,k,l;(l=a.read(tg))?(c[l.n]&&(a.pos=f,a.error("Duplicated partial definition")),jb(l.f,a.stripComments,e,!e,!e),c[l.n]=l.f,d=!0):(k=a.read(ic))?b.push(k):a.error("Unexpected template content")}a={v:4,t:b};d&&(a.p=c);return a}],sortMustacheTags:function(){this.tags.sort(function(a,c){return c.open.length-a.open.length})}}),sk="delimiters tripleDelimiters staticDelimiters staticTripleDelimiters csp interpolate preserveWhitespace sanitize stripComments contextLines".split(" "),
ye="Either preparse or use a ractive runtime source that includes the parser. ",ri="Either include a version of Ractive that can parse or convert your computation strings to functions.",sa={fromId:function(a,c){if(!Q){if(c&&c.noThrow)return;throw Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.");}a&&(a=a.replace(/^#/,""));var b;if(!(b=Q.getElementById(a))){if(c&&c.noThrow)return;throw Error("Could not find template element with id #"+a);}if("SCRIPT"!==b.tagName.toUpperCase()){if(c&&
c.noThrow)return;throw Error("Template element with id #"+a+", must be a <script> element");}return"textContent"in b?b.textContent:b.innerHTML},isParsed:function(a){return"string"!==typeof a},getParseOptions:function(a){a.defaults&&(a=a.defaults);return sk.reduce(function(b,c){b[c]=a[c];return b},{})},parse:function(a,c){Qc(Zc,"template",ye);var b=Zc(a,c);ze(b);return b},parseFor:function(a,c){return this.parse(a,this.getParseOptions(c))}},ad={name:"template",extend:function(a,c,h){"template"in h&&
(a=h.template,c.template="function"===typeof a?a:$c(a,c))},init:function(a,c,h){a=(a="template"in h?h.template:a.prototype.template)||{v:4,t:[]};"function"===typeof a&&(h=a,a=af(c,h),c._config.template={fn:h,result:a});a=$c(a,c);c.template=a.t;a.p&&bf(c.partials,a.p)},reset:function(a){var b;if((b=a._config.template)&&b.fn){var c=af(a,b.fn);b=c!==b.result?b.result=c:void 0}else b=void 0;if(b)return b=$c(b,a),a.template=b.t,bf(a.partials,b.p,!0),!0}},tk=["computed"],Rb=function(a,c){this.name=a;this.useDefaults=
c};Rb.prototype.extend=function(a,c,h){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?c:c.constructor,h)};Rb.prototype.init=function(){};Rb.prototype.configure=function(a,c,h){var b=this.name;h=h[b];a=Object.create(a[b]);for(var g in h)a[g]=h[g];c[b]=a};Rb.prototype.reset=function(a){var b=a[this.name],c=!1;Object.keys(b).forEach(function(a){var h=b[a];h._fn&&(h._fn.isOwner?b[a]=h._fn:delete b[a],c=!0)});return c};var jc="adaptors components computed decorators easing events interpolators partials transitions".split(" ").map(function(a){var b=
-1<tk.indexOf(a);return new Rb(a,b)}),sc={adapt:ef,css:ff,data:lc,template:ad},Dd=Object.keys(Yf),vi=hf(Dd.filter(function(a){return!sc[a]})),xi=hf(Dd.concat(jc.map(function(a){return a.name}),["on","observe","attributes"])),uk=[].concat(Dd.filter(function(a){return!jc[a]&&!sc[a]}),jc,sc.template,sc.css),sd={extend:function(a,c,h){return df("extend",a,c,h)},init:function(a,c,h){return df("init",a,c,h)},reset:function(a){return uk.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})}},
gf=/\b_super\b/,ha=function(a){this.parentFragment=a.parentFragment;this.ractive=a.parentFragment.ractive;this.template=a.template;this.index=a.index;this.type=a.template.t;this.dirty=!1};ha.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};ha.prototype.destroyed=function(){this.fragment&&this.fragment.destroyed()};ha.prototype.find=function(){return null};ha.prototype.findComponent=function(){return null};ha.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)};
ha.prototype.shuffled=function(){this.fragment&&this.fragment.shuffled()};ha.prototype.valueOf=function(){return this.toString()};ha.prototype.findAll=S;ha.prototype.findAllComponents=S;var Ed=function(a){function b(b){a.call(this,b)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.detach=function(){return this.fragment?this.fragment.detach():xa()};b.prototype.find=function(a){if(this.fragment)return this.fragment.find(a)};b.prototype.findAll=function(a,
b){this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function(a){return this.fragment&&this.fragment.firstNode(a)};b.prototype.toString=function(a){return this.fragment?this.fragment.toString(a):""};return b}(ha),vk=function(a){function b(b,c){a.call(this,b,c);this.isReadonly=!this.root.ractive.syncComputedChildren;
this.dirty=!0}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={setRoot:{}};c.setRoot.get=function(){return this.parent.setRoot};b.prototype.applyValue=function(b){a.prototype.applyValue.call(this,b);if(!this.isReadonly){for(b=this.parent;b&&b.shuffle;)b=b.parent;b&&b.dependencies.forEach(Pa)}this.setRoot&&this.setRoot.set(this.setRoot.value)};b.prototype.get=function(a){a&&ia(this);this.dirty&&(this.dirty=!1,this.value=(a=this.parent.get())?a[this.key]:
void 0);return this.value};b.prototype.handleChange=function(){this.dirty=!0;this.boundValue&&(this.boundValue=null);this.links.forEach(eb);this.deps.forEach(W);this.children.forEach(W)};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var c=new b(this,a);this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]};Object.defineProperties(b.prototype,c);return b}(Na),Fd=function(a){function b(b,c,h){a.call(this,null,null);this.root=
this.parent=b;this.signature=c;this.isExpression=(this.key=h)&&"@"===h[0];this.isReadonly=!this.signature.setter;this.context=b.computationContext;this.dependencies=[];this.children=[];this.childByKey={};this.deps=[];this.dirty=!0;this.shuffle=void 0}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;var c={setRoot:{}};c.setRoot.get=function(){if(this.signature.setter)return this};b.prototype.get=function(a){a&&ia(this);if(this.dirty){this.dirty=!1;var b=this.value;
this.value=this.getValue();f(b,this.value)||this.notifyUpstream();this.wrapper&&(this.newWrapperValue=this.value);this.adapt()}return Bc(this,a&&this.wrapper?this.wrapperValue:this.value)};b.prototype.getValue=function(){Cb.push(Db=[]);var a;try{a=this.signature.getter.call(this.context)}catch($a){if(n("Failed to compute "+this.getKeypath()+": "+($a.message||$a)),$f){console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");
var b=this.signature;console.error($a.name+": "+$a.message+"\n\n"+b.getterString+(b.getterUseStack?"\n\n"+$a.stack:""));console.groupCollapsed&&console.groupEnd()}}b=Ga();this.setDependencies(b);return a};b.prototype.mark=function(){this.handleChange()};b.prototype.rebind=function(a,b){a!==b&&this.handleChange()};b.prototype.set=function(a){if(this.isReadonly)throw Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(a);this.mark()};b.prototype.setDependencies=function(a){for(var b=
this.dependencies.length;b--;){var c=this.dependencies[b];~a.indexOf(c)||c.unregister(this)}for(b=a.length;b--;)c=a[b],~this.dependencies.indexOf(c)||c.register(this);this.dependencies=a};b.prototype.teardown=function(){for(var b=this.dependencies.length;b--;)this.dependencies[b]&&this.dependencies[b].unregister(this);this.root.computations[this.key]===this&&delete this.root.computations[this.key];a.prototype.teardown.call(this)};Object.defineProperties(b.prototype,c);return b}(Na),ug=Fd.prototype,
vg=vk.prototype;ug.handleChange=vg.handleChange;ug.joinKey=vg.joinKey;var cd=function(a){function b(b,c){var h=this;a.call(this,b.ractive.viewmodel,null);this.fragment=b;this.template=c;this.dirty=this.isReadonly=!0;this.fn=xe(c.s,c.r.length);this.models=this.template.r.map(function(a){return va(h.fragment,a)});this.dependencies=[];this.shuffle=void 0;this.bubble()}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(a){void 0===a&&(a=
!0);this.keypath=void 0;a&&this.handleChange()};b.prototype.getKeypath=function(){var a=this;if(!this.template)return"@undefined";this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(b,c){if(c>=a.models.length)return b;var h=a.models[c];return h?h.getKeypath():"@undefined"}));return this.keypath};b.prototype.getValue=function(){var a=this;Cb.push(Db=[]);var b;try{var c=this.models.map(function(a){return a?a.get(!0):void 0});b=this.fn.apply(this.fragment.ractive,c)}catch($d){n("Failed to compute "+
this.getKeypath()+": "+($d.message||$d))}var g=Ga();this.dependencies.filter(function(a){return!~g.indexOf(a)}).forEach(function(b){b.unregister(a);L(a.dependencies,b)});g.filter(function(b){return!~a.dependencies.indexOf(b)}).forEach(function(b){b.register(a);a.dependencies.push(b)});return b};b.prototype.rebind=function(a,b,c){var h=this.models.indexOf(b);~h&&(a=Ya(this.template.r[h],a,b),a!==b&&(b.unregister(this),this.models.splice(h,1,a),a&&a.addShuffleRegister(this,"mark")));this.bubble(!c)};
b.prototype.retrieve=function(){return this.get()};b.prototype.teardown=function(){var b=this;this.unbind();this.fragment=void 0;this.dependencies&&this.dependencies.forEach(function(a){return a.unregister(b)});a.prototype.teardown.call(this)};b.prototype.unreference=function(){a.prototype.unreference.call(this);this.deps.length||this.refs||this.teardown()};b.prototype.unregister=function(b){a.prototype.unregister.call(this,b);this.deps.length||this.refs||this.teardown()};return b}(Na),Sb=cd.prototype,
tc=Fd.prototype;Sb.get=tc.get;Sb.handleChange=tc.handleChange;Sb.joinKey=tc.joinKey;Sb.mark=tc.mark;Sb.unbind=S;var wk=function(a){function b(b,c){a.call(this,b,c);this.dirty=!0}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.applyValue=function(a){if(!f(a,this.value))for(var b=this.parent,c=[this.key];b;){if(b.base){b.model.joinAll(c).applyValue(a);break}c.unshift(b.key);b=b.parent}};b.prototype.get=function(b,c){this.retrieve();return a.prototype.get.call(this,
b,c)};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var c=new b(this,a);this.children.push(c);this.childByKey[a]=c}return this.childByKey[a]};b.prototype.mark=function(){this.dirty=!0;a.prototype.mark.call(this)};b.prototype.retrieve=function(){if(this.dirty){this.dirty=!1;var a=this.parent.get();this.value=a&&a[this.key]}return this.value};return b}(Na),yi=function(a){function b(b,c){var h=this;a.call(this,null,null);this.dirty=!0;this.root=
b.ractive.viewmodel;this.template=c;this.base=kc(b,c);var g=this.intermediary={handleChange:function(){return h.handleChange()},rebind:function(a,b){if(b===h.base)a=Ya(c,a,b),a!==h.base&&(h.base.unregister(g),h.base=a);else{var d=h.members.indexOf(b);~d&&(a=Ya(c.m[d].n,a,b),a!==h.members[d]&&h.members.splice(d,1,a))}a!==b&&b.unregister(g);a&&a.addShuffleTask(function(){return a.register(g)});h.bubble()}};this.members=c.m.map(function(a){if("string"===typeof a)return{get:function(){return a}};var c;
if(30===a.t)return c=va(b,a.n),c.register(g),c;c=new cd(b,a);c.register(g);return c});this.bubble()}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){this.base&&(this.dirty||this.handleChange())};b.prototype.get=function(a){if(this.dirty){this.bubble();var b=this.members.map(function(a){return V(String(a.get()))}),b=this.base.joinAll(b);b!==this.model&&(this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),
this.model=b,this.parent=b.parent,this.model.register(this),this.model.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange());this.value=this.model.get(a);this.dirty=!1;this.mark();return this.value}return this.model?this.model.get(a):void 0};b.prototype.getValue=function(){this.value=this.model?this.model.get():void 0;for(var a=this.bindings.length;a--;){var b=this.bindings[a].getValue();if(b!==this.value)return b}return(a=Wa(this.deps))?a.value:this.value};b.prototype.getKeypath=
function(){return this.model?this.model.getKeypath():"@undefined"};b.prototype.handleChange=function(){this.dirty=!0;this.mark()};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=new wk(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};b.prototype.mark=function(){this.dirty&&this.deps.forEach(W);this.links.forEach(eb);this.children.forEach(Pa)};b.prototype.rebind=function(){this.handleChange()};b.prototype.retrieve=
function(){return this.value};b.prototype.set=function(a){this.model.set(a)};b.prototype.teardown=function(){var a=this;this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this));this.members&&this.members.forEach(function(b){return b&&b.unregister&&b.unregister(a)})};b.prototype.unreference=function(){a.prototype.unreference.call(this);this.deps.length||this.refs||this.teardown()};b.prototype.unregister=function(b){a.prototype.unregister.call(this,b);this.deps.length||this.refs||
this.teardown()};return b}(Na),xk=function(a){function b(b){a.call(this,b);this.fragment=null}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment=new M({owner:this,template:this.template.f});this.fragment.aliases=jf(this.template.z,this.parentFragment);this.fragment.bind()};b.prototype.render=function(a){this.rendered=!0;this.fragment&&this.fragment.render(a)};b.prototype.unbind=function(){for(var a in this.fragment.aliases)this.fragment.aliases[a].unreference();
this.fragment.aliases={};this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment.update())};return b}(Ed),Ai=/\s+/,ed=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},Gi=[void 0,"text","search","url","email","hidden","password","search","reset","submit"],yk={"accept-charset":"acceptCharset",accesskey:"accessKey",
bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},lf=Q?La("div"):null,Da=!1,wg=function(a){function b(b){a.call(this,b);this.attributes=[];this.owner=b.owner;this.fragment=new M({ractive:this.ractive,owner:this,
template:this.template});this.fragment.findNextNode=S;this.dirty=!1}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment.bind()};b.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())};b.prototype.render=function(){if(this.node=this.owner.node)this.isSvg="http://www.w3.org/2000/svg"===this.node.namespaceURI;Da=!0;this.rendered||this.fragment.render();this.dirty=this.rendered=!0;this.update();Da=!1};
b.prototype.toString=function(){return this.fragment.toString()};b.prototype.unbind=function(){this.fragment.unbind()};b.prototype.unrender=function(){this.rendered=!1;this.fragment.unrender()};b.prototype.update=function(){var a=this,b,c;if(this.dirty){this.dirty=!1;var g=Da;Da=!0;this.fragment.update();this.rendered&&this.node&&(b=this.fragment.toString(),c=Si(b,this.isSvg),this.attributes.filter(function(a){a:{for(var b=c.length;b--;)if(c[b].name===a.name){a=!1;break a}a=!0}return a}).forEach(function(b){a.node.removeAttribute(b.name)}),
c.forEach(function(b){a.node.setAttribute(b.name,b.value)}),this.attributes=c);Da=g||!1}};return b}(ha),Ti=/^\s*$/,db=!1,Jf=function(a){function b(b){a.call(this,b);this.name=b.template.n;this.namespace=null;this.owner=b.owner||b.parentFragment.owner||b.element||ea(b.parentFragment);this.element=b.element||(this.owner.attributeByName?this.owner:ea(b.parentFragment));this.parentFragment=b.parentFragment;this.ractive=this.parentFragment.ractive;this.rendered=!1;this.fragment=this.updateDelegate=null;
this.element.attributeByName[this.name]=this;Array.isArray(b.template.f)?this.fragment=new M({owner:this,template:b.template.f}):(this.value=b.template.f,0===this.value?this.value="":void 0===this.value&&(this.value=!0));if(this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Ka&&this.fragment.items[0])this.interpolator.owner=this}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&
this.fragment.bind()};b.prototype.bubble=function(){this.dirty||(this.parentFragment.bubble(),this.element.bubble(),this.dirty=!0)};b.prototype.getString=function(){db=!0;var a=this.fragment?this.fragment.toString():null!=this.value?""+this.value:"";db=!1;return a};b.prototype.getValue=function(){db=!0;var a=this.fragment?this.fragment.valueOf():Bd.test(this.name)?!0:this.value;db=!1;return a};b.prototype.render=function(){var a=this.element.node;this.node=a;if(!a.namespaceURI||a.namespaceURI===fg.html){this.propertyName=
yk[this.name]||this.name;void 0!==a[this.propertyName]&&(this.useProperty=!0);if(Bd.test(this.name)||this.isTwoway)this.isBoolean=!0;"value"===this.propertyName&&(a._ractive.value=this.value)}if(a.namespaceURI){var b=this.name.indexOf(":");if(-1!==b){a:{for(var b=this.name.slice(0,b),c="xmlns:"+b;a;){if(a.hasAttribute&&a.hasAttribute(c)){a=a.getAttribute(c);break a}a=a.parentNode}a=fg[b]}this.namespace=a}else this.namespace=a.namespaceURI}this.rendered=!0;this.updateDelegate=Bi(this);this.updateDelegate()};
b.prototype.toString=function(){if(Da)return"";db=!0;var a=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.style&&!this.inlineClass){if(this.rendered||
this.owner!==this.element||this.name.indexOf("style-")&&this.name.indexOf("class-")){if(Bd.test(this.name))return a?"string"===typeof a?this.name+'="'+Hb(a)+'"':this.name:"";if(null==a)return"";a=Hb(this.getString());db=!1;return a?this.name+'="'+a+'"':this.name}this.name.indexOf("style-")?this.inlineClass=this.name.substr(6):this.style=ed(this.name.substr(6))}}};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(){this.updateDelegate(!0);this.rendered=
!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked&&this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get()))};return b}(ha),zk=function(a){function b(b){a.call(this,b);this.owner=b.owner||b.parentFragment.owner||ea(b.parentFragment);this.element=this.owner.attributeByName?this.owner:ea(b.parentFragment);this.flag="l"===b.template.v?"lazy":"twoway";7===this.element.type&&
(Array.isArray(b.template.f)&&(this.fragment=new M({owner:this,template:b.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Ka&&this.fragment.items[0])}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind();fd(this,this.getValue(),!0)};b.prototype.bubble=function(){this.dirty||(this.element.bubble(),this.dirty=!0)};b.prototype.getValue=function(){return this.fragment?
this.fragment.valueOf():"value"in this?this.value:"f"in this.template?this.template.f:!0};b.prototype.render=function(){fd(this,this.getValue(),!0)};b.prototype.toString=function(){return""};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind();delete this.element[this.flag]};b.prototype.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()};b.prototype.update=function(){this.dirty&&(this.fragment&&this.fragment.update(),fd(this,this.getValue(),!0))};return b}(ha),
Ak=function(a){function b(b){a.call(this,null,"");this.value=b;this.isRoot=!0;this.root=this;this.adaptors=[];this.ractive=b}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.joinKey=function(b){var c=a.prototype.joinKey.call(this,b);return"root"!==b&&"parent"!==b||c.isLink?"data"===b?this.ractive.viewmodel:c:Ui(c,b)};b.prototype.getKeypath=function(){return"@this"};b.prototype.retrieve=function(){return this.ractive};return b}(Na),xg=Object.prototype.hasOwnProperty,
pf=function(a){function b(b){a.call(this,null,null);this.isRoot=!0;this.root=this;this.ractive=b.ractive;this.value=b.data;this.adaptors=b.adapt;this.adapt();this.computationContext=b.ractive;this.computations={}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.attached=function(a){mf(this,a)};b.prototype.compute=function(a,b){var c=new Fd(this,b,a);return this.computations[V(a)]=c};b.prototype.createLink=function(a,b,c,d){a=R(a);for(var h=this;a.length;)var g=
a.shift(),h=h.childByKey[g]||h.joinKey(g);return h.link(b,c,d)};b.prototype.detached=function(){nf(this)};b.prototype.get=function(a,b){a&&ia(this);if(b&&!1===b.virtual)return this.value;for(var c=this.getVirtual(),h=Object.keys(this.computations),d=h.length;d--;)c[h[d]]=this.computations[h[d]].get();return c};b.prototype.getKeypath=function(){return""};b.prototype.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new Ak(this.ractive))};b.prototype.getValueChildren=function(){var b=
a.prototype.getValueChildren.call(this,this.value);this.children.forEach(function(a){if(a._link){var c=b.indexOf(a);~c?b.splice(c,1,a._link):b.push(a._link)}});for(var c in this.computations)b.push(this.computations[c]);return b};b.prototype.has=function(a){var b=this.value,c=da(a);if("@this"===c||"@global"===c||"@shared"===c)return!0;"~"===c[0]&&"/"===c[1]&&(c=c.slice(2));if(""===a||xg.call(b,c)||a in this.computations||this.childByKey[c]&&this.childByKey[c]._link)return!0;for(a=b.constructor;a!==
Function&&a!==Array&&a!==Object;){if(xg.call(a.prototype,c))return!0;a=a.constructor}return!1};b.prototype.joinKey=function(b,c){if("@"===b[0]){if("@this"===b||"@"===b)return this.getRactiveModel();if("@global"===b)return be;if("@shared"===b)return ce}else return"~"===b[0]&&"/"===b[1]&&(b=b.slice(2)),this.computations.hasOwnProperty(b)?this.computations[b]:a.prototype.joinKey.call(this,b,c)};b.prototype.set=function(a){var b=this.wrapper;b?b.reset&&!1!==b.reset(a)||(b.teardown(),this.wrapper=null,
this.value=a,this.adapt()):(this.value=a,this.adapt());this.deps.forEach(W);this.children.forEach(Pa)};b.prototype.retrieve=function(){return this.wrapper?this.wrapper.get():this.value};b.prototype.teardown=function(){a.prototype.teardown.call(this);for(var b in this.computations)this.computations[b].teardown()};return b}(Na);pf.prototype.update=S;var Xi=new ga("construct"),of="adaptors components decorators easing events interpolators partials transitions".split(" "),Vi=0,Zi=new ga("teardown"),$i=
new ga("destruct"),If=function(a){function b(b,c){var d=this;a.call(this,b);this.type=(this.isAnchor=11===this.template.t)?11:15;var h=b.template.p||{};"content"in h||(h.content=b.template.f||[]);this._partials=h;if(this.isAnchor)this.name=b.template.n,this.addChild=aj,this.removeChild=bj;else{var g=Object.create(c.prototype);this.instance=g;this.name=b.template.e;g.el&&n("The <"+this.name+"> component has a default 'el' property; it has been disregarded");for(var e=b.parentFragment,f;e;){if(16===
e.owner.type){f=e.owner.container;break}e=e.parent}g.parent=this.parentFragment.ractive;g.container=f||null;g.root=g.parent.root;g.component=this;gd(this.instance,{partials:h});g._inlinePartials=h}this.attributeByName={};this.attributes=[];var p=[];(this.template.m||[]).forEach(function(a){switch(a.t){case Ca:case 70:d.attributes.push(pc({owner:d,parentFragment:d.parentFragment,template:a}));break;case 72:case 73:case 71:break;default:p.push(a)}});p.length&&this.attributes.push(new wg({owner:this,
parentFragment:this.parentFragment,template:p}));this.eventHandlers=[]}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.isAnchor||(this.attributes.forEach(Oa),rd(this.instance,{partials:this._partials},{cssIds:this.parentFragment.cssIds}),this.eventHandlers.forEach(Oa),this.bound=!0)};b.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};b.prototype.destroyed=function(){!this.isAnchor&&this.instance.fragment&&
this.instance.fragment.destroyed()};b.prototype.detach=function(){return this.isAnchor?this.instance?this.instance.fragment.detach():xa():this.instance.fragment.detach()};b.prototype.find=function(a,b){if(this.instance)return this.instance.fragment.find(a,b)};b.prototype.findAll=function(a,b){this.instance&&this.instance.fragment.findAll(a,b)};b.prototype.findComponent=function(a,b){if(!a||this.name===a)return this.instance;if(this.instance.fragment)return this.instance.fragment.findComponent(a,b)};
b.prototype.findAllComponents=function(a,b){var c=b.result;!this.instance||a&&this.name!==a||c.push(this.instance);this.instance&&this.instance.findAllComponents(a,b)};b.prototype.firstNode=function(a){if(this.instance)return this.instance.fragment.firstNode(a)};b.prototype.getContext=function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];a.unshift(this.instance);return Yb.apply(null,a)};b.prototype.render=function(a,b){this.isAnchor?(this.rendered=!0,this.target=a,kb.length||(kb.push(this.ractive),
b?(this.occupants=b,id(),this.occupants=null):I.scheduleTask(id,!0))):(hd(this.instance,a,null,b),this.attributes.forEach(K),this.eventHandlers.forEach(K),this.rendered=!0)};b.prototype.toString=function(){if(this.instance)return this.instance.toHTML()};b.prototype.unbind=function(){this.isAnchor||(this.bound=!1,this.attributes.forEach(ma),qf(this.instance,function(){return I.promise()}))};b.prototype.unrender=function(a){this.shouldDestroy=a;this.isAnchor?(this.item&&rf(this,this.item),this.target=
null,kb.length||(kb.push(this.ractive),I.scheduleTask(id,!0))):(this.instance.unrender(),this.instance.el=this.instance.target=null,this.attributes.forEach(wa),this.eventHandlers.forEach(wa));this.rendered=!1};b.prototype.update=function(){this.dirty=!1;this.instance&&(this.instance.fragment.update(),this.attributes.forEach(Ia),this.eventHandlers.forEach(Ia))};return b}(ha),kb=[],Bk={update:S,teardown:S},za=function(a){this.owner=a.owner||a.parentFragment.owner||ea(a.parentFragment);this.element=
this.owner.attributeByName?this.owner:ea(a.parentFragment);this.parentFragment=this.owner.parentFragment;this.ractive=this.owner.ractive;this.name=(this.template=a.template).n;this.intermediary=this.node=null;this.element.decorators.push(this)};za.prototype.bind=function(){jd(this,this.template,this.parentFragment,{register:!0})};za.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())};za.prototype.destroyed=function(){this.intermediary&&this.intermediary.teardown();this.shouldDestroy=
!0};za.prototype.handleChange=function(){this.bubble()};za.prototype.rebind=function(a,c,d){var b=this.models.indexOf(c);~b&&(a=Ya(this.template.f.r[b],a,c),a!==c&&(c.unregister(this),this.models.splice(b,1,a),a&&a.addShuffleRegister(this,"mark"),d||this.bubble()))};za.prototype.render=function(){var a=this;I.scheduleTask(function(){var b=v("decorators",a.ractive,a.name);if(b){a.node=a.element.node;var c;a.fn&&(c=a.models.map(function(a){if(a)return a.get()}),c=a.fn.apply(a.ractive,c));a.intermediary=
b.apply(a.ractive,[a.node].concat(c));if(!a.intermediary||!a.intermediary.teardown)throw Error("The '"+a.name+"' decorator must return an object with a teardown method");a.shouldDestroy&&a.destroyed()}else m(Bb(a.name,"decorator")),a.intermediary=Bk},!0);this.rendered=!0};za.prototype.toString=function(){return""};za.prototype.unbind=function(){cj(this,this.template)};za.prototype.unrender=function(a){a&&!this.element.rendered||!this.intermediary||this.intermediary.teardown();this.rendered=!1};za.prototype.update=
function(){var a=this.intermediary;if(this.dirty){if(this.dirty=!1,a)if(a.update){var c=this.models.map(function(a){return a&&a.get()});a.update.apply(this.ractive,this.fn.apply(this.ractive,c))}else this.unrender(),this.render()}else a&&a.invalidate&&I.scheduleTask(function(){return a.invalidate()},!0)};var Gd=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+
">"};return b}(ha),tb=Gd.prototype;tb.bind=tb.render=tb.teardown=tb.unbind=tb.unrender=tb.update=S;var la=function(a,c){void 0===c&&(c="value");this.element=a;this.ractive=a.ractive;this.attribute=a.attributeByName[c];var b=this.attribute.interpolator;b.twowayBinding=this;var d=b.model;if(d.isReadonly&&!d.setRoot)return b=d.getKeypath().replace(/^@/,""),r("Cannot use two-way binding on <"+a.name+"> element: "+b+" is read-only. To suppress this warning use <"+a.name+" twoway='false'...>",{ractive:this.ractive}),
!1;this.attribute.isTwoway=!0;this.model=d;b=d.get();this.wasUndefined=void 0===b;void 0===b&&this.getInitialValue&&(b=this.getInitialValue(),d.set(b));this.lastVal(!0,b);if(d=ea(this.element,!1,"form"))this.resetValue=b,d.formBindings.push(this)};la.prototype.bind=function(){this.model.registerTwowayBinding(this)};la.prototype.handleChange=function(){var a=this,c=this.getValue();this.lastVal()!==c&&(I.start(this.root),this.attribute.locked=!0,this.model.set(c),this.lastVal(!0,c),this.model.get()!==
c?this.attribute.locked=!1:I.scheduleTask(function(){return a.attribute.locked=!1}),I.end())};la.prototype.lastVal=function(a,c){if(a)this.lastValue=c;else return this.lastValue};la.prototype.rebind=function(a,c){var b=this;this.model&&this.model===c&&c.unregisterTwowayBinding(this);a&&(this.model=a,I.scheduleTask(function(){return a.registerTwowayBinding(b)}))};la.prototype.render=function(){this.node=this.element.node;this.node._ractive.binding=this;this.rendered=!0};la.prototype.setFromNode=function(a){this.model.set(a.value)};
la.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)};la.prototype.unrender=S;var vf=function(a){function b(b){a.call(this,b,"checked")}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(){a.prototype.render.call(this);this.element.on("change",T);if(this.node.attachEvent)this.element.on("click",T)};b.prototype.unrender=function(){this.element.off("change",T);this.element.off("click",T)};b.prototype.getInitialValue=
function(){return!!this.element.getAttribute("checked")};b.prototype.getValue=function(){return this.node.checked};b.prototype.setFromNode=function(a){this.model.set(a.checked)};return b}(la),lb=function(a,c,d){var b=this;this.model=c;this.hash=a;this.getValue=function(){b.value=d.call(b);return b.value};this.bindings=[]};lb.prototype.add=function(a){this.bindings.push(a)};lb.prototype.bind=function(){this.value=this.model.get();this.model.registerTwowayBinding(this);this.bound=!0};lb.prototype.remove=
function(a){L(this.bindings,a);this.bindings.length||this.unbind()};lb.prototype.unbind=function(){this.model.unregisterTwowayBinding(this);this.bound=!1;delete this.model[this.hash]};lb.prototype.rebind=la.prototype.rebind;var Ck=[].push,jj=function(a){function b(b){a.call(this,b,"name");this.checkboxName=!0;this.group=sf("checkboxes",this.model,dj);this.group.add(this);this.noInitialValue&&(this.group.noInitialValue=!0);if(this.group.noInitialValue&&this.element.getAttribute("checked")){b=this.model.get();
var c=this.element.getAttribute("value");this.arrayContains(b,c)||Ck.call(b,c)}}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.group.bound||this.group.bind()};b.prototype.getInitialValue=function(){this.noInitialValue=!0;return[]};b.prototype.getValue=function(){return this.group.value};b.prototype.handleChange=function(){this.isChecked=this.element.node.checked;this.group.value=this.model.get();var b=this.element.getAttribute("value");
this.isChecked&&!this.arrayContains(this.group.value,b)?this.group.value.push(b):!this.isChecked&&this.arrayContains(this.group.value,b)&&this.removeFromArray(this.group.value,b);this.lastValue=null;a.prototype.handleChange.call(this)};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node,c=this.model.get(),d=this.element.getAttribute("value");Array.isArray(c)?this.isChecked=this.arrayContains(c,d):this.isChecked=this.element.compare(c,d);b.name="{{"+this.model.getKeypath()+
"}}";b.checked=this.isChecked;this.element.on("change",T);if(this.node.attachEvent)this.element.on("click",T)};b.prototype.setFromNode=function(a){this.group.bindings.forEach(function(a){return a.wasUndefined=!0});a.checked&&(a=this.group.getValue(),a.push(this.element.getAttribute("value")),this.group.model.set(a))};b.prototype.unbind=function(){this.group.remove(this)};b.prototype.unrender=function(){var a=this.element;a.off("change",T);a.off("click",T)};b.prototype.arrayContains=function(a,b){for(var c=
a.length;c--;)if(this.element.compare(b,a[c]))return!0;return!1};b.prototype.removeFromArray=function(a,b){if(a)for(var c=a.length;c--;)this.element.compare(b,a[c])&&a.splice(c,1)};return b}(la),hj=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""};b.prototype.getValue=function(){return this.element.node.innerHTML};
b.prototype.render=function(){a.prototype.render.call(this);var b=this.element;b.on("change",T);b.on("blur",T);if(!this.ractive.lazy&&(b.on("input",T),this.node.attachEvent))b.on("keyup",T)};b.prototype.setFromNode=function(a){this.model.set(a.innerHTML)};b.prototype.unrender=function(){var a=this.element;a.off("blur",T);a.off("change",T);a.off("input",T);a.off("keyup",T)};return b}(la),mc=function(b){function c(){b.apply(this,arguments)}b&&(c.__proto__=b);c.prototype=Object.create(b&&b.prototype);
c.prototype.constructor=c;c.prototype.getInitialValue=function(){return""};c.prototype.getValue=function(){return this.node.value};c.prototype.render=function(){b.prototype.render.call(this);var c=this.ractive.lazy,d=!1,g=this.element;"lazy"in this.element&&(c=this.element.lazy);a(c)&&(d=+c,c=!1);this.handler=d?ej(d):T;d=this.node;g.on("change",T);if("file"!==d.type){if(!c&&(g.on("input",this.handler),d.attachEvent))g.on("keyup",this.handler);g.on("blur",tf)}};c.prototype.unrender=function(){var a=
this.element;this.rendered=!1;a.off("change",T);a.off("input",this.handler);a.off("keyup",this.handler);a.off("blur",tf)};return c}(la),kj=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){};b.prototype.getValue=function(){return this.node.files};b.prototype.render=function(){this.element.lazy=!1;a.prototype.render.call(this)};b.prototype.setFromNode=function(a){this.model.set(a.files)};
return b}(mc),mj=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})};b.prototype.getValue=function(){for(var a=this.element.node.options,b=a.length,c=[],d=0;d<b;d+=1){var g=a[d];g.selected&&c.push(g._ractive?g._ractive.value:g.value)}return c};b.prototype.handleChange=
function(){var b=this.attribute.getValue(),c=this.getValue(),d;if(d=void 0!==b)a:if(Array.isArray(c)&&Array.isArray(b)&&c.length===b.length){for(d=c.length;d--;)if(c[d]!==b[d]){d=!1;break a}d=!0}else d=!1;d||a.prototype.handleChange.call(this);return this};b.prototype.render=function(){a.prototype.render.call(this);this.element.on("change",T);void 0===this.model.get()&&this.handleChange()};b.prototype.setFromNode=function(a){a=ld(a);for(var b=a.length,c=Array(b);b--;){var d=a[b];c[b]=d._ractive?d._ractive.value:
d.value}this.model.set(c)};b.prototype.unrender=function(){this.element.off("change",T)};return b}(la),lj=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){};b.prototype.getValue=function(){var a=parseFloat(this.node.value);return isNaN(a)?void 0:a};b.prototype.setFromNode=function(a){a=parseFloat(a.value);isNaN(a)||this.model.set(a)};return b}(mc),yg={},ij=function(a){function b(b){a.call(this,
b,"checked");b=this.ractive._guid+this.element.getAttribute("name");this.siblings=yg[b]||(yg[b]=[]);this.siblings.push(this)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getValue=function(){return this.node.checked};b.prototype.handleChange=function(){I.start(this.root);this.siblings.forEach(function(a){a.model.set(a.getValue())});I.end()};b.prototype.render=function(){a.prototype.render.call(this);this.element.on("change",T);if(this.node.attachEvent)this.element.on("click",
T)};b.prototype.setFromNode=function(a){this.model.set(a.checked)};b.prototype.unbind=function(){L(this.siblings,this)};b.prototype.unrender=function(){this.element.off("change",T);this.element.off("click",T)};return b}(la),uf=function(a){function b(b){a.call(this,b,"name");this.group=sf("radioname",this.model,fj);this.group.add(this);b.checked&&(this.group.value=this.getValue())}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=
this;this.group.bound||this.group.bind();this.nameAttributeBinding={handleChange:function(){return a.node.name="{{"+a.model.getKeypath()+"}}"},rebind:S};this.model.getKeypathModel().register(this.nameAttributeBinding)};b.prototype.getInitialValue=function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")};b.prototype.getValue=function(){return this.element.getAttribute("value")};b.prototype.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),
a.prototype.handleChange.call(this))};b.prototype.lastVal=function(a,b){if(this.group)if(a)this.group.lastValue=b;else return this.group.lastValue};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node;b.name="{{"+this.model.getKeypath()+"}}";b.checked=this.element.compare(this.model.get(),this.element.getAttribute("value"));this.element.on("change",T);if(b.attachEvent)this.element.on("click",T)};b.prototype.setFromNode=function(a){a.checked&&this.group.model.set(this.element.getAttribute("value"))};
b.prototype.unbind=function(){this.group.remove(this);this.model.getKeypathModel().unregister(this.nameAttributeBinding)};b.prototype.unrender=function(){var a=this.element;a.off("change",T);a.off("click",T)};return b}(la),nj=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.forceUpdate=function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,I.scheduleTask(function(){return a.attribute.locked=
!1}),this.model.set(b))};b.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var a=this.element.options,b=a.length;if(b){for(var c,d,g=b;g--;){var e=a[g];if(e.getAttribute("selected")){e.getAttribute("disabled")||(c=e.getAttribute("value"));d=!0;break}}if(!d)for(;++g<b;)if(!a[g].getAttribute("disabled")){c=a[g].getAttribute("value");break}void 0!==c&&(this.element.attributeByName.value.value=c);return c}}};b.prototype.getValue=function(){var a=this.node.options,
b=a.length,c;for(c=0;c<b;c+=1){var d=a[c];if(a[c].selected&&!a[c].disabled)return d._ractive?d._ractive.value:d.value}};b.prototype.render=function(){a.prototype.render.call(this);this.element.on("change",T)};b.prototype.setFromNode=function(a){a=ld(a)[0];this.model.set(a._ractive?a._ractive.value:a.value)};b.prototype.unrender=function(){this.element.off("change",T)};return b}(la),Dk=/;\s*$/,Nb=function(a){function b(b){a.call(this,b);this.name=b.template.e.toLowerCase();if((this.parent=ea(this.parentFragment,
!1))&&"option"===this.parent.name)throw Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[];this.attributeByName={};for(var c,d,g,h,e,f,k,l=this.template.m,m=l&&l.length||0,n=0;n<m;n++)switch(d=l[n],d.t){case Ca:case 73:case 71:case 70:case 72:g=pc({owner:this,parentFragment:this.parentFragment,template:d});d=d.n;c=c||(c=this.attributes=[]);"value"===d?h=g:"name"===d?f=g:"class"===d?e=g:c.push(g);break;case 74:this.delegate=!1;break;default:(k||
(k=[])).push(d)}f&&c.push(f);h&&c.push(h);e&&c.unshift(e);k&&(c||(this.attributes=[])).push(new wg({owner:this,parentFragment:this.parentFragment,template:k}));b.template.f&&!b.deferContent&&(this.fragment=new M({template:b.template.f,owner:this,cssIds:null}));this.binding=null}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this.attributes;a&&(a.binding=!0,a.forEach(Oa),a.binding=!1);this.fragment&&this.fragment.bind();this.binding?
this.binding.bind():this.recreateTwowayBinding()};b.prototype.createTwowayBinding=function(){if("twoway"in this?this.twoway:this.ractive.twoway){var a=gj(this);if(a&&(a=new a(this),a.model))return a}};b.prototype.destroyed=function(){this.attributes&&this.attributes.forEach(yb);if(!this.parentFragment.delegate&&this.listeners){var a=this.listeners,b;for(b in a)a[b]&&a[b].length&&this.node.removeEventListener(b,Ra)}this.fragment&&this.fragment.destroyed()};b.prototype.detach=function(){this.rendered||
this.destroyed();return gb(this.node)};b.prototype.find=function(a,b){if(this.node&&Ea(this.node,a))return this.node;if(this.fragment)return this.fragment.find(a,b)};b.prototype.findAll=function(a,b){var c=b.result;Ea(this.node,a)&&c.push(this.node);this.fragment&&this.fragment.findAll(a,b)};b.prototype.findNextNode=function(){return null};b.prototype.firstNode=function(){return this.node};b.prototype.getAttribute=function(a){return(a=this.attributeByName[a])?a.getValue():void 0};b.prototype.getContext=
function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];if(this.fragment)return(c=this.fragment).getContext.apply(c,a);this.ctx||(this.ctx=new O(this.parentFragment,this));a.unshift(Object.create(this.ctx));return Object.assign.apply(null,a);var c};b.prototype.off=function(a,b,c){void 0===c&&(c=!1);var d=this.parentFragment.delegate,g=this.listeners&&this.listeners[a];if(g)if(L(g,b),d)c=(d.listeners||(d.listeners=[]),d.listeners[a]||(d.listeners[a]=[])),c.refs&&!--c.refs&&d.off(a,wf,!0);
else if(this.rendered){d=this.node;b=d.addEventListener;var h=d.removeEventListener;g.length?g.length&&!g.refs&&c&&(h.call(d,a,Ra,!0),b.call(d,a,Ra,!1)):h.call(d,a,Ra,c)}};b.prototype.on=function(a,b,c){void 0===c&&(c=!1);var d=this.parentFragment.delegate,g=(this.listeners||(this.listeners={}))[a]||(this.listeners[a]=[]);if(d)c=(d.listeners||(d.listeners=[]),d.listeners[a])||(d.listeners[a]=[]),c.refs||(c.refs=0,d.on(a,wf,!0)),c.refs++;else if(this.rendered){var d=this.node,h=d.addEventListener,
e=d.removeEventListener;g.length?g.length&&!g.refs&&c&&(e.call(d,a,Ra,!1),h.call(d,a,Ra,!0)):h.call(d,a,Ra,c)}J(this.listeners[a],b)};b.prototype.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender());if(this.binding=this.createTwowayBinding())this.binding.bind(),this.rendered&&this.binding.render()};b.prototype.render=function(a,b){this.namespace=qj(this);var c,d=!1;if(b)for(var g;g=b.shift();)if(g.nodeName.toUpperCase()===this.template.e.toUpperCase()&&g.namespaceURI===
this.namespace){this.node=c=g;d=!0;break}else gb(g);c||(c=this.template.e,this.node=c=La("http://www.w3.org/1999/xhtml"===this.namespace?c.toLowerCase():c,this.namespace,this.getAttribute("is")));Object.defineProperty(c,"_ractive",{value:{proxy:this}});this.parentFragment.cssIds&&c.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" "));d&&this.foundNode&&this.foundNode(c);(g=this.intro)&&g.shouldFire("intro")&&(g.isIntro=!0,g.isOutro=!1,I.registerTransition(g));
this.fragment&&(g=d?Z(c.childNodes):void 0,this.fragment.render(c,g),g&&g.forEach(gb));if(d)for(this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(c),g=c.attributes.length;g--;){var h=c.attributes[g].name;h in this.attributeByName||c.removeAttribute(h)}this.attributes&&this.attributes.forEach(K);this.binding&&this.binding.render();if(!this.parentFragment.delegate&&this.listeners){g=this.listeners;for(var e in g)g[e]&&g[e].length&&this.node.addEventListener(e,Ra,!!g[e].refs)}d||a.appendChild(c);
this.rendered=!0};b.prototype.toString=function(){var a=this.template.e,b=this.attributes&&this.attributes.map(pj).join("")||"";"option"===this.name&&this.isSelected()&&(b+=" selected");"input"===this.name&&oj(this)&&(b+=" checked");var c,d;this.attributes&&this.attributes.forEach(function(a){"class"===a.name?d=(d||"")+(d?" ":"")+Hb(a.getString()):"style"===a.name?(c=(c||"")+(c?" ":"")+Hb(a.getString()))&&!Dk.test(c)&&(c+=";"):a.style?c=(c||"")+(c?" ":"")+a.style+": "+Hb(a.getString())+";":a.inlineClass&&
a.getValue()&&(d=(d||"")+(d?" ":"")+a.inlineClass)});void 0!==c&&(b=" style"+(c?'="'+c+'"':"")+b);void 0!==d&&(b=" class"+(d?'="'+d+'"':"")+b);this.parentFragment.cssIds&&(b+=' data-ractive-css="'+this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" ")+'"');b="<"+a+b+">";if(Cd.test(this.name))return b;"textarea"===this.name&&void 0!==this.getAttribute("value")?b+=Sc(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(b+=this.getAttribute("value")||"");this.fragment&&
(b+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e)));return b+("</"+a+">")};b.prototype.unbind=function(){var a=this.attributes;a&&(a.unbinding=!0,a.forEach(ma),a.unbinding=!1);this.binding&&this.binding.unbind();this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){if(this.rendered){this.rendered=!1;var b=this.intro;b&&b.complete&&b.complete();"option"===this.name?this.detach():a&&I.detachWhenReady(this);(a=this.outro)&&a.shouldFire("outro")&&(a.isIntro=!1,
a.isOutro=!0,I.registerTransition(a));this.fragment&&this.fragment.unrender();this.binding&&this.binding.unrender()}};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.attributes&&this.attributes.forEach(Ia),this.fragment&&this.fragment.update())};return b}(Ed),xf=null!==ra?ra.UIEvent:null,Ek=function(a){function b(b){a.call(this,b);this.formBindings=[]}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(b,c){a.prototype.render.call(this,
b,c);this.on("reset",yf)};b.prototype.unrender=function(b){this.off("reset",yf);a.prototype.unrender.call(this,b)};return b}(Nb),Hd=function(a,c){-1!==a.indexOf("*")&&e('Only component proxy-events may contain "*" wildcards, <'+c.name+" on-"+a+'="..."/> is not valid');this.name=a;this.owner=c;this.handler=null};Hd.prototype.listen=function(a){var b=this.owner.node,c=this.name;if("on"+c in b)this.owner.on(c,this.handler=function(d){return a.fire({node:b,original:d,event:d,name:c})})};Hd.prototype.unlisten=
function(){this.handler&&this.owner.off(this.name,this.handler)};var Id=function(a,c,d){this.eventPlugin=a;this.owner=c;this.name=d;this.handler=null};Id.prototype.listen=function(a){var b=this,c=this.owner.node;this.handler=this.eventPlugin(c,function(d){void 0===d&&(d={});d.original?d.event=d.original:d.original=d.event;d.name=b.name;d.node=d.node||c;return a.fire(d)})};Id.prototype.unlisten=function(){this.handler.teardown()};var Jd=function(a,c){this.component=a;this.name=c;this.handler=null};
Jd.prototype.listen=function(a){var b=this.component.instance;this.handler=b.on(this.name,function(){for(var c=[],d=arguments.length;d--;)c[d]=arguments[d];c[0]instanceof O?(d=c.shift(),d.component=b,a.fire(d,c)):a.fire({},c);return!1})};Jd.prototype.unlisten=function(){this.handler.cancel()};var Fk=/^(event|arguments|@node|@event|@context)(\..+)?$/,Gk=/^\$(\d+)(\..+)?$/,Fa=function(a){var b=this;this.owner=a.owner||a.parentFragment.owner||ea(a.parentFragment);this.element=this.owner.attributeByName?
this.owner:ea(a.parentFragment,!0);this.template=a.template;this.parentFragment=a.parentFragment;this.ractive=a.parentFragment.ractive;this.events=[];15===this.element.type||11===this.element.type?this.template.n.forEach(function(a){b.events.push(new Jd(b.element,a))}):this.template.n.forEach(function(a){var c=v("events",b.ractive,a);c?b.events.push(new Id(c,b.element,a)):b.events.push(new Hd(a,b.element))});this.models=null};Fa.prototype.bind=function(){J(this.element.events||(this.element.events=
[]),this);jd(this,this.template);this.fn||(this.action=this.template.f)};Fa.prototype.destroyed=function(){this.events.forEach(function(a){return a.unlisten()})};Fa.prototype.fire=function(a,c){var b=this;void 0===c&&(c=[]);var d=this.element.getContext(a);if(this.fn){var g=[],e=kd(this,this.template,this.parentFragment,{specialRef:function(a){var b=Fk.exec(a);if(b)return{special:b[1],keys:b[2]?R(b[2].substr(1)):[]};if(a=Gk.exec(a))return{special:"arguments",keys:[a[1]-1].concat(a[2]?R(a[2].substr(1)):
[])}}});e&&e.forEach(function(h){if(!h)return g.push(void 0);if(h.special){var e=h.special;"@node"===e?e=b.element.node:"@event"===e?e=a&&a.event:"event"===e?(r("The event reference available to event directives is deprecated and should be replaced with @context and @event"),e=d):e="@context"===e?d:c;for(h=h.keys.slice();e&&h.length;)e=e[h.shift()];return g.push(e)}if(h.wrapper)return g.push(h.wrapperValue);g.push(h.get())});var e=this.ractive,f=e.event;e.event=d;var k=this.fn.apply(e,g),l=k.pop();
!1===l?(k=a?a.original:void 0)?(k.preventDefault&&k.preventDefault(),k.stopPropagation&&k.stopPropagation()):r("handler '"+this.template.n.join(" ")+"' returned false, but there is no event available to cancel"):!k.length&&Array.isArray(l)&&"string"===typeof l[0]&&(l=bc(this.ractive,l.shift(),d,l));e.event=f;return l}return bc(this.ractive,this.action,d,c)};Fa.prototype.handleChange=function(){};Fa.prototype.render=function(){var a=this;I.scheduleTask(function(){return a.events.forEach(function(b){return b.listen(a)},
!0)})};Fa.prototype.toString=function(){return""};Fa.prototype.unbind=function(){L(this.element.events,this)};Fa.prototype.unrender=function(){this.events.forEach(function(a){return a.unlisten()})};Fa.prototype.update=S;var Kd=function(a){function b(b){a.call(this,b);this.parentFragment=b.parentFragment;this.template=b.template;this.index=b.index;b.owner&&(this.parent=b.owner);this.isStatic=!!b.template.s;this.model=null;this.dirty=!1}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.bind=function(){var a=kc(this.containerFragment||this.parentFragment,this.template);if(a){var b=a.get();this.isStatic?this.model={get:function(){return b}}:(a.register(this),this.model=a)}};b.prototype.handleChange=function(){this.bubble()};b.prototype.rebind=function(a,b,c){a=Ya(this.template,a,b,this.parentFragment);if(a===this.model)return!1;this.model&&this.model.unregister(this);a&&a.addShuffleRegister(this,"mark");this.model=a;c||this.handleChange();return!0};b.prototype.unbind=
function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0)};return b}(ha),Ld=function(a){function b(b){a.call(this,b)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);return b.prototype.constructor=b}(Ed),uc=Ld.prototype,vc=Kd.prototype;uc.bind=vc.bind;uc.handleChange=vc.handleChange;uc.rebind=vc.rebind;uc.unbind=vc.unbind;var Hk=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.bubble=function(){this.owner&&this.owner.bubble();a.prototype.bubble.call(this)};b.prototype.detach=function(){return gb(this.node)};b.prototype.firstNode=function(){return this.node};b.prototype.getString=function(){return this.model?Ja(this.model.get()):""};b.prototype.render=function(a,b){if(!Da){var c=this.getString();this.rendered=!0;zf(this,a,b,c)}};b.prototype.toString=function(a){var b=this.getString();return a?Sc(b):b};b.prototype.unrender=function(a){a&&this.detach();this.rendered=
!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.rendered&&(this.node.data=this.getString()))};b.prototype.valueOf=function(){return this.model?this.model.get():void 0};return b}(Kd),zg=function(a){function b(){a.apply(this,arguments)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.node.defaultValue=this.node.value};b.prototype.compare=function(a,b){var c=this.getAttribute("value-comparator");
if(c){if("function"===typeof c)return c(a,b);if(a&&b)return a[c]==b[c]}return a==b};return b}(Nb),Ag={"true":!0,"false":!1,"null":null,undefined:void 0},Ik=new RegExp("^(?:"+Object.keys(Ag).join("|")+")"),Jk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,Kk=/\$\{([^\}]+)\}/g,Lk=/^\$\{([^\}]+)\}/,Mk=/^\s*$/,Nk=qb.extend({init:function(a,c){this.values=c.values;this.allowWhitespace()},postProcess:function(a){return 1===a.length&&Mk.test(this.leftover)?
{value:a[0].v}:null},converters:[function(a){if(!a.values)return null;var b=a.matchPattern(Lk);if(b&&a.values.hasOwnProperty(b))return{v:a.values[b]}},function(a){if(a=a.matchPattern(Ik))return{v:Ag[a]}},function(a){if(a=a.matchPattern(Jk))return{v:+a}},function(a){var b=Tc(a),c=a.values;return b&&c?{v:b.v.replace(Kk,function(a,b){return b in c?c[b]:b})}:b},function(a){if(!a.matchString("{"))return null;var b={};a.allowWhitespace();if(a.matchString("}"))return{v:b};for(var c;c=tj(a);){b[c.key]=c.value;
a.allowWhitespace();if(a.matchString("}"))return{v:b};if(!a.matchString(","))break}return null},function(a){if(!a.matchString("["))return null;var b=[];a.allowWhitespace();if(a.matchString("]"))return{v:b};for(var c;c=a.read();){b.push(c.v);a.allowWhitespace();if(a.matchString("]"))return{v:b};if(!a.matchString(","))break;a.allowWhitespace()}return null}]}),Md=function(a,c){return(new Nk(a,{values:c})).result},xj=function(a){function b(b){a.call(this,b);this.name=b.template.n;this.owner=b.owner||
b.parentFragment.owner||b.element||ea(b.parentFragment);this.element=b.element||(this.owner.attributeByName?this.owner:ea(b.parentFragment));this.parentFragment=this.element.parentFragment;this.ractive=this.parentFragment.ractive;this.element.attributeByName[this.name]=this;this.value=b.template.f}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this.template.f,b=this.element.instance.viewmodel;if(0===a)b.joinKey(this.name).set(!0);
else if("string"===typeof a){var c=Md(a);b.joinKey(this.name).set(c?c.value:a)}else Array.isArray(a)&&uj(this,!0)};b.prototype.render=function(){};b.prototype.unbind=function(){this.model&&this.model.unregister(this);this.boundFragment&&this.boundFragment.unbind();this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()};b.prototype.unrender=function(){};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.boundFragment&&this.boundFragment.update())};return b}(ha),Ok=function(a){function b(b){var c=
b.template;c.a||(c.a={});void 0!==c.a.value||"disabled"in c.a||(c.a.value=c.f||"");a.call(this,b);this.select=ea(this.parent||this.parentFragment,!1,"select")}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){if(this.select){var b=this.attributeByName.selected;b&&void 0!==this.select.getAttribute("value")&&(b=this.attributes.indexOf(b),this.attributes.splice(b,1),delete this.attributeByName.selected);a.prototype.bind.call(this);this.select.options.push(this)}else a.prototype.bind.call(this)};
b.prototype.bubble=function(){var b=this.getAttribute("value");this.node&&this.node.value!==b&&(this.node._ractive.value=b);a.prototype.bubble.call(this)};b.prototype.getAttribute=function(a){var b=this.attributeByName[a];return b?b.getValue():"value"===a&&this.fragment?this.fragment.valueOf():void 0};b.prototype.isSelected=function(){var a=this.getAttribute("value");if(void 0===a||!this.select)return!1;var b=this.select.getAttribute("value");if(this.select.compare(b,a))return!0;if(this.select.getAttribute("multiple")&&
Array.isArray(b))for(var c=b.length;c--;)if(this.select.compare(b[c],a))return!0};b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.select&&L(this.select.options,this)};return b}(Nb),Bg=function(a){function b(b){a.call(this,b);if(this.yielder=16===b.template.t)this.container=b.parentFragment.ractive,this.component=this.container.component,
this.containerFragment=b.parentFragment,this.parentFragment=this.component.parentFragment,b.template.r||b.template.rx||b.template.x||(b.template.r="content")}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var b=(this.refName=this.template.r)?nc(this.ractive,this.refName,this.parentFragment)||null:null,c;b&&(this.named=!0,this.setTemplate(this.template.r,b));b||(a.prototype.bind.call(this),(c=this.model.get())&&"object"===typeof c&&
("string"===typeof c.template||Array.isArray(c.t))?(c.template?(this.source=c.template,c=Cf(this.template.r,c.template,this.ractive)):this.source=c.t,this.setTemplate(this.template.r,c.t)):"string"!==typeof this.model.get()&&this.refName?this.setTemplate(this.refName,b):this.setTemplate(this.model.get()));b={owner:this,template:this.partialTemplate};if(this.template.c){b.template=[{t:4,n:53,f:b.template}];for(var d in this.template.c)b.template[0][d]=this.template.c[d]}this.yielder&&(b.ractive=this.container.parent);
this.fragment=new M(b);this.template.z&&(this.fragment.aliases=jf(this.template.z,this.yielder?this.containerFragment:this.parentFragment));this.fragment.bind()};b.prototype.bubble=function(){this.yielder&&!this.dirty?(this.containerFragment.bubble(),this.dirty=!0):a.prototype.bubble.call(this)};b.prototype.findNextNode=function(){return this.yielder?this.containerFragment.findNextNode(this):a.prototype.findNextNode.call(this)};b.prototype.forceResetTemplate=function(){var a=this;this.partialTemplate=
void 0;this.refName&&(this.partialTemplate=nc(this.ractive,this.refName,this.parentFragment));this.partialTemplate||(this.partialTemplate=nc(this.ractive,this.name,this.parentFragment));this.partialTemplate||(r("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]);this.inAttribute?Ri(function(){return a.fragment.resetTemplate(a.partialTemplate)}):this.fragment.resetTemplate(this.partialTemplate);this.bubble()};b.prototype.render=function(a,b){return this.fragment.render(a,
b)};b.prototype.setTemplate=function(a,b){this.name=a;b||null===b||(b=nc(this.ractive,a,this.parentFragment));b||r("Could not find template for partial '"+a+"'");this.partialTemplate=b||[]};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.fragment.aliases={};this.fragment.unbind()};b.prototype.unrender=function(a){this.fragment.unrender(a)};b.prototype.update=function(){var a;this.dirty&&(this.dirty=!1,this.named||(this.model&&(a=this.model.get()),a&&"string"===typeof a&&a!==this.name?
(this.setTemplate(a),this.fragment.resetTemplate(this.partialTemplate)):a&&"object"===typeof a&&("string"===typeof a.template||Array.isArray(a.t))&&a.t!==this.source&&a.template!==this.source&&(a.template?(this.source=a.template,a=Cf(this.name,a.template,this.ractive)):this.source=a.t,this.setTemplate(this.name,a.t),this.fragment.resetTemplate(this.partialTemplate))),this.fragment.update())};return b}(Ld),ba=function(a){this.parent=a.owner.parentFragment;this.parentFragment=this;this.owner=a.owner;
this.ractive=this.parent.ractive;var b;if((b=!1!==this.ractive.delegate)&&!(b=this.parent.delegate)){var c=ea(a.owner);for(b=c;b;)b.delegate&&(c=b),b=b.parent;b=c}(this.delegate=b)&&!1===this.delegate.delegate&&(this.delegate=!1);this.delegate&&(this.delegate.delegate=this.delegate);this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.context=null;this.rendered=!1;this.iterations=[];this.template=a.template;this.indexRef=a.indexRef;this.keyRef=a.keyRef;this.previousIterations=
this.pendingNewIndices=null;this.isArray=!1};ba.prototype.bind=function(a){var b=this;this.context=a;a=a.get();if(this.isArray=Array.isArray(a)){this.iterations=[];a=a.length;for(var c=0;c<a;c+=1)b.iterations[c]=b.createIteration(c,c)}else d(a)&&(this.isArray=!1,this.indexRef&&(c=this.indexRef.split(","),this.keyRef=c[0],this.indexRef=c[1]),this.iterations=Object.keys(a).map(function(a,c){return b.createIteration(a,c)}));return this};ba.prototype.bubble=function(a){this.bubbled||(this.bubbled=[]);
this.bubbled.push(a);this.owner.bubble()};ba.prototype.createIteration=function(a,c){var b=new M({owner:this,template:this.template});b.key=a;b.index=c;b.isIteration=!0;b.delegate=this.delegate;var d=this.context.joinKey(a);this.owner.template.z&&(b.aliases={},b.aliases[this.owner.template.z[0].n]=d);return b.bind(d)};ba.prototype.destroyed=function(){this.iterations.forEach(yb)};ba.prototype.detach=function(){var a=xa();this.iterations.forEach(function(b){return a.appendChild(b.detach())});return a};
ba.prototype.find=function(a,c){return aa(this.iterations,function(b){return b.find(a,c)})};ba.prototype.findAll=function(a,c){return this.iterations.forEach(function(b){return b.findAll(a,c)})};ba.prototype.findComponent=function(a,c){return aa(this.iterations,function(b){return b.findComponent(a,c)})};ba.prototype.findAllComponents=function(a,c){return this.iterations.forEach(function(b){return b.findAllComponents(a,c)})};ba.prototype.findNextNode=function(a){if(a.index<this.iterations.length-1)for(a=
a.index+1;a<this.iterations.length;a++){var b=this.iterations[a].firstNode(!0);if(b)return b}return this.owner.findNextNode()};ba.prototype.firstNode=function(a){return this.iterations[0]?this.iterations[0].firstNode(a):null};ba.prototype.rebind=function(a){var b=this;this.context=a;this.iterations.forEach(function(c){var d=a?a.joinKey(c.key):void 0;c.context=d;b.owner.template.z&&(c.aliases={},c.aliases[b.owner.template.z[0].n]=d)})};ba.prototype.render=function(a,c){var b=this.iterations;if(b)for(var d=
b.length,g=0;g<d;g++)b[g].render(a,c);this.rendered=!0};ba.prototype.shuffle=function(a){var b=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice());this.pendingNewIndices||(this.pendingNewIndices=[]);this.pendingNewIndices.push(a);var c=[];a.forEach(function(a,d){if(-1!==a){var g=b.iterations[d];c[a]=g;a!==d&&g&&(g.dirty=!0)}});this.iterations=c;this.bubble()};ba.prototype.shuffled=function(){this.iterations.forEach(Za)};ba.prototype.toString=function(a){return this.iterations?
this.iterations.map(a?Ud:Va).join(""):""};ba.prototype.unbind=function(){this.iterations.forEach(ma);return this};ba.prototype.unrender=function(a){this.iterations.forEach(a?Ab:wa);this.pendingNewIndices&&this.previousIterations&&this.previousIterations.forEach(function(b){b.rendered&&(a?Ab(b):wa(b))});this.rendered=!1};ba.prototype.update=function(){var a=this;if(this.pendingNewIndices)this.bubbled.length=0,this.updatePostShuffle();else if(!this.updating){this.updating=!0;var c=this.context.get(),
e=this.isArray,f,k,l=!0,m;if(this.isArray=Array.isArray(c))e&&(l=!1,this.iterations.length>c.length&&(f=this.iterations.splice(c.length)));else if(d(c)&&!e)for(l=!1,f=[],k={},m=this.iterations.length;m--;)e=a.iterations[m],e.key in c?k[e.key]=!0:(a.iterations.splice(m,1),f.push(e));l&&(f=this.iterations,this.iterations=[]);f&&f.forEach(function(a){a.unbind();a.unrender(!0)});!l&&this.isArray&&this.bubbled&&this.bubbled.length?this.bubbled.forEach(function(b){return a.iterations[b]&&a.iterations[b].update()}):
this.iterations.forEach(Ia);this.bubbled&&(this.bubbled.length=0);var n,q;if((Array.isArray(c)?c.length:d(c)?Object.keys(c).length:0)>this.iterations.length){n=this.rendered?xa():null;m=this.iterations.length;if(Array.isArray(c))for(;m<c.length;)q=a.createIteration(m,m),a.iterations.push(q),a.rendered&&q.render(n),m+=1;else d(c)&&(this.indexRef&&!this.keyRef&&(f=this.indexRef.split(","),this.keyRef=f[0],this.indexRef=f[1]),Object.keys(c).forEach(function(b){k&&b in k||(q=a.createIteration(b,m),a.iterations.push(q),
a.rendered&&q.render(n),m+=1)}));this.rendered&&(c=this.parent.findParentNode(),f=this.parent.findNextNode(this.owner),c.insertBefore(n,f))}this.updating=!1}};ba.prototype.updatePostShuffle=function(){var a=this,c=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(function(a){c.forEach(function(b,d){c[d]=a[b]})});var d=this.context.get().length,e=this.previousIterations.length,f={},k;c.forEach(function(b,c){var d=a.previousIterations[c];a.previousIterations[c]=null;if(-1===b)f[c]=d;
else if(d.index!==b){var g=a.context.joinKey(b);d.index=d.key=b;d.context=g;a.owner.template.z&&(d.aliases={},d.aliases[a.owner.template.z[0].n]=g)}});this.previousIterations.forEach(function(a,b){a&&(f[b]=a)});var l=this.rendered?xa():null,m=this.rendered?this.parent.findParentNode():null,n="startIndex"in c;k=n?c.startIndex:0;for(k;k<d;k++){var q=a.iterations[k];q&&n?a.rendered&&(f[k]&&l.appendChild(f[k].detach()),l.childNodes.length&&m.insertBefore(l,q.firstNode())):(q||(a.iterations[k]=a.createIteration(k,
k)),a.rendered&&(f[k]&&l.appendChild(f[k].detach()),q?l.appendChild(q.detach()):a.iterations[k].render(l)))}if(this.rendered){for(k=d;k<e;k++)f[k]&&l.appendChild(f[k].detach());l.childNodes.length&&m.insertBefore(l,this.owner.findNextNode())}Object.keys(f).forEach(function(a){return f[a].unbind().unrender(!0)});this.iterations.forEach(Ia);this.pendingNewIndices=null;this.shuffled()};var Pk=function(a){function b(b){a.call(this,b);this.templateSectionType=this.sectionType=b.template.n||null;this.subordinate=
1===b.template.l;this.fragment=null}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){a.prototype.bind.call(this);this.subordinate&&(this.sibling=this.parentFragment.items[this.parentFragment.items.indexOf(this)-1],this.sibling.nextSibling=this);this.model?(this.dirty=!0,this.update()):!this.sectionType||51!==this.sectionType||this.sibling&&this.sibling.isTruthy()||(this.fragment=(new M({owner:this,template:this.template.f})).bind())};
b.prototype.detach=function(){var b=this.fragment||this.detached;return b?b.detach():a.prototype.detach.call(this)};b.prototype.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var a=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,b;if(b=!!a)(b=54===this.templateSectionType)||(b=!(!a||Array.isArray(a)&&0===a.length||d(a)&&0===Object.keys(a).length));return b};b.prototype.rebind=function(b,c,d){a.prototype.rebind.call(this,b,c,d)&&this.fragment&&50!==
this.sectionType&&51!==this.sectionType&&this.fragment.rebind(b)};b.prototype.render=function(a,b){this.rendered=!0;this.fragment&&this.fragment.render(a,b)};b.prototype.shuffle=function(a){this.fragment&&52===this.sectionType&&this.fragment.shuffle(a)};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};b.prototype.update=function(){var a=this;
if(this.dirty&&(this.fragment&&50!==this.sectionType&&51!==this.sectionType&&(this.fragment.context=this.model),this.model||51===this.sectionType)){this.dirty=!1;var b=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,c=!this.subordinate||!this.sibling.isTruthy(),d=this.sectionType;if(null===this.sectionType||null===this.templateSectionType)this.sectionType=vj(b,this.template.i);d&&d!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=
null);var g;52===this.sectionType||53===this.sectionType||c&&(51===this.sectionType?!this.isTruthy():this.isTruthy())?(this.fragment||(this.fragment=this.detached),this.fragment?(this.detached&&(Df(this,this.fragment),this.detached=!1,this.rendered=!0),this.fragment.update()):52===this.sectionType?g=(new ba({owner:this,template:this.template.f,indexRef:this.template.i})).bind(this.model):(b=50!==this.sectionType&&51!==this.sectionType?this.model:null,g=(new M({owner:this,template:this.template.f})).bind(b))):
(this.fragment&&this.rendered?!0!==ac?this.fragment.unbind().unrender(!0):(this.unrender(!1),this.detached=this.fragment,I.scheduleTask(function(){return a.detach()})):this.fragment&&this.fragment.unbind(),this.fragment=null);g&&(this.rendered&&Df(this,g),this.fragment=g);this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update())}};return b}(Ld),Qk=function(a){function b(b){a.call(this,b);this.options=[]}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.foundNode=function(a){this.binding&&(a=ld(a),0<a.length&&(this.selectedOptions=a))};b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.sync();for(var d=this.node,g=d.options.length;g--;)d.options[g].defaultSelected=d.options[g].selected;this.rendered=!0};b.prototype.sync=function(){var a=this,b=this.node;if(b){var c=Z(b.options);if(this.selectedOptions)c.forEach(function(b){0<=a.selectedOptions.indexOf(b)?b.selected=!0:b.selected=!1}),this.binding.setFromNode(b),
delete this.selectedOptions;else{var d=this.getAttribute("value"),g=this.getAttribute("multiple"),e=g&&Array.isArray(d);if(void 0!==d){var f;c.forEach(function(b){var c=b._ractive?b._ractive.value:b.value;(c=g?e&&a.valueContains(d,c):a.compare(d,c))&&(f=!0);b.selected=c});f||g||this.binding&&this.binding.forceUpdate()}else this.binding&&this.binding.forceUpdate()}}};b.prototype.valueContains=function(a,b){for(var c=a.length;c--;)if(this.compare(b,a[c]))return!0};b.prototype.compare=function(a,b){var c=
this.getAttribute("value-comparator");if(c){if("function"===typeof c)return c(b,a);if(b&&a)return b[c]==a[c]}return b==a};b.prototype.update=function(){var b=this.dirty;a.prototype.update.call(this);b&&this.sync()};return b}(Nb),Rk=function(a){function b(b){var c=b.template;b.deferContent=!0;a.call(this,b);this.attributeByName.value||(c.f&&bb({template:c})?(this.attributes||(this.attributes=[])).push(pc({owner:this,template:{t:Ca,f:c.f,n:"value"},parentFragment:this.parentFragment})):this.fragment=
new M({owner:this,cssIds:null,template:c.f}))}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){var a=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&I.scheduleTask(function(){a.dirty=!1;a.node.value=a.fragment.toString()}),this.parentFragment.bubble())};return b}(zg),Hf=function(a){function b(b){a.call(this,b);this.type=1}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.detach=function(){return gb(this.node)};b.prototype.firstNode=function(){return this.node};b.prototype.render=function(a,b){Da||(this.rendered=!0,zf(this,a,b,this.template))};b.prototype.toString=function(a){return a?Sc(this.template):this.template};b.prototype.unrender=function(a){this.rendered&&a&&this.detach();this.rendered=!1};b.prototype.valueOf=function(){return this.template};return b}(ha),Nd=Hf.prototype;Nd.bind=Nd.unbind=Nd.update=S;var Od;if(wd){var wc={},Cg=La("div").style;
Od=function(a){if(!wc[a]){var b=ed(a);if(void 0!==Cg[a])wc[a]=b;else for(var c=cb.length;c--;){var d="-"+cb[c]+"-"+b;if(void 0!==Cg[d]){wc[a]=d;break}}}return wc[a]}}else Od=null;var Tb=Od,Mb,oc="hidden";if(Q){var xc;if(oc in Q)xc="";else for(var Dg=cb.length;Dg--;){var Eg=cb[Dg],oc=Eg+"Hidden";if(oc in Q){xc=Eg;break}}void 0!==xc?(Q.addEventListener(xc+"visibilitychange",Ef),Ef()):("onfocusout"in Q?(Q.addEventListener("focusout",md),Q.addEventListener("focusin",nd)):(ra.addEventListener("pagehide",
md),ra.addEventListener("blur",md),ra.addEventListener("pageshow",nd),ra.addEventListener("focus",nd)),Mb=!0)}var Sk=new RegExp("^(?:"+cb.join("|")+")([A-Z])"),Tk=function(a){if(!a)return"";Sk.test(a)&&(a="-"+a);return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},Pd;if(wd){var Fg=La("div").style,Gg=function(a){return a},Qd={},yc={},ub,Ub,Vb,zc,vb,Wb;void 0!==Fg.transition?(ub="transition",Ub="transitionend",Vb=!0):void 0!==Fg.webkitTransition?(ub="webkitTransition",Ub="webkitTransitionEnd",
Vb=!0):Vb=!1;ub&&(zc=ub+"Duration",vb=ub+"Property",Wb=ub+"TimingFunction");Pd=function(a,c,d,e,f){setTimeout(function(){function b(){clearTimeout(p)}function g(){l&&m&&(a.unregisterCompleteHandler(b),a.ractive.fire(a.name+":end",a.node,a.isIntro),f())}function h(a){a=e.indexOf(a.propertyName);-1!==a&&e.splice(a,1);e.length||(clearTimeout(p),k())}function k(){v[vb]=w.property;v[Wb]=w.duration;v[zc]=w.timing;a.node.removeEventListener(Ub,h,!1);m=!0;g()}var l,m,p,q=(a.node.namespaceURI||"")+a.node.tagName,
v=a.node.style,w={property:v[vb],timing:v[Wb],duration:v[zc]};a.node.addEventListener(Ub,h,!1);p=setTimeout(function(){e=[];k()},d.duration+(d.delay||0)+50);a.registerCompleteHandler(b);v[vb]=e.join(",");var J=Tk(d.easing||"linear");v[Wb]=J;var na=v[Wb]===J;v[zc]=d.duration/1E3+"s";setTimeout(function(){for(var b=e.length,f,k=null,p=[],w;b--;){w=e[b];f=q+w;if(na&&Vb&&!yc[f]){var J=v[w];v[w]=c[w];f in Qd||(k=a.getStyle(w),Qd[f]=a.getStyle(w)!=c[w],yc[f]=!Qd[f],yc[f]&&(v[w]=J))}na&&Vb&&!yc[f]||(null===
k&&(k=a.getStyle(w)),f=e.indexOf(w),-1===f?n("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:a.node}):e.splice(f,1),f=/[^\d]*$/.exec(k)[0],(k=x(parseFloat(k),parseFloat(c[w])))?p.push({name:w,interpolator:k,suffix:f}):v[w]=c[w],k=null)}p.length?("string"===typeof d.easing?(b=a.ractive.easing[d.easing],b||(r(Bb(d.easing,"easing")),b=Gg)):b="function"===typeof d.easing?d.easing:Gg,new qc({duration:d.duration,easing:b,
step:function(a){for(var b=p.length;b--;){var c=p[b];v[c.name]=c.interpolator(a)+c.suffix}},complete:function(){l=!0;g()}})):l=!0;e.length?v[vb]=e.join(","):(v[vb]="none",a.node.removeEventListener(Ub,h,!1),m=!0,g())},0)},d.delay||0)}}else Pd=null;var Uk=Pd,Hg=ra&&ra.getComputedStyle,Vk=Promise.resolve(),Wk={t0:"intro-outro",t1:"intro",t2:"outro"},oa=function(a){this.owner=a.owner||a.parentFragment.owner||ea(a.parentFragment);this.element=this.owner.attributeByName?this.owner:ea(a.parentFragment);
this.ractive=this.owner.ractive;this.template=a.template;this.parentFragment=a.parentFragment;this.options=a;this.onComplete=[]};oa.prototype.animateStyle=function(a,c,d){var b=this;if(4===arguments.length)throw Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!Mb)return this.setStyle(a,c),Vk;var g;"string"===typeof a?(g={},g[a]=c):(g=a,d=c);return new Promise(function(a){if(d.duration){for(var c=Object.keys(g),e=[],h=Hg(b.node),f=c.length;f--;){var k=c[f],
l=Tb(k),m=h[Tb(k)],p=b.node.style[l];l in b.originals||(b.originals[l]=b.node.style[l]);b.node.style[l]=g[k];b.targets[l]=b.node.style[l];b.node.style[l]=p;m!=g[k]&&(e.push(l),g[l]=g[k],b.node.style[l]=m)}e.length?Uk(b,g,d,e,a):a()}else b.setStyle(g),a()})};oa.prototype.bind=function(){var a=this.options,c=a.template&&a.template.v;if(c){if("t0"===c||"t1"===c)this.element.intro=this;if("t0"===c||"t2"===c)this.element.outro=this;this.eventName=Wk[c]}c=this.owner.ractive;this.name=a.name||a.template.n;
a.params&&(this.params=a.params);"function"===typeof this.name?(this._fn=this.name,this.name=this._fn.name):this._fn=v("transitions",c,this.name);this._fn||r(Bb(this.name,"transition"),{ractive:c});jd(this,a.template)};oa.prototype.getParams=function(){if(this.params)return this.params;if(this.fn){var a=kd(this,this.template,this.parentFragment).map(function(a){if(a)return a.get()});return this.fn.apply(this.ractive,a)}};oa.prototype.getStyle=function(a){var b=Hg(this.node);if("string"===typeof a)return b[Tb(a)];
if(!Array.isArray(a))throw Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var c={},d=a.length;d--;){var e=a[d],f=b[Tb(e)];"0px"===f&&(f=0);c[e]=f}return c};oa.prototype.processParams=function(a,c){"number"===typeof a?a={duration:a}:"string"===typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={});return Object.assign({},c,a)};oa.prototype.registerCompleteHandler=function(a){J(this.onComplete,a)};oa.prototype.setStyle=
function(a,c){if("string"===typeof a){var b=Tb(a);this.originals.hasOwnProperty(b)||(this.originals[b]=this.node.style[b]);this.node.style[b]=c;this.targets[b]=this.node.style[b]}else for(b in a)a.hasOwnProperty(b)&&this.setStyle(b,a[b]);return this};oa.prototype.shouldFire=function(a){if(!this.ractive.transitionsEnabled||"intro"===a&&this.ractive.rendering&&od("noIntro",this.ractive,!0)||"outro"===a&&this.ractive.unrendering&&od("noOutro",this.ractive,!1))return!1;var b=this.getParams();if(!this.element.parent)return!0;
if(b&&b[0]&&d(b[0])&&"nested"in b[0]){if(!1!==b[0].nested)return!0}else if(!1!==od("nestedTransitions",this.ractive))return!0;for(b=this.element.parent;b;){if(b[a]&&b[a].starting)return!1;b=b.parent}return!0};oa.prototype.start=function(){var a=this,c=this.node=this.element.node,d=this.originals={},e=this.targets={},f,k=this.getParams();this.complete=function(b){a.starting=!1;if(!f){a.onComplete.forEach(function(a){return a()});if(!b&&a.isIntro)for(var g in e)c.style[g]===e[g]&&(c.style[g]=d[g]);
a._manager.remove(a);f=!0}};this._fn?(k=this._fn.apply(this.ractive,[this].concat(k)))&&k.then(this.complete):this.complete()};oa.prototype.toString=function(){return""};oa.prototype.unbind=function(){if(!this.element.attributes.unbinding){var a=this.options&&this.options.template&&this.options.template.v;if("t0"===a||"t1"===a)this.element.intro=null;if("t0"===a||"t2"===a)this.element.outro=null}};oa.prototype.unregisterCompleteHandler=function(a){L(this.onComplete,a)};var Ac=oa.prototype;Ac.destroyed=
Ac.render=Ac.unrender=Ac.update=S;var Ff={},Ig,Jg;try{La("table").innerHTML="foo"}catch(b){Ig=!0,Jg={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Xk=function(a,c){var b=[];if(null==a||""===a)return b;var d,g,e;Ig&&(g=Jg[c.tagName])?(d=pd("DIV"),d.innerHTML=g[0]+a+g[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&
(e=d.options[d.selectedIndex])):"http://www.w3.org/2000/svg"===c.namespaceURI?(d=pd("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):"TEXTAREA"===c.tagName?(d=La("div"),"undefined"!==typeof d.textContent?d.textContent=a:d.innerHTML=a):(d=pd(c.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(e=d.options[d.selectedIndex]));for(;g=d.firstChild;)b.push(g),d.removeChild(g);if("SELECT"===c.tagName)for(d=b.length;d--;)b[d]!==e&&(b[d].selected=!1);return b},Yk=function(a){function b(b){a.call(this,
b)}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.detach=function(){var a=xa();this.nodes&&this.nodes.forEach(function(b){return a.appendChild(b)});return a};b.prototype.find=function(a){var b=this.nodes.length,c;for(c=0;c<b;c+=1){var d=this.nodes[c];if(1===d.nodeType&&(Ea(d,a)||(d=d.querySelector(a))))return d}return null};b.prototype.findAll=function(a,b){var c=b.result,d=this.nodes.length,g;for(g=0;g<d;g+=1){var e=this.nodes[g];1===e.nodeType&&
(Ea(e,a)&&c.push(e),(e=e.querySelectorAll(a))&&c.push.apply(c,e))}};b.prototype.findComponent=function(){return null};b.prototype.firstNode=function(){return this.rendered&&this.nodes[0]};b.prototype.render=function(a,b){var c=this.parentFragment.findParentNode();if(!this.nodes){var d=this.model?this.model.get():"";this.nodes=Xk(d,this.parentFragment.findParentNode(),a)}var d=this.nodes,g=this.parentFragment.findNextNode(this);if(b){for(var e=-1,h;b.length&&(h=this.nodes[e+1]);)for(var f=void 0;f=
b.shift();){var k=f.nodeType;if(k===h.nodeType&&(1===k&&f.outerHTML===h.outerHTML||(3===k||8===k)&&f.nodeValue===h.nodeValue)){this.nodes.splice(++e,1,f);break}else a.removeChild(f)}0<=e&&(d=this.nodes.slice(e));b.length&&(g=b[0])}if(d.length){var l=xa();d.forEach(function(a){return l.appendChild(a)});g?g.parentNode.insertBefore(l,g):c.appendChild(l)}this.rendered=!0};b.prototype.toString=function(){var a=this.model&&this.model.get(),a=null!=a?""+a:"";return db?Rc(a):a};b.prototype.unrender=function(){this.nodes&&
this.nodes.forEach(function(a){I.detachWhenReady({node:a,detach:function(){gb(a)}})});this.rendered=!1;this.nodes=null};b.prototype.update=function(){this.rendered&&this.dirty?(this.dirty=!1,this.unrender(),this.render()):this.dirty=!1};return b}(Kd),pa={};pa[19]=xk;pa[11]=If;pa[18]=Gd;pa[Ka]=Hk;pa[8]=Bg;pa[4]=Pk;pa[3]=Yk;pa[16]=Bg;pa[Ca]=Jf;pa[73]=zk;pa[71]=za;pa[70]=Fa;pa[72]=oa;var wj={doctype:Gd,form:Ek,input:zg,option:Ok,select:Qk,textarea:Rk},M=function(a){this.owner=a.owner;this.parent=(this.isRoot=
!a.owner.parentFragment)?null:this.owner.parentFragment;this.ractive=a.ractive||(this.isRoot?a.owner:this.parent.ractive);this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null;this.delegate=(this.parent?this.parent.delegate:this.componentParent&&this.componentParent.delegate)||this.owner.containerFragment&&this.owner.containerFragment.delegate;this.context=null;this.rendered=!1;this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.dirty=
!1;this.dirtyValue=!0;this.template=a.template||[];this.createItems()};M.prototype.bind=function(a){this.context=a;this.items.forEach(Oa);this.bound=!0;this.dirty&&this.update();return this};M.prototype.bubble=function(){this.dirtyValue=!0;this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&I.addFragment(this):this.owner.bubble(this.index))};M.prototype.createItems=function(){var a=this.template.length;this.items=[];for(var c=0;c<a;c++)this.items[c]=
pc({parentFragment:this,template:this.template[c],index:c})};M.prototype.destroyed=function(){this.items.forEach(yb)};M.prototype.detach=function(){for(var a=xa(),c=this.items,d=c.length,e=0;e<d;e++)a.appendChild(c[e].detach());return a};M.prototype.find=function(a,c){return aa(this.items,function(b){return b.find(a,c)})};M.prototype.findAll=function(a,c){this.items&&this.items.forEach(function(b){return b.findAll&&b.findAll(a,c)})};M.prototype.findComponent=function(a,c){return aa(this.items,function(b){return b.findComponent(a,
c)})};M.prototype.findAllComponents=function(a,c){this.items&&this.items.forEach(function(b){return b.findAllComponents&&b.findAllComponents(a,c)})};M.prototype.findContext=function(){for(var a=this;a&&!a.context;)a=a.parent;return a?a.context:this.ractive.viewmodel};M.prototype.findNextNode=function(a){if(a)for(a=a.index+1;a<this.items.length;a++)if(this.items[a]){var b=this.items[a].firstNode(!0);if(b)return b}if(this.isRoot)return this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):
null;if(this.parent)return this.owner.findNextNode(this)};M.prototype.findParentNode=function(){var a=this;do{if(7===a.owner.type)return a.owner.node;if(a.isRoot&&!a.ractive.component)return a.ractive.el;a=16===a.owner.type?a.owner.containerFragment:a.componentParent||a.parent}while(a);throw Error("Could not find parent node");};M.prototype.findRepeatingFragment=function(){for(var a=this;(a.parent||a.componentParent)&&!a.isIteration;)a=a.parent||a.componentParent;return a};M.prototype.firstNode=function(a){var b=
aa(this.items,function(a){return a.firstNode(!0)});return b?b:a?null:this.parent.findNextNode(this.owner)};M.prototype.rebind=function(a){this.context=a};M.prototype.render=function(a,c){if(this.rendered)throw Error("Fragment is already rendered!");this.rendered=!0;for(var b=this.items,d=b.length,e=0;e<d;e++)b[e].render(a,c)};M.prototype.resetTemplate=function(a){var b=this.bound,c=this.rendered;b&&(c&&this.unrender(!0),this.unbind());this.template=a;this.createItems();b&&(this.bind(this.context),
c&&(a=this.findParentNode(),(b=this.findNextNode())?(c=xa(),this.render(c),a.insertBefore(c,b)):this.render(a)))};M.prototype.shuffled=function(){this.items.forEach(Za)};M.prototype.toString=function(a){return this.items.map(a?Ud:Va).join("")};M.prototype.unbind=function(){this.context=null;this.items.forEach(ma);this.bound=!1;return this};M.prototype.unrender=function(a){this.items.forEach(a?yj:wa);this.rendered=!1};M.prototype.update=function(){this.dirty&&(this.updating?this.isRoot&&I.addFragmentToRoot(this):
(this.dirty=!1,this.updating=!0,this.items.forEach(Ia),this.updating=!1))};M.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var a={},c=qd(this.items,a,this.ractive._guid);this.value=(a=Md(c,a))?a.value:this.toString();this.dirtyValue=!1}return this.value};M.prototype.getContext=Yd;var Rd=function(a){this.hook=new ga(a);this.inProcess={};this.queue={}};Rd.prototype.begin=function(a){this.inProcess[a._guid]=!0};Rd.prototype.end=function(a){var b=
a.parent;b&&this.inProcess[b._guid]?Kf(this.queue,b).push(a):Lf(this,a);delete this.inProcess[a._guid]};var zj=new ga("config"),Nf=new Rd("init"),Aj=new ga("render"),Bj=new ga("complete"),Zk=["template","partials","components","decorators","events"],$k=new ga("complete"),al=new ga("reset"),bl=new ga("render"),cl=new ga("unrender"),dl=qa("reverse").path,el=qa("shift").path,fl=qa("sort").path,gl=qa("splice").path,hl=new ga("unrender"),il=qa("unshift").path,bd={add:function(a,c,d){return ie(this,a,"number"===
typeof c?c:1,"object"===typeof c?c:d)},animate:function(a,c,d){if("object"===typeof a)throw c=Object.keys(a),Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+c.map(function(b){return"'"+b+"': "+a[b]}).join("\n  ")+"\n}, {...}), do\n\n"+c.map(function(b){return"ractive.animate('"+b+"', "+a[b]+", {...});"}).join("\n")+"\n");return ke(this,this.viewmodel.joinAll(R(a)),c,d)},attachChild:function(a,c){void 0===c&&(c={});var b=this._children;if(a.parent&&a.parent!==
this)throw Error("Instance "+a._guid+" is already attached to a different instance "+a.parent._guid+". Please detach it from the other instance using detachChild first.");if(a.parent)throw Error("Instance "+a._guid+" is already attached to this instance.");var d={instance:a,ractive:this,name:c.name||a.constructor.name||"Ractive",target:c.target||!1,bubble:ch,findNextNode:dh};d.nameOption=c.name;if(d.target){var e;(e=b.byName[d.target])||(e=[],this.set("@this.children.byName."+d.target,e));e.splice(c.prepend?
0:void 0!==c.insertAt?c.insertAt:e.length,0,d)}else d.parentFragment=this.fragment,d.external=!0;a.set({"@this.parent":this,"@this.root":this.root});a.component=d;b.push(d);Jj.fire(a);b=I.start(a,!0);d.target?(bh(d),this.set("@this.children.byName."+d.target,null,{shuffle:!0}),Kc(this,d.target)):a.isolated||a.viewmodel.attached(this.fragment);I.end();b.ractive=a;return b.then(function(){return a})},detach:function(){if(this.isDetached)return this.el;this.el&&L(this.el.__ractive_instances__,this);
this.el=this.fragment.detach();this.isDetached=!0;Kj.fire(this);return this.el},detachChild:function(a){for(var b=this._children,c,d,e=b.length;e--;)if(b[e].instance===a){d=e;c=b[e];break}if(!c||a.parent!==this)throw Error("Instance "+a._guid+" is not attached to this instance.");e=I.start(a,!0);c.anchor&&c.anchor.removeChild(c);a.isolated||a.viewmodel.detached();I.end();b.splice(d,1);c.target&&(b=b.byName[c.target],b.splice(b.indexOf(c),1),this.set("@this.children.byName."+c.target,null,{shuffle:!0}),
Kc(this,c.target));a.set({"@this.parent":void 0,"@this.root":a});a.component=null;Lj.fire(a);e.ractive=a;return e.then(function(){return a})},find:function(a,c){void 0===c&&(c={});if(!this.el)throw Error("Cannot call ractive.find('"+a+"') unless instance is rendered to the DOM");var b=this.fragment.find(a,c);if(b)return b;if(c.remote)for(var d=0;d<this._children.length;d++)if(this._children[d].instance.fragment.rendered&&(b=this._children[d].instance.find(a,c)))return b},findAll:function(a,c){void 0===
c&&(c={});if(!this.el)throw Error("Cannot call ractive.findAll('"+a+"', ...) unless instance is rendered to the DOM");Array.isArray(c.result)||(c.result=[]);this.fragment.findAll(a,c);c.remote&&this._children.forEach(function(b){!b.target&&b.instance.fragment&&b.instance.fragment.rendered&&b.instance.findAll(a,c)});return c.result},findAllComponents:function(a,c){c||"object"!==typeof a||(c=a,a="");c=c||{};Array.isArray(c.result)||(c.result=[]);this.fragment.findAllComponents(a,c);c.remote&&this._children.forEach(function(b){!b.target&&
b.instance.fragment&&b.instance.fragment.rendered&&(a&&b.name!==a||c.result.push(b.instance),b.instance.findAllComponents(a,c))});return c.result},findComponent:function(a,c){void 0===c&&(c={});"object"===typeof a&&(c=a,a="");var b=this.fragment.findComponent(a,c);if(b)return b;if(c.remote){if(!a&&this._children.length)return this._children[0].instance;for(var d=0;d<this._children.length;d++)if(!this._children[d].target){if(this._children[d].name===a)return this._children[d].instance;if(b=this._children[d].instance.findComponent(a,
c))return b}}},findContainer:function(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null},findParent:function(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null},fire:function(a){for(var b=[],c=arguments.length-1;0<c--;)b[c]=arguments[c+1];if(b[0]instanceof O){var d=b.shift(),c=Object.create(d);Object.assign(c,d)}else c="object"===typeof b[0]&&b[0].constructor===
Object?O.forRactive(this,b.shift()):O.forRactive(this);return bc(this,a,c,b)},get:function(a,c){if("string"!==typeof a)return this.viewmodel.get(!0,a);var b=R(a),d=b[0];this.viewmodel.has(d)||this.component&&!this.isolated&&va(this.fragment||new Gb(this),d);return this.viewmodel.joinAll(b).get(!0,c)},getContext:function(a,c){"string"===typeof a&&(a=this.find(a,c));return Mc(a)},getNodeInfo:function(a,c){"string"===typeof a&&(a=this.find(a,c));return oe(a)},insert:function(a,c){if(!this.fragment.rendered)throw Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");
a=fb(a);c=fb(c)||null;if(!a)throw Error("You must specify a valid target to insert into");a.insertBefore(this.detach(),c);this.el=a;(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this);this.isDetached=!1;pe(this)},link:function(a,c,d){var b;d=d&&(d.ractive||d.instance)||this;var e=R(a);!d.viewmodel.has(e[0])&&d.component&&(b=va(d.component.parentFragment,e[0]),b=b.joinAll(e.slice(1)));b=b||d.viewmodel.joinAll(e);c=this.viewmodel.joinAll(R(c),{lastLink:!1});if(qe(b,c)||qe(c,b))throw Error("A keypath cannot be linked to itself.");
d=I.start();c.link(b,a);I.end();return d},observe:function(a,c,e){var b=this,g=[],f,h;d(a)?(f=a,h=c||{}):"function"===typeof a?(f={"":a},h=c||{}):(f={},f[a]=c,h=e||{});var k=!1;Object.keys(f).forEach(function(a){var c=f[a],d=function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];if(!k)return c.apply(this,a)};a=a.split(" ");1<a.length&&(a=a.filter(function(a){return a}));a.forEach(function(a){h.keypath=a;var c;c=h;a=R(a);var e=a.indexOf("*");~e||(e=a.indexOf("**"));c.fragment=c.fragment||
b.fragment;var f;c.fragment?~a[0].indexOf(".*")?(f=c.fragment.findContext(),e=0,a[0]=a[0].slice(1)):f=0===e?c.fragment.findContext():va(c.fragment,a[0]):f=b.viewmodel.joinKey(a[0]);f||(f=b.viewmodel.joinKey(a[0]));if(~e){var k=a.indexOf("**");~k&&(k+1!==a.length||~a.indexOf("*"))?(r("Recursive observers may only specify a single '**' at the end of the path."),c=void 0):(f=f.joinAll(a.slice(1,e)),c=new ob(b,f,a.slice(e),d,c))}else f=f.joinAll(a.slice(1)),c=c.array?new pb(b,f,d,c):new nb(b,f,d,c);c&&
g.push(c)})});this._observers.push.apply(this._observers,g);return{cancel:function(){return g.forEach(function(a){return a.cancel()})},isSilenced:function(){return k},silence:function(){return k=!0},resume:function(){return k=!1}}},observeOnce:function(a,c,e){if(d(a)||"function"===typeof a)return e=Object.assign(c||{},hg),this.observe(a,e);e=Object.assign(e||{},hg);return this.observe(a,c,e)},off:function(a,c){var b=this;a?a.split(" ").map(ig).filter(jg).forEach(function(a){var d=b._subs[a];if(d&&
c){var e=d.find(function(a){return a.callback===c});e&&(L(d,e),e.off=!0,a.indexOf(".")&&b._nsSubs--)}else d&&(a.indexOf(".")&&(b._nsSubs-=d.length),d.length=0)}):this._subs={};return this},on:function(a,c){var b=this,d="object"===typeof a?a:{};"string"===typeof a&&(d[a]=c);var e=!1,g=[],f=function(a){var c=d[a],f={callback:c,handler:function(){for(var a=[],b=arguments.length;b--;)a[b]=arguments[b];if(!e)return c.apply(this,a)}};d.hasOwnProperty(a)&&a.split(" ").map(ig).filter(jg).forEach(function(a){(b._subs[a]||
(b._subs[a]=[])).push(f);a.indexOf(".")&&b._nsSubs++;g.push([a,f])})},k;for(k in d)f(k);return{cancel:function(){return g.forEach(function(a){return b.off(a[0],a[1].callback)})},isSilenced:function(){return e},silence:function(){return e=!0},resume:function(){return e=!1}}},once:function(a,c){var b=this.on(a,function(){c.apply(this,arguments);b.cancel()});return b},pop:Vj,push:Wj,readLink:function(a,c){void 0===c&&(c={});var b=R(a);if(this.viewmodel.has(b[0])&&(b=this.viewmodel.joinAll(b),b.isLink)){for(;(b=
b.target)&&!1!==c.canonical&&b.isLink;);if(b)return{ractive:b.root.ractive,keypath:b.getKeypath()}}},render:function(a,c){if(this.torndown)return n("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();a=fb(a)||this.el;if(!this.append&&a){var b=a.__ractive_instances__;b&&b.forEach(Y);this.enhance||(a.innerHTML="")}var b=this.enhance?Z(a.childNodes):null,d=hd(this,a,c,b);if(b)for(;b.length;)a.removeChild(b.pop());return d},reset:function(a){a=a||{};if("object"!==
typeof a)throw Error("The reset method takes either no arguments, or an object containing new data");a=lc.init(this.constructor,this,{data:a});var b=I.start(this,!0),c=this.viewmodel.wrapper;c&&c.reset?!1===c.reset(a)&&this.viewmodel.set(a):this.viewmodel.set(a);for(var c=sd.reset(this),d,e=c.length;e--;)if(-1<Zk.indexOf(c[e])){d=!0;break}d&&(cl.fire(this),this.fragment.resetTemplate(this.template),bl.fire(this),$k.fire(this));I.end();al.fire(this,a);return b},resetPartial:function(a,c){var b=[];
Ob(this.fragment.items,a,!1,b);var d=I.start(this,!0);this.partials[a]=c;b.forEach(Cj);I.end();return d},resetTemplate:function(a){ad.init(null,this,{template:a});a=this.transitionsEnabled;this.transitionsEnabled=!1;var b=this.component;b&&(b.shouldDestroy=!0);this.unrender();b&&(b.shouldDestroy=!1);var c=I.start();this.fragment.unbind().unrender(!0);this.fragment=new M({template:this.template,root:this,owner:this});var d=xa();this.fragment.bind(this.viewmodel).render(d);b&&!b.external?this.fragment.findParentNode().insertBefore(d,
b.findNextNode()):this.el.insertBefore(d,this.anchor);I.end();this.transitionsEnabled=a;return c},reverse:dl,set:function(a,c,d){d="object"===typeof a?c:d;return Ha(this,ge(this,a,c,d&&d.isolated),d)},shift:el,sort:fl,splice:gl,subtract:function(a,c,d){return ie(this,a,"number"===typeof c?-c:-1,"object"===typeof c?c:d)},teardown:function(){var a=this;if(this.torndown)return n("ractive.teardown() was called on a Ractive instance that was already torn down"),Promise.resolve();this.shouldDestroy=!0;
return qf(this,function(){return a.fragment.rendered?a.unrender():Promise.resolve()})},toggle:function(a,c){if("string"!==typeof a)throw new TypeError("Bad arguments");return Ha(this,Dc(this,a,null,c&&c.isolated).map(function(a){return[a,!a.get()]}),c)},toCSS:Qf,toCss:Qf,toHTML:Rf,toHtml:Rf,toText:function(){return this.fragment.toString(!1)},transition:function(a,c,f){c instanceof HTMLElement||d(c)&&(f=c);(c=c||this.event.node)&&c._ractive||e("No node was supplied for transition "+a);f=f||{};c=c._ractive.proxy;
var b=new oa({owner:c,parentFragment:c.parentFragment,name:a,params:f});b.bind();a=I.start(this,!0);I.registerTransition(b);I.end();a.then(function(){return b.unbind()});return a},unlink:function(a){var b=I.start();this.viewmodel.joinAll(R(a),{lastLink:!1}).unlink();I.end();return b},unrender:function(){if(!this.fragment.rendered)return n("ractive.unrender() was called on a Ractive instance that was not rendered"),Promise.resolve();this.unrendering=!0;var a=I.start(this,!0),c=!this.component||(this.component.anchor||
{}).shouldDestroy||this.component.shouldDestroy||this.shouldDestroy;this.fragment.unrender(c);c&&(this.destroyed=!0);L(this.el.__ractive_instances__,this);hl.fire(this);I.end();this.unrendering=!1;return a},unshift:il,update:function(a,c){var b,d;"string"===typeof a?(d=R(a),b=c):b=a;return me(this,d?this.viewmodel.joinAll(d):this.viewmodel,b)},updateModel:function(a,c){var b=I.start(this,!0);a?this.viewmodel.joinAll(R(a)).updateFromBindings(!1!==c):this.viewmodel.updateFromBindings(!0);I.end();return b}};
Object.defineProperty(bd,"target",{get:function(){return this.el}});var Dj=/super\s*\(|\.call\s*\(\s*this/;if(ra&&!ra.Ractive){var Kg="",Lg=document.currentScript||document.querySelector("script[data-ractive-options]");Lg&&(Kg=Lg.getAttribute("data-ractive-options")||"");~Kg.indexOf("ForceGlobal")&&(ra.Ractive=X)}Object.assign(X.prototype,bd,Yf);X.prototype.constructor=X;X.defaults=X.prototype;ya.defaults=X.defaults;ya.Ractive=X;Object.defineProperties(X,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,
value:!0},extend:{value:Tf},extendWith:{value:Uf},escapeKey:{value:V},getContext:{value:Mc},getNodeInfo:{value:oe},isInstance:{value:Sf},joinKeys:{value:function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];return a.map(V).join(".")}},parse:{value:Zc},splitKeypath:{value:function(a){return R(a).map(da)}},unescapeKey:{value:da},getCSS:{value:dc},normaliseKeypath:{value:ua},findPlugin:{value:function(a,c,d){return v(c,d,a)}},evalObjectString:{value:Md},enhance:{writable:!0,value:!1},svg:{value:ag},
VERSION:{value:"0.9.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Zf},events:{writable:!0,value:{}},interpolators:{writable:!0,value:$b},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}},Ractive:{value:X}});return X});(function(f,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):f.Ractive.events.tap=a()})(this,function(){function f(a,c){this.node=a;this.callback=c;this.preventMousedownEvents=!1;this.bind(a)}function a(a){this.__tap_handler__.mousedown(a)}function d(a){this.__tap_handler__.touchdown(a)}function c(){this.addEventListener("keydown",k,!1);this.addEventListener("blur",e,!1)}function e(){this.removeEventListener("keydown",k,
!1);this.removeEventListener("blur",e,!1)}function k(a){32===a.which&&this.__tap_handler__.fire()}f.prototype={bind:function(e){window.navigator.pointerEnabled?e.addEventListener("pointerdown",a,!1):window.navigator.msPointerEnabled?e.addEventListener("MSPointerDown",a,!1):e.addEventListener("mousedown",a,!1);e.addEventListener("touchstart",d,!1);"BUTTON"!==e.tagName&&"button"!==e.type||e.addEventListener("focus",c,!1);e.__tap_handler__=this},fire:function(a,c,d){this.callback({node:this.node,original:a,
x:c,y:d})},mousedown:function(a){var c=this;if(!this.preventMousedownEvents&&(void 0===a.which||1===a.which)){var d=a.clientX,e=a.clientY,f=a.pointerId,k=function(a){a.pointerId==f&&(c.fire(a,d,e),w())},l=function(a){a.pointerId==f&&(5<=Math.abs(a.clientX-d)||5<=Math.abs(a.clientY-e))&&w()},w=function N(){c.node.removeEventListener("MSPointerUp",k,!1);document.removeEventListener("MSPointerMove",l,!1);document.removeEventListener("MSPointerCancel",N,!1);c.node.removeEventListener("pointerup",k,!1);
document.removeEventListener("pointermove",l,!1);document.removeEventListener("pointercancel",N,!1);c.node.removeEventListener("click",k,!1);document.removeEventListener("mousemove",l,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",k,!1),document.addEventListener("pointermove",l,!1),document.addEventListener("pointercancel",w,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",k,!1),document.addEventListener("MSPointerMove",l,!1),document.addEventListener("MSPointerCancel",
w,!1)):(this.node.addEventListener("click",k,!1),document.addEventListener("mousemove",l,!1));setTimeout(w,400)}},touchdown:function(){var a=this,c=event.touches[0],d=c.clientX,e=c.clientY,f=c.identifier,k=function(c){c.changedTouches[0].identifier===f&&(c.preventDefault(),a.preventMousedownEvents=!0,clearTimeout(a.preventMousedownTimeout),a.preventMousedownTimeout=setTimeout(function(){a.preventMousedownEvents=!1},400),a.fire(c,d,e));w()},x=function(a){1===a.touches.length&&a.touches[0].identifier===
f||w();a=a.touches[0];(5<=Math.abs(a.clientX-d)||5<=Math.abs(a.clientY-e))&&w()},w=function N(){a.node.removeEventListener("touchend",k,!1);window.removeEventListener("touchmove",x,!1);window.removeEventListener("touchcancel",N,!1)};this.node.addEventListener("touchend",k,!1);window.addEventListener("touchmove",x,!1);window.addEventListener("touchcancel",w,!1);setTimeout(w,400)},teardown:function(){var e=this.node;e.removeEventListener("pointerdown",a,!1);e.removeEventListener("MSPointerDown",a,!1);
e.removeEventListener("mousedown",a,!1);e.removeEventListener("touchstart",d,!1);e.removeEventListener("focus",c,!1)}};return function(a,c){return new f(a,c)}});(function(f,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):a(f.Ractive.events)})(this,function(f){function a(a,c){return function(d,e){function f(f){function k(){f.preventDefault();e({node:d,original:f})}(f.which||f.keyCode)===a&&(c?f[c]&&k():k())}d.addEventListener("keydown",f,!1);return{teardown:function(){d.removeEventListener("keydown",f,!1)}}}}var d=a(13),c=a(9),e=a(27),k=a(32),l=a(37),m=a(39),n=a(40),r=a(38),
v=a(13,"ctrlKey");f.enter=d;f.ctrlenter=v;f.tab=c;f.escape=e;f.space=k;f.leftarrow=l;f.rightarrow=m;f.downarrow=n;f.uparrow=r});/*
 Autolinker.js
 0.26.0

 Copyright(c) 2016 Gregory Jacobs <greg@greg-jacobs.com>
 MIT License

 https://github.com/gregjacobs/Autolinker.js
*/
(function(f,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?module.exports=a():f.Autolinker=a()})(this,function(){var f=function(a){a=a||{};this.version=f.version;this.urls=this.normalizeUrlsCfg(a.urls);this.email="boolean"===typeof a.email?a.email:!0;this.twitter="boolean"===typeof a.twitter?a.twitter:!0;this.phone="boolean"===typeof a.phone?a.phone:!0;this.hashtag=a.hashtag||!1;this.newWindow="boolean"===typeof a.newWindow?a.newWindow:!0;this.stripPrefix="boolean"===
typeof a.stripPrefix?a.stripPrefix:!0;var d=this.hashtag;if(!1!==d&&"twitter"!==d&&"facebook"!==d&&"instagram"!==d)throw Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(a.truncate);this.className=a.className||"";this.replaceFn=a.replaceFn||null;this.tagBuilder=this.matchers=this.htmlParser=null};f.link=function(a,d){return(new f(d)).link(a)};f.version="0.26.0";f.prototype={constructor:f,normalizeUrlsCfg:function(a){null==a&&(a=!0);return"boolean"===typeof a?{schemeMatches:a,
wwwMatches:a,tldMatches:a}:{schemeMatches:"boolean"===typeof a.schemeMatches?a.schemeMatches:!0,wwwMatches:"boolean"===typeof a.wwwMatches?a.wwwMatches:!0,tldMatches:"boolean"===typeof a.tldMatches?a.tldMatches:!0}},normalizeTruncateCfg:function(a){return"number"===typeof a?{length:a,location:"end"}:f.Util.defaults(a||{},{length:Number.POSITIVE_INFINITY,location:"end"})},parse:function(a){a=this.getHtmlParser().parse(a);for(var d=0,c=[],e=0,f=a.length;e<f;e++){var l=a[e],m=l.getType();"element"===
m&&"a"===l.getTagName()?l.isClosing()?d=Math.max(d-1,0):d++:"text"===m&&0===d&&(l=this.parseText(l.getText(),l.getOffset()),c.push.apply(c,l))}c=this.compactMatches(c);return c=this.removeUnwantedMatches(c)},compactMatches:function(a){a.sort(function(a,c){return a.getOffset()-c.getOffset()});for(var d=0;d<a.length-1;d++)for(var c=a[d],c=c.getOffset()+c.getMatchedText().length;d+1<a.length&&a[d+1].getOffset()<=c;)a.splice(d+1,1);return a},removeUnwantedMatches:function(a){var d=f.Util.remove;this.hashtag||
d(a,function(a){return"hashtag"===a.getType()});this.email||d(a,function(a){return"email"===a.getType()});this.phone||d(a,function(a){return"phone"===a.getType()});this.twitter||d(a,function(a){return"twitter"===a.getType()});this.urls.schemeMatches||d(a,function(a){return"url"===a.getType()&&"scheme"===a.getUrlMatchType()});this.urls.wwwMatches||d(a,function(a){return"url"===a.getType()&&"www"===a.getUrlMatchType()});this.urls.tldMatches||d(a,function(a){return"url"===a.getType()&&"tld"===a.getUrlMatchType()});
return a},parseText:function(a,d){d=d||0;for(var c=this.getMatchers(),e=[],f=0,l=c.length;f<l;f++){for(var m=c[f].parseMatches(a),n=0,r=m.length;n<r;n++)m[n].setOffset(d+m[n].getOffset());e.push.apply(e,m)}return e},link:function(a){if(!a)return"";for(var d=this.parse(a),c=[],e=0,f=0,l=d.length;f<l;f++){var m=d[f];c.push(a.substring(e,m.getOffset()));c.push(this.createMatchReturnVal(m));e=m.getOffset()+m.getMatchedText().length}c.push(a.substring(e));return c.join("")},createMatchReturnVal:function(a){var d;
this.replaceFn&&(d=this.replaceFn.call(this,this,a));return"string"===typeof d?d:!1===d?a.getMatchedText():d instanceof f.HtmlTag?d.toAnchorString():a.buildTag().toAnchorString()},getHtmlParser:function(){var a=this.htmlParser;a||(a=this.htmlParser=new f.htmlParser.HtmlParser);return a},getMatchers:function(){if(this.matchers)return this.matchers;var a=f.matcher,d=this.getTagBuilder();return this.matchers=[new a.Hashtag({tagBuilder:d,serviceName:this.hashtag}),new a.Email({tagBuilder:d}),new a.Phone({tagBuilder:d}),
new a.Twitter({tagBuilder:d}),new a.Url({tagBuilder:d,stripPrefix:this.stripPrefix})]},getTagBuilder:function(){var a=this.tagBuilder;a||(a=this.tagBuilder=new f.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className}));return a}};f.match={};f.matcher={};f.htmlParser={};f.truncate={};f.Util={abstractMethod:function(){throw"abstract";},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);return a},defaults:function(a,
d){for(var c in d)d.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=d[c]);return a},extend:function(a,d){var c=a.prototype,e=function(){};e.prototype=c;var k;k=d.hasOwnProperty("constructor")?d.constructor:function(){c.constructor.apply(this,arguments)};e=k.prototype=new e;e.constructor=k;e.superclass=c;delete d.constructor;f.Util.assign(e,d);return k},ellipsis:function(a,d,c){a.length>d&&(c=null==c?"..":c,a=a.substring(0,d-c.length)+c);return a},indexOf:function(a,d){if(Array.prototype.indexOf)return a.indexOf(d);
for(var c=0,e=a.length;c<e;c++)if(a[c]===d)return c;return-1},remove:function(a,d){for(var c=a.length-1;0<=c;c--)!0===d(a[c])&&a.splice(c,1)},splitAndCapture:function(a,d){if(!d.global)throw Error("`splitRegex` must have the 'g' flag set");for(var c=[],e=0,f;f=d.exec(a);)c.push(a.substring(e,f.index)),c.push(f[0]),e=f.index+f[0].length;c.push(a.substring(e));return c},trim:function(a){return a.replace(this.trimRegex,"")}};f.HtmlTag=f.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(a){f.Util.assign(this,
a);this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){this.tagName=a;return this},getTagName:function(){return this.tagName||""},setAttr:function(a,d){this.getAttrs()[a]=d;return this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(a){var d=this.getAttrs();f.Util.assign(d,a);return this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(a){var d=this.getClass(),c=this.whitespaceRegex,
e=f.Util.indexOf,d=d?d.split(c):[];for(a=a.split(c);c=a.shift();)-1===e(d,c)&&d.push(c);this.getAttrs()["class"]=d.join(" ");return this},removeClass:function(a){var d=this.getClass(),c=this.whitespaceRegex,e=f.Util.indexOf,d=d?d.split(c):[];a=a.split(c);for(var k;d.length&&(k=a.shift());)c=e(d,k),-1!==c&&d.splice(c,1);this.getAttrs()["class"]=d.join(" ");return this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},
setInnerHtml:function(a){this.innerHtml=a;return this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var a=this.getTagName(),d=this.buildAttrsStr();return["<",a,d?" "+d:"",">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),d=[],c;for(c in a)a.hasOwnProperty(c)&&d.push(c+'="'+a[c]+'"');return d.join(" ")}});f.RegexLib={alphaNumericCharsStr:"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
domainNameRegex:RegExp("[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19.\\-]*[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19\\-]"),
tldRegex:/(?:travelersinsurance|sandvikcoromant|kerryproperties|cancerresearch|weatherchannel|kerrylogistics|spreadbetting|international|wolterskluwer|lifeinsurance|construction|pamperedchef|scholarships|versicherung|bridgestone|creditunion|kerryhotels|investments|productions|blackfriday|enterprises|lamborghini|photography|motorcycles|williamhill|playstation|contractors|barclaycard|accountants|redumbrella|engineering|management|telefonica|protection|consulting|tatamotors|creditcard|vlaanderen|schaeffler|associates|properties|foundation|republican|bnpparibas|boehringer|eurovision|extraspace|industries|immobilien|university|technology|volkswagen|healthcare|restaurant|cuisinella|vistaprint|apartments|accountant|travelers|homedepot|institute|vacations|furniture|fresenius|insurance|christmas|bloomberg|solutions|barcelona|firestone|financial|kuokgroup|fairwinds|community|passagens|goldpoint|equipment|lifestyle|yodobashi|aquarelle|marketing|analytics|education|amsterdam|statefarm|melbourne|allfinanz|directory|microsoft|stockholm|montblanc|accenture|lancaster|landrover|everbank|istanbul|graphics|grainger|ipiranga|softbank|attorney|pharmacy|saarland|catering|airforce|yokohama|mortgage|frontier|mutuelle|stcgroup|memorial|pictures|football|symantec|cipriani|ventures|telecity|cityeats|verisign|flsmidth|boutique|cleaning|firmdale|clinique|clothing|redstone|infiniti|deloitte|feedback|services|broadway|plumbing|commbank|training|barclays|exchange|computer|brussels|software|delivery|barefoot|builders|business|bargains|engineer|holdings|download|security|helsinki|lighting|movistar|discount|hdfcbank|supplies|marriott|property|diamonds|capetown|partners|democrat|jpmorgan|bradesco|budapest|rexroth|zuerich|shriram|academy|science|support|youtube|singles|surgery|alibaba|statoil|dentist|schwarz|android|cruises|cricket|digital|markets|starhub|systems|courses|coupons|netbank|country|domains|corsica|network|neustar|realtor|lincoln|limited|schmidt|yamaxun|cooking|contact|auction|spiegel|liaison|leclerc|latrobe|lasalle|abogado|compare|lanxess|exposed|express|company|cologne|college|avianca|lacaixa|fashion|recipes|ferrero|komatsu|storage|wanggou|clubmed|sandvik|fishing|fitness|bauhaus|kitchen|flights|florist|flowers|watches|weather|temasek|samsung|bentley|forsale|channel|theater|frogans|theatre|okinawa|website|tickets|jewelry|gallery|tiffany|iselect|shiksha|brother|organic|wedding|genting|toshiba|origins|philips|hyundai|hotmail|hoteles|hosting|rentals|windows|cartier|bugatti|holiday|careers|whoswho|hitachi|panerai|caravan|reviews|guitars|capital|trading|hamburg|hangout|finance|stream|family|abbott|health|review|travel|report|hermes|hiphop|gratis|career|toyota|hockey|dating|repair|google|social|soccer|reisen|global|otsuka|giving|unicom|casino|photos|center|broker|rocher|orange|bostik|garden|insure|ryukyu|bharti|safety|physio|sakura|oracle|online|jaguar|gallup|piaget|tienda|futbol|pictet|joburg|webcam|berlin|office|juegos|kaufen|chanel|chrome|xihuan|church|tennis|circle|kinder|flickr|bayern|claims|clinic|viajes|nowruz|xperia|norton|yachts|studio|coffee|camera|sanofi|nissan|author|expert|events|comsec|lawyer|tattoo|viking|estate|villas|condos|realty|yandex|energy|emerck|virgin|vision|durban|living|school|coupon|london|taobao|natura|taipei|nagoya|luxury|walter|aramco|sydney|madrid|credit|maison|makeup|schule|market|anquan|direct|design|swatch|suzuki|alsace|vuelos|dental|alipay|voyage|shouji|voting|airtel|mutual|degree|supply|agency|museum|mobily|dealer|monash|select|mormon|active|moscow|racing|datsun|quebec|nissay|rodeo|email|gifts|works|photo|chloe|edeka|cheap|earth|vista|tushu|koeln|glass|shoes|globo|tunes|gmail|nokia|space|kyoto|black|ricoh|seven|lamer|sener|epson|cisco|praxi|trust|citic|crown|shell|lease|green|legal|lexus|ninja|tatar|gripe|nikon|group|video|wales|autos|gucci|party|nexus|guide|linde|adult|parts|amica|lixil|boats|azure|loans|locus|cymru|lotte|lotto|stada|click|poker|quest|dabur|lupin|nadex|paris|faith|dance|canon|place|gives|trade|skype|rocks|mango|cloud|boots|smile|final|swiss|homes|honda|media|horse|cards|deals|watch|bosch|house|pizza|miami|osaka|tours|total|xerox|coach|sucks|style|delta|toray|iinet|tools|money|codes|beats|tokyo|salon|archi|movie|baidu|study|actor|yahoo|store|apple|world|forex|today|bible|tmall|tirol|irish|tires|forum|reise|vegas|vodka|sharp|omega|weber|jetzt|audio|promo|build|bingo|chase|gallo|drive|dubai|rehab|press|solar|sale|beer|bbva|bank|band|auto|sapo|sarl|saxo|audi|asia|arte|arpa|army|yoga|ally|zara|scor|scot|sexy|seat|zero|seek|aero|adac|zone|aarp|maif|meet|meme|menu|surf|mini|mobi|mtpc|porn|desi|star|ltda|name|talk|navy|love|loan|live|link|news|limo|like|spot|life|nico|lidl|lgbt|land|taxi|team|tech|kred|kpmg|sony|song|kiwi|kddi|jprs|jobs|sohu|java|itau|tips|info|immo|icbc|hsbc|town|host|page|toys|here|help|pars|haus|guru|guge|tube|goog|golf|gold|sncf|gmbh|gift|ggee|gent|gbiz|game|vana|pics|fund|ford|ping|pink|fish|film|fast|farm|play|fans|fail|plus|skin|pohl|fage|moda|post|erni|dvag|prod|doha|prof|docs|viva|diet|luxe|site|dell|sina|dclk|show|qpon|date|vote|cyou|voto|read|coop|cool|wang|club|city|chat|cern|cash|reit|rent|casa|cars|care|camp|rest|call|cafe|weir|wien|rich|wiki|buzz|wine|book|bond|room|work|rsvp|shia|ruhr|blue|bing|shaw|bike|safe|xbox|best|pwc|mtn|lds|aig|boo|fyi|nra|nrw|ntt|car|gal|obi|zip|aeg|vin|how|one|ong|onl|dad|ooo|bet|esq|org|htc|bar|uol|ibm|ovh|gdn|ice|icu|uno|gea|ifm|bot|top|wtf|lol|day|pet|eus|wtc|ubs|tvs|aco|ing|ltd|ink|tab|abb|afl|cat|int|pid|pin|bid|cba|gle|com|cbn|ads|man|wed|ceb|gmo|sky|ist|gmx|tui|mba|fan|ski|iwc|app|pro|med|ceo|jcb|jcp|goo|dev|men|aaa|meo|pub|jlc|bom|jll|gop|jmp|mil|got|gov|win|jot|mma|joy|trv|red|cfa|cfd|bio|moe|moi|mom|ren|biz|aws|xin|bbc|dnp|buy|kfh|mov|thd|xyz|fit|kia|rio|rip|kim|dog|vet|nyc|bcg|mtr|bcn|bms|bmw|run|bzh|rwe|tel|stc|axa|kpn|fly|krd|cab|bnl|foo|crs|eat|tci|sap|srl|nec|sas|net|cal|sbs|sfr|sca|scb|csc|edu|new|xxx|hiv|fox|wme|ngo|nhk|vip|sex|frl|lat|yun|law|you|tax|soy|sew|om|ac|hu|se|sc|sg|sh|sb|sa|rw|ru|rs|ro|re|qa|py|si|pw|pt|ps|sj|sk|pr|pn|pm|pl|sl|sm|pk|sn|ph|so|pg|pf|pe|pa|zw|nz|nu|nr|np|no|nl|ni|ng|nf|sr|ne|st|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|su|mn|mm|ml|mk|mh|mg|me|sv|md|mc|sx|sy|ma|ly|lv|sz|lu|lt|ls|lr|lk|li|lc|lb|la|tc|kz|td|ky|kw|kr|kp|kn|km|ki|kh|tf|tg|th|kg|ke|jp|jo|jm|je|it|is|ir|tj|tk|tl|tm|iq|tn|to|io|in|im|il|ie|ad|sd|ht|hr|hn|hm|tr|hk|gy|gw|gu|gt|gs|gr|gq|tt|gp|gn|gm|gl|tv|gi|tw|tz|ua|gh|ug|uk|gg|gf|ge|gd|us|uy|uz|va|gb|ga|vc|ve|fr|fo|fm|fk|fj|vg|vi|fi|eu|et|es|er|eg|ee|ec|dz|do|dm|dk|vn|dj|de|cz|cy|cx|cw|vu|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|wf|bz|by|bw|bv|bt|bs|br|bo|bn|bm|bj|bi|ws|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ye|ar|aq|ao|am|al|yt|ai|za|ag|af|ae|zm|id)\b/};
f.AnchorTagBuilder=f.Util.extend(Object,{constructor:function(a){f.Util.assign(this,a)},build:function(a){return new f.HtmlTag({tagName:"a",attrs:this.createAttrs(a.getType(),a.getAnchorHref()),innerHtml:this.processAnchorText(a.getAnchorText())})},createAttrs:function(a,d){var c={href:d},e=this.createCssClass(a);e&&(c["class"]=e);this.newWindow&&(c.target="_blank",c.rel="noopener noreferrer");return c},createCssClass:function(a){var d=this.className;return d?d+" "+d+"-"+a:""},processAnchorText:function(a){return a=
this.doTruncate(a)},doTruncate:function(a){var d=this.truncate;if(!d||!d.length)return a;var c=d.length,d=d.location;return"smart"===d?f.truncate.TruncateSmart(a,c,".."):"middle"===d?f.truncate.TruncateMiddle(a,c,".."):f.truncate.TruncateEnd(a,c,"..")}});f.htmlParser.HtmlParser=f.Util.extend(Object,{htmlRegex:function(){var a=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,d=/[^\s\0"'>\/=\x01-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+a.source+")?";return new RegExp(["(?:<(!DOCTYPE)(?:\\s+(?:",d,"|",a.source+")",")*>)|(?:<(/)?(?:",
/!--([\s\S]+?)--/.source,"|(?:","("+/[0-9a-zA-Z][0-9a-zA-Z:]*/.source+")","(?:\\s*",d,")*\\s*/?))>)"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(a){for(var d=this.htmlRegex,c,e=0,f=[];null!==(c=d.exec(a));){var l=c[0],m=c[3],n=c[1]||c[4],r=!!c[2];c=c.index;var v=a.substring(e,c);v&&(e=this.parseTextAndEntityNodes(e,v),f.push.apply(f,e));m?f.push(this.createCommentNode(c,l,m)):f.push(this.createElementNode(c,l,n,r));e=c+
l.length}e<a.length&&(a=a.substring(e))&&(e=this.parseTextAndEntityNodes(e,a),f.push.apply(f,e));return f},parseTextAndEntityNodes:function(a,d){for(var c=[],e=f.Util.splitAndCapture(d,this.htmlCharacterEntitiesRegex),k=0,l=e.length;k<l;k+=2){var m=e[k],n=e[k+1];m&&(c.push(this.createTextNode(a,m)),a+=m.length);n&&(c.push(this.createEntityNode(a,n)),a+=n.length)}return c},createCommentNode:function(a,d,c){return new f.htmlParser.CommentNode({offset:a,text:d,comment:f.Util.trim(c)})},createElementNode:function(a,
d,c,e){return new f.htmlParser.ElementNode({offset:a,text:d,tagName:c.toLowerCase(),closing:e})},createEntityNode:function(a,d){return new f.htmlParser.EntityNode({offset:a,text:d})},createTextNode:function(a,d){return new f.htmlParser.TextNode({offset:a,text:d})}});f.htmlParser.HtmlNode=f.Util.extend(Object,{offset:void 0,text:void 0,constructor:function(a){f.Util.assign(this,a);if(null==this.offset)throw Error("`offset` cfg required");if(null==this.text)throw Error("`text` cfg required");},getType:f.Util.abstractMethod,
getOffset:function(){return this.offset},getText:function(){return this.text}});f.htmlParser.CommentNode=f.Util.extend(f.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}});f.htmlParser.ElementNode=f.Util.extend(f.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}});f.htmlParser.EntityNode=f.Util.extend(f.htmlParser.HtmlNode,
{getType:function(){return"entity"}});f.htmlParser.TextNode=f.Util.extend(f.htmlParser.HtmlNode,{getType:function(){return"text"}});f.match.Match=f.Util.extend(Object,{constructor:function(a){if(null==a.tagBuilder)throw Error("`tagBuilder` cfg required");if(null==a.matchedText)throw Error("`matchedText` cfg required");if(null==a.offset)throw Error("`offset` cfg required");this.tagBuilder=a.tagBuilder;this.matchedText=a.matchedText;this.offset=a.offset},getType:f.Util.abstractMethod,getMatchedText:function(){return this.matchedText},
setOffset:function(a){this.offset=a},getOffset:function(){return this.offset},getAnchorHref:f.Util.abstractMethod,getAnchorText:f.Util.abstractMethod,buildTag:function(){return this.tagBuilder.build(this)}});f.match.Email=f.Util.extend(f.match.Match,{constructor:function(a){f.match.Match.prototype.constructor.call(this,a);if(!a.email)throw Error("`email` cfg required");this.email=a.email},getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+
this.email},getAnchorText:function(){return this.email}});f.match.Hashtag=f.Util.extend(f.match.Match,{constructor:function(a){f.match.Match.prototype.constructor.call(this,a);if(!a.hashtag)throw Error("`hashtag` cfg required");this.serviceName=a.serviceName;this.hashtag=a.hashtag},getType:function(){return"hashtag"},getServiceName:function(){return this.serviceName},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var a=this.serviceName,d=this.hashtag;switch(a){case "twitter":return"https://twitter.com/hashtag/"+
d;case "facebook":return"https://www.facebook.com/hashtag/"+d;case "instagram":return"https://instagram.com/explore/tags/"+d;default:throw Error("Unknown service name to point hashtag to: ",a);}},getAnchorText:function(){return"#"+this.hashtag}});f.match.Phone=f.Util.extend(f.match.Match,{constructor:function(a){f.match.Match.prototype.constructor.call(this,a);if(!a.number)throw Error("`number` cfg required");if(null==a.plusSign)throw Error("`plusSign` cfg required");this.number=a.number;this.plusSign=
a.plusSign},getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+(this.plusSign?"+":"")+this.number},getAnchorText:function(){return this.matchedText}});f.match.Twitter=f.Util.extend(f.match.Match,{constructor:function(a){f.match.Match.prototype.constructor.call(this,a);if(!a.twitterHandle)throw Error("`twitterHandle` cfg required");this.twitterHandle=a.twitterHandle},getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},
getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}});f.match.Url=f.Util.extend(f.match.Match,{constructor:function(a){f.match.Match.prototype.constructor.call(this,a);if("scheme"!==a.urlMatchType&&"www"!==a.urlMatchType&&"tld"!==a.urlMatchType)throw Error('`urlMatchType` cfg must be one of: "scheme", "www", or "tld"');if(!a.url)throw Error("`url` cfg required");if(null==a.protocolUrlMatch)throw Error("`protocolUrlMatch` cfg required");
if(null==a.protocolRelativeMatch)throw Error("`protocolRelativeMatch` cfg required");if(null==a.stripPrefix)throw Error("`stripPrefix` cfg required");this.urlMatchType=a.urlMatchType;this.url=a.url;this.protocolUrlMatch=a.protocolUrlMatch;this.protocolRelativeMatch=a.protocolRelativeMatch;this.stripPrefix=a.stripPrefix},urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrlMatchType:function(){return this.urlMatchType},getUrl:function(){var a=
this.url;this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0);return a},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var a=this.getMatchedText();this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a));this.stripPrefix&&(a=this.stripUrlPrefix(a));return a=this.removeTrailingSlash(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,
"")},removeTrailingSlash:function(a){"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1));return a}});f.matcher.Matcher=f.Util.extend(Object,{constructor:function(a){if(!a.tagBuilder)throw Error("`tagBuilder` cfg required");this.tagBuilder=a.tagBuilder},parseMatches:f.Util.abstractMethod});f.matcher.Email=f.Util.extend(f.matcher.Matcher,{matcherRegex:new RegExp([(new RegExp("["+f.RegexLib.alphaNumericCharsStr+"\\-;:&=+$.,]+@")).source,f.RegexLib.domainNameRegex.source,"\\.",f.RegexLib.tldRegex.source].join(""),
"gi"),parseMatches:function(a){for(var d=this.matcherRegex,c=this.tagBuilder,e=[],k;null!==(k=d.exec(a));){var l=k[0];e.push(new f.match.Email({tagBuilder:c,matchedText:l,offset:k.index,email:l}))}return e}});f.matcher.Hashtag=f.Util.extend(f.matcher.Matcher,{matcherRegex:new RegExp("#[_"+f.RegexLib.alphaNumericCharsStr+"]{1,139}","g"),nonWordCharRegex:new RegExp("[^"+f.RegexLib.alphaNumericCharsStr+"]"),constructor:function(a){f.matcher.Matcher.prototype.constructor.call(this,a);this.serviceName=
a.serviceName},parseMatches:function(a){for(var d=this.matcherRegex,c=this.nonWordCharRegex,e=this.serviceName,k=this.tagBuilder,l=[],m;null!==(m=d.exec(a));){var n=m.index,r=a.charAt(n-1);if(0===n||c.test(r))r=m[0],m=m[0].slice(1),l.push(new f.match.Hashtag({tagBuilder:k,matchedText:r,offset:n,serviceName:e,hashtag:m}))}return l}});f.matcher.Phone=f.Util.extend(f.matcher.Matcher,{matcherRegex:/(?:(\+)?\d{1,3}[-\040.])?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]\d{4}/g,parseMatches:function(a){for(var d=this.matcherRegex,
c=this.tagBuilder,e=[],k;null!==(k=d.exec(a));){var l=k[0],m=l.replace(/\D/g,"");e.push(new f.match.Phone({tagBuilder:c,matchedText:l,offset:k.index,number:m,plusSign:!!k[1]}))}return e}});f.matcher.Twitter=f.Util.extend(f.matcher.Matcher,{matcherRegex:new RegExp("@[_"+f.RegexLib.alphaNumericCharsStr+"]{1,20}","g"),nonWordCharRegex:new RegExp("[^"+f.RegexLib.alphaNumericCharsStr+"]"),parseMatches:function(a){for(var d=this.matcherRegex,c=this.nonWordCharRegex,e=this.tagBuilder,k=[],l;null!==(l=d.exec(a));){var m=
l.index,n=a.charAt(m-1);if(0===m||c.test(n))n=l[0],l=l[0].slice(1),k.push(new f.match.Twitter({tagBuilder:e,matchedText:n,offset:m,twitterHandle:l}))}return k}});f.matcher.Url=f.Util.extend(f.matcher.Matcher,{matcherRegex:function(){var a=f.RegexLib.domainNameRegex,d=f.RegexLib.alphaNumericCharsStr;return new RegExp(["(?:(",/(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,a.source,")|((//)?",/(?:www\.)/.source,a.source,")|((//)?",a.source+"\\.",f.RegexLib.tldRegex.source,
"))","(?:"+(new RegExp("["+d+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;]*["+d+"\\-+&@#/%=~_()|'$*\\[\\]]")).source+")?"].join(""),"gi")}(),wordCharRegExp:/\w/,openParensRe:/\(/g,closeParensRe:/\)/g,constructor:function(a){f.matcher.Matcher.prototype.constructor.call(this,a);this.stripPrefix=a.stripPrefix;if(null==this.stripPrefix)throw Error("`stripPrefix` cfg required");},parseMatches:function(a){for(var d=this.matcherRegex,c=this.stripPrefix,e=this.tagBuilder,k=[],l;null!==(l=d.exec(a));){var m=l[0],n=l[1],
r=l[2],v=l[5],q=l.index;l=l[3]||v;v=a.charAt(q-1);!f.matcher.UrlMatchValidator.isValid(m,n)||0<q&&"@"===v||0<q&&l&&this.wordCharRegExp.test(v)||(this.matchHasUnbalancedClosingParen(m)?m=m.substr(0,m.length-1):(v=this.matchHasInvalidCharAfterTld(m,n),-1<v&&(m=m.substr(0,v))),k.push(new f.match.Url({tagBuilder:e,matchedText:m,offset:q,urlMatchType:n?"scheme":r?"www":"tld",url:m,protocolUrlMatch:!!n,protocolRelativeMatch:!!l,stripPrefix:c})))}return k},matchHasUnbalancedClosingParen:function(a){if(")"===
a.charAt(a.length-1)){var d=a.match(this.openParensRe);a=a.match(this.closeParensRe);if((d&&d.length||0)<(a&&a.length||0))return!0}return!1},matchHasInvalidCharAfterTld:function(a,d){if(!a)return-1;var c=0;d&&(c=a.indexOf(":"),a=a.slice(c));var e=/^((.?\/\/)?[A-Za-z0-9\u00C0-\u017F\.\-]*[A-Za-z0-9\u00C0-\u017F\-]\.[A-Za-z]+)/.exec(a);if(null===e)return-1;c+=e[1].length;a=a.slice(e[1].length);return/^[^.A-Za-z:\/?#]/.test(a)?c:-1}});f.matcher.UrlMatchValidator={hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,
uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z\u00C0-\u017F]/,isValid:function(a,d){return d&&!this.isValidUriScheme(d)||this.urlMatchDoesNotHaveProtocolOrDot(a,d)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,d)?!1:!0},isValidUriScheme:function(a){a=a.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==a&&"vbscript:"!==a},urlMatchDoesNotHaveProtocolOrDot:function(a,d){return!!a&&(!d||!this.hasFullProtocolRegex.test(d))&&-1===a.indexOf(".")},
urlMatchDoesNotHaveAtLeastOneWordChar:function(a,d){return a&&d?!this.hasWordCharAfterProtocolRegex.test(a):!1}};f.truncate.TruncateEnd=function(a,d,c){return f.Util.ellipsis(a,d,c)};f.truncate.TruncateMiddle=function(a,d,c){if(a.length<=d)return a;var e=d-c.length,f="";0<e&&(f=a.substr(-1*Math.floor(e/2)));return(a.substr(0,Math.ceil(e/2))+c+f).substr(0,d)};f.truncate.TruncateSmart=function(a,d,c){var e=function(a){var c="";a.scheme&&a.host&&(c+=a.scheme+"://");a.host&&(c+=a.host);a.path&&(c+="/"+
a.path);a.query&&(c+="?"+a.query);a.fragment&&(c+="#"+a.fragment);return c},f=function(a,d){var e=d/2,f=Math.ceil(e),e=-1*Math.floor(e),k="";0>e&&(k=a.substr(e));return a.substr(0,f)+c+k};if(a.length<=d)return a;var l=d-c.length,m=function(a){var c={},d=a.match(/^([a-z]+):\/\//i);d&&(c.scheme=d[1],a=a.substr(d[0].length));if(d=a.match(/^(.*?)(?=(\?|#|\/|$))/i))c.host=d[1],a=a.substr(d[0].length);if(d=a.match(/^\/(.*?)(?=(\?|#|$))/i))c.path=d[1],a=a.substr(d[0].length);if(d=a.match(/^\?(.*?)(?=(#|$))/i))c.query=
d[1],a=a.substr(d[0].length);if(d=a.match(/^#(.*?)$/i))c.fragment=d[1];return c}(a);if(m.query){var n=m.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);n&&(m.query=m.query.substr(0,n[1].length),a=e(m))}if(a.length<=d)return a;m.host&&(m.host=m.host.replace(/^www\./,""),a=e(m));if(a.length<=d)return a;a="";m.host&&(a+=m.host);if(a.length>=l)return m.host.length==d?(m.host.substr(0,d-c.length)+c).substr(0,d):f(a,l).substr(0,d);e="";m.path&&(e+="/"+m.path);m.query&&(e+="?"+m.query);if(e){if((a+e).length>=l)return(a+
e).length==d?(a+e).substr(0,d):(a+f(e,l-a.length)).substr(0,d);a+=e}if(m.fragment){e="#"+m.fragment;if((a+e).length>=l)return(a+e).length==d?(a+e).substr(0,d):(a+f(e,l-a.length)).substr(0,d);a+=e}if(m.scheme&&m.host&&(f=m.scheme+"://",(a+f).length<l))return(f+a).substr(0,d);if(a.length<=d)return a;f="";0<l&&(f=a.substr(-1*Math.floor(l/2)));return(a.substr(0,Math.ceil(l/2))+c+f).substr(0,d)};return f});(function(f){function a(){}function d(a,c){return function(){a.apply(c,arguments)}}function c(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];r(a,this)}function e(a,d){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(d):(a._handled=!0,c._immediateFn(function(){var c=1===a._state?d.onFulfilled:d.onRejected;if(null===
c)(1===a._state?k:l)(d.promise,a._value);else{var e;try{e=c(a._value)}catch(N){l(d.promise,N);return}k(d.promise,e)}}))}function k(a,e){try{if(e===a)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var f=e.then;if(e instanceof c){a._state=3;a._value=e;m(a);return}if("function"===typeof f){r(d(f,e),a);return}}a._state=1;a._value=e;m(a)}catch(J){l(a,J)}}function l(a,c){a._state=2;a._value=c;m(a)}function m(a){2===a._state&&0===a._deferreds.length&&
c._immediateFn(function(){a._handled||c._unhandledRejectionFn(a._value)});for(var d=0,f=a._deferreds.length;d<f;d++)e(a,a._deferreds[d]);a._deferreds=null}function n(a,c,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof c?c:null;this.promise=d}function r(a,c){var d=!1;try{a(function(a){d||(d=!0,k(c,a))},function(a){d||(d=!0,l(c,a))})}catch(J){d||(d=!0,l(c,J))}}var v=setTimeout;c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(c,
d){var f=new this.constructor(a);e(this,new n(c,d,f));return f};c.all=function(a){var d=Array.prototype.slice.call(a);return new c(function(a,c){function e(k,l){try{if(l&&("object"===typeof l||"function"===typeof l)){var m=l.then;if("function"===typeof m){m.call(l,function(a){e(k,a)},c);return}}d[k]=l;0===--f&&a(d)}catch(Ua){c(Ua)}}if(0===d.length)return a([]);for(var f=d.length,k=0;k<d.length;k++)e(k,d[k])})};c.resolve=function(a){return a&&"object"===typeof a&&a.constructor===c?a:new c(function(c){c(a)})};
c.reject=function(a){return new c(function(c,d){d(a)})};c.race=function(a){return new c(function(c,d){for(var e=0,f=a.length;e<f;e++)a[e].then(c,d)})};c._immediateFn="function"===typeof setImmediate&&function(a){setImmediate(a)}||function(a){v(a,0)};c._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};c._setImmediateFn=function(a){c._immediateFn=a};c._setUnhandledRejectionFn=function(a){c._unhandledRejectionFn=a};"undefined"!==
typeof module&&module.exports?module.exports=c:f.Promise||(f.Promise=c)})(this);window.SECU=window.SECU||{};
window.SECU.Ajax={_data:{url:{api:{host:"https://api.secu.su",port:"3000",feedback:"/feedback",post:"/s",get:"/s/",stat:"/stat",chat:"/r"},web:{host:"https://secu.su",page:"/",chat:"/c/"}}},assignHost:function(){var f=this._data,a=window.location.host;"secu.su"!==window.location.host&&(f.url.api.host="http://api-test.secu.su",f.url.api.port="7001",f.url.web.host=a)},call:function(f){return new Promise(function(a,d){var c=new XMLHttpRequest;c.open(f.method,f.url,!0);f.contentType&&c.setRequestHeader("Content-type",
f.contentType);c.send(f.data);c.onload=function(){200<=this.status&&300>this.status?a(this.response):d(this.statusText)};c.onerror=function(){d(this.statusText)}})},sendFeedback:function(f){var a=this._data;return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(f),url:a.url.api.host+a.url.api.feedback})},requestContainer:function(f){var a=this._data;return this.call({method:"GET",url:a.url.api.host+a.url.api.get+f})},sendContainer:function(f){var a=this._data;
return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(f),url:a.url.api.host+a.url.api.post})}};window.SECU=window.SECU||{};
window.SECU.Socket={_data:{},initStats:function(){var f=this._data;f.stats=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port,{secure:!0});f.stats.on("secu-channel:App\\Events\\SecuWasCreated",function(a){window.SECU.App.refreshCount(a.id)})},initChat:function(){var f=this._data,a=window.SECU.App._data.app;f.chat=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port+"/c",{secure:!0});f.chat.on("connect",function(){window.SECU.Chat.enable()});
f.chat.on("reconnect",function(){window.SECU.Chat.enable()});f.chat.on("connecting",function(){window.SECU.Chat.disable()});f.chat.on("reconnecting",function(){window.SECU.Chat.disable()});f.chat.on("reconnect_failed",function(){window.SECU.Chat.disable()});f.chat.on("disconnect",function(){window.SECU.Chat.disable()});f.chat.on("connect_failed",function(){window.SECU.Chat.disable()});f.chat.on("connect_error",function(){window.SECU.Chat.disable()});f.chat.on("close",function(){window.SECU.Chat.disable()});
f.chat.on("error",function(){window.SECU.Chat.disable()});f.chat.on("room.create",function(d){d.success?(a.set("chat.form.room",d.room),window.SECU.Chat.join(a.get("chat.form"))):(a.set("chat.formDisabled",!1),a.set("chat.formActive",!0),window.SECU.Error.show(d.errors))});f.chat.on("room.join",function(d){d.success?d.hasOwnProperty("key")?(a.set("chat.formDisabled",!1),window.SECU.Chat.start(d)):window.SECU.Chat.appendData({sender:"SYS",data:{text:d.name+" joined the room"}}):(a.set("chat.formDisabled",
!1),a.set("chat.formActive",!0),window.SECU.Error.show(d.errors))});f.chat.on("room.join.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});f.chat.on("room.data.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});f.chat.on("room.leave",function(a){a.success?a.self||window.SECU.Chat.appendData({sender:"SYS",data:{text:a.name+" left the room"}}):window.SECU.Error.show(a.errors)});f.chat.on("room.roster",function(a){a=window.SECU.Chat.sortRoster(a);
window.SECU.Chat.refreshRoster(a)});f.chat.on("room.data",function(a){a.hasOwnProperty("sender")&&a.hasOwnProperty("data")?window.SECU.Chat.appendData(a):window.SECU.Chat.appendOwnData(a)})},init:function(){this.initStats();this.initChat()}};window.SECU=window.SECU||{};
window.SECU.Crypt={_data:{encryptionParameters:{iterations:4096,keySize:256,authenticationStrength:128,authenticatedData:"S\u00cbCU",cipherMode:"gcm"}},getRandomHexValue:function(f,a){return sjcl.random.randomWords(f,a)},decrypt:function(f){return sjcl.decrypt(f.password,f.message,{},{})},encrypt:function(f){var a=this._data.encryptionParameters,a={adata:a.authenticatedData+"-"+(new Date).getTime(),iter:a.iterations,mode:a.cipherMode,ts:a.authenticationStrength,ks:a.keySize,iv:this.getRandomHexValue(4,
0),salt:this.getRandomHexValue(2,0)};return sjcl.encrypt(f.password,f.message,a,{})}};window.SECU=window.SECU||{};
window.SECU.Helpers={_data:{},getHumanTime:function(f){function a(a){1===a.toString().length&&(a="0"+a);return a}f=new Date(f);return a(f.getHours())+":"+a(f.getMinutes())},checkVisibility:function(){var f=window.SECU.App._data.app;switch(document.visibilityState){case "hidden":f.set("windowFocused",!1);break;default:f.set("windowFocused",!0)}},watchWindowFocus:function(){document.addEventListener("visibilitychange",this.checkVisibility)},parseNewLines:function(f){return f=f.replace(/(?:\r\n|\r|\n)/g,
"<br>")},convertToPlainText:function(f){return f.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})},getPosition:function(f){f=f.getBoundingClientRect();var a=document.body,d=document.documentElement;return{top:Math.round(f.top+(window.pageYOffset||d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0)),left:Math.round(f.left+(window.pageXOffset||d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0))}},generateTimestamp:function(f){return(f?
new Date(f):new Date).getTime()},watchResize:function(){window.addEventListener("resize",this.fixChatFeedHeight,!1)},dockNavbar:function(f){window.SECU.App._data.app.set("dock.navbar",f)},watchScroll:function(){var f=this._data,a=window.SECU.App._data.app;f.nav={};f.nav.spacer=document.getElementsByClassName("navbar-spacer")[0];window.addEventListener("scroll",function(d){if(!a.get("show.chat")||a.get("chat.formActive"))document.body.scrollTop>f.nav.spacer.offsetTop?window.SECU.Helpers.dockNavbar(!0):
window.SECU.Helpers.dockNavbar(!1)},!1)},watchDragDrop:function(){function f(c){c.preventDefault();clearTimeout(d.dropTimeout);var e=null,f=null,l=null;switch(c.type){case "dragenter":case "dragover":a.set("dropActive",!0);d.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "dragleave":d.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "drop":a.set("dropActive",!1),l=c.dataTransfer.files,document.getElementById("chatFile")?(e="room",f="chat.room.rawFile"):
document.getElementById("messageFile")&&(e="encrypt",f="encrypt.rawFile"),l.length&&e&&f&&(a.set(f,[c.dataTransfer.files[0]]),a.fire("checkFile",e))}}var a=window.SECU.App._data.app,d=this._data;a.get("supportedFeatures.dragdrop")&&(document.body.addEventListener("dragover",f,!1),document.body.addEventListener("dragenter",f,!1),document.body.addEventListener("dragleave",f,!1),document.body.addEventListener("drop",f,!1))},checkLocation:function(){var f;-1<window.location.pathname.indexOf("/c/")?(f=
window.location.pathname.substring(3),f.length&&window.SECU.App._data.app.set("chat.form.room",f),window.SECU.App._data.app.fire("toggleView","chat")):(f=window.location.pathname.substring(1),f.length&&window.SECU.App._data.app.set("decrypt.hash",f))},checkNotification:function(){window.SECU.App._data.app.set("supportedFeatures.notification","Notification"in window)},checkCopy:function(){window.SECU.App._data.app.set("supportedFeatures.copy",document.queryCommandSupported("copy"))},checkDownload:function(){window.SECU.App._data.app.set("supportedFeatures.download",
"download"in document.createElement("a"))},checkDragDrop:function(){var f=document.createElement("div");window.SECU.App._data.app.set("supportedFeatures.dragdrop","ondragstart"in f&&"ondrop"in f)},fixChatFeedHeight:function(){var f=window.SECU.Helpers,a=document.getElementById("chat-feed-block"),d=document.getElementById("chat-form-block"),c=window.SECU.Chat.scrolledToBottom();a&&(a.style.height="0px",a.style.height=f.getPosition(d).top-f.getPosition(a).top+"px",c&&window.SECU.Chat.updateScroll("bottom"))},
fixTextareaHeight:function(f,a){var d=window.SECU.App._data.app,c=f?f.node:document.getElementById(a+"ContainerBody"),e=getComputedStyle(c).getPropertyValue("border-width"),e=e.length?parseInt(e,10):1;d.set(a+".textareaHeight","0px");c.scrollHeight>c.offsetHeight&&d.set(a+".textareaHeight",c.scrollHeight+2*e+"px")},copyText:function(f){f.select();document.execCommand("copy");f.blur();window.getSelection().removeAllRanges()},formatCounter:function(f){f=parseInt(f,10);return f.toLocaleString()}};window.SECU=window.SECU||{};
window.SECU.File={_data:{maxFileSize:1572864},base64ToBlob:function(f){var a=atob(f.split(",")[1]);f=f.split(",")[0].split(":")[1].split(";")[0];for(var d=new ArrayBuffer(a.length),c=new Uint8Array(d),e=0;e<a.length;e++)c[e]=a.charCodeAt(e);a=new Blob([d],{type:f});return URL.createObjectURL(a)},fileToBase64:function(f){var a=new FileReader;return new Promise(function(d,c){try{a.onload=function(a){d(a.target.result)},a.readAsDataURL(f)}catch(e){c(e)}})},getExtension:function(f){return f.split(".").pop()},prettifySize:function(f){f=
Math.round(f/1E3);return f=1E3<=f?(f/1E3).toFixed(1)+"MB":f+"KB"},validated:function(f){return(f=f[0])?f.size>this._data.maxFileSize?["The file is too big"]:f:!1}};window.SECU=window.SECU||{};window.SECU.Error={_data:{},show:function(f){var a=window.SECU.Error,d=a._data,c=window.SECU.App._data.app;c.set("errors.messages",f);c.set("errors.show",!0);clearTimeout(d.errorTimeout);d.errorTimeout=setTimeout(function(){a.hide()},3E3)},hide:function(){var f=window.SECU.Error._data;window.SECU.App._data.app.set("errors.show",!1);clearTimeout(f.errorTimeout)}};window.SECU=window.SECU||{};
window.SECU.Chat={_data:{sentQueue:[]},unreadPos:function(){var f=this.getChat().getElementsByClassName("unread");return f[f.length-1].offsetTop},watchFeedScroll:function(f){function a(a){c.set("chat.room.unread",!1);c.set("chat.room.scrolled",d.scrolledToBottom())}var d=this,c=window.SECU.App._data.app,e=this.getChat();e&&(f?e.removeEventListener("scroll",a,!1):e.addEventListener("scroll",a,!1))},logout:function(f){window.SECU.Socket._data.chat.emit("room.leave",f)},sortRoster:function(f){var a=window.SECU.App._data.app.get("chat.room.connection.name"),
d=null;if(1===f.length||f[0].name===a)return f;for(var c=0;c<f.length;c++)if(f[c].name===a){d=f[c];f.splice(c,1);break}f.unshift(d);return f},addSentQueue:function(f){this._data.sentQueue.push(JSON.parse(JSON.stringify(f)))},extractSentQueue:function(f){for(var a=this._data.sentQueue,d=null,c=0;c<a.length;c++)if(a[c].sent_at===f){d=a[c];break}a.splice(c,1);d.sender=window.SECU.App._data.app.get("chat.room.connection.name");return d},getChat:function(){var f=document.getElementById("chat-feed-block");
return f?f.children[0]:!1},scrollPresent:function(){var f=this.getChat();return f?f.scrollHeight===f.offsetHeight?!1:!0:!1},scrolledToBottom:function(){var f=this.getChat();return f?f.scrollTop>=f.scrollHeight-f.offsetHeight?!0:!1:!1},updateScroll:function(f){var a=this.getChat();if(a){switch(f){case "top":f=0;break;case "bottom":f=a.scrollHeight}a.scrollTop=f}},decryptData:function(f){var a="",d=[];if("string"!==typeof f.text)try{a=window.SECU.Crypt.decrypt({message:JSON.stringify(f.text),password:window.SECU.App._data.app.get("chat.room.connection.key")})}catch(c){a=
"Error. Couldn't decrypt text data."}else a=f.text;f.files&&f.files.length&&(f=f.files[0],d[0]={name:f.name,extension:window.SECU.File.getExtension(f.name)},d[0].data="string"===typeof f.data?window.SECU.File.base64ToBlob(f.data):window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt({message:JSON.stringify(f.data),password:window.SECU.App._data.app.get("chat.room.connection.key")})));return{text:a,files:d}},appendOwnData:function(f){this.appendData(this.extractSentQueue(f.sent_at))},appendData:function(f){var a=
window.SECU.App._data.app,d=this.scrolledToBottom(),c=a.get("windowFocused");f.data=this.decryptData(f.data);f.data.text=window.SECU.Helpers.convertToPlainText(f.data.text);f.data.text=window.SECU.Helpers.parseNewLines(f.data.text);f.data.text=window.SECU.Helpers.Autolinker.link(f.data.text);f.delivered_at=f.delivered_at||window.SECU.Helpers.generateTimestamp();a.get("chat.room.unread")||c&&a.get("show.chat")&&(!this.scrollPresent()||d)||(a.set("chat.room.feed.*.unread",!1),f.unread=!0);a.push("chat.room.feed",
f);c?f.sender===a.get("chat.room.connection.name")||d?(a.set("chat.room.feed.*.unread",!1),this.updateScroll("bottom")):!this.scrollPresent()&&a.get("show.chat")||a.set("chat.room.unread",!0):(a.set("chat.room.unread",!0),a.set("chat.room.scrolled",this.scrolledToBottom()));a.get("supportedFeatures.notification")&&!c&&window.SECU.Notifications.fire({body:"SYS"===f.sender?f.data.text:f.sender+" has sent a message"})},sendData:function(f){window.SECU.Socket._data.chat.emit("room.data",f)},refreshRoster:function(f){window.SECU.App._data.app.set("chat.room.roster",
f)},join:function(f){window.SECU.Socket._data.chat.emit("room.join",f)},create:function(f){window.SECU.Socket._data.chat.emit("room.create",{password:f.password})},enable:function(){window.SECU.App._data.app.set("chat.enabled",!0)},disable:function(){var f=window.SECU.App._data.app;f.get("show.chat")&&window.SECU.App._data.app.fire("toggleView","main");f.get("chat.room.connection.key").length&&(window.SECU.App.reinitApp("chat"),window.SECU.Error.show(["Connection error"]));f.set("chat.enabled",!1);
this.watchFeedScroll(!0)},start:function(f){var a=window.SECU.App._data.app,d=window.SECU.Ajax._data.url,c=a.get("chat.form.room");a.set("chat.done",!0);a.set("chat.room.connection",{link:d.web.host+d.web.chat+c,room:c,name:f.name,key:f.key});this.appendData({sender:"SYS",data:{text:f.name+" joined the room"}});a.set("chat.formActive",!1);a.set("chat.form",{room:"",password:""});a.set("dock.chat",!0);window.SECU.Helpers.dockNavbar(!0);setTimeout(function(){window.SECU.Helpers.fixChatFeedHeight()},
0);this.watchFeedScroll();a.get("supportedFeatures.notification")&&window.SECU.Notifications.init()},init:function(){window.SECU.Helpers.fixChatFeedHeight();this.watchFeedScroll();window.SECU.App._data.app.get("chat.room.unread")?this.updateScroll(this.unreadPos()):this.updateScroll("bottom")}};window.SECU=window.SECU||{};
window.SECU.Notifications={_data:{active:null,activeTimeout:null,timeout:4E3},fire:function(f){if("granted"===Notification.permission){var a=this._data;clearTimeout(a.activeTimeout);a.active&&(f.vibrate=200);f.tag="SECU_SYS";f.icon="/images/secu.png";a.active=new Notification("S\u00cbCU",f);a.activeTimeout=setTimeout(function(){a.active.close();a.active=null},a.timeout)}},init:function(){if("denied"!==Notification.permission){var f=this;"granted"!==Notification.permission&&Notification.requestPermission(function(a){"granted"===
a&&f.fire({body:"Thanks!"})})}}};Ractive.DEBUG="secu.su"===window.location.host?!1:!0;window.SECU=window.SECU||{};
window.SECU.App={_data:{params:{encrypt:{done:!1,link:"",formActive:!0,formDisabled:!1,rawFile:[],fileData:{size:"",name:"",extension:""},file:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},decrypt:{done:!1,success:!0,hash:"",loaded:!1,formDisabled:!1,formActive:!1,message:"",files:[],fileForm:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},feedback:{formDisabled:!1,sent:!1,form:{body:"",email:""},textareaHeight:"0px"},chat:{enabled:!1,done:!1,
formDisabled:!1,formActive:!0,room:{scrolled:!0,unread:!1,connection:{link:"",room:"",name:"",key:""},feed:[],roster:[],rawFile:[],fileData:{size:"",name:"",extension:""},input:{text:"",file:""},feedHeight:"0px"},form:{room:"",password:""}}}},reinitApp:function(f){var a=this._data,d=a.app;d.set("textCopied",!1);d.set("dropActive",!1);f&&(window.SECU.Error.hide(),history.replaceState({},"S\u00ebcu","/"));switch(f){case "package":d.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt)));d.set("encrypt",
JSON.parse(JSON.stringify(a.params.encrypt)));break;case "feedback":d.set("feedback",JSON.parse(JSON.stringify(a.params.feedback)));break;case "chat":d.set("chat",JSON.parse(JSON.stringify(a.params.chat)));break;default:d.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt))),d.set("encrypt",JSON.parse(JSON.stringify(a.params.encrypt))),d.set("feedback",JSON.parse(JSON.stringify(a.params.feedback))),d.set("chat",JSON.parse(JSON.stringify(a.params.chat)))}},refreshCount:function(f){var a=this._data;
a.app.set("counter.number",window.SECU.Helpers.formatCounter(f));a.app.set("counter.show",!0)},init:function(){var f=this,a=this._data,d=new Ractive({el:document.getElementsByClassName("secuApp")[0],template:"#secuApp",data:{windowFocused:!0,dock:{navbar:!1,chat:!1},modal:{active:!1,closeText:"Close"},counter:{show:!1,number:"9000"},show:{main:!0,chat:!1,faq:!1,feedback:!1},textCopied:!1,dropActive:!1,supportedFeatures:{copy:!0,download:!0,dragdrop:!0},errors:{show:!1,messages:[]},humanTime:window.SECU.Helpers.getHumanTime}});
a.app=d;this.reinitApp();d.on({scrollToBottom:function(){this.get("chat.room.unread")?window.SECU.Chat.updateScroll(window.SECU.Chat.unreadPos()):window.SECU.Chat.updateScroll("bottom")},cancelSubmit:function(){return!1},hideError:function(){window.SECU.Error.hide()},chatLogout:function(){window.SECU.Chat.logout({room:this.get("chat.room.connection.room")});f.reinitApp("chat");window.SECU.Chat.enable();this.set("dock.chat",!1);window.SECU.Helpers.dockNavbar(!1);this.fire("modalClose")},showChatLogout:function(){this.set("modal.type",
"chatLogout");this.set("modal.closeText","No");this.set("modal.active",!0)},showChatLink:function(){this.set("modal.type","chatLink");this.set("modal.closeText","Close");this.set("modal.active",!0)},showChatUsers:function(){this.set("modal.type","chatRoster");this.set("modal.closeText","Close");this.set("modal.active",!0)},modalClose:function(){document.activeElement.blur();this.set("modal.active",!1)},toggleView:function(a,e){a&&a.original&&a.original.preventDefault();if(this.get("show."+e))return!1;
window.SECU.Error.hide();var c=this.get("show"),f;for(f in c)this.set("show."+f,!1);this.set("show."+e,!0);"chat"===e?this.get("chat.formActive")||(this.set("dock.chat",!0),window.SECU.Helpers.dockNavbar(!0),setTimeout(function(){window.SECU.Chat.init();(!window.SECU.Chat.scrollPresent()||window.SECU.Chat.scrollPresent()&&window.SECU.Chat.scrolledToBottom())&&d.set("chat.room.unread",!1)},0)):(this.set("dock.chat",!1),window.SECU.Chat.watchFeedScroll(!0),window.SECU.Helpers.dockNavbar(!1))},sendFeedback:function(a){a&&
a.original&&a.original.preventDefault();a=this.get("feedback.form");var c=this;window.SECU.Error.hide();if(!a.body.length)return window.SECU.Error.show(["The message can't be empty"]),!1;c.set("feedback.formDisabled",!0);window.SECU.Ajax.sendFeedback(a).then(function(a){c.set("feedback.sent",!0);c.set("feedback.formDisabled",!1);c.set("feedback.form",{body:"",email:""})},function(a){window.SECU.Error.show([a])})},fixTextareaHeight:window.SECU.Helpers.fixTextareaHeight,attachFile:function(a,d){a&&
a.original&&a.original.preventDefault();var c=null;switch(d){case "room":c={raw:"chat.room.rawFile",ractive:"chat.room.input.file",id:"#chatFile"};break;case "encrypt":c={raw:"encrypt.rawFile",ractive:"encrypt.file.message",id:"#messageFile"}}this.get(c.raw).length?(this.set(c.raw,[]),this.set(c.ractive,""),this.find(c.id).value=""):this.find(c.id).click()},downloadFile:function(a){this.get("supportedFeatures.download")||(a&&a.original&&a.original.preventDefault(),window.open(a.node.href,"_blank").focus())},
checkFile:function(a,d){window.SECU.Error.hide();var c=this,e=null;switch(d){case "room":e={raw:"chat.room.rawFile",ractive:"chat.room.input.file",data:"chat.room.fileData"};break;case "encrypt":e={raw:"encrypt.rawFile",ractive:"encrypt.file.message",data:"encrypt.fileData"}}e||window.SECU.Error.show(["No file domain"]);var f=window.SECU.File.validated(this.get(e.raw));if(f&&!f[0]){var n=window.SECU.File.prettifySize(f.size),r=window.SECU.File.getExtension(f.name);window.SECU.File.fileToBase64(f).then(function(a){c.set(e.ractive,
a);c.set(e.data,{name:f.name,size:n,extension:r})},function(a){window.SECU.Error.show([a])})}else this.set(e.data,{name:"",size:"",extension:""}),f[0]&&(this.set(e.raw,[]),window.SECU.Error.show(["The file is too big"]))},resetApp:function(a,d){a&&a.original&&a.original.preventDefault();f.reinitApp(d)},requestContainer:function(a,d){a&&a.original&&a.original.preventDefault();var c=this,e=null;c.set("decrypt.formDisabled",!0);window.SECU.Ajax.requestContainer(d).then(function(a){a=JSON.parse(a);"string"===
typeof a.data.text?(c.set("decrypt.message",a.data.text),c.set("decrypt.done",!0),a.data.text.length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt")},0)):(c.set("decrypt.form.message",JSON.stringify(a.data.text)),setTimeout(function(){document.getElementById("decryptPassword").focus()},0));a.data.files&&a.data.files[0]&&(e=a.data.files[0],c.set("decrypt.files.0.name",e.name),c.set("decrypt.files.0.extension",window.SECU.File.getExtension(e.name)),"string"===typeof e.data?
(c.set("decrypt.done",!0),c.set("decrypt.files.0.data",window.SECU.File.base64ToBlob(e.data))):c.set("decrypt.fileForm.message",JSON.stringify(e.data)));c.set("decrypt.loaded",!0);c.set("decrypt.formActive",!0);c.set("decrypt.formDisabled",!1)},function(a){window.SECU.Error.show([a])})},selectInput:function(a){a.node.select()},copyText:function(a,d){a&&a.original&&a.original.preventDefault();var c=this;window.SECU.Helpers.copyText(document.getElementById(d));this.set("textCopied",!0);setTimeout(function(){c.set("textCopied",
!1)},1E3)},sendChat:function(a){a&&a.original&&a.original.preventDefault();a=this.get("chat.room");var c=a.input.text,d=a.input.file;if(c.trim().length||d.length){var c=c.trim().length?JSON.parse(window.SECU.Crypt.encrypt({message:c,password:a.connection.key})):"",d=d.length?[{data:JSON.parse(window.SECU.Crypt.encrypt({message:d,password:a.connection.key})),name:a.fileData.name}]:[],f=window.SECU.Helpers.generateTimestamp();a={room:a.connection.room,data:{text:c,files:d},sent_at:f};window.SECU.Chat.addSentQueue(a);
window.SECU.Chat.sendData(a);this.set("chat.room.input",{text:"",file:""});this.set("chat.room.rawFile",[]);this.find("#chatFile").value=""}},createChat:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("chat.form.password").length)return window.SECU.Error.show(["You should provide a password"]),!1;this.set("chat.formDisabled",!0);a=this.get("chat.form");a.room.length?window.SECU.Chat.join(a):window.SECU.Chat.create(a)},createContainer:function(a){a&&a.original&&
a.original.preventDefault();window.SECU.Error.hide();if(!this.get("encrypt.form.message").length&&!this.get("encrypt.rawFile").length)return window.SECU.Error.show(["There should be either message or file"]),!1;this.set("encrypt.formDisabled",!0);var c=this;a=this.get("encrypt.form.password");var d="",f=[],d=a.length?JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.form"))):this.get("encrypt.form.message");this.get("encrypt.rawFile").length&&(a.length?(this.set("encrypt.file.password",a),f.push({data:JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.file"))),
name:this.get("encrypt.fileData.name")})):f.push({data:this.get("encrypt.file.message"),name:this.get("encrypt.fileData.name")}));window.SECU.Ajax.sendContainer({data:{text:d,files:f}}).then(function(a){a=JSON.parse(a);c.set("encrypt.link",window.SECU.Ajax._data.url.web.host+window.SECU.Ajax._data.url.web.page+a.hash);c.set("encrypt.formActive",!1);c.set("encrypt.done",!0);c.set("encrypt.formDisabled",!1);setTimeout(function(){document.getElementById("containerLink").select()},0)},function(a){window.SECU.Error.show([a])})},
decryptContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("decrypt.form.password").length)return window.SECU.Error.show(["You must provide a password"]),!1;a=this.get("decrypt.form.password");this.set("decrypt.formDisabled",!0);this.set("decrypt.fileForm.password",a);if(this.get("decrypt.form.message").length)try{this.set("decrypt.message",window.SECU.Crypt.decrypt(this.get("decrypt.form")))}catch(e){this.set("decrypt.success",!1)}if(this.get("decrypt.fileForm.message").length)try{this.set("decrypt.files.0.data",
window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt(this.get("decrypt.fileForm"))))}catch(e){this.set("decrypt.success",!1)}this.set("decrypt.fileForm",{message:"",password:""});this.set("decrypt.form",{message:"",password:""});this.set("decrypt.done",!0);this.set("decrypt.formDisabled",!1);this.get("decrypt.success")&&this.get("decrypt.message").length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt");setTimeout(function(){document.getElementById("decryptContainerBody").select()},
0)},0)}});d.observe("windowFocused",function(a,d,f){a&&this.get("show.chat")&&(window.SECU.Chat.scrollPresent()||this.set("chat.room.unread",!1))});window.SECU.Helpers.Autolinker=new Autolinker({twitter:!1});window.SECU.Helpers.checkLocation();window.SECU.Helpers.checkCopy();window.SECU.Helpers.checkDownload();window.SECU.Helpers.checkDragDrop();window.SECU.Helpers.checkNotification();window.SECU.Helpers.watchDragDrop();window.SECU.Helpers.watchScroll();window.SECU.Helpers.watchResize();window.SECU.Helpers.watchWindowFocus();
window.SECU.Helpers.checkVisibility();window.SECU.Ajax.assignHost();window.SECU.Socket.init()}};window.SECU.App.init();
