var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(b){this.toString=function(){return"CORRUPT: "+this.message};this.message=b},invalid:function(b){this.toString=function(){return"INVALID: "+this.message};this.message=b},bug:function(b){this.toString=function(){return"BUG: "+this.message};this.message=b},notReady:function(b){this.toString=function(){return"NOT READY: "+this.message};this.message=b}}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});
sjcl.cipher.aes=function(b){this.s[0][0][0]||this.O();var a,d,c,f,g=this.s[0][4],h=this.s[1];a=b.length;var k=1;if(4!==a&&6!==a&&8!==a)throw new sjcl.exception.invalid("invalid aes key size");this.b=[c=b.slice(0),f=[]];for(b=a;b<4*a+28;b++){d=c[b-1];if(0===b%a||8===a&&4===b%a)d=g[d>>>24]<<24^g[d>>16&255]<<16^g[d>>8&255]<<8^g[d&255],0===b%a&&(d=d<<8^d>>>24^k<<24,k=k<<1^283*(k>>7));c[b]=c[b-a]^d}for(a=0;b;a++,b--)d=c[a&3?b:b-4],f[a]=4>=b||4>a?d:h[0][g[d>>>24]]^h[1][g[d>>16&255]]^h[2][g[d>>8&255]]^h[3][g[d&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(b){return u(this,b,0)},decrypt:function(b){return u(this,b,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var b=this.s[0],a=this.s[1],d=b[4],c=a[4],f,g,h,k=[],l=[],n,m,p,q;for(f=0;256>f;f++)l[(k[f]=f<<1^283*(f>>7))^f]=f;for(g=h=0;!d[g];g^=n||1,h=l[h]||1)for(p=h^h<<1^h<<2^h<<3^h<<4,p=p>>8^p&255^99,d[g]=p,c[p]=g,m=k[f=k[n=k[g]]],q=16843009*m^65537*f^257*n^16843008*g,m=257*k[p]^16843008*p,f=0;4>f;f++)b[f][g]=m=m<<24^m>>>8,a[f][p]=q=q<<24^q>>>8;for(f=
0;5>f;f++)b[f]=b[f].slice(0),a[f]=a[f].slice(0)}};
function u(b,a,d){if(4!==a.length)throw new sjcl.exception.invalid("invalid aes block size");var c=b.b[d],f=a[0]^c[0],g=a[d?3:1]^c[1],h=a[2]^c[2];a=a[d?1:3]^c[3];var k,l,n,m=c.length/4-2,p,q=4,r=[0,0,0,0];k=b.s[d];b=k[0];var x=k[1],J=k[2],P=k[3],U=k[4];for(p=0;p<m;p++)k=b[f>>>24]^x[g>>16&255]^J[h>>8&255]^P[a&255]^c[q],l=b[g>>>24]^x[h>>16&255]^J[a>>8&255]^P[f&255]^c[q+1],n=b[h>>>24]^x[a>>16&255]^J[f>>8&255]^P[g&255]^c[q+2],a=b[a>>>24]^x[f>>16&255]^J[g>>8&255]^P[h&255]^c[q+3],q+=4,f=k,g=l,h=n;for(p=
0;4>p;p++)r[d?3&-p:p]=U[f>>>24]<<24^U[g>>16&255]<<16^U[h>>8&255]<<8^U[a&255]^c[q++],k=f,f=g,g=h,h=a,a=k;return r}
sjcl.bitArray={bitSlice:function(b,a,d){b=sjcl.bitArray.$(b.slice(a/32),32-(a&31)).slice(1);return void 0===d?b:sjcl.bitArray.clamp(b,d-a)},extract:function(b,a,d){var c=Math.floor(-a-d&31);return((a+d-1^a)&-32?b[a/32|0]<<32-c^b[a/32+1|0]>>>c:b[a/32|0]>>>c)&(1<<d)-1},concat:function(b,a){if(0===b.length||0===a.length)return b.concat(a);var d=b[b.length-1],c=sjcl.bitArray.getPartial(d);return 32===c?b.concat(a):sjcl.bitArray.$(a,c,d|0,b.slice(0,b.length-1))},bitLength:function(b){var a=b.length;return 0===
a?0:32*(a-1)+sjcl.bitArray.getPartial(b[a-1])},clamp:function(b,a){if(32*b.length<a)return b;b=b.slice(0,Math.ceil(a/32));var d=b.length;a&=31;0<d&&a&&(b[d-1]=sjcl.bitArray.partial(a,b[d-1]&2147483648>>a-1,1));return b},partial:function(b,a,d){return 32===b?a:(d?a|0:a<<32-b)+1099511627776*b},getPartial:function(b){return Math.round(b/1099511627776)||32},equal:function(b,a){if(sjcl.bitArray.bitLength(b)!==sjcl.bitArray.bitLength(a))return!1;var d=0,c;for(c=0;c<b.length;c++)d|=b[c]^a[c];return 0===
d},$:function(b,a,d,c){var f;for(void 0===c&&(c=[]);32<=a;a-=32)c.push(d),d=0;if(0===a)return c.concat(b);for(f=0;f<b.length;f++)c.push(d|b[f]>>>a),d=b[f]<<32-a;f=b.length?b[b.length-1]:0;b=sjcl.bitArray.getPartial(f);c.push(sjcl.bitArray.partial(a+b&31,32<a+b?d:c.pop(),1));return c},i:function(b,a){return[b[0]^a[0],b[1]^a[1],b[2]^a[2],b[3]^a[3]]},byteswapM:function(b){var a,d;for(a=0;a<b.length;++a)d=b[a],b[a]=d>>>24|d>>>8&65280|(d&65280)<<8|d<<24;return b}};
sjcl.codec.utf8String={fromBits:function(b){var a="",d=sjcl.bitArray.bitLength(b),c,f;for(c=0;c<d/8;c++)0===(c&3)&&(f=b[c/4]),a+=String.fromCharCode(f>>>24),f<<=8;return decodeURIComponent(escape(a))},toBits:function(b){b=unescape(encodeURIComponent(b));var a=[],d,c=0;for(d=0;d<b.length;d++)c=c<<8|b.charCodeAt(d),3===(d&3)&&(a.push(c),c=0);d&3&&a.push(sjcl.bitArray.partial(8*(d&3),c));return a}};
sjcl.codec.hex={fromBits:function(b){var a="",d;for(d=0;d<b.length;d++)a+=((b[d]|0)+0xf00000000000).toString(16).substr(4);return a.substr(0,sjcl.bitArray.bitLength(b)/4)},toBits:function(b){var a,d=[],c;b=b.replace(/\s|0x/g,"");c=b.length;b+="00000000";for(a=0;a<b.length;a+=8)d.push(parseInt(b.substr(a,8),16)^0);return sjcl.bitArray.clamp(d,4*c)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(b,a,d){var c=sjcl.codec.base32.BASE,f=sjcl.codec.base32.REMAINING,g="",h=0,k=sjcl.codec.base32.B,l=0,n=sjcl.bitArray.bitLength(b);d&&(k=sjcl.codec.base32.X);for(d=0;g.length*c<n;)g+=k.charAt((l^b[d]>>>h)>>>f),h<c?(l=b[d]<<c-h,h+=f,d++):(l<<=c,h-=c);for(;g.length&7&&!a;)g+="=";return g},toBits:function(b,a){b=b.replace(/\s|=/g,"").toUpperCase();var d=sjcl.codec.base32.BITS,
c=sjcl.codec.base32.BASE,f=sjcl.codec.base32.REMAINING,g=[],h,k=0,l=sjcl.codec.base32.B,n=0,m,p="base32";a&&(l=sjcl.codec.base32.X,p="base32hex");for(h=0;h<b.length;h++){m=l.indexOf(b.charAt(h));if(0>m){if(!a)try{return sjcl.codec.base32hex.toBits(b)}catch(q){}throw new sjcl.exception.invalid("this isn't "+p+"!");}k>f?(k-=f,g.push(n^m>>>k),n=m<<d-k):(k+=c,n^=m<<d-k)}k&56&&g.push(sjcl.bitArray.partial(k&56,n,1));return g}};
sjcl.codec.base32hex={fromBits:function(b,a){return sjcl.codec.base32.fromBits(b,a,1)},toBits:function(b){return sjcl.codec.base32.toBits(b,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(b,a,d){var c="",f=0,g=sjcl.codec.base64.B,h=0,k=sjcl.bitArray.bitLength(b);d&&(g=g.substr(0,62)+"-_");for(d=0;6*c.length<k;)c+=g.charAt((h^b[d]>>>f)>>>26),6>f?(h=b[d]<<6-f,f+=26,d++):(h<<=6,f-=6);for(;c.length&3&&!a;)c+="=";return c},toBits:function(b,a){b=b.replace(/\s|=/g,"");var d=[],c,f=0,g=sjcl.codec.base64.B,h=0,k;a&&(g=g.substr(0,62)+"-_");for(c=0;c<b.length;c++){k=g.indexOf(b.charAt(c));
if(0>k)throw new sjcl.exception.invalid("this isn't base64!");26<f?(f-=26,d.push(h^k>>>f),h=k<<32-f):(f+=6,h^=k<<32-f)}f&56&&d.push(sjcl.bitArray.partial(f&56,h,1));return d}};sjcl.codec.base64url={fromBits:function(b){return sjcl.codec.base64.fromBits(b,1,1)},toBits:function(b){return sjcl.codec.base64.toBits(b,1)}};sjcl.hash.sha256=function(b){this.b[0]||this.O();b?(this.F=b.F.slice(0),this.A=b.A.slice(0),this.l=b.l):this.reset()};sjcl.hash.sha256.hash=function(b){return(new sjcl.hash.sha256).update(b).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(b){"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));var a,d=this.A=sjcl.bitArray.concat(this.A,b);a=this.l;b=this.l=a+sjcl.bitArray.bitLength(b);for(a=512+a&-512;a<=b;a+=512)v(this,d.splice(0,16));return this},finalize:function(){var b,a=this.A,d=this.F,a=sjcl.bitArray.concat(a,[sjcl.bitArray.partial(1,1)]);for(b=a.length+2;b&15;b++)a.push(0);a.push(Math.floor(this.l/
4294967296));for(a.push(this.l|0);a.length;)v(this,a.splice(0,16));this.reset();return d},Y:[],b:[],O:function(){function b(a){return 4294967296*(a-Math.floor(a))|0}var a=0,d=2,c;a:for(;64>a;d++){for(c=2;c*c<=d;c++)if(0===d%c)continue a;8>a&&(this.Y[a]=b(Math.pow(d,.5)));this.b[a]=b(Math.pow(d,1/3));a++}}};
function v(b,a){var d,c,f,g=a.slice(0),h=b.F,k=b.b,l=h[0],n=h[1],m=h[2],p=h[3],q=h[4],r=h[5],x=h[6],J=h[7];for(d=0;64>d;d++)16>d?c=g[d]:(c=g[d+1&15],f=g[d+14&15],c=g[d&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+g[d&15]+g[d+9&15]|0),c=c+J+(q>>>6^q>>>11^q>>>25^q<<26^q<<21^q<<7)+(x^q&(r^x))+k[d],J=x,x=r,r=q,q=p+c|0,p=m,m=n,n=l,l=c+(n&m^p&(n^m))+(n>>>2^n>>>13^n>>>22^n<<30^n<<19^n<<10)|0;h[0]=h[0]+l|0;h[1]=h[1]+n|0;h[2]=h[2]+m|0;h[3]=h[3]+p|0;h[4]=h[4]+q|0;h[5]=h[5]+r|0;h[6]=
h[6]+x|0;h[7]=h[7]+J|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(b){sjcl.mode.ccm.G.push(b)},unListenProgress:function(b){b=sjcl.mode.ccm.G.indexOf(b);-1<b&&sjcl.mode.ccm.G.splice(b,1)},fa:function(b){var a=sjcl.mode.ccm.G.slice(),d;for(d=0;d<a.length;d+=1)a[d](b)},encrypt:function(b,a,d,c,f){var g,h=a.slice(0),k=sjcl.bitArray,l=k.bitLength(d)/8,n=k.bitLength(h)/8;f=f||64;c=c||[];if(7>l)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(g=2;4>g&&n>>>8*g;g++);g<15-l&&(g=15-l);d=k.clamp(d,
8*(15-g));a=sjcl.mode.ccm.V(b,a,d,c,f,g);h=sjcl.mode.ccm.C(b,h,d,a,f,g);return k.concat(h.data,h.tag)},decrypt:function(b,a,d,c,f){f=f||64;c=c||[];var g=sjcl.bitArray,h=g.bitLength(d)/8,k=g.bitLength(a),l=g.clamp(a,k-f),n=g.bitSlice(a,k-f),k=(k-f)/8;if(7>h)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&k>>>8*a;a++);a<15-h&&(a=15-h);d=g.clamp(d,8*(15-a));l=sjcl.mode.ccm.C(b,l,d,n,f,a);b=sjcl.mode.ccm.V(b,l.data,d,c,f,a);if(!g.equal(l.tag,b))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return l.data},na:function(b,a,d,c,f,g){var h=[],k=sjcl.bitArray,l=k.i;c=[k.partial(8,(a.length?64:0)|c-2<<2|g-1)];c=k.concat(c,d);c[3]|=f;c=b.encrypt(c);if(a.length)for(d=k.bitLength(a)/8,65279>=d?h=[k.partial(16,d)]:4294967295>=d&&(h=k.concat([k.partial(16,65534)],[d])),h=k.concat(h,a),a=0;a<h.length;a+=4)c=b.encrypt(l(c,h.slice(a,a+4).concat([0,0,0])));return c},V:function(b,a,d,c,f,g){var h=sjcl.bitArray,k=h.i;f/=8;if(f%2||4>f||16<f)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(4294967295<c.length||4294967295<a.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");d=sjcl.mode.ccm.na(b,c,d,f,h.bitLength(a)/8,g);for(c=0;c<a.length;c+=4)d=b.encrypt(k(d,a.slice(c,c+4).concat([0,0,0])));return h.clamp(d,8*f)},C:function(b,a,d,c,f,g){var h,k=sjcl.bitArray;h=k.i;var l=a.length,n=k.bitLength(a),m=l/50,p=m;d=k.concat([k.partial(8,g-1)],d).concat([0,0,0]).slice(0,4);c=k.bitSlice(h(c,b.encrypt(d)),0,f);if(!l)return{tag:c,data:[]};for(h=0;h<l;h+=4)h>m&&(sjcl.mode.ccm.fa(h/
l),m+=p),d[3]++,f=b.encrypt(d),a[h]^=f[0],a[h+1]^=f[1],a[h+2]^=f[2],a[h+3]^=f[3];return{tag:c,data:k.clamp(a,n)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(b,a,d,c,f,g){if(128!==sjcl.bitArray.bitLength(d))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var h,k=sjcl.mode.ocb2.S,l=sjcl.bitArray,n=l.i,m=[0,0,0,0];d=k(b.encrypt(d));var p,q=[];c=c||[];f=f||64;for(h=0;h+4<a.length;h+=4)p=a.slice(h,h+4),m=n(m,p),q=q.concat(n(d,b.encrypt(n(d,p)))),d=k(d);p=a.slice(h);a=l.bitLength(p);h=b.encrypt(n(d,[0,0,0,a]));p=l.clamp(n(p.concat([0,0,0]),h),a);m=n(m,n(p.concat([0,0,0]),h));m=b.encrypt(n(m,n(d,k(d))));
c.length&&(m=n(m,g?c:sjcl.mode.ocb2.pmac(b,c)));return q.concat(l.concat(p,l.clamp(m,f)))},decrypt:function(b,a,d,c,f,g){if(128!==sjcl.bitArray.bitLength(d))throw new sjcl.exception.invalid("ocb iv must be 128 bits");f=f||64;var h=sjcl.mode.ocb2.S,k=sjcl.bitArray,l=k.i,n=[0,0,0,0],m=h(b.encrypt(d)),p,q,r=sjcl.bitArray.bitLength(a)-f,x=[];c=c||[];for(d=0;d+4<r/32;d+=4)p=l(m,b.decrypt(l(m,a.slice(d,d+4)))),n=l(n,p),x=x.concat(p),m=h(m);q=r-32*d;p=b.encrypt(l(m,[0,0,0,q]));p=l(p,k.clamp(a.slice(d),q).concat([0,
0,0]));n=l(n,p);n=b.encrypt(l(n,l(m,h(m))));c.length&&(n=l(n,g?c:sjcl.mode.ocb2.pmac(b,c)));if(!k.equal(k.clamp(n,f),k.bitSlice(a,r)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return x.concat(k.clamp(p,q))},pmac:function(b,a){var d,c=sjcl.mode.ocb2.S,f=sjcl.bitArray,g=f.i,h=[0,0,0,0],k=b.encrypt([0,0,0,0]),k=g(k,c(c(k)));for(d=0;d+4<a.length;d+=4)k=c(k),h=g(h,b.encrypt(g(k,a.slice(d,d+4))));d=a.slice(d);128>f.bitLength(d)&&(k=g(k,c(k)),d=f.concat(d,[-2147483648,0,0,0]));h=g(h,d);
return b.encrypt(g(c(g(k,c(k))),h))},S:function(b){return[b[0]<<1^b[1]>>>31,b[1]<<1^b[2]>>>31,b[2]<<1^b[3]>>>31,b[3]<<1^135*(b[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(b,a,d,c,f){var g=a.slice(0);a=sjcl.bitArray;c=c||[];b=sjcl.mode.gcm.C(!0,b,g,c,d,f||128);return a.concat(b.data,b.tag)},decrypt:function(b,a,d,c,f){var g=a.slice(0),h=sjcl.bitArray,k=h.bitLength(g);f=f||128;c=c||[];f<=k?(a=h.bitSlice(g,k-f),g=h.bitSlice(g,0,k-f)):(a=g,g=[]);b=sjcl.mode.gcm.C(!1,b,g,c,d,f);if(!h.equal(b.tag,a))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return b.data},ka:function(b,a){var d,c,f,g,h,k=sjcl.bitArray.i;f=[0,0,
0,0];g=a.slice(0);for(d=0;128>d;d++){0!==(b[Math.floor(d/32)]&1<<31-d%32)&&(f=k(f,g));h=0!==(g[3]&1);for(c=3;0<c;c--)g[c]=g[c]>>>1|(g[c-1]&1)<<31;g[0]>>>=1;h&&(g[0]^=-520093696)}return f},j:function(b,a,d){var c,f=d.length;a=a.slice(0);for(c=0;c<f;c+=4)a[0]^=4294967295&d[c],a[1]^=4294967295&d[c+1],a[2]^=4294967295&d[c+2],a[3]^=4294967295&d[c+3],a=sjcl.mode.gcm.ka(a,b);return a},C:function(b,a,d,c,f,g){var h,k,l,n,m,p,q,r,x=sjcl.bitArray;p=d.length;q=x.bitLength(d);r=x.bitLength(c);k=x.bitLength(f);
h=a.encrypt([0,0,0,0]);96===k?(f=f.slice(0),f=x.concat(f,[1])):(f=sjcl.mode.gcm.j(h,[0,0,0,0],f),f=sjcl.mode.gcm.j(h,f,[0,0,Math.floor(k/4294967296),k&4294967295]));k=sjcl.mode.gcm.j(h,[0,0,0,0],c);m=f.slice(0);c=k.slice(0);b||(c=sjcl.mode.gcm.j(h,k,d));for(n=0;n<p;n+=4)m[3]++,l=a.encrypt(m),d[n]^=l[0],d[n+1]^=l[1],d[n+2]^=l[2],d[n+3]^=l[3];d=x.clamp(d,q);b&&(c=sjcl.mode.gcm.j(h,k,d));b=[Math.floor(r/4294967296),r&4294967295,Math.floor(q/4294967296),q&4294967295];c=sjcl.mode.gcm.j(h,c,b);l=a.encrypt(f);
c[0]^=l[0];c[1]^=l[1];c[2]^=l[2];c[3]^=l[3];return{tag:x.bitSlice(c,0,g),data:d}}};sjcl.misc.hmac=function(b,a){this.W=a=a||sjcl.hash.sha256;var d=[[],[]],c,f=a.prototype.blockSize/32;this.w=[new a,new a];b.length>f&&(b=a.hash(b));for(c=0;c<f;c++)d[0][c]=b[c]^909522486,d[1][c]=b[c]^1549556828;this.w[0].update(d[0]);this.w[1].update(d[1]);this.R=new a(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(b){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(b);return this.digest(b)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(b){this.aa=!0;this.R.update(b)};sjcl.misc.hmac.prototype.digest=function(){var b=this.R.finalize(),b=(new this.W(this.w[1])).update(b).finalize();this.reset();return b};
sjcl.misc.pbkdf2=function(b,a,d,c,f){d=d||1E3;if(0>c||0>d)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof b&&(b=sjcl.codec.utf8String.toBits(b));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));f=f||sjcl.misc.hmac;b=new f(b);var g,h,k,l,n=[],m=sjcl.bitArray;for(l=1;32*n.length<(c||1);l++){f=g=b.encrypt(m.concat(a,[l]));for(h=1;h<d;h++)for(g=b.encrypt(g),k=0;k<g.length;k++)f[k]^=g[k];n=n.concat(f)}c&&(n=m.clamp(n,c));return n};
sjcl.prng=function(b){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=b;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=65536;this.T=[0,48,64,96,128,192,256,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(b,a){var d=[],c;c=this.isReady(a);var f;if(c===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(c&this.J){c=!(c&this.I);f=[];var g=0,h;this.Z=f[0]=(new Date).valueOf()+this.da;for(h=0;16>h;h++)f.push(4294967296*Math.random()|0);for(h=0;h<this.c.length&&(f=f.concat(this.c[h].finalize()),g+=this.m[h],this.m[h]=0,c||!(this.P&1<<h));h++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=g;g>this.o&&(this.o=
g);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(f));this.L=new sjcl.cipher.aes(this.b);for(c=0;4>c&&(this.h[c]=this.h[c]+1|0,!this.h[c]);c++);}for(c=0;c<b;c+=4)0===(c+1)%this.ca&&y(this),f=z(this),d.push(f[0],f[1],f[2],f[3]);y(this);return d.slice(0,b)},setDefaultParanoia:function(b,a){if(0===b&&"Setting paranoia=0 will ruin your security; use it only for testing"!==a)throw"Setting paranoia=0 will ruin your security; use it only for testing";this.M=b},addEntropy:function(b,a,d){d=d||"user";
var c,f,g=(new Date).valueOf(),h=this.H[d],k=this.isReady(),l=0;c=this.U[d];void 0===c&&(c=this.U[d]=this.ha++);void 0===h&&(h=this.H[d]=0);this.H[d]=(this.H[d]+1)%this.c.length;switch(typeof b){case "number":void 0===a&&(a=1);this.c[h].update([c,this.N++,1,a,g,1,b|0]);break;case "object":d=Object.prototype.toString.call(b);if("[object Uint32Array]"===d){f=[];for(d=0;d<b.length;d++)f.push(b[d]);b=f}else for("[object Array]"!==d&&(l=1),d=0;d<b.length&&!l;d++)"number"!==typeof b[d]&&(l=1);if(!l){if(void 0===
a)for(d=a=0;d<b.length;d++)for(f=b[d];0<f;)a++,f>>>=1;this.c[h].update([c,this.N++,2,a,g,b.length].concat(b))}break;case "string":void 0===a&&(a=b.length);this.c[h].update([c,this.N++,3,a,g,b.length]);this.c[h].update(b);break;default:l=1}if(l)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[h]+=a;this.f+=a;k===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},isReady:function(b){b=this.T[void 0!==
b?b:this.M];return this.o&&this.o>=b?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=b?this.J|this.u:this.u},getProgress:function(b){b=this.T[b?b:this.M];return this.o>=b?1:this.f>b?1:this.f/b},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,
!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(b,a){this.K[b][this.ga++]=a},removeEventListener:function(b,a){var d,c,f=this.K[b],g=[];for(c in f)f.hasOwnProperty(c)&&f[c]===a&&g.push(c);for(d=0;d<g.length;d++)c=g[d],delete f[c]},la:function(){C(1)},oa:function(b){var a,d;try{a=b.x||b.clientX||b.offsetX||0,d=b.y||b.clientY||b.offsetY||0}catch(c){d=a=0}0!=a&&0!=d&&sjcl.random.addEntropy([a,d],2,"mouse");C(0)},qa:function(b){b=
b.touches[0]||b.changedTouches[0];sjcl.random.addEntropy([b.pageX||b.clientX,b.pageY||b.clientY],1,"touch");C(0)},ma:function(){C(2)},ea:function(b){b=b.accelerationIncludingGravity.x||b.accelerationIncludingGravity.y||b.accelerationIncludingGravity.z;if(window.orientation){var a=window.orientation;"number"===typeof a&&sjcl.random.addEntropy(a,1,"accelerometer")}b&&sjcl.random.addEntropy(b,2,"accelerometer");C(0)}};
function A(b,a){var d,c=sjcl.random.K[b],f=[];for(d in c)c.hasOwnProperty(d)&&f.push(c[d]);for(d=0;d<f.length;d++)f[d](a)}function C(b){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),b,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),b,"loadtime")}function y(b){b.b=z(b).concat(z(b));b.L=new sjcl.cipher.aes(b.b)}
function z(b){for(var a=0;4>a&&(b.h[a]=b.h[a]+1|0,!b.h[a]);a++);return b.L.encrypt(b.h)}function B(b,a){return function(){a.apply(b,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(b){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(b){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(b))}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(b,a,d,c){d=d||{};c=c||{};var f=sjcl.json,g=f.g({iv:sjcl.random.randomWords(4,0)},f.defaults),h;f.g(g,d);d=g.adata;"string"===typeof g.salt&&(g.salt=sjcl.codec.base64.toBits(g.salt));"string"===typeof g.iv&&(g.iv=sjcl.codec.base64.toBits(g.iv));if(!sjcl.mode[g.mode]||!sjcl.cipher[g.cipher]||"string"===typeof b&&100>=g.iter||64!==g.ts&&96!==g.ts&&128!==g.ts||128!==g.ks&&192!==g.ks&&256!==g.ks||2>g.iv.length||
4<g.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof b?(h=sjcl.misc.cachedPbkdf2(b,g),b=h.key.slice(0,g.ks/32),g.salt=h.salt):sjcl.ecc&&b instanceof sjcl.ecc.elGamal.publicKey&&(h=b.kem(),g.kemtag=h.tag,b=h.key.slice(0,g.ks/32));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));"string"===typeof d&&(g.adata=d=sjcl.codec.utf8String.toBits(d));h=new sjcl.cipher[g.cipher](b);f.g(c,g);c.key=b;g.ct="ccm"===g.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
a instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(h,a,g.iv,d,g.ts):sjcl.mode[g.mode].encrypt(h,a,g.iv,d,g.ts);return g},encrypt:function(b,a,d,c){var f=sjcl.json,g=f.ja.apply(f,arguments);return f.encode(g)},ia:function(b,a,d,c){d=d||{};c=c||{};var f=sjcl.json;a=f.g(f.g(f.g({},f.defaults),a),d,!0);var g,h;g=a.adata;"string"===typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt));"string"===typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv));if(!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"===
typeof b&&100>=a.iter||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||!a.iv||2>a.iv.length||4<a.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof b?(h=sjcl.misc.cachedPbkdf2(b,a),b=h.key.slice(0,a.ks/32),a.salt=h.salt):sjcl.ecc&&b instanceof sjcl.ecc.elGamal.secretKey&&(b=b.unkem(sjcl.codec.base64.toBits(a.kemtag)).slice(0,a.ks/32));"string"===typeof g&&(g=sjcl.codec.utf8String.toBits(g));h=new sjcl.cipher[a.cipher](b);g="ccm"===
a.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&a.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(h,a.ct,a.iv,a.tag,g,a.ts):sjcl.mode[a.mode].decrypt(h,a.ct,a.iv,g,a.ts);f.g(c,a);c.key=b;return 1===d.raw?g:sjcl.codec.utf8String.fromBits(g)},decrypt:function(b,a,d,c){var f=sjcl.json;return f.ia(b,f.decode(a),d,c)},encode:function(b){var a,d="{",c="";for(a in b)if(b.hasOwnProperty(a)){if(!a.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");d+=c+'"'+
a+'":';c=",";switch(typeof b[a]){case "number":case "boolean":d+=b[a];break;case "string":d+='"'+escape(b[a])+'"';break;case "object":d+='"'+sjcl.codec.base64.fromBits(b[a],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return d+"}"},decode:function(b){b=b.replace(/\s/g,"");if(!b.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");b=b.replace(/^\{|\}$/g,"").split(/,/);var a={},d,c;for(d=0;d<b.length;d++){if(!(c=b[d].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=c[3]?a[c[2]]=parseInt(c[3],10):null!=c[4]?a[c[2]]=c[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(c[4]):unescape(c[4]):null!=c[5]&&(a[c[2]]="true"===c[5])}return a},g:function(b,a,d){void 0===b&&(b={});if(void 0===a)return b;for(var c in a)if(a.hasOwnProperty(c)){if(d&&void 0!==b[c]&&b[c]!==a[c])throw new sjcl.exception.invalid("required parameter overridden");b[c]=a[c]}return b},sa:function(b,a){var d={},c;for(c in b)b.hasOwnProperty(c)&&b[c]!==a[c]&&(d[c]=b[c]);return d},ra:function(b,
a){var d={},c;for(c=0;c<a.length;c++)void 0!==b[a[c]]&&(d[a[c]]=b[a[c]]);return d}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(b,a){var d=sjcl.misc.pa,c;a=a||{};c=a.iter||1E3;d=d[b]=d[b]||{};c=d[c]=d[c]||{firstSalt:a.salt&&a.salt.length?a.salt.slice(0):sjcl.random.randomWords(2,0)};d=void 0===a.salt?c.firstSalt:a.salt;c[d]=c[d]||sjcl.misc.pbkdf2(b,d,a.iter);return{key:c[d].slice(0),salt:d.slice(0)}};(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).io=b()})(function(){return function a(b,c,f){function g(k,n){if(!c[k]){if(!b[k]){var m="function"==typeof require&&require;if(!n&&m)return m(k,!0);if(h)return h(k,!0);m=Error("Cannot find module '"+k+"'");throw m.code="MODULE_NOT_FOUND",m;}m=c[k]={exports:{}};
b[k][0].call(m.exports,function(a){var c=b[k][1][a];return g(c?c:a)},m,m.exports,a,b,c,f)}return c[k].exports}for(var h="function"==typeof require&&require,k=0;k<f.length;k++)g(f[k]);return g}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){b.exports=a("./socket");b.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,b,c){(function(c){function g(a,b){if(!(this instanceof g))return new g(a,b);b=b||{};a&&"object"==typeof a&&(b=a,a=null);
a?(a=p(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=p(b.host).host);this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol;b.hostname&&!b.port&&(b.port=this.secure?"443":"80");this.agent=b.agent||!1;this.hostname=b.hostname||(c.location?location.hostname:"localhost");this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80);this.query=b.query||{};"string"==typeof this.query&&
(this.query=r.decode(this.query));this.upgrade=!1!==b.upgrade;this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!b.forceJSONP;this.jsonp=!1!==b.jsonp;this.forceBase64=!!b.forceBase64;this.enablesXDR=!!b.enablesXDR;this.timestampParam=b.timestampParam||"t";this.timestampRequests=b.timestampRequests;this.transports=b.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=b.policyPort||843;this.rememberUpgrade=b.rememberUpgrade||!1;this.binaryType=
null;this.onlyBinaryUpgrades=b.onlyBinaryUpgrades;this.perMessageDeflate=!1!==b.perMessageDeflate?b.perMessageDeflate||{}:!1;!0===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=b.pfx||null;this.key=b.key||null;this.passphrase=b.passphrase||null;this.cert=b.cert||null;this.ca=b.ca||null;this.ciphers=b.ciphers||null;this.rejectUnauthorized=void 0===b.rejectUnauthorized?null:b.rejectUnauthorized;
var d="object"==typeof c&&c;d.global===d&&b.extraHeaders&&0<Object.keys(b.extraHeaders).length&&(this.extraHeaders=b.extraHeaders);this.open()}var h=a("./transports"),k=a("component-emitter"),l=a("debug")("engine.io-client:socket"),n=a("indexof"),m=a("engine.io-parser"),p=a("parseuri"),q=a("parsejson"),r=a("parseqs");b.exports=g;g.priorWebsocketSuccess=!1;k(g.prototype);g.protocol=m.protocol;g.Socket=g;g.Transport=a("./transport");g.transports=a("./transports");g.parser=a("engine.io-parser");g.prototype.createTransport=
function(a){l('creating transport "%s"',a);var b=this.query,c={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);c.EIO=m.protocol;c.transport=a;this.id&&(c.sid=this.id);return new h[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:c,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,
key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})};g.prototype.open=function(){var a;if(this.rememberUpgrade&&g.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var b=this;setTimeout(function(){b.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState=
"opening";try{a=this.createTransport(a)}catch(c){this.transports.shift();this.open();return}a.open();this.setTransport(a)};g.prototype.setTransport=function(a){l("setting transport %s",a.name);var b=this;this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})};
g.prototype.probe=function(a){function b(){if(p.onlyBinaryUpgrades){var c=!this.supportsBinary&&p.transport.supportsBinary;r=r||c}r||(l('probe transport "%s" opened',a),m.send([{type:"ping",data:"probe"}]),m.once("packet",function(b){r||("pong"==b.type&&"probe"==b.data?(l('probe transport "%s" pong',a),p.upgrading=!0,p.emit("upgrading",m),m&&(g.priorWebsocketSuccess="websocket"==m.name,l('pausing current transport "%s"',p.transport.name),p.transport.pause(function(){r||"closed"==p.readyState||(l("changing transport and sending upgrade packet"),
n(),p.setTransport(m),m.send([{type:"upgrade"}]),p.emit("upgrade",m),m=null,p.upgrading=!1,p.flush())}))):(l('probe transport "%s" failed',a),b=Error("probe error"),b.transport=m.name,p.emit("upgradeError",b)))}))}function c(){r||(r=!0,n(),m.close(),m=null)}function d(b){var f=Error("probe error: "+b);f.transport=m.name;c();l('probe transport "%s" failed because of error: %s',a,b);p.emit("upgradeError",f)}function f(){d("transport closed")}function h(){d("socket closed")}function k(a){m&&a.name!=
m.name&&(l('"%s" works - aborting "%s"',a.name,m.name),c())}function n(){m.removeListener("open",b);m.removeListener("error",d);m.removeListener("close",f);p.removeListener("close",h);p.removeListener("upgrading",k)}l('probing transport "%s"',a);var m=this.createTransport(a,{probe:1}),r=!1,p=this;g.priorWebsocketSuccess=!1;m.once("open",b);m.once("error",d);m.once("close",f);this.once("close",h);this.once("upgrading",k);m.open()};g.prototype.onOpen=function(){l("socket open");this.readyState="open";
g.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){l("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};g.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(l('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(q(a.data));break;
case "pong":this.setPing();this.emit("pong");break;case "error":var b=Error("server error");b.code=a.data;this.onError(b);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else l('packet received with socket readyState "%s"',this.readyState)};g.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=
this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};g.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};g.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){l("writing ping packet - expecting pong within %sms",
a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};g.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})};g.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};g.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(l("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};g.prototype.write=g.prototype.send=function(a,b,c){this.sendPacket("message",a,b,c);return this};g.prototype.sendPacket=function(a,b,c,d){"function"==typeof b&&(d=b,b=void 0);"function"==typeof c&&(d=c,c=null);if("closing"!=this.readyState&&"closed"!=this.readyState){c=c||{};c.compress=!1!==c.compress;a={type:a,data:b,options:c};this.emit("packetCreate",a);this.writeBuffer.push(a);if(d)this.once("flush",
d);this.flush()}};g.prototype.close=function(){function a(){d.onClose("forced close");l("socket closing - telling transport to close");d.transport.close()}function b(){d.removeListener("upgrade",b);d.removeListener("upgradeError",b);a()}function c(){d.once("upgrade",b);d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?c():a()});else this.upgrading?c():a()}return this};
g.prototype.onError=function(a){l("socket error %j",a);g.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};g.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState)l('socket close with reason: "%s"',a),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=
null,this.emit("close",a,b),this.writeBuffer=[],this.prevBufferLen=0};g.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~n(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,b,c){function f(a){this.path=a.path;this.hostname=
a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders}var g=a("engine.io-parser");a=a("component-emitter");b.exports=f;a(f.prototype);
f.prototype.onError=function(a,b){var c=Error(a);c.type="TransportError";c.description=b;this.emit("error",c);return this};f.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};f.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};f.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};f.prototype.onOpen=
function(){this.readyState="open";this.writable=!0;this.emit("open")};f.prototype.onData=function(a){a=g.decodePacket(a,this.socket.binaryType);this.onPacket(a)};f.prototype.onPacket=function(a){this.emit("packet",a)};f.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,b,c){(function(b){var d=a("xmlhttprequest-ssl"),h=a("./polling-xhr"),k=a("./polling-jsonp"),l=a("./websocket");c.polling=function(a){var c=!1,l=
!1,q=!1!==a.jsonp;b.location&&(l="https:"==location.protocol,(c=location.port)||(c=l?443:80),c=a.hostname!=location.hostname||c!=a.port,l=a.secure!=l);a.xdomain=c;a.xscheme=l;if("open"in new d(a)&&!a.forceJSONP)return new h(a);if(!q)throw Error("JSONP disabled");return new k(a)};c.websocket=l}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,
b,c){(function(c){function g(){}function h(a){k.call(this,a);this.query=this.query||{};p||(c.___eio||(c.___eio=[]),p=c.___eio);this.index=p.length;var b=this;p.push(function(a){b.onData(a)});this.query.j=this.index;c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=g)},!1)}var k=a("./polling"),l=a("component-inherit");b.exports=h;var n=/\n/g,m=/\\n/g,p;l(h,k);h.prototype.supportsBinary=!1;h.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);k.prototype.doClose.call(this)};h.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b);
this.script=b;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};h.prototype.doWrite=function(a,b){function c(){d();b()}function d(){if(f.iframe)try{f.form.removeChild(f.iframe)}catch(a){f.onError("jsonp polling iframe removal error",a)}try{l=document.createElement('<iframe src="javascript:0" name="'+f.iframeId+'">')}catch(a){l=document.createElement("iframe"),
l.name=f.iframeId,l.src="javascript:0"}l.id=f.iframeId;f.form.appendChild(l);f.iframe=l}var f=this;if(!this.form){var g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index,l;g.className="socketio";g.style.position="absolute";g.style.top="-1000px";g.style.left="-1000px";g.target=k;g.method="POST";g.setAttribute("accept-charset","utf-8");h.name="d";g.appendChild(h);document.body.appendChild(g);this.form=g;this.area=h}this.form.action=this.uri();
d();a=a.replace(m,"\\\n");this.area.value=a.replace(n,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==f.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,b,c){(function(c){function g(){}function h(a){m.call(this,a);if(c.location){var b="https:"==location.protocol,
d=location.port;d||(d=b?443:80);this.xd=a.hostname!=c.location.hostname||d!=a.port;this.xs=a.secure!=b}else this.extraHeaders=a.extraHeaders}function k(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=
a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders;this.create()}function l(){for(var a in k.requests)k.requests.hasOwnProperty(a)&&k.requests[a].abort()}var n=a("xmlhttprequest-ssl"),m=a("./polling"),p=a("component-emitter"),q=a("component-inherit"),r=a("debug")("engine.io-client:polling-xhr");b.exports=h;b.exports.Request=k;q(h,m);h.prototype.supportsBinary=!0;h.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||
!1;a.supportsBinary=this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;a.extraHeaders=this.extraHeaders;return new k(a)};h.prototype.doWrite=function(a,b){var c=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a}),d=this;c.on("success",b);c.on("error",function(a){d.onError("xhr post error",a)});this.sendXhr=c};h.prototype.doPoll=
function(){r("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};p(k.prototype);k.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new n(a),d=this;try{r("xhr open %s: %s",
this.method,this.uri);b.open(this.method,this.uri,this.async);try{if(this.extraHeaders){b.setDisableHeaderCheck(!0);for(var g in this.extraHeaders)this.extraHeaders.hasOwnProperty(g)&&b.setRequestHeader(g,this.extraHeaders[g])}}catch(h){}this.supportsBinary&&(b.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(h){}"withCredentials"in b&&(b.withCredentials=
!0);this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){if(4==b.readyState)if(200==b.status||1223==b.status)d.onLoad();else setTimeout(function(){d.onError(b.status)},0)};r("xhr data %s",this.data);b.send(this.data)}catch(h){setTimeout(function(){d.onError(h)},0);return}c.document&&(this.index=k.requestsCount++,k.requests[this.index]=this)};k.prototype.onSuccess=function(){this.emit("success");this.cleanup()};k.prototype.onData=
function(a){this.emit("data",a);this.onSuccess()};k.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};k.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=g:this.xhr.onreadystatechange=g;if(a)try{this.xhr.abort()}catch(b){}c.document&&delete k.requests[this.index];this.xhr=null}};k.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}if("application/octet-stream"===
b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(c){var d=new Uint8Array(this.xhr.response);b=[];for(var f=0,g=d.length;f<g;f++)b.push(d[f]);a=String.fromCharCode.apply(null,b)}else a=this.xhr.responseText}catch(c){this.onError(c)}if(null!=a)this.onData(a)};k.prototype.hasXDR=function(){return"undefined"!==typeof c.XDomainRequest&&!this.xs&&this.enablesXDR};k.prototype.abort=function(){this.cleanup()};c.document&&(k.requestsCount=
0,k.requests={},c.attachEvent?c.attachEvent("onunload",l):c.addEventListener&&c.addEventListener("beforeunload",l,!1))}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,b,c){function f(a){var b=a&&a.forceBase64;if(!m||b)this.supportsBinary=!1;g.call(this,a)}var g=a("../transport"),h=a("parseqs"),k=a("engine.io-parser");c=
a("component-inherit");var l=a("yeast"),n=a("debug")("engine.io-client:polling");b.exports=f;var m=null!=(new (a("xmlhttprequest-ssl"))({xdomain:!1})).responseType;c(f,g);f.prototype.name="polling";f.prototype.doOpen=function(){this.poll()};f.prototype.pause=function(a){function b(){n("paused");c.readyState="paused";a()}var c=this;this.readyState="pausing";if(this.polling||!this.writable){var d=0;this.polling&&(n("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){n("pre-pause polling complete");
--d||b()}));this.writable||(n("we are currently writing - waiting to pause"),d++,this.once("drain",function(){n("pre-pause writing complete");--d||b()}))}else b()};f.prototype.poll=function(){n("polling");this.polling=!0;this.doPoll();this.emit("poll")};f.prototype.onData=function(a){var b=this;n("polling got data %s",a);k.decodePayload(a,this.socket.binaryType,function(a,c,d){if("opening"==b.readyState)b.onOpen();if("close"==a.type)return b.onClose(),!1;b.onPacket(a)});"closed"!=this.readyState&&
(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():n('ignoring poll - transport state "%s"',this.readyState))};f.prototype.doClose=function(){function a(){n("writing close packet");b.write([{type:"close"}])}var b=this;"open"==this.readyState?(n("transport open - closing"),a()):(n("transport not open - deferring close"),this.once("open",a))};f.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0;b.emit("drain")},b=this;k.encodePayload(a,
this.supportsBinary,function(a){b.doWrite(a,c)})};f.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";!1!==this.timestampRequests&&(a[this.timestampParam]=l());this.supportsBinary||a.sid||(a.b64=1);a=h.encode(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port);a.length&&(a="?"+a);var d=-1!==this.hostname.indexOf(":");return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,
"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,b,c){(function(c){function g(a){a&&a.forceBase64&&(this.supportsBinary=!1);this.perMessageDeflate=a.perMessageDeflate;h.call(this,a)}var h=a("../transport"),k=a("engine.io-parser"),l=a("parseqs"),n=a("component-inherit"),m=a("yeast"),p=a("debug")("engine.io-client:websocket"),q=c.WebSocket||c.MozWebSocket,r=q;if(!r&&"undefined"===typeof window)try{r=a("ws")}catch(x){}b.exports=g;n(g,h);g.prototype.name="websocket";g.prototype.supportsBinary=
!0;g.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent,perMessageDeflate:this.perMessageDeflate};b.pfx=this.pfx;b.key=this.key;b.passphrase=this.passphrase;b.cert=this.cert;b.ca=this.ca;b.ciphers=this.ciphers;b.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(b.headers=this.extraHeaders);this.ws=q?new r(a):new r(a,void 0,b);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=
"buffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};g.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(b){a.onData(b.data)};this.ws.onerror=function(b){a.onError("websocket error",b)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(g.prototype.onData=function(a){var b=this;setTimeout(function(){h.prototype.onData.call(b,a)},0)});g.prototype.write=
function(a){function b(){d.emit("flush");setTimeout(function(){d.writable=!0;d.emit("drain")},0)}var d=this;this.writable=!1;for(var g=a.length,h=0,l=g;h<l;h++)(function(a){k.encodePacket(a,d.supportsBinary,function(h){if(!q){var k={};a.options&&(k.compress=a.options.compress);d.perMessageDeflate&&("string"==typeof h?c.Buffer.byteLength(h):h.length)<d.perMessageDeflate.threshold&&(k.compress=!1)}try{q?d.ws.send(h):d.ws.send(h,k)}catch(l){p("websocket closed before onclose event")}--g||b()})})(a[h])};
g.prototype.onClose=function(){h.prototype.onClose.call(this)};g.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};g.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=m());this.supportsBinary||(a.b64=1);a=l.encode(a);a.length&&(a="?"+a);var d=-1!==this.hostname.indexOf(":");return b+"://"+(d?"["+this.hostname+"]":this.hostname)+
c+this.path+a};g.prototype.check=function(){return!!r&&!("__initialize"in r&&this.name===g.prototype.name)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,b,c){var f=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||f))return new XMLHttpRequest}catch(d){}try{if("undefined"!=
typeof XDomainRequest&&!c&&a)return new XDomainRequest}catch(d){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}},{"has-cors":22}],11:[function(a,b,c){function f(){}b.exports=function(a,b,c){function d(a,f){if(0>=d.count)throw Error("after called too many times");--d.count;a?(n=!0,b(a),b=c):0!==d.count||n||b(null,f)}var n=!1;c=c||f;d.count=a;return 0===a?b():d}},{}],12:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;b=b||0;c=c||d;if(a.slice)return a.slice(b,c);0>
b&&(b+=d);0>c&&(c+=d);c>d&&(c=d);if(b>=d||b>=c||0===d)return new ArrayBuffer(0);a=new Uint8Array(a);for(var d=new Uint8Array(c-b),l=0;b<c;b++,l++)d[l]=a[b];return d.buffer}},{}],13:[function(a,b,c){(function(a){c.encode=function(b){b=new Uint8Array(b);var c,d=b.length,l="";for(c=0;c<d;c+=3)l+=a[b[c]>>2],l+=a[(b[c]&3)<<4|b[c+1]>>4],l+=a[(b[c+1]&15)<<2|b[c+2]>>6],l+=a[b[c+2]&63];2===d%3?l=l.substring(0,l.length-1)+"=":1===d%3&&(l=l.substring(0,l.length-2)+"==");return l};c.decode=function(b){var c=
.75*b.length,d=b.length,l=0,n,m,p,q;"="===b[b.length-1]&&(c--,"="===b[b.length-2]&&c--);for(var r=new ArrayBuffer(c),x=new Uint8Array(r),c=0;c<d;c+=4)n=a.indexOf(b[c]),m=a.indexOf(b[c+1]),p=a.indexOf(b[c+2]),q=a.indexOf(b[c+3]),x[l++]=n<<2|m>>4,x[l++]=(m&15)<<4|p>>2,x[l++]=(p&3)<<6|q&63;return r}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,b,c){(function(a){function c(a){for(var b=0;b<a.length;b++){var d=a[b];if(d.buffer instanceof ArrayBuffer){var f=
d.buffer;if(d.byteLength!==f.byteLength){var g=new Uint8Array(d.byteLength);g.set(new Uint8Array(f,d.byteOffset,d.byteLength));f=g.buffer}a[b]=f}}}function h(a,b){b=b||{};var d=new l;c(a);for(var f=0;f<a.length;f++)d.append(a[f]);return b.type?d.getBlob(b.type):d.getBlob()}function k(a,b){c(a);return new Blob(a,b||{})}var l=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,n;try{n=2===(new Blob(["hi"])).size}catch(q){n=!1}var m;if(m=n)try{m=2===(new Blob([new Uint8Array([1,2])])).size}catch(q){m=
!1}var p=l&&l.prototype.append&&l.prototype.getBlob;a=n?m?a.Blob:k:p?h:void 0;b.exports=a}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],15:[function(a,b,c){function f(a){if(a){for(var b in f.prototype)a[b]=f.prototype[b];return a}}b.exports=f;f.prototype.on=f.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};f.prototype.once=function(a,
b){function c(){d.off(a,c);b.apply(this,arguments)}var d=this;this._callbacks=this._callbacks||{};c.fn=b;this.on(a,c);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,f=0;f<c.length;f++)if(d=c[f],d===b||d.fn===b){c.splice(f,
1);break}return this};f.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c)for(var c=c.slice(0),d=0,f=c.length;d<f;++d)c[d].apply(this,b);return this};f.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};f.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;
a.prototype.constructor=a}},{}],17:[function(a,b,c){function f(){var a;try{a=c.storage.debug}catch(b){}return a}c=b.exports=a("./debug");c.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};c.formatArgs=function(){var a=arguments,b=this.useColors;a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff);if(!b)return a;var b="color: "+this.color,a=[a[0],b,"color: inherit"].concat(Array.prototype.slice.call(a,
1)),d=0,f=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(d++,"%c"===a&&(f=d))});a.splice(f,0,b);return a};c.save=function(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}};c.load=f;c.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};var g;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)g=
chrome.storage.local;else a:{try{g=window.localStorage;break a}catch(h){}g=void 0}c.storage=g;c.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");c.formatters.j=function(a){return JSON.stringify(a)};c.enable(f())},{"./debug":18}],18:[function(a,b,c){c=b.exports=function(a){function b(){}function d(){var a=+new Date;d.diff=a-(g||a);d.prev=g;g=d.curr=a;null==d.useColors&&(d.useColors=c.useColors());null==d.color&&d.useColors&&(d.color=c.colors[f++%c.colors.length]);
var b=Array.prototype.slice.call(arguments);b[0]=c.coerce(b[0]);"string"!==typeof b[0]&&(b=["%o"].concat(b));var h=0;b[0]=b[0].replace(/%([a-z%])/g,function(a,f){if("%%"===a)return a;h++;var g=c.formatters[f];"function"===typeof g&&(a=g.call(d,b[h]),b.splice(h,1),h--);return a});"function"===typeof c.formatArgs&&(b=c.formatArgs.apply(d,b));(d.log||c.log||console.log.bind(console)).apply(d,b)}b.enabled=!1;d.enabled=!0;var n=c.enabled(a)?d:b;n.namespace=a;return n};c.coerce=function(a){return a instanceof
Error?a.stack||a.message:a};c.disable=function(){c.enable("")};c.enable=function(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,f=0;f<d;f++)b[f]&&(a=b[f].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))};c.enabled=function(a){var b,d;b=0;for(d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;b=0;for(d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1};c.humanize=a("ms");c.names=[];c.skips=[];c.formatters=
{};var f=0,g},{ms:25}],19:[function(a,b,c){(function(b){function d(a,b,f){if(!b)return c.encodeBase64Packet(a,f);var g=new FileReader;g.onload=function(){a.data=g.result;c.encodePacket(a,b,!0,f)};return g.readAsArrayBuffer(a.data)}function h(a,b,c){var d=Array(a.length);c=p(a.length,c);for(var f=function(a,c,f){b(c,function(b,c){d[a]=c;f(b,d)})},g=0;g<a.length;g++)f(g,a[g],c)}var k=a("./keys"),l=a("has-binary"),n=a("arraybuffer.slice"),m=a("base64-arraybuffer"),p=a("after"),q=a("utf8"),r=navigator.userAgent.match(/Android/i),
x=/PhantomJS/i.test(navigator.userAgent),J=r||x;c.protocol=3;var P=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},U=k(P),Z={type:"error",data:"parser error"},da=a("blob");c.encodePacket=function(a,h,k,l){"function"==typeof h&&(l=h,h=!1);"function"==typeof k&&(l=k,k=null);var n=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&n instanceof ArrayBuffer){if(h){k=a.data;h=new Uint8Array(k);k=new Uint8Array(1+k.byteLength);k[0]=P[a.type];for(a=0;a<h.length;a++)k[a+1]=
h[a];a=l(k.buffer)}else a=c.encodeBase64Packet(a,l);return a}if(da&&n instanceof b.Blob)return h?J?a=d(a,h,l):(h=new Uint8Array(1),h[0]=P[a.type],a=new da([h.buffer,a.data]),a=l(a)):a=c.encodeBase64Packet(a,l),a;if(n&&n.base64)return l("b"+c.packets[a.type]+a.data.data);h=P[a.type];void 0!==a.data&&(h+=k?q.encode(String(a.data)):String(a.data));return l(""+h)};c.encodeBase64Packet=function(a,d){var g="b"+c.packets[a.type];if(da&&a.data instanceof b.Blob){var h=new FileReader;h.onload=function(){var a=
h.result.split(",")[1];d(g+a)};return h.readAsDataURL(a.data)}var k;try{k=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(l){k=new Uint8Array(a.data);for(var n=Array(k.length),m=0;m<k.length;m++)n[m]=k[m];k=String.fromCharCode.apply(null,n)}g+=b.btoa(k);return d(g)};c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=q.decode(a)}catch(f){return Z}d=a.charAt(0);return Number(d)==d&&U[d]?1<a.length?
{type:U[d],data:a.substring(1)}:{type:U[d]}:Z}d=(new Uint8Array(a))[0];a=n(a,1);da&&"blob"===b&&(a=new da([a]));return{type:U[d],data:a}};c.decodeBase64Packet=function(a,c){var d=U[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var g=m.decode(a.substr(1));"blob"===c&&da&&(g=new da([g]));return{type:d,data:g}};c.encodePayload=function(a,b,d){"function"==typeof b&&(d=b,b=null);var f=l(a);if(b&&f)return da&&!J?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,
d);if(!a.length)return d("0:");h(a,function(a,d){c.encodePacket(a,f?b:!1,!0,function(a){d(null,a.length+":"+a)})},function(a,b){return d(b.join(""))})};c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"===typeof b&&(d=b,b=null);var f;if(""==a)return d(Z,0,1);f="";for(var g,h,k=0,l=a.length;k<l;k++)if(h=a.charAt(k),":"!=h)f+=h;else{if(""==f||f!=(g=Number(f)))return d(Z,0,1);h=a.substr(k+1,g);if(f!=h.length)return d(Z,0,1);if(h.length){f=c.decodePacket(h,
b,!0);if(Z.type==f.type&&Z.data==f.data)return d(Z,0,1);if(!1===d(f,k+g,l))return}k+=g;f=""}if(""!=f)return d(Z,0,1)};c.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));h(a,function(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})},function(a,c){var d=c.reduce(function(a,b){var c;c="string"===typeof b?b.length:b.byteLength;return a+c.toString().length+c+2},0),f=new Uint8Array(d),g=0;c.forEach(function(a){var b="string"===typeof a,c=a;if(b){for(var c=new Uint8Array(a.length),
d=0;d<a.length;d++)c[d]=a.charCodeAt(d);c=c.buffer}b?f[g++]=0:f[g++]=1;a=c.byteLength.toString();for(d=0;d<a.length;d++)f[g++]=parseInt(a[d]);f[g++]=255;c=new Uint8Array(c);for(d=0;d<c.length;d++)f[g++]=c[d]});return b(f.buffer)})};c.encodePayloadAsBlob=function(a,b){h(a,function(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var d=new Uint8Array(a.length),f=0;f<a.length;f++)d[f]=a.charCodeAt(f);a=d.buffer;c[0]=0}for(var d=(a instanceof ArrayBuffer?
a.byteLength:a.size).toString(),g=new Uint8Array(d.length+1),f=0;f<d.length;f++)g[f]=parseInt(d[f]);g[d.length]=255;da&&(a=new da([c.buffer,g.buffer,a]),b(null,a))})},function(a,c){return b(new da(c))})};c.decodePayloadAsBinary=function(a,b,d){"function"===typeof b&&(d=b,b=null);for(var f=[],g=!1;0<a.byteLength;){for(var h=new Uint8Array(a),k=0===h[0],l="",m=1;255!=h[m];m++){if(310<l.length){g=!0;break}l+=h[m]}if(g)return d(Z,0,1);a=n(a,2+l.length);l=parseInt(l);h=n(a,0,l);if(k)try{h=String.fromCharCode.apply(null,
new Uint8Array(h))}catch(x){for(k=new Uint8Array(h),h="",m=0;m<k.length;m++)h+=String.fromCharCode(k[m])}f.push(h);a=n(a,l)}var r=f.length;f.forEach(function(a,f){d(c.decodePacket(a,b,!0),f,r)})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty,
d;for(d in a)c.call(a,d)&&b.push(d);return b}},{}],21:[function(a,b,c){(function(c){var g=a("isarray");b.exports=function(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(g(a))for(var d=0;d<a.length;d++){if(b(a[d]))return!0}else if(a&&"object"==typeof a)for(d in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,d)&&b(a[d]))return!0;return!1}return b(a)}}).call(this,
"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:24}],22:[function(a,b,c){try{b.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(f){b.exports=!1}},{}],23:[function(a,b,c){var f=[].indexOf;b.exports=function(a,b){if(f)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],24:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},
{}],25:[function(a,b,c){function f(a){a=""+a;if(!(1E4<a.length)&&(a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a))){var b=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*b;case "days":case "day":case "d":return 864E5*b;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*b;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*
b;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*b;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return b}}}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}b.exports=function(a,b){b=b||{};return"string"==typeof a?f(a):b["long"]?g(a,864E5,"day")||g(a,36E5,"hour")||g(a,6E4,"minute")||g(a,1E3,"second")||a+" ms":864E5<=a?Math.round(a/864E5)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=
a?Math.round(a/1E3)+"s":a+"ms"}},{}],26:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,h=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,k=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,l=/(?:^|:|,)(?:\s*\[)+/g,n=/^\s+/,m=/\s+$/;b.exports=function(b){if("string"!=typeof b||!b)return null;b=b.replace(n,"").replace(m,"");if(a.JSON&&JSON.parse)return JSON.parse(b);if(c.test(b.replace(h,"@").replace(k,"]").replace(l,"")))return(new Function("return "+b))()}}).call(this,"undefined"!==typeof self?
self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],27:[function(a,b,c){c.encode=function(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b};c.decode=function(a){var b={};a=a.split("&");for(var c=0,d=a.length;c<d;c++){var l=a[c].split("=");b[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return b}},{}],28:[function(a,b,c){var f=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");b.exports=function(a){var b=a,c=a.indexOf("["),d=a.indexOf("]");-1!=c&&-1!=d&&(a=a.substring(0,c)+a.substring(c,d).replace(/:/g,";")+a.substring(d,a.length));a=f.exec(a||"");for(var m={},p=14;p--;)m[g[p]]=a[p]||"";-1!=c&&-1!=d&&(m.source=b,m.host=m.host.substring(1,m.host.length-1).replace(/;/g,":"),m.authority=m.authority.replace("[","").replace("]","").replace(/;/g,":"),m.ipv6uri=
!0);return m}},{}],29:[function(a,b,c){(function(a){(function(g){function h(a){for(var b=[],c=0,d=a.length,f,g;c<d;)f=a.charCodeAt(c++),55296<=f&&56319>=f&&c<d?(g=a.charCodeAt(c++),56320==(g&64512)?b.push(((f&1023)<<10)+(g&1023)+65536):(b.push(f),c--)):b.push(f);return b}function k(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");}function l(){if(P>=J)throw Error("Invalid byte index");var a=x[P]&255;P++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");
}function n(){var a,b,c,d;if(P>J)throw Error("Invalid byte index");if(P==J)return!1;a=x[P]&255;P++;if(0==(a&128))return a;if(192==(a&224)){b=l();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=l();c=l();a=(a&15)<<12|b<<6|c;if(2048<=a)return k(a),a;throw Error("Invalid continuation byte");}if(240==(a&248)&&(b=l(),c=l(),d=l(),a=(a&15)<<18|b<<12|c<<6|d,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var m="object"==typeof c&&c,p="object"==
typeof b&&b&&b.exports==m&&b,q="object"==typeof a&&a;if(q.global===q||q.window===q)g=q;var r=String.fromCharCode,x,J,P,q={version:"2.0.0",encode:function(a){a=h(a);for(var b=a.length,c=-1,d,f="";++c<b;){d=a[c];if(0==(d&4294967168))d=r(d);else{var g="";0==(d&4294965248)?g=r(d>>6&31|192):0==(d&4294901760)?(k(d),g=r(d>>12&15|224),g+=r(d>>6&63|128)):0==(d&4292870144)&&(g=r(d>>18&7|240),g+=r(d>>12&63|128),g+=r(d>>6&63|128));d=g+=r(d&63|128)}f+=d}return f},decode:function(a){x=h(a);J=x.length;P=0;a=[];
for(var b;!1!==(b=n());)a.push(b);b=a.length;for(var c=-1,d,f="";++c<b;)d=a[c],65535<d&&(d-=65536,f+=r(d>>>10&1023|55296),d=56320|d&1023),f+=r(d);return f}};if(m&&!m.nodeType)if(p)p.exports=q;else{g={}.hasOwnProperty;for(var U in q)g.call(q,U)&&(m[U]=q[U])}else g.utf8=q})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],30:[function(a,b,c){function f(a){var b="";do b=h[a%64]+b,a=Math.floor(a/64);while(0<a);return b}function g(){var a=
f(+new Date);return a!==m?(l=0,m=a):a+"."+f(l++)}for(var h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),k={},l=0,n=0,m;64>n;n++)k[h[n]]=n;g.encode=f;g.decode=function(a){var b=0;for(n=0;n<a.length;n++)b=64*b+k[a.charAt(n)];return b};b.exports=g},{}],31:[function(a,b,c){function f(a,b){"object"==typeof a&&(b=a,a=void 0);b=b||{};var c=g(a),d=c.source,f=c.id,h=c.path,h=n[f]&&h in n[f].nsps;b.forceNew||b["force new connection"]||!1===b.multiplex||h?(l("ignoring socket cache for %s",
d),d=k(d,b)):(n[f]||(l("new io instance for %s",d),n[f]=k(d,b)),d=n[f]);return d.socket(c.path)}var g=a("./url"),h=a("socket.io-parser"),k=a("./manager"),l=a("debug")("socket.io-client");b.exports=c=f;var n=c.managers={};c.protocol=h.protocol;c.connect=f;c.Manager=a("./manager");c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,b,c){function f(a,b){if(!(this instanceof f))return new f(a,b);a&&"object"==typeof a&&(b=a,a=void 0);b=b||{};
b.path=b.path||"/socket.io";this.nsps={};this.subs=[];this.opts=b;this.reconnection(!1!==b.reconnection);this.reconnectionAttempts(b.reconnectionAttempts||Infinity);this.reconnectionDelay(b.reconnectionDelay||1E3);this.reconnectionDelayMax(b.reconnectionDelayMax||5E3);this.randomizationFactor(b.randomizationFactor||.5);this.backoff=new q({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==b.timeout?2E4:b.timeout);this.readyState="closed";
this.uri=a;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];this.encoder=new k.Encoder;this.decoder=new k.Decoder;(this.autoConnect=!1!==b.autoConnect)&&this.open()}var g=a("engine.io-client"),h=a("./socket");c=a("component-emitter");var k=a("socket.io-parser"),l=a("./on"),n=a("component-bind"),m=a("debug")("socket.io-client:manager"),p=a("indexof"),q=a("backo2"),r=Object.prototype.hasOwnProperty;b.exports=f;f.prototype.emitAll=function(){this.emit.apply(this,arguments);
for(var a in this.nsps)r.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)};f.prototype.updateSocketIds=function(){for(var a in this.nsps)r.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)};c(f.prototype);f.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};f.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};f.prototype.reconnectionDelay=
function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};f.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};f.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&this.backoff.setMax(a);return this};f.prototype.timeout=
function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};f.prototype.open=f.prototype.connect=function(a){m("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;m("opening %s",this.uri);var b=this.engine=g(this.uri,this.opts),c=this;this.readyState="opening";this.skipReconnect=!1;var d=l(b,"open",function(){c.onopen();
a&&a()}),f=l(b,"error",function(b){m("connect_error");c.cleanup();c.readyState="closed";c.emitAll("connect_error",b);if(a){var d=Error("Connection error");d.data=b;a(d)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var h=this._timeout;m("connect attempt will timeout after %d",h);var k=setTimeout(function(){m("connect attempt timed out after %d",h);d.destroy();b.close();b.emit("error","timeout");c.emitAll("connect_timeout",h)},h);this.subs.push({destroy:function(){clearTimeout(k)}})}this.subs.push(d);
this.subs.push(f);return this};f.prototype.onopen=function(){m("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(l(a,"data",n(this,"ondata")));this.subs.push(l(a,"ping",n(this,"onping")));this.subs.push(l(a,"pong",n(this,"onpong")));this.subs.push(l(a,"error",n(this,"onerror")));this.subs.push(l(a,"close",n(this,"onclose")));this.subs.push(l(this.decoder,"decoded",n(this,"ondecoded")))};f.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};
f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};f.prototype.ondata=function(a){this.decoder.add(a)};f.prototype.ondecoded=function(a){this.emit("packet",a)};f.prototype.onerror=function(a){m("error",a);this.emitAll("error",a)};f.prototype.socket=function(a){function b(){~p(d.connecting,c)||d.connecting.push(c)}var c=this.nsps[a];if(!c){c=new h(this,a);this.nsps[a]=c;var d=this;c.on("connecting",b);c.on("connect",function(){c.id=d.engine.id});this.autoConnect&&b()}return c};
f.prototype.destroy=function(a){a=p(this.connecting,a);~a&&this.connecting.splice(a,1);this.connecting.length||this.close()};f.prototype.packet=function(a){m("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1;b.processPacketQueue()}))};f.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};
f.prototype.cleanup=function(){m("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};f.prototype.close=f.prototype.disconnect=function(){m("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"==this.readyState&&this.cleanup();this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};f.prototype.onclose=function(a){m("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";
this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)m("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();m("will wait %dms before reconnect attempt",b);this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(m("attempting reconnect"),
a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(m("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(m("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}};f.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":33,
"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,b,c){b.exports=function(a,b,c){a.on(b,c);return{destroy:function(){a.removeListener(b,c)}}}},{}],34:[function(a,b,c){function f(a,b){this.io=a;this.nsp=b;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.io.autoConnect&&this.open()}var g=a("socket.io-parser");c=a("component-emitter");
var h=a("to-array"),k=a("./on"),l=a("component-bind"),n=a("debug")("socket.io-client:socket"),m=a("has-binary");b.exports=f;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},q=c.prototype.emit;c(f.prototype);f.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[k(a,"open",l(this,"onopen")),k(a,"packet",l(this,"onpacket")),k(a,"close",l(this,"onclose"))]}};
f.prototype.open=f.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};f.prototype.send=function(){var a=h(arguments);a.unshift("message");this.emit.apply(this,a);return this};f.prototype.emit=function(a){if(p.hasOwnProperty(a))return q.apply(this,arguments),this;var b=h(arguments),c=g.EVENT;m(b)&&(c=g.BINARY_EVENT);c={type:c,data:b,options:{}};c.options.compress=!this.flags||!1!==
this.flags.compress;"function"==typeof b[b.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),c.id=this.ids++);this.connected?this.packet(c):this.sendBuffer.push(c);delete this.flags;return this};f.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};f.prototype.onopen=function(){n("transport is open - connecting");"/"!=this.nsp&&this.packet({type:g.CONNECT})};f.prototype.onclose=function(a){n("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;
this.emit("disconnect",a)};f.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case g.CONNECT:this.onconnect();break;case g.EVENT:this.onevent(a);break;case g.BINARY_EVENT:this.onevent(a);break;case g.ACK:this.onack(a);break;case g.BINARY_ACK:this.onack(a);break;case g.DISCONNECT:this.ondisconnect();break;case g.ERROR:this.emit("error",a.data)}};f.prototype.onevent=function(a){var b=a.data||[];n("emitting event %j",b);null!=a.id&&(n("attaching ack callback to event"),b.push(this.ack(a.id)));
this.connected?q.apply(this,b):this.receiveBuffer.push(b)};f.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=h(arguments);n("sending ack %j",d);var f=m(d)?g.BINARY_ACK:g.ACK;b.packet({type:f,id:a,data:d})}}};f.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(n("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):n("bad ack %s",a.id)};f.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");
this.emitBuffered()};f.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)q.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};f.prototype.ondisconnect=function(){n("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};f.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};
f.prototype.close=f.prototype.disconnect=function(){this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:g.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this};f.prototype.compress=function(a){this.flags=this.flags||{};this.flags.compress=a;return this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,b,c){(function(c){var g=a("parseuri"),h=a("debug")("socket.io-client:url");
b.exports=function(a,b){var d=a;b=b||c.location;null==a&&(a=b.protocol+"//"+b.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(h("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),h("parse %s",a),d=g(a));d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443"));d.path=d.path||"/";var m=-1!==d.host.indexOf(":")?"["+d.host+"]":d.host;d.id=d.protocol+"://"+
m+":"+d.port;d.href=d.protocol+"://"+m+(b&&b.port==d.port?"":":"+d.port);return d}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,b,c){function f(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}b.exports=f;f.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter)var b=
Math.random(),c=Math.floor(b*this.jitter*a),a=0==(Math.floor(10*b)&1)?a-c:a+c;return Math.min(a,this.max)|0};f.prototype.reset=function(){this.attempts=0};f.prototype.setMin=function(a){this.ms=a};f.prototype.setMax=function(a){this.max=a};f.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,b,c){var f=[].slice;b.exports=function(a,b){"string"==typeof b&&(b=a[b]);if("function"!=typeof b)throw Error("bind() requires a function");var c=f.call(arguments,2);return function(){return b.apply(a,
c.concat(f.call(arguments)))}}},{}],38:[function(a,b,c){function f(a){if(a){for(var b in f.prototype)a[b]=f.prototype[b];return a}}b.exports=f;f.prototype.on=f.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b);return this};f.prototype.once=function(a,b){function c(){this.off(a,c);b.apply(this,arguments)}c.fn=b;this.on(a,c);return this};f.prototype.off=f.prototype.removeListener=f.prototype.removeAllListeners=f.prototype.removeEventListener=
function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,f=0;f<c.length;f++)if(d=c[f],d===b||d.fn===b){c.splice(f,1);break}return this};f.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c)for(var c=c.slice(0),d=0,f=c.length;d<f;++d)c[d].apply(this,b);return this};
f.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};f.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,b,c){(function(c){var g=a("isarray");b.exports=function(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&
a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(g(a))for(var d=0;d<a.length;d++){if(b(a[d]))return!0}else if(a&&"object"==typeof a)for(d in a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,d)&&b(a[d]))return!0;return!1}return b(a)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:43}],42:[function(a,b,c){arguments[4][23][0].apply(c,
arguments)},{dup:23}],43:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,b,c){(function(b){var d=a("isarray"),h=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(h(a)){var f={_placeholder:!0,num:c.length};c.push(a);return f}if(d(a)){for(var f=Array(a.length),k=0;k<a.length;k++)f[k]=b(a[k]);return f}if("object"==
typeof a&&!(a instanceof Date)){f={};for(k in a)f[k]=b(a[k]);return f}return a}var c=[];a.data=b(a.data);a.attachments=c.length;return{packet:a,buffers:c}};c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder)return b[a.num];if(d(a))for(var f=0;f<a.length;f++)a[f]=c(a[f]);else if(a&&"object"==typeof a)for(f in a)a[f]=c(a[f]);return a}a.data=c(a.data);a.attachments=void 0;return a};c.removeBlobs=function(a,c){function n(a,k,x){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof
File){m++;var J=new FileReader;J.onload=function(){x?x[k]=this.result:p=this.result;--m||c(p)};J.readAsArrayBuffer(a)}else if(d(a))for(J=0;J<a.length;J++)n(a[J],J,a);else if(a&&"object"==typeof a&&!h(a))for(J in a)n(a[J],J,a)}var m=0,p=a;n(p);m||c(p)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,b,c){function f(){}function g(a){var b,d=!1;b=""+a.type;if(c.BINARY_EVENT==a.type||c.BINARY_ACK==
a.type)b+=a.attachments,b+="-";a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp);null!=a.id&&(d&&(b+=",",d=!1),b+=a.id);null!=a.data&&(d&&(b+=","),b+=m.stringify(a.data));n("encoded %j as %s",a,b);return b}function h(a,b){p.removeBlobs(a,function(a){var c=p.deconstructPacket(a);a=g(c.packet);c=c.buffers;c.unshift(a);b(c)})}function k(){this.reconstructor=null}function l(a){this.reconPack=a;this.buffers=[]}var n=a("debug")("socket.io-parser"),m=a("json3");a("isarray");b=a("component-emitter");var p=a("./binary"),
q=a("./is-buffer");c.protocol=4;c.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");c.CONNECT=0;c.DISCONNECT=1;c.EVENT=2;c.ACK=3;c.ERROR=4;c.BINARY_EVENT=5;c.BINARY_ACK=6;c.Encoder=f;c.Decoder=k;f.prototype.encode=function(a,b){n("encoding packet %j",a);if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)h(a,b);else{var d=g(a);b([d])}};b(k.prototype);k.prototype.add=function(a){if("string"==typeof a){a:{var b={},d=0;b.type=Number(a.charAt(0));if(null==c.types[b.type])a={type:c.ERROR,
data:"parser error"};else{if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var f="";"-"!=a.charAt(++d)&&(f+=a.charAt(d),d!=a.length););if(f!=Number(f)||"-"!=a.charAt(d))throw Error("Illegal attachments");b.attachments=Number(f)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){f=a.charAt(d);if(","==f)break;b.nsp+=f;if(d==a.length)break}else b.nsp="/";f=a.charAt(d+1);if(""!==f&&Number(f)==f){for(b.id="";++d;){f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}b.id+=a.charAt(d);if(d==a.length)break}b.id=
Number(b.id)}if(a.charAt(++d))try{b.data=m.parse(a.substr(d))}catch(g){a={type:c.ERROR,data:"parser error"};break a}n("decoded %s as %j",a,b);a=b}}c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?(this.reconstructor=new l(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(q(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");
else throw Error("Unknown type: "+a);};k.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};l.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=p.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};l.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],
48:[function(a,b,c){(function(a){b.exports=function(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],49:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(a,b,c){(function(a){(function(){function g(a,b){function c(a){if(c[a]!==ea)return c[a];var g;if("bug-string-char-index"==a)g=!1;else if("json"==a)g=c("json-stringify")&&
c("json-parse");else{var h;if("json-stringify"==a){g=b.stringify;var k="function"==typeof g&&T;if(k){(h=function(){return 1}).toJSON=h;try{k="0"===g(0)&&"0"===g(new d)&&'""'==g(new f)&&g(V)===ea&&g(ea)===ea&&g()===ea&&"1"===g(h)&&"[1]"==g([h])&&"[null]"==g([ea])&&"null"==g(null)&&"[null,null,null]"==g([ea,V,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==g({a:[h,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===g(null,h)&&"[\n 1,\n 2\n]"==g([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==g(new n(-864E13))&&
'"+275760-09-13T00:00:00.000Z"'==g(new n(864E13))&&'"-000001-01-01T00:00:00.000Z"'==g(new n(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==g(new n(-1))}catch(l){k=!1}}g=k}if("json-parse"==a){g=b.parse;if("function"==typeof g)try{if(0===g("0")&&!g(!1)){h=g('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var m=5==h.a.length&&1===h.a[0];if(m){try{m=!g('"\t"')}catch(l){}if(m)try{m=1!==g("01")}catch(l){}if(m)try{m=1!==g("1.")}catch(l){}}}}catch(l){m=!1}g=m}}return c[a]=!!g}a||(a=l.Object());b||(b=
l.Object());var d=a.Number||l.Number,f=a.String||l.String,k=a.Object||l.Object,n=a.Date||l.Date,m=a.SyntaxError||l.SyntaxError,p=a.TypeError||l.TypeError,q=a.Math||l.Math,r=a.JSON||l.JSON;"object"==typeof r&&r&&(b.stringify=r.stringify,b.parse=r.parse);var k=k.prototype,V=k.toString,W,ma,ea,T=new n(-0xc782b5b800cec);try{T=-109252==T.getUTCFullYear()&&0===T.getUTCMonth()&&1===T.getUTCDate()&&10==T.getUTCHours()&&37==T.getUTCMinutes()&&6==T.getUTCSeconds()&&708==T.getUTCMilliseconds()}catch(rb){}if(!c("json")){var Q=
c("bug-string-char-index");if(!T)var fa=q.floor,Nb=[0,31,59,90,120,151,181,212,243,273,304,334],xa=function(a,b){return Nb[b]+365*(a-1970)+fa((a-1969+(b=+(1<b)))/4)-fa((a-1901+b)/100)+fa((a-1601+b)/400)};(W=k.hasOwnProperty)||(W=function(a){var b={},c;(b.__proto__=null,b.__proto__={toString:1},b).toString!=V?W=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a}:(c=b.constructor,W=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&
this[a]===b[a])});b=null;return W.call(this,a)});ma=function(a,b){var c=0,d,f,g;(d=function(){this.valueOf=0}).prototype.valueOf=0;f=new d;for(g in f)W.call(f,g)&&c++;d=f=null;c?ma=2==c?function(a,b){var c={},d="[object Function]"==V.call(a),f;for(f in a)d&&"prototype"==f||W.call(c,f)||!(c[f]=1)||!W.call(a,f)||b(f)}:function(a,b){var c="[object Function]"==V.call(a),d,f;for(d in a)c&&"prototype"==d||!W.call(a,d)||(f="constructor"===d)||b(d);(f||W.call(a,d="constructor"))&&b(d)}:(f="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),
ma=function(a,b){var c="[object Function]"==V.call(a),d,g=!c&&"function"!=typeof a.constructor&&h[typeof a.hasOwnProperty]&&a.hasOwnProperty||W;for(d in a)c&&"prototype"==d||!g.call(a,d)||b(d);for(c=f.length;d=f[--c];g.call(a,d)&&b(d));});return ma(a,b)};if(!c("json-stringify")){var Ob={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},ga=function(a,b){return("000000"+(b||0)).slice(-a)},Za=function(a){for(var b='"',c=0,d=a.length,f=!Q||10<d,g=f&&(Q?a.split(""):a);c<d;c++){var h=a.charCodeAt(c);
switch(h){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=Ob[h];break;default:b=32>h?b+("\\u00"+ga(2,h.toString(16))):b+(f?g[c]:a.charAt(c))}}return b+'"'},Ka=function(a,b,c,d,f,g,h){var k,l,n,m,q,r,x,I,J;try{k=b[a]}catch(L){}if("object"==typeof k&&k)if(l=V.call(k),"[object Date]"!=l||W.call(k,"toJSON"))"function"==typeof k.toJSON&&("[object Number]"!=l&&"[object String]"!=l&&"[object Array]"!=l||W.call(k,"toJSON"))&&(k=k.toJSON(a));else if(k>-1/0&&k<1/0){if(xa){m=fa(k/864E5);for(l=fa(m/
365.2425)+1970-1;xa(l+1,0)<=m;l++);for(n=fa((m-xa(l,0))/30.42);xa(l,n+1)<=m;n++);m=1+m-xa(l,n);q=(k%864E5+864E5)%864E5;r=fa(q/36E5)%24;x=fa(q/6E4)%60;I=fa(q/1E3)%60;q%=1E3}else l=k.getUTCFullYear(),n=k.getUTCMonth(),m=k.getUTCDate(),r=k.getUTCHours(),x=k.getUTCMinutes(),I=k.getUTCSeconds(),q=k.getUTCMilliseconds();k=(0>=l||1E4<=l?(0>l?"-":"+")+ga(6,0>l?-l:l):ga(4,l))+"-"+ga(2,n+1)+"-"+ga(2,m)+"T"+ga(2,r)+":"+ga(2,x)+":"+ga(2,I)+"."+ga(3,q)+"Z"}else k=null;c&&(k=c.call(b,a,k));if(null===k)return"null";
l=V.call(k);if("[object Boolean]"==l)return""+k;if("[object Number]"==l)return k>-1/0&&k<1/0?""+k:"null";if("[object String]"==l)return Za(""+k);if("object"==typeof k){for(a=h.length;a--;)if(h[a]===k)throw p();h.push(k);J=[];b=g;g+=f;if("[object Array]"==l){n=0;for(a=k.length;n<a;n++)l=Ka(n,k,c,d,f,g,h),J.push(l===ea?"null":l);a=J.length?f?"[\n"+g+J.join(",\n"+g)+"\n"+b+"]":"["+J.join(",")+"]":"[]"}else ma(d||k,function(a){var b=Ka(a,k,c,d,f,g,h);b!==ea&&J.push(Za(a)+":"+(f?" ":"")+b)}),a=J.length?
f?"{\n"+g+J.join(",\n"+g)+"\n"+b+"}":"{"+J.join(",")+"}":"{}";h.pop();return a}};b.stringify=function(a,b,c){var d,f,g,k;if(h[typeof b]&&b)if("[object Function]"==(k=V.call(b)))f=b;else if("[object Array]"==k){g={};for(var l=0,n=b.length,m;l<n;m=b[l++],(k=V.call(m),"[object String]"==k||"[object Number]"==k)&&(g[m]=1));}if(c)if("[object Number]"==(k=V.call(c))){if(0<(c-=c%1))for(d="",10<c&&(c=10);d.length<c;d+=" ");}else"[object String]"==k&&(d=10>=c.length?c:c.slice(0,10));return Ka("",(m={},m[""]=
a,m),f,g,d,"",[])}}if(!c("json-parse")){var sb=f.fromCharCode,ha={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I,Da,R=function(){I=Da=null;throw m();},na=function(){for(var a=Da,b=a.length,c,d,f,g,h;I<b;)switch(h=a.charCodeAt(I),h){case 9:case 10:case 13:case 32:I++;break;case 123:case 125:case 91:case 93:case 58:case 44:return c=Q?a.charAt(I):a[I],I++,c;case 34:c="@";for(I++;I<b;)if(h=a.charCodeAt(I),32>h)R();else if(92==h)switch(h=a.charCodeAt(++I),h){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c+=
ha[h];I++;break;case 117:d=++I;for(f=I+4;I<f;I++)h=a.charCodeAt(I),48<=h&&57>=h||97<=h&&102>=h||65<=h&&70>=h||R();c+=sb("0x"+a.slice(d,I));break;default:R()}else{if(34==h)break;h=a.charCodeAt(I);for(d=I;32<=h&&92!=h&&34!=h;)h=a.charCodeAt(++I);c+=a.slice(d,I)}if(34==a.charCodeAt(I))return I++,c;R();default:d=I;45==h&&(g=!0,h=a.charCodeAt(++I));if(48<=h&&57>=h){for(48==h&&(h=a.charCodeAt(I+1),48<=h&&57>=h)&&R();I<b&&(h=a.charCodeAt(I),48<=h&&57>=h);I++);if(46==a.charCodeAt(I)){for(f=++I;f<b&&(h=a.charCodeAt(f),
48<=h&&57>=h);f++);f==I&&R();I=f}h=a.charCodeAt(I);if(101==h||69==h){h=a.charCodeAt(++I);43!=h&&45!=h||I++;for(f=I;f<b&&(h=a.charCodeAt(f),48<=h&&57>=h);f++);f==I&&R();I=f}return+a.slice(d,I)}g&&R();if("true"==a.slice(I,I+4))return I+=4,!0;if("false"==a.slice(I,I+5))return I+=5,!1;if("null"==a.slice(I,I+4))return I+=4,null;R()}return"$"},ya=function(a){var b,c;"$"==a&&R();if("string"==typeof a){if("@"==(Q?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;c||(c=!0)){a=na();if("]"==a)break;c&&
(","==a?(a=na(),"]"==a&&R()):R());","==a&&R();b.push(ya(a))}return b}if("{"==a){for(b={};;c||(c=!0)){a=na();if("}"==a)break;c&&(","==a?(a=na(),"}"==a&&R()):R());","!=a&&"string"==typeof a&&"@"==(Q?a.charAt(0):a[0])&&":"==na()||R();b[a.slice(1)]=ya(na())}return b}R()}return a},$a=function(a,b,c){c=tb(a,b,c);c===ea?delete a[b]:a[b]=c},tb=function(a,b,c){var d=a[b],f;if("object"==typeof d&&d)if("[object Array]"==V.call(d))for(f=d.length;f--;)$a(d,f,c);else ma(d,function(a){$a(d,a,c)});return c.call(a,
b,d)};b.parse=function(a,b){var c,d;I=0;Da=""+a;c=ya(na());"$"!=na()&&R();I=Da=null;return b&&"[object Function]"==V.call(b)?tb((d={},d[""]=c,d),"",b):c}}}b.runInContext=g;return b}var h={"function":!0,object:!0},k=h[typeof c]&&c&&!c.nodeType&&c,l=h[typeof window]&&window||this,n=k&&h[typeof b]&&b&&!b.nodeType&&"object"==typeof a&&a;!n||n.global!==n&&n.window!==n&&n.self!==n||(l=n);if(k)g(l,k);else{var m=l.JSON,p=l.JSON3,q=!1,r=g(l,l.JSON3={noConflict:function(){q||(q=!0,l.JSON=m,l.JSON3=p,m=p=null);
return r}});l.JSON={parse:r.parse,stringify:r.stringify}}}).call(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],51:[function(a,b,c){b.exports=function(a,b){for(var c=[],d=(b=b||0)||0;d<a.length;d++)c[d-b]=a[d];return c}},{}]},{},[31])(31)});(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):b.Ractive=a()})(this,function(){function b(e){var a;if(e&&"boolean"!==typeof e)return"undefined"!==typeof window&&document&&e?e.nodeType?e:"string"===typeof e&&(a=document.getElementById(e),!a&&document.querySelector&&(a=document.querySelector(e)),a&&a.nodeType)?a:e[0]&&e[0].nodeType?e[0]:null:null}function a(e){e&&"unknown"!==typeof e.parentNode&&e.parentNode&&
e.parentNode.removeChild(e);return e}function d(e){return null!=e&&e.toString?e:""}function c(e){for(var a=arguments.length,t=Array(1<a?a-1:0),b=1;b<a;b++)t[b-1]=arguments[b];for(var c;a=t.shift();)for(c in a)Ea.call(a,c)&&(e[c]=a[c]);return e}function f(e){for(var a=arguments.length,t=Array(1<a?a-1:0),b=1;b<a;b++)t[b-1]=arguments[b];t.forEach(function(a){for(var K in a)!a.hasOwnProperty(K)||K in e||(e[K]=a[K])});return e}function g(e){return"[object Array]"===ab.call(e)}function h(e,a){return null===
e&&null===a?!0:"object"===typeof e||"object"===typeof a?!1:e===a}function k(e){return!isNaN(parseFloat(e))&&isFinite(e)}function l(e){return e&&"[object Object]"===ab.call(e)}function n(e,a){return e.replace(/%s/g,function(){return a.shift()})}function m(e){for(var a=arguments.length,t=Array(1<a?a-1:0),b=1;b<a;b++)t[b-1]=arguments[b];e=n(e,t);throw Error(e);}function p(){za.DEBUG&&Rb.apply(null,arguments)}function q(e){for(var a=arguments.length,t=Array(1<a?a-1:0),b=1;b<a;b++)t[b-1]=arguments[b];
e=n(e,t);ub(e,t)}function r(e){for(var a=arguments.length,t=Array(1<a?a-1:0),b=1;b<a;b++)t[b-1]=arguments[b];e=n(e,t);ud[e]||(ud[e]=!0,ub(e,t))}function x(){za.DEBUG&&q.apply(null,arguments)}function J(){za.DEBUG&&r.apply(null,arguments)}function P(e,a,t){return(a=U(e,a,t))?a[e][t]:null}function U(e,a,t){for(;a;){if(t in a[e])return a;if(a.isolated)return null;a=a.parent}}function Z(e){return function(){return e}}function da(e){var a="",t,b,c,d,f,g,h;if(!vb[e]){for(b=[];a.length<e;)a+=1;a=parseInt(a,
2);c=function(e){return"1"===e};for(d=0;d<=a;d+=1){for(t=d.toString(2);t.length<e;)t="0"+t;h=[];g=t.length;for(f=0;f<g;f++)h.push(c(t[f]));b[d]=h}vb[e]=b}return vb[e]}function jd(e,a,t,b){var c=e[a];if(!c||!c.equalsOrStartsWith(b)&&c.equalsOrStartsWith(t))return e[a]=c?c.replace(t,b):b,!0}function L(e){if(null==e)return e;Sb.hasOwnProperty(e)||(Sb[e]=new vd(e));return Sb[e]}function qb(e,a){function t(a,K){var t,b;t=K.isRoot?[].concat(Object.keys(e.viewmodel.data),Object.keys(e.viewmodel.mappings),
Object.keys(e.viewmodel.computations)):(b=(t=e.viewmodel.wrapped[K.str])?t.get():e.viewmodel.get(K))?Object.keys(b):null;t&&t.forEach(function(e){"_ractive"===e&&g(b)||a.push(K.join(e))});return a}var b,c,d;b=a.str.split(".");for(d=[Fa];c=b.shift();)"*"===c?d=d.reduce(t,[]):d[0]===Fa?d[0]=L(c):d=d.map(vg(c));return d}function vg(e){return function(a){return a.join(e)}}function la(e){return e?e.replace(Ag,".$1"):""}function V(e){this.event=e;this.method="on"+e;this.deprecate=Bg[e]}function W(e,a){for(var t=
0,b=e.length;t<b;t++)if(e[t]==a)return!0;return!1}function ma(e,a){var t;if(!g(e)||!g(a)||e.length!==a.length)return!1;for(t=e.length;t--;)if(e[t]!==a[t])return!1;return!0}function ea(e){return"string"===typeof e?[e]:void 0===e?[]:e}function T(e){return e[e.length-1]}function Q(e,a){var t=e.indexOf(a);-1!==t&&e.splice(t,1)}function fa(e){for(var a=[],t=e.length;t--;)a[t]=e[t];return a}function Nb(e,a){return function(){for(var t;t=e.shift();)t(a)}}function xa(e,a,t,b){var c;if(a===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");
if(a instanceof ja)a.then(t,b);else if(!a||"object"!==typeof a&&"function"!==typeof a)t(a);else{try{c=a.then}catch(d){b(d);return}if("function"===typeof c){var f,g,h;g=function(a){f||(f=!0,xa(e,a,t,b))};h=function(e){f||(f=!0,b(e))};try{c.call(a,g,h)}catch(d){f||(b(d),f=!0)}}else t(a)}}function Ob(e,a){var b;void 0!=e&&"string"!==typeof e&&(e=e.str);if("."===a)return L(e);b=e?e.split("."):[];if("../"===a.substr(0,3)){for(;"../"===a.substr(0,3);){if(!b.length)throw Error('Could not resolve reference - too many "../" prefixes');
b.pop();a=a.substring(3)}b.push(a);return L(b.join("."))}return e?L(e+a.replace(/^\.\//,".")):L(a.replace(/^\.\/?/,""))}function ga(e,a,b,c){var d,f,g,h;if(a.isRoot)return a;for(f=a.firstKey;b;)if(d=b.context,b=b.parent,d&&(h=!0,(g=e.viewmodel.get(d))&&("object"===typeof g||"function"===typeof g)&&f in g))return d.join(a.str);if(Ka(e.viewmodel,f))return a;if(e.parent&&!e.isolated&&(h=!0,b=e.component.parentFragment,f=L(f),b=ga(e.parent,f,b,!0)))return e.viewmodel.map(f,{origin:e.parent.viewmodel,
keypath:b}),a;if(!c&&!h)return e.viewmodel.set(a,void 0),a}function Za(e,a){var b;!e.parent||e.isolated||Ka(e.viewmodel,a)||(a=L(a),(b=ga(e.parent,a,e.component.parentFragment,!0))&&e.viewmodel.map(a,{origin:e.parent.viewmodel,keypath:b}))}function Ka(e,a){return""===a||a in e.data||a in e.computations||a in e.mappings}function sb(e){e.teardown()}function ha(e){e.unbind()}function I(e){e.unrender()}function Da(e){e.cancel()}function R(e){e.detach()}function na(e){e.detachNodes()}function ya(e){!e.ready||
e.outros.length||e.outroChildren||(e.outrosComplete||(e.parent?e.parent.decrementOutros(e):e.detachNodes(),e.outrosComplete=!0),e.intros.length||e.totalChildren||("function"===typeof e.callback&&e.callback(),e.parent&&e.parent.decrementTotal()))}function $a(){for(var e,a,b;M.ractives.length;)a=M.ractives.pop(),(b=a.viewmodel.applyChanges())&&Cg.fire(a,b);var c;for(a=La.length;a--;)if(b=La[a],b.keypath)La.splice(a,1);else if(c=wb(b.root,b.ref,b.parentFragment))(e||(e=[])).push({item:b,keypath:c}),
La.splice(a,1);e&&e.forEach(tb);for(e=0;e<M.views.length;e+=1)M.views[e].update();for(e=M.views.length=0;e<M.tasks.length;e+=1)M.tasks[e]();M.tasks.length=0;if(M.ractives.length)return $a()}function tb(e){e.item.resolve(e.keypath)}function rb(e,a,b,c){var d,f;a&&(a=L(la(a)));null!==a&&(f=e.viewmodel.get(a));Tb.abort(a,e);if(h(f,b))return c.complete&&c.complete(c.to),Dg;c.easing&&(d="function"===typeof c.easing?c.easing:e.easing[c.easing],"function"!==typeof d&&(d=null));a=new Eg({keypath:a,from:f,
to:b,root:e,duration:void 0===c.duration?400:c.duration,easing:d,interpolator:c.interpolator,step:c.step,complete:c.complete});Tb.add(a);e._animations.push(a);return a}function kd(e){var a;if((a=e.parentFragment)||e.component&&(a=e.component.parentFragment))return a.owner}function ld(e){var a;a=[e];for(e=kd(e);e;)a.push(e),e=kd(e);return a}function md(e,a,b,c,d){d=void 0===d?!1:d;var f,g,h=!0;xb.enqueue(e,b);for(g=a.length;0<=g;g--)if(f=e._subs[a[g]]){var k=e,l=b,m=c,n=null,p=!1;l&&!l._noArg&&(m=
[l].concat(m));f=f.slice();for(var q=0,r=f.length;q<r;q+=1)!1===f[q].apply(k,m)&&(p=!0);l&&!l._noArg&&p&&(n=l.original)&&(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation());h=!p&&h}xb.dequeue(e);e.parent&&h&&(d&&e.component&&(a=L(e.component.name+"."+a[a.length-1]).wildcardMatches(),b&&(b.component=e)),md(e.parent,a,b,c))}function nd(e){Fg.fire(e);e.findAllComponents("*").forEach(function(e){nd(e.instance)})}function wg(e,a,b){switch(a){case "splice":for(void 0!==b[0]&&0>
b[0]&&(b[0]=e.length+Math.max(b[0],-e.length));2>b.length;)b.push(0);b[1]=Math.min(b[1],e.length-b[0]);return b;case "sort":case "reverse":return null;case "pop":return e.length?[e.length-1,1]:[0,0];case "push":return[e.length,0].concat(b);case "shift":return[0,e.length?1:0];case "unshift":return[0,0].concat(b)}}function xg(e){return e.trim?e.trim():e.replace(/^\s+/,"").replace(/\s+$/,"")}function yg(e){return e.str}function od(e,a){a&&a.constructor!==Object&&"function"!==typeof a&&("object"!==typeof a?
m("data option must be an object or a function, `"+a+"` is not valid"):x("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"));var b="function"===typeof e,c="function"===typeof a;a||b||(a={});return b||c?function(){var d=c?pd(a,this):a,f=b?pd(e,this):e;return qd(d,f)}:qd(a,e)}function pd(e,a){var b=e.call(a);if(b)return"object"!==typeof b&&m("Data function must return an object"),b.constructor!==Object&&J("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),
b}function qd(e,a){if(e&&a){for(var b in a)b in e||(e[b]=a[b]);return e}return e||a}function zg(e,a){var b,c,d;b=e.pos;if(e.matchString("\\"+a.open)){if(0===b||"\\"!==e.str[b-1])return a.open}else if(!e.matchString(a.open))return null;if(c=Gg(e)){if(!e.matchString(a.close))return null;a.open=c[0];a.close=c[1];e.sortMustacheTags();return Hg}e.allowWhitespace();e.matchString("/")&&(--e.pos,d=e.pos,wd(e)?e.pos=d:(e.pos=d-a.close.length,e.error("Attempted to close a section that wasn't open")));for(d=
0;d<a.readers.length;d+=1)if(c=a.readers[d],c=c(e,a))return a.isStatic&&(c.s=!0),e.includeLinePositions&&(c.p=e.getLinePos(b)),c;e.pos=b;return null}function rd(e){var a,b,c;a=e.pos;b=Ig(e);if(null===b)return null;b=[b];return e.matchString(",")?(c=rd(e),c?b.concat(c):(e.pos=a,null)):b}function Pb(e){function a(e){b.push(e)}var b,c;e.allowWhitespace();c=X(e);if(null===c)return null;b=[c];e.allowWhitespace();e.matchString(",")&&(c=Pb(e),null===c&&e.error("Expected a JavaScript expression"),c.forEach(a));
return b}function Ja(e,a){var b,c;30===e.t&&-1===a.indexOf(e.n)&&a.unshift(e.n);if(c=e.o||e.m)if(l(c))Ja(c,a);else for(b=c.length;b--;)Ja(c[b],a);e.x&&Ja(e.x,a);e.r&&Ja(e.r,a);e.v&&Ja(e.v,a)}function sd(e,a){var b;53===a?(b={t:4,n:50,f:[]},Aa(td(e),b)):(b={t:4,n:51,f:[]},Aa(e,b));return b}function td(e){return 33===e.t&&"!"===e.s?e.o:{t:33,s:"!",o:{t:34,x:e}}}function Qb(e){if(1===e.length)return e[0];var a={t:34,x:e[0]};e=Qb(e.slice(1));return{t:36,s:"&&",o:[a,{t:34,x:e}]}}function Ub(e){return e.replace(xd,
function(e,a){var b;return(b="#"!==a[0]?Vb[a]:"x"===a[1]?parseInt(a.substring(2),16):parseInt(a.substring(1),10))?String.fromCharCode(b?10===b?32:128>b?b:159>=b?yd[b-128]:55296>b?b:57343>=b?65533:65535>=b?b:65533:65533):e})}function Wb(e){return e.replace(zd,"&amp;").replace(Ad,"&lt;").replace(Bd,"&gt;")}function Ma(e){return"string"===typeof e}function va(e,a,b,c,d){var f,h,k,l,m,n,p;for(f=1;f<e.length;f+=1)h=e[f],k=e[f-1],p=e[f-2],Ma(h)&&(9===k.t||10===k.t)&&Ma(p)&&Na.test(p)&&Oa.test(h)&&(e[f-
2]=p.replace(Na,"\n"),e[f]=h.replace(Oa,"")),(4===h.t||5===h.t)&&h.f&&Ma(k)&&Na.test(k)&&Ma(h.f[0])&&Oa.test(h.f[0])&&(e[f-1]=k.replace(Na,"\n"),h.f[0]=h.f[0].replace(Oa,"")),Ma(h)&&(4===k.t||5===k.t)&&k.f&&(p=T(k.f),Ma(p)&&Na.test(p)&&Oa.test(h)&&(k.f[k.f.length-1]=p.replace(Na,"\n"),e[f]=h.replace(Oa,"")));for(f=e.length;f--;)h=e[f],h.exclude?e.splice(f,1):a&&9===h.t&&e.splice(f,1);Cd(e,c?Dd:null,d?Ed:null);for(f=e.length;f--;){h=e[f];if(h.f){d=7===h.t&&Jg.test(h.e);c=b||d;!b&&d&&Cd(h.f,Kg,Lg);
if(!c){d=e[f-1];k=e[f+1];if(!d||"string"===typeof d&&Ed.test(d))l=!0;if(!k||"string"===typeof k&&Dd.test(k))m=!0}va(h.f,a,c,l,m)}h.l&&(va(h.l.f,a,b,l,m),e.splice(f+1,0,h.l),delete h.l);if(h.a)for(n in h.a)h.a.hasOwnProperty(n)&&"string"!==typeof h.a[n]&&va(h.a[n],a,b,l,m);h.m&&va(h.m,a,b,l,m);if(h.v)for(n in h.v)h.v.hasOwnProperty(n)&&(g(h.v[n].n)&&va(h.v[n].n,a,b,l,m),g(h.v[n].d)&&va(h.v[n].d,a,b,l,m))}for(f=e.length;f--;)"string"===typeof e[f]&&("string"===typeof e[f+1]&&(e[f]+=e[f+1],e.splice(f+
1,1)),b||(e[f]=e[f].replace(Mg," ")),""===e[f]&&e.splice(f,1))}function Fd(e){var a,b,c,d;a=e.pos;b=e.matchPattern(Ng);if(!b)return null;c=b;d=e.tags.map(function(e){return e.open});-1!==(c=Xb(c,d))&&(b=b.substr(0,c),e.pos=a+b.length);return b}function Gd(e,a){var b,c,d;b=e.pos;if(!e.matchString(a))return null;e.inAttribute=a;c=[];for(d=Pa(e)||Hd(e,a);null!==d;)c.push(d),d=Pa(e)||Hd(e,a);if(!e.matchString(a))return e.pos=b,null;e.inAttribute=!1;return c}function Hd(e,a){var b,c;c=e.remaining();b=
e.tags.map(function(e){return e.open});b.push(a);b=Xb(c,b);-1===b&&e.error("Quoted attribute value must have a closing quote");if(!b)return null;e.pos+=b;return c.substr(0,b)}function Og(e){var a;e.allowWhitespace();a=Id(e);if(!a)return null;a={key:a};e.allowWhitespace();if(!e.matchString(":"))return null;e.allowWhitespace();e=e.read();if(!e)return null;a.value=e.v;return a}function Pg(e,a){var b,c;b=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(a);c=Jd[e];return b&&c?!~c.indexOf(b[1].toLowerCase()):!0}function Kd(e,
a){if(!yb)throw Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return yb(e,a||this.options)}function Ld(e){return e&&"#"===e[0]}function Md(e,a){var b=Qg(ia.getParseOptions(e));return a.call(e,b)}function Qg(e){var a=O(ia);a.parse=function(a,b){return ia.parse(a,b||e)};return a}function zb(e,a){if("string"===typeof e)"#"===e[0]&&(e=ia.fromId(e)),e=yb(e,ia.getParseOptions(a));else{if(void 0==e)throw Error("The template cannot be "+
e+".");if("number"!==typeof e.v)throw Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(3!==e.v)throw Error("Mismatched template version (expected 3, got "+e.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");}return e}function Nd(e,a,b){if(a)for(var c in a)if(b||!e.hasOwnProperty(c))e[c]=a[c]}function Rg(e,a){var b,c;a in
e?(b=e[a],c="function"===typeof b?b:function(){return b}):c=Y;return c}function Od(e,a,b){return"options."+e+" has been deprecated in favour of options."+a+"."+(b?" You cannot specify both options, please use options."+a+".":"")}function bb(e,a,b){if(a in e){if(b in e)throw Error(Od(a,b,!0));x(Od(a,b));e[b]=e[a]}}function Pd(e,a,b,c){Sg(c);for(var d in c)if(Qd.hasOwnProperty(d)){var f=c[d];"el"!==d&&"function"===typeof f?x(""+d+" is a Ractive option that does not expect a function and will be ignored",
"init"===e?b:null):b[d]=f}cb.forEach(function(d){d[e](a,b,c)});Rd[e](a,b,c);Yb[e](a,b,c);Sd[e](a,b,c);Tg(a.prototype,b,c)}function Tg(e,a,b){for(var c in b)if(!Td[c]&&b.hasOwnProperty(c)){var d=b[c];"function"===typeof d&&(d=Ug(e,c,d));a[c]=d}}function Ud(e){var a={};e.forEach(function(e){return a[e]=!0});return a}function Zb(e,a,b,c){c=c||0;return e.map(function(e){var d,f;if(e.text)return e.text;if(e.fragments)return e.fragments.map(function(e){return Zb(e.items,a,b,c)}).join("");d=b+"-"+c++;e=
e.keypath&&(f=e.root.viewmodel.wrapped[e.keypath.str])?f.value:e.getValue();a[d]=e;return"${"+d+"}"}).join("")}function $b(e,a){for(var b,c=0;c<a.prop.length;c++)if(void 0!==(b=e[a.prop[c]]))return b}function Qa(e,a){var b={},c,d,f,g,h,k=!1;a||(b.refs=c={});for(;e;){if((h=e.owner)&&(d=h.indexRefs)){if(a&&(f=h.getIndexRef(a)))return b.ref={fragment:e,ref:f},b;if(!a)for(g in d)f=d[g],c[f.n]||(k=!0,c[f.n]={fragment:e,ref:f})}!e.parent&&e.owner&&e.owner.component&&e.owner.component.parentFragment&&!e.owner.component.instance.isolated?
(b.componentBoundary=!0,e=e.owner.component.parentFragment):e=e.parent}if(k)return b}function Vg(e){return e.call()}function Wg(e,a){return e.replace(/_([0-9]+)/g,function(e,b){var c;if(+b>=a.length)return"_"+b;c=a[b];return void 0===c?"undefined":c.isSpecial?(c=c.value,"number"===typeof c?c:'"'+c+'"'):c.str})}function Xg(e){return void 0!==e&&"@"!==e[0]}function Yg(e,a){var b,c,d;if(e.__ractive_nowrap)return e;c="__ractive_"+a._guid;if(b=e[c])return b;if(/this/.test(e.toString())){oa(e,c,{value:Zg.call(e,
a),configurable:!0});for(d in e)e.hasOwnProperty(d)&&(e[c][d]=e[d]);a._boundFunctions.push({fn:e,prop:c});return e[c]}oa(e,"__ractive_nowrap",{value:e});return e.__ractive_nowrap}function $g(e){return e.value}function ah(e){return void 0!=e}function bh(e){e.forceResolution()}function ch(e){e.rebind("","")}function db(e,a,b){if(52===a&&e.indexRefs&&e.indexRefs[0]){var c=e.indexRefs[0];(b&&"i"===c.t||!b&&"k"===c.t)&&!b&&(e.length=0,e.fragmentsToUnrender=e.fragments.slice(0),e.fragmentsToUnrender.forEach(function(e){return e.unbind()}));
c.t=b?"k":"i"}e.currentSubtype=a}function dh(e,a){var b={template:e.template.f||[],root:e.root,pElement:e.parentFragment.pElement,owner:e};e.hasContext=!0;if(e.subtype)switch(e.subtype){case 50:return e.hasContext=!1,ac(e,a,!1,b);case 51:return e.hasContext=!1,ac(e,a,!0,b);case 53:return bc(e,b);case 54:return b=a?bc(e,b):Vd(e),b;case 52:if(l(a))return db(e,e.subtype,!0),Wd(e,a,b)}e.ordered=!!cc.test(ab.call(a));if(e.ordered){db(e,52,!1);var c,d,f;d=a.length;if(d===e.length)b=!1;else{if(d<e.length)e.fragmentsToUnrender=
e.fragments.splice(d,e.length-d),e.fragmentsToUnrender.forEach(ha);else if(d>e.length)for(c=e.length;c<d;c+=1)b.context=e.keypath.join(c),b.index=c,f=new S(b),e.fragmentsToRender.push(e.fragments[c]=f);e.length=d;b=!0}return b}if(l(a)||"function"===typeof a){if(e.template.i)return db(e,52,!0),Wd(e,a,b);db(e,53,!1);return bc(e,b)}db(e,50,!1);e.hasContext=!1;return ac(e,a,!1,b)}function Wd(e,a,b){var c,d,f,g,h,k;f=e.hasKey||(e.hasKey={});for(d=e.fragments.length;d--;)g=e.fragments[d],g.key in a||(h=
!0,g.unbind(),e.fragmentsToUnrender.push(g),e.fragments.splice(d,1),f[g.key]=!1);for(d=e.fragments.length;d--;)g=e.fragments[d],g.index!==d&&(g.index=d,(k=g.registeredIndexRefs)&&k.forEach(eh));d=e.fragments.length;for(c in a)f[c]||(h=!0,b.context=e.keypath.join(c),b.key=c,b.index=d++,g=new S(b),e.fragmentsToRender.push(g),e.fragments.push(g),f[c]=!0);e.length=e.fragments.length;return h}function bc(e,a){var b;if(!e.length)return a.context=e.keypath,a.index=0,b=new S(a),e.fragmentsToRender.push(e.fragments[0]=
b),e.length=1,!0}function ac(e,a,b,c){var d,f,g;d=cc.test(ab.call(a))&&0===a.length;f=!1;if(!cc.test(ab.call(a))&&l(a))for(g in f=!0,a){f=!1;break}if(b?d||f||!a:a&&!d&&!f){if(!e.length)return c.index=0,a=new S(c),e.fragmentsToRender.push(e.fragments[0]=a),e.length=1,!0;if(1<e.length)return e.fragmentsToUnrender=e.fragments.splice(1),e.fragmentsToUnrender.forEach(ha),!0}else return Vd(e)}function Vd(e){if(e.length)return e.fragmentsToUnrender=e.fragments.splice(0,e.fragments.length).filter(fh),e.fragmentsToUnrender.forEach(ha),
e.length=e.fragmentsToRender.length=0,!0}function fh(e){return e.rendered}function eh(e){e.rebind("","")}function gh(e){e.unrender(!0)}function hh(e){e.unrender(!1)}function dc(e){return Xd[e]||(Xd[e]=wa(e))}function ih(e){return e.selected}function jh(e,a){var b=a?"svg":"div";ec.innerHTML="<"+b+" "+e+"></"+b+">";return fa(ec.childNodes[0].attributes)}function Yd(){var e;N.call(this);e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath);this.value=void 0==e?"":e}function kh(){var e=this._ractive.binding,
a=this;e._timeout&&clearTimeout(e._timeout);e._timeout=setTimeout(function(){e.rendered&&N.call(a);e._timeout=void 0},e.element.lazy)}function lh(e){return e.isChecked}function mh(e){return e.element.getAttribute("value")}function Ba(e){return e&&e.isBindable}function nh(e){var a,b;a=this.root;if("function"!==typeof a[this.method])throw Error('Attempted to call a non-existent method ("'+this.method+'")');b=this.keypaths.map(function(b){var t,c,d;if(void 0!==b){if(b.eventObject){if(t=e,c=b.refinements.length)for(d=
0;d<c;d+=1)t=t[b.refinements[d]]}else t=a.viewmodel.get(b);return t}});xb.enqueue(a,e);b=this.fn.apply(null,b);a[this.method].apply(a,b);xb.dequeue(a)}function oh(e){eb(this.root,this.getAction(),{event:e,args:this.params})}function ph(e){var a=this.dynamicParams.getArgsList();"string"===typeof a&&(a=a.substr(1,a.length-2));eb(this.root,this.getAction(),{event:e,args:a})}function qh(e){fc[e]||(fc[e]=function(a){var b=a.node._ractive;a.index=b.index;a.keypath=b.keypath.str;a.context=b.root.viewmodel.get(b.keypath);
b.events[e].fire(a)});return fc[e]}function rh(){var e=this;this.dirty||(this.dirty=!0,w.scheduleTask(function(){sh(e);e.dirty=!1}));this.parentFragment.bubble()}function sh(e){var a,b,c,d;if(a=e.node)a=fa(a.options),b=e.getAttribute("value"),c=e.getAttribute("multiple"),void 0!==b?(a.forEach(function(e){var a;a=e._ractive?e._ractive.value:e.value;if(c)a:{for(var K=b.length;K--;)if(b[K]==a){a=!0;break a}a=void 0}else a=b==a;a&&(d=!0);e.selected=a}),d||(a[0]&&(a[0].selected=!0),e.binding&&e.binding.forceUpdate())):
e.binding&&e.binding.forceUpdate()}function th(e){var a;(e.attributes.width||e.attributes.height)&&e.node.addEventListener("load",a=function(){var b=e.getAttribute("width"),c=e.getAttribute("height");void 0!==b&&e.node.setAttribute("width",b);void 0!==c&&e.node.setAttribute("height",c);e.node.removeEventListener("load",a,!1)},!1)}function Zd(){var e=this._ractive.proxy;w.start();e.formBindings.forEach(uh);w.end()}function uh(e){e.root.viewmodel.set(e.keypath,e.resetValue)}function $d(e){return e}
function ae(){Ra.hidden=document[fb]}function gc(){Ra.hidden=!0}function hc(){Ra.hidden=!1}function vh(e){var a,b;return(a=e.getAttribute("xmlns"))?a:"svg"===e.name?ka.svg:(b=e.parent)?"foreignObject"===b.name?ka.html:b.node.namespaceURI:e.root.el.namespaceURI}function wh(e){var a,b,c;if(e.select&&(b=e.select.getAttribute("value"),void 0!==b))if(a=e.getAttribute("value"),e.select.node.multiple&&g(b))for(c=b.length;c--;){if(a==b[c]){e.node.selected=!0;break}}else e.node.selected=a==b}function xh(e){var a,
b,c,d;a=e.root;do for(b=a._liveQueries,c=b.length;c--;)d=b[c],d=b["_"+d],d._test(e)&&(e.liveQueries||(e.liveQueries=[])).push(d);while(a=a.parent)}function be(e){return(e=e.toString())?" "+e:""}function yh(e){var a,b;for(b=e.liveQueries.length;b--;)a=e.liveQueries[b],a._remove(e.node)}function zh(e,a){var b=Ah.exec(a)[0];return null===e||b.length<e.length?b:e}function ce(e,a){if(e)return e.partials.hasOwnProperty(a)?e:ce(e._Parent,a)}function de(e,a){if(a){if(a.template&&a.template.p&&a.template.p[e])return a.template.p[e];
if(a.parentFragment&&a.parentFragment.owner)return de(e,a.parentFragment.owner)}}function ee(e,a){var b,c=U("components",e,a);if(c&&(b=c.components[a],!b._Parent)){var d=b.bind(c);d.isOwner=c.components.hasOwnProperty(a);b=d();if(!b){x('A function was specified for "%s" %s, but no %s was returned',a,"component","component",{ractive:e});return}"string"===typeof b&&(b=ee(e,b));b._fn=d;c.components[a]=b}return b}function Bh(e,a,b){function c(e){var b,t;e.value=a;e.updating||(t=e.ractive,b=e.keypath,
e.updating=!0,w.start(t),t.viewmodel.mark(b),w.end(),e.updating=!1)}var d,f,g,h,k;d=e.obj;f=e.prop;if(b&&!b.configurable){if("length"===f)return;throw Error('Cannot use magic mode with property "'+f+'" - object is not configurable');}b&&(g=b.get,h=b.set);k=function(e){h&&h(e);a=g?g():e;k._ractiveWrappers.forEach(c)};k._ractiveWrappers=[e];Object.defineProperty(d,f,{get:g||function(){return a},set:k,enumerable:!0,configurable:!0})}function Ch(e){var a;ic[e]||(a=e?e+".":"",ic[e]=function(b,c){var d;
if("string"===typeof b)return d={},d[a+b]=c,d;if("object"===typeof b){if(a){d=e;var f={},g;if(d){d+=".";for(g in b)b.hasOwnProperty(g)&&(f[d+g]=b[g]);d=f}else d=b}else d=b;return d}});return ic[e]}function fe(e,a,b){var c,d;a=a.str||a;(a=(c=e.depsMap.patternObservers)&&c[a])&&a.forEach(function(a){d=b.join(a.lastKey);ge(e,d);fe(e,a,d)})}function ge(e,a){e.patternObservers.forEach(function(e){e.regex.test(a.str)&&e.update(a)})}function he(e,a,b,c){var d;if(c=ie(e,b,c))d=e.get(b),c.forEach(function(e){a&&
e.refineValue?a.push(e):e.setValue(d)})}function Dh(e,a,b){a.forEach(function(a){for(var K=!1,c=0,d=b.length,f=[];c<d;){var g=b[c];if(g===a.keypath){K=!0;break}g.slice(0,a.keypath.length)===a.keypath&&f.push(g);c++}K&&a.setValue(e.get(a.keypath));f.length&&a.refineValue(f)})}function je(e,a,b){function c(e){e.forEach(d);e.forEach(f)}function d(a){var K=ie(e,a,b);K&&g.push({keypath:a,deps:K})}function f(a){var K;(K=e.depsMap[b][a.str])&&c(K)}var g=[];c(a);g.forEach(function(a){var b=e.get(a.keypath);
a.deps.forEach(function(e){return e.setValue(b)})})}function ie(e,a,b){return(e=e.deps[b])?e[a.str]:null}function Eh(e){return JSON.stringify(e)}function Fh(e){if(!0===e)return Eh;if("string"===typeof e)return jc[e]||(jc[e]=function(a){return a[e]}),jc[e];if("function"===typeof e)return e;throw Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");}function Gh(e,a,b){var c,d,f,g;f=function(){c.set?c.set(a.lastKey,b):(d=c.get(),
g())};g=function(){d||(d=ke.test(a.lastKey)?[]:{},e.set(a.parent,d,{silent:!0}));d[a.lastKey]=b};(c=e.wrapped[a.parent.str])?f():(d=e.get(a.parent),(c=e.wrapped[a.parent.str])?f():g())}function Hh(e){return"function"===typeof e.shuffle}function kc(e){this.hook=new aa(e);this.inProcess={};this.queue={}}function le(e,a){return e[a._guid]||(e[a._guid]=[])}function me(e,a){var b=le(e.queue,a);for(e.hook.fire(a);b.length;)me(e,b.shift());delete e.queue[a._guid]}function ne(e,a){var b,c;b="return ("+a.replace(Ih,
function(e,a){c=!0;return'__ractive.get("'+a+'")'})+");";c&&(b="var __ractive = this; "+b);b=new Function(b);return c?b.bind(e):b}function lc(e,a){return/this/.test(e.toString())?e.bind(a):e}function Jh(e,a,b){function c(a){"string"===typeof a&&((a=P("adaptors",e,a))||m(Sa(a,"adaptor")));return a}var d;a=a.map(c);d=ea(b.adapt).map(c);d=Kh(a,d);a="magic"in b?b.magic:e.magic;b="modifyArrays"in b?b.modifyArrays:e.modifyArrays;if(a){if(!Ab)throw Error("Getters and setters (magic mode) are not supported in this browser");
b&&d.push(Lh);d.push(Bb)}b&&d.push(mc);return d}function Kh(e,a){for(var b=e.slice(),c=a.length;c--;)~b.indexOf(a[c])||b.push(a[c]);return b}function Mh(e,a){e._guid="r-"+Nh++;e._subs=O(null);e._config={};e._twowayBindings=O(null);e._animations=[];e.nodes={};e._liveQueries=[];e._liveComponentQueries=[];e._boundFunctions=[];e._observers=[];a.component?(e.parent=a.parent,e.container=a.container||null,e.root=e.parent.root,e.component=a.component,a.component.instance=e,e._inlinePartials=a.inlinePartials):
(e.root=e,e.parent=e.container=null)}function Oh(){throw Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead");}function oe(e,a,b){this.parentFragment=e.parentFragment;this.callback=b;this.fragment=new S({template:a,root:e.root,owner:this});this.update()}function Ph(e,a,b){var c;a.r?c=gb(e,a.r,b):a.x?c=new nc(e,e.parentFragment,a.x,b):a.rx&&(c=new pe(e,a.rx,b));return c}function Qh(e,a,b,c){"string"!==typeof c&&m("Components currently only support simple events - you cannot include arguments. Sorry!");
e.on(b,function(){var e,b;arguments.length&&arguments[0]&&arguments[0].node&&(e=Array.prototype.shift.call(arguments));b=Array.prototype.slice.call(arguments);eb(a,c,{event:e,args:b});return!1})}function Rh(e){if("string"===typeof e.template)return new Sh(e);switch(e.template.t){case 16:return new Th(e);case 2:return new Uh(e);case 4:return new Vh(e);case 3:return new Wh(e);case 7:var a=void 0;return(a=Xh(e.parentFragment.root,e.template.e))?new Yh(e,a):new Zh(e);case 8:return new $h(e);case 9:return new ai(e);
case 18:return new bi(e);default:throw Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!");}}function ci(e){return e.toString()}function di(e){return e.toString(!0)}function ei(e){e.unbind&&e.unbind()}function qe(e,a,b){a=L(la(a));a.isPattern?qb(e,a).forEach(function(a){e.viewmodel.set(a,b)}):e.viewmodel.set(a,b)}function fi(e){delete e.fn[e.prop]}function gi(e,a){var b={},c=[];a.forEach(function(e){var a,K;if(!e.radioName||e.element.node.checked)e.checkboxName?
c[e.keypath.str]||e.changed()||(c.push(e.keypath),c[e.keypath.str]=e):(a=e.attribute.value,K=e.getValue(),ma(a,K)||h(a,K)||(b[e.keypath.str]=K))});c.length&&c.forEach(function(e){var a,K;a=c[e.str];K=a.attribute.value;a=a.getValue();ma(K,a)||(b[e.str]=a)});return b}function hi(e,a){cb.forEach(function(b){ii(b.useDefaults?e.prototype:e,a,b.name)})}function ii(e,a,b){var c,d=Object.keys(e[b]);d.length&&((c=a[b])||(c=a[b]={}),d.filter(function(e){return!(e in c)}).forEach(function(a){return c[a]=e[b][a]}))}
function ji(e,a){Object.keys(e.prototype).forEach(function(b){if("computed"!==b){var c=e.prototype[b];if(!(b in a))a[b]=c._method?c._method:c;else if("function"===typeof a[b]&&"function"===typeof c&&a[b]._method){var d=void 0,f=c._method;f&&(c=c._method);d=ki(a[b]._method,c);f&&(d._method=d);a[b]=d}}})}function re(){for(var e=arguments.length,a=Array(e),b=0;b<e;b++)a[b]=arguments[b];return a.length?a.reduce(se,this):se(this)}function se(e,a){var b=void 0===a?{}:a,d,f;b.prototype instanceof za&&(b=
li(b));d=function(e){if(!(this instanceof d))return new d(e);oc(this,e)};f=O(e.prototype);f.constructor=d;Ta(d,{defaults:{value:f},extend:{value:re,writable:!0,configurable:!0},_Parent:{value:e}});pc.extend(e,f,b);qc.extend(e,f,b);b.computed&&(f.computed=c(O(e.prototype.computed),b.computed));d.prototype=f;return d}var te={el:void 0,append:!1,template:{v:3,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},
magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},pa,ue,ve,Ab,ka,rc,qa;pa="object"===typeof document;ue="undefined"!==typeof navigator&&/jsDom/.test(navigator.appName);ve="undefined"!==typeof console&&"function"===typeof console.warn&&"function"===typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),Ab=!0}catch(e){Ab=!1}ka={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",
svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};rc="undefined"===typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");qa=["o","ms","moz","webkit"];var wa,ra,Ua,sc,hb,tc,Cb,we,uc;wa=rc?function(e,a){return a&&a!==ka.html?document.createElementNS(a,e):document.createElement(e)}:function(e,a){if(a&&a!==ka.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";
return document.createElement(e)};if(pa){Ua=wa("div");sc=["matches","matchesSelector"];uc=function(e){return function(a,b){return a[e](b)}};for(Cb=sc.length;Cb--&&!ra;)if(hb=sc[Cb],Ua[hb])ra=uc(hb);else for(we=qa.length;we--;)if(tc=qa[Cb]+hb.substr(0,1).toUpperCase()+hb.substring(1),Ua[tc]){ra=uc(tc);break}ra||(ra=function(e,a){var b,c;b=e.parentNode;b||(Ua.innerHTML="",b=Ua,e=e.cloneNode(),Ua.appendChild(e));b=b.querySelectorAll(a);for(c=b.length;c--;)if(b[c]===e)return!0;return!1})}else ra=null;
var O,oa,Ta;try{Object.defineProperty({},"test",{value:0}),pa&&Object.defineProperty(document.createElement("div"),"test",{value:0}),oa=Object.defineProperty}catch(e){oa=function(e,a,b){e[a]=b.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(e){throw e;}pa&&Object.defineProperties(wa("div"),{test:{value:0}});Ta=Object.defineProperties}catch(e){Ta=function(e,a){for(var b in a)a.hasOwnProperty(b)&&oa(e,b,a[b])}}try{Object.create(null),O=Object.create}catch(e){O=function(){var e=function(){};
return function(a,b){var c;if(null===a)return{};e.prototype=a;c=new e;b&&Object.defineProperties(c,b);return c}}()}var Ea=Object.prototype.hasOwnProperty,ab=Object.prototype.toString,cc=/^\[object (?:Array|FileList)\]$/,Y=function(){},ud={},Rb,ub,ib;ve?function(){var e=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];
ib=function(){var a=!!console.groupCollapsed;console[a?"groupCollapsed":"log"].apply(console,e);console.log("You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n");
a&&console.groupEnd(e);ib=Y};ub=function(e,a){ib();if("object"===typeof a[a.length-1]){var b=a.pop(),c=b?b.ractive:null;if(c){var d=void 0;c.component&&(d=c.component.name)&&(e="<"+d+"> "+e);d=void 0;(d=b.node||c.fragment&&c.fragment.rendered&&c.find("*"))&&a.push(d)}}console.warn.apply(console,["%cRactive.js: %c"+e,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(a))};Rb=function(){console.log.apply(console,arguments)}}():ub=Rb=ib=Y;var Sa=function(e,a){return'Missing "'+e+'" '+a+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+
a+"s"},Eb=function(e,a,b,c){if(e===a)return Z(a);if(c){if(b=P("interpolators",b,c))return b(e,a)||Z(a);m(Sa(c,"interpolator"))}return Db.number(e,a)||Db.array(e,a)||Db.object(e,a)||Z(a)},Db={number:function(e,a){var b;if(!k(e)||!k(a))return null;e=+e;return(b=+a-e)?function(a){return e+a*b}:function(){return e}},array:function(e,a){var b,c,d,f;if(!g(e)||!g(a))return null;b=[];c=[];for(f=d=Math.min(e.length,a.length);f--;)c[f]=Eb(e[f],a[f]);for(f=d;f<e.length;f+=1)b[f]=e[f];for(f=d;f<a.length;f+=1)b[f]=
a[f];return function(e){for(var a=d;a--;)b[a]=c[a](e);return b}},object:function(e,a){var b,c,d,f,g;if(!l(e)||!l(a))return null;b=[];f={};d={};for(g in e)Ea.call(e,g)&&(Ea.call(a,g)?(b.push(g),d[g]=Eb(e[g],a[g])):f[g]=e[g]);for(g in a)Ea.call(a,g)&&!Ea.call(e,g)&&(f[g]=a[g]);c=b.length;return function(e){for(var a=c,K;a--;)K=b[a],f[K]=d[K](e);return f}}},mi=function(e){var a,b,c,d,f;a=e.split(".");(e=vb[a.length])||(e=da(a.length));d=[];b=function(e,b){return e?"*":a[b]};for(c=e.length;c--;)f=e[c].map(b).join("."),
d.hasOwnProperty(f)||(d.push(f),d[f]=!0);return d},vb={},Ag=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,ni=/\*/,Sb={},vd=function(e){var a=e.split(".");this.str=e;if("@"===e[0]){this.isSpecial=!0;var b;b=e.slice(2);b="i"===e[1]?k(b)?+b:b:b;this.value=b}this.firstKey=a[0];this.lastKey=a.pop();this.isPattern=ni.test(e);this.parent=""===e?null:L(a.join("."));this.isRoot=!e};vd.prototype={equalsOrStartsWith:function(e){return e===this||this.startsWith(e)},join:function(e){return L(this.isRoot?String(e):this.str+
"."+e)},replace:function(e,a){if(this===e)return a;if(this.startsWith(e))return null===a?a:L(this.str.replace(e.str+".",a.str+"."))},startsWith:function(e){return e?e&&this.str.substr(0,e.str.length+1)===e.str+".":!1},toString:function(){throw Error("Bad coercion");},valueOf:function(){throw Error("Bad coercion");},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=mi(this.str))}};var Fa=L(""),ye=function(e,a,b){if("string"!==typeof a||!k(b))throw Error("Bad arguments");
var c=void 0,d=void 0;if(/\*/.test(a))return d={},qb(e,L(la(a))).forEach(function(a){var c=e.viewmodel.get(a);if(!k(c))throw Error(xe);d[a.str]=c+b}),e.set(d);c=e.get(a);if(!k(c))throw Error(xe);return e.set(a,+c+b)},xe="Cannot add to a non-numeric value",vc;"undefined"===typeof window?vc=null:(function(e,a,b){var c,d;if(!b.requestAnimationFrame){for(c=0;c<e.length&&!b.requestAnimationFrame;++c)b.requestAnimationFrame=b[e[c]+"RequestAnimationFrame"];b.requestAnimationFrame||(d=b.setTimeout,b.requestAnimationFrame=
function(e){var b,c,t;b=Date.now();c=Math.max(0,16-(b-a));t=d(function(){e(b+c)},c);a=b+c;return t})}}(qa,0,window),vc=window.requestAnimationFrame);var ze=vc,Ae="undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},Bg={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},
complete:{deprecated:"complete",replacement:"oncomplete"}};V.prototype.fire=function(e,a){function b(c){if(e[c])return a?e[c](a):e[c](),!0}b(this.method);!e[this.method]&&this.deprecate&&b(this.deprecate.deprecated)&&(this.deprecate.message?x(this.deprecate.message):x('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));a?e.fire(this.event,
a):e.fire(this.event)};var aa=V,ja,wc={},Be={},oi={};"function"===typeof Promise?ja=Promise:(ja=function(e){var a=[],b=[],c=wc,d,f,g,h;g=function(e){return function(g){c===wc&&(d=g,c=e,f=Nb(c===Be?a:b,d),setTimeout(f,0))}};h=g(Be);g=g(oi);try{e(h,g)}catch(k){g(k)}return{then:function(e,d){var g=new ja(function(h,ua){var k=function(e,a,b){"function"===typeof e?a.push(function(a){var b;try{b=e(a),xa(g,b,h,ua)}catch(c){ua(c)}}):a.push(b)};k(e,a,h);k(d,b,ua);c!==wc&&setTimeout(f,0)});return g},"catch":function(e){return this.then(null,
e)}}},ja.all=function(e){return new ja(function(a,b){var c=[],d,f,g;if(e.length)for(g=function(e,f){e&&"function"===typeof e.then?e.then(function(e){c[f]=e;--d||a(c)},b):(c[f]=e,--d||a(c))},d=f=e.length;f--;)g(e[f],f);else a(c)})},ja.resolve=function(e){return new ja(function(a){a(e)})},ja.reject=function(e){return new ja(function(a,b){b(e)})});var Ga=ja,Ce=function(e){do if(void 0!==e.context)return e.context;while(e=e.parent);return Fa},wb=function(e,a,b){a=la(a);"~/"===a.substr(0,2)?(a=L(a.substring(2)),
Za(e,a.firstKey,b)):"."===a[0]?(a=Ob(Ce(b),a))&&Za(e,a.firstKey,b):a=ga(e,L(a),b);return a},De=function(e,a){this.callback=e;this.parent=a;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.decoratorQueue=[];this.outrosComplete=!1;a&&a.addChild(this)};De.prototype={addChild:function(e){this.children.push(e);this.totalChildren+=1;this.outroChildren+=1},decrementOutros:function(){--this.outroChildren;ya(this)},decrementTotal:function(){--this.totalChildren;
ya(this)},add:function(e){(e.isIntro?this.intros:this.outros).push(e)},addDecorator:function(e){this.decoratorQueue.push(e)},remove:function(e){Q(e.isIntro?this.intros:this.outros,e);ya(this)},init:function(){this.ready=!0;ya(this)},detachNodes:function(){this.decoratorQueue.forEach(sb);this.detachQueue.forEach(R);this.children.forEach(na)}};var M,La=[],Cg=new aa("change"),w={start:function(e,a){var b,c;a&&(b=new Ga(function(e){return c=e}));M={previousBatch:M,transitionManager:new De(c,M&&M.transitionManager),
views:[],tasks:[],ractives:[],instance:e};e&&M.ractives.push(e);return b},end:function(){$a();M.transitionManager.init();!M.previousBatch&&M.instance&&(M.instance.viewmodel.changes=[]);M=M.previousBatch},addRactive:function(e){if(M){var a=M.ractives;-1===a.indexOf(e)&&a.push(e)}},registerTransition:function(e){e._manager=M.transitionManager;M.transitionManager.add(e)},registerDecorator:function(e){M.transitionManager.addDecorator(e)},addView:function(e){M.views.push(e)},addUnresolved:function(e){La.push(e)},
removeUnresolved:function(e){Q(La,e)},detachWhenReady:function(e){M.transitionManager.detachQueue.push(e)},scheduleTask:function(e,a){var b;if(M){for(b=M;a&&b.previousBatch;)b=b.previousBatch;b.tasks.push(e)}else e()}},Ha=[],Va={tick:function(){var e,a,b;b=Ae();w.start();for(e=0;e<Ha.length;e+=1)a=Ha[e],a.tick(b)||Ha.splice(e--,1);w.end();Ha.length?ze(Va.tick):Va.running=!1},add:function(e){Ha.push(e);Va.running||(Va.running=!0,ze(Va.tick))},abort:function(e,a){for(var b=Ha.length,c;b--;)c=Ha[b],
c.root===a&&c.keypath===e&&c.stop()}},Tb=Va,Ee=function(e){var a;this.startTime=Date.now();for(a in e)e.hasOwnProperty(a)&&(this[a]=e[a]);this.interpolator=Eb(this.from,this.to,this.root,this.interpolator);this.running=!0;this.tick()};Ee.prototype={tick:function(){var e,a,b;b=this.keypath;if(this.running){e=Date.now();e-=this.startTime;if(e>=this.duration)return null!==b&&(w.start(this.root),this.root.viewmodel.set(b,this.to),w.end()),this.step&&this.step(1,this.to),this.complete(this.to),a=this.root._animations.indexOf(this),
-1===a&&x("Animation was not found"),this.root._animations.splice(a,1),this.running=!1;e=this.easing?this.easing(e/this.duration):e/this.duration;null!==b&&(a=this.interpolator(e),w.start(this.root),this.root.viewmodel.set(b,a),w.end());this.step&&this.step(e,a);return!0}return!1},stop:function(){var e;this.running=!1;e=this.root._animations.indexOf(this);-1===e&&x("Animation was not found");this.root._animations.splice(e,1)}};var Eg=Ee,Dg={stop:Y},pi=new aa("detach"),qi=function(e,a){if(this._isComponentQuery?
!this.selector||e.name===this.selector:e.node&&ra(e.node,this.selector))return this.push(e.node||e.instance),a||this._makeDirty(),!0},ri=function(){var e,a,b;e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];a=this.selector;b=e.indexOf(a);-1!==b&&(e.splice(b,1),e[a]=null)},Fe=function(e,a){var b,c,d,f,g,h,k;b=ld(e.component||e._ractive.proxy);c=ld(a.component||a._ractive.proxy);d=T(b);for(f=T(c);d&&d===f;)b.pop(),c.pop(),g=d,d=T(b),f=T(c);d=d.component||d;f=f.component||f;
h=d.parentFragment;k=f.parentFragment;if(h===k)return h=h.items.indexOf(d),k=k.items.indexOf(f),h-k||b.length-c.length;if(f=g.fragments)return h=f.indexOf(h),k=f.indexOf(k),h-k||b.length-c.length;throw Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!");},si=function(e,a){var b;return e.compareDocumentPosition?(b=e.compareDocumentPosition(a),b&2?1:-1):Fe(e,a)},ti=function(){this.sort(this._isComponentQuery?
Fe:si);this._dirty=!1},ui=function(){var e=this;this._dirty||(this._dirty=!0,w.scheduleTask(function(){e._sort()}))},vi=function(e){e=this.indexOf(this._isComponentQuery?e.instance:e);-1!==e&&this.splice(e,1)},Ge=function(e,a,b,c){var d=[];Ta(d,{selector:{value:a},live:{value:b},_isComponentQuery:{value:c},_test:{value:qi}});if(!b)return d;Ta(d,{cancel:{value:ri},_root:{value:e},_sort:{value:ti},_makeDirty:{value:ui},_remove:{value:vi},_dirty:{value:!1,writable:!0}});return d},xb={enqueue:function(e,
a){e.event&&(e._eventQueue=e._eventQueue||[],e._eventQueue.push(e.event));e.event=a},dequeue:function(e){e._eventQueue&&e._eventQueue.length?e.event=e._eventQueue.pop():delete e.event}},eb=function(e,a,b){b=void 0===b?{}:b;a&&(b.event?b.event.name=a:b.event={name:a,_noArg:!0},a=L(a).wildcardMatches(),md(e,a,b.event,b.args,!0))},wi={capture:!0,noUnwrap:!0,fullRootGet:!0},Fg=new aa("insert"),He=function(e,a,b,c){this.root=e;this.keypath=a;this.callback=b;this.defer=c.defer;this.context=c&&c.context?
c.context:e};He.prototype={init:function(e){this.value=this.root.get(this.keypath.str);!1!==e?this.update():this.oldValue=this.value},setValue:function(e){var a=this;h(e,this.value)||(this.value=e,this.defer&&this.ready?w.scheduleTask(function(){return a.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Ie=function(e,a){var b,c;b=qb(e,a);c={};b.forEach(function(a){c[a.str]=
e.get(a.str)});return c},xc,xi=Array.prototype.slice;xc=function(e,a,b,c){this.root=e;this.callback=b;this.defer=c.defer;this.keypath=a;this.regex=new RegExp("^"+a.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$");this.values={};this.defer&&(this.proxies=[]);this.context=c&&c.context?c.context:e};xc.prototype={init:function(e){var a,b;a=Ie(this.root,this.keypath);if(!1!==e)for(b in a)a.hasOwnProperty(b)&&this.update(L(b));else this.values=a},update:function(e){var a=this,b;if(e.isPattern)for(e in b=
Ie(this.root,e),b)b.hasOwnProperty(e)&&this.update(L(e));else this.root.viewmodel.implicitChanges[e.str]||(this.defer&&this.ready?w.scheduleTask(function(){return a.getProxy(e).update()}):this.reallyUpdate(e))},reallyUpdate:function(e){var a,b;a=e.str;e=this.root.viewmodel.get(e);this.updating?this.values[a]=e:(this.updating=!0,h(e,this.values[a])&&this.ready||(b=xi.call(this.regex.exec(a),1),b=[e,this.values[a],a].concat(b),this.values[a]=e,this.callback.apply(this.context,b)),this.updating=!1)},
getProxy:function(e){var a=this;this.proxies[e.str]||(this.proxies[e.str]={update:function(){return a.reallyUpdate(e)}});return this.proxies[e.str]}};var yc=function(e,a,b,c){var d,f,g;a=L(la(a));c=c||yi;a.isPattern?(d=new xc(e,a,b,c),e.viewmodel.patternObservers.push(d),f=!0):d=new He(e,a,b,c);d.init(c.init);e.viewmodel.register(a,d,f?"patternObservers":"observers");d.ready=!0;b={cancel:function(){var b;g||(f?(b=e.viewmodel.patternObservers.indexOf(d),e.viewmodel.patternObservers.splice(b,1),e.viewmodel.unregister(a,
d,"patternObservers")):e.viewmodel.unregister(a,d,"observers"),g=!0)}};e._observers.push(b);return b},yi={},Je=function(e){return e.trim()},Ke=function(e){return""!==e},Le=function(e,a,b){var c=[],d,f,g,h;a=wg(e,a,b);if(!a)return null;b=e.length;g=a.length-2-a[1];d=Math.min(b,a[0]);f=d+a[1];for(h=0;h<d;h+=1)c.push(h);for(;h<f;h+=1)c.push(-1);for(;h<b;h+=1)c.push(h+g);c.touchedFrom=0!==g?a[0]:e.length;return c},zi=Array.prototype,Ia=function(e){return function(a){for(var b=arguments.length,c=Array(1<
b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var d=[],f;a=L(la(a));b=this.viewmodel.get(a);if(!g(b))throw Error("Called ractive."+e+"('"+a.str+"'), but '"+a.str+"' does not refer to an array");d=Le(b,e,c);f=zi[e].apply(b,c);c=w.start(this,!0).then(function(){return f});d?this.viewmodel.smartUpdate(a,b,d):this.viewmodel.mark(a);w.end();return c}},Ai=Ia("pop"),Bi=Ia("push"),zc,Me,jb,Ne,Ac,Bc,Oe=[],Cc=!1;pa?(jb=document.createElement("style"),jb.type="text/css",Ne=document.getElementsByTagName("head")[0],
Bc=!1,Ac=jb.styleSheet,Me=function(){var e="/* Ractive.js component styles */\n"+Oe.map(function(e){return"\n/* {"+e.id+"} */\n"+e.styles}).join("\n");Ac?Ac.cssText=e:jb.innerHTML=e;Bc||(Ne.appendChild(jb),Bc=!0)},zc={add:function(e){Oe.push(e);Cc=!0},apply:function(){Cc&&(Me(),Cc=!1)}}):zc={add:Y,apply:Y};var Pe=zc,Ci=new aa("render"),Di=new aa("complete"),Rd={extend:function(e,a,b){e=ea(b.adapt);b=a.adapt.slice();for(var c=e.length;c--;)~b.indexOf(e[c])||b.push(e[c]);a.adapt=b},init:function(){}},
Ii=function(e,a){var b,c;b='[data-ractive-css~="{'+a+'}"]';c=function(e){var a,c,K,d,f=[];for(a=[];c=Ei.exec(e);)a.push({str:c[0],base:c[1],modifiers:c[2]});e=a.map(yg);for(d=a.length;d--;)c=e.slice(),K=a[d],c[d]=K.base+b+K.modifiers||"",K=e.slice(),K[d]=b+" "+K[d],f.push(c.join(" "),K.join(" "));return f.join(", ")};return Qe.test(e)?e.replace(Qe,b):e.replace(Fi,"").replace(Gi,function(e,a){var b;if(Hi.test(a))return e;b=a.split(",").map(xg).map(c).join(", ")+" ";return e.replace(a,b)})},Gi=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,
Fi=/\/\*.*?\*\//g,Ei=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Hi=/^@media/,Qe=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Ji=1,Sd={name:"css",extend:function(e,a,b){b.css&&(e=Ji++,b=b.noCssTransform?b.css:Ii(b.css,e),a.cssId=e,Pe.add({id:e,styles:b}))},init:function(){}},qc={name:"data",extend:function(e,a,b){var c=e=void 0;if(b.data&&l(b.data))for(e in b.data)(c=b.data[e])&&"object"===typeof c&&(l(c)||g(c))&&x("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");
a.data=od(a.data,b.data)},init:function(e,a,b){e=od(e.prototype.data,b.data);"function"===typeof e&&(e=e.call(a));return e||{}},reset:function(e){var a=this.init(e.constructor,e,e.viewmodel);e.viewmodel.reset(a);return!0}},Ca,Dc,Ki=/^\s+/;Dc=function(e){this.name="ParseError";this.message=e;try{throw Error(e);}catch(a){this.stack=a.stack}};Dc.prototype=Error.prototype;Ca=function(e,a){var b,c,d=0;this.str=e;this.options=a||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(e){return d=
e=d+e.length+1},0);this.init&&this.init(e,a);for(b=[];this.pos<this.str.length&&(c=this.read());)b.push(c);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(b,a):b};Ca.prototype={read:function(e){var a,b,c,d;e||(e=this.converters);a=this.pos;c=e.length;for(b=0;b<c;b+=1)if(this.pos=a,d=e[b](this))return d;return null},getLinePos:function(e){for(var a=0,b=0;e>=this.lineEnds[a];)b=this.lineEnds[a],a+=1;return[a+1,e-b+1,e]},error:function(e){var a=this.getLinePos(this.pos),
b=a[0],c=a[1],d=0,f=this.lines[a[0]-1].replace(/\t/g,function(e,b){b<a[1]&&(d+=1);return"  "})+"\n"+Array(a[1]+d).join(" ")+"^----",b=new Dc(""+e+" at line "+b+" character "+c+":\n"+f);b.line=a[0];b.character=a[1];b.shortMessage=e;throw b;},matchString:function(e){if(this.str.substr(this.pos,e.length)===e)return this.pos+=e.length,e},matchPattern:function(e){if(e=e.exec(this.remaining()))return this.pos+=e[0].length,e[1]||e[0]},allowWhitespace:function(){this.matchPattern(Ki)},remaining:function(){return this.str.substring(this.pos)},
nextChar:function(){return this.str.charAt(this.pos)}};Ca.extend=function(e){var a,b;a=function(e,a){Ca.call(this,e,a)};a.prototype=O(this.prototype);for(b in e)Ea.call(e,b)&&(a.prototype[b]=e[b]);a.extend=Ca.extend;return a};var Gg=function(e){var a,b,c;if(!e.matchString("="))return null;a=e.pos;e.allowWhitespace();b=e.matchPattern(Re);if(!b)return e.pos=a,null;if(!e.matchPattern(Li))return null;c=e.matchPattern(Re);if(!c)return e.pos=a,null;e.allowWhitespace();return e.matchString("=")?[b,c]:(e.pos=
a,null)},Re=/^[^\s=]+/,Li=/^\s+/,wd=function(e){var a;return(a=e.matchPattern(Mi))?{t:25,v:a}:null},Mi=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Pa=function(e){var a,b;if(!1===e.interpolate[e.inside])return null;for(b=0;b<e.tags.length;b+=1)if(a=zg(e,e.tags[b]))return a},Hg={t:10,exclude:!0},Se=function(e){var a;return(a=e.matchPattern(Ni))?{t:20,v:a}:null},Ni=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
Te,Ue,Ve;Te=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;Ue=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;Ve=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var We=function(e){return function(a){var b,c,d;b='"';for(c=!1;!c;)(d=a.matchPattern(Te)||a.matchPattern(Ue)||a.matchString(e))?b='"'===d?b+'\\"':"\\'"===d?b+"'":b+d:(d=a.matchPattern(Ve))?b+="\\u"+("000"+d.charCodeAt(1).toString(16)).slice(-4):c=!0;return JSON.parse(b+'"')}},Oi=We('"'),Pi=We("'"),Ec=function(e){var a,b;a=e.pos;
return e.matchString('"')?(b=Pi(e),e.matchString('"')?{t:21,v:b}:(e.pos=a,null)):e.matchString("'")?(b=Oi(e),e.matchString("'")?{t:21,v:b}:(e.pos=a,null)):null},Xe=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Id=function(e){var a;if(a=Ec(e))return Qi.test(a.v)?a.v:'"'+a.v.replace(/"/g,'\\"')+'"';if(a=Se(e))return a.v;if(a=e.matchPattern(Xe))return a},Qi=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Ig=function(e){var a,b,c;a=e.pos;e.allowWhitespace();b=Id(e);if(null===b)return e.pos=a,null;e.allowWhitespace();if(!e.matchString(":"))return e.pos=
a,null;e.allowWhitespace();c=X(e);return null===c?(e.pos=a,null):{t:27,k:b,v:c}},Ze=function(e){var a,b,c;a=e.pos;c=e.matchPattern(/^@(?:keypath|index|key)/);c||(b=e.matchPattern(Ri)||"",c=!b&&e.relaxedNames&&e.matchPattern(Si)||e.matchPattern(Ti),c||"."!==b||(b="",c="."));if(!c)return null;if(!b&&!e.relaxedNames&&Ye.test(c))return e.pos=a,null;if(!b&&Fc.test(c))return b=Fc.exec(c)[0],e.pos=a+b.length,{t:26,v:b};b=(b||"")+la(c);e.matchString("(")&&(c=b.lastIndexOf("."),-1!==c?(b=b.substr(0,c),e.pos=
a+b.length):--e.pos);return{t:30,n:b.replace(/^this\./,"./").replace(/^this$/,".")}},Ri=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,Fc,Ye;Fc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/;Ye=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Ti=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,
Si=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Ui=function(e){var a,b;(a=Se(e))||(a=e.remaining(),"true"===a.substr(0,4)?(e.pos+=4,a={t:24,v:"true"}):"false"===a.substr(0,5)?(e.pos+=5,a={t:24,v:"false"}):a=null);(a=a||Ec(e))||(a=e.pos,e.allowWhitespace(),e.matchString("{")?(b=rd(e),e.allowWhitespace(),e.matchString("}")?a={t:23,m:b}:(e.pos=a,a=null)):(e.pos=a,a=null));a||(a=e.pos,e.allowWhitespace(),e.matchString("[")?(b=Pb(e),e.matchString("]")?a={t:22,m:b}:(e.pos=a,a=null)):(e.pos=a,a=null));(a=a||wd(e)||Ze(e))||
(e.matchString("(")?(e.allowWhitespace(),(a=X(e))||e.error("Expected a JavaScript expression"),e.allowWhitespace(),e.matchString(")")||e.error("Expected closing paren"),a={t:34,x:a}):a=null);if(!a)return null;for(;a;){a:{b=e;var c=void 0,c=void 0;b.allowWhitespace();if(b.matchString(".")){b.allowWhitespace();if(c=b.matchPattern(Xe)){b={t:31,n:c};break a}b.error("Expected a property name")}b.matchString("[")?(b.allowWhitespace(),(c=X(b))||b.error("Expected a JavaScript expression"),b.allowWhitespace(),
b.matchString("]")||b.error("Expected ']'"),b={t:31,x:c}):b=null}if(b)a={t:32,x:a,r:b};else if(e.matchString("("))e.allowWhitespace(),b=Pb(e),e.allowWhitespace(),e.matchString(")")||e.error("Expected closing paren"),a={t:40,x:a},b&&(a.o=b);else break}return a},$e,af;af=function(e,a){return function(b){var c;if(c=a(b))return c;if(!b.matchString(e))return null;b.allowWhitespace();(c=X(b))||b.error("Expected a JavaScript expression");return{s:e,o:c,t:33}}};(function(){var e,a,b,c;c=["!","~","+","-",
"typeof"];b=Ui;e=0;for(a=c.length;e<a;e+=1)b=af(c[e],b);$e=b})();var Vi=$e,bf,cf;cf=function(e,a){return function(b){var c,d,f;d=a(b);if(!d)return null;for(;;){c=b.pos;b.allowWhitespace();if(!b.matchString(e)||"in"===e&&/[a-zA-Z_$0-9]/.test(b.remaining().charAt(0)))return b.pos=c,d;b.allowWhitespace();f=a(b);if(!f)return b.pos=c,d;d={t:36,s:e,o:[d,f]}}}};(function(){var e,a,b,c;c="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");b=Vi;e=0;for(a=c.length;e<a;e+=1)b=
cf(c[e],b);bf=b})();var Wi=bf,X=function(e){var a,b,c;b=Wi(e);if(!b)return null;a=e.pos;e.allowWhitespace();if(!e.matchString("?"))return e.pos=a,b;e.allowWhitespace();(a=X(e))||e.error("Expected a JavaScript expression");e.allowWhitespace();e.matchString(":")||e.error('Expected ":"');e.allowWhitespace();(c=X(e))||e.error("Expected a JavaScript expression");return{t:35,o:[b,a,c]}},kb=function(e){function a(e){switch(e.t){case 24:case 26:case 20:case 25:return e.v;case 21:return JSON.stringify(String(e.v));
case 22:return"["+(e.m?e.m.map(a).join(","):"")+"]";case 23:return"{"+(e.m?e.m.map(a).join(","):"")+"}";case 27:return e.k+":"+a(e.v);case 33:return("typeof"===e.s?"typeof ":e.s)+a(e.o);case 36:return a(e.o[0])+("in"===e.s.substr(0,2)?" "+e.s+" ":e.s)+a(e.o[1]);case 40:return a(e.x)+"("+(e.o?e.o.map(a).join(","):"")+")";case 34:return"("+a(e.x)+")";case 32:return a(e.x)+a(e.r);case 31:return e.n?"."+e.n:"["+a(e.x)+"]";case 35:return a(e.o[0])+"?"+a(e.o[1])+":"+a(e.o[2]);case 30:return"_"+b.indexOf(e.n);
default:throw Error("Expected legal JavaScript");}}var b;Ja(e,b=[]);return{r:b,s:a(e)}},Aa=function(e,a){if(e){for(;34===e.t&&e.x;)e=e.x;if(30===e.t)a.r=e.n;else if(20===e.t&&Xi.test(e.v))a.r=e.v;else{var b;b=e;for(var c=[],d;32===b.t&&31===b.r.t;)d=b.r,d.x?30===d.x.t?c.unshift(d.x):c.unshift(kb(d.x)):c.unshift(d.n),b=b.x;b=30!==b.t?null:{r:b.n,m:c};b?a.rx=b:a.x=kb(e)}return a}},Xi=/^[0-9][1-9]*$/,df=function(e,a){var b,c;if(!e.matchString("&"))return null;e.allowWhitespace();b=X(e);if(!b)return null;
e.matchString(a.close)||e.error("Expected closing delimiter '"+a.close+"'");c={t:3};Aa(b,c);return c},ef=function(e,a){var b,c,d;b=e.pos;try{a:{var f=[a.close],g,h,k;g=e.pos;if(h=X(e)){for(k=0;k<f.length;k+=1)if(e.remaining().substr(0,f[k].length)===f[k]){c=h;break a}e.pos=g;c=Ze(e)}else c=null}}catch(l){d=l}if(!c){if("!"===e.str.charAt(b))return e.pos=b,null;if(d)throw d;}if(!e.matchString(a.close)&&(e.error("Expected closing delimiter '"+a.close+"' after reference"),!c)){if("!"===e.nextChar())return null;
e.error("Expected expression or legal reference")}b={t:2};Aa(c,b);return b},Yi=/^yield\s*/,Gc=function(e,a){var b,c,d;b=e.pos;if(!e.matchString(a.open))return null;e.allowWhitespace();if(!e.matchString("/"))return e.pos=b,null;e.allowWhitespace();c=e.remaining();d=c.indexOf(a.close);if(-1!==d)return b={t:6,r:c.substr(0,d).split(" ")[0]},e.pos+=d,e.matchString(a.close)||e.error("Expected closing delimiter '"+a.close+"'"),b;e.pos=b;return null},Zi=/^\s*else\s*/,$i=/^\s*elseif\s+/,ff={each:52,"if":50,
"if-with":54,"with":53,unless:51},gf=function(e,a){var b,c,d,f,g,h,k,l,n;b=e.pos;if(e.matchString("^"))c={t:4,f:[],n:51};else if(e.matchString("#")){if(c={t:4,f:[]},e.matchString("partial")&&(e.pos=b-e.standardDelimiters[0].length,e.error("Partial definitions can only be at the top level of the template, or immediately inside components")),b=e.matchPattern(aj))n=b,c.n=ff[b]}else return null;e.allowWhitespace();(b=X(e))||e.error("Expected expression");if(f=e.matchPattern(bj))k=void 0,(k=e.matchPattern(cj))?
c.i=f+","+k:c.i=f;e.allowWhitespace();e.matchString(a.close)||e.error("Expected closing delimiter '"+a.close+"'");e.sectionDepth+=1;f=c.f;k=[];do if(d=Gc(e,a))n&&d.r!==n&&e.error("Expected "+a.open+"/"+n+""+a.close),--e.sectionDepth,l=!0;else{d=e;var m=a,p=d.pos,q=void 0;d.matchString(m.open)?d.matchPattern($i)?(q=X(d),d.matchString(m.close)||d.error("Expected closing delimiter '"+m.close+"'"),d={t:61,x:q}):(d.pos=p,d=null):d=null;if(d)51===c.n&&e.error("{{else}} not allowed in {{#unless}}"),g&&e.error("illegal {{elseif...}} after {{else}}"),
h||(h=sd(b,c.n)),h.f.push({t:4,n:50,x:kb(Qb(k.concat(d.x))),f:f=[]}),k.push(td(d.x));else if(d=e,m=a,p=d.pos,d.matchString(m.open)?d.matchPattern(Zi)?(d.matchString(m.close)||d.error("Expected closing delimiter '"+m.close+"'"),d={t:60}):(d.pos=p,d=null):d=null,d)51===c.n&&e.error("{{else}} not allowed in {{#unless}}"),g&&e.error("there can only be one {{else}} block, at the end of a section"),g=!0,h?h.f.push({t:4,n:50,x:kb(Qb(k)),f:f=[]}):(h=sd(b,c.n),f=h.f);else{d=e.read(lb);if(!d)break;f.push(d)}}while(!l);
h&&(53===c.n&&(c.n=54),c.l=h);Aa(b,c);c.f.length||delete c.f;return c},bj=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,cj=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,aj=new RegExp("^("+Object.keys(ff).join("|")+")\\b"),hf,Fb,Vb,yd,xd,Ad,Bd,zd;hf=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;
Fb=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;Vb={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,
AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,
divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,
nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,
uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,
lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};yd=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];xd=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Vb).join("|")+"));?","g");Ad=/</g;Bd=/>/g;zd=/&/g;var Oa=/^\s*\r?\n/,Na=/\r?\n\s*$/,Cd=function(e,a,b){var c;a&&(c=e[0],"string"===typeof c&&((c=c.replace(a,""))?e[0]=c:e.shift()));b&&(c=T(e),"string"===
typeof c&&((c=c.replace(b,""))?e[e.length-1]=c:e.pop()))},Mg=/[ \t\f\r\n]+/g,Jg=/^(?:pre|script|style|textarea)$/i,Dd=/^[ \t\f\r\n]+/,Ed=/[ \t\f\r\n]+$/,Kg=/^(?:\r\n|\r|\n)/,Lg=/(?:\r\n|\r|\n)$/,ej=function(e){var a,b;a=e.pos;if(!e.matchString("</"))return null;if(b=e.matchPattern(dj))return e.inside&&b!==e.inside?(e.pos=a,null):{t:14,e:b};e.pos-=2;e.error("Illegal closing tag")},dj=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Xb=function(e,a){var b,c,d;for(b=a.length;b--;){c=e.indexOf(a[b]);if(!c)return 0;
-1!==c&&(!d||c<d)&&(d=c)}return d||-1},gj=function(e){var a;e.allowWhitespace();a=e.matchPattern(fj);if(!a)return null;a={name:a};var b,c,d;b=e.pos;/[=\/>\s]/.test(e.nextChar())||e.error("Expected `=`, `/`, `>` or whitespace");e.allowWhitespace();if(e.matchString("=")){e.allowWhitespace();b=e.pos;c=e.sectionDepth;if(!(d=Gd(e,"'")||Gd(e,'"'))){var f;e.inAttribute=!0;d=[];for(f=Pa(e)||Fd(e);null!==f;)d.push(f),f=Pa(e)||Fd(e);d.length?e.inAttribute=!1:d=null}null===d&&e.error("Expected valid attribute value");
e.sectionDepth!==c&&(e.pos=b,e.error("An attribute value must contain as many opening section tags as closing section tags"));e=d.length?1===d.length&&"string"===typeof d[0]?Ub(d[0]):d:""}else e.pos=b,e=null;null!=e&&(a.value=e);return a},fj=/^[^\s"'>\/=]+/,Ng=/^[^\s"'=<>`]+/,jf,Hc,kf,lf,mf,nf,of;Hc={"true":!0,"false":!1,undefined:void 0,"null":null};kf=new RegExp("^(?:"+Object.keys(Hc).join("|")+")");lf=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;
mf=/\$\{([^\}]+)\}/g;nf=/^\$\{([^\}]+)\}/;of=/^\s*$/;jf=Ca.extend({init:function(a,b){this.values=b.values;this.allowWhitespace()},postProcess:function(a){return 1===a.length&&of.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;if(!a.values)return null;if((b=a.matchPattern(nf))&&a.values.hasOwnProperty(b))return{v:a.values[b]}},function(a){if(a=a.matchPattern(kf))return{v:Hc[a]}},function(a){if(a=a.matchPattern(lf))return{v:+a}},function(a){var b=Ec(a),c;return b&&(c=a.values)?
{v:b.v.replace(mf,function(a,e){return e in c?c[e]:e})}:b},function(a){var b,c;if(!a.matchString("{"))return null;b={};a.allowWhitespace();if(a.matchString("}"))return{v:b};for(;c=Og(a);){b[c.key]=c.value;a.allowWhitespace();if(a.matchString("}"))return{v:b};if(!a.matchString(","))break}return null},function(a){var b,c;if(!a.matchString("["))return null;b=[];a.allowWhitespace();if(a.matchString("]"))return{v:b};for(;c=a.read();){b.push(c.v);a.allowWhitespace();if(a.matchString("]"))return{v:b};if(!a.matchString(","))break;
a.allowWhitespace()}return null}]});var Gb=function(a,b){return(new jf(a,{values:b})).result},qf=function(a,b){var c,d,f,g;if("string"===typeof a){if(c=hj.exec(a))return d=a.lastIndexOf(")"),ij.test(a)||b.error("Invalid input after method call expression '"+a.slice(d+1)+"'"),c={m:c[1]},d="["+a.slice(c.m.length+1,d)+"]",d=new pf(d),c.a=kb(d.result[0]),c;if(-1===a.indexOf(":"))return a.trim();a=[a]}g=[];d=[];if(a){for(;a.length;)if(c=a.shift(),"string"===typeof c)if(f=c.indexOf(":"),-1===f)g.push(c);
else{f&&g.push(c.substr(0,f));c.length>f+1&&(d[0]=c.substring(f+1));break}else g.push(c);d=d.concat(a)}g.length?d.length||"string"!==typeof g?(c={n:1===g.length&&"string"===typeof g[0]?g[0]:g},1===d.length&&"string"===typeof d[0]?(f=Gb("["+d[0]+"]"),c.a=f?f.value:d[0].trim()):c.d=d):c=g:c="";return c},hj=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,ij=/\)\s*$/,pf;pf=Ca.extend({converters:[function(a){return X(a)}]});var jj=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,kj=/^[\s\n\/>]/,lj=/^on/,mj=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,
nj=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,oj={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},pj={exclude:!0},Jd;Jd={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],
tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var rf=/[-/\\^$*+?.()|[\]{}]/g,qj=/^\x3c!--\s*/,rj=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,sj=/\s*--\x3e/,sf,tj=/^#\s*partial\s+/,yb=function(a,b){return(new tf(a,b||{})).result},uj=[function(a,b){var c,d,f;if(!a.matchString(">"))return null;a.allowWhitespace();a.relaxedNames=!0;c=X(a);a.relaxedNames=!1;a.allowWhitespace();d=X(a);a.allowWhitespace();if(!c)return null;f={t:8};Aa(c,f);a.allowWhitespace();d&&(f={t:4,n:53,f:[f]},Aa(d,f));a.matchString(b.close)||
a.error("Expected closing delimiter '"+b.close+"'");return f},df,gf,function(a,b){var c,d;if(!a.matchPattern(Yi))return null;c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(b.close)||a.error("expected legal partial name");d={t:16};c&&(d.n=c);return d},ef,function(a,b){var c;if(!a.matchString("!"))return null;c=a.remaining().indexOf(b.close);if(-1!==c)return a.pos+=c+b.close.length,{t:9}}],uf=[function(a,b){var c=X(a),d;if(!c)return null;a.matchString(b.close)||a.error("Expected closing delimiter '"+
b.close+"'");d={t:3};Aa(c,d);return d}],vj=[df,gf,ef],tf=void 0,lb=[Pa,function(a){var b,c,d;b=a.pos;if(!a.matchString("\x3c!--"))return null;c=a.remaining();d=c.indexOf("--\x3e");-1===d&&a.error("Illegal HTML - expected closing comment sequence ('--\x3e')");c=c.substr(0,d);a.pos+=d+3;d={t:9,c:c};a.includeLinePositions&&(d.p=a.getLinePos(b));return d},function(a){var b,c,d,f,g,h,k,l,m;b=a.pos;if(a.inside||a.inAttribute||!a.matchString("<")||"/"===a.nextChar())return null;c={};a.includeLinePositions&&
(c.p=a.getLinePos(b));if(a.matchString("!"))return c.t=18,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),c.a=a.matchPattern(/^(.+?)>/),c;c.t=7;c.e=a.matchPattern(jj);if(!c.e)return null;kj.test(a.nextChar())||a.error("Illegal tag name");b=function(b,d){var K=d.n||d;nj.test(K)&&(a.pos-=K.length,a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));c.v[b]=d};for(a.allowWhitespace();f=Pa(a)||gj(a);)f.name?
(d=oj[f.name])?c[d]=qf(f.value,a):(d=mj.exec(f.name))?(c.v||(c.v={}),f=qf(f.value,a),b(d[1],f)):a.sanitizeEventAttributes&&lj.test(f.name)||(c.a||(c.a={}),c.a[f.name]=f.value||(""===f.value?"":0)):(c.m||(c.m=[]),c.m.push(f)),a.allowWhitespace();a.allowWhitespace();a.matchString("/")&&(g=!0);if(!a.matchString(">"))return null;b=c.e.toLowerCase();d=a.preserveWhitespace;if(!g&&!Fb.test(c.e)){a.elementStack.push(b);if("script"===b||"style"===b)a.inside=b;g=[];f=O(null);do m=a.pos,k=a.remaining(),Pg(b,
k)?(k=ej(a))?(l=!0,k=k.e.toLowerCase(),k!==b&&(a.pos=m,~a.elementStack.indexOf(k)||(m="Unexpected closing tag",Fb.test(k)&&(m+=" (<"+k+"> is a void element - it cannot contain children)"),a.error(m)))):(k=Gc(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(l=!0,a.pos=m):(k=a.read(vf))?(f[k.n]&&(a.pos=m,a.error("Duplicate partial definition")),va(k.f,a.stripComments,d,!d,!d),f[k.n]=k.f,h=!0):(k=a.read(lb))?g.push(k):l=!0:l=!0;while(!l);g.length&&(c.f=g);h&&(c.p=f);a.elementStack.pop()}a.inside=
null;return a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(b)?pj:c},function(a){var b,c,d;c=a.remaining();d=a.inside?"</"+a.inside:"<";a.inside&&!a.interpolate[a.inside]?b=c.indexOf(d):(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),!0===a.inAttribute?b.push('"',"'","=","<",">","`"):a.inAttribute?b.push(a.inAttribute):b.push(d),b=Xb(c,b));if(!b)return null;-1===b&&(b=c.length);a.pos+=b;return a.inside?c.substr(0,b):Ub(c.substr(0,b))}],vf=[function(a){var b=
a.pos,c=a.standardDelimiters[0],d=a.standardDelimiters[1],f=void 0,g=void 0;if(!a.matchPattern(qj)||!a.matchString(c))return a.pos=b,null;var h=a.matchPattern(rj);J("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+h+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+h+"}} --\x3e ... \x3c!-- {{/"+h+"}} --\x3e'");if(!a.matchString(d)||!a.matchPattern(sj))return a.pos=b,null;f=[];b=new RegExp("^\x3c!--\\s*"+c.replace(rf,"\\$&")+"\\s*\\/\\s*"+h+"\\s*"+d.replace(rf,"\\$&")+
"\\s*--\x3e");do a.matchPattern(b)?g=!0:((sf=a.read(lb))||a.error("expected closing comment ('\x3c!-- "+c+"/"+h+""+d+" --\x3e')"),f.push(sf));while(!g);return{t:17,f:f,n:h}},function(a){var b,c,d,f;b=a.pos;var g=a.standardDelimiters;if(!a.matchString(g[0]))return null;if(!a.matchPattern(tj))return a.pos=b,null;(b=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/))||a.error("expected legal partial name");a.matchString(g[1])||a.error("Expected closing delimiter '"+g[1]+"'");c=[];do Gc(a,{open:a.standardDelimiters[0],
close:a.standardDelimiters[1]})?f=!0:((d=a.read(lb))||a.error("Expected "+g[0]+"/partial"+g[1]),c.push(d));while(!f);return{t:17,n:b,f:c}}],tf=Ca.extend({init:function(a,b){var c=b.tripleDelimiters||["{{{","}}}"],d=b.staticDelimiters||["[[","]]"],f=b.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=b.delimiters||["{{","}}"];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:uj},{isStatic:!1,isTriple:!0,open:c[0],close:c[1],readers:uf},
{isStatic:!0,isTriple:!1,open:d[0],close:d[1],readers:vj},{isStatic:!0,isTriple:!0,open:f[0],close:f[1],readers:uf}];this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!b.interpolate||!1!==b.interpolate.script,style:!b.interpolate||!1!==b.interpolate.style};!0===b.sanitize&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0});this.stripComments=
!1!==b.stripComments;this.preserveWhitespace=b.preserveWhitespace;this.sanitizeElements=b.sanitize&&b.sanitize.elements;this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes;this.includeLinePositions=b.includeLinePositions},postProcess:function(a){if(!a.length)return{t:[],v:3};0<this.sectionDepth&&this.error("A section was left open");va(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);return a[0]},converters:[function(a){for(var b=
[],c=O(null),d=!1,f=a.preserveWhitespace;a.pos<a.str.length;){var g=a.pos,h=void 0,k=void 0;(k=a.read(vf))?(c[k.n]&&(a.pos=g,a.error("Duplicated partial definition")),va(k.f,a.stripComments,f,!f,!f),c[k.n]=k.f,d=!0):(h=a.read(lb))?b.push(h):a.error("Unexpected template content")}a={v:3,t:b};d&&(a.p=c);return a}],sortMustacheTags:function(){this.tags.sort(function(a,b){return b.open.length-a.open.length})}}),wj="preserveWhitespace sanitize stripComments delimiters tripleDelimiters interpolate".split(" "),
wf={fromId:function(a,b){var c;if(!pa){if(b&&b.noThrow)return;throw Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.");}Ld(a)&&(a=a.substring(1));if(!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw Error("Could not find template element with id #"+a);}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw Error("Template element with id #"+a+", must be a <script> element");}return"textContent"in c?c.textContent:c.innerHTML},isHashedId:Ld,isParsed:function(a){return"string"!==
typeof a},getParseOptions:function(a){a.defaults&&(a=a.defaults);return wj.reduce(function(b,c){b[c]=a[c];return b},{})},createHelper:function(a){var b=O(wf);b.parse=function(b,c){return Kd(b,c||a)};return b},parse:Kd},ia=wf,Yb={name:"template",extend:function(a,b,c){"template"in c&&(a=c.template,b.template="function"===typeof a?a:zb(a,b))},init:function(a,b,c){a="template"in c?c.template:a.prototype.template;"function"===typeof a&&(c=a,a=Md(b,c),b._config.template={fn:c,result:a});a=zb(a,b);b.template=
a.t;a.p&&Nd(b.partials,a.p)},reset:function(a){var b;b=a._config.template;var c;b&&b.fn?(c=Md(a,b.fn),c!==b.result?(b.result=c,b=c=zb(c,a)):b=void 0):b=void 0;if(b)return b=zb(b,a),a.template=b.t,Nd(a.partials,b.p,!0),!0}},Hb;Hb=function(a,b){this.name=a;this.useDefaults=b};Hb.prototype={constructor:Hb,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(){},configure:function(a,b,c){var d=this.name;c=c[d];a=O(a[d]);for(var f in c)a[f]=
c[f];b[d]=a},reset:function(a){var b=a[this.name],c=!1;Object.keys(b).forEach(function(a){var e=b[a];e._fn&&(e._fn.isOwner?b[a]=e._fn:delete b[a],c=!0)});return c}};var cb="adaptors components computed decorators easing events interpolators partials transitions".split(" ").map(function(a){return new Hb(a,"computed"===a)}),Ug=function(a,b,c){if(!/_super/.test(c))return c;var d=function(){var a=Rg(d._parent,b),e="_super"in this,f=this._super;this._super=a;a=c.apply(this,arguments);e?this._super=f:delete this._super;
return a};d._parent=a;d._method=c;return d},Sg=function(a){bb(a,"beforeInit","onconstruct");bb(a,"init","onrender");bb(a,"complete","oncomplete");bb(a,"eventDefinitions","events");g(a.adaptors)&&bb(a,"adaptors","adapt")},Ic,Ib,Wa,Td,Qd;Wa={adapt:Rd,css:Sd,data:qc,template:Yb};Ib=Object.keys(te);Qd=Ud(Ib.filter(function(a){return!Wa[a]}));Td=Ud(Ib.concat(cb.map(function(a){return a.name})));Ic=[].concat(Ib.filter(function(a){return!cb[a]&&!Wa[a]}),cb,Wa.data,Wa.template,Wa.css);var pc={extend:function(a,
b,c){return Pd("extend",a,b,c)},init:function(a,b,c){return Pd("init",a,b,c)},reset:function(a){return Ic.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:Ic},Jc=function(){return a(this.node)},xf=function(a){this.type=1;this.text=a.template};xf.prototype={detach:Jc,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createTextNode(this.text));return this.node},toString:function(a){return a?Wb(this.text):this.text},unrender:function(a){if(a)return this.detach()}};
var Sh=xf,Xa=function(){this.registered&&this.root.viewmodel.unregister(this.keypath,this);this.resolver&&this.resolver.unbind()},Kc=function(a,b,c){this.ref=b;this.resolved=!1;this.root=a.root;this.parentFragment=a.parentFragment;this.callback=c;a=wb(a.root,b,a.parentFragment);void 0!=a?this.resolve(a):w.addUnresolved(this)};Kc.prototype={resolve:function(a){this.keypath&&!a&&w.addUnresolved(this);this.resolved=!0;this.keypath=a;this.callback(a)},forceResolution:function(){this.resolve(L(this.ref))},
rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||w.removeUnresolved(this)}};var yf=function(a,b,c){this.parentFragment=a.parentFragment;this.ref=b;this.callback=c;this.rebind()},xj={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};yf.prototype={rebind:function(){var a=this.ref,b=this.parentFragment,c=xj[a],d;if(!c)throw Error('Unknown special reference "'+
a+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(L("@"+c.prefix+$b(this.cached,c)));if(-1!==c.prop.indexOf("index")||-1!==c.prop.indexOf("key"))for(;b;){if(52===b.owner.currentSubtype&&void 0!==(d=$b(b,c)))return this.cached=b,b.registerIndexRef(this),this.callback(L("@"+c.prefix+d));b=!b.parent&&b.owner&&b.owner.component&&b.owner.component.parentFragment&&!b.owner.component.instance.isolated?b.owner.component.parentFragment:b.parent}else for(;b;){if(void 0!==
(d=$b(b,c)))return this.callback(L("@"+c.prefix+d.str));b=b.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var zf=function(a,b,c){this.parentFragment=a.parentFragment;this.ref=b;this.callback=c;b.ref.fragment.registerIndexRef(this);this.rebind()};zf.prototype={rebind:function(){var a;a=this.ref.ref;a="k"===a.ref.t?"k"+a.fragment.key:"i"+a.fragment.index;void 0!==a&&this.callback(L("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};Qa.resolve=
function(a){var b={},c,d;for(c in a.refs)d=a.refs[c],b[d.ref.n]="k"===d.ref.t?d.fragment.key:d.fragment.index;return b};var gb=function(a,b,c){var d;return"@"===b.charAt(0)?new yf(a,b,c):(d=Qa(a.parentFragment,b))?new zf(a,d,c):new Kc(a,b,c)},Af=function(a,b){var c;if(Lc[a])return Lc[a];for(c=[];b--;)c[b]="_"+b;c=new Function(c.join(","),"return("+a+")");return Lc[a]=c},Lc={},Mc,Zg=Function.prototype.bind;Mc=function(a,b,c,d){var f=this;this.root=a.root;this.parentFragment=b;this.callback=d;this.owner=
a;this.str=c.s;this.keypaths=[];this.pending=c.r.length;this.refResolvers=c.r.map(function(a,e){return gb(f,a,function(a){f.resolve(e,a)})});this.ready=!0;this.bubble()};Mc.prototype={bubble:function(){this.ready&&(this.uniqueString=Wg(this.str,this.keypaths),this.keypath=L("${"+this.uniqueString.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=
b;this.bubble()},createEvaluator:function(){var a=this,b,c,d,f;d=this.keypath;(b=this.root.viewmodel.computations[d.str])?this.root.viewmodel.mark(d):(f=Af(this.str,this.refResolvers.length),c=this.keypaths.map(function(b){var c;return"undefined"===b?function(){}:b.isSpecial?(c=b.value,function(){return c}):function(){var c=a.root.viewmodel.get(b,{noUnwrap:!0,fullRootGet:!0});"function"===typeof c&&(c=Yg(c,a.root));return c}}),b={deps:this.keypaths.filter(Xg),getter:function(){var a=c.map(Vg);return f.apply(null,
a)}},b=this.root.viewmodel.compute(d,b))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var nc=Mc,Bf=function(a,b,c){var d=this;this.resolver=b;this.root=b.root;this.parentFragment=c;this.viewmodel=b.root.viewmodel;"string"===typeof a?this.value=a:30===a.t?this.refResolver=gb(this,a.n,function(a){d.resolve(a)}):new nc(b,c,a,function(a){d.resolve(a)})};Bf.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.keypath=a;this.value=
this.viewmodel.get(a);this.bind();this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a;this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Cf=function(a,b,c){var d=this,f,g,h;this.parentFragment=
h=a.parentFragment;this.root=f=a.root;this.mustache=a;this.ref=a=b.r;this.callback=c;this.unresolved=[];(g=wb(f,a,h))?this.base=g:this.baseResolver=new Kc(this,a,function(a){d.base=a;d.baseResolver=null;d.bubble()});this.members=b.m.map(function(a){return new Bf(a,d,h)});this.ready=!0;this.bubble()};Cf.prototype={getKeypath:function(){var a=this.members.map($g);return!a.every(ah)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},
unbind:function(){this.members.forEach(ha)},rebind:function(a,b){var c;if(this.base){var d=this.base.replace(a,b);d&&d!==this.base&&(this.base=d,c=!0)}this.members.forEach(function(d){d.rebind(a,b)&&(c=!0)});c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=L(this.ref),this.baseResolver.unbind(),this.baseResolver=null);this.members.forEach(bh);this.bubble()}};var pe=Cf,Df=function(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)});this.resolver&&
this.resolver.rebind(a,b)},ba={getValue:function(){return this.value},init:function(a,b){function c(b){a.resolve(b)}function d(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var f,g;g=b.parentFragment;f=b.template;a.root=g.root;a.parentFragment=g;a.pElement=g.pElement;a.template=b.template;a.index=b.index||0;a.isStatic=b.template.s;a.type=b.template.t;a.registered=!1;if(f=f.r)a.resolver=gb(a,f,c);b.template.x&&(a.resolver=new nc(a,
g,b.template.x,d));b.template.rx&&(a.resolver=new pe(a,b.template.rx,d));51!==a.template.n||a.hasOwnProperty("value")||a.setValue(void 0)},resolve:function(a){var b,c,d;a&&a.isSpecial?(this.keypath=a,this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),b&&(d=this.twowayBinding)&&d.rebound())},rebind:Df},Ef=
function(a){this.type=2;ba.init(this,a)};Ef.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:ba.resolve,rebind:ba.rebind,detach:Jc,unbind:Xa,render:function(){this.node||(this.node=document.createTextNode(d(this.value)));return this.node},unrender:function(e){e&&a(this.node)},getValue:ba.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get());h(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&
w.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=""+d(this.value);return a?Wb(b):b}};var Uh=Ef,Ff=function(a){this.type=4;this.subtype=this.currentSubtype=a.template.n;this.inverted=51===this.subtype;this.pElement=a.pElement;this.fragments=[];this.fragmentsToCreate=[];this.fragmentsToRender=[];this.fragmentsToUnrender=[];a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,e){return{n:a,t:0===e?"k":"i"}}));this.renderedFragments=[];this.length=0;
ba.init(this,a)};Ff.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var a;if(1===this.fragments.length)return this.fragments[0].detach();a=document.createDocumentFragment();this.fragments.forEach(function(b){a.appendChild(b.detach())});return a},find:function(a){var b,c,d;c=this.fragments.length;for(b=0;b<c;b+=1)if(d=this.fragments[b].find(a))return d;return null},findAll:function(a,b){var c,d;d=this.fragments.length;for(c=0;c<d;c+=1)this.fragments[c].findAll(a,b)},findAllComponents:function(a,
b){var c,d;d=this.fragments.length;for(c=0;c<d;c+=1)this.fragments[c].findAllComponents(a,b)},findComponent:function(a){var b,c,d;c=this.fragments.length;for(b=0;b<c;b+=1)if(d=this.fragments[b].findComponent(a))return d;return null},findNextNode:function(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)},firstNode:function(){var a,b,c;if(a=this.fragments.length)for(b=0;b<a;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)},
getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:ba.getValue,shuffle:function(a){var b=this,c,d,f,g;if(!this.shuffling&&!this.unbound&&52===this.currentSubtype){this.shuffling=!0;w.scheduleTask(function(){return b.shuffling=!1});f=[];a.forEach(function(a,e){var d,g,h,k;a===e?f[a]=b.fragments[e]:(d=b.fragments[e],void 0===c&&(c=e),-1===a?(b.fragmentsToUnrender.push(d),d.unbind()):(g=b.keypath.join(e),h=b.keypath.join(a),
d.index=a,(k=d.registeredIndexRefs)&&k.forEach(ch),d.rebind(g,h),f[a]=d))});d=this.root.viewmodel.get(this.keypath).length;if(void 0===c){if(this.length===d)return;c=this.length}this.length=this.fragments.length=d;this.rendered&&w.addView(this);for(a=c;a<d;a+=1)(g=f[a])||this.fragmentsToCreate.push(a),this.fragments[a]=g}},rebind:function(a,b){ba.rebind.call(this,a,b)},render:function(){var a=this;this.docFrag=document.createDocumentFragment();this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())});
this.renderedFragments=this.fragments.slice();this.fragmentsToRender=[];this.rendered=!0;return this.docFrag},resolve:ba.resolve,setValue:function(a){var b=this,c,d;this.updating||(this.updating=!0,this.keypath&&(c=this.root.viewmodel.wrapped[this.keypath.str])&&(a=c.get()),this.fragmentsToCreate.length?(d={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var e;d.context=b.keypath.join(a);d.index=a;e=new S(d);b.fragmentsToRender.push(b.fragments[a]=
e)}),this.fragmentsToCreate.length=0):dh(this,a)&&(this.bubble(),this.rendered&&w.addView(this)),this.value=a,this.updating=!1)},toString:function(a){var b,c,d;b="";d=this.length;for(c=0;c<d;c+=1)b+=this.fragments[c].toString(a);return b},unbind:function(){var a=this;this.fragments.forEach(ha);this.fragmentsToRender.forEach(function(b){return Q(a.fragments,b)});this.fragmentsToRender=[];Xa.call(this);this.length=0;this.unbound=!0},unrender:function(a){this.fragments.forEach(a?gh:hh);this.renderedFragments=
[];this.rendered=!1},update:function(){var a,b,c,d,f,g;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();this.rendered&&(d=this.parentFragment.getNode());g=this.fragments.length;for(f=0;f<g;f+=1)a=this.fragments[f],b=c.indexOf(a,f),b===f?this.docFrag.childNodes.length&&(a=a.firstNode(),d.insertBefore(this.docFrag,a)):(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(f,0,a));this.rendered&&
this.docFrag.childNodes.length&&(a=this.parentFragment.findNextNode(this),d.insertBefore(this.docFrag,a));this.renderedFragments=this.fragments.slice()}};var Vh=Ff,Xd={},Gf,Hf;try{wa("table").innerHTML="foo"}catch(e){Gf=!0,Hf={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var If=function(a,b,c){var d,f=[],g,h;if(null!=
a&&""!==a){Gf&&(g=Hf[b.tagName])?(d=dc("DIV"),d.innerHTML=g[0]+a+g[1],d=d.querySelector(".x"),"SELECT"===d.tagName&&(h=d.options[d.selectedIndex])):b.namespaceURI===ka.svg?(d=dc("DIV"),d.innerHTML='<svg class="x">'+a+"</svg>",d=d.querySelector(".x")):(d=dc(b.tagName),d.innerHTML=a,"SELECT"===d.tagName&&(h=d.options[d.selectedIndex]));for(;a=d.firstChild;)f.push(a),c.appendChild(a);if("SELECT"===b.tagName)for(b=f.length;b--;)f[b]!==h&&(f[b].selected=!1)}return f},Jf=function(a){var b,c;if(a&&"select"===
a.name&&a.binding){b=fa(a.node.options).filter(ih);if(a.getAttribute("multiple"))c=b.map(function(a){return a.value});else if(b=b[0])c=b.value;void 0!==c&&a.binding.setValue(c);a.bubble()}},Kf=function(a){this.type=3;ba.init(this,a)};Kf.prototype={detach:function(){var a,b;if(this.docFrag){a=this.nodes.length;for(b=0;b<a;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}},find:function(a){var b,c,d;c=this.nodes.length;for(b=0;b<c;b+=1)if(d=this.nodes[b],1===d.nodeType&&(ra(d,a)||(d=
d.querySelector(a))))return d;return null},findAll:function(a,b){var c,d,f,g,h;d=this.nodes.length;for(c=0;c<d;c+=1)if(f=this.nodes[c],1===f.nodeType&&(ra(f,a)&&b.push(f),f=f.querySelectorAll(a)))for(g=f.length,h=0;h<g;h+=1)b.push(f[h])},firstNode:function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},getValue:ba.getValue,rebind:ba.rebind,render:function(){if(this.rendered)throw Error("Attempted to render an item that was already rendered");this.docFrag=
document.createDocumentFragment();this.nodes=If(this.value,this.parentFragment.getNode(),this.docFrag);Jf(this.pElement);this.rendered=!0;return this.docFrag},resolve:ba.resolve,setValue:function(a){var b;if(b=this.root.viewmodel.wrapped[this.keypath.str])a=b.get();a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&w.addView(this))},toString:function(){return void 0!=this.value?Ub(""+this.value):""},unbind:Xa,unrender:function(b){this.rendered&&b&&(this.nodes.forEach(a),this.rendered=
!1)},update:function(){var a;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);a=this.parentFragment.getNode();this.nodes=If(this.value,a,this.docFrag);a.insertBefore(this.docFrag,this.parentFragment.findNextNode(this));Jf(this.pElement)}}};var Wh=Kf,Lf=/^true|on|yes|1$/i,yj=/^[0-9]+$/,Mf;Mf=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b}("altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ").concat("attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ")));
var Nc=function(a){a=a.toLowerCase();return Mf[a]||a},zj={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Aj=function(){var a=this.value,b,c,d,f;if(!this.locked)for(this.node._ractive.value=
a,b=this.node.options,f=b.length;f--;)if(c=b[f],d=c._ractive?c._ractive.value:c.value,d==a){c.selected=!0;break}},Bj=function(){var a=this.value,b,c,d,f;g(a)||(a=[a]);b=this.node.options;for(c=b.length;c--;)d=b[c],f=d._ractive?d._ractive.value:d.value,d.selected=W(a,f)},Cj=function(){var a=this.node;a.checked=this.value==a._ractive.value},Dj=function(){var a,b=this.node,c;a=b.checked;b.value=this.element.getAttribute("value");b.checked=this.element.getAttribute("value")===this.element.getAttribute("name");
if(a&&!b.checked&&this.element.binding&&(a=this.element.binding.siblings,b=a.length)){for(;b--;){c=a[b];if(!c.element.node)return;if(c.element.node.checked)return w.addRactive(c.root),c.handleChange()}this.root.viewmodel.set(c.keypath,void 0)}},Ej=function(){var a=this.element,b=this.node,c=this.value,d=a.binding,f,a=a.getAttribute("value");if(g(c)){for(f=c.length;f--;)if(a==c[f]){d.isChecked=b.checked=!0;return}d.isChecked=b.checked=!1}else d.isChecked=b.checked=c==a},Fj=function(){this.node.className=
d(this.value)},Gj=function(){var a=this.node,b=this.value;this.root.nodes[b]=a;a.id=b},Hj=function(){var a,b;a=this.node;b=this.value;void 0===b&&(b="");a.style.setAttribute("cssText",b)},Ij=function(){var a=this.value;void 0===a&&(a="");this.locked||(this.node.innerHTML=a)},Nf=function(){var a=this.node,b=this.value;a._ractive.value=b;this.locked||(a.value=void 0==b?"":b)},Jj=function(){this.locked||(this.node[this.propertyName]=this.value)},Kj=function(){var a=this.node,b=this.namespace,c=this.name,
d=this.value,f=this.fragment;b?a.setAttributeNS(b,c,(f||d).toString()):this.isBoolean?d?a.setAttribute(c,""):a.removeAttribute(c):null==d?a.removeAttribute(c):a.setAttribute(c,(f||d).toString())},Of=function(a){this.init(a)};Of.prototype={bubble:function(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();h(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),
this.rendered&&w.addView(this))},init:function(a){this.type=13;this.element=a.element;this.root=a.root;a:{var b=a.name,c,d;c=b.indexOf(":");if(-1!==c&&(d=b.substr(0,c),"xmlns"!==d)){b=b.substring(c+1);this.name=Nc(b);this.namespace=ka[d.toLowerCase()];this.namespacePrefix=d;if(!this.namespace)throw'Unknown namespace ("'+d+'")';break a}this.name=this.element.namespace!==ka.html?Nc(b):b}this.isBoolean=hf.test(this.name);a.value&&"string"!==typeof a.value?(this.parentFragment=this.element.parentFragment,
this.fragment=new S({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),a=this.fragment.items,a=1===a.length&&2===a[0].type?a[0]:void 0,this.interpolator=a,this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,this.ready=!0):this.value=this.isBoolean?!0:a.value||""},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},render:function(a){var b;this.node=a;if(!a.namespaceURI||a.namespaceURI===ka.html){b=zj[this.name]||this.name;void 0!==a[b]&&(this.propertyName=
b);if(this.isBoolean||this.isTwoway)this.useProperty=!0;"value"===b&&(a._ractive.value=this.value)}this.rendered=!0;this.update()},toString:function(){var a=this.name,b=this.namespacePrefix,c=this.value,d=this.interpolator,f=this.fragment;if("value"!==a||"select"!==this.element.name&&"textarea"!==this.element.name)if("value"!==a||void 0===this.element.getAttribute("contenteditable")){if("name"===a&&"input"===this.element.name&&d)return"name={{"+(d.keypath.str||d.ref)+"}}";if(this.isBoolean)return c?
a:"";if(f){if(1===f.items.length&&null==f.items[0].value)return"";c=f.toString()}b&&(a=b+":"+a);return c?a+'="'+c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")+'"':a}},unbind:function(){this.fragment&&this.fragment.unbind();"id"===this.name&&delete this.root.nodes[this.value]},update:function(){var a=this.name,b=this.element,c=this.node,d;"id"===a?d=Gj:"value"===a?"select"===b.name&&"value"===a?d=b.getAttribute("multiple")?Bj:Aj:"textarea"===b.name?d=Nf:null!=b.getAttribute("contenteditable")?
d=Ij:"input"===b.name&&(a=b.getAttribute("type"),d="file"===a?Y:"radio"===a&&b.binding&&"name"===b.binding.name?Dj:Nf):this.isTwoway&&"name"===a?"radio"===c.type?d=Cj:"checkbox"===c.type&&(d=Ej):"style"===a&&c.style.setAttribute?d=Hj:"class"!==a||c.namespaceURI&&c.namespaceURI!==ka.html?this.useProperty&&(d=Jj):d=Fj;d||(d=Kj);this.update=d;this.update()}};var ec;"undefined"!==typeof document&&(ec=wa("div"));var Pf=function(a,b){this.element=a;this.root=a.root;this.parentFragment=a.parentFragment;
this.attributes=[];this.fragment=new S({root:a.root,owner:this,template:[b]})};Pf.prototype={bubble:function(){this.node&&this.update();this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a;this.isSvg=a.namespaceURI===ka.svg;this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a=this,b;b=jh(this.fragment.toString(),this.isSvg);this.attributes.filter(function(a){a:{for(var e=b.length;e--;)if(b[e].name===a.name){a=!1;break a}a=
!0}return a}).forEach(function(b){a.node.removeAttribute(b.name)});b.forEach(function(b){a.node.setAttribute(b.name,b.value)});this.attributes=b},toString:function(){return this.fragment.toString()}};var Lj=function(a,b){return b?b.map(function(b){return new Pf(a,b)}):[]},ca=function(a){var b,c;this.element=a;this.root=a.root;this.attribute=a.attributes[this.name||"value"];b=this.attribute.interpolator;b.twowayBinding=this;if(c=b.keypath){if("}"===c.str.slice(-1))return J("Two-way binding does not work with expressions (`%s` on <%s>)",
b.resolver.uniqueString,a.name,{ractive:this.root}),!1;if(c.isSpecial)return J("Two-way binding does not work with %s",b.resolver.ref,{ractive:this.root}),!1}else x("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",b.template.r?"'"+b.template.r+"' reference":"expression",{ractive:this.root}),b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0;this.keypath=c;b=this.root.viewmodel.get(c);
void 0===b&&this.getInitialValue&&(b=this.getInitialValue(),void 0!==b&&this.root.viewmodel.set(c,b));a:{for(;a=a.parent;)if("form"===a.name)break a;a=void 0}a&&(this.resetValue=b,a.formBindings.push(this))};ca.prototype={handleChange:function(){var a=this;w.start(this.root);this.attribute.locked=!0;this.root.viewmodel.set(this.keypath,this.getValue());w.scheduleTask(function(){return a.attribute.locked=!1});w.end()},rebound:function(){var a,b;a=this.keypath;b=this.attribute.interpolator.keypath;
a!==b&&(Q(this.root._twowayBindings[a.str],this),this.keypath=b,a=this.root._twowayBindings[b.str]||(this.root._twowayBindings[b.str]=[]),a.push(this))},unbind:function(){}};ca.extend=function(a){var b;b=function(a){ca.call(this,a);this.init&&this.init()};b.prototype=O(this.prototype);c(b.prototype,a);b.extend=ca.extend;return b};var N=function(){this._ractive.binding.handleChange()},Jb=ca.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a=
this.element.node,b,c=!1;this.rendered=!0;b=this.root.lazy;!0===this.element.lazy?b=!0:!1===this.element.lazy?b=!1:k(this.element.lazy)?(b=!1,c=+this.element.lazy):k(b||"")&&(c=+b,b=!1,this.element.lazy=c);this.handler=c?kh:N;a.addEventListener("change",N,!1);b||(a.addEventListener("input",this.handler,!1),a.attachEvent&&a.addEventListener("keyup",this.handler,!1));a.addEventListener("blur",Yd,!1)},unrender:function(){var a=this.element.node;this.rendered=!1;a.removeEventListener("change",N,!1);a.removeEventListener("input",
this.handler,!1);a.removeEventListener("keyup",this.handler,!1);a.removeEventListener("blur",Yd,!1)}}),Mj=Jb.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Oc=function(a,b,c){a=a+b+c;return Qf[a]||(Qf[a]=[])},Qf={},Nj=ca.extend({name:"checked",init:function(){this.siblings=Oc(this.root._guid,"radio",this.element.getAttribute("name"));this.siblings.push(this)},render:function(){var a=this.element.node;
a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},handleChange:function(){w.start(this.root);this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())});w.end()},getValue:function(){return this.element.node.checked},unbind:function(){Q(this.siblings,this)}}),Oj=ca.extend({name:"name",init:function(){this.siblings=Oc(this.root._guid,
"radioname",this.keypath.str);this.siblings.push(this);this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}";a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value");a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",
N,!1);a.removeEventListener("click",N,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&ca.prototype.handleChange.call(this)},rebound:function(a,b){var c;ca.prototype.rebound.call(this,a,b);if(c=this.element.node)c.name="{{"+this.keypath.str+"}}"},unbind:function(){Q(this.siblings,this)}}),Pj=ca.extend({name:"name",getInitialValue:function(){this.noInitialValue=!0;return[]},init:function(){var a,b;this.checkboxName=
!0;this.siblings=Oc(this.root._guid,"checkboxes",this.keypath.str);this.siblings.push(this);this.noInitialValue&&(this.siblings.noInitialValue=!0);this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){Q(this.siblings,this)},render:function(){var a=this.element.node,b,c;b=this.root.viewmodel.get(this.keypath);c=this.element.getAttribute("value");g(b)?this.isChecked=W(b,c):this.isChecked=
b==c;a.name="{{"+this.keypath.str+"}}";a.checked=this.isChecked;a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},changed:function(){var a=!!this.isChecked;this.isChecked=this.element.node.checked;return this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked;ca.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(lh).map(mh)}}),
Qj=ca.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},getValue:function(){return this.element.node.checked}}),Pc=ca.extend({getInitialValue:function(){var a=this.element.options,b,c,d,f;if(void 0===this.element.getAttribute("value")&&(c=b=a.length)){for(;c--;)if(a[c].getAttribute("selected")){d=
a[c].getAttribute("value");f=!0;break}if(!f)for(;++c<b;)if(!a[c].getAttribute("disabled")){d=a[c].getAttribute("value");break}void 0!==d&&(this.element.attributes.value.value=d);return d}},render:function(){this.element.node.addEventListener("change",N,!1)},unrender:function(){this.element.node.removeEventListener("change",N,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,d;a=this.element.node.options;c=a.length;for(b=0;b<c;b+=1)if(d=a[b],a[b].selected)return a=
d._ractive?d._ractive.value:d.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,w.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),Rj=Pc.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){this.element.node.addEventListener("change",N,!1);void 0===this.root.viewmodel.get(this.keypath)&&
this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",N,!1)},setValue:function(){throw Error("TODO not implemented yet");},getValue:function(){var a,b,c,d,f;a=[];b=this.element.node.options;d=b.length;for(c=0;c<d;c+=1)f=b[c],f.selected&&(f=f._ractive?f._ractive.value:f.value,a.push(f));return a},handleChange:function(){var a,b;a=this.attribute.value;b=this.getValue();void 0!==a&&ma(b,a)||Pc.prototype.handleChange.call(this);return this},forceUpdate:function(){var a=
this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,w.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Sj=ca.extend({render:function(){this.element.node.addEventListener("change",N,!1)},unrender:function(){this.element.node.removeEventListener("change",N,!1)},getValue:function(){return this.element.node.files}}),
Tj=Jb.extend({getInitialValue:function(){},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Uj=/^event(?:\.(.+))?/,Rf=function(a){var b,c,d,f={};b=this._ractive;c=b.events[a.type];if(d=Qa(c.element.parentFragment))f=Qa.resolve(d);c.fire({node:this,original:a,index:f,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})},fc={},Vj={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Sf=function(a,b,c){this.init(a,b,c)};Sf.prototype=
{bubble:function(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()},fire:function(a){eb(this.root,this.getAction(),{event:a})},getAction:function(){return this.action.toString().trim()},init:function(a,b,c){var d=this;this.element=a;this.root=a.root;this.parentFragment=a.parentFragment;this.name=b;-1!==b.indexOf("*")&&(m('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0);c.m?(b=c.a.r,this.method=
c.m,this.keypaths=[],this.fn=Af(c.a.s,b.length),this.parentFragment=a.parentFragment,this.refResolvers=[],b.forEach(function(a,b){var e=void 0;(e=Uj.exec(a))?d.keypaths[b]={eventObject:!0,refinements:e[1]?e[1].split("."):[]}:d.refResolvers.push(gb(d,a,function(a){return d.resolve(b,a)}))}),this.fire=nh):(a=c.n||c,"string"!==typeof a&&(a=new S({template:a,root:this.root,owner:this})),this.action=a,c.d?(this.dynamicParams=new S({template:c.d,root:this.root,owner:this.element}),this.fire=ph):c.a&&(this.params=
c.a,this.fire=oh))},listen:function(){var a,b=this.name;if(!this.invalid){if(a=P("events",this.root,b))this.custom=a(this.node,qh(b));else{if(!("on"+b in this.node||window&&"on"+b in window||ue)){Vj[b]||J(Sa(b,"event"),{node:this.node});return}this.node.addEventListener(b,Rf,!1)}this.hasListener=!0}},rebind:function(a,b){function c(d){d&&d.rebind(a,b)}this.method?this.refResolvers.forEach(c):("string"!==typeof this.action&&c(this.action),this.dynamicParams&&c(this.dynamicParams))},render:function(){this.node=
this.element.node;this.node._ractive.events[this.name]=this;(this.method||this.getAction())&&this.listen()},resolve:function(a,b){this.keypaths[a]=b},unbind:function(){this.method?this.refResolvers.forEach(ha):("string"!==typeof this.action&&this.action.unbind(),this.dynamicParams&&this.dynamicParams.unbind())},unrender:function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Rf,!1);this.hasListener=!1}};var Tf=function(a,b){var c=this,d,f,g;this.element=a;this.root=d=
a.root;f=b.n||b;if("string"!==typeof f&&(g=new S({template:f,root:d,owner:a}),f=g.toString(),g.unbind(),""===f))return;b.a?this.params=b.a:b.d&&(this.fragment=new S({template:b.d,root:d,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;c.params=this.getArgsList();c.ready&&c.update()});(this.fn=P("decorators",d,f))||m(Sa(f,"decorator"))};Tf.prototype={init:function(){var a;a=this.element.node;this.params?(a=[a].concat(this.params),a=
this.fn.apply(this.root,a)):a=this.fn.call(this.root,a);if(!a||!a.teardown)throw Error("Decorator definition must return an object with a teardown method");this.actual=a;this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0;this.ready&&this.actual.teardown();!a&&this.fragment&&this.fragment.unbind()}};var Qc=function(a){return a.replace(/-([a-zA-Z])/g,
function(a,b){return b.toUpperCase()})},Rc,mb,Sc;pa?(mb={},Sc=wa("div").style,Rc=function(a){var b,c,d;a=Qc(a);if(!mb[a])if(void 0!==Sc[a])mb[a]=a;else for(d=a.charAt(0).toUpperCase()+a.substring(1),b=qa.length;b--;)if(c=qa[b],void 0!==Sc[c+d]){mb[a]=c+d;break}return mb[a]}):Rc=null;var sa=Rc,Tc,Uf;pa?(Uf=window.getComputedStyle||null.getComputedStyle,Tc=function(a){var b,c,d,f,h;b=Uf(this.node);if("string"===typeof a)return h=b[sa(a)],"0px"===h&&(h=0),h;if(!g(a))throw Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");
c={};for(d=a.length;d--;)f=a[d],h=b[sa(f)],"0px"===h&&(h=0),c[f]=h;return c}):Tc=null;var Wj=Tc,Vf=function(a){var b;this.duration=a.duration;this.step=a.step;this.complete=a.complete;"string"===typeof a.easing?(b=a.root.easing[a.easing],b||(J(Sa(a.easing,"easing")),b=$d)):b="function"===typeof a.easing?a.easing:$d;this.easing=b;this.start=Ae();this.end=this.start+this.duration;this.running=!0;Tb.add(this)};Vf.prototype={tick:function(a){if(!this.running)return!1;if(a>this.end)return this.step&&this.step(1),
this.complete&&this.complete(1),!1;a=this.easing((a-this.start)/this.duration);this.step&&this.step(a);return!0},stop:function(){this.abort&&this.abort();this.running=!1}};var Xj=new RegExp("^-(?:"+qa.join("|")+")-"),Yj=new RegExp("^(?:"+qa.join("|")+")([A-Z])"),Wf=function(a){if(!a)return"";Yj.test(a)&&(a="-"+a);return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},Uc,Vc,Ya,nb,ob,Xf,Yf,Zf,Wc={},Kb={};pa?(Vc=wa("div").style,void 0!==Vc.transition?(Ya="transition",nb="transitionend",ob=
!0):void 0!==Vc.webkitTransition?(Ya="webkitTransition",nb="webkitTransitionEnd",ob=!0):ob=!1,Ya&&(Xf=Ya+"Duration",Yf=Ya+"Property",Zf=Ya+"TimingFunction"),Uc=function(a,b,c,d,f){setTimeout(function(){var g,h,k,l,m;l=function(){h&&k&&(a.root.fire(a.name+":end",a.node,a.isIntro),f())};g=(a.node.namespaceURI||"")+a.node.tagName;a.node.style[Yf]=d.map(sa).map(Wf).join(",");a.node.style[Zf]=Wf(c.easing||"linear");a.node.style[Xf]=c.duration/1E3+"s";m=function(b){b=d.indexOf(Qc(b.propertyName.replace(Xj,
"")));-1!==b&&d.splice(b,1);d.length||(a.node.removeEventListener(nb,m,!1),k=!0,l())};a.node.addEventListener(nb,m,!1);setTimeout(function(){for(var f=d.length,n,ua,p=[],q;f--;)if(q=d[f],n=g+q,ob&&!Kb[n]&&(a.node.style[sa(q)]=b[q],Wc[n]||(ua=a.getStyle(q),Wc[n]=a.getStyle(q)!=b[q],Kb[n]=!Wc[n],Kb[n]&&(a.node.style[sa(q)]=ua))),!ob||Kb[n])void 0===ua&&(ua=a.getStyle(q)),n=d.indexOf(q),-1===n?x("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",
{node:a.node}):d.splice(n,1),n=/[^\d]*$/.exec(b[q])[0],p.push({name:sa(q),interpolator:Eb(parseFloat(ua),parseFloat(b[q])),suffix:n});p.length?new Vf({root:a.root,duration:c.duration,easing:Qc(c.easing||""),step:function(b){var c,d;for(d=p.length;d--;)c=p[d],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){h=!0;l()}}):h=!0;d.length||(a.node.removeEventListener(nb,m,!1),k=!0,l())},0)},c.delay||0)}):Uc=null;var Zj=Uc,fb,Xc,Lb,Yc,Ra;if("undefined"!==typeof document){fb="hidden";Ra=
{};if(fb in document)Lb="";else for(Yc=qa.length;Yc--;)Xc=qa[Yc],fb=Xc+"Hidden",fb in document&&(Lb=Xc);void 0!==Lb?(document.addEventListener(Lb+"visibilitychange",ae),ae()):("onfocusout"in document?(document.addEventListener("focusout",gc),document.addEventListener("focusin",hc)):(window.addEventListener("pagehide",gc),window.addEventListener("blur",gc),window.addEventListener("pageshow",hc),window.addEventListener("focus",hc)),Ra.hidden=!1)}var ak=Ra,Zc,$f,ag;pa?($f=window.getComputedStyle||null.getComputedStyle,
Zc=function(a,b,c){var d=this,f;if(4===arguments.length)throw Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(ak.hidden)return this.setStyle(a,b),ag||(ag=Ga.resolve());"string"===typeof a?(f={},f[a]=b):(f=a,c=b);c||(J('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);return new Ga(function(a){var b,
e,g,h,K,k;if(c.duration){b=Object.keys(f);e=[];g=$f(d.node);for(K=b.length;K--;)k=b[K],h=g[sa(k)],"0px"===h&&(h=0),h!=f[k]&&(e.push(k),d.node.style[sa(k)]=h);e.length?Zj(d,f,c,e,a):a()}else d.setStyle(f),a()})}):Zc=null;var $c=function(a,b,c){this.init(a,b,c)};$c.prototype={init:function(a,b,c){var d,f;this.element=a;this.root=d=a.root;this.isIntro=c;c=b.n||b;if("string"!==typeof c&&(f=new S({template:c,root:d,owner:a}),c=f.toString(),f.unbind(),""===c))return;this.name=c;b.a?this.params=b.a:b.d&&
(f=new S({template:b.d,root:d,owner:a}),this.params=f.getArgsList(),f.unbind());(this._fn=P("transitions",d,c))||J(Sa(c,"transition"),{ractive:this.root})},start:function(){var a=this,b,c,d;b=this.node=this.element.node;c=b.getAttribute("style");this.complete=function(f){d||(!f&&a.isIntro&&(c?b.setAttribute("style",c):(b.getAttribute("style"),b.removeAttribute("style"))),b._ractive.transition=null,a._manager.remove(a),d=!0)};this._fn?this._fn.apply(this.root,[this].concat(this.params)):this.complete()},
getStyle:Wj,setStyle:function(a,b){var c;if("string"===typeof a)this.node.style[sa(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[sa(c)]=a[c]);return this},animateStyle:Zc,processParams:function(a,b){"number"===typeof a?a={duration:a}:"string"===typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={});return f({},a,b)}};var bg,cg;bg=function(){var a=this.node,b=this.fragment.toString(!1);window&&window.appearsToBeIELessEqual8&&(a.type="text/css");if(a.styleSheet)a.styleSheet.cssText=
b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}};cg=function(){this.node.type&&"text/javascript"!==this.node.type||x("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root});this.node.text=this.fragment.toString(!1)};var dg=function(a){this.init(a)};dg.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var a=this.node,b;if(a)return(b=a.parentNode)&&b.removeChild(a),a},find:function(a){if(!this.node)return null;
if(ra(this.node,a))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(a)},findAll:function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b);this.fragment&&this.fragment.findAll(a,b)},findAllComponents:function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},findComponent:function(a){if(this.fragment)return this.fragment.findComponent(a)},findNextNode:function(){return null},firstNode:function(){return this.node},getAttribute:function(a){if(this.attributes&&
this.attributes[a])return this.attributes[a].value},init:function(a){var b,c,d,f,g,h;this.type=7;c=this.parentFragment=a.parentFragment;d=this.template=a.template;this.parent=a.pElement||c.pElement;this.root=c=c.root;this.index=a.index;this.key=a.key;this.name=Nc(d.e);if("option"===this.name){b:{if(a=this.parent){do if("select"===a.name)break b;while(a=a.parent)}a=void 0}if(this.select=a)this.select.options.push(this),d.a||(d.a={}),void 0!==d.a.value||d.a.hasOwnProperty("disabled")||(d.a.value=d.f),
"selected"in d.a&&void 0!==this.select.getAttribute("value")&&delete d.a.selected}"select"===this.name&&(this.options=[],this.bubble=rh);"form"===this.name&&(this.formBindings=[]);var k,l;l=d.a||{};b=a=void 0;k=l.twoway;void 0!==k&&(a=0===k||Lf.test(k));k=l.lazy;void 0!==k&&(0!==k&&yj.test(k)?b=parseInt(k):b=0===k||Lf.test(k));k=d.a;var m;l=[];for(h in k)"twoway"!==h&&"lazy"!==h&&k.hasOwnProperty(h)&&(m=new Of({element:this,name:h,value:k[h],root:this.root}),l[h]=m,"value"!==h&&l.push(m));(m=l.value)&&
l.push(m);this.attributes=l;this.conditionalAttributes=Lj(this,d.m);d.f&&(this.fragment=new S({template:d.f,root:c,owner:this,pElement:this,cssIds:null}));h=c.twoway;!1===a?h=!1:!0===a&&(h=!0);this.twoway=h;this.lazy=b;if(h){var n;m=this.attributes;this.binding&&(this.binding.teardown(),this.binding=null);(this.getAttribute("contenteditable")||m.contenteditable&&Ba(m.contenteditable))&&Ba(m.value)?n=Mj:"input"===this.name?(f=this.getAttribute("type"),"radio"===f||"checkbox"===f?(h=Ba(m.name),m=Ba(m.checked),
h&&m&&x("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:this.root}),h?n="radio"===f?Oj:Pj:m&&(n="radio"===f?Nj:Qj)):"file"===f&&Ba(m.value)?n=Sj:Ba(m.value)&&(n="number"===f||"range"===f?Tj:Jb)):"select"===this.name&&Ba(m.value)?n=this.getAttribute("multiple")?Rj:Pc:"textarea"===this.name&&Ba(m.value)&&(n=Jb);n=n&&(g=new n(this))&&g.keypath?g:void 0;h=f=n}h&&(this.binding=f,g=this.root._twowayBindings[f.keypath.str]||(this.root._twowayBindings[f.keypath.str]=
[]),g.push(f));if(d.v){g=d.v;var p;m=[];for(p in g)if(g.hasOwnProperty(p))for(f=p.split("-"),n=f.length;n--;)h=new Sf(this,f[n],g[p]),m.push(h);this.eventHandlers=m}d.o&&(this.decorator=new Tf(this,d.o));this.intro=d.t0||d.t1;this.outro=d.t0||d.t2},rebind:function(a,b){function c(d){d.rebind(a,b)}var d,f,g;this.attributes&&this.attributes.forEach(c);this.conditionalAttributes&&this.conditionalAttributes.forEach(c);this.eventHandlers&&this.eventHandlers.forEach(c);this.decorator&&c(this.decorator);
this.fragment&&c(this.fragment);if(g=this.liveQueries)for(d=g.length;d--;)g[d]._makeDirty();this.node&&(f=this.node._ractive)&&jd(f,"keypath",a,b)},render:function(){var a=this,b=this.root,c,d,f;c=vh(this);d=this.node=wa(this.name,c);this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" "));oa(this.node,"_ractive",{value:{proxy:this,keypath:Ce(this.parentFragment),events:O(null),root:b}});this.attributes.forEach(function(a){return a.render(d)});
this.conditionalAttributes.forEach(function(a){return a.render(d)});this.fragment&&("script"===this.name?(this.bubble=cg,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Y):"style"===this.name?(this.bubble=bg,this.bubble(),this.fragment.unrender=Y):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Y:this.node.appendChild(this.fragment.render()));this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding);this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()});
"option"===this.name&&wh(this);"img"===this.name?th(this):"form"===this.name?this.node.addEventListener("reset",Zd,!1):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected);this.decorator&&this.decorator.fn&&w.scheduleTask(function(){a.decorator.torndown||a.decorator.init()},!0);b.transitionsEnabled&&this.intro&&(f=new $c(this,this.intro,!0),w.registerTransition(f),w.scheduleTask(function(){return f.start()},
!0),this.transition=f);this.node.autofocus&&w.scheduleTask(function(){return a.node.focus()},!0);xh(this);return this.node},toString:function(){var a,b;if(this.template.y)return"<!DOCTYPE"+this.template.dd+">";a="<"+this.template.e;a+=this.attributes.map(be).join("")+this.conditionalAttributes.map(be).join("");if(b="option"===this.name)a:{var c,d;b=this.getAttribute("value");if(void 0!==b&&this.select)if(c=this.select.getAttribute("value"),c==b)b=!0;else{if(this.select.getAttribute("multiple")&&g(c))for(d=
c.length;d--;)if(c[d]==b){b=!0;break a}b=void 0}else b=!1}b&&(a+=" selected");if(b="input"===this.name)d=this.attributes,b=d.type,c=d.value,d=d.name,b=b&&"radio"===b.value&&c&&d.interpolator?c.value===d.interpolator.value?!0:void 0:void 0;b&&(a+=" checked");a+=">";"textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Wb(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")||"");this.fragment&&(b="script"!==this.name&&"style"!==this.name,
a+=this.fragment.toString(b));Fb.test(this.template.e)||(a+="</"+this.template.e+">");return a},unbind:function(){this.fragment&&this.fragment.unbind();this.binding&&this.binding.unbind();this.eventHandlers&&this.eventHandlers.forEach(ha);"option"===this.name&&this.select&&Q(this.select.options,this);this.attributes.forEach(ha);this.conditionalAttributes.forEach(ha)},unrender:function(a){var b,c;(c=this.transition)&&c.complete();"option"===this.name?this.detach():a&&w.detachWhenReady(this);this.fragment&&
this.fragment.unrender(!1);if(a=this.binding)this.binding.unrender(),this.node._ractive.binding=null,b=this.root._twowayBindings[a.keypath.str],b.splice(b.indexOf(a),1);this.eventHandlers&&this.eventHandlers.forEach(I);this.decorator&&w.registerDecorator(this.decorator);this.root.transitionsEnabled&&this.outro&&(c=new $c(this,this.outro,!1),w.registerTransition(c),w.scheduleTask(function(){return c.start()}));this.liveQueries&&yh(this);"form"===this.name&&this.node.removeEventListener("reset",Zd,
!1)}};var Zh=dg,eg=/^\s*$/,Ah=/^\s*/,bk=function(a){var b,c,d;b=a.split("\n");c=b[0];void 0!==c&&eg.test(c)&&b.shift();c=T(b);void 0!==c&&eg.test(c)&&b.pop();(d=b.reduce(zh,null))&&(a=b.map(function(a){return a.replace(d,"")}).join("\n"));return a},ad=function(a,b,c){var d;d=void 0;var f=de(b,(c||{}).owner);f?d=f:(c=U("partials",a,b))?(f=c.partials[b],"function"===typeof f&&(d=f.bind(c),d.isOwner=c.partials.hasOwnProperty(b),f=d.call(a,ia)),f||""===f?(ia.isParsed(f)||(f=ia.parse(f,ia.getParseOptions(c)),
f.p&&x("Partials ({{>%s}}) cannot contain nested inline partials",b,{ractive:a}),(d?c:c.partials.hasOwnProperty(b)?c:ce(c.constructor,b)).partials[b]=f=f.t),d&&(f._fn=d),d=f.v?f.t:f):(x('A function was specified for "%s" %s, but no %s was returned',b,"partial","partial",{ractive:a}),d=void 0)):d=void 0;if(d)return d;if(d=ia.fromId(b,{noThrow:!0}))return d=bk(d),d=ia.parse(d,ia.getParseOptions(a)),a.partials[b]=d.t},ck=function(a,b){return b?a.split("\n").map(function(a,e){return e?b+a:a}).join("\n"):
a},fg=function(a){var b;b=this.parentFragment=a.parentFragment;this.root=b.root;this.type=8;this.index=a.index;this.name=a.template.r;this.rendered=!1;this.fragment=this.fragmentToRender=this.fragmentToUnrender=null;ba.init(this,a);this.keypath||((a=ad(this.root,this.name,b))?(Xa.call(this),this.isNamed=!0,this.setTemplate(a)):J('Could not find template for partial "%s"',this.name))};fg.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},
findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,
b){this.isNamed||Df.call(this,a,b);this.fragment&&this.fragment.rebind(a,b)},render:function(){this.docFrag=document.createDocumentFragment();this.update();this.rendered=!0;return this.docFrag},resolve:ba.resolve,setValue:function(a){var b;if(void 0===a||a!==this.value)void 0!==a&&(b=ad(this.root,""+a,this.parentFragment)),!b&&this.name&&(b=ad(this.root,this.name,this.parentFragment))&&(Xa.call(this),this.isNamed=!0),b||J('Could not find template for partial "%s"',this.name,{ractive:this.root}),this.value=
a,this.setTemplate(b||[]),this.bubble(),this.rendered&&w.addView(this)},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment));this.fragmentToRender=this.fragment=new S({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement})},toString:function(a){var b,c;a=this.fragment.toString(a);b=this.parentFragment.items[this.index-1];if(!b||1!==b.type)return a;b=b.text.split("\n").pop();return(c=/^\s+$/.exec(b))?ck(a,c[0]):
a},unbind:function(){this.isNamed||Xa.call(this);this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null);this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null);this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),
a.insertBefore(this.docFrag,b))}};var $h=fg,Xh=ee,dk=new aa("detach"),bd=[],pb="pop push reverse shift sort splice unshift".split(" "),Mb,cd;pb.forEach(function(a){oa(bd,a,{value:function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var f,b=Le(this,a,c),c=Array.prototype[a].apply(this,arguments);w.start();this._ractive.setting=!0;for(d=this._ractive.wrappers.length;d--;){f=this._ractive.wrappers[d];w.addRactive(f.root);var g=f.root;f=f.keypath;b?g.viewmodel.smartUpdate(f,
this,b):g.viewmodel.mark(f)}w.end();this._ractive.setting=!1;return c}})});({}).__proto__?(Mb=function(a){a.__proto__=bd},cd=function(a){a.__proto__=Array.prototype}):(Mb=function(a){var b,c;for(b=pb.length;b--;)c=pb[b],oa(a,c,{value:bd[c],configurable:!0})},cd=function(a){var b;for(b=pb.length;b--;)delete a[pb[b]]});Mb.unpatch=cd;var gg=Mb,dd,ed;dd=function(a,b,c){this.root=a;this.value=b;this.keypath=L(c);b._ractive||(oa(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),
gg(b));b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a));b._ractive.instances[a._guid]+=1;b._ractive.wrappers.push(this)};dd.prototype={get:function(){return this.value},teardown:function(){var a,b,c,d;a=this.value;b=a._ractive;c=b.wrappers;d=b.instances;if(b.setting)return!1;b=c.indexOf(this);if(-1===b)throw Error(ed);c.splice(b,1);if(c.length){if(--d[this.root._guid],!d[this.root._guid]){b=d.indexOf(this.root);if(-1===b)throw Error(ed);d.splice(b,1)}}else delete a._ractive,
gg.unpatch(this.value)}};ed="Something went wrong in a rather interesting way";var mc={filter:function(a){return g(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new dd(a,b,c)}},ke=/^\s*[0-9]+\s*$/,fd,gd;try{Object.defineProperty({},"test",{value:0}),fd={filter:function(a,b,c){var d;if(!b)return!1;b=L(b);if((d=c.viewmodel.wrapped[b.parent.str])&&!d.magic)return!1;a=c.viewmodel.get(b.parent);return g(a)&&/^[0-9]+$/.test(b.lastKey)?!1:a&&("object"===typeof a||"function"===typeof a)},
wrap:function(a,b,c){return new gd(a,b,c)}},gd=function(a,b,c){var d;c=L(c);this.magic=!0;this.ractive=a;this.keypath=c;this.value=b;this.prop=c.lastKey;c=c.parent;this.obj=c.isRoot?a.viewmodel.data:a.viewmodel.get(c);(a=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&a.set&&(d=a.set._ractiveWrappers)?-1===d.indexOf(this)&&d.push(this):Bh(this,b,a)},gd.prototype={get:function(){return this.value},reset:function(a){if(!this.updating)return this.updating=!0,this.obj[this.prop]=
a,w.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=ke.test(a)?[]:{},this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b;if(this.updating)return!1;if(a=(a=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&a.set)a=a._ractiveWrappers,b=a.indexOf(this),-1!==b&&a.splice(b,1),a.length||(a=this.obj[this.prop],Object.defineProperty(this.obj,
this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=a)}}}catch(e){fd=!1}var Bb=fd,hg,hd;Bb&&(hg={filter:function(a,b,c){return Bb.filter(a,b,c)&&mc.filter(a)},wrap:function(a,b,c){return new hd(a,b,c)}},hd=function(a,b,c){this.value=b;this.magic=!0;this.magicWrapper=Bb.wrap(a,b,c);this.arrayWrapper=mc.wrap(a,b,c)},hd.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});
var Lh=hg,ic={},ek=function(a){var b=[Fa],c,d;for(c=a.length;c--;)for(d=a[c].parent;d&&!d.isRoot;){if(-1===a.indexOf(d)){var f=b,g=d;-1===f.indexOf(g)&&f.push(g)}d=d.parent}return b},ig=function(a,b,c){ge(a,b);c||(c=b.wildcardMatches(),c.forEach(function(c){fe(a,c,b)}))},jg=function(a,b){this.computation=a;this.viewmodel=a.viewmodel;this.ref=b;this.root=this.viewmodel.ractive;this.parentFragment=this.root.component&&this.root.component.parentFragment};jg.prototype={resolve:function(a){this.computation.softDeps.push(a);
this.computation.unresolvedDeps[a.str]=null;this.viewmodel.register(a,this.computation,"computed")}};var id=function(a,b){this.key=a;this.getter=b.getter;this.setter=b.setter;this.hardDeps=b.deps||[];this.softDeps=[];this.unresolvedDeps={};this.depValues={};this._dirty=this._firstRun=!0};id.prototype={constructor:id,init:function(a){var b=this,c;this.viewmodel=a;this.bypass=!0;c=a.get(this.key);a.clearCache(this.key.str);this.bypass=!1;this.setter&&void 0!==c&&this.set(c);this.hardDeps&&this.hardDeps.forEach(function(c){return a.register(c,
b,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var a=this,b,c=!1;if(this.getting)return r("The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`"),this.value;this.getting=!0;if(this._dirty){this._firstRun||!this.hardDeps.length&&!this.softDeps.length?c=!0:[this.hardDeps,this.softDeps].forEach(function(b){var d,
f,g;if(!c)for(g=b.length;g--;)if(d=b[g],f=a.viewmodel.get(d),!h(f,a.depValues[d.str])){a.depValues[d.str]=f;c=!0;break}});if(c){this.viewmodel.capture();try{this.value=this.getter()}catch(d){x('Failed to compute "%s"',this.key.str),p(d.stack||d),this.value=void 0}b=this.viewmodel.release();(b=this.updateDependencies(b))&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){a.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}this.getting=this._firstRun=!1;return this.value},
set:function(a){if(this.setting)this.value=a;else{if(!this.setter)throw Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(a)}},updateDependencies:function(a){var b,c,d,f,g;c=this.softDeps;for(b=c.length;b--;)d=c[b],-1===a.indexOf(d)&&(f=!0,this.viewmodel.unregister(d,this,"computed"));for(b=a.length;b--;)if(d=a[b],-1===c.indexOf(d)&&(!this.hardDeps||-1===this.hardDeps.indexOf(d))){f=!0;g=this.viewmodel;var h=d.firstKey;h in g.data||
h in g.computations||h in g.mappings||this.unresolvedDeps[d.str]?this.viewmodel.register(d,this,"computed"):(g=new jg(this,d.str),a.splice(b,1),this.unresolvedDeps[d.str]=g,w.addUnresolved(g))}f&&(this.softDeps=a.slice());return f}};var kg={FAILED_LOOKUP:!0},fk={},lg=function(a,b){this.localKey=a;this.keypath=b.keypath;this.origin=b.origin;this.deps=[];this.unresolved=[];this.resolved=!1};lg.prototype={forceResolution:function(){this.keypath=this.localKey;this.setup()},get:function(a,b){return this.resolved?
this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a;this.setup()},map:function(a){return a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c});this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0);this.keypath=a;this.setup()},set:function(a,b){this.resolved||this.forceResolution();this.origin.set(this.map(a),
b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group);if(b.dep.setValue)b.dep.setValue(a.origin.get(c));else if(b.dep.invalidate)b.dep.invalidate();else throw Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");
this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey];this.resolved&&(this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(a,b,c){var d,f;if(this.resolved){d=this.deps;for(f=d.length;f--;)if(d[f].dep===b){d.splice(f,1);break}this.origin.unregister(this.map(a),b,c)}}};var gk=function(a,b){var c,d;c={};d=0;return a.map(function(a,
e){var f,g,h;g=d;h=b.length;do{f=b.indexOf(a,g);if(-1===f)return-1;g=f+1}while(c[f]&&g<h);f===d&&(d+=1);c[f]=!0;return f})},jc={},hk={implicit:!0},mg={noCascade:!0},ng=function(a){var b=a.adapt,c=a.data,d=a.computed,f=a.mappings,g,h;this.ractive=a.ractive;this.adaptors=b;this.onchange=a.onchange;this.cache={};this.cacheMap=O(null);this.deps={computed:O(null),"default":O(null)};this.depsMap={computed:O(null),"default":O(null)};this.patternObservers=[];this.specials=O(null);this.wrapped=O(null);this.computations=
O(null);this.captureGroups=[];this.unresolvedImplicitDependencies=[];this.changes=[];this.implicitChanges={};this.noCascade={};this.data=c;this.mappings=O(null);for(g in f)this.map(L(g),f[g]);if(c)for(g in c)(h=this.mappings[g])&&void 0===h.getValue()&&h.setValue(c[g]);for(g in d)f&&g in f&&m("Cannot map to a computed property ('%s')",g),this.compute(L(g),d[g]);this.ready=!0};ng.prototype={adapt:function(a,b){var c,d,f;if(this.adaptors)for(c=this.adaptors.length,d=0;d<c;d+=1)if(f=this.adaptors[d],
f.filter(b,a,this.ractive)){c=this.wrapped[a]=f.wrap(this.ractive,b,a,Ch(a));c.value=b;break}},applyChanges:function(){function a(c){var e=c.key;c.viewmodel===d?(d.clearCache(e.str),c.invalidate(),f.push(e),b(e)):c.viewmodel.mark(e)}function b(c){var f,g;d.noCascade.hasOwnProperty(c.str)||((g=d.deps.computed[c.str])&&g.forEach(a),(f=d.depsMap.computed[c.str])&&f.forEach(b))}var c=this,d=this,f,g,h={},k;f=this.changes;if(f.length)return f.slice().forEach(b),g=ek(f),g.forEach(function(b){var c;-1===
f.indexOf(b)&&(c=d.deps.computed[b.str])&&c.forEach(a)}),this.changes=[],this.patternObservers.length&&(g.forEach(function(a){return ig(c,a,!0)}),f.forEach(function(a){return ig(c,a)})),this.deps.observers&&(g.forEach(function(a){return he(c,null,a,"observers")}),je(this,f,"observers")),this.deps["default"]&&(k=[],g.forEach(function(a){return he(c,k,a,"default")}),k.length&&Dh(this,k,f),je(this,f,"default")),f.forEach(function(a){h[a.str]=c.get(a)}),this.implicitChanges={},this.noCascade={},h},capture:function(){this.captureGroups.push([])},
clearCache:function(a,b){var c;b||(c=this.wrapped[a])&&!1!==c.teardown()&&(this.wrapped[a]=null);this.cache[a]=void 0;if(c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())},compute:function(a,b){var c=new id(a,b);this.ready&&c.init(this);return this.computations[a.str]=c},get:function(a,b){var c=this.cache,d,f,g,h,k=a.str,l;b=b||fk;b.capture&&(h=T(this.captureGroups))&&(~h.indexOf(a)||h.push(a));if(Ea.call(this.mappings,a.firstKey))return this.mappings[a.firstKey].get(a,b);if(a.isSpecial)return a.value;
if(void 0===c[k]){if((f=this.computations[k])&&!f.bypass)d=f.get(),this.adapt(k,d);else if(g=this.wrapped[k])d=g.value;else if(a.isRoot)this.adapt("",this.data),d=this.data;else{f=this.get(a.parent);if(h=this.wrapped[a.parent.str])f=h.get();null===f||void 0===f?d=void 0:((d=this.cacheMap[a.parent.str])?-1===d.indexOf(a.str)&&d.push(a.str):this.cacheMap[a.parent.str]=[a.str],"object"!==typeof f||a.lastKey in f?(d=f[a.lastKey],this.adapt(a.str,d,!1),this.cache[a.str]=d):d=this.cache[a.str]=kg)}c[k]=
d}else d=c[k];!b.noUnwrap&&(g=this.wrapped[k])&&(d=g.get());if(a.isRoot&&b.fullRootGet)for(l in this.mappings)d[l]=this.mappings[l].getValue();return d===kg?void 0:d},init:function(){for(var a in this.computations)this.computations[a].init(this)},map:function(a,b){var c=this.mappings[a.str]=new lg(a,b);c.initViewmodel(this);return c},mark:function(a,b){var c,d=a.str;b&&(b.implicit&&(this.implicitChanges[d]=!0),b.noCascade&&(this.noCascade[d]=!0));(c=this.computations[d])&&c.invalidate();-1===this.changes.indexOf(a)&&
this.changes.push(a);this.clearCache(d,b?b.keepExistingWrapper:!1);if(this.ready)this.onchange()},merge:function(a,b,c,d){var f,g;this.mark(a);if(d&&d.compare){d=Fh(d.compare);try{f=b.map(d),g=c.map(d)}catch(h){x('merge(): "%s" comparison failed. Falling back to identity checking',a),f=b,g=c}}else f=b,g=c;f=gk(f,g);this.smartUpdate(a,c,f,b.length!==c.length)},register:function(a,b,c){c=void 0===c?"default":c;var d;if(!b.isStatic)if(d=this.mappings[a.firstKey])d.register(a,b,c);else if(d=this.deps[c]||
(this.deps[c]={}),d=d[a.str]||(d[a.str]=[]),d.push(b),this.depsMap[c]||(this.depsMap[c]={}),!a.isRoot)for(;!a.isRoot;)b=this.depsMap[c],b=b[a.parent.str]||(b[a.parent.str]=[]),d=a.str,void 0===b["_"+d]&&(b["_"+d]=0,b.push(a)),b["_"+d]+=1,a=a.parent},release:function(){return this.captureGroups.pop()},reset:function(a){this.data=a;this.clearCache("")},set:function(a,b,c){c=void 0===c?{}:c;var d,f,g;if(!c.noMapping&&(d=this.mappings[a.firstKey]))return d.set(a,b);if(d=this.computations[a.str]){if(d.setting)return;
d.set(b);b=d.get()}h(this.cache[a.str],b)||((f=this.wrapped[a.str])&&f.reset&&(g=!1!==f.reset(b))&&(b=f.get()),d||g||Gh(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))},smartUpdate:function(a,b,c){var d=this,f,g;g=c.length;c.forEach(function(b,c){-1===b&&d.mark(a.join(c),mg)});this.set(a,b,{silent:!0});(f=this.deps["default"][a.str])&&f.filter(Hh).forEach(function(a){return a.shuffle(c,b)});if(g!==b.length){this.mark(a.join("length"),hk);for(f=c.touchedFrom;f<b.length;f+=1)this.mark(a.join(f));
for(f=b.length;f<g;f+=1)this.mark(a.join(f),mg)}},teardown:function(){var a=this,b;for(Object.keys(this.cache).forEach(function(b){return a.clearCache(b)});b=this.unresolvedImplicitDependencies.pop();)b.teardown()},unregister:function(a,b,c){c=void 0===c?"default":c;var d;if(!b.isStatic){if(d=this.mappings[a.firstKey])return d.unregister(a,b,c);d=this.deps[c][a.str];b=d.indexOf(b);if(-1===b)throw Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");
d.splice(b,1);if(!a.isRoot)for(;!a.isRoot;)b=this.depsMap[c],b=b[a.parent.str],--b["_"+a.str],b["_"+a.str]||(Q(b,a),b["_"+a.str]=void 0),a=a.parent}}};kc.prototype={constructor:kc,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?le(this.queue,b).push(a):me(this,a);delete this.inProcess[a._guid]}};var ik=function(a,b){var c={},d;for(d in b){var f=d,g=a,h=d,k=b[d],l=void 0,n=void 0;"function"===typeof k&&(l=lc(k,g));"string"===typeof k&&(l=ne(g,
k));"object"===typeof k&&("string"===typeof k.get?l=ne(g,k.get):"function"===typeof k.get?l=lc(k.get,g):m("`%s` computation must have a `get()` method",h),"function"===typeof k.set&&(n=lc(k.set,g)));c[f]={getter:l,setter:n}}return c},Ih=/\$\{([^\}]+)\}/g,jk=new aa("construct"),kk=new aa("config"),og=new kc("init"),Nh=0,lk="adaptors components decorators easing events interpolators partials transitions".split(" "),oc=function(a,d,f){var g=void 0===d?{}:d;d=void 0===f?{}:f;za.DEBUG&&ib();Mh(a,d);oa(a,
"data",{get:Oh});jk.fire(a,g);lk.forEach(function(b){a[b]=c(O(a.constructor[b]||null),g[b])});f=new ng({adapt:Jh(a,a.adapt,g),data:qc.init(a.constructor,a,g),computed:ik(a,c(O(a.constructor.prototype.computed),g.computed)),mappings:d.mappings,ractive:a,onchange:function(){return w.addRactive(a)}});a.viewmodel=f;f.init();pc.init(a.constructor,a,g);kk.fire(a);og.begin(a);if(a.template){f=void 0;if(d.cssIds||a.cssId)f=d.cssIds?d.cssIds.slice():[],a.cssId&&f.push(a.cssId);a.fragment=new S({template:a.template,
root:a,owner:a,cssIds:f})}og.end(a);if(d=b(a.el))if(d=a.render(d,a.append),za.DEBUG_PROMISES)d["catch"](function(b){J("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");x("An error happened during rendering",{ractive:a});b.stack&&p(b.stack);throw b;})};oe.prototype={bubble:function(){this.dirty||(this.dirty=!0,w.addView(this))},
update:function(){this.callback(this.fragment.getValue());this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var mk=function(a,b,d,f,h){var k,l,m,n,p={},q={},r={},w,I=[];l=a.parentFragment;m=a.root;h=h||{};c(p,h);h.content=f||[];p[""]=h.content;b.defaults.el&&x("The <%s/> component has a default `el` property; it has been disregarded",a.name);for(f=l;f;){if(16===f.owner.type){n=f.owner.container;break}f=f.parent}d&&Object.keys(d).forEach(function(b){var c=
d[b],f;if("string"===typeof c)f=Gb(c),q[b]=f?f.value:c;else if(0===c)q[b]=!0;else if(g(c))1===c.length&&2===c[0].t?(r[b]={origin:a.root.viewmodel,keypath:void 0},c=Ph(a,c[0],function(a){a.isSpecial?w?k.set(b,a.value):(q[b]=a.value,delete r[b]):w?k.viewmodel.mappings[b].resolve(a):r[b].keypath=a})):c=new oe(a,c,function(a){w?k.set(b,a):q[b]=a}),I.push(c);else throw Error("erm wut");});k=O(b.prototype);oc(k,{el:null,append:!0,data:q,partials:h,magic:m.magic||b.defaults.magic,modifyArrays:m.modifyArrays,
adapt:m.adapt},{parent:m,component:a,container:n,mappings:r,inlinePartials:p,cssIds:l.cssIds});w=!0;a.resolvers=I;return k},nk=new aa("teardown"),pg=function(a,b){this.init(a,b)};pg.prototype={detach:function(){var a=this.instance.fragment.detach();dk.fire(this.instance);return a},find:function(a){return this.instance.fragment.find(a)},findAll:function(a,b){return this.instance.fragment.findAll(a,b)},findAllComponents:function(a,b){b._test(this,!0);this.instance.fragment&&this.instance.fragment.findAllComponents(a,
b)},findComponent:function(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance},findNextNode:function(){return this.parentFragment.findNextNode(this)},firstNode:function(){return this.rendered?this.instance.fragment.firstNode():null},init:function(a,b){if(!b)throw Error('Component "'+this.name+'" not found');this.root=(this.parentFragment=a.parentFragment).root;this.type=15;this.name=a.template.e;this.index=a.index;this.indexRefBindings={};
this.yielders={};this.resolvers=[];mk(this,b,a.template.a,a.template.f,a.template.p);var c=a.template.v,d;for(d in c)c.hasOwnProperty(d)&&Qh(this.instance,this.root,d,c[d]);(a.template.t0||a.template.t1||a.template.t2||a.template.o)&&x('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});for(var f,c=this.root;c;)(f=c._liveComponentQueries["_"+this.name])&&f.push(this.instance),c=c.parent},rebind:function(a,b){function c(d){d.rebind(a,b)}var d;this.resolvers.forEach(c);
for(var f in this.yielders)this.yielders[f][0]&&c(this.yielders[f][0]);(d=this.root._liveComponentQueries["_"+this.name])&&d._makeDirty()},render:function(){var a=this.instance;a.render(this.parentFragment.getNode());this.rendered=!0;return a.fragment.detach()},toString:function(){return this.instance.fragment.toString()},unbind:function(){var a=this.instance;this.resolvers.forEach(ha);var b,c;b=this.root;do(c=b._liveComponentQueries["_"+this.name])&&c._remove(this);while(b=b.parent);a._observers.forEach(Da);
a.fragment.unbind();a.viewmodel.teardown();a.fragment.rendered&&a.el.__ractive_instances__&&Q(a.el.__ractive_instances__,a);nk.fire(a)},unrender:function(a){this.shouldDestroy=a;this.instance.unrender()}};var Yh=pg,qg=function(a){this.type=9;this.value=a.template.c};qg.prototype={detach:Jc,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createComment(this.value));return this.node},toString:function(){return"\x3c!--"+this.value+"--\x3e"},unrender:function(a){a&&
this.node.parentNode.removeChild(this.node)}};var ai=qg,rg=function(a){var b,c;this.type=16;this.container=b=a.parentFragment.root;this.component=c=b.component;this.container=b;this.containerFragment=a.parentFragment;this.parentFragment=c.parentFragment;var d=this.name=a.template.n||"",f=b._inlinePartials[d];f||(x('Could not find template for partial "'+d+'"',{ractive:a.root}),f=[]);this.fragment=new S({owner:this,root:b.parent,template:f,pElement:this.containerFragment.pElement});g(c.yielders[d])?
c.yielders[d].push(this):c.yielders[d]=[this];w.scheduleTask(function(){if(1<c.yielders[d].length)throw Error("A component template can only have one {{yield"+(d?" "+d:"")+"}} declaration at a time");})};rg.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,
b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a);Q(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Th=rg,sg=function(a){this.declaration=
a.template.a};sg.prototype={init:Y,render:Y,unrender:Y,teardown:Y,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var bi=sg,tg=function(a){this.init(a)};tg.prototype={bubble:function(){this.dirtyValue=this.dirtyArgs=!0;this.bound&&"function"===typeof this.owner.bubble&&this.owner.bubble()},detach:function(){var a;if(1===this.items.length)return this.items[0].detach();a=document.createDocumentFragment();this.items.forEach(function(b){(b=b.detach())&&a.appendChild(b)});return a},find:function(a){var b,
c,d,f;if(this.items){c=this.items.length;for(b=0;b<c;b+=1)if(d=this.items[b],d.find&&(f=d.find(a)))return f;return null}},findAll:function(a,b){var c,d,f;if(this.items)for(d=this.items.length,c=0;c<d;c+=1)f=this.items[c],f.findAll&&f.findAll(a,b);return b},findAllComponents:function(a,b){var c,d,f;if(this.items)for(d=this.items.length,c=0;c<d;c+=1)f=this.items[c],f.findAllComponents&&f.findAllComponents(a,b);return b},findComponent:function(a){var b,c,d,f;if(this.items){b=this.items.length;for(c=
0;c<b;c+=1)if(d=this.items[c],d.findComponent&&(f=d.findComponent(a)))return f;return null}},findNextNode:function(a){a=a.index;return this.items[a+1]?this.items[a+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():null},getArgsList:function(){var a,b;this.dirtyArgs&&(b=Zb(this.items,a={},this.root._guid),this.argsList=a=(a=Gb("["+b+"]",a))?
a.value:[this.toString()],this.dirtyArgs=!1);return this.argsList},getNode:function(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el},getValue:function(){var a,b;this.dirtyValue&&(b=Zb(this.items,a={},this.root._guid),this.value=a=(a=Gb(b,a))?a.value:this.toString(),this.dirtyValue=!1);return this.value},init:function(a){var b=this;this.owner=a.owner;this.parent=this.owner.parentFragment;this.root=a.root;this.pElement=a.pElement;this.context=
a.context;this.index=a.index;this.key=a.key;this.registeredIndexRefs=[];this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.items=a.template.map(function(c,d){return Rh({parentFragment:b,pElement:a.pElement,template:c,index:d})});this.value=this.argsList=null;this.bound=this.dirtyArgs=this.dirtyValue=!0},rebind:function(a,b){this.owner&&!this.owner.hasContext||jd(this,"context",a,b);this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})},registerIndexRef:function(a){var b=
this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:function(){var a;1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())}));this.rendered=!0;return a},toString:function(a){return this.items?this.items.map(a?di:ci).join(""):""},unbind:function(){this.bound&&(this.items.forEach(ei),this.bound=!1)},unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:function(a){if(!this.rendered)throw Error("Attempted to unrender a fragment that was not rendered");
this.items.forEach(function(b){return b.unrender(a)});this.rendered=!1}};var S=tg,ok=["template","partials","components","decorators","events"],pk=new aa("reset"),qk=Ia("reverse"),rk=Ia("shift"),sk=Ia("sort"),tk=Ia("splice"),uk=new aa("teardown"),ug=function(){return this.fragment.toString(!0)},vk=new aa("unrender"),wk=Ia("unshift"),xk=new aa("update"),yk={add:function(a,b){return ye(this,a,void 0===b?1:+b)},animate:function(a,b,c){var d,f,g,h,k,l,m,n,p,q,r,x;d=new Ga(function(a){return f=a});if("object"===
typeof a){c=b||{};b=c.easing;l=c.duration;k=[];m=c.step;n=c.complete;if(m||n)q={},c.step=null,c.complete=null,p=function(a){return function(b,c){q[a]=c}};for(g in a)if(a.hasOwnProperty(g)){if(m||n)r=p(g),c={easing:b,duration:l},m&&(c.step=r);c.complete=n?r:Y;k.push(rb(this,g,a[g],c))}a={easing:b,duration:l};m&&(a.step=function(a){return m(a,q)});n&&d.then(function(a){return n(a,q)});a.complete=f;x=rb(this,null,null,a);k.push(x);d.stop=function(){for(var a;a=k.pop();)a.stop();x&&x.stop()};return d}c=
c||{};c.complete&&d.then(c.complete);c.complete=f;h=rb(this,a,b,c);d.stop=function(){return h.stop()};return d},detach:function(){if(this.detached)return this.detached;this.el&&Q(this.el.__ractive_instances__,this);this.detached=this.fragment.detach();pi.fire(this);return this.detached},find:function(a){return this.el?this.fragment.find(a):null},findAll:function(a,b){var c,d;if(!this.el)return[];b=b||{};c=this._liveQueries;if(d=c[a])return b&&b.live?d:d.slice();d=Ge(this,a,!!b.live,!1);d.live&&(c.push(a),
c["_"+a]=d);this.fragment.findAll(a,d);return d},findAllComponents:function(a,b){var c,d;b=b||{};c=this._liveComponentQueries;if(d=c[a])return b&&b.live?d:d.slice();d=Ge(this,a,!!b.live,!0);d.live&&(c.push(a),c["_"+a]=d);this.fragment.findAllComponents(a,d);return d},findComponent:function(a){return this.fragment.findComponent(a)},findContainer:function(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null},findParent:function(a){return this.parent?
this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null},fire:function(a){var b={args:Array.prototype.slice.call(arguments,1)};eb(this,a,b)},get:function(a){var b;a=L(la(a));b=this.viewmodel.get(a,wi);void 0===b&&this.parent&&!this.isolated&&wb(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a));return b},insert:function(a,c){if(!this.fragment.rendered)throw Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");
a=b(a);c=b(c)||null;if(!a)throw Error("You must specify a valid target to insert into");a.insertBefore(this.detach(),c);this.el=a;(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this);this.detached=null;nd(this)},merge:function(a,b,c){var d,f;a=L(la(a));d=this.viewmodel.get(a);if(!g(d)||!g(b))return this.set(a,b,c&&c.complete);f=w.start(this,!0);this.viewmodel.merge(a,d,b,c);w.end();return f},observe:function(a,b,c){var d,f,g;if(l(a)){c=b;f=a;d=[];for(a in f)f.hasOwnProperty(a)&&(b=f[a],
d.push(this.observe(a,b,c)));return{cancel:function(){for(;d.length;)d.pop().cancel()}}}if("function"===typeof a)return c=b,b=a,yc(this,"",b,c);f=a.split(" ");if(1===f.length)return yc(this,a,b,c);d=[];for(g=f.length;g--;)(a=f[g])&&d.push(yc(this,a,b,c));return{cancel:function(){for(;d.length;)d.pop().cancel()}}},observeOnce:function(a,b,c){var d=this.observe(a,function(){b.apply(this,arguments);d.cancel()},{init:!1,defer:c&&c.defer});return d},off:function(a,b){var c=this,d;if(a)d=a.split(" ").map(Je).filter(Ke),
d.forEach(function(a){var d;if(d=c._subs[a])b?(a=d.indexOf(b),-1!==a&&d.splice(a,1)):c._subs[a]=[]});else for(a in this._subs)delete this._subs[a];return this},on:function(a,b){var c=this,d,f;if("object"===typeof a){d=[];for(f in a)a.hasOwnProperty(f)&&d.push(this.on(f,a[f]));return{cancel:function(){for(var a;a=d.pop();)a.cancel()}}}a.split(" ").map(Je).filter(Ke).forEach(function(a){(c._subs[a]||(c._subs[a]=[])).push(b)});return{cancel:function(){return c.off(a,b)}}},once:function(a,b){var c=this.on(a,
function(){b.apply(this,arguments);c.cancel()});return c},pop:Ai,push:Bi,render:function(a,c){var d=this,f,g,h;h=this.transitionsEnabled;this.noIntro&&(this.transitionsEnabled=!1);f=w.start(this,!0);w.scheduleTask(function(){return Ci.fire(d)},!0);if(this.fragment.rendered)throw Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");a=b(a)||this.el;c=b(c)||this.anchor;this.el=a;this.anchor=c;if(!this.append&&a){var k=a.__ractive_instances__;k&&k.length&&
k.splice(0,k.length).forEach(sb);a.innerHTML=""}this.cssId&&Pe.apply();a&&((g=a.__ractive_instances__)?g.push(this):a.__ractive_instances__=[this],c?a.insertBefore(this.fragment.render(),c):a.appendChild(this.fragment.render()));w.end();this.transitionsEnabled=h;return f.then(function(){return Di.fire(d)})},reset:function(a){var b,c,d;a=a||{};if("object"!==typeof a)throw Error("The reset method takes either no arguments, or an object containing new data");(c=this.viewmodel.wrapped[""])&&c.reset?!1===
c.reset(a)&&this.viewmodel.reset(a):this.viewmodel.reset(a);c=pc.reset(this);for(d=c.length;d--;)if(-1<ok.indexOf(c[d])){b=!0;break}if(b){b=void 0;this.viewmodel.mark(Fa);if(b=this.component)b.shouldDestroy=!0;this.unrender();b&&(b.shouldDestroy=!1);this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new S({template:this.template,root:this,owner:this}));b=this.render(this.el,this.anchor)}else b=w.start(this,!0),this.viewmodel.mark(Fa),w.end();pk.fire(this,a);return b},resetPartial:function(a,
b){function c(b,d,f){f&&f.partials[a]||b.forEach(function(b){8===b.type&&b.getPartialName()===a&&d.push(b);b.fragment&&c(b.fragment.items,d,f);g(b.fragments)?c(b.fragments,d,f):g(b.items)?c(b.items,d,f):15===b.type&&b.instance&&c(b.instance.fragment.items,d,b.instance);7===b.type&&(g(b.attributes)&&c(b.attributes,d,f),g(b.conditionalAttributes)&&c(b.conditionalAttributes,d,f))})}var d,f=[];c(this.fragment.items,f);this.partials[a]=b;d=w.start(this,!0);f.forEach(function(b){b.value=void 0;b.setValue(a)});
w.end();return d},resetTemplate:function(a){var b;Yb.init(null,this,{template:a});a=this.transitionsEnabled;this.transitionsEnabled=!1;if(b=this.component)b.shouldDestroy=!0;this.unrender();b&&(b.shouldDestroy=!1);this.fragment.unbind();this.fragment=new S({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled=a},reverse:qk,set:function(a,b){var c,d;d=w.start(this,!0);if(l(a))for(a in c=a,c)c.hasOwnProperty(a)&&(b=c[a],qe(this,a,b));else qe(this,a,
b);w.end();return d},shift:rk,sort:sk,splice:tk,subtract:function(a,b){return ye(this,a,void 0===b?-1:-b)},teardown:function(){var a;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(Da);this.fragment.rendered&&this.el.__ractive_instances__&&Q(this.el.__ractive_instances__,this);this.shouldDestroy=!0;a=this.fragment.rendered?this.unrender():Ga.resolve();uk.fire(this);this._boundFunctions.forEach(fi);return a},toggle:function(a){var b=this;if("string"!==typeof a)throw new TypeError("Bad arguments");
var c=void 0;return/\*/.test(a)?(c={},qb(this,L(la(a))).forEach(function(a){c[a.str]=!b.viewmodel.get(a)}),this.set(c)):this.set(a,!this.get(a))},toHTML:ug,toHtml:ug,unrender:function(){var a,b;if(!this.fragment.rendered)return x("ractive.unrender() was called on a Ractive instance that was not rendered"),Ga.resolve();a=w.start(this,!0);for(b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();this.fragment.unrender(b);Q(this.el.__ractive_instances__,
this);vk.fire(this);w.end();return a},unshift:wk,update:function(a){var b;a=L(a)||Fa;b=w.start(this,!0);this.viewmodel.mark(a);w.end();xk.fire(this,a);return b},updateModel:function(a,b){var c,d;if("string"!==typeof a||b)for(c in d=[],this._twowayBindings)a&&!L(c).equalsOrStartsWith(a)||d.push.apply(d,this._twowayBindings[c]);else d=this._twowayBindings[a];c=gi(this,d);return this.set(c)}},ki=function(a,b,c){return c||"function"===typeof b&&/_super/.test(a)?function(){var c="_super"in this,d=this._super,
f;this._super=b;f=a.apply(this,arguments);c&&(this._super=d);return f}:a},li=function(a){for(var b={};a;)hi(a,b),ji(a,b),a=a._Parent!==za?a._Parent:!1;return b},ta;ta=function(a){if(!(this instanceof ta))return new ta(a);oc(this,a)};Ta(ta,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:re},getNodeInfo:{value:function(a){var b={},c;if(!a||!(c=a._ractive))return b;b.ractive=c.root;b.keypath=c.keypath.str;b.index={};if(a=Qa(c.proxy.parentFragment))b.index=Qa.resolve(a);
return b}},parse:{value:yb},Promise:{value:Ga},svg:{value:rc},magic:{value:Ab},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:{linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return 1>(a/=.5)?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}}},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Db},partials:{writable:!0,
value:{}},transitions:{writable:!0,value:{}}});ta.prototype=c(yk,te);ta.prototype.constructor=ta;ta.defaults=ta.prototype;if("function"!==typeof Date.now||"function"!==typeof String.prototype.trim||"function"!==typeof Object.keys||"function"!==typeof Array.prototype.indexOf||"function"!==typeof Array.prototype.forEach||"function"!==typeof Array.prototype.map||"function"!==typeof Array.prototype.filter||"undefined"!==typeof window&&"function"!==typeof window.addEventListener)throw Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");
var za=ta;return za});(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):b.Ractive.events.tap=a()})(this,function(){function b(a,b){this.node=a;this.callback=b;this.preventMousedownEvents=!1;this.bind(a)}function a(a){this.__tap_handler__.mousedown(a)}function d(a){this.__tap_handler__.touchdown(a)}function c(){this.addEventListener("keydown",g,!1);this.addEventListener("blur",f,!1)}function f(){this.removeEventListener("keydown",g,
!1);this.removeEventListener("blur",f,!1)}function g(a){32===a.which&&this.__tap_handler__.fire()}b.prototype={bind:function(b){window.navigator.pointerEnabled?b.addEventListener("pointerdown",a,!1):window.navigator.msPointerEnabled?b.addEventListener("MSPointerDown",a,!1):b.addEventListener("mousedown",a,!1);b.addEventListener("touchstart",d,!1);"BUTTON"!==b.tagName&&"button"!==b.type||b.addEventListener("focus",c,!1);b.__tap_handler__=this},fire:function(a,b,c){this.callback({node:this.node,original:a,
x:b,y:c})},mousedown:function(a){var b=this;if(!this.preventMousedownEvents&&(void 0===a.which||1===a.which)){var c=a.clientX,d=a.clientY,f=a.pointerId,g=function(a){a.pointerId==f&&(b.fire(a,c,d),r())},q=function(a){a.pointerId==f&&(5<=Math.abs(a.clientX-c)||5<=Math.abs(a.clientY-d))&&r()},r=function J(){b.node.removeEventListener("MSPointerUp",g,!1);document.removeEventListener("MSPointerMove",q,!1);document.removeEventListener("MSPointerCancel",J,!1);b.node.removeEventListener("pointerup",g,!1);
document.removeEventListener("pointermove",q,!1);document.removeEventListener("pointercancel",J,!1);b.node.removeEventListener("click",g,!1);document.removeEventListener("mousemove",q,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",g,!1),document.addEventListener("pointermove",q,!1),document.addEventListener("pointercancel",r,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",g,!1),document.addEventListener("MSPointerMove",q,!1),document.addEventListener("MSPointerCancel",
r,!1)):(this.node.addEventListener("click",g,!1),document.addEventListener("mousemove",q,!1));setTimeout(r,400)}},touchdown:function(){var a=this,b=event.touches[0],c=b.clientX,d=b.clientY,f=b.identifier,g=function(b){b.changedTouches[0].identifier===f&&(b.preventDefault(),a.preventMousedownEvents=!0,clearTimeout(a.preventMousedownTimeout),a.preventMousedownTimeout=setTimeout(function(){a.preventMousedownEvents=!1},400),a.fire(b,c,d));r()},q=function(a){1===a.touches.length&&a.touches[0].identifier===
f||r();a=a.touches[0];(5<=Math.abs(a.clientX-c)||5<=Math.abs(a.clientY-d))&&r()},r=function J(){a.node.removeEventListener("touchend",g,!1);window.removeEventListener("touchmove",q,!1);window.removeEventListener("touchcancel",J,!1)};this.node.addEventListener("touchend",g,!1);window.addEventListener("touchmove",q,!1);window.addEventListener("touchcancel",r,!1);setTimeout(r,400)},teardown:function(){var b=this.node;b.removeEventListener("pointerdown",a,!1);b.removeEventListener("MSPointerDown",a,!1);
b.removeEventListener("mousedown",a,!1);b.removeEventListener("touchstart",d,!1);b.removeEventListener("focus",c,!1)}};return function(a,c){return new b(a,c)}});(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):a(b.Ractive.events)})(this,function(b){function a(a,b){return function(c,d){function f(g){function h(){g.preventDefault();d({node:c,original:g})}(g.which||g.keyCode)===a&&(b?g[b]&&h():h())}c.addEventListener("keydown",f,!1);return{teardown:function(){c.removeEventListener("keydown",f,!1)}}}}var d=a(13),c=a(9),f=a(27),g=a(32),h=a(37),k=a(39),l=a(40),n=a(38),
m=a(13,"ctrlKey");b.enter=d;b.ctrlenter=m;b.tab=c;b.escape=f;b.space=g;b.leftarrow=h;b.rightarrow=k;b.downarrow=l;b.uparrow=n});(function(b,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?module.exports=a():b.Autolinker=a()})(this,function(){var b=function(a){a=a||{};this.version=b.version;this.urls=this.normalizeUrlsCfg(a.urls);this.email="boolean"===typeof a.email?a.email:!0;this.twitter="boolean"===typeof a.twitter?a.twitter:!0;this.phone="boolean"===typeof a.phone?a.phone:!0;this.hashtag=a.hashtag||!1;this.newWindow="boolean"===typeof a.newWindow?a.newWindow:!0;this.stripPrefix="boolean"===
typeof a.stripPrefix?a.stripPrefix:!0;var d=this.hashtag;if(!1!==d&&"twitter"!==d&&"facebook"!==d&&"instagram"!==d)throw Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(a.truncate);this.className=a.className||"";this.replaceFn=a.replaceFn||null;this.tagBuilder=this.matchers=this.htmlParser=null};b.link=function(a,d){return(new b(d)).link(a)};b.version="0.26.0";b.prototype={constructor:b,normalizeUrlsCfg:function(a){null==a&&(a=!0);return"boolean"===typeof a?{schemeMatches:a,
wwwMatches:a,tldMatches:a}:{schemeMatches:"boolean"===typeof a.schemeMatches?a.schemeMatches:!0,wwwMatches:"boolean"===typeof a.wwwMatches?a.wwwMatches:!0,tldMatches:"boolean"===typeof a.tldMatches?a.tldMatches:!0}},normalizeTruncateCfg:function(a){return"number"===typeof a?{length:a,location:"end"}:b.Util.defaults(a||{},{length:Number.POSITIVE_INFINITY,location:"end"})},parse:function(a){a=this.getHtmlParser().parse(a);for(var b=0,c=[],f=0,g=a.length;f<g;f++){var h=a[f],k=h.getType();"element"===
k&&"a"===h.getTagName()?h.isClosing()?b=Math.max(b-1,0):b++:"text"===k&&0===b&&(h=this.parseText(h.getText(),h.getOffset()),c.push.apply(c,h))}c=this.compactMatches(c);return c=this.removeUnwantedMatches(c)},compactMatches:function(a){a.sort(function(a,b){return a.getOffset()-b.getOffset()});for(var b=0;b<a.length-1;b++)for(var c=a[b],c=c.getOffset()+c.getMatchedText().length;b+1<a.length&&a[b+1].getOffset()<=c;)a.splice(b+1,1);return a},removeUnwantedMatches:function(a){var d=b.Util.remove;this.hashtag||
d(a,function(a){return"hashtag"===a.getType()});this.email||d(a,function(a){return"email"===a.getType()});this.phone||d(a,function(a){return"phone"===a.getType()});this.twitter||d(a,function(a){return"twitter"===a.getType()});this.urls.schemeMatches||d(a,function(a){return"url"===a.getType()&&"scheme"===a.getUrlMatchType()});this.urls.wwwMatches||d(a,function(a){return"url"===a.getType()&&"www"===a.getUrlMatchType()});this.urls.tldMatches||d(a,function(a){return"url"===a.getType()&&"tld"===a.getUrlMatchType()});
return a},parseText:function(a,b){b=b||0;for(var c=this.getMatchers(),f=[],g=0,h=c.length;g<h;g++){for(var k=c[g].parseMatches(a),l=0,n=k.length;l<n;l++)k[l].setOffset(b+k[l].getOffset());f.push.apply(f,k)}return f},link:function(a){if(!a)return"";for(var b=this.parse(a),c=[],f=0,g=0,h=b.length;g<h;g++){var k=b[g];c.push(a.substring(f,k.getOffset()));c.push(this.createMatchReturnVal(k));f=k.getOffset()+k.getMatchedText().length}c.push(a.substring(f));return c.join("")},createMatchReturnVal:function(a){var d;
this.replaceFn&&(d=this.replaceFn.call(this,this,a));return"string"===typeof d?d:!1===d?a.getMatchedText():d instanceof b.HtmlTag?d.toAnchorString():a.buildTag().toAnchorString()},getHtmlParser:function(){var a=this.htmlParser;a||(a=this.htmlParser=new b.htmlParser.HtmlParser);return a},getMatchers:function(){if(this.matchers)return this.matchers;var a=b.matcher,d=this.getTagBuilder();return this.matchers=[new a.Hashtag({tagBuilder:d,serviceName:this.hashtag}),new a.Email({tagBuilder:d}),new a.Phone({tagBuilder:d}),
new a.Twitter({tagBuilder:d}),new a.Url({tagBuilder:d,stripPrefix:this.stripPrefix})]},getTagBuilder:function(){var a=this.tagBuilder;a||(a=this.tagBuilder=new b.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className}));return a}};b.match={};b.matcher={};b.htmlParser={};b.truncate={};b.Util={abstractMethod:function(){throw"abstract";},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},defaults:function(a,
b){for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c]);return a},extend:function(a,d){var c=a.prototype,f=function(){};f.prototype=c;var g;g=d.hasOwnProperty("constructor")?d.constructor:function(){c.constructor.apply(this,arguments)};f=g.prototype=new f;f.constructor=g;f.superclass=c;delete d.constructor;b.Util.assign(f,d);return g},ellipsis:function(a,b,c){a.length>b&&(c=null==c?"..":c,a=a.substring(0,b-c.length)+c);return a},indexOf:function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);
for(var c=0,f=a.length;c<f;c++)if(a[c]===b)return c;return-1},remove:function(a,b){for(var c=a.length-1;0<=c;c--)!0===b(a[c])&&a.splice(c,1)},splitAndCapture:function(a,b){if(!b.global)throw Error("`splitRegex` must have the 'g' flag set");for(var c=[],f=0,g;g=b.exec(a);)c.push(a.substring(f,g.index)),c.push(g[0]),f=g.index+g[0].length;c.push(a.substring(f));return c},trim:function(a){return a.replace(this.trimRegex,"")}};b.HtmlTag=b.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(a){b.Util.assign(this,
a);this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){this.tagName=a;return this},getTagName:function(){return this.tagName||""},setAttr:function(a,b){this.getAttrs()[a]=b;return this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(a){var d=this.getAttrs();b.Util.assign(d,a);return this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(a){var d=this.getClass(),c=this.whitespaceRegex,
f=b.Util.indexOf,d=d?d.split(c):[];for(a=a.split(c);c=a.shift();)-1===f(d,c)&&d.push(c);this.getAttrs()["class"]=d.join(" ");return this},removeClass:function(a){var d=this.getClass(),c=this.whitespaceRegex,f=b.Util.indexOf,d=d?d.split(c):[];a=a.split(c);for(var g;d.length&&(g=a.shift());)c=f(d,g),-1!==c&&d.splice(c,1);this.getAttrs()["class"]=d.join(" ");return this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},
setInnerHtml:function(a){this.innerHtml=a;return this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var a=this.getTagName(),b=this.buildAttrsStr();return["<",a,b?" "+b:"",">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+'="'+a[c]+'"');return b.join(" ")}});b.RegexLib={alphaNumericCharsStr:"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
domainNameRegex:RegExp("[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19.\\-]*[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19\\-]"),
tldRegex:/(?:travelersinsurance|sandvikcoromant|kerryproperties|cancerresearch|weatherchannel|kerrylogistics|spreadbetting|international|wolterskluwer|lifeinsurance|construction|pamperedchef|scholarships|versicherung|bridgestone|creditunion|kerryhotels|investments|productions|blackfriday|enterprises|lamborghini|photography|motorcycles|williamhill|playstation|contractors|barclaycard|accountants|redumbrella|engineering|management|telefonica|protection|consulting|tatamotors|creditcard|vlaanderen|schaeffler|associates|properties|foundation|republican|bnpparibas|boehringer|eurovision|extraspace|industries|immobilien|university|technology|volkswagen|healthcare|restaurant|cuisinella|vistaprint|apartments|accountant|travelers|homedepot|institute|vacations|furniture|fresenius|insurance|christmas|bloomberg|solutions|barcelona|firestone|financial|kuokgroup|fairwinds|community|passagens|goldpoint|equipment|lifestyle|yodobashi|aquarelle|marketing|analytics|education|amsterdam|statefarm|melbourne|allfinanz|directory|microsoft|stockholm|montblanc|accenture|lancaster|landrover|everbank|istanbul|graphics|grainger|ipiranga|softbank|attorney|pharmacy|saarland|catering|airforce|yokohama|mortgage|frontier|mutuelle|stcgroup|memorial|pictures|football|symantec|cipriani|ventures|telecity|cityeats|verisign|flsmidth|boutique|cleaning|firmdale|clinique|clothing|redstone|infiniti|deloitte|feedback|services|broadway|plumbing|commbank|training|barclays|exchange|computer|brussels|software|delivery|barefoot|builders|business|bargains|engineer|holdings|download|security|helsinki|lighting|movistar|discount|hdfcbank|supplies|marriott|property|diamonds|capetown|partners|democrat|jpmorgan|bradesco|budapest|rexroth|zuerich|shriram|academy|science|support|youtube|singles|surgery|alibaba|statoil|dentist|schwarz|android|cruises|cricket|digital|markets|starhub|systems|courses|coupons|netbank|country|domains|corsica|network|neustar|realtor|lincoln|limited|schmidt|yamaxun|cooking|contact|auction|spiegel|liaison|leclerc|latrobe|lasalle|abogado|compare|lanxess|exposed|express|company|cologne|college|avianca|lacaixa|fashion|recipes|ferrero|komatsu|storage|wanggou|clubmed|sandvik|fishing|fitness|bauhaus|kitchen|flights|florist|flowers|watches|weather|temasek|samsung|bentley|forsale|channel|theater|frogans|theatre|okinawa|website|tickets|jewelry|gallery|tiffany|iselect|shiksha|brother|organic|wedding|genting|toshiba|origins|philips|hyundai|hotmail|hoteles|hosting|rentals|windows|cartier|bugatti|holiday|careers|whoswho|hitachi|panerai|caravan|reviews|guitars|capital|trading|hamburg|hangout|finance|stream|family|abbott|health|review|travel|report|hermes|hiphop|gratis|career|toyota|hockey|dating|repair|google|social|soccer|reisen|global|otsuka|giving|unicom|casino|photos|center|broker|rocher|orange|bostik|garden|insure|ryukyu|bharti|safety|physio|sakura|oracle|online|jaguar|gallup|piaget|tienda|futbol|pictet|joburg|webcam|berlin|office|juegos|kaufen|chanel|chrome|xihuan|church|tennis|circle|kinder|flickr|bayern|claims|clinic|viajes|nowruz|xperia|norton|yachts|studio|coffee|camera|sanofi|nissan|author|expert|events|comsec|lawyer|tattoo|viking|estate|villas|condos|realty|yandex|energy|emerck|virgin|vision|durban|living|school|coupon|london|taobao|natura|taipei|nagoya|luxury|walter|aramco|sydney|madrid|credit|maison|makeup|schule|market|anquan|direct|design|swatch|suzuki|alsace|vuelos|dental|alipay|voyage|shouji|voting|airtel|mutual|degree|supply|agency|museum|mobily|dealer|monash|select|mormon|active|moscow|racing|datsun|quebec|nissay|rodeo|email|gifts|works|photo|chloe|edeka|cheap|earth|vista|tushu|koeln|glass|shoes|globo|tunes|gmail|nokia|space|kyoto|black|ricoh|seven|lamer|sener|epson|cisco|praxi|trust|citic|crown|shell|lease|green|legal|lexus|ninja|tatar|gripe|nikon|group|video|wales|autos|gucci|party|nexus|guide|linde|adult|parts|amica|lixil|boats|azure|loans|locus|cymru|lotte|lotto|stada|click|poker|quest|dabur|lupin|nadex|paris|faith|dance|canon|place|gives|trade|skype|rocks|mango|cloud|boots|smile|final|swiss|homes|honda|media|horse|cards|deals|watch|bosch|house|pizza|miami|osaka|tours|total|xerox|coach|sucks|style|delta|toray|iinet|tools|money|codes|beats|tokyo|salon|archi|movie|baidu|study|actor|yahoo|store|apple|world|forex|today|bible|tmall|tirol|irish|tires|forum|reise|vegas|vodka|sharp|omega|weber|jetzt|audio|promo|build|bingo|chase|gallo|drive|dubai|rehab|press|solar|sale|beer|bbva|bank|band|auto|sapo|sarl|saxo|audi|asia|arte|arpa|army|yoga|ally|zara|scor|scot|sexy|seat|zero|seek|aero|adac|zone|aarp|maif|meet|meme|menu|surf|mini|mobi|mtpc|porn|desi|star|ltda|name|talk|navy|love|loan|live|link|news|limo|like|spot|life|nico|lidl|lgbt|land|taxi|team|tech|kred|kpmg|sony|song|kiwi|kddi|jprs|jobs|sohu|java|itau|tips|info|immo|icbc|hsbc|town|host|page|toys|here|help|pars|haus|guru|guge|tube|goog|golf|gold|sncf|gmbh|gift|ggee|gent|gbiz|game|vana|pics|fund|ford|ping|pink|fish|film|fast|farm|play|fans|fail|plus|skin|pohl|fage|moda|post|erni|dvag|prod|doha|prof|docs|viva|diet|luxe|site|dell|sina|dclk|show|qpon|date|vote|cyou|voto|read|coop|cool|wang|club|city|chat|cern|cash|reit|rent|casa|cars|care|camp|rest|call|cafe|weir|wien|rich|wiki|buzz|wine|book|bond|room|work|rsvp|shia|ruhr|blue|bing|shaw|bike|safe|xbox|best|pwc|mtn|lds|aig|boo|fyi|nra|nrw|ntt|car|gal|obi|zip|aeg|vin|how|one|ong|onl|dad|ooo|bet|esq|org|htc|bar|uol|ibm|ovh|gdn|ice|icu|uno|gea|ifm|bot|top|wtf|lol|day|pet|eus|wtc|ubs|tvs|aco|ing|ltd|ink|tab|abb|afl|cat|int|pid|pin|bid|cba|gle|com|cbn|ads|man|wed|ceb|gmo|sky|ist|gmx|tui|mba|fan|ski|iwc|app|pro|med|ceo|jcb|jcp|goo|dev|men|aaa|meo|pub|jlc|bom|jll|gop|jmp|mil|got|gov|win|jot|mma|joy|trv|red|cfa|cfd|bio|moe|moi|mom|ren|biz|aws|xin|bbc|dnp|buy|kfh|mov|thd|xyz|fit|kia|rio|rip|kim|dog|vet|nyc|bcg|mtr|bcn|bms|bmw|run|bzh|rwe|tel|stc|axa|kpn|fly|krd|cab|bnl|foo|crs|eat|tci|sap|srl|nec|sas|net|cal|sbs|sfr|sca|scb|csc|edu|new|xxx|hiv|fox|wme|ngo|nhk|vip|sex|frl|lat|yun|law|you|tax|soy|sew|om|ac|hu|se|sc|sg|sh|sb|sa|rw|ru|rs|ro|re|qa|py|si|pw|pt|ps|sj|sk|pr|pn|pm|pl|sl|sm|pk|sn|ph|so|pg|pf|pe|pa|zw|nz|nu|nr|np|no|nl|ni|ng|nf|sr|ne|st|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|su|mn|mm|ml|mk|mh|mg|me|sv|md|mc|sx|sy|ma|ly|lv|sz|lu|lt|ls|lr|lk|li|lc|lb|la|tc|kz|td|ky|kw|kr|kp|kn|km|ki|kh|tf|tg|th|kg|ke|jp|jo|jm|je|it|is|ir|tj|tk|tl|tm|iq|tn|to|io|in|im|il|ie|ad|sd|ht|hr|hn|hm|tr|hk|gy|gw|gu|gt|gs|gr|gq|tt|gp|gn|gm|gl|tv|gi|tw|tz|ua|gh|ug|uk|gg|gf|ge|gd|us|uy|uz|va|gb|ga|vc|ve|fr|fo|fm|fk|fj|vg|vi|fi|eu|et|es|er|eg|ee|ec|dz|do|dm|dk|vn|dj|de|cz|cy|cx|cw|vu|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|wf|bz|by|bw|bv|bt|bs|br|bo|bn|bm|bj|bi|ws|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ye|ar|aq|ao|am|al|yt|ai|za|ag|af|ae|zm|id)\b/};
b.AnchorTagBuilder=b.Util.extend(Object,{constructor:function(a){b.Util.assign(this,a)},build:function(a){return new b.HtmlTag({tagName:"a",attrs:this.createAttrs(a.getType(),a.getAnchorHref()),innerHtml:this.processAnchorText(a.getAnchorText())})},createAttrs:function(a,b){var c={href:b},f=this.createCssClass(a);f&&(c["class"]=f);this.newWindow&&(c.target="_blank",c.rel="noopener noreferrer");return c},createCssClass:function(a){var b=this.className;return b?b+" "+b+"-"+a:""},processAnchorText:function(a){return a=
this.doTruncate(a)},doTruncate:function(a){var d=this.truncate;if(!d||!d.length)return a;var c=d.length,d=d.location;return"smart"===d?b.truncate.TruncateSmart(a,c,".."):"middle"===d?b.truncate.TruncateMiddle(a,c,".."):b.truncate.TruncateEnd(a,c,"..")}});b.htmlParser.HtmlParser=b.Util.extend(Object,{htmlRegex:function(){var a=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,b=/[^\s\0"'>\/=\x01-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+a.source+")?";return new RegExp(["(?:<(!DOCTYPE)(?:\\s+(?:",b,"|",a.source+")",")*>)|(?:<(/)?(?:",
/!--([\s\S]+?)--/.source,"|(?:","("+/[0-9a-zA-Z][0-9a-zA-Z:]*/.source+")","(?:\\s*",b,")*\\s*/?))>)"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(a){for(var b=this.htmlRegex,c,f=0,g=[];null!==(c=b.exec(a));){var h=c[0],k=c[3],l=c[1]||c[4],n=!!c[2];c=c.index;var m=a.substring(f,c);m&&(f=this.parseTextAndEntityNodes(f,m),g.push.apply(g,f));k?g.push(this.createCommentNode(c,h,k)):g.push(this.createElementNode(c,h,l,n));f=c+
h.length}f<a.length&&(a=a.substring(f))&&(f=this.parseTextAndEntityNodes(f,a),g.push.apply(g,f));return g},parseTextAndEntityNodes:function(a,d){for(var c=[],f=b.Util.splitAndCapture(d,this.htmlCharacterEntitiesRegex),g=0,h=f.length;g<h;g+=2){var k=f[g],l=f[g+1];k&&(c.push(this.createTextNode(a,k)),a+=k.length);l&&(c.push(this.createEntityNode(a,l)),a+=l.length)}return c},createCommentNode:function(a,d,c){return new b.htmlParser.CommentNode({offset:a,text:d,comment:b.Util.trim(c)})},createElementNode:function(a,
d,c,f){return new b.htmlParser.ElementNode({offset:a,text:d,tagName:c.toLowerCase(),closing:f})},createEntityNode:function(a,d){return new b.htmlParser.EntityNode({offset:a,text:d})},createTextNode:function(a,d){return new b.htmlParser.TextNode({offset:a,text:d})}});b.htmlParser.HtmlNode=b.Util.extend(Object,{offset:void 0,text:void 0,constructor:function(a){b.Util.assign(this,a);if(null==this.offset)throw Error("`offset` cfg required");if(null==this.text)throw Error("`text` cfg required");},getType:b.Util.abstractMethod,
getOffset:function(){return this.offset},getText:function(){return this.text}});b.htmlParser.CommentNode=b.Util.extend(b.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}});b.htmlParser.ElementNode=b.Util.extend(b.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}});b.htmlParser.EntityNode=b.Util.extend(b.htmlParser.HtmlNode,
{getType:function(){return"entity"}});b.htmlParser.TextNode=b.Util.extend(b.htmlParser.HtmlNode,{getType:function(){return"text"}});b.match.Match=b.Util.extend(Object,{constructor:function(a){if(null==a.tagBuilder)throw Error("`tagBuilder` cfg required");if(null==a.matchedText)throw Error("`matchedText` cfg required");if(null==a.offset)throw Error("`offset` cfg required");this.tagBuilder=a.tagBuilder;this.matchedText=a.matchedText;this.offset=a.offset},getType:b.Util.abstractMethod,getMatchedText:function(){return this.matchedText},
setOffset:function(a){this.offset=a},getOffset:function(){return this.offset},getAnchorHref:b.Util.abstractMethod,getAnchorText:b.Util.abstractMethod,buildTag:function(){return this.tagBuilder.build(this)}});b.match.Email=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.email)throw Error("`email` cfg required");this.email=a.email},getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+
this.email},getAnchorText:function(){return this.email}});b.match.Hashtag=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.hashtag)throw Error("`hashtag` cfg required");this.serviceName=a.serviceName;this.hashtag=a.hashtag},getType:function(){return"hashtag"},getServiceName:function(){return this.serviceName},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var a=this.serviceName,b=this.hashtag;switch(a){case "twitter":return"https://twitter.com/hashtag/"+
b;case "facebook":return"https://www.facebook.com/hashtag/"+b;case "instagram":return"https://instagram.com/explore/tags/"+b;default:throw Error("Unknown service name to point hashtag to: ",a);}},getAnchorText:function(){return"#"+this.hashtag}});b.match.Phone=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.number)throw Error("`number` cfg required");if(null==a.plusSign)throw Error("`plusSign` cfg required");this.number=a.number;this.plusSign=
a.plusSign},getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+(this.plusSign?"+":"")+this.number},getAnchorText:function(){return this.matchedText}});b.match.Twitter=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if(!a.twitterHandle)throw Error("`twitterHandle` cfg required");this.twitterHandle=a.twitterHandle},getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},
getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}});b.match.Url=b.Util.extend(b.match.Match,{constructor:function(a){b.match.Match.prototype.constructor.call(this,a);if("scheme"!==a.urlMatchType&&"www"!==a.urlMatchType&&"tld"!==a.urlMatchType)throw Error('`urlMatchType` cfg must be one of: "scheme", "www", or "tld"');if(!a.url)throw Error("`url` cfg required");if(null==a.protocolUrlMatch)throw Error("`protocolUrlMatch` cfg required");
if(null==a.protocolRelativeMatch)throw Error("`protocolRelativeMatch` cfg required");if(null==a.stripPrefix)throw Error("`stripPrefix` cfg required");this.urlMatchType=a.urlMatchType;this.url=a.url;this.protocolUrlMatch=a.protocolUrlMatch;this.protocolRelativeMatch=a.protocolRelativeMatch;this.stripPrefix=a.stripPrefix},urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrlMatchType:function(){return this.urlMatchType},getUrl:function(){var a=
this.url;this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0);return a},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var a=this.getMatchedText();this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a));this.stripPrefix&&(a=this.stripUrlPrefix(a));return a=this.removeTrailingSlash(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,
"")},removeTrailingSlash:function(a){"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1));return a}});b.matcher.Matcher=b.Util.extend(Object,{constructor:function(a){if(!a.tagBuilder)throw Error("`tagBuilder` cfg required");this.tagBuilder=a.tagBuilder},parseMatches:b.Util.abstractMethod});b.matcher.Email=b.Util.extend(b.matcher.Matcher,{matcherRegex:new RegExp([(new RegExp("["+b.RegexLib.alphaNumericCharsStr+"\\-;:&=+$.,]+@")).source,b.RegexLib.domainNameRegex.source,"\\.",b.RegexLib.tldRegex.source].join(""),
"gi"),parseMatches:function(a){for(var d=this.matcherRegex,c=this.tagBuilder,f=[],g;null!==(g=d.exec(a));){var h=g[0];f.push(new b.match.Email({tagBuilder:c,matchedText:h,offset:g.index,email:h}))}return f}});b.matcher.Hashtag=b.Util.extend(b.matcher.Matcher,{matcherRegex:new RegExp("#[_"+b.RegexLib.alphaNumericCharsStr+"]{1,139}","g"),nonWordCharRegex:new RegExp("[^"+b.RegexLib.alphaNumericCharsStr+"]"),constructor:function(a){b.matcher.Matcher.prototype.constructor.call(this,a);this.serviceName=
a.serviceName},parseMatches:function(a){for(var d=this.matcherRegex,c=this.nonWordCharRegex,f=this.serviceName,g=this.tagBuilder,h=[],k;null!==(k=d.exec(a));){var l=k.index,n=a.charAt(l-1);if(0===l||c.test(n))n=k[0],k=k[0].slice(1),h.push(new b.match.Hashtag({tagBuilder:g,matchedText:n,offset:l,serviceName:f,hashtag:k}))}return h}});b.matcher.Phone=b.Util.extend(b.matcher.Matcher,{matcherRegex:/(?:(\+)?\d{1,3}[-\040.])?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]\d{4}/g,parseMatches:function(a){for(var d=this.matcherRegex,
c=this.tagBuilder,f=[],g;null!==(g=d.exec(a));){var h=g[0],k=h.replace(/\D/g,"");f.push(new b.match.Phone({tagBuilder:c,matchedText:h,offset:g.index,number:k,plusSign:!!g[1]}))}return f}});b.matcher.Twitter=b.Util.extend(b.matcher.Matcher,{matcherRegex:new RegExp("@[_"+b.RegexLib.alphaNumericCharsStr+"]{1,20}","g"),nonWordCharRegex:new RegExp("[^"+b.RegexLib.alphaNumericCharsStr+"]"),parseMatches:function(a){for(var d=this.matcherRegex,c=this.nonWordCharRegex,f=this.tagBuilder,g=[],h;null!==(h=d.exec(a));){var k=
h.index,l=a.charAt(k-1);if(0===k||c.test(l))l=h[0],h=h[0].slice(1),g.push(new b.match.Twitter({tagBuilder:f,matchedText:l,offset:k,twitterHandle:h}))}return g}});b.matcher.Url=b.Util.extend(b.matcher.Matcher,{matcherRegex:function(){var a=b.RegexLib.domainNameRegex,d=b.RegexLib.alphaNumericCharsStr;return new RegExp(["(?:(",/(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,a.source,")|((//)?",/(?:www\.)/.source,a.source,")|((//)?",a.source+"\\.",b.RegexLib.tldRegex.source,
"))","(?:"+(new RegExp("["+d+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;]*["+d+"\\-+&@#/%=~_()|'$*\\[\\]]")).source+")?"].join(""),"gi")}(),wordCharRegExp:/\w/,openParensRe:/\(/g,closeParensRe:/\)/g,constructor:function(a){b.matcher.Matcher.prototype.constructor.call(this,a);this.stripPrefix=a.stripPrefix;if(null==this.stripPrefix)throw Error("`stripPrefix` cfg required");},parseMatches:function(a){for(var d=this.matcherRegex,c=this.stripPrefix,f=this.tagBuilder,g=[],h;null!==(h=d.exec(a));){var k=h[0],l=h[1],
n=h[2],m=h[5],p=h.index;h=h[3]||m;m=a.charAt(p-1);!b.matcher.UrlMatchValidator.isValid(k,l)||0<p&&"@"===m||0<p&&h&&this.wordCharRegExp.test(m)||(this.matchHasUnbalancedClosingParen(k)?k=k.substr(0,k.length-1):(m=this.matchHasInvalidCharAfterTld(k,l),-1<m&&(k=k.substr(0,m))),g.push(new b.match.Url({tagBuilder:f,matchedText:k,offset:p,urlMatchType:l?"scheme":n?"www":"tld",url:k,protocolUrlMatch:!!l,protocolRelativeMatch:!!h,stripPrefix:c})))}return g},matchHasUnbalancedClosingParen:function(a){if(")"===
a.charAt(a.length-1)){var b=a.match(this.openParensRe);a=a.match(this.closeParensRe);if((b&&b.length||0)<(a&&a.length||0))return!0}return!1},matchHasInvalidCharAfterTld:function(a,b){if(!a)return-1;var c=0;b&&(c=a.indexOf(":"),a=a.slice(c));var f=/^((.?\/\/)?[A-Za-z0-9\u00C0-\u017F\.\-]*[A-Za-z0-9\u00C0-\u017F\-]\.[A-Za-z]+)/.exec(a);if(null===f)return-1;c+=f[1].length;a=a.slice(f[1].length);return/^[^.A-Za-z:\/?#]/.test(a)?c:-1}});b.matcher.UrlMatchValidator={hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,
uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z\u00C0-\u017F]/,isValid:function(a,b){return b&&!this.isValidUriScheme(b)||this.urlMatchDoesNotHaveProtocolOrDot(a,b)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,b)?!1:!0},isValidUriScheme:function(a){a=a.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==a&&"vbscript:"!==a},urlMatchDoesNotHaveProtocolOrDot:function(a,b){return!!a&&(!b||!this.hasFullProtocolRegex.test(b))&&-1===a.indexOf(".")},
urlMatchDoesNotHaveAtLeastOneWordChar:function(a,b){return a&&b?!this.hasWordCharAfterProtocolRegex.test(a):!1}};b.truncate.TruncateEnd=function(a,d,c){return b.Util.ellipsis(a,d,c)};b.truncate.TruncateMiddle=function(a,b,c){if(a.length<=b)return a;var f=b-c.length,g="";0<f&&(g=a.substr(-1*Math.floor(f/2)));return(a.substr(0,Math.ceil(f/2))+c+g).substr(0,b)};b.truncate.TruncateSmart=function(a,b,c){var f=function(a){var b="";a.scheme&&a.host&&(b+=a.scheme+"://");a.host&&(b+=a.host);a.path&&(b+="/"+
a.path);a.query&&(b+="?"+a.query);a.fragment&&(b+="#"+a.fragment);return b},g=function(a,b){var d=b/2,f=Math.ceil(d),d=-1*Math.floor(d),g="";0>d&&(g=a.substr(d));return a.substr(0,f)+c+g};if(a.length<=b)return a;var h=b-c.length,k=function(a){var b={},c=a.match(/^([a-z]+):\/\//i);c&&(b.scheme=c[1],a=a.substr(c[0].length));if(c=a.match(/^(.*?)(?=(\?|#|\/|$))/i))b.host=c[1],a=a.substr(c[0].length);if(c=a.match(/^\/(.*?)(?=(\?|#|$))/i))b.path=c[1],a=a.substr(c[0].length);if(c=a.match(/^\?(.*?)(?=(#|$))/i))b.query=
c[1],a=a.substr(c[0].length);if(c=a.match(/^#(.*?)$/i))b.fragment=c[1];return b}(a);if(k.query){var l=k.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);l&&(k.query=k.query.substr(0,l[1].length),a=f(k))}if(a.length<=b)return a;k.host&&(k.host=k.host.replace(/^www\./,""),a=f(k));if(a.length<=b)return a;a="";k.host&&(a+=k.host);if(a.length>=h)return k.host.length==b?(k.host.substr(0,b-c.length)+c).substr(0,b):g(a,h).substr(0,b);f="";k.path&&(f+="/"+k.path);k.query&&(f+="?"+k.query);if(f){if((a+f).length>=h)return(a+
f).length==b?(a+f).substr(0,b):(a+g(f,h-a.length)).substr(0,b);a+=f}if(k.fragment){f="#"+k.fragment;if((a+f).length>=h)return(a+f).length==b?(a+f).substr(0,b):(a+g(f,h-a.length)).substr(0,b);a+=f}if(k.scheme&&k.host&&(g=k.scheme+"://",(a+g).length<h))return(g+a).substr(0,b);if(a.length<=b)return a;g="";0<h&&(g=a.substr(-1*Math.floor(h/2)));return(a.substr(0,Math.ceil(h/2))+c+g).substr(0,b)};return b});window.SECU=window.SECU||{};
window.SECU.Ajax={_data:{url:{api:{host:"https://api.secu.su",port:"3000",feedback:"/feedback",post:"/s",get:"/s/",stat:"/stat",chat:"/r"},web:{host:"https://secu.su",page:"/",chat:"/c/"}}},assignHost:function(){var b=this._data,a=window.location.host;"secu.su"!==window.location.host&&(b.url.api.host="http://api-test.secu.su",b.url.api.port="7001",b.url.web.host=a)},call:function(b){return new Promise(function(a,d){var c=new XMLHttpRequest;c.open(b.method,b.url,!0);b.contentType&&c.setRequestHeader("Content-type",
b.contentType);c.send(b.data);c.onload=function(){200<=this.status&&300>this.status?a(this.response):d(this.statusText)};c.onerror=function(){d(this.statusText)}})},sendFeedback:function(b){var a=this._data;return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(b),url:a.url.api.host+a.url.api.feedback})},requestContainer:function(b){var a=this._data;return this.call({method:"GET",url:a.url.api.host+a.url.api.get+b})},sendContainer:function(b){var a=this._data;
return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(b),url:a.url.api.host+a.url.api.post})}};window.SECU=window.SECU||{};
window.SECU.Socket={_data:{},initStats:function(){var b=this._data;b.stats=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port,{secure:!0});b.stats.on("secu-channel:App\\Events\\SecuWasCreated",function(a){window.SECU.App.refreshCount(a.id)})},initChat:function(){var b=this._data,a=window.SECU.App._data.app;b.chat=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port+"/c",{secure:!0});b.chat.on("connect",function(){window.SECU.Chat.enable()});
b.chat.on("reconnect",function(){window.SECU.Chat.enable()});b.chat.on("connecting",function(){window.SECU.Chat.disable()});b.chat.on("reconnecting",function(){window.SECU.Chat.disable()});b.chat.on("reconnect_failed",function(){window.SECU.Chat.disable()});b.chat.on("disconnect",function(){window.SECU.Chat.disable()});b.chat.on("connect_failed",function(){window.SECU.Chat.disable()});b.chat.on("connect_error",function(){window.SECU.Chat.disable()});b.chat.on("close",function(){window.SECU.Chat.disable()});
b.chat.on("error",function(){window.SECU.Chat.disable()});b.chat.on("room.create",function(b){b.success?(a.set("chat.form.room",b.room),window.SECU.Chat.join(a.get("chat.form"))):(a.set("chat.formDisabled",!1),a.set("chat.formActive",!0),window.SECU.Error.show(b.errors))});b.chat.on("room.join",function(b){b.success?b.hasOwnProperty("key")?(a.set("chat.formDisabled",!1),window.SECU.Chat.start(b)):window.SECU.Chat.appendData({sender:"SYS",data:{text:b.name+" joined the room"}}):(a.set("chat.formDisabled",
!1),a.set("chat.formActive",!0),window.SECU.Error.show(b.errors))});b.chat.on("room.join.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});b.chat.on("room.data.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});b.chat.on("room.leave",function(a){a.success?a.self||window.SECU.Chat.appendData({sender:"SYS",data:{text:a.name+" left the room"}}):window.SECU.Error.show(a.errors)});b.chat.on("room.roster",function(a){a=window.SECU.Chat.sortRoster(a);
window.SECU.Chat.refreshRoster(a)});b.chat.on("room.data",function(a){a.hasOwnProperty("sender")&&a.hasOwnProperty("data")?window.SECU.Chat.appendData(a):window.SECU.Chat.appendOwnData(a)})},init:function(){this.initStats();this.initChat()}};window.SECU=window.SECU||{};
window.SECU.Crypt={_data:{encryptionParameters:{iterations:4096,keySize:256,authenticationStrength:128,authenticatedData:"S\u00cbCU",cipherMode:"gcm"}},getRandomHexValue:function(b,a){return sjcl.random.randomWords(b,a)},decrypt:function(b){return sjcl.decrypt(b.password,b.message,{},{})},encrypt:function(b){var a=this._data.encryptionParameters,a={adata:a.authenticatedData+"-"+(new Date).getTime(),iter:a.iterations,mode:a.cipherMode,ts:a.authenticationStrength,ks:a.keySize,iv:this.getRandomHexValue(4,
0),salt:this.getRandomHexValue(2,0)};return sjcl.encrypt(b.password,b.message,a,{})}};window.SECU=window.SECU||{};
window.SECU.Helpers={_data:{},getHumanTime:function(b){function a(a){1===a.toString().length&&(a="0"+a);return a}b=new Date(b);return a(b.getHours())+":"+a(b.getMinutes())},checkVisibility:function(){var b=window.SECU.App._data.app;switch(document.visibilityState){case "hidden":b.set("windowFocused",!1);break;default:b.set("windowFocused",!0)}},watchWindowFocus:function(){document.addEventListener("visibilitychange",this.checkVisibility)},parseNewLines:function(b){return b=b.replace(/(?:\r\n|\r|\n)/g,
"<br>")},convertToPlainText:function(b){return b.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})},getPosition:function(b){b=b.getBoundingClientRect();var a=document.body,d=document.documentElement;return{top:Math.round(b.top+(window.pageYOffset||d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0)),left:Math.round(b.left+(window.pageXOffset||d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0))}},generateTimestamp:function(b){var a=null,
a=b?new Date(b):new Date;return a.getTime()},watchResize:function(){window.addEventListener("resize",this.fixChatFeedHeight,!1)},dockNavbar:function(b){window.SECU.App._data.app.set("dock.navbar",b)},watchScroll:function(){var b=this._data,a=window.SECU.App._data.app;b.nav={};b.nav.spacer=document.getElementsByClassName("navbar-spacer")[0];window.addEventListener("scroll",function(d){if(!a.get("show.chat")||a.get("chat.formActive"))document.body.scrollTop>b.nav.spacer.offsetTop?window.SECU.Helpers.dockNavbar(!0):
window.SECU.Helpers.dockNavbar(!1)},!1)},watchDragDrop:function(){function b(b){b.preventDefault();clearTimeout(d.dropTimeout);var f=null,g=null,h=null;switch(b.type){case "dragenter":case "dragover":a.set("dropActive",!0);d.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "dragleave":d.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "drop":a.set("dropActive",!1),h=b.dataTransfer.files,document.getElementById("chatFile")?(f="room",g="chat.room.rawFile"):
document.getElementById("messageFile")&&(f="encrypt",g="encrypt.rawFile"),h.length&&f&&g&&(a.set(g,[b.dataTransfer.files[0]]),a.fire("checkFile",null,f))}}var a=window.SECU.App._data.app,d=this._data;a.get("supportedFeatures.dragdrop")&&(document.body.addEventListener("dragover",b,!1),document.body.addEventListener("dragenter",b,!1),document.body.addEventListener("dragleave",b,!1),document.body.addEventListener("drop",b,!1))},checkLocation:function(){var b=null;-1<window.location.pathname.indexOf("/c/")?
(b=window.location.pathname.substring(3),b.length&&window.SECU.App._data.app.set("chat.form.room",b),window.SECU.App._data.app.fire("toggleView",null,"chat")):(b=window.location.pathname.substring(1),b.length&&window.SECU.App._data.app.set("decrypt.hash",b))},checkNotification:function(){window.SECU.App._data.app.set("supportedFeatures.notification","Notification"in window)},checkCopy:function(){window.SECU.App._data.app.set("supportedFeatures.copy",document.queryCommandSupported("copy"))},checkDownload:function(){window.SECU.App._data.app.set("supportedFeatures.download",
"download"in document.createElement("a"))},checkDragDrop:function(){var b=document.createElement("div");window.SECU.App._data.app.set("supportedFeatures.dragdrop","ondragstart"in b&&"ondrop"in b)},fixChatFeedHeight:function(){var b=window.SECU.Helpers,a=document.getElementById("chat-feed-block"),d=document.getElementById("chat-form-block"),c=window.SECU.Chat.scrolledToBottom();a&&(a.style.height="0px",a.style.height=b.getPosition(d).top-b.getPosition(a).top+"px",c&&window.SECU.Chat.updateScroll("bottom"))},
fixTextareaHeight:function(b,a){var d=window.SECU.App._data.app,c=b?b.node:document.getElementById(a+"ContainerBody"),f=getComputedStyle(c).getPropertyValue("border-width"),f=f.length?parseInt(f,10):1;d.set(a+".textareaHeight","0px");c.scrollHeight>c.offsetHeight&&d.set(a+".textareaHeight",c.scrollHeight+2*f+"px")},copyText:function(b){b.select();document.execCommand("copy");b.blur();window.getSelection().removeAllRanges()},formatCounter:function(b){b=parseInt(b,10);return b.toLocaleString()}};window.SECU=window.SECU||{};
window.SECU.File={_data:{maxFileSize:1572864},base64ToBlob:function(b){var a=atob(b.split(",")[1]);b=b.split(",")[0].split(":")[1].split(";")[0];for(var d=new ArrayBuffer(a.length),c=new Uint8Array(d),f=0;f<a.length;f++)c[f]=a.charCodeAt(f);a=new Blob([d],{type:b});return URL.createObjectURL(a)},fileToBase64:function(b){var a=new FileReader;return new Promise(function(d,c){try{a.onload=function(a){d(a.target.result)},a.readAsDataURL(b)}catch(f){c(f)}})},getExtension:function(b){return b.split(".").pop()},prettifySize:function(b){b=
Math.round(b/1E3);return b=1E3<=b?(b/1E3).toFixed(1)+"MB":b+"KB"},validated:function(b){return(b=b[0])?b.size>this._data.maxFileSize?["The file is too big"]:b:!1}};window.SECU=window.SECU||{};window.SECU.Error={_data:{},show:function(b){var a=window.SECU.Error,d=a._data,c=window.SECU.App._data.app;c.set("errors.messages",b);c.set("errors.show",!0);clearTimeout(d.errorTimeout);d.errorTimeout=setTimeout(function(){a.hide()},3E3)},hide:function(){var b=window.SECU.Error._data;window.SECU.App._data.app.set("errors.show",!1);clearTimeout(b.errorTimeout)}};window.SECU=window.SECU||{};
window.SECU.Chat={_data:{sentQueue:[]},unreadPos:function(){var b=this.getChat().getElementsByClassName("unread");return b[b.length-1].offsetTop},watchFeedScroll:function(b){function a(a){c.set("chat.room.unread",!1);c.set("chat.room.scrolled",d.scrolledToBottom())}var d=this,c=window.SECU.App._data.app,f=this.getChat();f&&(b?f.removeEventListener("scroll",a,!1):f.addEventListener("scroll",a,!1))},logout:function(b){window.SECU.Socket._data.chat.emit("room.leave",b)},sortRoster:function(b){var a=window.SECU.App._data.app.get("chat.room.connection.name"),
d=null;if(1===b.length||b[0].name===a)return b;for(var c=0;c<b.length;c++)if(b[c].name===a){d=b[c];b.splice(c,1);break}b.unshift(d);return b},addSentQueue:function(b){this._data.sentQueue.push(JSON.parse(JSON.stringify(b)))},extractSentQueue:function(b){for(var a=this._data.sentQueue,d=null,c=0;c<a.length;c++)if(a[c].sent_at===b){d=a[c];break}a.splice(c,1);d.sender=window.SECU.App._data.app.get("chat.room.connection.name");return d},getChat:function(){var b=document.getElementById("chat-feed-block");
return b?b.children[0]:!1},scrollPresent:function(){var b=this.getChat();return b?b.scrollHeight===b.offsetHeight?!1:!0:!1},scrolledToBottom:function(){var b=this.getChat();return b?b.scrollTop>=b.scrollHeight-b.offsetHeight?!0:!1:!1},updateScroll:function(b){var a=this.getChat();if(a){switch(b){case "top":b=0;break;case "bottom":b=a.scrollHeight}a.scrollTop=b}},decryptData:function(b){var a="",d=null,c=[];if("string"!==typeof b.text)try{a=window.SECU.Crypt.decrypt({message:JSON.stringify(b.text),
password:window.SECU.App._data.app.get("chat.room.connection.key")})}catch(f){a="Error. Couldn't decrypt text data."}else a=b.text;b.files&&b.files.length&&(d=b.files[0],c[0]={name:d.name,extension:window.SECU.File.getExtension(d.name)},c[0].data="string"===typeof d.data?window.SECU.File.base64ToBlob(d.data):window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt({message:JSON.stringify(d.data),password:window.SECU.App._data.app.get("chat.room.connection.key")})));return{text:a,files:c}},appendOwnData:function(b){this.appendData(this.extractSentQueue(b.sent_at))},
appendData:function(b){var a=window.SECU.App._data.app,d=this.scrolledToBottom(),c=a.get("windowFocused");b.data=this.decryptData(b.data);b.data.text=window.SECU.Helpers.convertToPlainText(b.data.text);b.data.text=window.SECU.Helpers.parseNewLines(b.data.text);b.data.text=window.SECU.Helpers.Autolinker.link(b.data.text);b.delivered_at=b.delivered_at||window.SECU.Helpers.generateTimestamp();a.get("chat.room.unread")||c&&a.get("show.chat")&&(!this.scrollPresent()||d)||(a.set("chat.room.feed.*.unread",
!1),b.unread=!0);a.push("chat.room.feed",b);c?b.sender===a.get("chat.room.connection.name")||d?(a.set("chat.room.feed.*.unread",!1),this.updateScroll("bottom")):!this.scrollPresent()&&a.get("show.chat")||a.set("chat.room.unread",!0):(a.set("chat.room.unread",!0),a.set("chat.room.scrolled",this.scrolledToBottom()));a.get("supportedFeatures.notification")&&!c&&(a=null,a="SYS"===b.sender?b.data.text:b.sender+" has sent a message",window.SECU.Notifications.fire({body:a}))},sendData:function(b){window.SECU.Socket._data.chat.emit("room.data",
b)},refreshRoster:function(b){window.SECU.App._data.app.set("chat.room.roster",b)},join:function(b){window.SECU.Socket._data.chat.emit("room.join",b)},create:function(b){window.SECU.Socket._data.chat.emit("room.create",{password:b.password})},enable:function(){window.SECU.App._data.app.set("chat.enabled",!0)},disable:function(){var b=window.SECU.App._data.app;b.get("show.chat")&&window.SECU.App._data.app.fire("toggleView",null,"main");b.get("chat.room.connection.key").length&&(window.SECU.App.reinitApp("chat"),
window.SECU.Error.show(["Connection error"]));b.set("chat.enabled",!1);this.watchFeedScroll(!0)},start:function(b){var a=window.SECU.App._data.app,d=window.SECU.Ajax._data.url,c=a.get("chat.form.room");a.set("chat.done",!0);a.set("chat.room.connection",{link:d.web.host+d.web.chat+c,room:c,name:b.name,key:b.key});this.appendData({sender:"SYS",data:{text:b.name+" joined the room"}});a.set("chat.formActive",!1);a.set("chat.form",{room:"",password:""});a.set("dock.chat",!0);window.SECU.Helpers.dockNavbar(!0);
setTimeout(function(){window.SECU.Helpers.fixChatFeedHeight()},0);this.watchFeedScroll();a.get("supportedFeatures.notification")&&window.SECU.Notifications.init()},init:function(){window.SECU.Helpers.fixChatFeedHeight();this.watchFeedScroll();window.SECU.App._data.app.get("chat.room.unread")?this.updateScroll(this.unreadPos()):this.updateScroll("bottom")}};window.SECU=window.SECU||{};
window.SECU.Notifications={_data:{active:null,activeTimeout:null,timeout:4E3},fire:function(b){if("granted"===Notification.permission){var a=this._data;clearTimeout(a.activeTimeout);a.active&&(b.vibrate=200);b.tag="SECU_SYS";b.icon="/images/secu.png";a.active=new Notification("S\u00cbCU",b);a.activeTimeout=setTimeout(function(){a.active.close();a.active=null},a.timeout)}},init:function(){if("denied"!==Notification.permission){var b=this;"granted"!==Notification.permission&&Notification.requestPermission(function(a){"granted"===
a&&b.fire({body:"Thanks!"})})}}};Ractive.DEBUG=!1;window.SECU=window.SECU||{};
window.SECU.App={_data:{params:{encrypt:{done:!1,link:"",formActive:!0,formDisabled:!1,rawFile:[],fileData:{size:"",name:"",extension:""},file:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},decrypt:{done:!1,success:!0,hash:"",loaded:!1,formDisabled:!1,formActive:!1,message:"",files:[],fileForm:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},feedback:{formDisabled:!1,sent:!1,form:{body:"",email:""},textareaHeight:"0px"},chat:{enabled:!1,done:!1,
formDisabled:!1,formActive:!0,room:{scrolled:!0,unread:!1,connection:{link:"",room:"",name:"",key:""},feed:[],roster:[],rawFile:[],fileData:{size:"",name:"",extension:""},input:{text:"",file:""},feedHeight:"0px"},form:{room:"",password:""}}}},reinitApp:function(b){var a=this._data,d=a.app;d.set("textCopied",!1);d.set("dropActive",!1);b&&(window.SECU.Error.hide(),history.replaceState({},"S\u00ebcu","/"));switch(b){case "package":d.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt)));d.set("encrypt",
JSON.parse(JSON.stringify(a.params.encrypt)));break;case "feedback":d.set("feedback",JSON.parse(JSON.stringify(a.params.feedback)));break;case "chat":d.set("chat",JSON.parse(JSON.stringify(a.params.chat)));break;default:d.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt))),d.set("encrypt",JSON.parse(JSON.stringify(a.params.encrypt))),d.set("feedback",JSON.parse(JSON.stringify(a.params.feedback))),d.set("chat",JSON.parse(JSON.stringify(a.params.chat)))}},refreshCount:function(b){var a=this._data;
a.app.set("counter.number",window.SECU.Helpers.formatCounter(b));a.app.set("counter.show",!0)},init:function(){var b=this,a=this._data,d=new Ractive({el:document.getElementsByClassName("secuApp")[0],template:"#secuApp",data:{windowFocused:!0,dock:{navbar:!1,chat:!1},modal:{active:!1,closeText:"Close"},counter:{show:!1,number:"9000"},show:{main:!0,chat:!1,faq:!1,feedback:!1},textCopied:!1,dropActive:!1,supportedFeatures:{copy:!0,download:!0,dragdrop:!0},errors:{show:!1,messages:[]},humanTime:window.SECU.Helpers.getHumanTime}});
a.app=d;this.reinitApp();d.on({scrollToBottom:function(){this.get("chat.room.unread")?window.SECU.Chat.updateScroll(window.SECU.Chat.unreadPos()):window.SECU.Chat.updateScroll("bottom")},cancelSubmit:function(){return!1},hideError:function(){window.SECU.Error.hide()},chatLogout:function(){window.SECU.Chat.logout({room:this.get("chat.room.connection.room")});b.reinitApp("chat");window.SECU.Chat.enable();this.set("dock.chat",!1);window.SECU.Helpers.dockNavbar(!1);this.fire("modalClose")},showChatLogout:function(){this.set("modal.type",
"chatLogout");this.set("modal.closeText","No");this.set("modal.active",!0)},showChatLink:function(){this.set("modal.type","chatLink");this.set("modal.closeText","Close");this.set("modal.active",!0)},showChatUsers:function(){this.set("modal.type","chatRoster");this.set("modal.closeText","Close");this.set("modal.active",!0)},modalClose:function(){document.activeElement.blur();this.set("modal.active",!1)},toggleView:function(a,b){a&&a.original&&a.original.preventDefault();if(this.get("show."+b))return!1;
window.SECU.Error.hide();var g=this.get("show"),h;for(h in g)this.set("show."+h,!1);this.set("show."+b,!0);"chat"===b?this.get("chat.formActive")||(this.set("dock.chat",!0),window.SECU.Helpers.dockNavbar(!0),setTimeout(function(){window.SECU.Chat.init();(!window.SECU.Chat.scrollPresent()||window.SECU.Chat.scrollPresent()&&window.SECU.Chat.scrolledToBottom())&&d.set("chat.room.unread",!1)},0)):(this.set("dock.chat",!1),window.SECU.Chat.watchFeedScroll(!0),window.SECU.Helpers.dockNavbar(!1))},sendFeedback:function(a){a&&
a.original&&a.original.preventDefault();a=this.get("feedback.form");var b=this;window.SECU.Error.hide();if(!a.body.length)return window.SECU.Error.show(["The message can't be empty"]),!1;b.set("feedback.formDisabled",!0);window.SECU.Ajax.sendFeedback(a).then(function(a){b.set("feedback.sent",!0);b.set("feedback.formDisabled",!1);b.set("feedback.form",{body:"",email:""})},function(a){window.SECU.Error.show([a])})},fixTextareaHeight:window.SECU.Helpers.fixTextareaHeight,attachFile:function(a,b){a&&
a.original&&a.original.preventDefault();var d=null;switch(b){case "room":d={raw:"chat.room.rawFile",ractive:"chat.room.input.file",id:"#chatFile"};break;case "encrypt":d={raw:"encrypt.rawFile",ractive:"encrypt.file.message",id:"#messageFile"}}this.get(d.raw).length?(this.set(d.raw,[]),this.set(d.ractive,""),this.find(d.id).value=""):this.find(d.id).click()},downloadFile:function(a){this.get("supportedFeatures.download")||(a&&a.original&&a.original.preventDefault(),window.open(a.node.href,"_blank").focus())},
checkFile:function(a,b){window.SECU.Error.hide();var d=this,h=null;switch(b){case "room":h={raw:"chat.room.rawFile",ractive:"chat.room.input.file",data:"chat.room.fileData"};break;case "encrypt":h={raw:"encrypt.rawFile",ractive:"encrypt.file.message",data:"encrypt.fileData"}}h||window.SECU.Error.show(["No file domain"]);var k=window.SECU.File.validated(this.get(h.raw));if(k&&!k[0]){var l=window.SECU.File.prettifySize(k.size),n=window.SECU.File.getExtension(k.name);window.SECU.File.fileToBase64(k).then(function(a){d.set(h.ractive,
a);d.set(h.data,{name:k.name,size:l,extension:n})},function(a){window.SECU.Error.show([a])})}else this.set(h.data,{name:"",size:"",extension:""}),k[0]&&(this.set(h.raw,[]),window.SECU.Error.show(["The file is too big"]))},resetApp:function(a,d){a&&a.original&&a.original.preventDefault();b.reinitApp(d)},requestContainer:function(a,b){a&&a.original&&a.original.preventDefault();var d=this,h=null;d.set("decrypt.formDisabled",!0);window.SECU.Ajax.requestContainer(b).then(function(a){a=JSON.parse(a);"string"===
typeof a.data.text?(d.set("decrypt.message",a.data.text),d.set("decrypt.done",!0),a.data.text.length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt")},0)):d.set("decrypt.form.message",JSON.stringify(a.data.text));a.data.files&&a.data.files[0]&&(h=a.data.files[0],d.set("decrypt.files.0.name",h.name),d.set("decrypt.files.0.extension",window.SECU.File.getExtension(h.name)),"string"===typeof h.data?(d.set("decrypt.done",!0),d.set("decrypt.files.0.data",window.SECU.File.base64ToBlob(h.data))):
d.set("decrypt.fileForm.message",JSON.stringify(h.data)));d.set("decrypt.loaded",!0);d.set("decrypt.formActive",!0);d.set("decrypt.formDisabled",!1)},function(a){window.SECU.Error.show([a])})},selectInput:function(a){a.node.select()},copyText:function(a,b){a&&a.original&&a.original.preventDefault();var d=this;window.SECU.Helpers.copyText(document.getElementById(b));this.set("textCopied",!0);setTimeout(function(){d.set("textCopied",!1)},1E3)},sendChat:function(a){a&&a.original&&a.original.preventDefault();
a=this.get("chat.room");var b=a.input.text,d=a.input.file;if(b.trim().length||d.length){var b=b.trim().length?JSON.parse(window.SECU.Crypt.encrypt({message:b,password:a.connection.key})):"",d=d.length?[{data:JSON.parse(window.SECU.Crypt.encrypt({message:d,password:a.connection.key})),name:a.fileData.name}]:[],h=window.SECU.Helpers.generateTimestamp();a={room:a.connection.room,data:{text:b,files:d},sent_at:h};window.SECU.Chat.addSentQueue(a);window.SECU.Chat.sendData(a);this.set("chat.room.input",
{text:"",file:""});this.set("chat.room.rawFile",[]);this.find("#chatFile").value=""}},createChat:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("chat.form.password").length)return window.SECU.Error.show(["You should provide a password"]),!1;this.set("chat.formDisabled",!0);a=this.get("chat.form");a.room.length?window.SECU.Chat.join(a):window.SECU.Chat.create(a)},createContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();
if(!this.get("encrypt.form.message").length&&!this.get("encrypt.rawFile").length)return window.SECU.Error.show(["There should be either message or file"]),!1;this.set("encrypt.formDisabled",!0);var b=this;a=this.get("encrypt.form.password");var d="",h=[],d=a.length?JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.form"))):this.get("encrypt.form.message");this.get("encrypt.rawFile").length&&(a.length?(this.set("encrypt.file.password",a),h.push({data:JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.file"))),
name:this.get("encrypt.fileData.name")})):h.push({data:this.get("encrypt.file.message"),name:this.get("encrypt.fileData.name")}));window.SECU.Ajax.sendContainer({data:{text:d,files:h}}).then(function(a){a=JSON.parse(a);b.set("encrypt.link",window.SECU.Ajax._data.url.web.host+window.SECU.Ajax._data.url.web.page+a.hash);b.set("encrypt.formActive",!1);b.set("encrypt.done",!0);b.set("encrypt.formDisabled",!1);setTimeout(function(){document.getElementById("containerLink").select()},0)},function(a){window.SECU.Error.show([a])})},
decryptContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("decrypt.form.password").length)return window.SECU.Error.show(["You must provide a password"]),!1;a=this.get("decrypt.form.password");this.set("decrypt.formDisabled",!0);this.set("decrypt.fileForm.password",a);if(this.get("decrypt.form.message").length)try{this.set("decrypt.message",window.SECU.Crypt.decrypt(this.get("decrypt.form")))}catch(b){this.set("decrypt.success",!1)}if(this.get("decrypt.fileForm.message").length)try{this.set("decrypt.files.0.data",
window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt(this.get("decrypt.fileForm"))))}catch(b){this.set("decrypt.success",!1)}this.set("decrypt.fileForm",{message:"",password:""});this.set("decrypt.form",{message:"",password:""});this.set("decrypt.done",!0);this.set("decrypt.formDisabled",!1);this.get("decrypt.success")&&this.get("decrypt.message").length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt");setTimeout(function(){document.getElementById("decryptContainerBody").select()},
0)},0)}});d.observe("windowFocused",function(a,b,d){a&&this.get("show.chat")&&(window.SECU.Chat.scrollPresent()||this.set("chat.room.unread",!1))});window.SECU.Helpers.Autolinker=new Autolinker({twitter:!1});window.SECU.Helpers.checkLocation();window.SECU.Helpers.checkCopy();window.SECU.Helpers.checkDownload();window.SECU.Helpers.checkDragDrop();window.SECU.Helpers.checkNotification();window.SECU.Helpers.watchDragDrop();window.SECU.Helpers.watchScroll();window.SECU.Helpers.watchResize();window.SECU.Helpers.watchWindowFocus();
window.SECU.Helpers.checkVisibility();window.SECU.Ajax.assignHost();window.SECU.Socket.init()}};window.SECU.App.init();
