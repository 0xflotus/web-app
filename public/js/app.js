var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(g){this.toString=function(){return"CORRUPT: "+this.message};this.message=g},invalid:function(g){this.toString=function(){return"INVALID: "+this.message};this.message=g},bug:function(g){this.toString=function(){return"BUG: "+this.message};this.message=g},notReady:function(g){this.toString=function(){return"NOT READY: "+this.message};this.message=g}}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});
sjcl.cipher.aes=function(g){this.s[0][0][0]||this.O();var a,d,c,e,l=this.s[0][4],k=this.s[1];a=g.length;var m=1;if(4!==a&&6!==a&&8!==a)throw new sjcl.exception.invalid("invalid aes key size");this.b=[c=g.slice(0),e=[]];for(g=a;g<4*a+28;g++){d=c[g-1];if(0===g%a||8===a&&4===g%a)d=l[d>>>24]<<24^l[d>>16&255]<<16^l[d>>8&255]<<8^l[d&255],0===g%a&&(d=d<<8^d>>>24^m<<24,m=m<<1^283*(m>>7));c[g]=c[g-a]^d}for(a=0;g;a++,g--)d=c[a&3?g:g-4],e[a]=4>=g||4>a?d:k[0][l[d>>>24]]^k[1][l[d>>16&255]]^k[2][l[d>>8&255]]^k[3][l[d&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(g){return u(this,g,0)},decrypt:function(g){return u(this,g,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var g=this.s[0],a=this.s[1],d=g[4],c=a[4],e,l,k,m=[],p=[],n,t,q,w;for(e=0;256>e;e++)p[(m[e]=e<<1^283*(e>>7))^e]=e;for(l=k=0;!d[l];l^=n||1,k=p[k]||1)for(q=k^k<<1^k<<2^k<<3^k<<4,q=q>>8^q&255^99,d[l]=q,c[q]=l,t=m[e=m[n=m[l]]],w=16843009*t^65537*e^257*n^16843008*l,t=257*m[q]^16843008*q,e=0;4>e;e++)g[e][l]=t=t<<24^t>>>8,a[e][q]=w=w<<24^w>>>8;for(e=
0;5>e;e++)g[e]=g[e].slice(0),a[e]=a[e].slice(0)}};
function u(g,a,d){if(4!==a.length)throw new sjcl.exception.invalid("invalid aes block size");var c=g.b[d],e=a[0]^c[0],l=a[d?3:1]^c[1],k=a[2]^c[2];a=a[d?1:3]^c[3];var m,p,n,t=c.length/4-2,q,w=4,x=[0,0,0,0];m=g.s[d];g=m[0];var K=m[1],M=m[2],U=m[3],ea=m[4];for(q=0;q<t;q++)m=g[e>>>24]^K[l>>16&255]^M[k>>8&255]^U[a&255]^c[w],p=g[l>>>24]^K[k>>16&255]^M[a>>8&255]^U[e&255]^c[w+1],n=g[k>>>24]^K[a>>16&255]^M[e>>8&255]^U[l&255]^c[w+2],a=g[a>>>24]^K[e>>16&255]^M[l>>8&255]^U[k&255]^c[w+3],w+=4,e=m,l=p,k=n;for(q=
0;4>q;q++)x[d?3&-q:q]=ea[e>>>24]<<24^ea[l>>16&255]<<16^ea[k>>8&255]<<8^ea[a&255]^c[w++],m=e,e=l,l=k,k=a,a=m;return x}
sjcl.bitArray={bitSlice:function(g,a,d){g=sjcl.bitArray.$(g.slice(a/32),32-(a&31)).slice(1);return void 0===d?g:sjcl.bitArray.clamp(g,d-a)},extract:function(g,a,d){var c=Math.floor(-a-d&31);return((a+d-1^a)&-32?g[a/32|0]<<32-c^g[a/32+1|0]>>>c:g[a/32|0]>>>c)&(1<<d)-1},concat:function(g,a){if(0===g.length||0===a.length)return g.concat(a);var d=g[g.length-1],c=sjcl.bitArray.getPartial(d);return 32===c?g.concat(a):sjcl.bitArray.$(a,c,d|0,g.slice(0,g.length-1))},bitLength:function(g){var a=g.length;return 0===
a?0:32*(a-1)+sjcl.bitArray.getPartial(g[a-1])},clamp:function(g,a){if(32*g.length<a)return g;g=g.slice(0,Math.ceil(a/32));var d=g.length;a&=31;0<d&&a&&(g[d-1]=sjcl.bitArray.partial(a,g[d-1]&2147483648>>a-1,1));return g},partial:function(g,a,d){return 32===g?a:(d?a|0:a<<32-g)+1099511627776*g},getPartial:function(g){return Math.round(g/1099511627776)||32},equal:function(g,a){if(sjcl.bitArray.bitLength(g)!==sjcl.bitArray.bitLength(a))return!1;var d=0,c;for(c=0;c<g.length;c++)d|=g[c]^a[c];return 0===
d},$:function(g,a,d,c){var e;for(void 0===c&&(c=[]);32<=a;a-=32)c.push(d),d=0;if(0===a)return c.concat(g);for(e=0;e<g.length;e++)c.push(d|g[e]>>>a),d=g[e]<<32-a;e=g.length?g[g.length-1]:0;g=sjcl.bitArray.getPartial(e);c.push(sjcl.bitArray.partial(a+g&31,32<a+g?d:c.pop(),1));return c},i:function(g,a){return[g[0]^a[0],g[1]^a[1],g[2]^a[2],g[3]^a[3]]},byteswapM:function(g){var a,d;for(a=0;a<g.length;++a)d=g[a],g[a]=d>>>24|d>>>8&65280|(d&65280)<<8|d<<24;return g}};
sjcl.codec.utf8String={fromBits:function(g){var a="",d=sjcl.bitArray.bitLength(g),c,e;for(c=0;c<d/8;c++)0===(c&3)&&(e=g[c/4]),a+=String.fromCharCode(e>>>24),e<<=8;return decodeURIComponent(escape(a))},toBits:function(g){g=unescape(encodeURIComponent(g));var a=[],d,c=0;for(d=0;d<g.length;d++)c=c<<8|g.charCodeAt(d),3===(d&3)&&(a.push(c),c=0);d&3&&a.push(sjcl.bitArray.partial(8*(d&3),c));return a}};
sjcl.codec.hex={fromBits:function(g){var a="",d;for(d=0;d<g.length;d++)a+=((g[d]|0)+0xf00000000000).toString(16).substr(4);return a.substr(0,sjcl.bitArray.bitLength(g)/4)},toBits:function(g){var a,d=[],c;g=g.replace(/\s|0x/g,"");c=g.length;g+="00000000";for(a=0;a<g.length;a+=8)d.push(parseInt(g.substr(a,8),16)^0);return sjcl.bitArray.clamp(d,4*c)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(g,a,d){var c=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,l="",k=0,m=sjcl.codec.base32.B,p=0,n=sjcl.bitArray.bitLength(g);d&&(m=sjcl.codec.base32.X);for(d=0;l.length*c<n;)l+=m.charAt((p^g[d]>>>k)>>>e),k<c?(p=g[d]<<c-k,k+=e,d++):(p<<=c,k-=c);for(;l.length&7&&!a;)l+="=";return l},toBits:function(g,a){g=g.replace(/\s|=/g,"").toUpperCase();var d=sjcl.codec.base32.BITS,
c=sjcl.codec.base32.BASE,e=sjcl.codec.base32.REMAINING,l=[],k,m=0,p=sjcl.codec.base32.B,n=0,t,q="base32";a&&(p=sjcl.codec.base32.X,q="base32hex");for(k=0;k<g.length;k++){t=p.indexOf(g.charAt(k));if(0>t){if(!a)try{return sjcl.codec.base32hex.toBits(g)}catch(w){}throw new sjcl.exception.invalid("this isn't "+q+"!");}m>e?(m-=e,l.push(n^t>>>m),n=t<<d-m):(m+=c,n^=t<<d-m)}m&56&&l.push(sjcl.bitArray.partial(m&56,n,1));return l}};
sjcl.codec.base32hex={fromBits:function(g,a){return sjcl.codec.base32.fromBits(g,a,1)},toBits:function(g){return sjcl.codec.base32.toBits(g,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(g,a,d){var c="",e=0,l=sjcl.codec.base64.B,k=0,m=sjcl.bitArray.bitLength(g);d&&(l=l.substr(0,62)+"-_");for(d=0;6*c.length<m;)c+=l.charAt((k^g[d]>>>e)>>>26),6>e?(k=g[d]<<6-e,e+=26,d++):(k<<=6,e-=6);for(;c.length&3&&!a;)c+="=";return c},toBits:function(g,a){g=g.replace(/\s|=/g,"");var d=[],c,e=0,l=sjcl.codec.base64.B,k=0,m;a&&(l=l.substr(0,62)+"-_");for(c=0;c<g.length;c++){m=l.indexOf(g.charAt(c));
if(0>m)throw new sjcl.exception.invalid("this isn't base64!");26<e?(e-=26,d.push(k^m>>>e),k=m<<32-e):(e+=6,k^=m<<32-e)}e&56&&d.push(sjcl.bitArray.partial(e&56,k,1));return d}};sjcl.codec.base64url={fromBits:function(g){return sjcl.codec.base64.fromBits(g,1,1)},toBits:function(g){return sjcl.codec.base64.toBits(g,1)}};sjcl.hash.sha256=function(g){this.b[0]||this.O();g?(this.F=g.F.slice(0),this.A=g.A.slice(0),this.l=g.l):this.reset()};sjcl.hash.sha256.hash=function(g){return(new sjcl.hash.sha256).update(g).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(g){"string"===typeof g&&(g=sjcl.codec.utf8String.toBits(g));var a,d=this.A=sjcl.bitArray.concat(this.A,g);a=this.l;g=this.l=a+sjcl.bitArray.bitLength(g);for(a=512+a&-512;a<=g;a+=512)v(this,d.splice(0,16));return this},finalize:function(){var g,a=this.A,d=this.F,a=sjcl.bitArray.concat(a,[sjcl.bitArray.partial(1,1)]);for(g=a.length+2;g&15;g++)a.push(0);a.push(Math.floor(this.l/
4294967296));for(a.push(this.l|0);a.length;)v(this,a.splice(0,16));this.reset();return d},Y:[],b:[],O:function(){function g(a){return 4294967296*(a-Math.floor(a))|0}var a=0,d=2,c;a:for(;64>a;d++){for(c=2;c*c<=d;c++)if(0===d%c)continue a;8>a&&(this.Y[a]=g(Math.pow(d,.5)));this.b[a]=g(Math.pow(d,1/3));a++}}};
function v(g,a){var d,c,e,l=a.slice(0),k=g.F,m=g.b,p=k[0],n=k[1],t=k[2],q=k[3],w=k[4],x=k[5],K=k[6],M=k[7];for(d=0;64>d;d++)16>d?c=l[d]:(c=l[d+1&15],e=l[d+14&15],c=l[d&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+l[d&15]+l[d+9&15]|0),c=c+M+(w>>>6^w>>>11^w>>>25^w<<26^w<<21^w<<7)+(K^w&(x^K))+m[d],M=K,K=x,x=w,w=q+c|0,q=t,t=n,n=p,p=c+(n&t^q&(n^t))+(n>>>2^n>>>13^n>>>22^n<<30^n<<19^n<<10)|0;k[0]=k[0]+p|0;k[1]=k[1]+n|0;k[2]=k[2]+t|0;k[3]=k[3]+q|0;k[4]=k[4]+w|0;k[5]=k[5]+x|0;k[6]=
k[6]+K|0;k[7]=k[7]+M|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(g){sjcl.mode.ccm.G.push(g)},unListenProgress:function(g){g=sjcl.mode.ccm.G.indexOf(g);-1<g&&sjcl.mode.ccm.G.splice(g,1)},fa:function(g){var a=sjcl.mode.ccm.G.slice(),d;for(d=0;d<a.length;d+=1)a[d](g)},encrypt:function(g,a,d,c,e){var l,k=a.slice(0),m=sjcl.bitArray,p=m.bitLength(d)/8,n=m.bitLength(k)/8;e=e||64;c=c||[];if(7>p)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(l=2;4>l&&n>>>8*l;l++);l<15-p&&(l=15-p);d=m.clamp(d,
8*(15-l));a=sjcl.mode.ccm.V(g,a,d,c,e,l);k=sjcl.mode.ccm.C(g,k,d,a,e,l);return m.concat(k.data,k.tag)},decrypt:function(g,a,d,c,e){e=e||64;c=c||[];var l=sjcl.bitArray,k=l.bitLength(d)/8,m=l.bitLength(a),p=l.clamp(a,m-e),n=l.bitSlice(a,m-e),m=(m-e)/8;if(7>k)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&m>>>8*a;a++);a<15-k&&(a=15-k);d=l.clamp(d,8*(15-a));p=sjcl.mode.ccm.C(g,p,d,n,e,a);g=sjcl.mode.ccm.V(g,p.data,d,c,e,a);if(!l.equal(p.tag,g))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return p.data},na:function(g,a,d,c,e,l){var k=[],m=sjcl.bitArray,p=m.i;c=[m.partial(8,(a.length?64:0)|c-2<<2|l-1)];c=m.concat(c,d);c[3]|=e;c=g.encrypt(c);if(a.length)for(d=m.bitLength(a)/8,65279>=d?k=[m.partial(16,d)]:4294967295>=d&&(k=m.concat([m.partial(16,65534)],[d])),k=m.concat(k,a),a=0;a<k.length;a+=4)c=g.encrypt(p(c,k.slice(a,a+4).concat([0,0,0])));return c},V:function(g,a,d,c,e,l){var k=sjcl.bitArray,m=k.i;e/=8;if(e%2||4>e||16<e)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(4294967295<c.length||4294967295<a.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");d=sjcl.mode.ccm.na(g,c,d,e,k.bitLength(a)/8,l);for(c=0;c<a.length;c+=4)d=g.encrypt(m(d,a.slice(c,c+4).concat([0,0,0])));return k.clamp(d,8*e)},C:function(g,a,d,c,e,l){var k,m=sjcl.bitArray;k=m.i;var p=a.length,n=m.bitLength(a),t=p/50,q=t;d=m.concat([m.partial(8,l-1)],d).concat([0,0,0]).slice(0,4);c=m.bitSlice(k(c,g.encrypt(d)),0,e);if(!p)return{tag:c,data:[]};for(k=0;k<p;k+=4)k>t&&(sjcl.mode.ccm.fa(k/
p),t+=q),d[3]++,e=g.encrypt(d),a[k]^=e[0],a[k+1]^=e[1],a[k+2]^=e[2],a[k+3]^=e[3];return{tag:c,data:m.clamp(a,n)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(g,a,d,c,e,l){if(128!==sjcl.bitArray.bitLength(d))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var k,m=sjcl.mode.ocb2.S,p=sjcl.bitArray,n=p.i,t=[0,0,0,0];d=m(g.encrypt(d));var q,w=[];c=c||[];e=e||64;for(k=0;k+4<a.length;k+=4)q=a.slice(k,k+4),t=n(t,q),w=w.concat(n(d,g.encrypt(n(d,q)))),d=m(d);q=a.slice(k);a=p.bitLength(q);k=g.encrypt(n(d,[0,0,0,a]));q=p.clamp(n(q.concat([0,0,0]),k),a);t=n(t,n(q.concat([0,0,0]),k));t=g.encrypt(n(t,n(d,m(d))));
c.length&&(t=n(t,l?c:sjcl.mode.ocb2.pmac(g,c)));return w.concat(p.concat(q,p.clamp(t,e)))},decrypt:function(g,a,d,c,e,l){if(128!==sjcl.bitArray.bitLength(d))throw new sjcl.exception.invalid("ocb iv must be 128 bits");e=e||64;var k=sjcl.mode.ocb2.S,m=sjcl.bitArray,p=m.i,n=[0,0,0,0],t=k(g.encrypt(d)),q,w,x=sjcl.bitArray.bitLength(a)-e,K=[];c=c||[];for(d=0;d+4<x/32;d+=4)q=p(t,g.decrypt(p(t,a.slice(d,d+4)))),n=p(n,q),K=K.concat(q),t=k(t);w=x-32*d;q=g.encrypt(p(t,[0,0,0,w]));q=p(q,m.clamp(a.slice(d),w).concat([0,
0,0]));n=p(n,q);n=g.encrypt(p(n,p(t,k(t))));c.length&&(n=p(n,l?c:sjcl.mode.ocb2.pmac(g,c)));if(!m.equal(m.clamp(n,e),m.bitSlice(a,x)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return K.concat(m.clamp(q,w))},pmac:function(g,a){var d,c=sjcl.mode.ocb2.S,e=sjcl.bitArray,l=e.i,k=[0,0,0,0],m=g.encrypt([0,0,0,0]),m=l(m,c(c(m)));for(d=0;d+4<a.length;d+=4)m=c(m),k=l(k,g.encrypt(l(m,a.slice(d,d+4))));d=a.slice(d);128>e.bitLength(d)&&(m=l(m,c(m)),d=e.concat(d,[-2147483648,0,0,0]));k=l(k,d);
return g.encrypt(l(c(l(m,c(m))),k))},S:function(g){return[g[0]<<1^g[1]>>>31,g[1]<<1^g[2]>>>31,g[2]<<1^g[3]>>>31,g[3]<<1^135*(g[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(g,a,d,c,e){var l=a.slice(0);a=sjcl.bitArray;c=c||[];g=sjcl.mode.gcm.C(!0,g,l,c,d,e||128);return a.concat(g.data,g.tag)},decrypt:function(g,a,d,c,e){var l=a.slice(0),k=sjcl.bitArray,m=k.bitLength(l);e=e||128;c=c||[];e<=m?(a=k.bitSlice(l,m-e),l=k.bitSlice(l,0,m-e)):(a=l,l=[]);g=sjcl.mode.gcm.C(!1,g,l,c,d,e);if(!k.equal(g.tag,a))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return g.data},ka:function(g,a){var d,c,e,l,k,m=sjcl.bitArray.i;e=[0,0,
0,0];l=a.slice(0);for(d=0;128>d;d++){0!==(g[Math.floor(d/32)]&1<<31-d%32)&&(e=m(e,l));k=0!==(l[3]&1);for(c=3;0<c;c--)l[c]=l[c]>>>1|(l[c-1]&1)<<31;l[0]>>>=1;k&&(l[0]^=-520093696)}return e},j:function(g,a,d){var c,e=d.length;a=a.slice(0);for(c=0;c<e;c+=4)a[0]^=4294967295&d[c],a[1]^=4294967295&d[c+1],a[2]^=4294967295&d[c+2],a[3]^=4294967295&d[c+3],a=sjcl.mode.gcm.ka(a,g);return a},C:function(g,a,d,c,e,l){var k,m,p,n,t,q,w,x,K=sjcl.bitArray;q=d.length;w=K.bitLength(d);x=K.bitLength(c);m=K.bitLength(e);
k=a.encrypt([0,0,0,0]);96===m?(e=e.slice(0),e=K.concat(e,[1])):(e=sjcl.mode.gcm.j(k,[0,0,0,0],e),e=sjcl.mode.gcm.j(k,e,[0,0,Math.floor(m/4294967296),m&4294967295]));m=sjcl.mode.gcm.j(k,[0,0,0,0],c);t=e.slice(0);c=m.slice(0);g||(c=sjcl.mode.gcm.j(k,m,d));for(n=0;n<q;n+=4)t[3]++,p=a.encrypt(t),d[n]^=p[0],d[n+1]^=p[1],d[n+2]^=p[2],d[n+3]^=p[3];d=K.clamp(d,w);g&&(c=sjcl.mode.gcm.j(k,m,d));g=[Math.floor(x/4294967296),x&4294967295,Math.floor(w/4294967296),w&4294967295];c=sjcl.mode.gcm.j(k,c,g);p=a.encrypt(e);
c[0]^=p[0];c[1]^=p[1];c[2]^=p[2];c[3]^=p[3];return{tag:K.bitSlice(c,0,l),data:d}}};sjcl.misc.hmac=function(g,a){this.W=a=a||sjcl.hash.sha256;var d=[[],[]],c,e=a.prototype.blockSize/32;this.w=[new a,new a];g.length>e&&(g=a.hash(g));for(c=0;c<e;c++)d[0][c]=g[c]^909522486,d[1][c]=g[c]^1549556828;this.w[0].update(d[0]);this.w[1].update(d[1]);this.R=new a(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(g){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(g);return this.digest(g)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(g){this.aa=!0;this.R.update(g)};sjcl.misc.hmac.prototype.digest=function(){var g=this.R.finalize(),g=(new this.W(this.w[1])).update(g).finalize();this.reset();return g};
sjcl.misc.pbkdf2=function(g,a,d,c,e){d=d||1E3;if(0>c||0>d)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof g&&(g=sjcl.codec.utf8String.toBits(g));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));e=e||sjcl.misc.hmac;g=new e(g);var l,k,m,p,n=[],t=sjcl.bitArray;for(p=1;32*n.length<(c||1);p++){e=l=g.encrypt(t.concat(a,[p]));for(k=1;k<d;k++)for(l=g.encrypt(l),m=0;m<l.length;m++)e[m]^=l[m];n=n.concat(e)}c&&(n=t.clamp(n,c));return n};
sjcl.prng=function(g){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=g;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=65536;this.T=[0,48,64,96,128,192,256,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(g,a){var d=[],c;c=this.isReady(a);var e;if(c===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(c&this.J){c=!(c&this.I);e=[];var l=0,k;this.Z=e[0]=(new Date).valueOf()+this.da;for(k=0;16>k;k++)e.push(4294967296*Math.random()|0);for(k=0;k<this.c.length&&(e=e.concat(this.c[k].finalize()),l+=this.m[k],this.m[k]=0,c||!(this.P&1<<k));k++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=l;l>this.o&&(this.o=
l);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(e));this.L=new sjcl.cipher.aes(this.b);for(c=0;4>c&&(this.h[c]=this.h[c]+1|0,!this.h[c]);c++);}for(c=0;c<g;c+=4)0===(c+1)%this.ca&&y(this),e=z(this),d.push(e[0],e[1],e[2],e[3]);y(this);return d.slice(0,g)},setDefaultParanoia:function(g,a){if(0===g&&"Setting paranoia=0 will ruin your security; use it only for testing"!==a)throw"Setting paranoia=0 will ruin your security; use it only for testing";this.M=g},addEntropy:function(g,a,d){d=d||"user";
var c,e,l=(new Date).valueOf(),k=this.H[d],m=this.isReady(),p=0;c=this.U[d];void 0===c&&(c=this.U[d]=this.ha++);void 0===k&&(k=this.H[d]=0);this.H[d]=(this.H[d]+1)%this.c.length;switch(typeof g){case "number":void 0===a&&(a=1);this.c[k].update([c,this.N++,1,a,l,1,g|0]);break;case "object":d=Object.prototype.toString.call(g);if("[object Uint32Array]"===d){e=[];for(d=0;d<g.length;d++)e.push(g[d]);g=e}else for("[object Array]"!==d&&(p=1),d=0;d<g.length&&!p;d++)"number"!==typeof g[d]&&(p=1);if(!p){if(void 0===
a)for(d=a=0;d<g.length;d++)for(e=g[d];0<e;)a++,e>>>=1;this.c[k].update([c,this.N++,2,a,l,g.length].concat(g))}break;case "string":void 0===a&&(a=g.length);this.c[k].update([c,this.N++,3,a,l,g.length]);this.c[k].update(g);break;default:p=1}if(p)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[k]+=a;this.f+=a;m===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},isReady:function(g){g=this.T[void 0!==
g?g:this.M];return this.o&&this.o>=g?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=g?this.J|this.u:this.u},getProgress:function(g){g=this.T[g?g:this.M];return this.o>=g?1:this.f>g?1:this.f/g},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,
!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(g,a){this.K[g][this.ga++]=a},removeEventListener:function(g,a){var d,c,e=this.K[g],l=[];for(c in e)e.hasOwnProperty(c)&&e[c]===a&&l.push(c);for(d=0;d<l.length;d++)c=l[d],delete e[c]},la:function(){C(1)},oa:function(g){var a,d;try{a=g.x||g.clientX||g.offsetX||0,d=g.y||g.clientY||g.offsetY||0}catch(c){d=a=0}0!=a&&0!=d&&sjcl.random.addEntropy([a,d],2,"mouse");C(0)},qa:function(g){g=
g.touches[0]||g.changedTouches[0];sjcl.random.addEntropy([g.pageX||g.clientX,g.pageY||g.clientY],1,"touch");C(0)},ma:function(){C(2)},ea:function(g){g=g.accelerationIncludingGravity.x||g.accelerationIncludingGravity.y||g.accelerationIncludingGravity.z;if(window.orientation){var a=window.orientation;"number"===typeof a&&sjcl.random.addEntropy(a,1,"accelerometer")}g&&sjcl.random.addEntropy(g,2,"accelerometer");C(0)}};
function A(g,a){var d,c=sjcl.random.K[g],e=[];for(d in c)c.hasOwnProperty(d)&&e.push(c[d]);for(d=0;d<e.length;d++)e[d](a)}function C(g){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),g,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),g,"loadtime")}function y(g){g.b=z(g).concat(z(g));g.L=new sjcl.cipher.aes(g.b)}
function z(g){for(var a=0;4>a&&(g.h[a]=g.h[a]+1|0,!g.h[a]);a++);return g.L.encrypt(g.h)}function B(g,a){return function(){a.apply(g,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(g){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(g){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(g))}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(g,a,d,c){d=d||{};c=c||{};var e=sjcl.json,l=e.g({iv:sjcl.random.randomWords(4,0)},e.defaults),k;e.g(l,d);d=l.adata;"string"===typeof l.salt&&(l.salt=sjcl.codec.base64.toBits(l.salt));"string"===typeof l.iv&&(l.iv=sjcl.codec.base64.toBits(l.iv));if(!sjcl.mode[l.mode]||!sjcl.cipher[l.cipher]||"string"===typeof g&&100>=l.iter||64!==l.ts&&96!==l.ts&&128!==l.ts||128!==l.ks&&192!==l.ks&&256!==l.ks||2>l.iv.length||
4<l.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof g?(k=sjcl.misc.cachedPbkdf2(g,l),g=k.key.slice(0,l.ks/32),l.salt=k.salt):sjcl.ecc&&g instanceof sjcl.ecc.elGamal.publicKey&&(k=g.kem(),l.kemtag=k.tag,g=k.key.slice(0,l.ks/32));"string"===typeof a&&(a=sjcl.codec.utf8String.toBits(a));"string"===typeof d&&(l.adata=d=sjcl.codec.utf8String.toBits(d));k=new sjcl.cipher[l.cipher](g);e.g(c,l);c.key=g;l.ct="ccm"===l.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
a instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(k,a,l.iv,d,l.ts):sjcl.mode[l.mode].encrypt(k,a,l.iv,d,l.ts);return l},encrypt:function(g,a,d,c){var e=sjcl.json,l=e.ja.apply(e,arguments);return e.encode(l)},ia:function(g,a,d,c){d=d||{};c=c||{};var e=sjcl.json;a=e.g(e.g(e.g({},e.defaults),a),d,!0);var l,k;l=a.adata;"string"===typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt));"string"===typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv));if(!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"===
typeof g&&100>=a.iter||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||!a.iv||2>a.iv.length||4<a.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof g?(k=sjcl.misc.cachedPbkdf2(g,a),g=k.key.slice(0,a.ks/32),a.salt=k.salt):sjcl.ecc&&g instanceof sjcl.ecc.elGamal.secretKey&&(g=g.unkem(sjcl.codec.base64.toBits(a.kemtag)).slice(0,a.ks/32));"string"===typeof l&&(l=sjcl.codec.utf8String.toBits(l));k=new sjcl.cipher[a.cipher](g);l="ccm"===
a.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&a.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(k,a.ct,a.iv,a.tag,l,a.ts):sjcl.mode[a.mode].decrypt(k,a.ct,a.iv,l,a.ts);e.g(c,a);c.key=g;return 1===d.raw?l:sjcl.codec.utf8String.fromBits(l)},decrypt:function(g,a,d,c){var e=sjcl.json;return e.ia(g,e.decode(a),d,c)},encode:function(g){var a,d="{",c="";for(a in g)if(g.hasOwnProperty(a)){if(!a.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");d+=c+'"'+
a+'":';c=",";switch(typeof g[a]){case "number":case "boolean":d+=g[a];break;case "string":d+='"'+escape(g[a])+'"';break;case "object":d+='"'+sjcl.codec.base64.fromBits(g[a],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return d+"}"},decode:function(g){g=g.replace(/\s/g,"");if(!g.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");g=g.replace(/^\{|\}$/g,"").split(/,/);var a={},d,c;for(d=0;d<g.length;d++){if(!(c=g[d].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=c[3]?a[c[2]]=parseInt(c[3],10):null!=c[4]?a[c[2]]=c[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(c[4]):unescape(c[4]):null!=c[5]&&(a[c[2]]="true"===c[5])}return a},g:function(g,a,d){void 0===g&&(g={});if(void 0===a)return g;for(var c in a)if(a.hasOwnProperty(c)){if(d&&void 0!==g[c]&&g[c]!==a[c])throw new sjcl.exception.invalid("required parameter overridden");g[c]=a[c]}return g},sa:function(g,a){var d={},c;for(c in g)g.hasOwnProperty(c)&&g[c]!==a[c]&&(d[c]=g[c]);return d},ra:function(g,
a){var d={},c;for(c=0;c<a.length;c++)void 0!==g[a[c]]&&(d[a[c]]=g[a[c]]);return d}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(g,a){var d=sjcl.misc.pa,c;a=a||{};c=a.iter||1E3;d=d[g]=d[g]||{};c=d[c]=d[c]||{firstSalt:a.salt&&a.salt.length?a.salt.slice(0):sjcl.random.randomWords(2,0)};d=void 0===a.salt?c.firstSalt:a.salt;c[d]=c[d]||sjcl.misc.pbkdf2(g,d,a.iter);return{key:c[d].slice(0),salt:d.slice(0)}};/*
 https://mths.be/utf8js v2.0.0 by @mathias  JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */
(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).io=g()})(function(){return function a(d,c,e){function l(m,n){if(!c[m]){if(!d[m]){var p="function"==typeof require&&require;if(!n&&p)return p(m,!0);if(k)return k(m,!0);p=Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p;}p=c[m]={exports:{}};
d[m][0].call(p.exports,function(a){var c=d[m][1][a];return l(c?c:a)},p,p.exports,a,d,c,e)}return c[m].exports}for(var k="function"==typeof require&&require,m=0;m<e.length;m++)l(e[m]);return l}({1:[function(a,d,c){d.exports=a("./lib/")},{"./lib/":2}],2:[function(a,d,c){d.exports=a("./socket");d.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,d,c){(function(c){function e(a,d){if(!(this instanceof e))return new e(a,d);d=d||{};a&&"object"==typeof a&&(d=a,a=null);
a?(a=q(a),d.hostname=a.host,d.secure="https"==a.protocol||"wss"==a.protocol,d.port=a.port,a.query&&(d.query=a.query)):d.host&&(d.hostname=q(d.host).host);this.secure=null!=d.secure?d.secure:c.location&&"https:"==location.protocol;d.hostname&&!d.port&&(d.port=this.secure?"443":"80");this.agent=d.agent||!1;this.hostname=d.hostname||(c.location?location.hostname:"localhost");this.port=d.port||(c.location&&location.port?location.port:this.secure?443:80);this.query=d.query||{};"string"==typeof this.query&&
(this.query=x.decode(this.query));this.upgrade=!1!==d.upgrade;this.path=(d.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!d.forceJSONP;this.jsonp=!1!==d.jsonp;this.forceBase64=!!d.forceBase64;this.enablesXDR=!!d.enablesXDR;this.timestampParam=d.timestampParam||"t";this.timestampRequests=d.timestampRequests;this.transports=d.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=d.policyPort||843;this.rememberUpgrade=d.rememberUpgrade||!1;this.binaryType=
null;this.onlyBinaryUpgrades=d.onlyBinaryUpgrades;this.perMessageDeflate=!1!==d.perMessageDeflate?d.perMessageDeflate||{}:!1;!0===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=d.pfx||null;this.key=d.key||null;this.passphrase=d.passphrase||null;this.cert=d.cert||null;this.ca=d.ca||null;this.ciphers=d.ciphers||null;this.rejectUnauthorized=void 0===d.rejectUnauthorized?null:d.rejectUnauthorized;
var k="object"==typeof c&&c;k.global===k&&d.extraHeaders&&0<Object.keys(d.extraHeaders).length&&(this.extraHeaders=d.extraHeaders);this.open()}var k=a("./transports"),m=a("component-emitter"),p=a("debug")("engine.io-client:socket"),n=a("indexof"),t=a("engine.io-parser"),q=a("parseuri"),w=a("parsejson"),x=a("parseqs");d.exports=e;e.priorWebsocketSuccess=!1;m(e.prototype);e.protocol=t.protocol;e.Socket=e;e.Transport=a("./transport");e.transports=a("./transports");e.parser=a("engine.io-parser");e.prototype.createTransport=
function(a){p('creating transport "%s"',a);var c=this.query,d={},e;for(e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);d.EIO=t.protocol;d.transport=a;this.id&&(d.sid=this.id);return new k[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:d,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,
key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})};e.prototype.open=function(){var a;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var c=this;setTimeout(function(){c.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState=
"opening";try{a=this.createTransport(a)}catch(U){this.transports.shift();this.open();return}a.open();this.setTransport(a)};e.prototype.setTransport=function(a){p("setting transport %s",a.name);var c=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",function(){c.onDrain()}).on("packet",function(a){c.onPacket(a)}).on("error",function(a){c.onError(a)}).on("close",function(){c.onClose("transport close")})};
e.prototype.probe=function(a){function c(){if(w.onlyBinaryUpgrades){var c=!this.supportsBinary&&w.transport.supportsBinary;x=x||c}x||(p('probe transport "%s" opened',a),q.send([{type:"ping",data:"probe"}]),q.once("packet",function(c){x||("pong"==c.type&&"probe"==c.data?(p('probe transport "%s" pong',a),w.upgrading=!0,w.emit("upgrading",q),q&&(e.priorWebsocketSuccess="websocket"==q.name,p('pausing current transport "%s"',w.transport.name),w.transport.pause(function(){x||"closed"==w.readyState||(p("changing transport and sending upgrade packet"),
n(),w.setTransport(q),q.send([{type:"upgrade"}]),w.emit("upgrade",q),q=null,w.upgrading=!1,w.flush())}))):(p('probe transport "%s" failed',a),c=Error("probe error"),c.transport=q.name,w.emit("upgradeError",c)))}))}function d(){x||(x=!0,n(),q.close(),q=null)}function k(c){var e=Error("probe error: "+c);e.transport=q.name;d();p('probe transport "%s" failed because of error: %s',a,c);w.emit("upgradeError",e)}function l(){k("transport closed")}function m(){k("socket closed")}function K(a){q&&a.name!=
q.name&&(p('"%s" works - aborting "%s"',a.name,q.name),d())}function n(){q.removeListener("open",c);q.removeListener("error",k);q.removeListener("close",l);w.removeListener("close",m);w.removeListener("upgrading",K)}p('probing transport "%s"',a);var q=this.createTransport(a,{probe:1}),x=!1,w=this;e.priorWebsocketSuccess=!1;q.once("open",c);q.once("error",k);q.once("close",l);this.once("close",m);this.once("upgrading",K);q.open()};e.prototype.onOpen=function(){p("socket open");this.readyState="open";
e.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var a=0,c=this.upgrades.length;a<c;a++)this.probe(this.upgrades[a])}};e.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(p('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(w(a.data));break;
case "pong":this.setPing();this.emit("pong");break;case "error":var c=Error("server error");c.code=a.data;this.onError(c);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else p('packet received with socket readyState "%s"',this.readyState)};e.prototype.onHandshake=function(a){this.emit("handshake",a);this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=
this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};e.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var c=this;c.pingTimeoutTimer=setTimeout(function(){if("closed"!=c.readyState)c.onClose("ping timeout")},a||c.pingInterval+c.pingTimeout)};e.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",
a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};e.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})};e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};e.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};e.prototype.write=e.prototype.send=function(a,c,d){this.sendPacket("message",a,c,d);return this};e.prototype.sendPacket=function(a,c,d,e){"function"==typeof c&&(e=c,c=void 0);"function"==typeof d&&(e=d,d=null);if("closing"!=this.readyState&&"closed"!=this.readyState){d=d||{};d.compress=!1!==d.compress;a={type:a,data:c,options:d};this.emit("packetCreate",a);this.writeBuffer.push(a);if(e)this.once("flush",
e);this.flush()}};e.prototype.close=function(){function a(){e.onClose("forced close");p("socket closing - telling transport to close");e.transport.close()}function c(){e.removeListener("upgrade",c);e.removeListener("upgradeError",c);a()}function d(){e.once("upgrade",c);e.once("upgradeError",c)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?d():a()});else this.upgrading?d():a()}return this};
e.prototype.onError=function(a){p("socket error %j",a);e.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};e.prototype.onClose=function(a,c){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState)p('socket close with reason: "%s"',a),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=
null,this.emit("close",a,c),this.writeBuffer=[],this.prevBufferLen=0};e.prototype.filterUpgrades=function(a){for(var c=[],d=0,e=a.length;d<e;d++)~n(this.transports,a[d])&&c.push(a[d]);return c}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,d,c){function e(a){this.path=a.path;this.hostname=
a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders}var l=a("engine.io-parser");a=a("component-emitter");d.exports=e;a(e.prototype);
e.prototype.onError=function(a,c){var d=Error(a);d.type="TransportError";d.description=c;this.emit("error",d);return this};e.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};e.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};e.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};e.prototype.onOpen=
function(){this.readyState="open";this.writable=!0;this.emit("open")};e.prototype.onData=function(a){a=l.decodePacket(a,this.socket.binaryType);this.onPacket(a)};e.prototype.onPacket=function(a){this.emit("packet",a)};e.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,d,c){(function(d){var e=a("xmlhttprequest-ssl"),k=a("./polling-xhr"),m=a("./polling-jsonp"),p=a("./websocket");c.polling=function(a){var c=!1,l=
!1,p=!1!==a.jsonp;d.location&&(l="https:"==location.protocol,(c=location.port)||(c=l?443:80),c=a.hostname!=location.hostname||c!=a.port,l=a.secure!=l);a.xdomain=c;a.xscheme=l;if("open"in new e(a)&&!a.forceJSONP)return new k(a);if(!p)throw Error("JSONP disabled");return new m(a)};c.websocket=p}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,
d,c){(function(c){function e(){}function k(a){m.call(this,a);this.query=this.query||{};q||(c.___eio||(c.___eio=[]),q=c.___eio);this.index=q.length;var d=this;q.push(function(a){d.onData(a)});this.query.j=this.index;c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){d.script&&(d.script.onerror=e)},!1)}var m=a("./polling"),p=a("component-inherit");d.exports=k;var n=/\n/g,t=/\\n/g,q;p(k,m);k.prototype.supportsBinary=!1;k.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),
this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);m.prototype.doClose.call(this)};k.prototype.doPoll=function(){var a=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);c.async=!0;c.src=this.uri();c.onerror=function(c){a.onError("jsonp poll error",c)};var d=document.getElementsByTagName("script")[0];d?d.parentNode.insertBefore(c,d):(document.head||document.body).appendChild(c);
this.script=c;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};k.prototype.doWrite=function(a,c){function d(){e();c()}function e(){if(k.iframe)try{k.form.removeChild(k.iframe)}catch(wa){k.onError("jsonp polling iframe removal error",wa)}try{q=document.createElement('<iframe src="javascript:0" name="'+k.iframeId+'">')}catch(wa){q=document.createElement("iframe"),
q.name=k.iframeId,q.src="javascript:0"}q.id=k.iframeId;k.form.appendChild(q);k.iframe=q}var k=this;if(!this.form){var l=document.createElement("form"),m=document.createElement("textarea"),p=this.iframeId="eio_iframe_"+this.index,q;l.className="socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=p;l.method="POST";l.setAttribute("accept-charset","utf-8");m.name="d";l.appendChild(m);document.body.appendChild(l);this.form=l;this.area=m}this.form.action=this.uri();
e();a=a.replace(t,"\\\n");this.area.value=a.replace(n,"\\n");try{this.form.submit()}catch(wa){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==k.iframe.readyState&&d()}:this.iframe.onload=d}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,d,c){(function(c){function e(){}function k(a){t.call(this,a);if(c.location){var d="https:"==location.protocol,
e=location.port;e||(e=d?443:80);this.xd=a.hostname!=c.location.hostname||e!=a.port;this.xs=a.secure!=d}else this.extraHeaders=a.extraHeaders}function m(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;this.ciphers=
a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.extraHeaders=a.extraHeaders;this.create()}function p(){for(var a in m.requests)m.requests.hasOwnProperty(a)&&m.requests[a].abort()}var n=a("xmlhttprequest-ssl"),t=a("./polling"),q=a("component-emitter"),w=a("component-inherit"),x=a("debug")("engine.io-client:polling-xhr");d.exports=k;d.exports.Request=m;w(k,t);k.prototype.supportsBinary=!0;k.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||
!1;a.supportsBinary=this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;a.extraHeaders=this.extraHeaders;return new m(a)};k.prototype.doWrite=function(a,c){var d=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a}),e=this;d.on("success",c);d.on("error",function(a){e.onError("xhr post error",a)});this.sendXhr=d};k.prototype.doPoll=
function(){x("xhr poll");var a=this.request(),c=this;a.on("data",function(a){c.onData(a)});a.on("error",function(a){c.onError("xhr poll error",a)});this.pollXhr=a};q(m.prototype);m.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new n(a),e=this;try{x("xhr open %s: %s",
this.method,this.uri);d.open(this.method,this.uri,this.async);try{if(this.extraHeaders){d.setDisableHeaderCheck(!0);for(var k in this.extraHeaders)this.extraHeaders.hasOwnProperty(k)&&d.setRequestHeader(k,this.extraHeaders[k])}}catch(aa){}this.supportsBinary&&(d.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(aa){}"withCredentials"in d&&(d.withCredentials=
!0);this.hasXDR()?(d.onload=function(){e.onLoad()},d.onerror=function(){e.onError(d.responseText)}):d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status||1223==d.status)e.onLoad();else setTimeout(function(){e.onError(d.status)},0)};x("xhr data %s",this.data);d.send(this.data)}catch(aa){setTimeout(function(){e.onError(aa)},0);return}c.document&&(this.index=m.requestsCount++,m.requests[this.index]=this)};m.prototype.onSuccess=function(){this.emit("success");this.cleanup()};m.prototype.onData=
function(a){this.emit("data",a);this.onSuccess()};m.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};m.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e;if(a)try{this.xhr.abort()}catch(M){}c.document&&delete m.requests[this.index];this.xhr=null}};m.prototype.onLoad=function(){var a;try{var c;try{c=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(N){}if("application/octet-stream"===
c)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(N){var d=new Uint8Array(this.xhr.response);c=[];for(var e=0,k=d.length;e<k;e++)c.push(d[e]);a=String.fromCharCode.apply(null,c)}else a=this.xhr.responseText}catch(N){this.onError(N)}if(null!=a)this.onData(a)};m.prototype.hasXDR=function(){return"undefined"!==typeof c.XDomainRequest&&!this.xs&&this.enablesXDR};m.prototype.abort=function(){this.cleanup()};c.document&&(m.requestsCount=
0,m.requests={},c.attachEvent?c.attachEvent("onunload",p):c.addEventListener&&c.addEventListener("beforeunload",p,!1))}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,d,c){function e(a){var c=a&&a.forceBase64;if(!t||c)this.supportsBinary=!1;l.call(this,a)}var l=a("../transport"),k=a("parseqs"),m=a("engine.io-parser");c=
a("component-inherit");var p=a("yeast"),n=a("debug")("engine.io-client:polling");d.exports=e;var t=null!=(new (a("xmlhttprequest-ssl"))({xdomain:!1})).responseType;c(e,l);e.prototype.name="polling";e.prototype.doOpen=function(){this.poll()};e.prototype.pause=function(a){function c(){n("paused");d.readyState="paused";a()}var d=this;this.readyState="pausing";if(this.polling||!this.writable){var e=0;this.polling&&(n("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){n("pre-pause polling complete");
--e||c()}));this.writable||(n("we are currently writing - waiting to pause"),e++,this.once("drain",function(){n("pre-pause writing complete");--e||c()}))}else c()};e.prototype.poll=function(){n("polling");this.polling=!0;this.doPoll();this.emit("poll")};e.prototype.onData=function(a){var c=this;n("polling got data %s",a);m.decodePayload(a,this.socket.binaryType,function(a,d,e){if("opening"==c.readyState)c.onOpen();if("close"==a.type)return c.onClose(),!1;c.onPacket(a)});"closed"!=this.readyState&&
(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():n('ignoring poll - transport state "%s"',this.readyState))};e.prototype.doClose=function(){function a(){n("writing close packet");c.write([{type:"close"}])}var c=this;"open"==this.readyState?(n("transport open - closing"),a()):(n("transport not open - deferring close"),this.once("open",a))};e.prototype.write=function(a){var c=this;this.writable=!1;var d=function(){c.writable=!0;c.emit("drain")},c=this;m.encodePayload(a,
this.supportsBinary,function(a){c.doWrite(a,d)})};e.prototype.uri=function(){var a=this.query||{},c=this.secure?"https":"http",d="";!1!==this.timestampRequests&&(a[this.timestampParam]=p());this.supportsBinary||a.sid||(a.b64=1);a=k.encode(a);this.port&&("https"==c&&443!=this.port||"http"==c&&80!=this.port)&&(d=":"+this.port);a.length&&(a="?"+a);var e=-1!==this.hostname.indexOf(":");return c+"://"+(e?"["+this.hostname+"]":this.hostname)+d+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,
"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,d,c){(function(c){function e(a){a&&a.forceBase64&&(this.supportsBinary=!1);this.perMessageDeflate=a.perMessageDeflate;k.call(this,a)}var k=a("../transport"),m=a("engine.io-parser"),p=a("parseqs"),n=a("component-inherit"),t=a("yeast"),q=a("debug")("engine.io-client:websocket"),w=c.WebSocket||c.MozWebSocket,x=w;if(!x&&"undefined"===typeof window)try{x=a("ws")}catch(K){}d.exports=e;n(e,k);e.prototype.name="websocket";e.prototype.supportsBinary=
!0;e.prototype.doOpen=function(){if(this.check()){var a=this.uri(),c={agent:this.agent,perMessageDeflate:this.perMessageDeflate};c.pfx=this.pfx;c.key=this.key;c.passphrase=this.passphrase;c.cert=this.cert;c.ca=this.ca;c.ciphers=this.ciphers;c.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(c.headers=this.extraHeaders);this.ws=w?new x(a):new x(a,void 0,c);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=
"buffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};e.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(c){a.onData(c.data)};this.ws.onerror=function(c){a.onError("websocket error",c)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(e.prototype.onData=function(a){var c=this;setTimeout(function(){k.prototype.onData.call(c,a)},0)});e.prototype.write=
function(a){function d(){e.emit("flush");setTimeout(function(){e.writable=!0;e.emit("drain")},0)}var e=this;this.writable=!1;for(var k=a.length,l=0,p=k;l<p;l++)(function(a){m.encodePacket(a,e.supportsBinary,function(l){if(!w){var m={};a.options&&(m.compress=a.options.compress);e.perMessageDeflate&&("string"==typeof l?c.Buffer.byteLength(l):l.length)<e.perMessageDeflate.threshold&&(m.compress=!1)}try{w?e.ws.send(l):e.ws.send(l,m)}catch(db){q("websocket closed before onclose event")}--k||d()})})(a[l])};
e.prototype.onClose=function(){k.prototype.onClose.call(this)};e.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};e.prototype.uri=function(){var a=this.query||{},c=this.secure?"wss":"ws",d="";this.port&&("wss"==c&&443!=this.port||"ws"==c&&80!=this.port)&&(d=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=t());this.supportsBinary||(a.b64=1);a=p.encode(a);a.length&&(a="?"+a);var e=-1!==this.hostname.indexOf(":");return c+"://"+(e?"["+this.hostname+"]":this.hostname)+
d+this.path+a};e.prototype.check=function(){return!!x&&!("__initialize"in x&&this.name===e.prototype.name)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,d,c){var e=a("has-cors");d.exports=function(a){var c=a.xdomain,d=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!c||e))return new XMLHttpRequest}catch(p){}try{if("undefined"!=
typeof XDomainRequest&&!d&&a)return new XDomainRequest}catch(p){}if(!c)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(p){}}},{"has-cors":22}],11:[function(a,d,c){function e(){}d.exports=function(a,c,d){function k(a,e){if(0>=k.count)throw Error("after called too many times");--k.count;a?(l=!0,c(a),c=d):0!==k.count||l||c(null,e)}var l=!1;d=d||e;k.count=a;return 0===a?c():k}},{}],12:[function(a,d,c){d.exports=function(a,c,d){var e=a.byteLength;c=c||0;d=d||e;if(a.slice)return a.slice(c,d);0>
c&&(c+=e);0>d&&(d+=e);d>e&&(d=e);if(c>=e||c>=d||0===e)return new ArrayBuffer(0);a=new Uint8Array(a);for(var e=new Uint8Array(d-c),k=0;c<d;c++,k++)e[k]=a[c];return e.buffer}},{}],13:[function(a,d,c){(function(a){c.encode=function(c){c=new Uint8Array(c);var d,e=c.length,l="";for(d=0;d<e;d+=3)l+=a[c[d]>>2],l+=a[(c[d]&3)<<4|c[d+1]>>4],l+=a[(c[d+1]&15)<<2|c[d+2]>>6],l+=a[c[d+2]&63];2===e%3?l=l.substring(0,l.length-1)+"=":1===e%3&&(l=l.substring(0,l.length-2)+"==");return l};c.decode=function(c){var d=
.75*c.length,e=c.length,l=0,n,t,q,w;"="===c[c.length-1]&&(d--,"="===c[c.length-2]&&d--);for(var x=new ArrayBuffer(d),K=new Uint8Array(x),d=0;d<e;d+=4)n=a.indexOf(c[d]),t=a.indexOf(c[d+1]),q=a.indexOf(c[d+2]),w=a.indexOf(c[d+3]),K[l++]=n<<2|t>>4,K[l++]=(t&15)<<4|q>>2,K[l++]=(q&3)<<6|w&63;return x}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,d,c){(function(a){function c(a){for(var c=0;c<a.length;c++){var d=a[c];if(d.buffer instanceof ArrayBuffer){var e=
d.buffer;if(d.byteLength!==e.byteLength){var k=new Uint8Array(d.byteLength);k.set(new Uint8Array(e,d.byteOffset,d.byteLength));e=k.buffer}a[c]=e}}}function e(a,d){d=d||{};var e=new p;c(a);for(var k=0;k<a.length;k++)e.append(a[k]);return d.type?e.getBlob(d.type):e.getBlob()}function m(a,d){c(a);return new Blob(a,d||{})}var p=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,n;try{n=2===(new Blob(["hi"])).size}catch(w){n=!1}var t;if(t=n)try{t=2===(new Blob([new Uint8Array([1,2])])).size}catch(w){t=
!1}var q=p&&p.prototype.append&&p.prototype.getBlob;a=n?t?a.Blob:m:q?e:void 0;d.exports=a}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],15:[function(a,d,c){function e(a){if(a){for(var c in e.prototype)a[c]=e.prototype[c];return a}}d.exports=e;e.prototype.on=e.prototype.addEventListener=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(c);return this};e.prototype.once=function(a,
c){function d(){e.off(a,d);c.apply(this,arguments)}var e=this;this._callbacks=this._callbacks||{};d.fn=c;this.on(a,d);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(a,c){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks[a];if(!d)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var e,k=0;k<d.length;k++)if(e=d[k],e===c||e.fn===c){d.splice(k,
1);break}return this};e.prototype.emit=function(a){this._callbacks=this._callbacks||{};var c=[].slice.call(arguments,1),d=this._callbacks[a];if(d)for(var d=d.slice(0),e=0,l=d.length;e<l;++e)d[e].apply(this,c);return this};e.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};e.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,d,c){d.exports=function(a,c){var d=function(){};d.prototype=c.prototype;a.prototype=new d;
a.prototype.constructor=a}},{}],17:[function(a,d,c){function e(){var a;try{a=c.storage.debug}catch(m){}return a}c=d.exports=a("./debug");c.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};c.formatArgs=function(){var a=arguments,d=this.useColors;a[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+a[0]+(d?"%c ":" ")+"+"+c.humanize(this.diff);if(!d)return a;var d="color: "+this.color,a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,
1)),e=0,l=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(l=e))});a.splice(l,0,d);return a};c.save=function(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(m){}};c.load=e;c.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};var l;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)l=
chrome.storage.local;else a:{try{l=window.localStorage;break a}catch(k){}l=void 0}c.storage=l;c.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");c.formatters.j=function(a){return JSON.stringify(a)};c.enable(e())},{"./debug":18}],18:[function(a,d,c){c=d.exports=function(a){function d(){}function k(){var a=+new Date;k.diff=a-(l||a);k.prev=l;l=k.curr=a;null==k.useColors&&(k.useColors=c.useColors());null==k.color&&k.useColors&&(k.color=c.colors[e++%c.colors.length]);
var d=Array.prototype.slice.call(arguments);d[0]=c.coerce(d[0]);"string"!==typeof d[0]&&(d=["%o"].concat(d));var m=0;d[0]=d[0].replace(/%([a-z%])/g,function(a,e){if("%%"===a)return a;m++;var l=c.formatters[e];"function"===typeof l&&(a=l.call(k,d[m]),d.splice(m,1),m--);return a});"function"===typeof c.formatArgs&&(d=c.formatArgs.apply(k,d));(k.log||c.log||console.log.bind(console)).apply(k,d)}d.enabled=!1;k.enabled=!0;var n=c.enabled(a)?k:d;n.namespace=a;return n};c.coerce=function(a){return a instanceof
Error?a.stack||a.message:a};c.disable=function(){c.enable("")};c.enable=function(a){c.save(a);for(var d=(a||"").split(/[\s,]+/),e=d.length,k=0;k<e;k++)d[k]&&(a=d[k].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))};c.enabled=function(a){var d,e;d=0;for(e=c.skips.length;d<e;d++)if(c.skips[d].test(a))return!1;d=0;for(e=c.names.length;d<e;d++)if(c.names[d].test(a))return!0;return!1};c.humanize=a("ms");c.names=[];c.skips=[];c.formatters=
{};var e=0,l},{ms:25}],19:[function(a,d,c){(function(d){function e(a,d,e){if(!d)return c.encodeBase64Packet(a,e);var k=new FileReader;k.onload=function(){a.data=k.result;c.encodePacket(a,d,!0,e)};return k.readAsArrayBuffer(a.data)}function k(a,c,d){var e=Array(a.length);d=q(a.length,d);for(var k=function(a,d,k){c(d,function(c,d){e[a]=d;k(c,e)})},l=0;l<a.length;l++)k(l,a[l],d)}var m=a("./keys"),p=a("has-binary"),n=a("arraybuffer.slice"),t=a("base64-arraybuffer"),q=a("after"),w=a("utf8"),x=navigator.userAgent.match(/Android/i),
K=/PhantomJS/i.test(navigator.userAgent),M=x||K;c.protocol=3;var U=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},ea=m(U),aa={type:"error",data:"parser error"},N=a("blob");c.encodePacket=function(a,k,l,m){"function"==typeof k&&(m=k,k=!1);"function"==typeof l&&(m=l,l=null);var n=void 0===a.data?void 0:a.data.buffer||a.data;if(d.ArrayBuffer&&n instanceof ArrayBuffer){if(k){l=a.data;k=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=U[a.type];for(a=0;a<k.length;a++)l[a+1]=
k[a];a=m(l.buffer)}else a=c.encodeBase64Packet(a,m);return a}if(N&&n instanceof d.Blob)return k?M?a=e(a,k,m):(k=new Uint8Array(1),k[0]=U[a.type],a=new N([k.buffer,a.data]),a=m(a)):a=c.encodeBase64Packet(a,m),a;if(n&&n.base64)return m("b"+c.packets[a.type]+a.data.data);k=U[a.type];void 0!==a.data&&(k+=l?w.encode(String(a.data)):String(a.data));return m(""+k)};c.encodeBase64Packet=function(a,e){var k="b"+c.packets[a.type];if(N&&a.data instanceof d.Blob){var l=new FileReader;l.onload=function(){var a=
l.result.split(",")[1];e(k+a)};return l.readAsDataURL(a.data)}var m;try{m=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(Ea){m=new Uint8Array(a.data);for(var n=Array(m.length),p=0;p<m.length;p++)n[p]=m[p];m=String.fromCharCode.apply(null,n)}k+=d.btoa(m);return e(k)};c.decodePacket=function(a,d,e){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),d);if(e)try{a=w.decode(a)}catch(db){return aa}e=a.charAt(0);return Number(e)==e&&ea[e]?1<a.length?
{type:ea[e],data:a.substring(1)}:{type:ea[e]}:aa}e=(new Uint8Array(a))[0];a=n(a,1);N&&"blob"===d&&(a=new N([a]));return{type:ea[e],data:a}};c.decodeBase64Packet=function(a,c){var e=ea[a.charAt(0)];if(!d.ArrayBuffer)return{type:e,data:{base64:!0,data:a.substr(1)}};var k=t.decode(a.substr(1));"blob"===c&&N&&(k=new N([k]));return{type:e,data:k}};c.encodePayload=function(a,d,e){"function"==typeof d&&(e=d,d=null);var l=p(a);if(d&&l)return N&&!M?c.encodePayloadAsBlob(a,e):c.encodePayloadAsArrayBuffer(a,
e);if(!a.length)return e("0:");k(a,function(a,e){c.encodePacket(a,l?d:!1,!0,function(a){e(null,a.length+":"+a)})},function(a,c){return e(c.join(""))})};c.decodePayload=function(a,d,e){if("string"!=typeof a)return c.decodePayloadAsBinary(a,d,e);"function"===typeof d&&(e=d,d=null);var k;if(""==a)return e(aa,0,1);k="";for(var l,m,n=0,p=a.length;n<p;n++)if(m=a.charAt(n),":"!=m)k+=m;else{if(""==k||k!=(l=Number(k)))return e(aa,0,1);m=a.substr(n+1,l);if(k!=m.length)return e(aa,0,1);if(m.length){k=c.decodePacket(m,
d,!0);if(aa.type==k.type&&aa.data==k.data)return e(aa,0,1);if(!1===e(k,n+l,p))return}n+=l;k=""}if(""!=k)return e(aa,0,1)};c.encodePayloadAsArrayBuffer=function(a,d){if(!a.length)return d(new ArrayBuffer(0));k(a,function(a,d){c.encodePacket(a,!0,!0,function(a){return d(null,a)})},function(a,c){var e=c.reduce(function(a,c){var d;d="string"===typeof c?c.length:c.byteLength;return a+d.toString().length+d+2},0),k=new Uint8Array(e),l=0;c.forEach(function(a){var c="string"===typeof a,d=a;if(c){for(var d=
new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);d=d.buffer}c?k[l++]=0:k[l++]=1;a=d.byteLength.toString();for(e=0;e<a.length;e++)k[l++]=parseInt(a[e]);k[l++]=255;d=new Uint8Array(d);for(e=0;e<d.length;e++)k[l++]=d[e]});return d(k.buffer)})};c.encodePayloadAsBlob=function(a,d){k(a,function(a,d){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);c[0]=1;if("string"===typeof a){for(var e=new Uint8Array(a.length),k=0;k<a.length;k++)e[k]=a.charCodeAt(k);a=e.buffer;c[0]=0}for(var e=
(a instanceof ArrayBuffer?a.byteLength:a.size).toString(),l=new Uint8Array(e.length+1),k=0;k<e.length;k++)l[k]=parseInt(e[k]);l[e.length]=255;N&&(a=new N([c.buffer,l.buffer,a]),d(null,a))})},function(a,c){return d(new N(c))})};c.decodePayloadAsBinary=function(a,d,e){"function"===typeof d&&(e=d,d=null);for(var k=[],l=!1;0<a.byteLength;){for(var m=new Uint8Array(a),p=0===m[0],q="",x=1;255!=m[x];x++){if(310<q.length){l=!0;break}q+=m[x]}if(l)return e(aa,0,1);a=n(a,2+q.length);q=parseInt(q);m=n(a,0,q);
if(p)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(pa){for(p=new Uint8Array(m),m="",x=0;x<p.length;x++)m+=String.fromCharCode(p[x])}k.push(m);a=n(a,q)}var K=k.length;k.forEach(function(a,k){e(c.decodePacket(a,d,!0),k,K)})}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,d,c){d.exports=Object.keys||
function(a){var c=[],d=Object.prototype.hasOwnProperty,e;for(e in a)d.call(a,e)&&c.push(e);return c}},{}],21:[function(a,d,c){(function(c){var e=a("isarray");d.exports=function(a){function d(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a))for(var k=0;k<a.length;k++){if(d(a[k]))return!0}else if(a&&"object"==typeof a)for(k in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,
k)&&d(a[k]))return!0;return!1}return d(a)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:24}],22:[function(a,d,c){try{d.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){d.exports=!1}},{}],23:[function(a,d,c){var e=[].indexOf;d.exports=function(a,c){if(e)return a.indexOf(c);for(var d=0;d<a.length;++d)if(a[d]===c)return d;return-1}},{}],24:[function(a,d,c){d.exports=Array.isArray||
function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],25:[function(a,d,c){function e(a){a=""+a;if(!(1E4<a.length)&&(a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a))){var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return 315576E5*c;case "days":case "day":case "d":return 864E5*c;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*
c;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*c;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*c;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return c}}}function l(a,c,d){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+d:Math.ceil(a/c)+" "+d+"s"}d.exports=function(a,c){c=c||{};return"string"==typeof a?e(a):c["long"]?l(a,864E5,"day")||l(a,36E5,"hour")||l(a,6E4,"minute")||l(a,1E3,"second")||a+" ms":864E5<=a?Math.round(a/
864E5)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],26:[function(a,d,c){(function(a){var c=/^[\],:{}\s]*$/,e=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,p=/(?:^|:|,)(?:\s*\[)+/g,n=/^\s+/,t=/\s+$/;d.exports=function(d){if("string"!=typeof d||!d)return null;d=d.replace(n,"").replace(t,"");if(a.JSON&&JSON.parse)return JSON.parse(d);if(c.test(d.replace(e,"@").replace(m,"]").replace(p,
"")))return(new Function("return "+d))()}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],27:[function(a,d,c){c.encode=function(a){var c="",d;for(d in a)a.hasOwnProperty(d)&&(c.length&&(c+="&"),c+=encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return c};c.decode=function(a){var c={};a=a.split("&");for(var d=0,e=a.length;d<e;d++){var p=a[d].split("=");c[decodeURIComponent(p[0])]=decodeURIComponent(p[1])}return c}},{}],28:[function(a,
d,c){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,l="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");d.exports=function(a){var c=a,d=a.indexOf("["),k=a.indexOf("]");-1!=d&&-1!=k&&(a=a.substring(0,d)+a.substring(d,k).replace(/:/g,";")+a.substring(k,
a.length));a=e.exec(a||"");for(var t={},q=14;q--;)t[l[q]]=a[q]||"";-1!=d&&-1!=k&&(t.source=c,t.host=t.host.substring(1,t.host.length-1).replace(/;/g,":"),t.authority=t.authority.replace("[","").replace("]","").replace(/;/g,":"),t.ipv6uri=!0);return t}},{}],29:[function(a,d,c){(function(a){(function(e){function k(a){for(var c=[],d=0,e=a.length,k,l;d<e;)k=a.charCodeAt(d++),55296<=k&&56319>=k&&d<e?(l=a.charCodeAt(d++),56320==(l&64512)?c.push(((k&1023)<<10)+(l&1023)+65536):(c.push(k),d--)):c.push(k);
return c}function l(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");}function p(){if(U>=M)throw Error("Invalid byte index");var a=K[U]&255;U++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function n(){var a,c,d,e;if(U>M)throw Error("Invalid byte index");if(U==M)return!1;a=K[U]&255;U++;if(0==(a&128))return a;if(192==(a&224)){c=p();a=(a&31)<<6|c;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==
(a&240)){c=p();d=p();a=(a&15)<<12|c<<6|d;if(2048<=a)return l(a),a;throw Error("Invalid continuation byte");}if(240==(a&248)&&(c=p(),d=p(),e=p(),a=(a&15)<<18|c<<12|d<<6|e,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var t="object"==typeof c&&c,q="object"==typeof d&&d&&d.exports==t&&d,w="object"==typeof a&&a;if(w.global===w||w.window===w)e=w;var x=String.fromCharCode,K,M,U,w={version:"2.0.0",encode:function(a){a=k(a);for(var c=a.length,d=-1,e,m="";++d<c;){e=a[d];if(0==(e&4294967168))e=
x(e);else{var n="";0==(e&4294965248)?n=x(e>>6&31|192):0==(e&4294901760)?(l(e),n=x(e>>12&15|224),n+=x(e>>6&63|128)):0==(e&4292870144)&&(n=x(e>>18&7|240),n+=x(e>>12&63|128),n+=x(e>>6&63|128));e=n+=x(e&63|128)}m+=e}return m},decode:function(a){K=k(a);M=K.length;U=0;a=[];for(var c;!1!==(c=n());)a.push(c);c=a.length;for(var d=-1,e,l="";++d<c;)e=a[d],65535<e&&(e-=65536,l+=x(e>>>10&1023|55296),e=56320|e&1023),l+=x(e);return l}};if(t&&!t.nodeType)if(q)q.exports=w;else{e={}.hasOwnProperty;for(var ea in w)e.call(w,
ea)&&(t[ea]=w[ea])}else e.utf8=w})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],30:[function(a,d,c){function e(a){var c="";do c=k[a%64]+c,a=Math.floor(a/64);while(0<a);return c}function l(){var a=e(+new Date);return a!==t?(p=0,t=a):a+"."+e(p++)}for(var k="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),m={},p=0,n=0,t;64>n;n++)m[k[n]]=n;l.encode=e;l.decode=function(a){var c=0;for(n=0;n<a.length;n++)c=
64*c+m[a.charAt(n)];return c};d.exports=l},{}],31:[function(a,d,c){function e(a,c){"object"==typeof a&&(c=a,a=void 0);c=c||{};var d=l(a),e=d.source,k=d.id,q=d.path,q=n[k]&&q in n[k].nsps;c.forceNew||c["force new connection"]||!1===c.multiplex||q?(p("ignoring socket cache for %s",e),e=m(e,c)):(n[k]||(p("new io instance for %s",e),n[k]=m(e,c)),e=n[k]);return e.socket(d.path)}var l=a("./url"),k=a("socket.io-parser"),m=a("./manager"),p=a("debug")("socket.io-client");d.exports=c=e;var n=c.managers={};
c.protocol=k.protocol;c.connect=e;c.Manager=a("./manager");c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,d,c){function e(a,c){if(!(this instanceof e))return new e(a,c);a&&"object"==typeof a&&(c=a,a=void 0);c=c||{};c.path=c.path||"/socket.io";this.nsps={};this.subs=[];this.opts=c;this.reconnection(!1!==c.reconnection);this.reconnectionAttempts(c.reconnectionAttempts||Infinity);this.reconnectionDelay(c.reconnectionDelay||1E3);this.reconnectionDelayMax(c.reconnectionDelayMax||
5E3);this.randomizationFactor(c.randomizationFactor||.5);this.backoff=new w({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==c.timeout?2E4:c.timeout);this.readyState="closed";this.uri=a;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];this.encoder=new m.Encoder;this.decoder=new m.Decoder;(this.autoConnect=!1!==c.autoConnect)&&this.open()}var l=a("engine.io-client"),k=a("./socket");c=a("component-emitter");
var m=a("socket.io-parser"),p=a("./on"),n=a("component-bind"),t=a("debug")("socket.io-client:manager"),q=a("indexof"),w=a("backo2"),x=Object.prototype.hasOwnProperty;d.exports=e;e.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)x.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)};e.prototype.updateSocketIds=function(){for(var a in this.nsps)x.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)};c(e.prototype);e.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;
this._reconnection=!!a;return this};e.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=a;return this};e.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};e.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);
return this};e.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&this.backoff.setMax(a);return this};e.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};e.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};e.prototype.open=e.prototype.connect=function(a){t("readyState %s",this.readyState);
if(~this.readyState.indexOf("open"))return this;t("opening %s",this.uri);var c=this.engine=l(this.uri,this.opts),d=this;this.readyState="opening";this.skipReconnect=!1;var e=p(c,"open",function(){d.onopen();a&&a()}),k=p(c,"error",function(c){t("connect_error");d.cleanup();d.readyState="closed";d.emitAll("connect_error",c);if(a){var e=Error("Connection error");e.data=c;a(e)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var m=this._timeout;t("connect attempt will timeout after %d",m);var n=
setTimeout(function(){t("connect attempt timed out after %d",m);e.destroy();c.close();c.emit("error","timeout");d.emitAll("connect_timeout",m)},m);this.subs.push({destroy:function(){clearTimeout(n)}})}this.subs.push(e);this.subs.push(k);return this};e.prototype.onopen=function(){t("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(p(a,"data",n(this,"ondata")));this.subs.push(p(a,"ping",n(this,"onping")));this.subs.push(p(a,"pong",n(this,"onpong")));this.subs.push(p(a,
"error",n(this,"onerror")));this.subs.push(p(a,"close",n(this,"onclose")));this.subs.push(p(this.decoder,"decoded",n(this,"ondecoded")))};e.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};e.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};e.prototype.ondata=function(a){this.decoder.add(a)};e.prototype.ondecoded=function(a){this.emit("packet",a)};e.prototype.onerror=function(a){t("error",a);this.emitAll("error",a)};e.prototype.socket=function(a){function c(){~q(e.connecting,
d)||e.connecting.push(d)}var d=this.nsps[a];if(!d){d=new k(this,a);this.nsps[a]=d;var e=this;d.on("connecting",c);d.on("connect",function(){d.id=e.engine.id});this.autoConnect&&c()}return d};e.prototype.destroy=function(a){a=q(this.connecting,a);~a&&this.connecting.splice(a,1);this.connecting.length||this.close()};e.prototype.packet=function(a){t("writing packet %j",a);var c=this;c.encoding?c.packetBuffer.push(a):(c.encoding=!0,this.encoder.encode(a,function(d){for(var e=0;e<d.length;e++)c.engine.write(d[e],
a.options);c.encoding=!1;c.processPacketQueue()}))};e.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};e.prototype.cleanup=function(){t("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};e.prototype.close=e.prototype.disconnect=function(){t("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"==this.readyState&&this.cleanup();
this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};e.prototype.onclose=function(a){t("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};e.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)t("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=
!1;else{var c=this.backoff.duration();t("will wait %dms before reconnect attempt",c);this.reconnecting=!0;var d=setTimeout(function(){a.skipReconnect||(t("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(c){c?(t("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",c.data)):(t("reconnect success"),a.onreconnect())}))},c);this.subs.push({destroy:function(){clearTimeout(d)}})}};
e.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,d,c){d.exports=function(a,c,d){a.on(c,d);return{destroy:function(){a.removeListener(c,d)}}}},{}],34:[function(a,d,c){function e(a,c){this.io=a;this.nsp=c;this.json=this;this.ids=0;this.acks=
{};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.io.autoConnect&&this.open()}var l=a("socket.io-parser");c=a("component-emitter");var k=a("to-array"),m=a("./on"),p=a("component-bind"),n=a("debug")("socket.io-client:socket"),t=a("has-binary");d.exports=e;var q={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},w=c.prototype.emit;c(e.prototype);
e.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[m(a,"open",p(this,"onopen")),m(a,"packet",p(this,"onpacket")),m(a,"close",p(this,"onclose"))]}};e.prototype.open=e.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};e.prototype.send=function(){var a=k(arguments);a.unshift("message");this.emit.apply(this,a);return this};e.prototype.emit=function(a){if(q.hasOwnProperty(a))return w.apply(this,
arguments),this;var c=k(arguments),d=l.EVENT;t(c)&&(d=l.BINARY_EVENT);d={type:d,data:c,options:{}};d.options.compress=!this.flags||!1!==this.flags.compress;"function"==typeof c[c.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=c.pop(),d.id=this.ids++);this.connected?this.packet(d):this.sendBuffer.push(d);delete this.flags;return this};e.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};e.prototype.onopen=function(){n("transport is open - connecting");"/"!=
this.nsp&&this.packet({type:l.CONNECT})};e.prototype.onclose=function(a){n("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",a)};e.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case l.CONNECT:this.onconnect();break;case l.EVENT:this.onevent(a);break;case l.BINARY_EVENT:this.onevent(a);break;case l.ACK:this.onack(a);break;case l.BINARY_ACK:this.onack(a);break;case l.DISCONNECT:this.ondisconnect();break;case l.ERROR:this.emit("error",a.data)}};
e.prototype.onevent=function(a){var c=a.data||[];n("emitting event %j",c);null!=a.id&&(n("attaching ack callback to event"),c.push(this.ack(a.id)));this.connected?w.apply(this,c):this.receiveBuffer.push(c)};e.prototype.ack=function(a){var c=this,d=!1;return function(){if(!d){d=!0;var e=k(arguments);n("sending ack %j",e);var m=t(e)?l.BINARY_ACK:l.ACK;c.packet({type:m,id:a,data:e})}}};e.prototype.onack=function(a){var c=this.acks[a.id];"function"==typeof c?(n("calling ack %s with %j",a.id,a.data),c.apply(this,
a.data),delete this.acks[a.id]):n("bad ack %s",a.id)};e.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};e.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)w.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};e.prototype.ondisconnect=function(){n("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};
e.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};e.prototype.close=e.prototype.disconnect=function(){this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:l.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this};e.prototype.compress=function(a){this.flags=this.flags||{};this.flags.compress=a;return this}},{"./on":33,"component-bind":37,"component-emitter":38,
debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,d,c){(function(c){var e=a("parseuri"),k=a("debug")("socket.io-client:url");d.exports=function(a,d){var l=a;d=d||c.location;null==a&&(a=d.protocol+"//"+d.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?d.protocol+a:d.host+a),/^(https?|wss?):\/\//.test(a)||(k("protocol-less url %s",a),a="undefined"!=typeof d?d.protocol+"//"+a:"https://"+a),k("parse %s",a),l=e(a));l.port||(/^(http|ws)$/.test(l.protocol)?l.port=
"80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443"));l.path=l.path||"/";var m=-1!==l.host.indexOf(":")?"["+l.host+"]":l.host;l.id=l.protocol+"://"+m+":"+l.port;l.href=l.protocol+"://"+m+(d&&d.port==l.port?"":":"+l.port);return l}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,d,c){function e(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&
1>=a.jitter?a.jitter:0;this.attempts=0}d.exports=e;e.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter)var c=Math.random(),d=Math.floor(c*this.jitter*a),a=0==(Math.floor(10*c)&1)?a-d:a+d;return Math.min(a,this.max)|0};e.prototype.reset=function(){this.attempts=0};e.prototype.setMin=function(a){this.ms=a};e.prototype.setMax=function(a){this.max=a};e.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,d,c){var e=[].slice;d.exports=function(a,
c){"string"==typeof c&&(c=a[c]);if("function"!=typeof c)throw Error("bind() requires a function");var d=e.call(arguments,2);return function(){return c.apply(a,d.concat(e.call(arguments)))}}},{}],38:[function(a,d,c){function e(a){if(a){for(var c in e.prototype)a[c]=e.prototype[c];return a}}d.exports=e;e.prototype.on=e.prototype.addEventListener=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(c);return this};e.prototype.once=function(a,c){function d(){this.off(a,
d);c.apply(this,arguments)}d.fn=c;this.on(a,d);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(a,c){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e,k=0;k<d.length;k++)if(e=d[k],e===c||e.fn===c){d.splice(k,1);break}return this};e.prototype.emit=function(a){this._callbacks=
this._callbacks||{};var c=[].slice.call(arguments,1),d=this._callbacks["$"+a];if(d)for(var d=d.slice(0),e=0,l=d.length;e<l;++e)d[e].apply(this,c);return this};e.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks["$"+a]||[]};e.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,d,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,d,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,
d,c){(function(c){var e=a("isarray");d.exports=function(a){function d(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a))for(var k=0;k<a.length;k++){if(d(a[k]))return!0}else if(a&&"object"==typeof a)for(k in a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,k)&&d(a[k]))return!0;return!1}return d(a)}}).call(this,"undefined"!==
typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{isarray:43}],42:[function(a,d,c){arguments[4][23][0].apply(c,arguments)},{dup:23}],43:[function(a,d,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,d,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,d,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,d,c){(function(d){var e=a("isarray"),k=a("./is-buffer");c.deconstructPacket=function(a){function c(a){if(!a)return a;
if(k(a)){var l={_placeholder:!0,num:d.length};d.push(a);return l}if(e(a)){for(var l=Array(a.length),m=0;m<a.length;m++)l[m]=c(a[m]);return l}if("object"==typeof a&&!(a instanceof Date)){l={};for(m in a)l[m]=c(a[m]);return l}return a}var d=[];a.data=c(a.data);a.attachments=d.length;return{packet:a,buffers:d}};c.reconstructPacket=function(a,c){function d(a){if(a&&a._placeholder)return c[a.num];if(e(a))for(var k=0;k<a.length;k++)a[k]=d(a[k]);else if(a&&"object"==typeof a)for(k in a)a[k]=d(a[k]);return a}
a.data=d(a.data);a.attachments=void 0;return a};c.removeBlobs=function(a,c){function l(a,n,p){if(!a)return a;if(d.Blob&&a instanceof Blob||d.File&&a instanceof File){m++;var x=new FileReader;x.onload=function(){p?p[n]=this.result:q=this.result;--m||c(q)};x.readAsArrayBuffer(a)}else if(e(a))for(x=0;x<a.length;x++)l(a[x],x,a);else if(a&&"object"==typeof a&&!k(a))for(x in a)l(a[x],x,a)}var m=0,q=a;l(q);m||c(q)}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==
typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,d,c){function e(){}function l(a){var d,e=!1;d=""+a.type;if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)d+=a.attachments,d+="-";a.nsp&&"/"!=a.nsp&&(e=!0,d+=a.nsp);null!=a.id&&(e&&(d+=",",e=!1),d+=a.id);null!=a.data&&(e&&(d+=","),d+=t.stringify(a.data));n("encoded %j as %s",a,d);return d}function k(a,c){q.removeBlobs(a,function(a){var d=q.deconstructPacket(a);a=l(d.packet);d=d.buffers;d.unshift(a);c(d)})}function m(){this.reconstructor=
null}function p(a){this.reconPack=a;this.buffers=[]}var n=a("debug")("socket.io-parser"),t=a("json3");a("isarray");d=a("component-emitter");var q=a("./binary"),w=a("./is-buffer");c.protocol=4;c.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");c.CONNECT=0;c.DISCONNECT=1;c.EVENT=2;c.ACK=3;c.ERROR=4;c.BINARY_EVENT=5;c.BINARY_ACK=6;c.Encoder=e;c.Decoder=m;e.prototype.encode=function(a,d){n("encoding packet %j",a);if(c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)k(a,d);else{var e=
l(a);d([e])}};d(m.prototype);m.prototype.add=function(a){if("string"==typeof a){a:{var d={},e=0;d.type=Number(a.charAt(0));if(null==c.types[d.type])a={type:c.ERROR,data:"parser error"};else{if(c.BINARY_EVENT==d.type||c.BINARY_ACK==d.type){for(var k="";"-"!=a.charAt(++e)&&(k+=a.charAt(e),e!=a.length););if(k!=Number(k)||"-"!=a.charAt(e))throw Error("Illegal attachments");d.attachments=Number(k)}if("/"==a.charAt(e+1))for(d.nsp="";++e;){k=a.charAt(e);if(","==k)break;d.nsp+=k;if(e==a.length)break}else d.nsp=
"/";k=a.charAt(e+1);if(""!==k&&Number(k)==k){for(d.id="";++e;){k=a.charAt(e);if(null==k||Number(k)!=k){--e;break}d.id+=a.charAt(e);if(e==a.length)break}d.id=Number(d.id)}if(a.charAt(++e))try{d.data=t.parse(a.substr(e))}catch(ea){a={type:c.ERROR,data:"parser error"};break a}n("decoded %s as %j",a,d);a=d}}c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type?(this.reconstructor=new p(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(w(a)||a.base64)if(this.reconstructor){if(a=
this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};m.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};p.prototype.takeBinaryData=function(a){this.buffers.push(a);return this.buffers.length==this.reconPack.attachments?(a=q.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};p.prototype.finishedReconstruction=
function(){this.reconPack=null;this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(a,d,c){(function(a){d.exports=function(c){return a.Buffer&&a.Buffer.isBuffer(c)||a.ArrayBuffer&&c instanceof ArrayBuffer}}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],49:[function(a,d,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(a,d,c){(function(a){(function(){function e(a,
c){function d(a){if(d[a]!==fa)return d[a];var e;if("bug-string-char-index"==a)e=!1;else if("json"==a)e=d("json-stringify")&&d("json-parse");else{var k;if("json-stringify"==a){e=c.stringify;var n="function"==typeof e&&O;if(n){(k=function(){return 1}).toJSON=k;try{n="0"===e(0)&&"0"===e(new l)&&'""'==e(new m)&&e(M)===fa&&e(fa)===fa&&e()===fa&&"1"===e(k)&&"[1]"==e([k])&&"[null]"==e([fa])&&"null"==e(null)&&"[null,null,null]"==e([fa,M,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==e({a:[k,
!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===e(null,k)&&"[\n 1,\n 2\n]"==e([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==e(new q(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==e(new q(864E13))&&'"-000001-01-01T00:00:00.000Z"'==e(new q(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==e(new q(-1))}catch(eb){n=!1}}e=n}if("json-parse"==a){e=c.parse;if("function"==typeof e)try{if(0===e("0")&&!e(!1)){k=e('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var p=5==k.a.length&&1===k.a[0];if(p){try{p=!e('"\t"')}catch(eb){}if(p)try{p=
1!==e("01")}catch(eb){}if(p)try{p=1!==e("1.")}catch(eb){}}}}catch(eb){p=!1}e=p}}return d[a]=!!e}a||(a=p.Object());c||(c=p.Object());var l=a.Number||p.Number,m=a.String||p.String,n=a.Object||p.Object,q=a.Date||p.Date,w=a.SyntaxError||p.SyntaxError,t=a.TypeError||p.TypeError,x=a.Math||p.Math,K=a.JSON||p.JSON;"object"==typeof K&&K&&(c.stringify=K.stringify,c.parse=K.parse);var n=n.prototype,M=n.toString,W,Ea,fa,O=new q(-0xc782b5b800cec);try{O=-109252==O.getUTCFullYear()&&0===O.getUTCMonth()&&1===O.getUTCDate()&&
10==O.getUTCHours()&&37==O.getUTCMinutes()&&6==O.getUTCSeconds()&&708==O.getUTCMilliseconds()}catch(Za){}if(!d("json")){var pa=d("bug-string-char-index");if(!O)var xa=x.floor,Ub=[0,31,59,90,120,151,181,212,243,273,304,334],$a=function(a,c){return Ub[c]+365*(a-1970)+xa((a-1969+(c=+(1<c)))/4)-xa((a-1901+c)/100)+xa((a-1601+c)/400)};(W=n.hasOwnProperty)||(W=function(a){var c={},d;(c.__proto__=null,c.__proto__={toString:1},c).toString!=M?W=function(a){var c=this.__proto__;a=a in(this.__proto__=null,this);
this.__proto__=c;return a}:(d=c.constructor,W=function(a){var c=(this.constructor||d).prototype;return a in this&&!(a in c&&this[a]===c[a])});c=null;return W.call(this,a)});Ea=function(a,c){var d=0,e,l,m;(e=function(){this.valueOf=0}).prototype.valueOf=0;l=new e;for(m in l)W.call(l,m)&&d++;e=l=null;d?Ea=2==d?function(a,c){var d={},e="[object Function]"==M.call(a),k;for(k in a)e&&"prototype"==k||W.call(d,k)||!(d[k]=1)||!W.call(a,k)||c(k)}:function(a,c){var d="[object Function]"==M.call(a),e,k;for(e in a)d&&
"prototype"==e||!W.call(a,e)||(k="constructor"===e)||c(e);(k||W.call(a,e="constructor"))&&c(e)}:(l="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),Ea=function(a,c){var d="[object Function]"==M.call(a),e,m=!d&&"function"!=typeof a.constructor&&k[typeof a.hasOwnProperty]&&a.hasOwnProperty||W;for(e in a)d&&"prototype"==e||!m.call(a,e)||c(e);for(d=l.length;e=l[--d];m.call(a,e)&&c(e));});return Ea(a,c)};if(!d("json-stringify")){var Fc={92:"\\\\",
34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},ma=function(a,c){return("000000"+(c||0)).slice(-a)},fb=function(a){for(var c='"',d=0,e=a.length,k=!pa||10<e,l=k&&(pa?a.split(""):a);d<e;d++){var m=a.charCodeAt(d);switch(m){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=Fc[m];break;default:c=32>m?c+("\\u00"+ma(2,m.toString(16))):c+(k?l[d]:a.charAt(d))}}return c+'"'},gb=function(a,c,d,e,k,l,m){var n,q,p,w,x,K,I,Za,ya;try{n=c[a]}catch(Y){}if("object"==typeof n&&n)if(q=M.call(n),"[object Date]"!=
q||W.call(n,"toJSON"))"function"==typeof n.toJSON&&("[object Number]"!=q&&"[object String]"!=q&&"[object Array]"!=q||W.call(n,"toJSON"))&&(n=n.toJSON(a));else if(n>-1/0&&n<1/0){if($a){w=xa(n/864E5);for(q=xa(w/365.2425)+1970-1;$a(q+1,0)<=w;q++);for(p=xa((w-$a(q,0))/30.42);$a(q,p+1)<=w;p++);w=1+w-$a(q,p);x=(n%864E5+864E5)%864E5;K=xa(x/36E5)%24;I=xa(x/6E4)%60;Za=xa(x/1E3)%60;x%=1E3}else q=n.getUTCFullYear(),p=n.getUTCMonth(),w=n.getUTCDate(),K=n.getUTCHours(),I=n.getUTCMinutes(),Za=n.getUTCSeconds(),
x=n.getUTCMilliseconds();n=(0>=q||1E4<=q?(0>q?"-":"+")+ma(6,0>q?-q:q):ma(4,q))+"-"+ma(2,p+1)+"-"+ma(2,w)+"T"+ma(2,K)+":"+ma(2,I)+":"+ma(2,Za)+"."+ma(3,x)+"Z"}else n=null;d&&(n=d.call(c,a,n));if(null===n)return"null";q=M.call(n);if("[object Boolean]"==q)return""+n;if("[object Number]"==q)return n>-1/0&&n<1/0?""+n:"null";if("[object String]"==q)return fb(""+n);if("object"==typeof n){for(a=m.length;a--;)if(m[a]===n)throw t();m.push(n);ya=[];c=l;l+=k;if("[object Array]"==q){p=0;for(a=n.length;p<a;p++)q=
gb(p,n,d,e,k,l,m),ya.push(q===fa?"null":q);a=ya.length?k?"[\n"+l+ya.join(",\n"+l)+"\n"+c+"]":"["+ya.join(",")+"]":"[]"}else Ea(e||n,function(a){var c=gb(a,n,d,e,k,l,m);c!==fa&&ya.push(fb(a)+":"+(k?" ":"")+c)}),a=ya.length?k?"{\n"+l+ya.join(",\n"+l)+"\n"+c+"}":"{"+ya.join(",")+"}":"{}";m.pop();return a}};c.stringify=function(a,c,d){var e,l,m,n;if(k[typeof c]&&c)if("[object Function]"==(n=M.call(c)))l=c;else if("[object Array]"==n){m={};for(var q=0,p=c.length,w;q<p;w=c[q++],(n=M.call(w),"[object String]"==
n||"[object Number]"==n)&&(m[w]=1));}if(d)if("[object Number]"==(n=M.call(d))){if(0<(d-=d%1))for(e="",10<d&&(d=10);e.length<d;e+=" ");}else"[object String]"==n&&(e=10>=d.length?d:d.slice(0,10));return gb("",(w={},w[""]=a,w),l,m,e,"",[])}}if(!d("json-parse")){var Xb=m.fromCharCode,za={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I,va,T=function(){I=va=null;throw w();},ga=function(){for(var a=va,c=a.length,d,e,k,l,m;I<c;)switch(m=a.charCodeAt(I),m){case 9:case 10:case 13:case 32:I++;
break;case 123:case 125:case 91:case 93:case 58:case 44:return d=pa?a.charAt(I):a[I],I++,d;case 34:d="@";for(I++;I<c;)if(m=a.charCodeAt(I),32>m)T();else if(92==m)switch(m=a.charCodeAt(++I),m){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:d+=za[m];I++;break;case 117:e=++I;for(k=I+4;I<k;I++)m=a.charCodeAt(I),48<=m&&57>=m||97<=m&&102>=m||65<=m&&70>=m||T();d+=Xb("0x"+a.slice(e,I));break;default:T()}else{if(34==m)break;m=a.charCodeAt(I);for(e=I;32<=m&&92!=m&&34!=m;)m=a.charCodeAt(++I);
d+=a.slice(e,I)}if(34==a.charCodeAt(I))return I++,d;T();default:e=I;45==m&&(l=!0,m=a.charCodeAt(++I));if(48<=m&&57>=m){for(48==m&&(m=a.charCodeAt(I+1),48<=m&&57>=m)&&T();I<c&&(m=a.charCodeAt(I),48<=m&&57>=m);I++);if(46==a.charCodeAt(I)){for(k=++I;k<c&&(m=a.charCodeAt(k),48<=m&&57>=m);k++);k==I&&T();I=k}m=a.charCodeAt(I);if(101==m||69==m){m=a.charCodeAt(++I);43!=m&&45!=m||I++;for(k=I;k<c&&(m=a.charCodeAt(k),48<=m&&57>=m);k++);k==I&&T();I=k}return+a.slice(e,I)}l&&T();if("true"==a.slice(I,I+4))return I+=
4,!0;if("false"==a.slice(I,I+5))return I+=5,!1;if("null"==a.slice(I,I+4))return I+=4,null;T()}return"$"},ab=function(a){var c,d;"$"==a&&T();if("string"==typeof a){if("@"==(pa?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(c=[];;d||(d=!0)){a=ga();if("]"==a)break;d&&(","==a?(a=ga(),"]"==a&&T()):T());","==a&&T();c.push(ab(a))}return c}if("{"==a){for(c={};;d||(d=!0)){a=ga();if("}"==a)break;d&&(","==a?(a=ga(),"}"==a&&T()):T());","!=a&&"string"==typeof a&&"@"==(pa?a.charAt(0):a[0])&&":"==ga()||T();
c[a.slice(1)]=ab(ga())}return c}T()}return a},wb=function(a,c,d){d=vb(a,c,d);d===fa?delete a[c]:a[c]=d},vb=function(a,c,d){var e=a[c],k;if("object"==typeof e&&e)if("[object Array]"==M.call(e))for(k=e.length;k--;)wb(e,k,d);else Ea(e,function(a){wb(e,a,d)});return d.call(a,c,e)};c.parse=function(a,c){var d,e;I=0;va=""+a;d=ab(ga());"$"!=ga()&&T();I=va=null;return c&&"[object Function]"==M.call(c)?vb((e={},e[""]=d,e),"",c):d}}}c.runInContext=e;return c}var k={"function":!0,object:!0},m=k[typeof c]&&c&&
!c.nodeType&&c,p=k[typeof window]&&window||this,n=m&&k[typeof d]&&d&&!d.nodeType&&"object"==typeof a&&a;!n||n.global!==n&&n.window!==n&&n.self!==n||(p=n);if(m)e(p,m);else{var t=p.JSON,q=p.JSON3,w=!1,x=e(p,p.JSON3={noConflict:function(){w||(w=!0,p.JSON=t,p.JSON3=q,t=q=null);return x}});p.JSON={parse:x.parse,stringify:x.stringify}}}).call(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{})},{}],51:[function(a,d,c){d.exports=function(a,
c){for(var d=[],e=(c=c||0)||0;e<a.length;e++)d[e-c]=a[e];return d}},{}]},{},[31])(31)});(function(g,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):function(){var d=g.Ractive,c=a();c.noConflict=function(){g.Ractive=d;return c};return g.Ractive=c}()})(this,function(){function g(){return P.createDocumentFragment()}function a(b){var h;if(b&&"boolean"!==typeof b)return ha&&P&&b?b.nodeType?b:"string"===typeof b&&(h=P.getElementById(b),!h&&P.querySelector&&(h=P.querySelector(b)),h&&h.nodeType)?h:b[0]&&b[0].nodeType?
b[0]:null:null}function d(b){b&&"unknown"!==typeof b.parentNode&&b.parentNode&&b.parentNode.removeChild(b);return b}function c(b){return null!=b&&b.toString?""+b:""}function e(b){return c(b).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(b){return b.replace(xg,function(b){return b.charAt(1).toUpperCase()})}function k(b){return b.replace(yg,function(b){return"-"+b.toLowerCase()})}function m(b){for(var h=[],f=arguments.length-1;0<f--;)h[f]=arguments[f+1];var a;h.forEach(function(h){for(a in h)bb.call(h,
a)&&(b[a]=h[a])});return b}function p(b){for(var h=[],f=arguments.length-1;0<f--;)h[f]=arguments[f+1];h.forEach(function(h){for(var f in h)!bb.call(h,f)||f in b||(b[f]=h[f])});return b}function n(b){return"[object Array]"===Xd.call(b)}function t(b,h){return null===b&&null===h?!0:"object"===typeof b||"object"===typeof h?!1:b===h}function q(b){return!isNaN(parseFloat(b))&&isFinite(b)}function w(b){return b&&"[object Object]"===Xd.call(b)}function x(){}function K(b,h){return b.replace(/%s/g,function(){return h.shift()})}
function M(b){for(var h=[],f=arguments.length-1;0<f--;)h[f]=arguments[f+1];b=K(b,h);throw Error(b);}function U(){Z.DEBUG&&Gc.apply(null,arguments)}function ea(b){for(var h=[],f=arguments.length-1;0<f--;)h[f]=arguments[f+1];b=K(b,h);Yb(b,h)}function aa(b){for(var h=[],f=arguments.length-1;0<f--;)h[f]=arguments[f+1];b=K(b,h);Yd[b]||(Yd[b]=!0,Yb(b,h))}function N(){Z.DEBUG&&ea.apply(null,arguments)}function ba(){Z.DEBUG&&aa.apply(null,arguments)}function wa(b,h,f){return(h=Ec(b,h,f))?h[b][f]:null}function Ec(b,
h,f){for(;h;){if(f in h[b])return h;if(h.isolated)return null;h=h.parent}}function db(b,h,f,a){if(b===h)return null;if(a){if(f=wa("interpolators",f,a))return f(b,h)||null;M(hb(a,"interpolator"))}return Zb.number(b,h)||Zb.array(b,h)||Zb.object(b,h)||null}function vg(b){return function(){return b}}function Ya(b,h){-1===b.indexOf(h)&&b.push(h)}function W(b,h){for(var f=0,a=b.length;f<a;f++)if(b[f]==h)return!0;return!1}function Ea(b){return"string"===typeof b?[b]:void 0===b?[]:b}function fa(b){return b[b.length-
1]}function O(b,h){if(b){var f=b.indexOf(h);-1!==f&&b.splice(f,1)}}function pa(b){for(var h=[],f=b.length;f--;)h[f]=b[f];return h}function xa(b,h){return function(){for(var f;f=b.shift();)f(h)}}function Ub(b,h,f,a){var r;if(h===b)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(h instanceof Ba)h.then(f,a);else if(!h||"object"!==typeof h&&"function"!==typeof h)f(h);else{try{r=h.then}catch(xb){a(xb);return}if("function"===typeof r){var c,d,e;d=function(h){c||
(c=!0,Ub(b,h,f,a))};e=function(b){c||(c=!0,a(b))};try{r.call(h,d,e)}catch(xb){c||(a(xb),c=!0)}}else f(h)}}function $a(b){b.detach()}function Fc(b){b.detachNodes()}function ma(b){!b.ready||b.outros.length||b.outroChildren||(b.outrosComplete||(b.outrosComplete=!0,b.parent&&!b.parent.outrosComplete?b.parent.decrementOutros(b):b.detachNodes()),b.intros.length||b.totalChildren||("function"===typeof b.callback&&b.callback(),b.parent&&!b.notifiedTotal&&(b.notifiedTotal=!0,b.parent.decrementTotal())))}function fb(b,
h){if(h){for(var f=b.children.length;f--;)h=fb(b.children[f],h);return h=h.concat(b.outros)}h=[];for(f=b;f.parent;)f=f.parent;return fb(f,h)}function gb(b){b.dispatch()}function Xb(){var b=Q.immediateObservers;Q.immediateObservers=[];b.forEach(gb);var h=Q.fragments.length,f,b=Q.fragments;Q.fragments=[];var a=Q.ractives;for(Q.ractives=[];h--;){f=b[h];var c=f.ractive;Object.keys(c.viewmodel.changes).length&&$d.fire(c,c.viewmodel.changes);c.viewmodel.changes={};O(a,c);f.update()}for(h=a.length;h--;)b=
a[h],$d.fire(b,b.viewmodel.changes),b.viewmodel.changes={};Q.transitionManager.ready();b=Q.deferredObservers;Q.deferredObservers=[];b.forEach(gb);a=Q.tasks;Q.tasks=[];for(h=0;h<a.length;h+=1)a[h]();if(Q.fragments.length||Q.immediateObservers.length||Q.deferredObservers.length||Q.ractives.length||Q.tasks.length)return Xb()}function za(b){return"string"===typeof b?b.replace(zg,"\\$&"):b}function I(b){var h=[],f;for(b=b?b.replace(Hc,".$1"):"";f=Ag.exec(b);)f=f.index+f[1].length,h.push(b.substr(0,f)),
b=b.substr(f+1);h.push(b);return h}function va(b){return"string"===typeof b?b.replace(Bg,"$1$2"):b}function T(b,h){if(!/this/.test(b.toString()))return b;var f=b.bind(h),a;for(a in b)f[a]=b[a];return f}function ga(b,h){for(var f=J.start(b,!0),a=h.length;a--;){var c=h[a],d=c[0],c=c[1];"function"===typeof c&&(c=T(c,b));d.set(c)}J.end();return f}function ab(b,h,f){void 0===f&&(f=b.viewmodel);return Cg.test(h)?f.findMatches(I(h)):[f.joinAll(I(h))]}function wb(b,h,f){var a=[];if(w(h)){var c=function(f){h.hasOwnProperty(f)&&
a.push.apply(a,ab(b,f).map(function(b){return[b,h[f]]}))},d;for(d in h)c(d)}else a.push.apply(a,ab(b,h).map(function(b){return[b,f]}));return a}function vb(b,h,f){if("string"!==typeof h||!q(f))throw Error("Bad arguments");h=wb(b,h,f);return ga(b,h.map(function(b){var h=b[0];b=b[1];var f=h.get();if(!q(b)||!q(f))throw Error("Cannot add to a non-numeric value");return[h,f+b]}))}function Za(b,h,f,a){a=a||{};var r;a.easing&&(r="function"===typeof a.easing?a.easing:b.easing[a.easing]);a={easing:r||Dg,duration:"duration"in
a?a.duration:400,complete:a.complete||x,step:a.step||x};r=h.get();if(t(r,f))return a.complete(a.to),Ic;b=db(r,f,b,a.interpolator);return b?h.animate(r,f,a,b):(J.start(),h.set(f),J.end(),Ic)}function wg(b,h){return b.compareDocumentPosition?b.compareDocumentPosition(h)&2?1:-1:Nd(b,h)}function Nd(b,h){for(var a=Pd(b.component||b._ractive.proxy),r=Pd(h.component||h._ractive.proxy),c=fa(a),d=fa(r),e;c&&c===d;)a.pop(),r.pop(),e=c,c=fa(a),d=fa(r);var c=c.component||c,d=d.component||d,g=c.parentFragment,
k=d.parentFragment;if(g===k)return g=g.items.indexOf(c),k=k.items.indexOf(d),g-k||a.length-r.length;if(d=e.iterations)return g=d.indexOf(g),k=d.indexOf(k),g-k||a.length-r.length;throw Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!");}function Od(b){var h=b.parentFragment;if(h||b.component&&(h=b.component.parentFragment))return h.owner}function Pd(b){var h=[b];for(b=Od(b);b;)h.push(b),
b=Od(b);return h}function eb(b){var h,a,r,c,d;h=I(b);(b=$b[h.length])||(b=ya(h.length));c=[];a=function(b,a){return b?"*":h[a]};for(r=b.length;r--;)d=b[r].map(a).join("."),c.hasOwnProperty(d)||(c.push(d),c[d]=!0);return c}function ya(b){var h="",a,r,c,d,e,g,k;if(!$b[b]){for(r=[];h.length<b;)h+=1;h=parseInt(h,2);c=function(b){return"1"===b};for(d=0;d<=h;d+=1){for(a=d.toString(2);a.length<b;)a="0"+a;k=[];g=a.length;for(e=0;e<g;e++)k.push(c(a[e]));r[d]=k}$b[b]=r}return $b[b]}function Qd(b,h,a){void 0===
a&&(a={});if(h)return a.event?a.event.name=h:a.event={name:h,_noArg:!0},h=Rd(h),Sd(b,h,a.event,a.args,!0)}function Rd(b){return Jc.hasOwnProperty(b)?Jc[b]:Jc[b]=eb(b)}function Sd(b,h,a,r,c){void 0===c&&(c=!1);var f,d,e=!0;b.event&&b._eventQueue.push(b.event);b.event=a;for(d=h.length;0<=d;d--)if(f=b._subs[h[d]]){var Aa=b,g=a,k=r,l=null,m=!1;g&&!g._noArg&&(k=[g].concat(k));f=f.slice();for(var n=0,q=f.length;n<q;n+=1)f[n].off||!1!==f[n].apply(Aa,k)||(m=!0);g&&!g._noArg&&m&&(l=g.original)&&(l.preventDefault&&
l.preventDefault(),l.stopPropagation&&l.stopPropagation());e=!m&&e}b.event=b._eventQueue.length?b._eventQueue.pop():null;b.parent&&e&&(c&&b.component&&(h=Rd(b.component.name+"."+h[h.length-1]),a&&!a.component&&(a.component=b)),Sd(b.parent,h,a,r));return e}function Td(b){throw Error("An index or key reference ("+b+") cannot have child properties");}function Ud(b,h){for(var a=b.findContext().root,r=I(h),c=r[0],d,e,g;b;){if(b.isIteration){if(c===b.parent.keyRef)return 1<r.length&&Td(c),b.context.getKeyModel(b.key);
if(c===b.parent.indexRef)return 1<r.length&&Td(c),b.context.getKeyModel(b.index)}if(((g=b.owner.aliases)||(g=b.aliases))&&g.hasOwnProperty(c)){var k=g[c];if(1===r.length)return k;if("function"===typeof k.joinAll)return k.joinAll(r.slice(1))}if(b.context){if(!b.isRoot||b.ractive.component)d=!0;if(b.context.has(c))return e?a.createLink(c,b.context.joinKey(r.shift()),c).joinAll(r):b.context.joinAll(r)}b.componentParent&&!b.ractive.isolated?(b=b.componentParent,e=!0):b=b.parent}if(!d)return a.joinAll(r)}
function Vd(){var b=yb.pop();zb=yb[yb.length-1];return b}function Ra(b){zb&&zb.push(b)}function Vb(b){b.bind()}function Wd(b){b.cancel()}function Y(b){b.handleChange()}function Wb(b){b.mark()}function Ab(b){b.marked()}function ae(b){b.notifiedUpstream()}function Kc(b){b.render()}function Lc(b){b.teardown()}function Ha(b){b.unbind()}function Bb(b){b.unrender()}function be(b){b.unrender(!0)}function ib(b){b.update()}function ce(b){return b.toString()}function de(b){return b.toString(!0)}function ee(b){b.updateFromBindings(!0)}
function fe(b){for(var h=b.length;h--;)if(b[h].bound){var a=b[h].owner;if(a)return{value:"checked"===a.name?a.node.checked:a.node.value}}}function jb(b){if(b){var a=Mc[b];Mc[b]=[];for(var f=a.length;f--;)a[f]();a=Nc[b];Nc[b]=[];for(f=a.length;f--;)a[f].model.register(a[f].item)}else jb("early"),jb("mark")}function Sa(b,a,f){b=b.r||b;if(!b||"string"!==typeof b||"."===b||"@"===b[0]||(a||f).isKey||(a||f).isKeypath)return a;b=b.split("/");b=I(b[b.length-1]);for(var h=a||f,c=b.length,d=!0,e=!1;h&&c--;)h.shuffling&&
(e=!0),b[c]!=h.key&&(d=!1),h=h.parent;return!a&&d&&e?f:a&&!d&&e?f:a}function ge(){J.start();var b=he(),a,f;for(a=0;a<Cb.length;a+=1)f=Cb[a],f.tick(b)||Cb.splice(a--,1);J.end();Cb.length?ie(ge):je=!1}function Eg(b){var a;Oc[b]||(a=b?b+".":"",Oc[b]=function(h,r){var f;if("string"===typeof h)return f={},f[a+h]=r,f;if("object"===typeof h){if(a){f=b;var c={},d;if(f){f+=".";for(d in h)h.hasOwnProperty(d)&&(c[f+d]=h[d]);f=c}else f=h}else f=h;return f}});return Oc[b]}function Fg(b){for(var a=[],f=0;f<b.length;f++)a[f]=
(b.childByKey[f]||{}).value;return a}function qa(b,a){var h=b.findContext();if("."===a||"this"===a)return h;if(0===a.indexOf("@keypath")){var r=ke.exec(a);return r&&r[1]&&(r=qa(b,r[1]))?r.getKeypathModel():h.getKeypathModel()}if(0===a.indexOf("@rootpath")){for(;h.isRoot&&h.ractive.component;)h=h.ractive.component.parentFragment.findContext();return(r=ke.exec(a))&&r[1]&&(r=qa(b,r[1]))?r.getKeypathModel(b.ractive.root):h.getKeypathModel(b.ractive.root)}if("@index"===a||"@key"===a)return h=b.findRepeatingFragment(),
h.isIteration?h.context.getKeyModel(h["i"===a[1]?"index":"key"]):void 0;if("@this"===a)return b.ractive.viewmodel.getRactiveModel();if("@global"===a)return le;if("~"===a[0])return b.ractive.viewmodel.joinAll(I(a.slice(2)));if("."===a[0]){for(r=a.split("/");"."===r[0]||".."===r[0];)".."===r.shift()&&(h=h.parent);a=r.join("/");"."===a[0]&&(a=a.slice(1));return h.joinAll(I(a))}return Ud(b,a)}function me(b){for(var a={},f={};b;){if(b.parent&&(b.parent.indexRef||b.parent.keyRef)){var r=b.parent.indexRef;
!r||r in f||(f[r]=b.index);!(r=b.parent.keyRef)||r in a||(a[r]=b.key)}b=b.componentParent&&!b.ractive.isolated?b.componentParent:b.parent}return{key:a,index:f}}function ne(b,a,f){var h=[],c,d,e;a=Gg(b,a,f);if(!a)return null;d=a.length-2-a[1];f=Math.min(b,a[0]);c=f+a[1];h.startIndex=f;for(e=0;e<f;e+=1)h.push(e);for(;e<c;e+=1)h.push(-1);for(;e<b;e+=1)h.push(e+d);h.touchedFrom=0!==d?a[0]:b;return h}function Gg(b,a,f){switch(a){case "splice":void 0!==f[0]&&0>f[0]&&(f[0]=b+Math.max(f[0],-b));for(void 0===
f[0]&&(f[0]=0);2>f.length;)f.push(b-f[0]);"number"!==typeof f[1]&&(f[1]=b-f[0]);f[1]=Math.min(f[1],b-f[0]);return f;case "sort":case "reverse":return null;case "pop":return b?[b-1,1]:[0,0];case "push":return[b,0].concat(f);case "shift":return[0,b?1:0];case "unshift":return[0,0].concat(f)}}function na(b){function a(a,h){var f=a.get();if(!n(f)){if(void 0===f){var f=[],r=oe[b].apply(f,h),c=J.start(this,!0).then(function(){return r});a.set(f);J.end();return c}throw Error("shuffle array method "+b+" called on non-array at "+
a.getKeypath());}var c=ne(f.length,b,h),d=oe[b].apply(f,h),f=J.start(this,!0).then(function(){return d});f.result=d;c?a.shuffle(c):a.set(d);J.end();return f}return{path:function(b){for(var h=[],f=arguments.length-1;0<f--;)h[f]=arguments[f+1];return a(this.viewmodel.joinAll(I(b)),h)},model:a}}function Hg(b){if(!b)return null;if(!0===b)return JSON.stringify;if("function"===typeof b)return b;if("string"===typeof b)return pe[b]||(pe[b]=function(a){return a[b]});throw Error("If supplied, options.compare must be a string, function, or `true`");
}function qe(b,a,f,r){b=J.start(b,!0);var h=a.get();if(!n(h)||!n(f))throw Error("You cannot merge an array with a non-array");r=Hg(r&&r.compare);a.merge(f,r);J.end();return b}function re(b,a){a.parent&&a.parent.wrapper&&a.parent.adapt();var h=J.start(b,!0);a.mark();a.registerChange(a.getKeypath(),a.get());if(!a.isRoot)for(var r=a.parent,c=a.key;r&&!r.isRoot;)r.clearUnresolveds&&r.clearUnresolveds(c),c=r.key,r=r.parent;a.notifyUpstream();J.end();Ig.fire(b,a);return h}function Pc(b,a,f){var h=[];if(w(a))for(var c in a)a.hasOwnProperty(c)&&
h.push([ca(b,c).model,a[c]]);else h.push([ca(b,a).model,f]);return h}function Jg(b){return b?(b=qa(this._element.parentFragment,b))?b.get(!0):void 0:this._element.parentFragment.findContext().get(!0)}function Kg(b,a){var h=ca(this,b),r=h.model,h=h.instance;return r?r.getKeypath(a||h):b}function ca(b,a){var h=b._element.parentFragment;return"string"!==typeof a?{model:h.findContext(),instance:a}:{model:qa(h,a),instance:h.ractive}}function Lg(b,a){void 0===a&&(a=1);if(!q(a))throw Error("Bad arguments");
return ga(this.ractive,Pc(this,b,a).map(function(b){var a=b[0];b=b[1];var h=a.get();if(!q(b)||!q(h))throw Error("Cannot add non-numeric value");return[a,h+b]}))}function Mg(b,a,f){b=ca(this,b).model;return Za(this.ractive,b,a,f)}function Ng(b,a){var h=ca(this,b).model,r=ca(this,a).model,c=J.start(this.ractive,!0);r.link(h,b);J.end();return c}function Og(b,a,f){return qe(this.ractive,ca(this,b).model,a,f)}function Pg(b){return Qg(ca(this,b).model,[])}function Rg(b){for(var a=[],f=arguments.length-
1;0<f--;)a[f]=arguments[f+1];return Sg(ca(this,b).model,a)}function Tg(b){return Ug(ca(this,b).model,[])}function Vg(b,a){return ga(this.ractive,Pc(this,b,a))}function Wg(b){return Xg(ca(this,b).model,[])}function Yg(b,a,f){for(var h=[],c=arguments.length-3;0<c--;)h[c]=arguments[c+3];h.unshift(a,f);return Zg(ca(this,b).model,h)}function $g(b){return ah(ca(this,b).model,[])}function bh(b,a){void 0===a&&(a=1);if(!q(a))throw Error("Bad arguments");return ga(this.ractive,Pc(this,b,a).map(function(b){var a=
b[0];b=b[1];var h=a.get();if(!q(b)||!q(h))throw Error("Cannot add non-numeric value");return[a,h-b]}))}function ch(b){b=ca(this,b).model;return ga(this.ractive,[[b,!b.get()]])}function dh(b){b=ca(this,b).model;var a=J.start(this.ractive,!0);b.owner&&b.owner._link&&b.owner.unlink();J.end();return a}function eh(b){for(var a=[],f=arguments.length-1;0<f--;)a[f]=arguments[f+1];return fh(ca(this,b).model,a)}function gh(b){return re(this.ractive,ca(this,b).model)}function hh(b,a){var h=ca(this,b).model,
r=J.start(this.ractive,!0);h.updateFromBindings(a);J.end();return r}function ih(){return!!ac(this).model}function jh(b){var a=ac(this),f=a.model,a=a.instance;if(f)return f.getKeypath(b||a)}function kh(){var b=ac(this).model;if(b)return b.get(!0)}function ac(b){b=b._element;return{model:b.binding&&b.binding.model,instance:b.parentFragment.ractive}}function lh(b){var a=ac(this).model;return ga(this.ractive,[[a,b]])}function mh(){ba("Object property keypath is deprecated, please use resolve() instead.");
return this.resolve()}function nh(){ba("Object property rootpath is deprecated, please use resolve( ractive.root ) instead.");return this.resolve(this.ractive.root)}function oh(){ba("Object property context is deprecated, please use get() instead.");return this.get()}function ph(){ba('Object property index is deprecated, you can use get( "indexName" ) instead.');return me(this._element.parentFragment).index}function qh(){ba('Object property key is deprecated, you can use get( "keyName" ) instead.');
return me(this._element.parentFragment).key}function se(b,a){Db(b,{_element:{value:a},ractive:{value:a.parentFragment.ractive},resolve:{value:Kg},get:{value:Jg},add:{value:Lg},animate:{value:Mg},link:{value:Ng},merge:{value:Og},pop:{value:Pg},push:{value:Rg},reverse:{value:Tg},set:{value:Vg},shift:{value:Wg},sort:{value:$g},splice:{value:Yg},subtract:{value:bh},toggle:{value:ch},unlink:{value:dh},unshift:{value:eh},update:{value:gh},updateModel:{value:hh},isBound:{value:ih},getBindingPath:{value:jh},
getBinding:{value:kh},setBinding:{value:lh},keypath:{get:mh},rootpath:{get:nh},context:{get:oh},index:{get:ph},key:{get:qh}});return b}function te(b){"string"===typeof b&&ue&&(b=ue.call(document,b));return b&&b._ractive?se({},b._ractive.proxy):{}}function ve(b){rh.fire(b);b.findAllComponents("*").forEach(function(b){ve(b.instance)})}function we(b,a,f,r){var h=b.viewmodel,c=I(a),d=c.indexOf("*");r.keypath=a;if(!~d){var d=c[0],e;""===d||h.has(d)?e=h.joinAll(c):b.component&&!b.isolated&&(e=qa(b.component.parentFragment,
d))&&(h.map(d,e),e=h.joinAll(c));return new kb(b,e,f,r)}h=0===d?h:h.joinAll(c.slice(0,d));return new lb(b,h,c.splice(d),f,r)}function sh(){return-1}function xe(b){return b.trim()}function ye(b){return""!==b}function bc(b){return(b?Qc.filter(function(a){return~b.indexOf(a.id)}):Qc).reduce(function(b,a){return""+b+"\n\n/* {"+a.id+"} */\n"+a.styles},"/* Ractive.js component styles */")}function ze(b,h,f,r){var c=b.transitionsEnabled;b.noIntro&&(b.transitionsEnabled=!1);var d=J.start(b,!0);J.scheduleTask(function(){return th.fire(b)},
!0);if(b.fragment.rendered)throw Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");f=a(f)||b.anchor;b.el=h;b.anchor=f;b.cssId&&P&&Rc&&(Ae?Ta.styleSheet.cssText=bc(null):Ta.innerHTML=bc(null),Rc=!1);h&&((h.__ractive_instances__||(h.__ractive_instances__=[])).push(b),f?(r=P.createDocumentFragment(),b.fragment.render(r),h.insertBefore(r,f)):b.fragment.render(h,r));J.end();b.transitionsEnabled=c;return d.then(function(){return uh.fire(b)})}function vh(b){return b.trim()}
function wh(b){return b.str}function xh(b,a){var h='[data-ractive-css~="{'+a+'}"]';return Be.test(b)?b.replace(Be,h):b.replace(yh,"").replace(zh,function(b,a){if(Ah.test(a))return b;var f=a.split(",").map(vh).map(function(b){for(var a=[],f;f=Bh.exec(b);)a.push({str:f[0],base:f[1],modifiers:f[2]});b=a.map(wh);f=[];for(var r=a.length;r--;){var c=b.slice(),d=a[r];c[r]=d.base+h+d.modifiers||"";d=b.slice();d[r]=h+" "+d[r];f.push(c.join(" "),d.join(" "))}return f.join(", ")}).join(", ")+" ";return b.replace(a,
f)})}function Ua(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function Ce(b,a){a&&a.constructor!==Object&&"function"!==typeof a&&("object"!==typeof a?M("data option must be an object or a function, `"+a+"` is not valid"):N("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"));var h="function"===typeof b,r="function"===typeof a;a||h||(a={});return h||r?function(){var f=r?De(a,this):a,c=h?De(b,this):
b;return Ee(f,c)}:Ee(a,b)}function De(b,a){var h=b.call(a);if(h)return"object"!==typeof h&&M("Data function must return an object"),h.constructor!==Object&&ba("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),h}function Ee(b,a){if(b&&a){for(var h in a)h in b||(b[h]=a[h]);return b}return b||a}function Sc(b,a){void 0===a&&(a=0);for(var h=Array(a);a--;)h[a]="_"+a;return(new Function([],"return function ("+h.join(",")+"){return("+b+
");};"))()}function Tc(b,a){var h,r="return ("+b.replace(Ch,function(b,a){h=!0;return'__ractive.get("'+a+'")'})+");";h&&(r="var __ractive = this; "+r);r=new Function(r);return h?r.bind(a):r}function cc(b,a){if(Eb[b])return Eb[b];var h;Uc(Sc,"new expression function",Fe);h=Sc(b,a);return Eb[b]=h}function Ge(b){if(b){var a=b.e;a&&Object.keys(a).forEach(function(b){Eb[b]||(Eb[b]=a[b])})}}function Dh(b){var a,f,r;if(!b.matchString("="))return null;a=b.pos;b.allowWhitespace();f=b.matchPattern(He);if(!f)return b.pos=
a,null;if(!b.matchPattern(Eh))return null;r=b.matchPattern(He);if(!r)return b.pos=a,null;b.allowWhitespace();return b.matchString("=")?[f,r]:(b.pos=a,null)}function Ie(b){var a;return(a=b.matchPattern(Fh))?{t:25,v:a}:null}function Vc(b){return b.replace(Gh,"\\$&")}function dc(b,a){return b.search(Je[a.join()]||(Je[a.join()]=new RegExp(a.map(Vc).join("|"))))}function Wc(b){return b.replace(Hh,function(b,a){var h;return(h="#"!==a[0]?Ke[a]:"x"===a[1]?parseInt(a.substring(2),16):parseInt(a.substring(1),
10))?Ih(h?10===h?32:128>h?h:159>=h?Jh[h-128]:55296>h?h:57343>=h?ec:65535>=h?h:Le?65536<=h&&131071>=h||131072<=h&&196607>=h?h:ec:ec:ec):b})}function Xc(b){return b.replace(Kh,"&amp;").replace(Lh,"&lt;").replace(Mh,"&gt;")}function Me(b){var a;return(a=b.matchPattern(Nh))?{t:20,v:a}:null}function Ne(b){return function(a){for(var h='"',r=!1,c;!r;)(c=a.matchPattern(Oe)||a.matchPattern(Pe)||a.matchString(b))?h='"'===c?h+'\\"':"\\'"===c?h+"'":h+c:(c=a.matchPattern(Qe))?h+="\\u"+("000"+c.charCodeAt(1).toString(16)).slice(-4):
r=!0;return JSON.parse(h+'"')}}function Yc(b){var a,f;a=b.pos;return b.matchString('"')?(f=Oh(b),b.matchString('"')?{t:21,v:f}:(b.pos=a,null)):b.matchString("'")?(f=Ph(b),b.matchString("'")?{t:21,v:f}:(b.pos=a,null)):null}function Re(b){var a;return(a=Yc(b))?Qh.test(a.v)?a.v:'"'+a.v.replace(/"/g,'\\"')+'"':(a=Me(b))?a.v:(a=b.matchPattern(Zc))?a:null}function Rh(b){var a,f,r;a=b.pos;b.allowWhitespace();r="'"!==b.nextChar()&&'"'!==b.nextChar();f=Re(b);if(null===f)return b.pos=a,null;b.allowWhitespace();
if(r&&(","===b.nextChar()||"}"===b.nextChar()))return Zc.test(f)||b.error("Expected a valid reference, but found '"+f+"' instead."),{t:27,k:f,v:{t:30,n:f}};if(!b.matchString(":"))return b.pos=a,null;b.allowWhitespace();r=ka(b);return null===r?(b.pos=a,null):{t:27,k:f,v:r}}function Se(b){var a,f,r;a=b.pos;f=Rh(b);if(null===f)return null;f=[f];return b.matchString(",")?(r=Se(b),r?f.concat(r):(b.pos=a,null)):f}function $c(b){b.allowWhitespace();var a=ka(b);if(null===a)return null;a=[a];b.allowWhitespace();
if(b.matchString(",")){var f=$c(b);null===f&&b.error("Expected a JavaScript expression");a.push.apply(a,f)}return a}function ad(b){var a,f,r,c,d,e;a=b.pos;r=b.matchPattern(Sh);"@keypath"!==r&&"@rootpath"!==r||!b.matchPattern(Th)||((e=ad(b))||b.error("Expected a valid reference for a keypath expression"),b.allowWhitespace(),b.matchString(")")||b.error("Unclosed keypath expression"),r+="("+e.n+")");e=!r&&b.spreadArgs&&b.matchPattern(Uh);r||((f=b.matchPattern(Vh)||"",r=!f&&b.relaxedNames&&b.matchPattern(Wh)||
b.matchPattern(Xh),r||"."!==f)?!r&&f&&(r=f,f=""):(f="",r="."));if(!r)return null;if(!f&&!b.relaxedNames&&Te.test(r))return b.pos=a,null;if(!f&&bd.test(r))return r=bd.exec(r)[0],b.pos=a+r.length,{t:26,v:(e?"...":"")+r};c=(e?3:0)+(f||"").length+r.length;f=(f||"")+(r?r.replace(Hc,".$1"):"");b.matchString("(")&&(d=f.lastIndexOf("."),-1!==d&&"]"!==r[r.length-1]?(r=f.length,f=f.substr(0,d),b.pos=a+(c-(r-d))):--b.pos);return{t:30,n:(e?"...":"")+f.replace(/^this\./,"./").replace(/^this$/,".")}}function Yh(b){var a;
(a=Me(b))||(a=b.remaining(),"true"===a.substr(0,4)?(b.pos+=4,a={t:24,v:"true"}):"false"===a.substr(0,5)?(b.pos+=5,a={t:24,v:"false"}):a=null);if(!(a=a||Yc(b))){var f;a=b.pos;b.allowWhitespace();b.matchString("{")?(f=Se(b),b.allowWhitespace(),b.matchString("}")?a={t:23,m:f}:(b.pos=a,a=null)):(b.pos=a,a=null)}a||(a=b.pos,b.allowWhitespace(),b.matchString("[")?(f=$c(b),b.matchString("]")?a={t:22,m:f}:(b.pos=a,a=null)):(b.pos=a,a=null));(a=a||Ie(b)||ad(b))||(b.matchString("(")?(b.allowWhitespace(),(a=
ka(b))||b.error("Expected a JavaScript expression"),b.allowWhitespace(),b.matchString(")")||b.error("Expected closing paren"),a={t:34,x:a}):a=null);if(!a)return null;for(;a;){a:{f=b;f.strictRefinement||f.allowWhitespace();if(f.matchString(".")){f.allowWhitespace();var r=f.matchPattern(Zc);if(r){f={t:31,n:r};break a}f.error("Expected a property name")}f.matchString("[")?(f.allowWhitespace(),(r=ka(f))||f.error("Expected a JavaScript expression"),f.allowWhitespace(),f.matchString("]")||f.error("Expected ']'"),
f={t:31,x:r}):f=null}if(f)a={t:32,x:a,r:f};else if(b.matchString("("))b.allowWhitespace(),f=b.spreadArgs,b.spreadArgs=!0,r=$c(b),b.spreadArgs=f,b.allowWhitespace(),b.matchString(")")||b.error("Expected closing paren"),a={t:40,x:a},r&&(a.o=r);else break}return a}function ka(b){var a,f,r;f=Zh(b);if(!f)return null;a=b.pos;b.allowWhitespace();if(!b.matchString("?"))return b.pos=a,f;b.allowWhitespace();(a=ka(b))||b.error("Expected a JavaScript expression");b.allowWhitespace();b.matchString(":")||b.error('Expected ":"');
b.allowWhitespace();(r=ka(b))||b.error("Expected a JavaScript expression");return{t:35,o:[f,a,r]}}function fc(b){function a(b){switch(b.t){case 24:case 26:case 20:case 25:return b.v;case 21:return JSON.stringify(String(b.v));case 22:return"["+(b.m?b.m.map(a).join(","):"")+"]";case 23:return"{"+(b.m?b.m.map(a).join(","):"")+"}";case 27:return b.k+":"+a(b.v);case 33:return("typeof"===b.s?"typeof ":b.s)+a(b.o);case 36:return a(b.o[0])+("in"===b.s.substr(0,2)?" "+b.s+" ":b.s)+a(b.o[1]);case 40:if(b.spread){var h=
r++;return"(spread$"+h+" = "+a(b.x)+").apply(spread$"+h+", [].concat("+(b.o?b.o.map(function(b){return b.n&&0===b.n.indexOf("...")?a(b):"["+a(b)+"]"}).join(","):"")+") )"}return a(b.x)+"("+(b.o?b.o.map(a).join(","):"")+")";case 34:return"("+a(b.x)+")";case 32:return a(b.x)+a(b.r);case 31:return b.n?"."+b.n:"["+a(b.x)+"]";case 35:return a(b.o[0])+"?"+a(b.o[1])+":"+a(b.o[2]);case 30:return"_"+f.indexOf(b.n);default:throw Error("Expected legal JavaScript");}}var f,r=0;mb(b,f=[]);b=a(b);f=f.map(function(b){return 0===
b.indexOf("...")?b.substr(3):b});return{r:f,s:function(b){for(var a=[],f=r-1;0<=f;f--)a.push("spread$"+f);return a.length?"(function(){var "+a.join(",")+";return("+b+");})()":b}(b)}}function mb(b,a){var f,h;30===b.t&&-1===a.indexOf(b.n)&&a.unshift(b.n);if(h=b.o||b.m)if(w(h))mb(h,a);else for(f=h.length;f--;)h[f].n&&0===h[f].n.indexOf("...")&&(b.spread=!0),mb(h[f],a);b.x&&mb(b.x,a);b.r&&mb(b.r,a);b.v&&mb(b.v,a)}function $h(b){b.allowWhitespace();var a=Re(b);if(!a)return null;a={key:a};b.allowWhitespace();
if(!b.matchString(":"))return null;b.allowWhitespace();b=b.read();if(!b)return null;a.value=b.v;return a}function gc(b,a){return(new ai(b,{values:a})).result}function hc(b,a,f){var h,c,d,e;if("string"===typeof b){e=a.pos-b.length;if(71===f||72===f)return a=new cd("["+b+"]"),{a:fc(a.result[0])};70===f&&(h=bi.exec(b))&&(N(a.getContextMessage(e,"Unqualified method events are deprecated. Prefix methods with '@this.' to call methods on the current Ractive instance.")[2]),b="@this."+h[1]+""+b.substr(h[1].length));
if(70===f&&~b.indexOf("(")){h=new cd("["+b+"]");if(h.result&&h.result[0])return h.remaining().length&&(a.pos=e+b.length-h.remaining().length,a.error("Invalid input after event expression '"+h.remaining()+"'")),{x:fc(h.result[0])};if(b.indexOf(":")>b.indexOf("(")||!~b.indexOf(":"))a.pos=e,a.error("Invalid input in event expression '"+b+"'")}if(-1===b.indexOf(":"))return b.trim();b=[b]}d=[];e=[];if(b){for(;b.length;)if(h=b.shift(),"string"===typeof h)if(c=h.indexOf(":"),-1===c)d.push(h);else{c&&d.push(h.substr(0,
c));h.length>c+1&&(e[0]=h.substring(c+1));break}else d.push(h);e=e.concat(b)}d.length?e.length||"string"!==typeof d?(b={n:1===d.length&&"string"===typeof d[0]?d[0]:d},1===e.length&&"string"===typeof e[0]?(h=gc("["+e[0]+"]"),b.a=h?h.value:[e[0].trim()]):b.d=e):b=d:b="";e.length&&f&&N(a.getContextMessage(a.pos,"Proxy events with arguments are deprecated. You can fire events with arguments using \"@this.fire('eventName', arg1, arg2, ...)\".")[2]);return b}function Ue(b){var a,f,c,d;a=b.pos;f=b.matchPattern(ci);
if(!f)return null;c=f;d=b.tags.map(function(b){return b.open});-1!==(c=dc(c,d))&&(f=f.substr(0,c),b.pos=a+f.length);return f}function Ve(b,a){var f,h,c;f=b.pos;if(!b.matchString(a))return null;b.inAttribute=a;h=[];for(c=nb(b)||We(b,a);null!==c;)h.push(c),c=nb(b)||We(b,a);if(!b.matchString(a))return b.pos=f,null;b.inAttribute=!1;return h}function We(b,a){var f=b.remaining(),h=b.tags.map(function(b){return b.open});h.push(a);h=dc(f,h);-1===h&&b.error("Quoted attribute value must have a closing quote");
if(!h)return null;b.pos+=h;return f.substr(0,h)}function nb(b){var a,f;if(!1===b.interpolate[b.inside])return null;for(f=0;f<b.tags.length;f+=1)if(a=di(b,b.tags[f]))return a;if(b.inTag&&!b.inAttribute){a:{var c;var d;b.allowWhitespace();if(a=b.matchPattern(ei)){d=a.length;for(f=0;f<b.tags.length;f++)~(c=a.indexOf(b.tags[f].open))&&c<d&&(d=c);if(d<a.length)b.pos-=a.length-d,a=a.substr(0,d),c={n:a};else{c={n:a};a=b.pos;/[=\/>\s]/.test(b.nextChar())||b.error("Expected `=`, `/`, `>` or whitespace");b.allowWhitespace();
if(b.matchString("=")){b.allowWhitespace();a=b.pos;f=b.sectionDepth;if(!(d=Ve(b,"'")||Ve(b,'"'))){var e;b.inAttribute=!0;d=[];for(e=nb(b)||Ue(b);e;)d.push(e),e=nb(b)||Ue(b);d.length?b.inAttribute=!1:d=null}null===d&&b.error("Expected valid attribute value");b.sectionDepth!==f&&(b.pos=a,b.error("An attribute value must contain as many opening section tags as closing section tags"));a=d.length?1===d.length&&"string"===typeof d[0]?Wc(d[0]):d:""}else b.pos=a,a=null;null!=a&&(c.f=a)}}else c=null;if(c){if(a=
fi[c.n]){c.t=a.t;a.v&&(c.v=a.v);delete c.n;if(72===a.t||71===a.t)c.f=hc(c.f,b);72===a.t?ba(""+("t0"===a.v?"intro-outro":"t1"===a.v?"intro":"outro")+" is deprecated. To specify tranisitions, use the transition name suffixed with '-in', '-out', or '-in-out' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches."):71===a.t&&ba("decorator is deprecated. To specify decorators, use the decorator name prefixed with 'as-' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches.")}else if(a=
gi.exec(c.n))delete c.n,c.t=71,c.f=hc(c.f,b,71),"object"===typeof c.f?c.f.n=a[1]:c.f=a[1];else if(a=hi.exec(c.n))delete c.n,c.t=72,c.f=hc(c.f,b,72),"object"===typeof c.f?c.f.n=a[1]:c.f=a[1],c.v="in-out"===a[2]?"t0":"in"===a[2]?"t1":"t2";else if(a=ii.exec(c.n))c.n=a[1],c.t=70,c.f=hc(c.f,b,70),ji.test(c.f.n||c.f)&&(b.pos-=(c.f.n||c.f).length,b.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));else if(b.sanitizeEventAttributes&&
ki.test(c.n)){a={exclude:!0};break a}else c.f=c.f||(""===c.f?"":0),c.t=13;a=c}else a=null}if(a)return b.allowWhitespace(),a}}function di(b,a){var f,h,c;f=b.pos;if(b.matchString("\\"+a.open)){if(0===f||"\\"!==b.str[f-1])return a.open}else if(!b.matchString(a.open))return null;if(h=Dh(b)){if(!b.matchString(a.close))return null;a.open=h[0];a.close=h[1];b.sortMustacheTags();return li}b.allowWhitespace();if(b.matchString("/"))if(--b.pos,c=b.pos,Ie(b))b.pos=c;else{b.pos=c-a.close.length;if(b.inAttribute)return b.pos=
f,null;b.error("Attempted to close a section that wasn't open")}for(c=0;c<a.readers.length;c+=1)if(h=a.readers[c],h=h(b,a))return a.isStatic&&(h.s=!0),b.includeLinePositions&&(h.p=b.getLinePos(f)),h;b.pos=f;return null}function Ia(b,a){if(b){for(;34===b.t&&b.x;)b=b.x;if(30===b.t)a.r=b.n;else{var f;f=b;for(var h=[],c;32===f.t&&31===f.r.t;)c=f.r,c.x?30===c.x.t?h.unshift(c.x):h.unshift(fc(c.x)):h.unshift(c.n),f=f.x;f=30!==f.t?null:{r:f.n,m:h};f?a.rx=f:a.x=fc(b)}return a}}function Xe(b,a){var f,h;if(!b.matchString("&"))return null;
b.allowWhitespace();f=ka(b);if(!f)return null;b.matchString(a.close)||b.error("Expected closing delimiter '"+a.close+"'");h={t:3};Ia(f,h);return h}function Ye(b){var a=[],f,c=b.pos;b.allowWhitespace();if(f=dd(b)){f.x=Ia(f.x,{});a.push(f);for(b.allowWhitespace();b.matchString(",");)(f=dd(b))||b.error("Expected another alias."),f.x=Ia(f.x,{}),a.push(f),b.allowWhitespace();return a}b.pos=c;return null}function dd(b){var a,f;f=b.pos;b.allowWhitespace();a=ka(b);if(!a)return b.pos=f,null;b.allowWhitespace();
if(!b.matchPattern(mi))return b.pos=f,null;b.allowWhitespace();(f=b.matchPattern(ni))||b.error("Expected a legal alias name.");return{n:f,x:a}}function Ze(b,a){var f,h,c;f=b.pos;try{a:{var d=[a.close],e,g,k;e=b.pos;if(g=ka(b)){for(k=0;k<d.length;k+=1)if(b.remaining().substr(0,d[k].length)===d[k]){h=g;break a}b.pos=e;h=ad(b)}else{var l=b.matchPattern(/^(\w+)/);h=l?{t:30,n:l}:null}}}catch(cb){c=cb}if(!h){if("!"===b.str.charAt(f))return b.pos=f,null;if(c)throw c;}if(!b.matchString(a.close)&&(b.error("Expected closing delimiter '"+
a.close+"' after reference"),!h)){if("!"===b.nextChar())return null;b.error("Expected expression or legal reference")}f={t:2};Ia(h,f);return f}function ed(b,a){var f,h,c;f=b.pos;if(!b.matchString(a.open))return null;b.allowWhitespace();if(!b.matchString("/"))return b.pos=f,null;b.allowWhitespace();h=b.remaining();c=h.indexOf(a.close);if(-1!==c)return f={t:6,r:h.substr(0,c).split(" ")[0]},b.pos+=c,b.matchString(a.close)||b.error("Expected closing delimiter '"+a.close+"'"),f;b.pos=f;return null}function $e(b,
a){var f,h,c,d,e,g,k,l,m,n=!1;f=b.pos;if(b.matchString("^"))c={t:4,f:[],n:51};else if(b.matchString("#")){if(c={t:4,f:[]},b.matchString("partial")&&(b.pos=f-b.standardDelimiters[0].length,b.error("Partial definitions can only be at the top level of the template, or immediately inside components")),g=b.matchPattern(oi))m=g,c.n=af[g]}else return null;b.allowWhitespace();if("with"===g){if(f=Ye(b))n=!0,c.z=f,c.t=19}else"each"===g&&(f=dd(b))&&(c.z=[{n:f.n,x:{r:"."}}],h=f.x);!n&&(h||(h=ka(b)),h||b.error("Expected expression"),
f=b.matchPattern(pi))&&((d=b.matchPattern(qi))?c.i=f+","+d:c.i=f);b.allowWhitespace();b.matchString(a.close)||b.error("Expected closing delimiter '"+a.close+"'");b.sectionDepth+=1;d=c.f;do if(g=b.pos,f=ed(b,a))m&&f.r!==m&&(b.pos=g,b.error("Expected "+a.open+"/"+m+""+a.close)),--b.sectionDepth,l=!0;else{if(g=!n){f=b;g=a;var q=f.pos;f.matchString(g.open)?f.matchPattern(ri)?(q=ka(f),f.matchString(g.close)||f.error("Expected closing delimiter '"+g.close+"'"),f={t:61,x:q}):(f.pos=q,f=null):f=null;g=f}if(g)51===
c.n&&b.error("{{else}} not allowed in {{#unless}}"),e&&b.error("illegal {{elseif...}} after {{else}}"),k||(k=[]),g={t:4,n:50,f:d=[]},Ia(f.x,g),k.push(g);else{if(f=!n)f=b,g=a,q=f.pos,f.matchString(g.open)?f.matchPattern(si)?(f.matchString(g.close)||f.error("Expected closing delimiter '"+g.close+"'"),f={t:60}):(f.pos=q,f=null):f=null;if(f)51===c.n&&b.error("{{else}} not allowed in {{#unless}}"),e&&b.error("there can only be one {{else}} block, at the end of a section"),e=!0,k||(k=[]),k.push({t:4,n:51,
f:d=[]});else{f=b.read(Fb);if(!f)break;d.push(f)}}}while(!l);k&&(c.l=k);n||Ia(h,c);c.f.length||delete c.f;return c}function ti(b){var a,f,c,d;for(a=1;a<b.length;a+=1)f=b[a],c=b[a-1],d=b[a-2],ob(f)&&(9===c.t||10===c.t)&&ob(d)&&pb.test(d)&&qb.test(f)&&(b[a-2]=d.replace(pb,"\n"),b[a]=f.replace(qb,"")),(4===f.t||5===f.t)&&f.f&&ob(c)&&pb.test(c)&&ob(f.f[0])&&qb.test(f.f[0])&&(b[a-1]=c.replace(pb,"\n"),f.f[0]=f.f[0].replace(qb,"")),ob(f)&&(4===c.t||5===c.t)&&c.f&&(d=fa(c.f),ob(d)&&pb.test(d)&&qb.test(f)&&
(c.f[c.f.length-1]=d.replace(pb,"\n"),b[a]=f.replace(qb,"")));return b}function ob(b){return"string"===typeof b}function bf(b,a,f){var h;a&&(h=b[0],"string"===typeof h&&((h=h.replace(a,""))?b[0]=h:b.shift()));f&&(h=fa(b),"string"===typeof h&&((h=h.replace(f,""))?b[b.length-1]=h:b.pop()))}function Ja(b,a,f,c,d){if("string"!==typeof b){var h,r,e,g,Aa,k,l;ti(b);for(h=b.length;h--;)r=b[h],r.exclude?b.splice(h,1):a&&9===r.t&&b.splice(h,1);bf(b,c?cf:null,d?df:null);for(h=b.length;h--;){r=b[h];if(r.f){e=
7===r.t&&ui.test(r.e);c=f||e;!f&&e&&bf(r.f,vi,wi);if(!c){e=b[h-1];g=b[h+1];if(!e||"string"===typeof e&&df.test(e))Aa=!0;if(!g||"string"===typeof g&&cf.test(g))k=!0}Ja(r.f,a,c,Aa,k);n(r.f.n)&&Ja(r.f.n,a,f,Aa,d);n(r.f.d)&&Ja(r.f.d,a,f,Aa,d)}r.l&&(Ja(r.l,a,f,Aa,k),r.l.forEach(function(b){return b.l=1}),r.l.unshift(h+1,0),b.splice.apply(b,r.l),delete r.l);if(r.a)for(l in r.a)r.a.hasOwnProperty(l)&&"string"!==typeof r.a[l]&&Ja(r.a[l],a,f,Aa,k);r.m&&(Ja(r.m,a,f,Aa,k),1>r.m.length&&delete r.m)}for(h=b.length;h--;)"string"===
typeof b[h]&&("string"===typeof b[h+1]&&(b[h]+=b[h+1],b.splice(h+1,1)),f||(b[h]=b[h].replace(xi," ")),""===b[h]&&b.splice(h,1))}}function yi(b){var a,f;a=b.pos;if(!b.matchString("</"))return null;if(f=b.matchPattern(zi))return b.inside&&f!==b.inside?(b.pos=a,null):{t:14,e:f};b.pos-=2;b.error("Illegal closing tag")}function Ai(b,a){var f,h;f=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(a);h=ef[b];return f&&h?!~h.indexOf(f[1].toLowerCase()):!0}function ff(b,a){Object.keys(b).forEach(function(f){if("s"===f&&n(b.r)){f=
b.s;var h=b.r;a[f]||(a[f]=Sc(f,h.length))}else f=b[f],(n(f)||w(f))&&ff(f,a)})}function rb(b,a){return(new gf(b,a||{})).result}function Uc(b,a,f){b||M("Missing Ractive.parse - cannot parse "+a+". "+f)}function hf(b,a){Uc(Tc,'compution string "${str}"',Bi);return Tc(b,a)}function jf(b,a){return a.call(b,{fromId:ra.fromId,isParsed:ra.isParsed,parse:function(a,h){void 0===h&&(h=ra.getParseOptions(b));return ra.parse(a,h)}})}function fd(b,a){if("string"===typeof b){var f=b;"#"===f[0]&&(f=ra.fromId(f));
b=ra.parseFor(f,a)}else{if(void 0==b)throw Error("The template cannot be "+b+".");if("number"!==typeof b.v)throw Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(4!==b.v)throw Error("Mismatched template version (expected 4, got "+b.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");Ge(b)}return b}function kf(b,a,f){if(a)for(var h in a)if(f||
!b.hasOwnProperty(h))b[h]=a[h]}function Ci(b,a,f){function h(){var b=Di(h._parent,a),c="_super"in this,d=this._super;this._super=b;b=f.apply(this,arguments);c?this._super=d:delete this._super;return b}if(!/_super/.test(f))return f;h._parent=b;h._method=f;return h}function Di(b,a){if(a in b){var f=b[a];return"function"===typeof f?f:function(){return f}}return x}function lf(b,a,f){return"options."+b+" has been deprecated in favour of options."+a+"."+(f?" You cannot specify both options, please use options."+
a+".":"")}function Gb(b,a,f){if(a in b){if(f in b)throw Error(lf(a,f,!0));N(lf(a,f));b[f]=b[a]}}function Ei(b){Gb(b,"beforeInit","onconstruct");Gb(b,"init","onrender");Gb(b,"complete","oncomplete");Gb(b,"eventDefinitions","events");n(b.adaptors)&&Gb(b,"adaptors","adapt")}function mf(b,a,f,c){Ei(c);for(var h in c)if(Fi.hasOwnProperty(h)){var d=c[h];"el"!==h&&"function"===typeof d?N(""+h+" is a Ractive option that does not expect a function and will be ignored","init"===b?f:null):f[h]=d}if(c.append&&
c.enhance)throw Error("Cannot use append and enhance at the same time");Hb.forEach(function(h){h[b](a,f,c)});nf[b](a,f,c);gd[b](a,f,c);of[b](a,f,c);Gi(a.prototype,f,c)}function Gi(b,a,f){for(var h in f)if(!Hi[h]&&f.hasOwnProperty(h)){var c=f[h];"function"===typeof c&&(c=Ci(b,h,c));a[h]=c}}function pf(b){var a={};b.forEach(function(b){return a[b]=!0});return a}function Ib(b,a,f,c){b.forEach(function(b){if(8!==b.type||b.refName!==a&&b.name!==a){if(b.fragment)Ib(b.fragment.iterations||b.fragment.items,
a,f,c);else if(n(b.items))Ib(b.items,a,f,c);else if(15===b.type&&b.instance){if(b.instance.partials[a])return;Ib(b.instance.fragment.items,a,f,c)}7===b.type&&n(b.attributes)&&Ib(b.attributes,a,!0,c)}else b.inAttribute=f,c.push(b)})}function Ii(b){b.forceResetTemplate()}function Ji(b,a,f){var h=b.fragment.resolve(a,function(a){O(b.resolvers,h);b.models[f]=a;b.bubble()});b.resolvers.push(h)}function ic(b,a){if(a.r)return qa(b,a.r);if(a.x)return new qf(b,a.x);if(a.rx)return new Ki(b,a.rx)}function rf(b){if(b.template.z){b.aliases=
{};for(var a=b.template.z,f=0;f<a.length;f++)b.aliases[a[f].n]=ic(b.parentFragment,a[f].x)}}function oa(b,a){for(void 0===a&&(a=!0);b&&7!==b.type&&(!a||15!==b.type);)b=b.owner?b.owner:b.component?b.component.parentFragment:b.parent?b.parent:b.parentFragment?b.parentFragment:void 0;return b}function hd(b){return b.replace(/-([a-zA-Z])/g,function(b,a){return a.toUpperCase()})}function Li(b){var a=[];return"string"!==typeof b?{}:b.replace(Mi,function(b){return"\x00"+(a.push(b)-1)}).replace(Ni,"").split(";").filter(function(b){return!!b.trim()}).map(function(b){return b.replace(Oi,
function(b,f){return a[f]})}).reduce(function(b,a){var f=a.indexOf(":"),h=hd(a.substr(0,f).trim());b[Pi[h]||h]=a.substr(f+1).trim();return b},{})}function id(b){b=b.split(Qi);for(var a=b.length;a--;)b[a]||b.splice(a,1);return b}function Ri(b){var a=b.element,f=b.name;if("id"===f)return Si;if("value"===f){b.interpolator&&(b.interpolator.bound=!0);if("select"===a.name&&"value"===f)return a.getAttribute("multiple")?Ti:Ui;if("textarea"===a.name)return sf;if(null!=a.getAttribute("contenteditable"))return Vi;
if("input"===a.name){b=a.getAttribute("type");if("file"===b)return x;if("radio"===b&&a.binding&&"name"===a.binding.attribute.name)return Wi;if(~Xi.indexOf(b))return sf}return Yi}var c=a.node;if(b.isTwoway&&"name"===f){if("radio"===c.type)return Zi;if("checkbox"===c.type)return $i}return"style"===f?aj:0===f.indexOf("style-")?bj:"class"!==f||c.namespaceURI&&"http://www.w3.org/1999/xhtml"!==c.namespaceURI?0===f.indexOf("class-")?dj:b.isBoolean?(a=a.getAttribute("type"),!b.interpolator||"checked"!==f||
"checkbox"!==a&&"radio"!==a||(b.interpolator.bound=!0),ej):b.namespace&&b.namespace!==b.node.namespaceURI?fj:gj:cj}function Si(b){var a=this.node,f=this.getValue();this.ractive.nodes[a.id]===a&&delete this.ractive.nodes[a.id];if(b)return a.removeAttribute("id");this.ractive.nodes[f]=a;a.id=f}function Ti(b){var a=this.getValue();n(a)||(a=[a]);var f=this.node.options,c=f.length;if(b)for(;c--;)f[c].selected=!1;else for(;c--;)b=f[c],b.selected=W(a,b._ractive?b._ractive.value:b.value)}function Ui(b){var a=
this.getValue();if(!this.locked){this.node._ractive.value=a;var f=this.node.options,c=f.length,d=!1;if(b)for(;c--;)f[c].selected=!1;else for(;c--;){b=f[c];var e=b._ractive?b._ractive.value:b.value;b.disabled&&b.selected&&(d=!0);if(e==a){b.selected=!0;return}}d||(this.node.selectedIndex=-1)}}function Vi(b){var a=this.getValue();this.locked||(this.node.innerHTML=b?"":void 0===a?"":a)}function Wi(b){var a=this.node,f=a.checked,c=this.getValue();if(b)return a.checked=!1;a.value=this.node._ractive.value=
c;a.checked=c===this.element.getAttribute("name");f&&!a.checked&&this.element.binding&&this.element.binding.rendered&&this.element.binding.group.model.set(this.element.binding.group.getValue())}function Yi(b){this.locked||(b?(this.node.removeAttribute("value"),this.node.value=this.node._ractive.value=null):(b=this.getValue(),this.node.value=this.node._ractive.value=b,this.node.setAttribute("value",b)))}function sf(b){this.locked||(b?(this.node._ractive.value="",this.node.removeAttribute("value")):
(b=this.getValue(),this.node._ractive.value=b,this.node.value=c(b),this.node.setAttribute("value",c(b))))}function Zi(b){this.node.checked=b?!1:this.getValue()==this.node._ractive.value}function $i(b){var a=this.element;b=this.node;var f=a.binding,c=this.getValue(),a=a.getAttribute("value");if(n(c)){for(var d=c.length;d--;)if(a==c[d]){f.isChecked=b.checked=!0;return}f.isChecked=b.checked=!1}else f.isChecked=b.checked=c==a}function aj(b){b=b?{}:Li(this.getValue()||"");for(var a=this.node.style,f=Object.keys(b),
c=this.previous||[],d=0;d<f.length;)f[d]in a&&(a[f[d]]=b[f[d]]),d++;for(d=c.length;d--;)!~f.indexOf(c[d])&&c[d]in a&&(a[c[d]]="");this.previous=f}function bj(b){this.styleName||(this.styleName=l(this.name.substr(6)));this.node.style[this.styleName]=b?"":this.getValue()}function cj(b){b=b?[]:id(c(this.getValue()));for(var a=id(this.node.className),f=this.previous||a.slice(0),d=0;d<b.length;)~a.indexOf(b[d])||a.push(b[d]),d++;for(d=f.length;d--;)if(!~b.indexOf(f[d])){var e=a.indexOf(f[d]);~e&&a.splice(e,
1)}a=a.join(" ");a!==this.node.className&&(this.node.className=a);this.previous=b}function dj(b){var a=this.name.substr(6),f=id(this.node.className);b=b?!1:this.getValue();this.inlineClass||(this.inlineClass=a);b&&!~f.indexOf(a)?f.push(a):!b&&~f.indexOf(a)&&f.splice(f.indexOf(a),1);this.node.className=f.join(" ")}function ej(b){this.locked||(b?(this.useProperty&&(this.node[this.propertyName]=!1),this.node.removeAttribute(this.propertyName)):this.useProperty?this.node[this.propertyName]=this.getValue():
this.getValue()?this.node.setAttribute(this.propertyName,""):this.node.removeAttribute(this.propertyName))}function gj(b){b?this.node.removeAttribute(this.name):this.node.setAttribute(this.name,c(this.getString()))}function fj(b){b?this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1)):this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),c(this.getString()))}function jd(b,a,f){b.value=0===a?!0:"true"===a?!0:"false"===a||"0"===a?!1:a;a=b.element[b.flag];
b.element[b.flag]=b.value;f&&!b.element.attributes.binding&&a!==b.value&&b.element.recreateTwowayBinding();return b.value}function hj(b){Va=!0;b();Va=!1}function ij(b,a){var f=a?"svg":"div";return b?(tf.innerHTML="<"+f+" "+b+"></"+f+">")&&pa(tf.childNodes[0].attributes):[]}function jj(b,a,f,c){b=b.__model;c&&b.shuffle(c)}function kj(b,a,f,c){if(b.set&&b.set.__magic)return b.set.__magic.dependants.push({ractive:a,keypath:f}),b;var h,d=[{ractive:a,keypath:f}];a={get:function(){return"value"in b?b.value:
b.get.call(this)},set:function(a){h||("value"in b?b.value=a:b.set.call(this,a),c.locked||(h=!0,d.forEach(function(b){b.ractive.set(b.keypath,a)}),h=!1))},enumerable:!0};a.set.__magic={dependants:d,originalDescriptor:b};return a}function lj(b){b=b.replace(/^\t+/gm,function(b){return b.split("\t").join("  ")}).split("\n");var a=2>b.length?0:b.slice(1).reduce(function(b,a){return Math.min(b,/^\s*/.exec(a)[0].length)},Infinity);return b.map(function(b,h){return"    "+(h?b.substring(a):b)}).join("\n")}
function mj(b,a,f){var h,c,d,e,g;"function"===typeof f&&(h=T(f,b),d=f.toString(),e=!0);"string"===typeof f&&(h=hf(f,b),d=f);"object"===typeof f&&("string"===typeof f.get?(h=hf(f.get,b),d=f.get):"function"===typeof f.get?(h=T(f.get,b),d=f.get.toString(),e=!0):M("`%s` computation must have a `get()` method",a),"function"===typeof f.set&&(c=T(f.set,b),g=f.set.toString()));return{getter:h,setter:c,getterString:d,setterString:g,getterUseStack:e}}function kd(b,a){Z.DEBUG&&Jb();nj(b);Ka(b,"data",{get:oj});
pj.fire(b,a);qj.forEach(function(f){b[f]=m(sa(b.constructor[f]||null),a[f])});var f=new rj({adapt:sj(b,b.adapt,a),data:jc.init(b.constructor,b,a),ractive:b});b.viewmodel=f;var h=m(sa(b.constructor.prototype.computed),a.computed),c;for(c in h){var d=mj(b,c,h[c]);f.compute(c,d)}}function tj(b,a){for(var f=b.slice(),h=a.length;h--;)~f.indexOf(a[h])||f.push(a[h]);return f}function sj(b,a,f){function h(a){"string"===typeof a&&((a=wa("adaptors",b,a))||M(hb(a,"adaptor")));return a}a=a.map(h);var c=Ea(f.adapt).map(h),
c=tj(a,c);a="modifyArrays"in f?f.modifyArrays:b.modifyArrays;if("magic"in f?f.magic:b.magic){if(!kc)throw Error("Getters and setters (magic mode) are not supported in this browser");a&&c.push(uj);c.push(ld)}a&&c.push(md);return c}function nj(b){b._guid="r-"+vj++;b._subs=sa(null);b._config={};b.nodes={};b.event=null;b._eventQueue=[];b._liveQueries=[];b._liveComponentQueries=[];b._observers=[];b.component||(b.root=b,b.parent=b.container=null)}function oj(){throw Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead");
}function uf(b,a){return b[a._guid]||(b[a._guid]=[])}function vf(b,a){var f=uf(b.queue,a);for(b.hook.fire(a);f.length;)vf(b,f.shift());delete b.queue[a._guid]}function nd(b,h,f){Object.keys(b.viewmodel.computations).forEach(function(a){var f=b.viewmodel.computations[a];b.viewmodel.value.hasOwnProperty(a)&&f.set(b.viewmodel.value[a])});od.init(b.constructor,b,h);wj.fire(b);wf.begin(b);var c;if(b.template){var d;if(f.cssIds||b.cssId)d=f.cssIds?f.cssIds.slice():[],b.cssId&&d.push(b.cssId);b.fragment=
c=(new L({owner:b,template:b.template,cssIds:d})).bind(b.viewmodel)}wf.end(b);if(c&&(h=a(b.el))&&(h=b.render(h,b.append),Z.DEBUG_PROMISES))h["catch"](function(a){ba("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");N("An error happened during rendering",{ractive:b});U(a);throw a;})}function xj(b){b.makeDirty()}function yj(b){var a=
b.node,f=b.ractive;do for(var c=f._liveQueries,d=c.length;d--;){var e=c["_"+c[d]];e.test(a)&&(e.add(a),b.liveQueries.push(e))}while(f=f.parent)}function xf(b,a){ba("The "+b+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:a})}function R(){this._ractive.binding.handleChange()}function yf(b,a,f){b=""+b+"-bindingGroup";return a[b]||(a[b]=new Kb(b,a,f))}function zj(){var b=[];this.bindings.filter(function(b){return b.node&&
b.node.checked}).map(function(b){return b.element.getAttribute("value")}).forEach(function(a){W(b,a)||b.push(a)});return b}function zf(){R.call(this);var b=this._ractive.binding.model.get();this.value=void 0==b?"":b}function Aj(b){var a;return function(){var f=this;a&&clearTimeout(a);a=setTimeout(function(){f._ractive.binding.rendered&&R.call(f);a=null},b)}}function pd(b){return b.selectedOptions?pa(b.selectedOptions):b.options?pa(b.options).filter(function(b){return b.selected}):[]}function Bj(){var b=
this.bindings.filter(function(b){return b.node.checked});if(0<b.length)return b[0].element.getAttribute("value")}function La(b){return b&&b.template.f&&1===b.template.f.length&&2===b.template.f[0].t&&!b.template.f[0].s}function Cj(b){var a=b.attributeByName;if(b.getAttribute("contenteditable")||La(a.contenteditable))return La(a.value)?Dj:null;if("input"===b.name){var f=b.getAttribute("type");if("radio"===f||"checkbox"===f){var c=La(a.name),d=La(a.checked);if(c&&d)if("radio"===f)N("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",
{ractive:b.root});else return Af;if(c)return"radio"===f?Ej:Fj;if(d)return"radio"===f?Gj:Af}return"file"===f&&La(a.value)?ia:La(a.value)?"number"===f||"range"===f?Hj:qd:null}if("select"===b.name&&La(a.value))return b.getAttribute("multiple")?Ij:Jj;if("textarea"===b.name&&La(a.value))return qd}function Kj(b){b.makeDirty()}function Lj(b){var a=b.attributeByName;b=a.type;var f=a.value,a=a.name;if(b&&"radio"===b.value&&f&&a.interpolator&&f.getValue()===a.interpolator.model.get())return!0}function Mj(b){return(b=
b.toString())?" "+b:""}function Nj(b){var a=b.getAttribute("xmlns");return a?a:"svg"===b.name?"http://www.w3.org/2000/svg":(a=b.parent)?"foreignobject"===a.name?"http://www.w3.org/1999/xhtml":a.node.namespaceURI:b.ractive.el.namespaceURI}function Bf(){var b=this._ractive.proxy;J.start();b.formBindings.forEach(Oj);J.end()}function Oj(b){b.model.set(b.resetValue)}function Pj(b){var a=b.template.f,f=b.element.instance.viewmodel,c=f.value;1===a.length&&2===a[0].t?(b.model=ic(b.parentFragment,a[0]),b.model||
(ba("The "+b.name+"='{{"+a[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:b.element.instance}),b.parentFragment.ractive.get(b.name),b.model=b.parentFragment.findContext().joinKey(b.name)),b.link=f.createLink(b.name,b.model,a[0].r),void 0===b.model.get()&&b.name in c&&b.model.set(c[b.name])):(b.boundFragment=(new L({owner:b,template:a})).bind(),b.model=f.joinKey(b.name),b.model.set(b.boundFragment.valueOf()),b.boundFragment.bubble=
function(){L.prototype.bubble.call(b.boundFragment);J.scheduleTask(function(){b.boundFragment.update();b.model.set(b.boundFragment.valueOf())})})}function lc(b,a,f){var h;var c=Cf(a,(f||{}).owner);c?h=c:(f=Ec("partials",b,a))?(c=f.partials[a],"function"===typeof c&&(h=c.bind(f),h.isOwner=f.partials.hasOwnProperty(a),c=h.call(b,ra)),c||""===c?(ra.isParsed(c)||(c=ra.parseFor(c,f),c.p&&N("Partials ({{>%s}}) cannot contain nested inline partials",a,{ractive:b}),(h?f:f.partials.hasOwnProperty(a)?f:Df(f.constructor,
a)).partials[a]=c=c.t),h&&(c._fn=h),h=c.v?c.t:c):(N('A function was specified for "%s" %s, but no %s was returned',a,"partial","partial",{ractive:b}),h=void 0)):h=void 0;if(h)return h;if(h=ra.fromId(a,{noThrow:!0}))return h=ra.parseFor(h,b),h.p&&p(b.partials,h.p),b.partials[a]=h.t}function Df(b,a){if(b)return b.partials.hasOwnProperty(a)?b:Df(b._Parent,a)}function Cf(b,a){if(a){if(a.template&&a.template.p&&a.template.p[b])return a.template.p[b];if(a.parentFragment&&a.parentFragment.owner)return Cf(b,
a.parentFragment.owner)}}function Ef(b,a,f){var h;try{h=ra.parse(a,ra.getParseOptions(f))}catch(Aa){N("Could not parse partial from expression '"+b+"'\n"+Aa.message)}return h||{t:[]}}function Lb(b){return!b||n(b)&&0===b.length||w(b)&&0===Object.keys(b).length}function Ff(){Mb=!P[mc]}function rd(){Mb=!1}function sd(){Mb=!0}function Gf(b){if(!b)return"";Qj.test(b)&&(b="-"+b);return b.replace(/[A-Z]/g,function(b){return"-"+b.toLowerCase()})}function Rj(b,a){a?b.setAttribute("style",a):(b.getAttribute("style"),
b.removeAttribute("style"))}function td(b){return Hf[b]||(Hf[b]=Ca(b))}function If(b,a){var f=Ec("components",b,a),h;if(f&&(h=f.components[a],!h._Parent)){var c=h.bind(f);c.isOwner=f.components.hasOwnProperty(a);h=c();if(!h){N('A function was specified for "%s" %s, but no %s was returned',a,"component","component",{ractive:b});return}"string"===typeof h&&(h=If(b,h));h._fn=c;f.components[a]=h}return h}function nc(b){if("string"===typeof b.template)return new Sj(b);if(7===b.template.t){var a=If(b.parentFragment.ractive,
b.template.e);if(a)return new Tj(b,a);a=b.template.e.toLowerCase();return new (Uj[a]||Nb)(b)}if(13===b.template.t){a=b.owner;if(!a||15!==a.type&&7!==a.type)a=oa(b.parentFragment);b.element=a;a=15===a.type?Vj:Jf}else a=ta[b.template.t];if(!a)throw Error("Unrecognised item type "+b.template.t);return new a(b)}function oc(b,a,f,c){void 0===c&&(c=0);return b.map(function(b){if(1===b.type)return b.template;if(b.fragment)return b.fragment.iterations?b.fragment.iterations.map(function(b){return oc(b.items,
a,f,c)}).join(""):oc(b.fragment.items,a,f,c);var h=""+f+"-"+c++;b=b.model||b.newModel;a[h]=b?b.wrapper?b.wrapper.value:b.get():void 0;return"${"+h+"}"}).join("")}function Wj(b){b.unrender(!0)}function Kf(){var b=[this.cssId].concat(this.findAllComponents().map(function(b){return b.cssId})),b=Object.keys(b.reduce(function(b,a){return b[a]=!0,b},{}));return bc(b)}function Lf(){return this.fragment.toString(!0)}function Xj(b,a,f){return f||"function"===typeof a&&/_super/.test(b)?function(){var f="_super"in
this,h=this._super,c;this._super=a;c=b.apply(this,arguments);f&&(this._super=h);return c}:b}function Yj(b){for(var a={};b;)Zj(b,a),ak(b,a),b=b._Parent!==Z?b._Parent:!1;return a}function Zj(b,a){Hb.forEach(function(f){bk(f.useDefaults?b.prototype:b,a,f.name)})}function bk(b,a,f){var h,c=Object.keys(b[f]);c.length&&((h=a[f])||(h=a[f]={}),c.filter(function(b){return!(b in h)}).forEach(function(a){return h[a]=b[f][a]}))}function ak(b,a){Object.keys(b.prototype).forEach(function(f){if("computed"!==f){var h=
b.prototype[f];if(!(f in a))a[f]=h._method?h._method:h;else if("function"===typeof a[f]&&"function"===typeof h&&a[f]._method){var c=h._method;c&&(h=h._method);h=Xj(a[f]._method,h);c&&(h._method=h);a[f]=h}}})}function Mf(){for(var b=[],a=arguments.length;a--;)b[a]=arguments[a];return b.length?b.reduce(Nf,this):Nf(this)}function Nf(b,a){void 0===a&&(a={});var f,h;a.prototype instanceof Z&&(a=Yj(a));f=function(b){if(!(this instanceof f))return new f(b);kd(this,b||{});nd(this,b||{},{})};h=sa(b.prototype);
h.constructor=f;Db(f,{defaults:{value:h},extend:{value:Mf,writable:!0,configurable:!0},_Parent:{value:b}});od.extend(b,h,a);jc.extend(b,h,a);a.computed&&(h.computed=m(sa(b.prototype.computed),a.computed));f.prototype=h;return f}function Z(b){if(!(this instanceof Z))return new Z(b);kd(this,b||{});nd(this,b||{},{})}var Of={el:void 0,append:!1,template:null,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,
sanitize:!1,stripComments:!0,contextLines:0,data:{},computed:{},magic:!1,modifyArrays:!1,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},Pf={linear:function(b){return b},easeIn:function(b){return Math.pow(b,3)},easeOut:function(b){return Math.pow(b-1,3)+1},easeInOut:function(b){return 1>(b/=.5)?.5*Math.pow(b,3):.5*(Math.pow(b-2,3)+2)}},ha="undefined"!==typeof window?window:null,P=ha?document:null,ud=!!P;"undefined"!==typeof navigator&&
/jsDom/.test(navigator.appName);var Qf="undefined"!==typeof console&&"function"===typeof console.warn&&"function"===typeof console.warn.apply,kc;try{Object.defineProperty({},"test",{value:0}),kc=!0}catch(b){kc=!1}var Rf=P?P.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,Ma=["o","ms","moz","webkit"],Sf={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns"},Ca,Na,sb,vd,Ob,wd,pc,Tf,xd;Ca=Rf?function(b,a,f){return a&&"http://www.w3.org/1999/xhtml"!==a?f?P.createElementNS(a,b,f):P.createElementNS(a,b):f?P.createElement(b,f):P.createElement(b)}:function(b,a,f){if(a&&"http://www.w3.org/1999/xhtml"!==a)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";
return f?P.createElement(b,f):P.createElement(b)};if(ud){sb=Ca("div");vd=["matches","matchesSelector"];xd=function(b){return function(a,f){return a[b](f)}};for(pc=vd.length;pc--&&!Na;)if(Ob=vd[pc],sb[Ob])Na=xd(Ob);else for(Tf=Ma.length;Tf--;)if(wd=Ma[pc]+Ob.substr(0,1).toUpperCase()+Ob.substring(1),sb[wd]){Na=xd(wd);break}Na||(Na=function(b,a){var f,h;f=b.parentNode;f||(sb.innerHTML="",f=sb,b=b.cloneNode(),sb.appendChild(b));f=f.querySelectorAll(a);for(h=f.length;h--;)if(f[h]===b)return!0;return!1})}else Na=
null;var xg=/(-.)/g,yg=/[A-Z]/g,sa,Ka,Db;try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),P&&Object.defineProperty(Ca("div"),"test",{value:0}),Ka=Object.defineProperty}catch(b){Ka=function(b,a,c){b[a]=c.get?c.get():c.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(b){throw b;}P&&Object.defineProperties(Ca("div"),{test:{value:0}});Db=Object.defineProperties}catch(b){Db=function(b,a){for(var f in a)a.hasOwnProperty(f)&&Ka(b,f,a[f])}}try{Object.create(null),
sa=Object.create}catch(b){sa=function(){var b=function(){};return function(a,h){var f;if(null===a)return{};b.prototype=a;f=new b;h&&Object.defineProperties(f,h);return f}}()}var bb=Object.prototype.hasOwnProperty,Xd=Object.prototype.toString,Yd={},Gc,Yb,Jb;if(Qf){var Uf=["%cRactive.js %c0.8.1 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];
Jb=function(){if(!1!==Z.WELCOME_MESSAGE){var b="WELCOME_MESSAGE"in Z?Z.WELCOME_MESSAGE:"You're running Ractive 0.8.1 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n",
a=!!console.groupCollapsed;a&&console.groupCollapsed.apply(console,Uf);console.log(b);a&&console.groupEnd(Uf)}Jb=x};Yb=function(b,a){Jb();if("object"===typeof a[a.length-1]){var f=a.pop(),h=f?f.ractive:null;if(h){var c;h.component&&(c=h.component.name)&&(b="<"+c+"> "+b);var d;(d=f.node||h.fragment&&h.fragment.rendered&&h.find("*"))&&a.push(d)}}console.warn.apply(console,["%cRactive.js: %c"+b,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(a))};Gc=function(){console.log.apply(console,
arguments)}}else Yb=Gc=Jb=x;var hb=function(b,a){return'Missing "'+b+'" '+a+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+a+"s"},Zb={number:function(b,a){var f;if(!q(b)||!q(a))return null;b=+b;return(f=+a-b)?function(a){return b+a*f}:function(){return b}},array:function(b,a){var f,h,c,d;if(!n(b)||!n(a))return null;f=[];h=[];for(d=c=Math.min(b.length,a.length);d--;)h[d]=db(b[d],a[d]);for(d=c;d<b.length;d+=1)f[d]=b[d];for(d=c;d<a.length;d+=1)f[d]=a[d];return function(b){for(var a=
c;a--;)f[a]=h[a](b);return f}},object:function(b,a){var f,h,c,d,e;if(!w(b)||!w(a))return null;f=[];d={};c={};for(e in b)bb.call(b,e)&&(bb.call(a,e)?(f.push(e),c[e]=db(b[e],a[e])||vg(a[e])):d[e]=b[e]);for(e in a)bb.call(a,e)&&!bb.call(b,e)&&(d[e]=a[e]);h=f.length;return function(b){for(var a=h,r;a--;)r=f[a],d[r]=c[r](b);return d}}},ck={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},
complete:{deprecated:"complete",replacement:"oncomplete"}},da=function(b){this.event=b;this.method="on"+b;this.deprecate=ck[b]};da.prototype.call=function(b,a,f){if(a[b])return f?a[b](f):a[b](),!0};da.prototype.fire=function(b,a){this.call(this.method,b,a);!b[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,b,a)&&(this.deprecate.message?N(this.deprecate.message):N('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',
this.deprecate.deprecated,this.deprecate.replacement));a?b.fire(this.event,a):b.fire(this.event)};var Ba,yd={},Vf={},dk={};"function"===typeof Promise?Ba=Promise:(Ba=function(b){var a=[],f=[],c=yd,d,e,g,k;g=function(b){return function(h){c===yd&&(d=h,c=b,e=xa(c===Vf?a:f,d),setTimeout(e,0))}};k=g(Vf);g=g(dk);try{b(k,g)}catch(xb){g(xb)}return{then:function(b,h){var d=new Ba(function(r,g){var k=function(b,a,f){"function"===typeof b?a.push(function(a){var f;try{f=b(a),Ub(d,f,r,g)}catch(ek){g(ek)}}):a.push(f)};
k(b,a,r);k(h,f,g);c!==yd&&setTimeout(e,0)});return d},"catch":function(b){return this.then(null,b)}}},Ba.all=function(b){return new Ba(function(a,f){var h=[],c,d,e;if(b.length)for(e=function(b,d){b&&"function"===typeof b.then?b.then(function(b){h[d]=b;--c||a(h)},f):(h[d]=b,--c||a(h))},c=d=b.length;d--;)e(b[d],d);else a(h)})},Ba.resolve=function(b){return new Ba(function(a){a(b)})},Ba.reject=function(b){return new Ba(function(a,f){f(b)})});var Oa=Ba,Pa=function(b,a){this.callback=b;this.parent=a;this.intros=
[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.outrosComplete=!1;a&&a.addChild(this)};Pa.prototype.add=function(b){(b.isIntro?this.intros:this.outros).push(b)};Pa.prototype.addChild=function(b){this.children.push(b);this.totalChildren+=1;this.outroChildren+=1};Pa.prototype.decrementOutros=function(){--this.outroChildren;ma(this)};Pa.prototype.decrementTotal=function(){--this.totalChildren;ma(this)};Pa.prototype.detachNodes=function(){this.detachQueue.forEach($a);
this.children.forEach(Fc)};Pa.prototype.ready=function(){var b=this.detachQueue,a=fb(this),f=b.length,c,d,e;a:for(;f--;){d=b[f].node;for(c=a.length;c--;)if(e=a[c].element.node,e===d||e.contains(d)||d.contains(e))continue a;b[f].detach();b.splice(f,1)}};Pa.prototype.remove=function(b){O(b.isIntro?this.intros:this.outros,b);ma(this)};Pa.prototype.start=function(){this.children.forEach(function(b){return b.start()});this.intros.concat(this.outros).forEach(function(b){return b.start()});this.ready=!0;
ma(this)};var $d=new da("change"),Q,J={start:function(b,a){var f,h;a&&(f=new Oa(function(b){return h=b}));Q={previousBatch:Q,transitionManager:new Pa(h,Q&&Q.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],ractives:[],instance:b};return f},end:function(){Xb();Q.previousBatch||Q.transitionManager.start();Q=Q.previousBatch},addFragment:function(b){Ya(Q.fragments,b)},addFragmentToRoot:function(b){if(Q){for(var a=Q;a.previousBatch;)a=a.previousBatch;Ya(a.fragments,b)}},
addInstance:function(b){Q&&Ya(Q.ractives,b)},addObserver:function(b,a){Ya(a?Q.deferredObservers:Q.immediateObservers,b)},registerTransition:function(b){b._manager=Q.transitionManager;Q.transitionManager.add(b)},detachWhenReady:function(b){Q.transitionManager.detachQueue.push(b)},scheduleTask:function(b,a){var f;if(Q){for(f=Q;a&&f.previousBatch;)f=f.previousBatch;f.tasks.push(b)}else b()}},Hc=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Ag=/([^\\](?:\\\\)*)\./,zg=/\\|\./g,Bg=/((?:\\)+)\1|\\(\.)/g,Cg=/\*/,Ic=
Oa.resolve();Ka(Ic,"stop",{value:x});var Dg=Pf.linear,fk=new da("detach"),Qa=function(b,a,f,c){this.ractive=b;this.selector=a;this.live=f;this.isComponentQuery=c;this.result=[];this.dirty=!0};Qa.prototype.add=function(b){this.result.push(b);this.makeDirty()};Qa.prototype.cancel=function(){var b=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],a=this.selector,f=b.indexOf(a);-1!==f&&(b.splice(f,1),b[a]=null)};Qa.prototype.init=function(){this.dirty=!1};Qa.prototype.makeDirty=function(){var b=
this;this.dirty||(this.dirty=!0,J.scheduleTask(function(){return b.update()}))};Qa.prototype.remove=function(b){b=this.result.indexOf(this.isComponentQuery?b.instance:b);-1!==b&&this.result.splice(b,1)};Qa.prototype.update=function(){this.result.sort(this.isComponentQuery?Nd:wg);this.dirty=!1};Qa.prototype.test=function(b){return this.isComponentQuery?!this.selector||b.name===this.selector:b?Na(b,this.selector):null};var $b={},Jc={},yb=[],zb,Fa=function(b,a){this.value=b;this.isReadonly=this.isKey=
!0;this.deps=[];this.links=[];this.parent=a};Fa.prototype.get=function(b){b&&Ra(this);return va(this.value)};Fa.prototype.getKeypath=function(){return va(this.value)};Fa.prototype.rebinding=function(b,a){for(var f=this.deps.length;f--;)this.deps[f].rebinding(b,a,!1);for(f=this.links.length;f--;)this.links[f].rebinding(b,a,!1)};Fa.prototype.register=function(b){this.deps.push(b)};Fa.prototype.registerLink=function(b){Ya(this.links,b)};Fa.prototype.unregister=function(b){O(this.deps,b)};Fa.prototype.unregisterLink=
function(b){O(this.links,b)};var la=function(b,a){this.parent=b;this.value=(this.ractive=a)?b.getKeypath(a):b.getKeypath();this.deps=[];this.children={};this.isReadonly=this.isKeypath=!0};la.prototype.get=function(a){a&&Ra(this);return this.value};la.prototype.getChild=function(a){if(!(a._guid in this.children)){var b=new la(this.parent,a);this.children[a._guid]=b;b.owner=this}return this.children[a._guid]};la.prototype.getKeypath=function(){return this.value};la.prototype.handleChange=function(){for(var a=
Object.keys(this.children),h=a.length;h--;)this.children[a[h]].handleChange();this.deps.forEach(Y)};la.prototype.rebindChildren=function(a){for(var b=Object.keys(this.children),f=b.length;f--;){var c=this.children[b[f]];c.value=a.getKeypath(c.ractive);c.handleChange()}};la.prototype.rebinding=function(a,h){for(var b=a?a.getKeypathModel(this.ractive):void 0,c=Object.keys(this.children),d=c.length;d--;)this.children[c[d]].rebinding(a,h,!1);for(d=this.deps.length;d--;)this.deps[d].rebinding(b,this,!1)};
la.prototype.register=function(a){this.deps.push(a)};la.prototype.removeChild=function(a){a.ractive&&delete this.children[a.ractive._guid]};la.prototype.teardown=function(){this.owner&&this.owner.removeChild(this);for(var a=Object.keys(this.children),h=a.length;h--;)this.children[a[h]].teardown()};la.prototype.unregister=function(a){O(this.deps,a);this.deps.length||this.teardown()};var Wf=Object.prototype.hasOwnProperty,Mc={early:[],mark:[]},Nc={early:[],mark:[]},S=function(a){this.deps=[];this.children=
[];this.childByKey={};this.links=[];this.keyModels={};this.unresolved=[];this.unresolvedByKey={};this.bindings=[];this.patternObservers=[];a&&(this.parent=a,this.root=a.root)};S.prototype.addUnresolved=function(a,h){this.unresolvedByKey[a]||(this.unresolved.push(a),this.unresolvedByKey[a]=[]);this.unresolvedByKey[a].push(h)};S.prototype.addShuffleTask=function(a,h){void 0===h&&(h="early");Mc[h].push(a)};S.prototype.addShuffleRegister=function(a,h){void 0===h&&(h="early");Nc[h].push({model:this,item:a})};
S.prototype.clearUnresolveds=function(a){for(var b=this.unresolved.length;b--;){var f=this.unresolved[b];if(!a||f===a){for(var c=this.unresolvedByKey[f],d=this.has(f),e=c.length;e--;)d&&c[e].attemptResolution(),c[e].resolved&&c.splice(e,1);c.length||(this.unresolved.splice(b,1),this.unresolvedByKey[f]=null)}}};S.prototype.findMatches=function(a){var b=a.length,f=[this],c,d,e=function(){var b=a[d];"*"===b?(c=[],f.forEach(function(a){c.push.apply(c,a.getValueChildren(a.get()))})):c=f.map(function(a){return a.joinKey(b)});
f=c};for(d=0;d<b;d+=1)e();return c};S.prototype.getKeyModel=function(a,h){if(void 0!==a&&!h)return this.parent.getKeyModel(a,!0);a in this.keyModels||(this.keyModels[a]=new Fa(za(a),this));return this.keyModels[a]};S.prototype.getKeypath=function(a){if(a!==this.ractive&&this._link)return this._link.target.getKeypath(a);this.keypath||(this.keypath=this.parent.isRoot?this.key:""+this.parent.getKeypath(a)+"."+za(this.key));return this.keypath};S.prototype.getValueChildren=function(a){var b=this,f;if(n(a))f=
[],"length"in this&&this.length!==a.length&&f.push(this.joinKey("length")),a.forEach(function(a,h){f.push(b.joinKey(h))});else if(w(a)||"function"===typeof a)f=Object.keys(a).map(function(a){return b.joinKey(a)});else if(null!=a)return[];return f};S.prototype.getVirtual=function(a){var b=this.get(a,{virtual:!1});if(w(b)){a=n(b)?[]:{};for(var f=Object.keys(b),c=f.length;c--;){var d=this.childByKey[f[c]];a[f[c]]=d?d._link?d._link.getVirtual():d.getVirtual():b[f[c]]}for(c=this.children.length;c--;)b=
this.children[c],b.key in a||!b._link||(a[b.key]=b._link.getVirtual());return a}return b};S.prototype.has=function(a){if(this._link)return this._link.has(a);var b=this.get();if(!b)return!1;a=va(a);if(Wf.call(b,a))return!0;for(b=b.constructor;b!==Function&&b!==Array&&b!==Object;){if(Wf.call(b.prototype,a))return!0;b=b.constructor}return!1};S.prototype.joinAll=function(a,h){for(var b=this,c=0;c<a.length;c+=1){if(h&&!1===h.lastLink&&c+1===a.length&&b.childByKey[a[c]]&&b.childByKey[a[c]]._link)return b.childByKey[a[c]];
b=b.joinKey(a[c],h)}return b};S.prototype.notifyUpstream=function(){for(var a=this.parent,h=[this.key];a;)a.patternObservers.length&&a.patternObservers.forEach(function(a){return a.notify(h.slice())}),h.unshift(a.key),a.links.forEach(ae),a.deps.forEach(Y),a=a.parent};S.prototype.rebinding=function(a,h,f){for(var b=this.deps.length;b--;)this.deps[b].rebinding&&this.deps[b].rebinding(a,h,f);for(b=this.links.length;b--;){var c=this.links[b];c.owner._link&&c.relinking(a,!0,f)}for(b=this.children.length;b--;)c=
this.children[b],c.rebinding(a?a.joinKey(c.key):void 0,c,f);for(b=this.unresolved.length;b--;)for(var c=this.unresolvedByKey[this.unresolved[b]],d=c.length;d--;)c[d].rebinding(a,h);this.keypathModel&&this.keypathModel.rebinding(a,h,!1);for(b=this.bindings.length;b--;)this.bindings[b].rebinding(a,h,f)};S.prototype.register=function(a){this.deps.push(a)};S.prototype.registerChange=function(a,h){this.isRoot?(this.changes[a]=h,J.addInstance(this.root.ractive)):this.root.registerChange(a,h)};S.prototype.registerLink=
function(a){Ya(this.links,a)};S.prototype.registerPatternObserver=function(a){this.patternObservers.push(a);this.register(a)};S.prototype.registerTwowayBinding=function(a){this.bindings.push(a)};S.prototype.removeUnresolved=function(a,h){var b=this.unresolvedByKey[a];b&&O(b,h)};S.prototype.shuffled=function(){for(var a=this.children.length;a--;)this.children[a].shuffled();this.wrapper&&(this.wrapper.teardown(),this.wrapper=null,this.rewrap=!0)};S.prototype.unregister=function(a){O(this.deps,a)};S.prototype.unregisterLink=
function(a){O(this.links,a)};S.prototype.unregisterPatternObserver=function(a){O(this.patternObservers,a);this.unregister(a)};S.prototype.unregisterTwowayBinding=function(a){O(this.bindings,a)};S.prototype.updateFromBindings=function(a){for(var b=this.bindings.length;b--;){var f=this.bindings[b].getValue();f!==this.value&&this.set(f)}this.bindings.length||(b=fe(this.deps))&&b.value!==this.value&&this.set(b.value);a&&(this.children.forEach(ee),this.links.forEach(ee),this._link&&this._link.updateFromBindings(a))};
Fa.prototype.addShuffleTask=S.prototype.addShuffleTask;Fa.prototype.addShuffleRegister=S.prototype.addShuffleRegister;la.prototype.addShuffleTask=S.prototype.addShuffleTask;la.prototype.addShuffleRegister=S.prototype.addShuffleRegister;var gk=function(a){function b(b,h,c,d){a.call(this,b);this.owner=h;this.target=c;this.key=void 0===d?h.key:d;h.isLink&&(this.sourcePath=""+h.sourcePath+"."+this.key);c.registerLink(this);this.isReadonly=b.isReadonly;this.isLink=!0}b.prototype=Object.create(a&&a.prototype);
b.prototype.constructor=b;b.prototype.animate=function(a,b,h,c){this.target.animate(a,b,h,c)};b.prototype.applyValue=function(a){this.target.applyValue(a)};b.prototype.get=function(a,b){a&&(Ra(this),b=b||{},b.unwrap=!0);return this.target.get(!1,b)};b.prototype.getKeypath=function(b){return b&&b!==this.root.ractive?this.target.getKeypath(b):a.prototype.getKeypath.call(this,b)};b.prototype.getKeypathModel=function(a){this.keypathModel||(this.keypathModel=new la(this));return a&&a!==this.root.ractive?
this.keypathModel.getChild(a):this.keypathModel};b.prototype.handleChange=function(){this.deps.forEach(Y);this.links.forEach(Y);this.notifyUpstream()};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var f=new b(this,this,this.target.joinKey(a),a);this.children.push(f);this.childByKey[a]=f}return this.childByKey[a]};b.prototype.mark=function(){this.target.mark()};b.prototype.marked=function(){this.links.forEach(Ab);this.deps.forEach(Y);this.clearUnresolveds()};
b.prototype.notifiedUpstream=function(){this.links.forEach(ae);this.deps.forEach(Y)};b.prototype.relinked=function(){this.target.registerLink(this);this.children.forEach(function(a){return a.relinked()})};b.prototype.relinking=function(a,b,h){var f=this;b&&this.sourcePath&&(a=Sa(this.sourcePath,a,this.target));a&&this.target!==a&&(this.target.unregisterLink(this),this.keypathModel&&this.keypathModel.rebindChildren(a),this.target=a,this.children.forEach(function(b){b.relinking(a.joinKey(b.key),!1,
h)}),b&&this.addShuffleTask(function(){f.relinked();h||f.notifyUpstream()}))};b.prototype.set=function(a){this.target.set(a)};b.prototype.shuffle=function(a){if(!this.shuffling)if(this.target.shuffling){this.shuffling=!0;for(var b=a.length;b--;){var f=a[b];b!==f&&(b in this.childByKey&&this.childByKey[b].rebinding(~f?this.joinKey(f):void 0,this.childByKey[b],!0),!~f&&this.keyModels[b]?this.keyModels[b].rebinding(void 0,this.keyModels[b],!1):~f&&this.keyModels[b]&&(this.keyModels[f]||this.childByKey[f].getKeyModel(f),
this.keyModels[b].rebinding(this.keyModels[f],this.keyModels[b],!1)))}f=this.source().length!==this.source().value.length;this.links.forEach(function(b){return b.shuffle(a)});for(b=this.deps.length;b--;)this.deps[b].shuffle&&this.deps[b].shuffle(a);this.marked();f&&this.notifyUpstream();this.shuffling=!1}else this.target.shuffle(a)};b.prototype.source=function(){return this.target.source?this.target.source():this.target};b.prototype.teardown=function(){this._link&&this._link.teardown();this.children.forEach(Lc)};
return b}(S);S.prototype.link=function(a,h){var b=this._link||new gk(this.parent,this,a,this.key);b.sourcePath=h;this._link&&this._link.relinking(a,!0,!1);this.rebinding(b,this,!1);jb();var c=!this._link;this._link=b;c&&this.parent.clearUnresolveds();b.marked();return b};S.prototype.unlink=function(){if(this._link){var a=this._link;this._link=void 0;a.rebinding(this,this._link);jb();a.teardown()}};var zd;ha?(function(a,h,f){var b,c;if(!f.requestAnimationFrame){for(b=0;b<a.length&&!f.requestAnimationFrame;++b)f.requestAnimationFrame=
f[a[b]+"RequestAnimationFrame"];f.requestAnimationFrame||(c=f.setTimeout,f.requestAnimationFrame=function(a){var b,f,d;b=Date.now();f=Math.max(0,16-(b-h));d=c(function(){a(b+f)},f);h=b+f;return d})}}(Ma,0,ha),zd=ha.requestAnimationFrame):zd=null;var ie=zd,he=ha&&ha.performance&&"function"===typeof ha.performance.now?function(){return ha.performance.now()}:function(){return Date.now()},Cb=[],je=!1,qc=function(a){this.duration=a.duration;this.step=a.step;this.complete=a.complete;this.easing=a.easing;
this.start=he();this.end=this.start+this.duration;this.running=!0;Cb.push(this);je||ie(ge)};qc.prototype.tick=function(a){if(!this.running)return!1;if(a>this.end)return this.step&&this.step(1),this.complete&&this.complete(1),!1;a=this.easing((a-this.start)/this.duration);this.step&&this.step(a);return!0};qc.prototype.stop=function(){this.abort&&this.abort();this.running=!1};var Oc={},Wa=function(a){function b(b,h){a.call(this,b);this.ticker=null;b&&(this.key=va(h),this.isReadonly=b.isReadonly,b.value&&
(this.value=b.value[this.key],n(this.value)&&(this.length=this.value.length),this.adapt()))}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.adapt=function(){var a=this.root.adaptors,b=a.length;this.rewrap=!1;if(0!==b){var h=this.wrapper?"newValue"in this.wrapper?this.wrapper.newValue:this.wrapper.value:this.value,c=this.root.ractive,d=this.getKeypath();if(this.wrapper)if(this.wrapper.value===h?0:!this.wrapper.reset||!1===this.wrapper.reset(h)){if(this.wrapper.teardown(),
this.wrapper=null,void 0!==this.value){var e=this.parent.value||this.parent.createBranch(this.key);e[this.key]!==h&&(e[this.key]=h)}}else{delete this.wrapper.newValue;this.wrapper.value=h;this.value=this.wrapper.get();return}for(e=0;e<b;e+=1){var g=a[e];if(g.filter(h,d,c)){this.wrapper=g.wrap(c,h,d,Eg(d));this.wrapper.value=h;this.wrapper.__model=this;this.value=this.wrapper.get();break}}}};b.prototype.animate=function(a,b,h,c){var f=this;this.ticker&&this.ticker.stop();var d;a=new Oa(function(a){return d=
a});this.ticker=new qc({duration:h.duration,easing:h.easing,step:function(a){var b=c(a);f.applyValue(b);h.step&&h.step(a,b)},complete:function(){f.applyValue(b);h.complete&&h.complete(b);f.ticker=null;d()}});a.stop=this.ticker.stop;return a};b.prototype.applyValue=function(a){t(a,this.value)||(this.registerChange(this.getKeypath(),a),this.parent.wrapper&&this.parent.wrapper.set?(this.parent.wrapper.set(this.key,a),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],
this.wrapper&&(this.wrapper.newValue=this.value)):this.wrapper?this.wrapper.newValue=a:this.value=(this.parent.value||this.parent.createBranch(this.key))[this.key]=a,this.adapt(),this.parent.clearUnresolveds(),this.clearUnresolveds(),n(a)&&(this.length=a.length),this.links.forEach(Y),this.children.forEach(Wb),this.deps.forEach(Y),this.notifyUpstream(),"length"===this.key&&n(this.parent.value)&&(this.parent.length=this.parent.value.length))};b.prototype.createBranch=function(a){a=q(a)?[]:{};this.set(a);
return a};b.prototype.get=function(a,b){if(this._link)return this._link.get(a,b);a&&Ra(this);return b&&b.virtual?this.getVirtual(!1):(a||b&&b.unwrap)&&this.wrapper?this.wrapper.value:this.value};b.prototype.getKeypathModel=function(a){this.keypathModel||(this.keypathModel=new la(this));return this.keypathModel};b.prototype.joinKey=function(a,h){if(this._link)return!h||!1!==!h.lastLink||void 0!==a&&""!==a?this._link.joinKey(a):this;if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var f=
new b(this,a);this.children.push(f);this.childByKey[a]=f}return this.childByKey[a]._link?this.childByKey[a]._link:this.childByKey[a]};b.prototype.mark=function(){if(this._link)return this._link.mark();var a=this.retrieve();if(!t(a,this.value)){var b=this.value;this.value=a;if(b!==a||this.rewrap)this.wrapper&&(this.wrapper.newValue=a),this.adapt();n(a)&&(this.length=a.length);this.children.forEach(Wb);this.links.forEach(Ab);this.deps.forEach(Y);this.clearUnresolveds()}};b.prototype.merge=function(a,
b){var f=this.value,h=a;f===h&&(f=Fg(this));b&&(f=f.map(b),h=h.map(b));var c=f.length,d={},e=0,f=f.map(function(a){var b,f=e;do{b=h.indexOf(a,f);if(-1===b)return-1;f=b+1}while(!0===d[b]&&f<c);b===e&&(e+=1);d[b]=!0;return b});this.parent.value[this.key]=a;this.shuffle(f)};b.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0};b.prototype.set=function(a){this.ticker&&this.ticker.stop();this.applyValue(a)};b.prototype.shuffle=function(a){this.shuffling=!0;for(var b=
a.length;b--;){var f=a[b];b!==f&&(b in this.childByKey&&this.childByKey[b].rebinding(~f?this.joinKey(f):void 0,this.childByKey[b],!0),!~f&&this.keyModels[b]?this.keyModels[b].rebinding(void 0,this.keyModels[b],!1):~f&&this.keyModels[b]&&(this.keyModels[f]||this.childByKey[f].getKeyModel(f),this.keyModels[b].rebinding(this.keyModels[f],this.keyModels[b],!1)))}f=this.length!==this.value.length;this.links.forEach(function(b){return b.shuffle(a)});jb("early");for(b=this.deps.length;b--;)this.deps[b].shuffle&&
this.deps[b].shuffle(a);this.mark();jb("mark");f&&this.notifyUpstream();this.shuffling=!1};b.prototype.teardown=function(){this._link&&this._link.teardown();this.children.forEach(Lc);this.wrapper&&this.wrapper.teardown();this.keypathModel&&this.keypathModel.teardown()};return b}(S),le=new (function(a){function b(){a.call(this,null,"@global");this.value="undefined"!==typeof global?global:window;this.isRoot=!0;this.root=this;this.adaptors=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.getKeypath=function(){return"@global"};b.prototype.registerChange=function(){};return b}(Wa)),ke=/^@[^\(]+\(([^\)]+)\)/,oe=Array.prototype,pe={},Ig=new da("update"),Sg=na("push").model,Qg=na("pop").model,Xg=na("shift").model,fh=na("unshift").model,ah=na("sort").model,Zg=na("splice").model,Ug=na("reverse").model,ue=P&&P.querySelector,rh=new da("insert"),tb=function(a,h,f){this.fragment=a;this.reference=h?h.replace(Hc,".$1"):"";this.callback=f;this.keys=I(h);this.resolved=!1;for(this.contexts=
[];a;)a.context&&(a.context.addUnresolved(this.keys[0],this),this.contexts.push(a.context)),a=a.componentParent||a.parent};tb.prototype.attemptResolution=function(){if(!this.resolved){var a=Ud(this.fragment,this.reference);a&&(this.resolved=!0,this.callback(a))}};tb.prototype.forceResolution=function(){if(!this.resolved){var a=this.fragment.findContext().joinAll(this.keys);this.callback(a);this.resolved=!0}};tb.prototype.rebinding=function(a,h){var b=this;h&&h.removeUnresolved(this.keys[0],this);
a&&J.scheduleTask(function(){return a.addUnresolved(b.keys[0],b)})};tb.prototype.unbind=function(){var a=this;this.fragment&&O(this.fragment.unresolved,this);this.resolved||this.contexts.forEach(function(b){return b.removeUnresolved(a.keys[0],a)})};var kb=function(a,h,f,c){var b=this;this.context=c.context||a;this.callback=f;this.ractive=a;h?this.resolved(h):(this.keypath=c.keypath,this.resolver=new tb(a.fragment,c.keypath,function(a){b.resolved(a)}));!1!==c.init?(this.dirty=!0,this.dispatch()):this.oldValue=
this.newValue;this.defer=c.defer;this.once=c.once;this.strict=c.strict;this.dirty=!1};kb.prototype.cancel=function(){this.cancelled=!0;this.model?this.model.unregister(this):this.resolver.unbind()};kb.prototype.dispatch=function(){this.cancelled||(this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.model?this.model.get():this.newValue,this.dirty=!1)};kb.prototype.handleChange=function(){var a=this;if(!this.dirty){var h=this.model.get();t(h,this.oldValue)||
(this.newValue=h,this.strict&&this.newValue===this.oldValue||(J.addObserver(this,this.defer),this.dirty=!0,this.once&&J.scheduleTask(function(){return a.cancel()})))}};kb.prototype.rebinding=function(a,h){var b=this;a=Sa(this.keypath,a,h);if(a===this.model)return!1;this.model&&this.model.unregister(this);a&&a.addShuffleTask(function(){return b.resolved(a)})};kb.prototype.resolved=function(a){this.model=a;this.keypath=a.getKeypath(this.ractive);this.oldValue=void 0;this.newValue=a.get();a.register(this)};
var lb=function(a,h,f,c,d){var b=this;this.context=d.context||a;this.ractive=a;this.baseModel=h;this.keys=f;this.callback=c;f=f.join("\\.").replace(/\*/g,"(.+)");a=h.getKeypath(a);this.pattern=new RegExp("^"+(a?a+"\\.":"")+""+f+"$");this.oldValues={};this.newValues={};this.defer=d.defer;this.once=d.once;this.strict=d.strict;this.dirty=!1;this.changed=[];this.partial=!1;h.findMatches(this.keys).forEach(function(a){b.newValues[a.getKeypath(b.ractive)]=a.get()});!1!==d.init?this.dispatch():this.oldValues=
this.newValues;h.registerPatternObserver(this)};lb.prototype.cancel=function(){this.baseModel.unregisterPatternObserver(this)};lb.prototype.dispatch=function(){var a=this;Object.keys(this.newValues).forEach(function(b){if(!a.newKeys||a.newKeys[b]){var f=a.newValues[b],h=a.oldValues[b];a.strict&&f===h||t(f,h)||(f=[f,h,b],b&&(b=a.pattern.exec(b))&&(f=f.concat(b.slice(1))),a.callback.apply(a.context,f))}});if(this.partial)for(var h in this.newValues)this.oldValues[h]=this.newValues[h];else this.oldValues=
this.newValues;this.newKeys=null;this.dirty=!1};lb.prototype.notify=function(a){this.changed.push(a)};lb.prototype.shuffle=function(a){if(n(this.baseModel.value)){var b=this.baseModel.getKeypath(this.ractive),f=this.baseModel.value.length,c=1<this.keys.length?"."+this.keys.slice(1).join("."):"";this.newKeys={};for(var d=0;d<a.length;d++)-1!==a[d]&&a[d]!==d&&(this.newKeys[""+b+"."+d+""+c]=!0);for(a=a.touchedFrom;a<f;a++)this.newKeys[""+b+"."+a+""+c]=!0}};lb.prototype.handleChange=function(){var a=
this;if(!this.dirty||this.changed.length){this.dirty||(this.newValues={});if(this.changed.length){var h=0,f=this.baseModel.isRoot?this.changed.map(function(a){return a.map(za).join(".")}):this.changed.map(function(b){return a.baseModel.getKeypath(a.ractive)+"."+b.map(za).join(".")});this.baseModel.findMatches(this.keys).forEach(function(b){var c=b.getKeypath(a.ractive);f.filter(function(a){return 0===c.indexOf(a)||0===a.indexOf(c)}).length&&(h++,a.newValues[c]=b.get())});if(!h)return;this.partial=
!0}else this.baseModel.findMatches(this.keys).forEach(function(b){var f=b.getKeypath(a.ractive);a.newValues[f]=b.get()}),this.partial=!1;J.addObserver(this,this.defer);this.dirty=!0;this.changed.length=0;this.once&&this.cancel()}};var rc=function(a,h,f,c){this.context=a;this.model=h;this.keypath=h.getKeypath();this.callback=f;this.pending=null;h.register(this);!1!==c.init?(this.sliced=[],this.shuffle([]),this.handleChange()):this.sliced=this.slice()};rc.prototype.handleChange=function(){this.pending?
(this.callback(this.pending),this.pending=null):(this.shuffle(this.sliced.map(sh)),this.handleChange())};rc.prototype.shuffle=function(a){var b=this,f=this.slice(),c=[],d=[],e,g={};a.forEach(function(a,f){g[a]=!0;a!==f&&void 0===e&&(e=f);-1===a&&d.push(b.sliced[f])});void 0===e&&(e=a.length);a=f.length;for(var k=0;k<a;k+=1)g[k]||c.push(f[k]);this.pending={inserted:c,deleted:d,start:e};this.sliced=f};rc.prototype.slice=function(){var a=this.model.get();return n(a)?a.slice():[]};var Xf={init:!1,once:!0},
hk=na("pop").path,ik=na("push").path,Qc=[],Rc=!1,Ta=null,Ae=null;!P||Ta&&Ta.parentNode||(Ta=P.createElement("style"),Ta.type="text/css",P.getElementsByTagName("head")[0].appendChild(Ta),Ae=!!Ta.styleSheet);var th=new da("render"),uh=new da("complete"),nf={extend:function(a,h,f){a=Ea(f.adapt);f=h.adapt.slice();for(var b=a.length;b--;)~f.indexOf(a[b])||f.push(a[b]);h.adapt=f},init:function(){}},zh=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,yh=/\/\*[\s\S]*?\*\//g,Bh=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,
Ah=/^(?:@|\d+%)/,Be=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,of={name:"css",extend:function(a,h,f){f.css&&(a=Ua()+Ua()+"-"+Ua()+"-"+Ua()+"-"+Ua()+"-"+Ua()+Ua()+Ua(),f=f.noCssTransform?f.css:xh(f.css,a),h.cssId=a,Qc.push({id:a,styles:f}),Rc=!0)},init:function(a,h,f){f.css&&N("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n\t...\n\tcss: '/* your css */',\n\t...\n});\n\nconst componentInstance = new Component({ ... })\n\t\t")}},
jc={name:"data",extend:function(a,h,f){var b;if(f.data&&w(f.data))for(b in f.data)(a=f.data[b])&&"object"===typeof a&&(w(a)||n(a))&&N("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");h.data=Ce(h.data,f.data)},init:function(a,h,
f){a=Ce(a.prototype.data,f.data);"function"===typeof a&&(a=a.call(h));if(a&&a.constructor===Object)for(var b in a)"function"===typeof a[b]&&(a[b]=T(a[b],h));return a||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.root.set(b);return!0}},Ch=/\$\{([^\}]+)\}/g,Eb=sa(null),Xa,Ad,jk=/^\s+/;Ad=function(a){this.name="ParseError";this.message=a;try{throw Error(a);}catch(h){this.stack=h.stack}};Ad.prototype=Error.prototype;Xa=function(a,h){var b,c,d=0;this.str=a;this.options=
h||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(a){return d=a=d+a.length+1},0);this.init&&this.init(a,h);for(b=[];this.pos<this.str.length&&(c=this.read());)b.push(c);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(b,h):b};Xa.prototype={read:function(a){var b,f,c,d;a||(a=this.converters);b=this.pos;c=a.length;for(f=0;f<c;f+=1)if(this.pos=b,d=a[f](this))return d;return null},getContextMessage:function(a,h){var b=this.getLinePos(a),
c=b[0],d=b[1];if(-1===this.options.contextLines)return[c,d,""+h+" at line "+c+" character "+d];var b=this.lines[c-1],e="",g="";this.options.contextLines&&(e=0>c-1-this.options.contextLines?0:c-1-this.options.contextLines,e=this.lines.slice(e,c-1-e).join("\n").replace(/\t/g,"  "),g=this.lines.slice(c,c+this.options.contextLines).join("\n").replace(/\t/g,"  "),e&&(e+="\n"),g&&(g="\n"+g));var k=0,b=e+b.replace(/\t/g,function(a,b){b<d&&(k+=1);return"  "})+"\n"+Array(d+k).join(" ")+"^----"+g;return[c,
d,""+h+" at line "+c+" character "+d+":\n"+b]},getLinePos:function(a){for(var b=0,f=0;a>=this.lineEnds[b];)f=this.lineEnds[b],b+=1;return[b+1,a-f+1,a]},error:function(a){var b=this.getContextMessage(this.pos,a),f=b[0],c=b[1],b=new Ad(b[2]);b.line=f;b.character=c;b.shortMessage=a;throw b;},matchString:function(a){if(this.str.substr(this.pos,a.length)===a)return this.pos+=a.length,a},matchPattern:function(a){if(a=a.exec(this.remaining()))return this.pos+=a[0].length,a[1]||a[0]},allowWhitespace:function(){this.matchPattern(jk)},
remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}};Xa.extend=function(a){var b,f;b=function(a,b){Xa.call(this,a,b)};b.prototype=sa(this.prototype);for(f in a)bb.call(a,f)&&(b.prototype[f]=a[f]);b.extend=Xa.extend;return b};var He=/^[^\s=]+/,Eh=/^\s+/,Fh=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Gh=/[-/\\^$*+?.()|[\]{}]/g,Je={},Bd=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,
Cd=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Ke={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,
AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,
divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,
nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,
uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,
lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Jh=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Hh=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Ke).join("|")+"));?","g"),Le="function"===typeof String.fromCodePoint,Ih=Le?String.fromCodePoint:String.fromCharCode,Lh=/</g,Mh=/>/g,Kh=/&/g,ec=65533,Nh=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
Oe,Pe,Qe;Oe=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;Pe=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;Qe=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Ph=Ne('"'),Oh=Ne("'"),Zc=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Qh=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Vh=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,bd,Te;bd=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/;
Te=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Xh=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Wh=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/,Sh=/^@(?:keypath|rootpath|index|key|this|global)/,Th=/^\s*\(/,Uh=/^\s*\.{3}/,Yf,Zf;Zf=function(a,c){return function(b){var f;if(f=c(b))return f;if(!b.matchString(a))return null;b.allowWhitespace();(f=ka(b))||b.error("Expected a JavaScript expression");
return{s:a,o:f,t:33}}};(function(){var a,c,f,d;d=["!","~","+","-","typeof"];f=Yh;a=0;for(c=d.length;a<c;a+=1)f=Zf(d[a],f);Yf=f})();var kk=Yf,$f,ag;ag=function(a,c){return function(b){var f,h,d;h=c(b);if(!h)return null;for(;;){f=b.pos;b.allowWhitespace();if(!b.matchString(a)||"in"===a&&/[a-zA-Z_$0-9]/.test(b.remaining().charAt(0)))return b.pos=f,h;b.allowWhitespace();d=c(b);if(!d)return b.pos=f,h;h={t:36,s:a,o:[h,d]}}}};(function(){var a,c,f,d;d="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");
f=kk;a=0;for(c=d.length;a<c;a+=1)f=ag(d[a],f);$f=f})();var Zh=$f,bg={"true":!0,"false":!1,"null":null,undefined:void 0},lk=new RegExp("^(?:"+Object.keys(bg).join("|")+")"),mk=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,nk=/\$\{([^\}]+)\}/g,ok=/^\$\{([^\}]+)\}/,pk=/^\s*$/,ai=Xa.extend({init:function(a,c){this.values=c.values;this.allowWhitespace()},postProcess:function(a){return 1===a.length&&pk.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){if(!a.values)return null;
var b=a.matchPattern(ok);if(b&&a.values.hasOwnProperty(b))return{v:a.values[b]}},function(a){if(a=a.matchPattern(lk))return{v:bg[a]}},function(a){if(a=a.matchPattern(mk))return{v:+a}},function(a){var b=Yc(a),f=a.values;return b&&f?{v:b.v.replace(nk,function(a,b){return b in f?f[b]:b})}:b},function(a){if(!a.matchString("{"))return null;var b={};a.allowWhitespace();if(a.matchString("}"))return{v:b};for(var f;f=$h(a);){b[f.key]=f.value;a.allowWhitespace();if(a.matchString("}"))return{v:b};if(!a.matchString(","))break}return null},
function(a){if(!a.matchString("["))return null;var b=[];a.allowWhitespace();if(a.matchString("]"))return{v:b};for(var f;f=a.read();){b.push(f.v);a.allowWhitespace();if(a.matchString("]"))return{v:b};if(!a.matchString(","))break;a.allowWhitespace()}return null}]}),bi=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(.*\)\s*$/,cd;cd=Xa.extend({converters:[function(a){return ka(a)}],spreadArgs:!0});var ei=/^[^\s"'>\/=]+/,ki=/^on/,ii=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,ji=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,
gi=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,hi=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,fi={"intro-outro":{t:72,v:"t0"},intro:{t:72,v:"t1"},outro:{t:72,v:"t2"},lazy:{t:73,v:"l"},twoway:{t:73,v:"t"},decorator:{t:71}},ci=/^[^\s"'=<>`]+/,li={t:10,exclude:!0},ni=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,mi=/^as/i,qk=/^yield\s*/,si=/^\s*else\s*/,ri=/^\s*elseif\s+/,af={each:52,"if":50,"with":54,unless:51},pi=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,qi=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,
oi=new RegExp("^("+Object.keys(af).join("|")+")\\b"),qb=/^[ \t\f\r\n]*\r?\n/,pb=/\r?\n[ \t\f\r\n]*$/,xi=/[ \t\f\r\n]+/g,ui=/^(?:pre|script|style|textarea)$/i,cf=/^[ \t\f\r\n]+/,df=/[ \t\f\r\n]+$/,vi=/^(?:\r\n|\r|\n)/,wi=/(?:\r\n|\r|\n)$/,zi=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,rk=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,sk=/^[\s\n\/>]/,tk={exclude:!0},ef;ef={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),
rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var uk=/^\x3c!--\s*/,vk=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,wk=/\s*--\x3e/,xk=/^\s*#\s*partial\s+/,yk=[function(a,c){if(!a.matchString(">"))return null;a.allowWhitespace();a.relaxedNames=a.strictRefinement=!0;var b=ka(a);a.relaxedNames=a.strictRefinement=!1;if(!b)return null;var h={t:8};Ia(b,h);
a.allowWhitespace();if(b=Ye(a))h={t:19,z:b,f:[h]};else if(b=ka(a))h={t:4,n:53,f:[h]},Ia(b,h);a.allowWhitespace();a.matchString(c.close)||a.error("Expected closing delimiter '"+c.close+"'");return h},Xe,$e,function(a,c){if(!a.matchPattern(qk))return null;var b=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(c.close)||a.error("expected legal partial name");var h={t:16};b&&(h.n=b);return h},Ze,function(a,c){var b;if(!a.matchString("!"))return null;b=a.remaining().indexOf(c.close);
if(-1!==b)return a.pos+=b+c.close.length,{t:9}}],cg=[function(a,c){var b=ka(a),h;if(!b)return null;a.matchString(c.close)||a.error("Expected closing delimiter '"+c.close+"'");h={t:3};Ia(b,h);return h}],zk=[Xe,$e,Ze],gf;rb.computedStrings=function(a){if(!a)return[];Object.keys(a).forEach(function(b){var f=a[b];"string"===typeof f&&(a[b]=Tc(f))})};var Fb=[nb,function(a){var b,f,c;b=a.pos;if(!a.matchString("\x3c!--"))return null;f=a.remaining();c=f.indexOf("--\x3e");-1===c&&a.error("Illegal HTML - expected closing comment sequence ('--\x3e')");
f=f.substr(0,c);a.pos+=c+3;c={t:9,c:f};a.includeLinePositions&&(c.p=a.getLinePos(b));return c},function(a){var b,f,c,d,e,g,k,l;b=a.pos;if(a.inside||a.inAttribute||!a.matchString("<")||"/"===a.nextChar())return null;f={};a.includeLinePositions&&(f.p=a.getLinePos(b));if(a.matchString("!"))return f.t=18,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),f.a=a.matchPattern(/^(.+?)>/),f;f.t=7;f.e=a.matchPattern(rk);if(!f.e)return null;sk.test(a.nextChar())||a.error("Illegal tag name");
a.allowWhitespace();for(a.inTag=!0;b=nb(a);)!1!==b&&(f.m||(f.m=[]),f.m.push(b)),a.allowWhitespace();a.inTag=!1;a.allowWhitespace();a.matchString("/")&&(c=!0);if(!a.matchString(">"))return null;b=f.e.toLowerCase();var m=a.preserveWhitespace;if(!c&&!Cd.test(f.e)){a.elementStack.push(b);if("script"===b||"style"===b||"textarea"===b)a.inside=b;c=[];d=sa(null);do l=a.pos,(g=a.remaining())||a.error("Missing end "+(1<a.elementStack.length?"tags":"tag")+" ("+a.elementStack.reverse().map(function(a){return"</"+
a+">"}).join("")+")"),Ai(b,g)?(g=yi(a))?(k=!0,g=g.e.toLowerCase(),g!==b&&(a.pos=l,~a.elementStack.indexOf(g)||(l="Unexpected closing tag",Cd.test(g)&&(l+=" (<"+g+"> is a void element - it cannot contain children)"),a.error(l)))):(g=ed(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(k=!0,a.pos=l):(g=a.read(dg))?(d[g.n]&&(a.pos=l,a.error("Duplicate partial definition")),Ja(g.f,a.stripComments,m,!m,!m),d[g.n]=g.f,e=!0):(g=a.read(Fb))?c.push(g):k=!0:k=!0;while(!k);c.length&&(f.f=c);
e&&(f.p=d);a.elementStack.pop()}a.inside=null;return a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(b)?tk:f},function(a){var b,f,c;f=a.remaining();a.textOnlyMode?(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),b=dc(f,b)):(c=a.inside?"</"+a.inside:"<",a.inside&&!a.interpolate[a.inside]?b=f.indexOf(c):(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),!0===a.inAttribute?b.push('"',"'","=","<",">","`"):
a.inAttribute?b.push(a.inAttribute):b.push(c),b=dc(f,b)));if(!b)return null;-1===b&&(b=f.length);a.pos+=b;return a.inside&&"textarea"!==a.inside||a.textOnlyMode?f.substr(0,b):Wc(f.substr(0,b))}],dg=[function(a){var b=a.pos,f=a.standardDelimiters[0],c=a.standardDelimiters[1];if(!a.matchPattern(uk)||!a.matchString(f))return a.pos=b,null;var d=a.matchPattern(vk);ba("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+d+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+d+"}} --\x3e ... \x3c!-- {{/"+
d+"}} --\x3e'");if(!a.matchString(c)||!a.matchPattern(wk))return a.pos=b,null;var b=[],e,g=new RegExp("^\x3c!--\\s*"+Vc(f)+"\\s*\\/\\s*"+d+"\\s*"+Vc(c)+"\\s*--\x3e");do if(a.matchPattern(g))e=!0;else{var k=a.read(Fb);k||a.error("expected closing comment ('\x3c!-- "+f+"/"+d+""+c+" --\x3e')");b.push(k)}while(!e);return{t:17,f:b,n:d}},function(a){var b,f,c,d;b=a.pos;var e=a.standardDelimiters;if(!a.matchString(e[0]))return null;if(!a.matchPattern(xk))return a.pos=b,null;(b=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/))||
a.error("expected legal partial name");a.allowWhitespace();a.matchString(e[1])||a.error("Expected closing delimiter '"+e[1]+"'");f=[];do ed(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]})?d=!0:((c=a.read(Fb))||a.error("Expected "+e[0]+"/partial"+e[1]),f.push(c));while(!d);return{t:17,n:b,f:f}}];gf=Xa.extend({init:function(a,c){var b=c.tripleDelimiters||["{{{","}}}"],h=c.staticDelimiters||["[[","]]"],d=c.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=c.delimiters||["{{",
"}}"];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:yk},{isStatic:!1,isTriple:!0,open:b[0],close:b[1],readers:cg},{isStatic:!0,isTriple:!1,open:h[0],close:h[1],readers:zk},{isStatic:!0,isTriple:!0,open:d[0],close:d[1],readers:cg}];this.contextLines=c.contextLines||0;this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!c.interpolate||!1!==c.interpolate.script,style:!c.interpolate||!1!==c.interpolate.style,
textarea:!0};!0===c.sanitize&&(c.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0});this.stripComments=!1!==c.stripComments;this.preserveWhitespace=c.preserveWhitespace;this.sanitizeElements=c.sanitize&&c.sanitize.elements;this.sanitizeEventAttributes=c.sanitize&&c.sanitize.eventAttributes;this.includeLinePositions=c.includeLinePositions;this.textOnlyMode=c.textOnlyMode;this.csp=
c.csp},postProcess:function(a){if(!a.length)return{t:[],v:4};0<this.sectionDepth&&this.error("A section was left open");Ja(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);if(!1!==this.csp){var b={};ff(a[0].t,b);Object.keys(b).length&&(a[0].e=b)}return a[0]},converters:[function(a){for(var b=[],f=sa(null),c=!1,d=a.preserveWhitespace;a.pos<a.str.length;){var e=a.pos,g,k;(k=a.read(dg))?(f[k.n]&&(a.pos=e,a.error("Duplicated partial definition")),Ja(k.f,
a.stripComments,d,!d,!d),f[k.n]=k.f,c=!0):(g=a.read(Fb))?b.push(g):a.error("Unexpected template content")}a={v:4,t:b};c&&(a.p=f);return a}],sortMustacheTags:function(){this.tags.sort(function(a,c){return c.open.length-a.open.length})}});var Ak="delimiters tripleDelimiters staticDelimiters staticTripleDelimiters csp interpolate preserveWhitespace sanitize stripComments contextLines".split(" "),Fe="Either preparse or use a ractive runtime source that includes the parser. ",Bi="Either use:\n\n\tRactive.parse.computedStrings( component.computed )\n\nat build time to pre-convert the strings to functions, or use functions instead of strings in computed properties.",
ra={fromId:function(a,c){if(!P){if(c&&c.noThrow)return;throw Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.");}a&&(a=a.replace(/^#/,""));var b;if(!(b=P.getElementById(a))){if(c&&c.noThrow)return;throw Error("Could not find template element with id #"+a);}if("SCRIPT"!==b.tagName.toUpperCase()){if(c&&c.noThrow)return;throw Error("Template element with id #"+a+", must be a <script> element");}return"textContent"in b?b.textContent:b.innerHTML},isParsed:function(a){return"string"!==
typeof a},getParseOptions:function(a){a.defaults&&(a=a.defaults);return Ak.reduce(function(b,f){b[f]=a[f];return b},{})},parse:function(a,c){Uc(rb,"template",Fe);var b=rb(a,c);Ge(b);return b},parseFor:function(a,c){return this.parse(a,this.getParseOptions(c))}},gd={name:"template",extend:function(a,c,f){"template"in f&&(a=f.template,c.template="function"===typeof a?a:fd(a,c))},init:function(a,c,f){a=(a="template"in f?f.template:a.prototype.template)||{v:4,t:[]};"function"===typeof a&&(f=a,a=jf(c,
f),c._config.template={fn:f,result:a});a=fd(a,c);c.template=a.t;a.p&&kf(c.partials,a.p)},reset:function(a){var b;if((b=a._config.template)&&b.fn){var f=jf(a,b.fn);b=f!==b.result?b.result=f:void 0}else b=void 0;if(b)return b=fd(b,a),a.template=b.t,kf(a.partials,b.p,!0),!0}},Pb=function(a,c){this.name=a;this.useDefaults=c};Pb.prototype.extend=function(a,c,f){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?c:c.constructor,f)};Pb.prototype.init=function(){};Pb.prototype.configure=function(a,
c,f){var b=this.name;f=f[b];a=sa(a[b]);for(var h in f)a[h]=f[h];c[b]=a};Pb.prototype.reset=function(a){var b=a[this.name],f=!1;Object.keys(b).forEach(function(a){var c=b[a];c._fn&&(c._fn.isOwner?b[a]=c._fn:delete b[a],f=!0)});return f};var Hb="adaptors components computed decorators easing events interpolators partials transitions".split(" ").map(function(a){return new Pb(a,"computed"===a)}),sc={adapt:nf,css:of,data:jc,template:gd},Dd=Object.keys(Of),Fi=pf(Dd.filter(function(a){return!sc[a]})),Hi=
pf(Dd.concat(Hb.map(function(a){return a.name}))),eg=[].concat(Dd.filter(function(a){return!Hb[a]&&!sc[a]}),Hb,sc.template,sc.css),od={extend:function(a,c,f){return mf("extend",a,c,f)},init:function(a,c,f){return mf("init",a,c,f)},reset:function(a){return eg.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:eg},Bk=["template","partials","components","decorators","events"],Ck=new da("complete"),Dk=new da("reset"),Ek=new da("render"),Fk=new da("unrender"),X=function(a){this.parentFragment=
a.parentFragment;this.ractive=a.parentFragment.ractive;this.template=a.template;this.index=a.index;this.type=a.template.t;this.dirty=!1};X.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};X.prototype.destroyed=function(){};X.prototype.find=function(){return null};X.prototype.findAll=function(){};X.prototype.findComponent=function(){return null};X.prototype.findAllComponents=function(){};X.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)};
X.prototype.shuffled=function(){this.fragment&&this.fragment.shuffled()};X.prototype.valueOf=function(){return this.toString()};var fg=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function(a){a&&Ra(this);return(a=this.parent.get())?a[this.key]:void 0};b.prototype.handleChange=function(){this.dirty=!0;this.deps.forEach(Y);this.children.forEach(Y);this.clearUnresolveds()};b.prototype.joinKey=function(a){if(void 0===
a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var f=new b(this,a);this.children.push(f);this.childByKey[a]=f}return this.childByKey[a]};return b}(Wa),qf=function(a){function b(b,c){var f=this;a.call(this,b.ractive.viewmodel,null);this.fragment=b;this.template=c;this.dirty=this.isReadonly=!0;this.fn=cc(c.s,c.r.length);this.resolvers=[];this.models=this.template.r.map(function(a,b){var c=qa(f.fragment,a);c||Ji(f,a,b);return c});this.dependencies=[];this.shuffle=void 0;this.bubble()}b.prototype=
Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(a){void 0===a&&(a=!0);this.registered&&delete this.root.expressions[this.keypath];this.keypath=void 0;a&&(this.dirty=!0,this.handleChange())};b.prototype.get=function(a){a&&Ra(this);this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.wrapper&&(this.wrapper.newValue=this.value),this.adapt());return a&&this.wrapper?this.wrapper.value:this.value};b.prototype.getKeypath=function(){var a=this;if(!this.template)return"@undefined";
this.keypath||(this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(b,f){if(f>=a.models.length)return b;var c=a.models[f];return c?c.getKeypath():"@undefined"}),this.root.expressions[this.keypath]=this,this.registered=!0);return this.keypath};b.prototype.getValue=function(){var a=this;yb.push(zb=[]);var b;try{var c=this.models.map(function(a){return a?a.get(!0):void 0});b=this.fn.apply(this.fragment.ractive,c)}catch(Zd){N("Failed to compute "+this.getKeypath()+": "+(Zd.message||Zd))}var d=
Vd();this.dependencies.filter(function(a){return!~d.indexOf(a)}).forEach(function(b){b.unregister(a);O(a.dependencies,b)});d.filter(function(b){return!~a.dependencies.indexOf(b)}).forEach(function(b){b.register(a);a.dependencies.push(b)});return b};b.prototype.handleChange=function(){this.dirty=!0;this.links.forEach(Ab);this.deps.forEach(Y);this.children.forEach(Y);this.clearUnresolveds()};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=
new fg(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};b.prototype.mark=function(){this.handleChange()};b.prototype.rebinding=function(a,b,c){var f=this.models.indexOf(b);~f&&(a=Sa(this.template.r[f],a,b),a!==b&&(b.unregister(this),this.models.splice(f,1,a),a&&a.addShuffleRegister(this,"mark")));this.bubble(!c)};b.prototype.retrieve=function(){return this.get()};b.prototype.teardown=function(){var b=this;this.unbind();this.fragment=void 0;this.dependencies&&this.dependencies.forEach(function(a){return a.unregister(b)});
a.prototype.teardown.call(this)};b.prototype.unregister=function(b){a.prototype.unregister.call(this,b);this.deps.length||this.teardown()};b.prototype.unbind=function(){this.resolvers.forEach(Ha)};return b}(Wa),Gk=function(a){function b(b,c){a.call(this,b,c)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.applyValue=function(a){if(!t(a,this.value))for(var b=this.parent,f=[this.key];b;){if(b.base){b.model.joinAll(f).applyValue(a);break}f.unshift(b.key);b=b.parent}};
b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var f=new b(this,a);this.children.push(f);this.childByKey[a]=f}return this.childByKey[a]};b.prototype.retrieve=function(){var a=this.parent.get();return a&&this.key in a?a[this.key]:void 0};return b}(Wa),Ki=function(a){function b(b,c){var f=this;a.call(this,null,null);this.dirty=!0;this.root=b.ractive.viewmodel;this.template=c;this.resolvers=[];this.base=ic(b,c);var d;this.base||(d=b.resolve(c.r,
function(a){f.base=a;f.bubble();O(f.resolvers,d)}),this.resolvers.push(d));var h=this.intermediary={handleChange:function(){return f.handleChange()},rebinding:function(a,b){if(b===f.base)a=Sa(c,a,b),a!==f.base&&(f.base.unregister(h),f.base=a);else{var d=f.members.indexOf(b);~d&&(a=Sa(c.m[d].n,a,b),a!==f.members[d]&&f.members.splice(d,1,a))}a!==b&&b.unregister(h);a&&a.addShuffleTask(function(){return a.register(h)});f.bubble()}};this.members=c.m.map(function(a,c){if("string"===typeof a)return{get:function(){return a}};
var d,e;if(30===a.t)return(d=qa(b,a.n))?d.register(h):(e=b.resolve(a.n,function(a){f.members[c]=a;a.register(h);f.handleChange();O(f.resolvers,e)}),f.resolvers.push(e)),d;d=new qf(b,a);d.register(h);return d});this.isUnresolved=!0;this.bubble()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){this.base&&(this.dirty||this.handleChange())};b.prototype.forceResolution=function(){this.resolvers.forEach(function(a){return a.forceResolution()});this.dirty=
!0;this.bubble()};b.prototype.get=function(a){if(this.dirty){this.bubble();for(var b=this.members.length,f=!0;f&&b--;)this.members[b]||(f=!1);this.base&&f&&(b=this.members.map(function(a){return za(String(a.get()))}),b=this.base.joinAll(b),b!==this.model&&(this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this)),this.model=b,this.parent=b.parent,this.model.register(this),this.model.registerTwowayBinding(this),this.keypathModel&&this.keypathModel.handleChange()));this.value=
this.model?this.model.get(a):void 0;this.dirty=!1;this.mark();return this.value}return this.model?this.model.get(a):void 0};b.prototype.getValue=function(){this.value=this.model?this.model.get():void 0;for(var a=this.bindings.length;a--;){var b=this.bindings[a].getValue();if(b!==this.value)return b}return(a=fe(this.deps))?a.value:this.value};b.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"};b.prototype.handleChange=function(){this.dirty=!0;this.mark()};b.prototype.joinKey=
function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=new Gk(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};b.prototype.mark=function(){this.dirty&&this.deps.forEach(Y);this.links.forEach(Ab);this.children.forEach(Wb);this.clearUnresolveds()};b.prototype.retrieve=function(){return this.value};b.prototype.rebinding=function(){};b.prototype.set=function(a){if(!this.model)throw Error("Unresolved reference expression. This should not happen!");
this.model.set(a)};b.prototype.unbind=function(){this.resolvers.forEach(Ha);this.model&&(this.model.unregister(this),this.model.unregisterTwowayBinding(this))};return b}(Wa),Hk=function(a){function b(b){a.call(this,b);this.fragment=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){rf(this);this.fragment=(new L({owner:this,template:this.template.f})).bind()};b.prototype.detach=function(){return this.fragment?this.fragment.detach():g()};b.prototype.find=
function(a){if(this.fragment)return this.fragment.find(a)};b.prototype.findAll=function(a,b){this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function(a){return this.fragment&&this.fragment.firstNode(a)};b.prototype.rebinding=function(){var a=this;this.locked||(this.locked=!0,J.scheduleTask(function(){a.locked=
!1;rf(a)}))};b.prototype.render=function(a){this.rendered=!0;this.fragment&&this.fragment.render(a)};b.prototype.toString=function(a){return this.fragment?this.fragment.toString(a):""};b.prototype.unbind=function(){this.aliases={};this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment.update())};return b}(X),Qi=/\s+/,Pi={"float":"cssFloat"},
Ni=/\/\*(?:[\s\S]*?)\*\//g,Mi=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\1).)*\2/gi,Oi=/\0(\d+)/g,Xi=[void 0,"text","search","url","email","hidden","password","search","reset","submit"],Ik={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",
novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Jf=function(a){function b(b){a.call(this,b);this.name=b.template.n;this.namespace=null;this.owner=b.owner||b.parentFragment.owner||b.element||oa(b.parentFragment);this.element=b.element||(this.owner.attributeByName?this.owner:oa(b.parentFragment));this.parentFragment=b.parentFragment;this.ractive=this.parentFragment.ractive;this.rendered=!1;this.fragment=this.updateDelegate=null;this.element.attributeByName[this.name]=
this;n(b.template.f)?this.fragment=new L({owner:this,template:b.template.f}):(this.value=b.template.f,0===this.value&&(this.value=""));if(this.interpolator=this.fragment&&1===this.fragment.items.length&&2===this.fragment.items[0].type&&this.fragment.items[0])this.interpolator.owner=this}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind()};b.prototype.bubble=function(){this.dirty||(this.parentFragment.bubble(),this.element.bubble(),
this.dirty=!0)};b.prototype.destroyed=function(){this.updateDelegate(!0)};b.prototype.getString=function(){return this.fragment?this.fragment.toString():null!=this.value?""+this.value:""};b.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():Bd.test(this.name)?!0:this.value};b.prototype.render=function(){var a=this.element.node;this.node=a;if(!a.namespaceURI||a.namespaceURI===Sf.html){this.propertyName=Ik[this.name]||this.name;void 0!==a[this.propertyName]&&(this.useProperty=
!0);if(Bd.test(this.name)||this.isTwoway)this.isBoolean=!0;"value"===this.propertyName&&(a._ractive.value=this.value)}if(a.namespaceURI){var b=this.name.indexOf(":");if(-1!==b){a:{for(var b=this.name.slice(0,b),c="xmlns:"+b;a;){if(a.hasAttribute&&a.hasAttribute(c)){a=a.getAttribute(c);break a}a=a.parentNode}a=Sf[b]}this.namespace=a}else this.namespace=a.namespaceURI}this.rendered=!0;this.updateDelegate=Ri(this);this.updateDelegate()};b.prototype.toString=function(){var a=this.getValue();if("value"!==
this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.styleName&&!this.inlineClass)return Bd.test(this.name)?a?this.name:"":null==a?"":(a=e(this.getString()))?""+this.name+'="'+
a+'"':this.name}};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(){this.updateDelegate(!0);this.rendered=!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.rendered&&this.updateDelegate(),this.isTwoway&&!this.locked&&this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get()))};return b}(X),Jk=function(a){function b(b){a.call(this,b);this.owner=b.owner||b.parentFragment.owner||oa(b.parentFragment);
this.element=this.owner.attributeByName?this.owner:oa(b.parentFragment);this.flag="l"===b.template.v?"lazy":"twoway";7===this.element.type&&(n(b.template.f)&&(this.fragment=new L({owner:this,template:b.template.f})),this.interpolator=this.fragment&&1===this.fragment.items.length&&2===this.fragment.items[0].type&&this.fragment.items[0])}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind();jd(this,this.getValue(),!0)};b.prototype.bubble=
function(){this.dirty||(this.element.bubble(),this.dirty=!0)};b.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():"value"in this?this.value:"f"in this.template?this.template.f:!0};b.prototype.render=function(){jd(this,this.getValue(),!0)};b.prototype.toString=function(){return""};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind();delete this.element[this.flag]};b.prototype.unrender=function(){this.element.rendered&&this.element.recreateTwowayBinding()};b.prototype.update=
function(){this.dirty&&(this.fragment&&this.fragment.update(),jd(this,this.getValue(),!0))};return b}(X),tf=P?Ca("div"):null,Va=!1,gg=function(a){function b(b){a.call(this,b);this.attributes=[];this.owner=b.owner;this.fragment=new L({ractive:this.ractive,owner:this,template:this.template});this.fragment.findNextNode=x;this.dirty=!1}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment.bind()};b.prototype.bubble=function(){this.dirty||(this.dirty=
!0,this.owner.bubble())};b.prototype.render=function(){if(this.node=this.owner.node)this.isSvg="http://www.w3.org/2000/svg"===this.node.namespaceURI;Va=!0;this.rendered||this.fragment.render();Va=!1;this.dirty=this.rendered=!0;this.update()};b.prototype.toString=function(){return this.fragment.toString()};b.prototype.unbind=function(){this.fragment.unbind()};b.prototype.unrender=function(){this.rendered=!1;this.fragment.unrender()};b.prototype.update=function(){var a=this,b,c;this.dirty&&(this.dirty=
!1,Va=!0,this.fragment.update(),Va=!1,this.rendered&&this.node&&(b=this.fragment.toString(),c=ij(b,this.isSvg),this.attributes.filter(function(a){a:{for(var b=c.length;b--;)if(c[b].name===a.name){a=!1;break a}a=!0}return a}).forEach(function(b){a.node.removeAttribute(b.name)}),c.forEach(function(b){a.node.setAttribute(b.name,b.value)}),this.attributes=c))};return b}(X),Qb="pop push reverse shift sort splice unshift".split(" "),Ed=[];Qb.forEach(function(a){Ka(Ed,a,{value:function(){for(var b=[],f=
arguments.length;f--;)b[f]=arguments[f];b=ne(this.length,a,b);this._ractive.wrappers.forEach(function(a){a.magic&&(a.magic.locked=!0)});f=Array.prototype[a].apply(this,arguments);J.start();this._ractive.setting=!0;for(var c=this._ractive.wrappers.length;c--;)jj(this._ractive.wrappers[c],this,a,b);J.end();this._ractive.setting=!1;this._ractive.wrappers.forEach(function(a){a.magic&&(a.magic.locked=!1)});return f}})});var tc,Fd;({}).__proto__?(tc=function(a){return a.__proto__=Ed},Fd=function(a){return a.__proto__=
Array.prototype}):(tc=function(a){for(var b=Qb.length;b--;){var f=Qb[b];Ka(a,f,{value:Ed[f],configurable:!0})}},Fd=function(a){for(var b=Qb.length;b--;)delete a[Qb[b]]});tc.unpatch=Fd;var hg=tc,md={filter:function(a){return n(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,c,f){return new uc(a,c,f)}},uc=function(a,c){this.root=a;this.value=c;this.__model=null;c._ractive||(Ka(c,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),hg(c));c._ractive.instances[a._guid]||(c._ractive.instances[a._guid]=
0,c._ractive.instances.push(a));c._ractive.instances[a._guid]+=1;c._ractive.wrappers.push(this)};uc.prototype.get=function(){return this.value};uc.prototype.reset=function(a){return this.value===a};uc.prototype.teardown=function(){var a,c,f,d;a=this.value;c=a._ractive;f=c.wrappers;d=c.instances;if(c.setting)return!1;c=f.indexOf(this);if(-1===c)throw Error("Something went wrong in a rather interesting way");f.splice(c,1);if(f.length){if(--d[this.root._guid],!d[this.root._guid]){c=d.indexOf(this.root);
if(-1===c)throw Error("Something went wrong in a rather interesting way");d.splice(c,1)}}else delete a._ractive,hg.unpatch(this.value)};var Gd;try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),Gd={filter:function(a){return a&&"object"===typeof a},wrap:function(a,c,f){return new Rb(a,c,f)}}}catch(b){Gd=!1}var ld=Gd,Rb=function(a,c,f){var b=this;this.ractive=a;this.value=c;this.keypath=f;this.originalDescriptors={};Object.keys(c).forEach(function(c){var d=Object.getOwnPropertyDescriptor(b.value,
c);b.originalDescriptors[c]=d;var h=f?""+f+"."+za(c):za(c),d=kj(d,a,h,b);Object.defineProperty(b.value,c,d)})};Rb.prototype.get=function(){return this.value};Rb.prototype.reset=function(a){return this.value===a};Rb.prototype.set=function(a,c){this.value[a]=c};Rb.prototype.teardown=function(){var a=this;Object.keys(this.value).forEach(function(b){var c=Object.getOwnPropertyDescriptor(a.value,b);if(c.set&&c.set.__magic){a:if(c.set&&c.set.__magic)for(var d=c.set.__magic,h=d.length;h--;){var e=d[h];if(void 0===
e.ractive&&void 0===e.keypath){d.splice(h,1);break a}}1===c.set.__magic.dependants.length&&Object.defineProperty(a.value,b,c.set.__magic.originalDescriptor)}})};var vc=function(a,c,f){this.value=c;this.magic=!0;this.magicWrapper=ld.wrap(a,c,f);this.arrayWrapper=md.wrap(a,c,f);this.arrayWrapper.magic=this.magicWrapper;Object.defineProperty(this,"__model",{get:function(){return this.arrayWrapper.__model},set:function(a){this.arrayWrapper.__model=a}})};vc.prototype.get=function(){return this.value};
vc.prototype.teardown=function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()};vc.prototype.reset=function(a){return this.arrayWrapper.reset(a)&&this.magicWrapper.reset(a)};var uj={filter:function(a,c,f){return ld.filter(a,c,f)&&md.filter(a)},wrap:function(a,c,f){return new vc(a,c,f)}},ig=function(a){function b(b,c,d){a.call(this,null,null);this.root=this.parent=b;this.signature=c;this.isExpression=(this.key=d)&&"@"===d[0];this.isReadonly=!this.signature.setter;this.context=b.computationContext;
this.dependencies=[];this.children=[];this.childByKey={};this.deps=[];this.dirty=!0;this.shuffle=void 0}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.get=function(a){a&&Ra(this);this.dirty&&(this.dirty=!1,this.value=this.getValue(),this.wrapper&&(this.wrapper.newValue=this.value),this.adapt());return a&&this.wrapper?this.wrapper.value:this.value};b.prototype.getValue=function(){yb.push(zb=[]);var a;try{a=this.signature.getter.call(this.context)}catch(cb){if(N("Failed to compute "+
this.getKeypath()+": "+(cb.message||cb)),Qf){console.groupCollapsed&&console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var b=lj(this.signature.getterString),c;if(this.signature.getterUseStack){a:if(c=cb.stack){c=c.split("\n");for(var d=ig.name+".getValue",h=[],e=c.length,g=1;g<e;g+=1){var k=c[g];if(~k.indexOf(d)){c=h.join("\n");break a}else h.push(k)}c=void 0}else c="";c="\n\n"+c}else c="";console.error(""+cb.name+": "+cb.message+
"\n\n"+b+""+c);console.groupCollapsed&&console.groupEnd()}}b=Vd();this.setDependencies(b);"value"in this&&a!==this.value&&this.registerChange(this.getKeypath(),a);return a};b.prototype.handleChange=function(){this.dirty=!0;this.links.forEach(Ab);this.deps.forEach(Y);this.children.forEach(Y);this.clearUnresolveds()};b.prototype.joinKey=function(a){if(void 0===a||""===a)return this;if(!this.childByKey.hasOwnProperty(a)){var b=new fg(this,a);this.children.push(b);this.childByKey[a]=b}return this.childByKey[a]};
b.prototype.mark=function(){this.handleChange()};b.prototype.rebinding=function(a,b){a!==b&&this.handleChange()};b.prototype.set=function(a){if(!this.signature.setter)throw Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(a);this.mark()};b.prototype.setDependencies=function(a){for(var b=this.dependencies.length;b--;){var c=this.dependencies[b];~a.indexOf(c)||c.unregister(this)}for(b=a.length;b--;)c=a[b],~this.dependencies.indexOf(c)||c.register(this);this.dependencies=
a};b.prototype.teardown=function(){for(var b=this.dependencies.length;b--;)this.dependencies[b]&&this.dependencies[b].unregister(this);this.root.computations[this.key]===this&&delete this.root.computations[this.key];a.prototype.teardown.call(this)};b.prototype.unregister=function(b){a.prototype.unregister.call(this,b);this.isExpression&&0===this.deps.length&&this.teardown()};return b}(Wa),Kk=function(a){function b(b){a.call(this,null,"");this.value=b;this.isRoot=!0;this.root=this;this.adaptors=[];
this.ractive=b;this.changes={}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getKeypath=function(){return"@this"};return b}(Wa),jg=Object.prototype.hasOwnProperty,rj=function(a){function b(b){a.call(this,null,null);this.changes={};this.isRoot=!0;this.root=this;this.ractive=b.ractive;this.value=b.data;this.adaptors=b.adapt;this.adapt();this.computationContext=b.ractive;this.computations={};this.expressions={}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.applyChanges=function(){this._changeHash={};this.flush();return this._changeHash};b.prototype.compute=function(a,b){var c=new ig(this,b,a);return this.computations[a]=c};b.prototype.createLink=function(a,b,c){a=I(a);for(var f=this;a.length;)f=a.shift(),f=this.childByKey[f]||this.joinKey(f);return f.link(b,c)};b.prototype.get=function(a,b){a&&Ra(this);if(b&&!1===b.virtual)return this.value;for(var c=this.getVirtual(),f=Object.keys(this.computations),d=f.length;d--;){var h=this.computations[f[d]];
h.isExpression||(c[f[d]]=h.get())}return c};b.prototype.getKeypath=function(){return""};b.prototype.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new Kk(this.ractive))};b.prototype.getValueChildren=function(){var b=a.prototype.getValueChildren.call(this,this.value);this.children.forEach(function(a){if(a._link){var c=b.indexOf(a);~c?b.splice(c,1,a._link):b.push(a._link)}});for(var c in this.computations)b.push(this.computations[c]);return b};b.prototype.handleChange=function(){this.deps.forEach(Y)};
b.prototype.has=function(a){var b=this.value;a=va(a);if(jg.call(b,a)||a in this.computations||this.childByKey[a]&&this.childByKey[a]._link||a in this.expressions)return!0;for(b=b.constructor;b!==Function&&b!==Array&&b!==Object;){if(jg.call(b.prototype,a))return!0;b=b.constructor}return!1};b.prototype.joinKey=function(b,c){return"@global"===b?le:"@this"===b?this.getRactiveModel():this.expressions.hasOwnProperty(b)?(N("Accessing expression keypaths ("+b.substr(1)+") from the instance is deprecated. You can used a getNodeInfo or event object to access keypaths with expression context."),
this.expressions[b]):this.computations.hasOwnProperty(b)?this.computations[b]:a.prototype.joinKey.call(this,b,c)};b.prototype.map=function(a,b){this.joinKey(a).link(b)};b.prototype.rebinding=function(){};b.prototype.set=function(a){var b=this.wrapper;b?b.reset&&!1!==b.reset(a)||(b.teardown(),this.wrapper=null,this.value=a,this.adapt()):(this.value=a,this.adapt());this.deps.forEach(Y);this.children.forEach(Wb);this.clearUnresolveds()};b.prototype.retrieve=function(){return this.wrapper?this.wrapper.get():
this.value};b.prototype.update=function(){};return b}(Wa),pj=new da("construct"),qj="adaptors components decorators easing events interpolators partials transitions".split(" "),vj=0,Hd=function(a){this.hook=new da(a);this.inProcess={};this.queue={}};Hd.prototype.begin=function(a){this.inProcess[a._guid]=!0};Hd.prototype.end=function(a){var b=a.parent;b&&this.inProcess[b._guid]?uf(this.queue,b).push(a):vf(this,a);delete this.inProcess[a._guid]};var wj=new da("config"),wf=new Hd("init"),Id=function(a,
c){-1!==a.indexOf("*")&&M('Only component proxy-events may contain "*" wildcards, <'+c.name+" on-"+a+'="..."/> is not valid');this.name=a;this.owner=c;this.handler=this.node=null};Id.prototype.listen=function(a){var b=this.node=this.owner.node,c=this.name;"on"+c in b||aa(hb(c,"events"));b.addEventListener(c,this.handler=function(c){a.fire({node:b,original:c})},!1)};Id.prototype.unlisten=function(){this.node.removeEventListener(this.name,this.handler,!1)};var Jd=function(a,c){this.eventPlugin=a;this.owner=
c;this.handler=null};Jd.prototype.listen=function(a){var b=this.owner.node;this.handler=this.eventPlugin(b,function(c){void 0===c&&(c={});c.node=c.node||b;a.fire(c)})};Jd.prototype.unlisten=function(){this.handler.teardown()};var wc=function(a,c){this.ractive=a;this.name=c;this.handler=null};wc.prototype.listen=function(a){var b=this.ractive;this.handler=b.on(this.name,function(){var c;arguments.length&&arguments[0]&&arguments[0].node&&(c=Array.prototype.shift.call(arguments),c.component=b);var d=
Array.prototype.slice.call(arguments);a.fire(c,d);return!1})};wc.prototype.unlisten=function(){this.handler.cancel()};var Lk=/^(event|arguments)(\..+)?$/,Mk=/^\$(\d+)(\..+)?$/,ua=function(a){var b=this;this.owner=a.owner||a.parentFragment.owner||oa(a.parentFragment);this.element=this.owner.attributeByName?this.owner:oa(a.parentFragment);this.template=a.template;this.parentFragment=a.parentFragment;this.ractive=a.parentFragment.ractive;this.events=[];15===this.element.type?this.template.n.split("-").forEach(function(a){b.events.push(new wc(b.element.instance,
a))}):this.template.n.split("-").forEach(function(a){var c=wa("events",b.ractive,a);b.events.push(c?new Jd(c,b.element):new Id(a,b.element))});this.args=this.action=this.models=this.resolvers=this.context=null};ua.prototype.bind=function(){var a=this;this.context=this.parentFragment.findContext();var c=this.template.f;c.x?(this.fn=cc(c.x.s,c.x.r.length),this.resolvers=[],this.models=c.x.r.map(function(b,c){var f=Lk.exec(b);if(f)return{special:f[1],keys:f[2]?I(f[2].substr(1)):[]};if(f=Mk.exec(b))return{special:"arguments",
keys:[f[1]-1].concat(f[2]?I(f[2].substr(1)):[])};var d;(f=qa(a.parentFragment,b))?f.register(a):(d=a.parentFragment.resolve(b,function(b){a.models[c]=b;O(a.resolvers,d);b.register(a)}),a.resolvers.push(d));return f})):(this.action="string"===typeof c?c:"string"===typeof c.n?c.n:new L({owner:this,template:c.n}),this.args=c.a?"string"===typeof c.a?[c.a]:c.a:c.d?new L({owner:this,template:c.d}):[]);this.action&&"string"!==typeof this.action&&this.action.bind();this.args&&c.d&&this.args.bind()};ua.prototype.bubble=
function(){this.dirty||(this.dirty=!0,this.owner.bubble())};ua.prototype.destroyed=function(){this.events.forEach(function(a){return a.unlisten()})};ua.prototype.fire=function(a,c){void 0===c&&(c=[]);a&&!a.hasOwnProperty("_element")&&se(a,this.owner);if(this.fn){var b=[];a&&c.unshift(a);this.models&&this.models.forEach(function(f){if(!f)return b.push(void 0);if(f.special){var d="event"===f.special?a:c;for(f=f.keys.slice();f.length;)d=d[f.shift()];return b.push(d)}if(f.wrapper)return b.push(f.wrapper.value);
b.push(f.get())});var d=this.ractive,h=d.event;d.event=a;var e;!1===this.fn.apply(d,b).pop()&&(e=a.original)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation());d.event=h}else d=this.action.toString(),h=this.template.f.d?this.args.getArgsList():this.args,c.length&&(h=h.concat(c)),a&&(a.name=d),Qd(this.ractive,d,{event:a,args:h})};ua.prototype.handleChange=function(){};ua.prototype.rebinding=function(a,c){var b=this;if(this.models){var d=this.models.indexOf(c);~d&&(this.models.splice(d,
1,a),c.unregister(this),a&&a.addShuffleTask(function(){return a.register(b)}))}};ua.prototype.render=function(){var a=this;J.scheduleTask(function(){return a.events.forEach(function(b){return b.listen(a)},!0)})};ua.prototype.toString=function(){return""};ua.prototype.unbind=function(){var a=this;this.template.f.m?(this.resolvers&&this.resolvers.forEach(Ha),this.resolvers=[],this.models&&this.models.forEach(function(b){b.unregister&&b.unregister(a)}),this.models=null):(this.action&&this.action.unbind&&
this.action.unbind(),this.args&&this.args.unbind&&this.args.unbind())};ua.prototype.unrender=function(){this.events.forEach(function(a){return a.unlisten()})};ua.prototype.update=function(){!this.method&&this.dirty&&(this.dirty=!1,this.action&&this.action.update&&this.action.update(),this.args&&this.args.update&&this.args.update())};var Nk=new da("teardown"),Tj=function(a){function b(b,c){var f=this;a.call(this,b);this.type=15;var d=sa(c.prototype);this.instance=d;this.name=b.template.e;this.parentFragment=
b.parentFragment;this.liveQueries=[];d.el&&N("The <"+this.name+"> component has a default 'el' property; it has been disregarded");var h=b.template.p||{};"content"in h||(h.content=b.template.f||[]);this._partials=h;this.yielders={};for(var e=b.parentFragment,g;e;){if(16===e.owner.type){g=e.owner.container;break}e=e.parent}d.parent=this.parentFragment.ractive;d.container=g||null;d.root=d.parent.root;d.component=this;kd(this.instance,{partials:h});d._inlinePartials=h;this.attributeByName={};this.attributes=
[];var k=[];(this.template.m||[]).forEach(function(a){switch(a.t){case 13:case 70:case 72:f.attributes.push(nc({owner:f,parentFragment:f.parentFragment,template:a}));break;case 73:case 71:break;default:k.push(a)}});this.attributes.push(new gg({owner:this,parentFragment:this.parentFragment,template:k}));this.eventHandlers=[];this.template.v&&this.setupEvents()}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.attributes.forEach(Vb);nd(this.instance,
{partials:this._partials},{cssIds:this.parentFragment.cssIds});this.eventHandlers.forEach(Vb);this.bound=!0};b.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.parentFragment.bubble())};b.prototype.checkYielders=function(){var a=this;Object.keys(this.yielders).forEach(function(b){if(1<a.yielders[b].length)throw J.end(),Error("A component template can only have one {{yield"+(b?" "+b:"")+"}} declaration at a time");})};b.prototype.destroyed=function(){this.instance.fragment&&this.instance.fragment.destroyed()};
b.prototype.detach=function(){return this.instance.fragment.detach()};b.prototype.find=function(a){return this.instance.fragment.find(a)};b.prototype.findAll=function(a,b){this.instance.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(!a||this.name===a)return this.instance;if(this.instance.fragment)return this.instance.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){b.test(this)&&(b.add(this.instance),b.live&&this.liveQueries.push(b));this.instance.fragment.findAllComponents(a,
b)};b.prototype.firstNode=function(a){return this.instance.fragment.firstNode(a)};b.prototype.render=function(a,b){ze(this.instance,a,null,b);this.checkYielders();this.attributes.forEach(Kc);this.eventHandlers.forEach(Kc);var c=this.ractive;do for(var f=c._liveComponentQueries,d=f.length;d--;){var h=f["_"+f[d]];h.test(this)&&(h.add(this.instance),this.liveQueries.push(h))}while(c=c.parent);this.rendered=!0};b.prototype.setupEvents=function(){var a=this,b=this.eventHandlers;Object.keys(this.template.v).forEach(function(c){var f=
c.split("-"),d=a.template.v[c];f.forEach(function(c){c=new wc(a.instance,c);b.push(new ua(a,c,d))})})};b.prototype.shuffled=function(){this.liveQueries.forEach(xj);a.prototype.shuffled.call(this)};b.prototype.toString=function(){return this.instance.toHTML()};b.prototype.unbind=function(){this.bound=!1;this.attributes.forEach(Ha);var a=this.instance;a.viewmodel.teardown();a.fragment.unbind();a._observers.forEach(Wd);for(var b=this.ractive;b;){var c=b._liveComponentQueries["_"+this.name];c&&c.remove(this);
b=b.parent}a.fragment.rendered&&a.el.__ractive_instances__&&O(a.el.__ractive_instances__,a);Nk.fire(a)};b.prototype.unrender=function(a){var b=this;this.rendered=!1;this.shouldDestroy=a;this.instance.unrender();this.attributes.forEach(Bb);this.eventHandlers.forEach(Bb);this.liveQueries.forEach(function(a){return a.remove(b.instance)})};b.prototype.update=function(){this.dirty=!1;this.instance.fragment.update();this.checkYielders();this.attributes.forEach(ib);this.eventHandlers.forEach(ib)};return b}(X),
Ok={update:x,teardown:x},Da=function(a){this.owner=a.owner||a.parentFragment.owner||oa(a.parentFragment);this.element=this.owner.attributeByName?this.owner:oa(a.parentFragment);this.parentFragment=this.owner.parentFragment;this.ractive=this.owner.ractive;a=this.template=a.template;this.dynamicName="object"===typeof a.f.n;this.dynamicArgs=!!a.f.d;this.dynamicName?this.nameFragment=new L({owner:this,template:a.f.n}):this.name=a.f.n||a.f;this.dynamicArgs?this.argsFragment=new L({owner:this,template:a.f.d}):
this.args=a.f.a&&a.f.a.s?[]:a.f.a||[];this.intermediary=this.node=null;this.element.decorators.push(this)};Da.prototype.bind=function(){var a=this;this.dynamicName&&(this.nameFragment.bind(),this.name=this.nameFragment.toString());this.dynamicArgs&&this.argsFragment.bind();this.template.f.a&&this.template.f.a.s&&(this.resolvers=[],this.models=this.template.f.a.r.map(function(b,c){var f,d=qa(a.parentFragment,b);d?d.register(a):(f=a.parentFragment.resolve(b,function(b){a.models[c]=b;O(a.resolvers,f);
b.register(a)}),a.resolvers.push(f));return d}),this.argsFn=cc(this.template.f.a.s,this.template.f.a.r.length))};Da.prototype.bubble=function(){this.dirty||(this.dirty=!0,this.owner.bubble())};Da.prototype.destroyed=function(){this.intermediary&&this.intermediary.teardown()};Da.prototype.handleChange=function(){this.bubble()};Da.prototype.rebinding=function(a,c,f){var b=this.models.indexOf(c);~b&&(a=Sa(this.template.f.a.r[b],a,c),a!==c&&(c.unregister(this),this.models.splice(b,1,a),a&&a.addShuffleRegister(this,
"mark"),f||this.bubble()))};Da.prototype.render=function(){var a=this;J.scheduleTask(function(){var b=wa("decorators",a.ractive,a.name);if(b){a.node=a.element.node;var c;a.argsFn?(c=a.models.map(function(a){if(a)return a.get()}),c=a.argsFn.apply(a.ractive,c)):c=a.dynamicArgs?a.argsFragment.getArgsList():a.args;a.intermediary=b.apply(a.ractive,[a.node].concat(c));if(!a.intermediary||!a.intermediary.teardown)throw Error("The '"+a.name+"' decorator must return an object with a teardown method");}else aa(hb(a.name,
"decorator")),a.intermediary=Ok},!0);this.rendered=!0};Da.prototype.toString=function(){return""};Da.prototype.unbind=function(){var a=this;this.dynamicName&&this.nameFragment.unbind();this.dynamicArgs&&this.argsFragment.unbind();this.resolvers&&this.resolvers.forEach(Ha);this.models&&this.models.forEach(function(b){b&&b.unregister(a)})};Da.prototype.unrender=function(a){a&&!this.element.rendered||!this.intermediary||this.intermediary.teardown();this.rendered=!1};Da.prototype.update=function(){if(this.dirty){var a=
this.dirty=!1;if(this.dynamicName&&this.nameFragment.dirty){var c=this.nameFragment.toString(),a=c!==this.name;this.name=c}this.intermediary&&(a||!this.intermediary.update?(this.unrender(),this.render()):this.dynamicArgs?this.argsFragment.dirty&&(a=this.argsFragment.getArgsList(),this.intermediary.update.apply(this.ractive,a)):this.argsFn?(a=this.models.map(function(a){if(a)return a.get()}),this.intermediary.update.apply(this.ractive,this.argsFn.apply(this.ractive,a))):this.intermediary.update.apply(this.ractive,
this.args));this.dynamicName&&this.nameFragment.dirty&&this.nameFragment.update();this.dynamicArgs&&this.argsFragment.dirty&&this.argsFragment.update()}};var kg=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){};b.prototype.render=function(){};b.prototype.teardown=function(){};b.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"};b.prototype.unbind=function(){};b.prototype.unrender=function(){};
b.prototype.update=function(){};return b}(X),ia=function(a,c){void 0===c&&(c="value");this.element=a;this.ractive=a.ractive;this.attribute=a.attributeByName[c];var b=this.attribute.interpolator;b.twowayBinding=this;var d=b.model;if(!d)b.resolver.forceResolution(),d=b.model,xf("'"+b.template.r+"' reference",this.ractive);else if(d.isUnresolved)d.forceResolution(),xf("expression",this.ractive);else if(d.isReadonly)return b=d.getKeypath().replace(/^@/,""),ba("Cannot use two-way binding on <"+a.name+
"> element: "+b+" is read-only. To suppress this warning use <"+a.name+" twoway='false'...>",{ractive:this.ractive}),!1;this.attribute.isTwoway=!0;this.model=d;b=d.get();this.wasUndefined=void 0===b;void 0===b&&this.getInitialValue&&(b=this.getInitialValue(),d.set(b));a:{for(d=a;d=d.parent;)if("form"===d.name)break a;d=void 0}d&&(this.resetValue=b,d.formBindings.push(this))};ia.prototype.bind=function(){this.model.registerTwowayBinding(this)};ia.prototype.handleChange=function(){var a=this,c=this.getValue();
this.lastVal()!==c&&(J.start(this.root),this.attribute.locked=!0,this.model.set(c),this.lastVal(!0,c),this.model.get()!==c?this.attribute.locked=!1:J.scheduleTask(function(){return a.attribute.locked=!1}),J.end())};ia.prototype.lastVal=function(a,c){if(a)this.lastValue=c;else return this.lastValue};ia.prototype.rebinding=function(a,c){var b=this;this.model&&this.model===c&&c.unregisterTwowayBinding(this);a&&(this.model=a,J.scheduleTask(function(){return a.registerTwowayBinding(b)}))};ia.prototype.render=
function(){this.node=this.element.node;this.node._ractive.binding=this;this.rendered=!0};ia.prototype.setFromNode=function(a){this.model.set(a.value)};ia.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)};ia.prototype.unrender=function(){};var Af=function(a){function b(b){a.call(this,b,"checked")}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",R,!1);this.node.attachEvent&&
this.node.addEventListener("click",R,!1)};b.prototype.unrender=function(){this.node.removeEventListener("change",R,!1);this.node.removeEventListener("click",R,!1)};b.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")};b.prototype.getValue=function(){return this.node.checked};b.prototype.setFromNode=function(a){this.model.set(a.checked)};return b}(ia),Kb=function(a,c,f){var b=this;this.model=c;this.hash=a;this.getValue=function(){b.value=f.call(b);return b.value};this.bindings=
[]};Kb.prototype.add=function(a){this.bindings.push(a)};Kb.prototype.bind=function(){this.value=this.model.get();this.model.registerTwowayBinding(this);this.bound=!0};Kb.prototype.remove=function(a){O(this.bindings,a);this.bindings.length||this.unbind()};Kb.prototype.unbind=function(){this.model.unregisterTwowayBinding(this);this.bound=!1;delete this.model[this.hash]};var Pk=[].push,Fj=function(a){function b(b){a.call(this,b,"name");this.checkboxName=!0;this.group=yf("checkboxes",this.model,zj);this.group.add(this);
this.noInitialValue&&(this.group.noInitialValue=!0);if(this.group.noInitialValue&&this.element.getAttribute("checked")){b=this.model.get();var c=this.element.getAttribute("value");W(b,c)||Pk.call(b,c)}}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.group.bound||this.group.bind()};b.prototype.changed=function(){var a=!!this.isChecked;this.isChecked=this.node.checked;return this.isChecked===a};b.prototype.getInitialValue=function(){this.noInitialValue=
!0;return[]};b.prototype.getValue=function(){return this.group.value};b.prototype.handleChange=function(){this.isChecked=this.element.node.checked;this.group.value=this.model.get();var b=this.element.getAttribute("value");this.isChecked&&!W(this.group.value,b)?this.group.value.push(b):!this.isChecked&&W(this.group.value,b)&&O(this.group.value,b);this.lastValue=null;a.prototype.handleChange.call(this)};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node,c=this.model.get(),d=
this.element.getAttribute("value");n(c)?this.isChecked=W(c,d):this.isChecked=c==d;b.name="{{"+this.model.getKeypath()+"}}";b.checked=this.isChecked;b.addEventListener("change",R,!1);b.attachEvent&&b.addEventListener("click",R,!1)};b.prototype.setFromNode=function(a){this.group.bindings.forEach(function(a){return a.wasUndefined=!0});a.checked&&(a=this.group.getValue(),a.push(this.element.getAttribute("value")),this.group.model.set(a))};b.prototype.unbind=function(){this.group.remove(this)};b.prototype.unrender=
function(){var a=this.element.node;a.removeEventListener("change",R,!1);a.removeEventListener("click",R,!1)};return b}(ia),Dj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""};b.prototype.getValue=function(){return this.element.node.innerHTML};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node;b.addEventListener("change",
R,!1);b.addEventListener("blur",R,!1);this.ractive.lazy||(b.addEventListener("input",R,!1),b.attachEvent&&b.addEventListener("keyup",R,!1))};b.prototype.setFromNode=function(a){this.model.set(a.innerHTML)};b.prototype.unrender=function(){var a=this.node;a.removeEventListener("blur",R,!1);a.removeEventListener("change",R,!1);a.removeEventListener("input",R,!1);a.removeEventListener("keyup",R,!1)};return b}(ia),qd=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);
b.prototype.constructor=b;b.prototype.getInitialValue=function(){return""};b.prototype.getValue=function(){return this.node.value};b.prototype.render=function(){a.prototype.render.call(this);var b=this.ractive.lazy,c=!1;"lazy"in this.element&&(b=this.element.lazy);q(b)&&(c=+b,b=!1);this.handler=c?Aj(c):R;c=this.node;c.addEventListener("change",R,!1);b||(c.addEventListener("input",this.handler,!1),c.attachEvent&&c.addEventListener("keyup",this.handler,!1));c.addEventListener("blur",zf,!1)};b.prototype.unrender=
function(){var a=this.element.node;this.rendered=!1;a.removeEventListener("change",R,!1);a.removeEventListener("input",this.handler,!1);a.removeEventListener("keyup",this.handler,!1);a.removeEventListener("blur",zf,!1)};return b}(ia),Ij=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.forceUpdate=function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,J.scheduleTask(function(){return a.attribute.locked=
!1}),this.model.set(b))};b.prototype.getInitialValue=function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})};b.prototype.getValue=function(){for(var a=this.element.node.options,b=a.length,c=[],d=0;d<b;d+=1){var h=a[d];h.selected&&c.push(h._ractive?h._ractive.value:h.value)}return c};b.prototype.handleChange=function(){var b=this.attribute.getValue(),c=this.getValue(),d;if(d=void 0!==b)a:if(n(c)&&n(b)&&c.length===
b.length){for(d=c.length;d--;)if(c[d]!==b[d]){d=!1;break a}d=!0}else d=!1;d||a.prototype.handleChange.call(this);return this};b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",R,!1);void 0===this.model.get()&&this.handleChange()};b.prototype.setFromNode=function(a){a=pd(a);for(var b=a.length,c=Array(b);b--;){var f=a[b];c[b]=f._ractive?f._ractive.value:f.value}this.model.set(c)};b.prototype.setValue=function(){throw Error("TODO not implemented yet");};
b.prototype.unrender=function(){this.node.removeEventListener("change",R,!1)};b.prototype.updateModel=function(){void 0!==this.attribute.value&&this.attribute.value.length||this.keypath.set(this.initialValue)};return b}(ia),Hj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getInitialValue=function(){};b.prototype.getValue=function(){var a=parseFloat(this.node.value);return isNaN(a)?void 0:a};b.prototype.setFromNode=
function(a){a=parseFloat(a.value);isNaN(a)||this.model.set(a)};return b}(qd),lg={},Gj=function(a){function b(b){a.call(this,b,"checked");b=this.ractive._guid+this.element.getAttribute("name");this.siblings=lg[b]||(lg[b]=[]);this.siblings.push(this)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.getValue=function(){return this.node.checked};b.prototype.handleChange=function(){J.start(this.root);this.siblings.forEach(function(a){a.model.set(a.getValue())});J.end()};
b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",R,!1);this.node.attachEvent&&this.node.addEventListener("click",R,!1)};b.prototype.setFromNode=function(a){this.model.set(a.checked)};b.prototype.unbind=function(){O(this.siblings,this)};b.prototype.unrender=function(){this.node.removeEventListener("change",R,!1);this.node.removeEventListener("click",R,!1)};return b}(ia),Ej=function(a){function b(b){a.call(this,b,"name");this.group=yf("radioname",this.model,
Bj);this.group.add(this);b.checked&&(this.group.value=this.getValue())}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this;this.group.bound||this.group.bind();this.nameAttributeBinding={handleChange:function(){return a.node.name="{{"+a.model.getKeypath()+"}}"}};this.model.getKeypathModel().register(this.nameAttributeBinding)};b.prototype.getInitialValue=function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")};
b.prototype.getValue=function(){return this.element.getAttribute("value")};b.prototype.handleChange=function(){this.node.checked&&(this.group.value=this.getValue(),a.prototype.handleChange.call(this))};b.prototype.lastVal=function(a,b){if(a)this.group.lastValue=b;else return this.group.lastValue};b.prototype.render=function(){a.prototype.render.call(this);var b=this.node;b.name="{{"+this.model.getKeypath()+"}}";b.checked=this.model.get()==this.element.getAttribute("value");b.addEventListener("change",
R,!1);b.attachEvent&&b.addEventListener("click",R,!1)};b.prototype.setFromNode=function(a){a.checked&&this.group.model.set(this.element.getAttribute("value"))};b.prototype.unbind=function(){this.group.remove(this);this.model.getKeypathModel().unregister(this.nameAttributeBinding)};b.prototype.unrender=function(){var a=this.node;a.removeEventListener("change",R,!1);a.removeEventListener("click",R,!1)};return b}(ia),Jj=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);
b.prototype.constructor=b;b.prototype.forceUpdate=function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,J.scheduleTask(function(){return a.attribute.locked=!1}),this.model.set(b))};b.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var a=this.element.options,b=a.length;if(b){for(var c,d,h=b;h--;){var e=a[h];if(e.getAttribute("selected")){e.getAttribute("disabled")||(c=e.getAttribute("value"));d=!0;break}}if(!d)for(;++h<b;)if(!a[h].getAttribute("disabled")){c=
a[h].getAttribute("value");break}void 0!==c&&(this.element.attributeByName.value.value=c);return c}}};b.prototype.getValue=function(){var a=this.node.options,b=a.length,c;for(c=0;c<b;c+=1){var d=a[c];if(a[c].selected&&!a[c].disabled)return d._ractive?d._ractive.value:d.value}};b.prototype.render=function(){a.prototype.render.call(this);this.node.addEventListener("change",R,!1)};b.prototype.setFromNode=function(a){a=pd(a)[0];this.model.set(a._ractive?a._ractive.value:a.value)};b.prototype.setValue=
function(a){this.model.set(a)};b.prototype.unrender=function(){this.node.removeEventListener("change",R,!1)};return b}(ia),Qk=/;\s*$/,Nb=function(a){function b(b){var c=this;a.call(this,b);this.liveQueries=[];this.name=b.template.e.toLowerCase();this.isVoid=Cd.test(this.name);if((this.parent=oa(this.parentFragment,!1))&&"option"===this.parent.name)throw Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[];this.attributeByName={};this.attributes=
[];var d=[];(this.template.m||[]).forEach(function(a){switch(a.t){case 13:case 73:case 71:case 70:case 72:c.attributes.push(nc({owner:c,parentFragment:c.parentFragment,template:a}));break;default:d.push(a)}});d.length&&this.attributes.push(new gg({owner:this,parentFragment:this.parentFragment,template:d}));for(var f=this.attributes.length;f--;){var h=c.attributes[f];"type"===h.name?c.attributes.unshift(c.attributes.splice(f,1)[0]):"max"===h.name?c.attributes.unshift(c.attributes.splice(f,1)[0]):"min"===
h.name?c.attributes.unshift(c.attributes.splice(f,1)[0]):"class"===h.name?c.attributes.unshift(c.attributes.splice(f,1)[0]):"value"===h.name&&c.attributes.push(c.attributes.splice(f,1)[0])}b.template.f&&!b.deferContent&&(this.fragment=new L({template:b.template.f,owner:this,cssIds:null}));this.binding=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.attributes.binding=!0;this.attributes.forEach(Vb);this.attributes.binding=!1;this.fragment&&
this.fragment.bind();this.binding||this.recreateTwowayBinding()};b.prototype.createTwowayBinding=function(){if("twoway"in this?!this.twoway:!this.ractive.twoway)return null;var a=Cj(this);return a?(a=new a(this),a.model)?a:null:null};b.prototype.destroyed=function(){this.attributes.forEach(function(a){return a.destroyed()});this.fragment&&this.fragment.destroyed()};b.prototype.detach=function(){this.rendered||this.destroyed();return d(this.node)};b.prototype.find=function(a){if(Na(this.node,a))return this.node;
if(this.fragment)return this.fragment.find(a)};b.prototype.findAll=function(a,b){b.test(this.node)&&(b.add(this.node),b.live&&this.liveQueries.push(b));this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.findNextNode=function(){return null};b.prototype.firstNode=function(){return this.node};b.prototype.getAttribute=
function(a){return(a=this.attributeByName[a])?a.getValue():void 0};b.prototype.recreateTwowayBinding=function(){this.binding&&(this.binding.unbind(),this.binding.unrender());if(this.binding=this.createTwowayBinding())this.binding.bind(),this.rendered&&this.binding.render()};b.prototype.render=function(a,b){this.namespace=Nj(this);var c,f=!1;if(b)for(var h;h=b.shift();)if(h.nodeName.toUpperCase()===this.template.e.toUpperCase()&&h.namespaceURI===this.namespace){this.node=c=h;f=!0;break}else d(h);c||
(this.node=c=Ca(this.template.e,this.namespace,this.getAttribute("is")));Ka(c,"_ractive",{value:{proxy:this}});this.parentFragment.cssIds&&c.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" "));f&&this.foundNode&&this.foundNode(c);this.fragment&&(h=f?pa(c.childNodes):void 0,this.fragment.render(c,h),h&&h.forEach(d));if(f)for(this.binding&&this.binding.wasUndefined&&this.binding.setFromNode(c),h=c.attributes.length;h--;){var e=c.attributes[h].name;
e in this.attributeByName||c.removeAttribute(e)}this.attributes.forEach(Kc);this.binding&&this.binding.render();yj(this);this._introTransition&&this.ractive.transitionsEnabled&&(this._introTransition.isIntro=!0,J.registerTransition(this._introTransition));f||a.appendChild(c);this.rendered=!0};b.prototype.shuffled=function(){this.liveQueries.forEach(Kj);a.prototype.shuffled.call(this)};b.prototype.toString=function(){var a=this.template.e,b=this.attributes.map(Mj).join("");"option"===this.name&&this.isSelected()&&
(b+=" selected");"input"===this.name&&Lj(this)&&(b+=" checked");var c,d;this.attributes.forEach(function(a){"class"===a.name?d=(d||"")+(d?" ":"")+e(a.getString()):"style"===a.name?(c=(c||"")+(c?" ":"")+e(a.getString()))&&!Qk.test(c)&&(c+=";"):a.styleName?c=(c||"")+(c?" ":"")+""+k(a.styleName)+": "+e(a.getString())+";":a.inlineClass&&a.getValue()&&(d=(d||"")+(d?" ":"")+a.inlineClass)});void 0!==c&&(b=" style"+(c?'="'+c+'"':"")+b);void 0!==d&&(b=" class"+(d?'="'+d+'"':"")+b);b="<"+a+""+b+">";if(this.isVoid)return b;
"textarea"===this.name&&void 0!==this.getAttribute("value")?b+=Xc(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(b+=this.getAttribute("value")||"");this.fragment&&(b+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e)));return b+("</"+a+">")};b.prototype.unbind=function(){this.attributes.forEach(Ha);this.binding&&this.binding.unbind();this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){if(this.rendered){this.rendered=!1;var b=this._introTransition;
b&&b.complete&&b.complete();"option"===this.name?this.detach():a&&J.detachWhenReady(this);this.fragment&&this.fragment.unrender();this.binding&&this.binding.unrender();this._outroTransition&&this.ractive.transitionsEnabled&&(this._outroTransition.isIntro=!1,J.registerTransition(this._outroTransition));for(a=this.liveQueries.length;a--;)this.liveQueries[a].remove(this.node)}};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.attributes.forEach(ib),this.fragment&&this.fragment.update())};
return b}(X),Rk=function(a){function b(b){a.call(this,b);this.formBindings=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.node.addEventListener("reset",Bf,!1)};b.prototype.unrender=function(b){this.node.removeEventListener("reset",Bf,!1);a.prototype.unrender.call(this,b)};return b}(Nb),xc=function(a){function b(b){a.call(this,b);this.parentFragment=b.parentFragment;this.template=b.template;this.index=b.index;
b.owner&&(this.parent=b.owner);this.isStatic=!!b.template.s;this.model=null;this.dirty=!1}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var a=this,b=ic(this.parentFragment,this.template),c=b?b.get():void 0;this.isStatic?this.model={get:function(){return c}}:b?(b.register(this),this.model=b):this.resolver=this.parentFragment.resolve(this.template.r,function(b){a.model=b;b.register(a);a.handleChange();a.resolver=null})};b.prototype.handleChange=function(){this.bubble()};
b.prototype.rebinding=function(a,b,c){a=Sa(this.template,a,b);if(this["static"]||a===this.model)return!1;this.model&&this.model.unregister(this);a&&a.addShuffleRegister(this,"mark");this.model=a;c||this.handleChange();return!0};b.prototype.unbind=function(){this.isStatic||(this.model&&this.model.unregister(this),this.model=void 0,this.resolver&&this.resolver.unbind())};return b}(X),Sk=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.bubble=function(){this.owner&&this.owner.bubble();a.prototype.bubble.call(this)};b.prototype.detach=function(){return d(this.node)};b.prototype.firstNode=function(){return this.node};b.prototype.getString=function(){return this.model?c(this.model.get()):""};b.prototype.render=function(a,b){if(!Va){var c=this.getString();this.rendered=!0;if(b){var d=b[0];d&&3===d.nodeType?(b.shift(),d.nodeValue!==c&&(d.nodeValue=c)):(d=this.node=P.createTextNode(c),b[0]?a.insertBefore(d,b[0]):a.appendChild(d));
this.node=d}else this.node=P.createTextNode(c),a.appendChild(this.node)}};b.prototype.toString=function(a){var b=this.getString();return a?Xc(b):b};b.prototype.unrender=function(a){a&&this.detach();this.rendered=!1};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.rendered&&(this.node.data=this.getString()))};b.prototype.valueOf=function(){return this.model?this.model.get():void 0};return b}(xc),mg=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);
b.prototype.constructor=b;b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.node.defaultValue=this.node.value};return b}(Nb),Vj=function(a){function b(b){a.call(this,b);this.name=b.template.n;this.owner=b.owner||b.parentFragment.owner||b.element||oa(b.parentFragment);this.element=b.element||(this.owner.attributeByName?this.owner:oa(b.parentFragment));this.parentFragment=this.element.parentFragment;this.ractive=this.parentFragment.ractive;this.fragment=null;this.element.attributeByName[this.name]=
this;this.value=b.template.f}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){this.fragment&&this.fragment.bind();var a=this.template.f,b=this.element.instance.viewmodel;if(0===a)b.joinKey(this.name).set(!0);else if("string"===typeof a){var c=gc(a);b.joinKey(this.name).set(c?c.value:a)}else n(a)&&Pj(this,!0)};b.prototype.render=function(){};b.prototype.unbind=function(){this.fragment&&this.fragment.unbind();this.boundFragment&&this.boundFragment.unbind();
this.element.bound&&this.link.target===this.model&&this.link.owner.unlink()};b.prototype.unrender=function(){};b.prototype.update=function(){this.dirty&&(this.dirty=!1,this.fragment&&this.fragment.update(),this.boundFragment&&this.boundFragment.update(),this.rendered&&this.updateDelegate())};return b}(X),Tk=function(a){function b(b){var c=b.template;c.a||(c.a={});void 0!==c.a.value||"disabled"in c.a||(c.a.value=c.f||"");a.call(this,b);a:{for(b=this.parent;b;){if("select"===b.name)break a;b=b.parent}b=
void 0}this.select=b}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){if(this.select){var b=this.attributeByName.selected;b&&void 0!==this.select.getAttribute("value")&&(b=this.attributes.indexOf(b),this.attributes.splice(b,1),delete this.attributeByName.selected);a.prototype.bind.call(this);this.select.options.push(this)}else a.prototype.bind.call(this)};b.prototype.bubble=function(){var b=this.getAttribute("value");this.node.value!==b&&(this.node._ractive.value=
b);a.prototype.bubble.call(this)};b.prototype.getAttribute=function(a){var b=this.attributeByName[a];return b?b.getValue():"value"===a&&this.fragment?this.fragment.valueOf():void 0};b.prototype.isSelected=function(){var a=this.getAttribute("value");if(void 0===a||!this.select)return!1;var b=this.select.getAttribute("value");if(b==a)return!0;if(this.select.getAttribute("multiple")&&n(b))for(var c=b.length;c--;)if(b[c]==a)return!0};b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);
this.attributeByName.value||(this.node._ractive.value=this.getAttribute("value"))};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.select&&O(this.select.options,this)};return b}(Nb),Uk=function(a){function b(){a.apply(this,arguments)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){var b=(this.refName=this.template.r)?lc(this.ractive,this.refName,this.parentFragment)||null:null,c;b&&(this.named=!0,this.setTemplate(this.template.r,b));
b||(a.prototype.bind.call(this),this.model&&(c=this.model.get())&&"object"===typeof c&&("string"===typeof c.template||n(c.t))?(c.template?(this.source=c.template,c=Ef(this.template.r,c.template,this.ractive)):this.source=c.t,this.setTemplate(this.template.r,c.t)):this.model&&"string"===typeof this.model.get()||!this.refName?this.setTemplate(this.model.get()):this.setTemplate(this.refName,b));this.fragment=(new L({owner:this,template:this.partialTemplate})).bind()};b.prototype.destroyed=function(){this.fragment.destroyed()};
b.prototype.detach=function(){return this.fragment.detach()};b.prototype.find=function(a){return this.fragment.find(a)};b.prototype.findAll=function(a,b){this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function(a){return this.fragment.firstNode(a)};b.prototype.forceResetTemplate=function(){var a=this;this.partialTemplate=void 0;this.refName&&
(this.partialTemplate=lc(this.ractive,this.refName,this.parentFragment));this.partialTemplate||(this.partialTemplate=lc(this.ractive,this.name,this.parentFragment));this.partialTemplate||(ba("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[]);this.inAttribute?hj(function(){return a.fragment.resetTemplate(a.partialTemplate)}):this.fragment.resetTemplate(this.partialTemplate);this.bubble()};b.prototype.render=function(a,b){this.fragment.render(a,b)};b.prototype.setTemplate=
function(a,b){this.name=a;b||null===b||(b=lc(this.ractive,a,this.parentFragment));b||ba("Could not find template for partial '"+a+"'");this.partialTemplate=b||[]};b.prototype.toString=function(a){return this.fragment.toString(a)};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.fragment.unbind()};b.prototype.unrender=function(a){this.fragment.unrender(a)};b.prototype.update=function(){var a;this.dirty&&(this.dirty=!1,this.named||(this.model&&(a=this.model.get()),a&&"string"===typeof a&&
a!==this.name?(this.setTemplate(a),this.fragment.resetTemplate(this.partialTemplate)):a&&"object"===typeof a&&("string"===typeof a.template||n(a.t))&&a.t!==this.source&&a.template!==this.source&&(a.template?(this.source=a.template,a=Ef(this.name,a.template,this.ractive)):this.source=a.t,this.setTemplate(this.name,a.t),this.fragment.resetTemplate(this.partialTemplate))),this.fragment.update())};return b}(xc),V=function(a){this.parent=a.owner.parentFragment;this.parentFragment=this;this.owner=a.owner;
this.ractive=this.parent.ractive;this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.context=null;this.rendered=!1;this.iterations=[];this.template=a.template;this.indexRef=a.indexRef;this.keyRef=a.keyRef;this.previousIterations=this.pendingNewIndices=null;this.isArray=!1};V.prototype.bind=function(a){var b=this;this.context=a;a=a.get();if(this.isArray=n(a)){this.iterations=[];a=a.length;for(var c=0;c<a;c+=1)b.iterations[c]=b.createIteration(c,c)}else w(a)&&(this.isArray=!1,
this.indexRef&&(c=this.indexRef.split(","),this.keyRef=c[0],this.indexRef=c[1]),this.iterations=Object.keys(a).map(function(a,c){return b.createIteration(a,c)}));return this};V.prototype.bubble=function(){this.owner.bubble()};V.prototype.createIteration=function(a,c){var b=new L({owner:this,template:this.template});b.key=a;b.index=c;b.isIteration=!0;var d=this.context.joinKey(a);this.owner.template.z&&(b.aliases={},b.aliases[this.owner.template.z[0].n]=d);return b.bind(d)};V.prototype.destroyed=function(){this.iterations.forEach(function(a){return a.destroyed()})};
V.prototype.detach=function(){var a=g();this.iterations.forEach(function(b){return a.appendChild(b.detach())});return a};V.prototype.find=function(a){var b=this.iterations.length,c;for(c=0;c<b;c+=1){var d=this.iterations[c].find(a);if(d)return d}};V.prototype.findAll=function(a,c){var b=this.iterations.length,d;for(d=0;d<b;d+=1)this.iterations[d].findAll(a,c)};V.prototype.findComponent=function(a){var b=this.iterations.length,c;for(c=0;c<b;c+=1){var d=this.iterations[c].findComponent(a);if(d)return d}};
V.prototype.findAllComponents=function(a,c){var b=this.iterations.length,d;for(d=0;d<b;d+=1)this.iterations[d].findAllComponents(a,c)};V.prototype.findNextNode=function(a){if(a.index<this.iterations.length-1)for(a=a.index+1;a<this.iterations.length;a++){var b=this.iterations[a].firstNode(!0);if(b)return b}return this.owner.findNextNode()};V.prototype.firstNode=function(a){return this.iterations[0]?this.iterations[0].firstNode(a):null};V.prototype.rebinding=function(a){var b=this;this.context=a;this.iterations.forEach(function(c){var d=
a?a.joinKey(c.key||c.index):void 0;c.context=d;b.owner.template.z&&(c.aliases={},c.aliases[b.owner.template.z[0].n]=d)})};V.prototype.render=function(a,c){this.iterations&&this.iterations.forEach(function(b){return b.render(a,c)});this.rendered=!0};V.prototype.shuffle=function(a){var b=this;this.pendingNewIndices||(this.previousIterations=this.iterations.slice());this.pendingNewIndices||(this.pendingNewIndices=[]);this.pendingNewIndices.push(a);var c=[];a.forEach(function(a,d){if(-1!==a){var f=b.iterations[d];
c[a]=f;a!==d&&f&&(f.dirty=!0)}});this.iterations=c;this.bubble()};V.prototype.shuffled=function(){this.iterations.forEach(function(a){return a.shuffled()})};V.prototype.toString=function(a){return this.iterations?this.iterations.map(a?de:ce).join(""):""};V.prototype.unbind=function(){this.iterations.forEach(Ha);return this};V.prototype.unrender=function(a){this.iterations.forEach(a?be:Bb);this.pendingNewIndices&&this.previousIterations&&this.previousIterations.forEach(function(b){b.rendered&&(a?be(b):
Bb(b))});this.rendered=!1};V.prototype.update=function(){var a=this;if(this.pendingNewIndices)this.updatePostShuffle();else if(!this.updating){this.updating=!0;var c=this.context.get(),d=this.isArray,e,k,l=!0,m;if(this.isArray=n(c))d&&(l=!1,this.iterations.length>c.length&&(e=this.iterations.splice(c.length)));else if(w(c)&&!d)for(l=!1,e=[],k={},m=this.iterations.length;m--;)d=a.iterations[m],d.key in c?k[d.key]=!0:(a.iterations.splice(m,1),e.push(d));l&&(e=this.iterations,this.iterations=[]);e&&
e.forEach(function(a){a.unbind();a.unrender(!0)});this.iterations.forEach(ib);var q,p;if((n(c)?c.length:w(c)?Object.keys(c).length:0)>this.iterations.length){q=this.rendered?g():null;m=this.iterations.length;if(n(c))for(;m<c.length;)p=a.createIteration(m,m),a.iterations.push(p),a.rendered&&p.render(q),m+=1;else w(c)&&(this.indexRef&&!this.keyRef&&(e=this.indexRef.split(","),this.keyRef=e[0],this.indexRef=e[1]),Object.keys(c).forEach(function(b){k&&b in k||(p=a.createIteration(b,m),a.iterations.push(p),
a.rendered&&p.render(q),m+=1)}));this.rendered&&(c=this.parent.findParentNode(),e=this.parent.findNextNode(this.owner),c.insertBefore(q,e))}this.updating=!1}};V.prototype.updatePostShuffle=function(){var a=this,c=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(function(a){c.forEach(function(b,d){c[d]=a[b]})});var d=this.context.get().length,e=this.previousIterations.length,k,l={};c.forEach(function(b,c){var d=a.previousIterations[c];a.previousIterations[c]=null;if(-1===b)l[c]=d;
else if(d.index!==b){var f=a.context.joinKey(b);d.index=b;d.context=f;a.owner.template.z&&(d.aliases={},d.aliases[a.owner.template.z[0].n]=f)}});this.previousIterations.forEach(function(a,b){a&&(l[b]=a)});var m=this.rendered?g():null,n=this.rendered?this.parent.findParentNode():null,q="startIndex"in c;k=q?c.startIndex:0;for(k;k<d;k++){var p=a.iterations[k];p&&q?a.rendered&&(l[k]&&m.appendChild(l[k].detach()),m.childNodes.length&&n.insertBefore(m,p.firstNode())):(p||(a.iterations[k]=a.createIteration(k,
k)),a.rendered&&(l[k]&&m.appendChild(l[k].detach()),p?m.appendChild(p.detach()):a.iterations[k].render(m)))}if(this.rendered){for(k=d;k<e;k++)l[k]&&m.appendChild(l[k].detach());m.childNodes.length&&n.insertBefore(m,this.owner.findNextNode())}Object.keys(l).forEach(function(a){return l[a].unbind().unrender(!0)});this.iterations.forEach(ib);this.pendingNewIndices=null;this.shuffled()};var Vk=function(a){function b(b){a.call(this,b);this.templateSectionType=this.sectionType=b.template.n||null;this.subordinate=
1===b.template.l;this.fragment=null}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){a.prototype.bind.call(this);this.subordinate&&(this.sibling=this.parentFragment.items[this.parentFragment.items.indexOf(this)-1],this.sibling.nextSibling=this);this.model?(this.dirty=!0,this.update()):!this.sectionType||51!==this.sectionType||this.sibling&&this.sibling.isTruthy()||(this.fragment=(new L({owner:this,template:this.template.f})).bind())};b.prototype.destroyed=
function(){this.fragment&&this.fragment.destroyed()};b.prototype.detach=function(){return this.fragment?this.fragment.detach():g()};b.prototype.find=function(a){if(this.fragment)return this.fragment.find(a)};b.prototype.findAll=function(a,b){this.fragment&&this.fragment.findAll(a,b)};b.prototype.findComponent=function(a){if(this.fragment)return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)};b.prototype.firstNode=function(a){return this.fragment&&
this.fragment.firstNode(a)};b.prototype.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var a=this.model?this.model.isRoot?this.model.value:this.model.get():void 0;return!!a&&!Lb(a)};b.prototype.rebinding=function(b,c,d){a.prototype.rebinding.call(this,b,c,d)&&this.fragment&&50!==this.sectionType&&51!==this.sectionType&&this.fragment.rebinding(b,c)};b.prototype.render=function(a,b){this.rendered=!0;this.fragment&&this.fragment.render(a,b)};b.prototype.shuffle=function(a){this.fragment&&
52===this.sectionType&&this.fragment.shuffle(a)};b.prototype.toString=function(a){return this.fragment?this.fragment.toString(a):""};b.prototype.unbind=function(){a.prototype.unbind.call(this);this.fragment&&this.fragment.unbind()};b.prototype.unrender=function(a){this.rendered&&this.fragment&&this.fragment.unrender(a);this.rendered=!1};b.prototype.update=function(){if(this.dirty&&(this.fragment&&50!==this.sectionType&&51!==this.sectionType&&(this.fragment.context=this.model),this.model||51===this.sectionType)){this.dirty=
!1;var a=this.model?this.model.isRoot?this.model.value:this.model.get():void 0,b=!this.subordinate||!this.sibling.isTruthy(),c=this.sectionType;if(null===this.sectionType||null===this.templateSectionType)this.sectionType=this.template.i||n(a)?52:w(a)||"function"===typeof a?54:void 0===a?null:50;c&&c!==this.sectionType&&this.fragment&&(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null);var d;52===this.sectionType?this.fragment?this.fragment.update():d=(new V({owner:this,template:this.template.f,
indexRef:this.template.i})).bind(this.model):53===this.sectionType?this.fragment?this.fragment.update():d=(new L({owner:this,template:this.template.f})).bind(this.model):54===this.sectionType?this.fragment?Lb(a)?(this.rendered&&this.fragment.unbind().unrender(!0),this.fragment=null):this.fragment.update():Lb(a)||(d=(new L({owner:this,template:this.template.f})).bind(this.model)):(a=b&&(51===this.sectionType?Lb(a):!!a&&!Lb(a)),this.fragment?a?this.fragment.update():(this.rendered&&this.fragment.unbind().unrender(!0),
this.fragment=null):a&&(d=(new L({owner:this,template:this.template.f})).bind(null)));d&&(this.rendered&&(b=this.parentFragment.findParentNode(),(a=this.parentFragment.findNextNode(this))?(b=g(),d.render(b),a.parentNode.insertBefore(b,a)):d.render(b)),this.fragment=d);this.nextSibling&&(this.nextSibling.dirty=!0,this.nextSibling.update())}};return b}(xc),Wk=function(a){function b(b){a.call(this,b);this.options=[]}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.foundNode=
function(a){this.binding&&(a=pd(a),0<a.length&&(this.selectedOptions=a))};b.prototype.render=function(b,c){a.prototype.render.call(this,b,c);this.sync();for(var d=this.node,f=d.options.length;f--;)d.options[f].defaultSelected=d.options[f].selected;this.rendered=!0};b.prototype.sync=function(){var a=this,b=this.node;if(b){var c=pa(b.options);if(this.selectedOptions)c.forEach(function(b){0<=a.selectedOptions.indexOf(b)?b.selected=!0:b.selected=!1}),this.binding.setFromNode(b),delete this.selectedOptions;
else{var d=this.getAttribute("value"),e=this.getAttribute("multiple");if(void 0!==d){var h;c.forEach(function(a){var b=a._ractive?a._ractive.value:a.value;if(e)a:{for(var c=d.length;c--;)if(d[c]==b){b=!0;break a}b=void 0}else b=d==b;b&&(h=!0);a.selected=b});h||e||this.binding&&this.binding.forceUpdate()}else this.binding&&this.binding.forceUpdate()}}};b.prototype.update=function(){a.prototype.update.call(this);this.sync()};return b}(Nb),Xk=function(a){function b(b){var c=b.template;b.deferContent=
!0;a.call(this,b);this.attributeByName.value||(c.f&&La({template:c})?this.attributes.push(nc({owner:this,template:{t:13,f:c.f,n:"value"},parentFragment:this.parentFragment})):this.fragment=new L({owner:this,cssIds:null,template:c.f}))}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bubble=function(){var a=this;this.dirty||(this.dirty=!0,this.rendered&&!this.binding&&this.fragment&&J.scheduleTask(function(){a.dirty=!1;a.node.value=a.fragment.toString()}),this.parentFragment.bubble())};
return b}(mg),Sj=function(a){function b(b){a.call(this,b);this.type=1}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.bind=function(){};b.prototype.detach=function(){return d(this.node)};b.prototype.firstNode=function(){return this.node};b.prototype.render=function(a,b){if(!Va)if(this.rendered=!0,b){var c=b[0];c&&3===c.nodeType?(b.shift(),c.nodeValue!==this.template&&(c.nodeValue=this.template)):(c=this.node=P.createTextNode(this.template),b[0]?a.insertBefore(c,b[0]):
a.appendChild(c));this.node=c}else this.node=P.createTextNode(this.template),a.appendChild(this.node)};b.prototype.toString=function(a){return a?Xc(this.template):this.template};b.prototype.unbind=function(){};b.prototype.unrender=function(a){this.rendered&&a&&this.detach();this.rendered=!1};b.prototype.update=function(){};b.prototype.valueOf=function(){return this.template};return b}(X),Kd;if(ud){var yc={},ng=Ca("div").style;Kd=function(a){a=hd(a);if(!yc[a])if(void 0!==ng[a])yc[a]=a;else for(var b=
a.charAt(0).toUpperCase()+a.substring(1),c=Ma.length;c--;){var d=Ma[c];if(void 0!==ng[d+b]){yc[a]=d+b;break}}return yc[a]}}else Kd=null;var Ga=Kd,Mb,mc="hidden";if(P){var zc;if(mc in P)zc="";else for(var og=Ma.length;og--;){var pg=Ma[og],mc=pg+"Hidden";if(mc in P){zc=pg;break}}void 0!==zc?(P.addEventListener(zc+"visibilitychange",Ff),Ff()):("onfocusout"in P?(P.addEventListener("focusout",rd),P.addEventListener("focusin",sd)):(ha.addEventListener("pagehide",rd),ha.addEventListener("blur",rd),ha.addEventListener("pageshow",
sd),ha.addEventListener("focus",sd)),Mb=!0)}var Yk=new RegExp("^-(?:"+Ma.join("|")+")-"),Qj=new RegExp("^(?:"+Ma.join("|")+")([A-Z])"),Ld;if(ud){var qg=Ca("div").style,rg=function(a){return a},Md={},Ac={},ub,Sb,Tb,Bc,Cc,Dc;void 0!==qg.transition?(ub="transition",Sb="transitionend",Tb=!0):void 0!==qg.webkitTransition?(ub="webkitTransition",Sb="webkitTransitionEnd",Tb=!0):Tb=!1;ub&&(Bc=ub+"Duration",Cc=ub+"Property",Dc=ub+"TimingFunction");Ld=function(a,c,d,e,g){setTimeout(function(){function b(){clearTimeout(n)}
function f(){l&&m&&(a.unregisterCompleteHandler(b),a.ractive.fire(a.name+":end",a.node,a.isIntro),g())}function h(a){a=e.indexOf(hd(a.propertyName.replace(Yk,"")));-1!==a&&e.splice(a,1);e.length||(clearTimeout(n),k())}function k(){q[Cc]=p.property;q[Dc]=p.duration;q[Bc]=p.timing;a.node.removeEventListener(Sb,h,!1);m=!0;f()}var l,m,n,r=(a.node.namespaceURI||"")+a.node.tagName,q=a.node.style,p={property:q[Cc],timing:q[Dc],duration:q[Bc]};q[Cc]=e.map(Ga).map(Gf).join(",");q[Dc]=Gf(d.easing||"linear");
q[Bc]=d.duration/1E3+"s";a.node.addEventListener(Sb,h,!1);n=setTimeout(function(){e=[];k()},d.duration+(d.delay||0)+50);a.registerCompleteHandler(b);setTimeout(function(){for(var b=e.length,g,k,n=[],p,w;b--;)if(p=e[b],g=r+p,Tb&&!Ac[g]&&(q[Ga(p)]=c[p],Md[g]||(k=a.getStyle(p),Md[g]=a.getStyle(p)!=c[p],Ac[g]=!Md[g],Ac[g]&&(q[Ga(p)]=k))),!Tb||Ac[g])void 0===k&&(k=a.getStyle(p)),g=e.indexOf(p),-1===g?N("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",
{node:a.node}):e.splice(g,1),g=/[^\d]*$/.exec(c[p])[0],w=db(parseFloat(k),parseFloat(c[p]))||function(){return c[p]},n.push({name:Ga(p),interpolator:w,suffix:g});n.length?("string"===typeof d.easing?(b=a.ractive.easing[d.easing],b||(ba(hb(d.easing,"easing")),b=rg)):b="function"===typeof d.easing?d.easing:rg,new qc({duration:d.duration,easing:b,step:function(b){for(var c=n.length;c--;){var d=n[c];a.node.style[d.name]=d.interpolator(b)+d.suffix}},complete:function(){l=!0;f()}})):l=!0;e.length||(a.node.removeEventListener(Sb,
h,!1),m=!0,f())},0)},d.delay||0)}}else Ld=null;var Zk=Ld,sg=ha&&(ha.getComputedStyle||null.getComputedStyle),$k=Oa.resolve(),al={t0:"intro-outro",t1:"intro",t2:"outro"},ja=function(a){this.owner=a.owner||a.parentFragment.owner||oa(a.parentFragment);this.element=this.owner.attributeByName?this.owner:oa(a.parentFragment);this.ractive=this.owner.ractive;this.template=a.template;this.parentFragment=a.parentFragment;this.options=a;this.onComplete=[]};ja.prototype.animateStyle=function(a,c,d){var b=this;
if(4===arguments.length)throw Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!Mb)return this.setStyle(a,c),$k;var f;"string"===typeof a?(f={},f[a]=c):(f=a,d=c);d||(ba('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),d=this);return new Oa(function(a){if(d.duration){for(var c=Object.keys(f),e=[],h=sg(b.owner.node),
g=c.length;g--;){var k=c[g],l=h[Ga(k)];"0px"===l&&(l=0);l!=f[k]&&(e.push(k),b.owner.node.style[Ga(k)]=l)}e.length?Zk(b,f,d,e,a):a()}else b.setStyle(f),a()})};ja.prototype.bind=function(){var a=this,c=this.options;if(c.template){if("t0"===c.template.v||"t1"==c.template.v)this.element._introTransition=this;if("t0"===c.template.v||"t2"==c.template.v)this.element._outroTransition=this;this.eventName=al[c.template.v]}var d=this.owner.ractive;if(c.name)this.name=c.name;else{var e=c.template.f;"string"===
typeof e.n&&(e=e.n);if("string"!==typeof e){var g=(new L({owner:this.owner,template:e.n})).bind(),e=g.toString();g.unbind();if(""===e)return}this.name=e}c.params?this.params=c.params:c.template.f.a&&!c.template.f.a.s?this.params=c.template.f.a:c.template.f.d&&(e=(new L({owner:this.owner,template:c.template.f.d})).bind(),this.params=e.getArgsList(),e.unbind());"function"===typeof this.name?(this._fn=this.name,this.name=this._fn.name):this._fn=wa("transitions",d,this.name);this._fn||ba(hb(this.name,
"transition"),{ractive:d});c.template&&this.template.f.a&&this.template.f.a.s&&(this.resolvers=[],this.models=this.template.f.a.r.map(function(b,c){var d,f=qa(a.parentFragment,b);f?f.register(a):(d=a.parentFragment.resolve(b,function(b){a.models[c]=b;O(a.resolvers,d);b.register(a)}),a.resolvers.push(d));return f}),this.argsFn=cc(this.template.f.a.s,this.template.f.a.r.length))};ja.prototype.destroyed=function(){};ja.prototype.getStyle=function(a){var b=sg(this.owner.node);if("string"===typeof a)return a=
b[Ga(a)],"0px"===a?0:a;if(!n(a))throw Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var c={},d=a.length;d--;){var e=a[d],g=b[Ga(e)];"0px"===g&&(g=0);c[e]=g}return c};ja.prototype.processParams=function(a,c){"number"===typeof a?a={duration:a}:"string"===typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={});return m({},c,a)};ja.prototype.rebinding=function(a,c){var b=this.models.indexOf(c);~b&&(a=Sa(this.template.f.a.r[b],
a,c),a!==c&&(c.unregister(this),this.models.splice(b,1,a),a&&a.addShuffleRegister(this,"mark")))};ja.prototype.registerCompleteHandler=function(a){Ya(this.onComplete,a)};ja.prototype.render=function(){};ja.prototype.setStyle=function(a,c){if("string"===typeof a)this.owner.node.style[Ga(a)]=c;else for(var b in a)a.hasOwnProperty(b)&&(this.owner.node.style[Ga(b)]=a[b]);return this};ja.prototype.start=function(){var a=this,c=this.node=this.element.node,d=c.getAttribute("style"),e,g=this.params;this.complete=
function(b){e||(a.onComplete.forEach(function(a){return a()}),!b&&a.isIntro&&Rj(c,d),a._manager.remove(a),e=!0)};this._fn?(this.argsFn&&(g=this.models.map(function(a){if(a)return a.get()}),g=this.argsFn.apply(this.ractive,g)),(g=this._fn.apply(this.ractive,[this].concat(g)))&&g.then(this.complete)):this.complete()};ja.prototype.toString=function(){return""};ja.prototype.unbind=function(){this.resolvers&&this.resolvers.forEach(Ha)};ja.prototype.unregisterCompleteHandler=function(a){O(this.onComplete,
a)};ja.prototype.unrender=function(){};ja.prototype.update=function(){};var Hf={},tg,ug;try{Ca("table").innerHTML="foo"}catch(b){tg=!0,ug={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var bl=function(a){function b(b){a.call(this,b)}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype.detach=
function(){var a=g();this.nodes.forEach(function(b){return a.appendChild(b)});return a};b.prototype.find=function(a){var b=this.nodes.length,c;for(c=0;c<b;c+=1){var d=this.nodes[c];if(1===d.nodeType&&(Na(d,a)||(d=d.querySelector(a))))return d}return null};b.prototype.findAll=function(a,b){var c=this.nodes.length,d;for(d=0;d<c;d+=1){var f=this.nodes[d];if(1===f.nodeType&&(b.test(f)&&b.add(f),f=f.querySelectorAll(a))){var e=f.length,h;for(h=0;h<e;h+=1)b.add(f[h])}}};b.prototype.findComponent=function(){return null};
b.prototype.firstNode=function(){return this.nodes[0]};b.prototype.render=function(a){var b=this.model?this.model.get():"",c=this.parentFragment.findParentNode(),d=[];if(null!=b&&""!==b){var f,e,h;tg&&(e=ug[c.tagName])?(f=td("DIV"),f.innerHTML=e[0]+b+e[1],f=f.querySelector(".x"),"SELECT"===f.tagName&&(h=f.options[f.selectedIndex])):"http://www.w3.org/2000/svg"===c.namespaceURI?(f=td("DIV"),f.innerHTML='<svg class="x">'+b+"</svg>",f=f.querySelector(".x")):"TEXTAREA"===c.tagName?(f=Ca("div"),"undefined"!==
typeof f.textContent?f.textContent=b:f.innerHTML=b):(f=td(c.tagName),f.innerHTML=b,"SELECT"===f.tagName&&(h=f.options[f.selectedIndex]));for(;b=f.firstChild;)d.push(b),a.appendChild(b);if("SELECT"===c.tagName)for(a=d.length;a--;)d[a]!==h&&(d[a].selected=!1)}this.nodes=d;this.rendered=!0};b.prototype.toString=function(){return this.model&&null!=this.model.get()?Wc(""+this.model.get()):""};b.prototype.unrender=function(){this.nodes&&this.nodes.forEach(function(a){return d(a)});this.rendered=!1};b.prototype.update=
function(){if(this.rendered&&this.dirty){this.dirty=!1;this.unrender();var a=g();this.render(a);var b=this.parentFragment.findParentNode(),c=this.parentFragment.findNextNode(this);b.insertBefore(a,c)}};return b}(xc),cl=function(a){function b(b){a.call(this,b);this.container=b.parentFragment.ractive;this.component=this.container.component;this.containerFragment=b.parentFragment;this.parentFragment=this.component.parentFragment;this.name=b.template.n||""}b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=
b;b.prototype.bind=function(){var a=this.name;(this.component.yielders[a]||(this.component.yielders[a]=[])).push(this);var b=this.container._inlinePartials[a||"content"];"string"===typeof b&&(b=rb(b).t);b||(N('Could not find template for partial "'+a+'"',{ractive:this.ractive}),b=[]);this.fragment=(new L({owner:this,ractive:this.container.parent,template:b})).bind()};b.prototype.bubble=function(){this.dirty||(this.containerFragment.bubble(),this.dirty=!0)};b.prototype.detach=function(){return this.fragment.detach()};
b.prototype.find=function(a){return this.fragment.find(a)};b.prototype.findAll=function(a,b){this.fragment.find(a,b)};b.prototype.findComponent=function(a){return this.fragment.findComponent(a)};b.prototype.findAllComponents=function(a,b){this.fragment.findAllComponents(a,b)};b.prototype.findNextNode=function(){return this.containerFragment.findNextNode(this)};b.prototype.firstNode=function(a){return this.fragment.firstNode(a)};b.prototype.render=function(a,b){return this.fragment.render(a,b)};b.prototype.setTemplate=
function(a){a=this.parentFragment.ractive.partials[a];"string"===typeof a&&(a=rb(a).t);this.partialTemplate=a||[]};b.prototype.toString=function(a){return this.fragment.toString(a)};b.prototype.unbind=function(){this.fragment.unbind();O(this.component.yielders[this.name],this)};b.prototype.unrender=function(a){this.fragment.unrender(a)};b.prototype.update=function(){this.dirty=!1;this.fragment.update()};return b}(X),ta={};ta[19]=Hk;ta[18]=kg;ta[2]=Sk;ta[8]=Uk;ta[4]=Vk;ta[3]=bl;ta[16]=cl;ta[13]=Jf;
ta[73]=Jk;ta[71]=Da;ta[70]=ua;ta[72]=ja;var Uj={doctype:kg,form:Rk,input:mg,option:Tk,select:Wk,textarea:Xk},L=function(a){this.owner=a.owner;this.parent=(this.isRoot=!a.owner.parentFragment)?null:this.owner.parentFragment;this.ractive=a.ractive||(this.isRoot?a.owner:this.parent.ractive);this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null;this.context=null;this.rendered=!1;this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.resolvers=
[];this.dirty=!1;this.dirtyArgs=this.dirtyValue=!0;this.template=a.template||[];this.createItems()};L.prototype.bind=function(a){this.context=a;this.items.forEach(Vb);this.bound=!0;this.dirty&&this.update();return this};L.prototype.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;this.dirty||(this.dirty=!0,this.isRoot?this.ractive.component?this.ractive.component.bubble():this.bound&&J.addFragment(this):this.owner.bubble())};L.prototype.createItems=function(){var a=this.template.length;this.items=
[];for(var c=0;c<a;c++)this.items[c]=nc({parentFragment:this,template:this.template[c],index:c})};L.prototype.destroyed=function(){this.items.forEach(function(a){return a.destroyed()})};L.prototype.detach=function(){var a=g();this.items.forEach(function(b){return a.appendChild(b.detach())});return a};L.prototype.find=function(a){var b=this.items.length,c;for(c=0;c<b;c+=1){var d=this.items[c].find(a);if(d)return d}};L.prototype.findAll=function(a,c){if(this.items){var b=this.items.length,d;for(d=0;d<
b;d+=1){var e=this.items[d];e.findAll&&e.findAll(a,c)}}return c};L.prototype.findComponent=function(a){var b=this.items.length,c;for(c=0;c<b;c+=1){var d=this.items[c].findComponent(a);if(d)return d}};L.prototype.findAllComponents=function(a,c){if(this.items){var b=this.items.length,d;for(d=0;d<b;d+=1){var e=this.items[d];e.findAllComponents&&e.findAllComponents(a,c)}}return c};L.prototype.findContext=function(){for(var a=this;a&&!a.context;)a=a.parent;return a?a.context:this.ractive.viewmodel};L.prototype.findNextNode=
function(a){if(a)for(a=a.index+1;a<this.items.length;a++)if(this.items[a]){var b=this.items[a].firstNode(!0);if(b)return b}if(this.isRoot)return this.ractive.component?this.ractive.component.parentFragment.findNextNode(this.ractive.component):null;if(this.parent)return this.owner.findNextNode(this)};L.prototype.findParentNode=function(){var a=this;do{if(7===a.owner.type)return a.owner.node;if(a.isRoot&&!a.ractive.component)return a.ractive.el;a=16===a.owner.type?a.owner.containerFragment:a.componentParent||
a.parent}while(a);throw Error("Could not find parent node");};L.prototype.findRepeatingFragment=function(){for(var a=this;(a.parent||a.componentParent)&&!a.isIteration;)a=a.parent||a.componentParent;return a};L.prototype.firstNode=function(a){for(var b,c=0;c<this.items.length;c++)if(b=this.items[c].firstNode(!0))return b;return a?null:this.parent.findNextNode(this.owner)};L.prototype.getArgsList=function(){if(this.dirtyArgs){var a={},c=oc(this.items,a,this.ractive._guid);this.argsList=(a=gc("["+c+
"]",a))?a.value:[this.toString()];this.dirtyArgs=!1}return this.argsList};L.prototype.rebinding=function(a){this.context=a};L.prototype.render=function(a,c){if(this.rendered)throw Error("Fragment is already rendered!");this.rendered=!0;this.items.forEach(function(b){return b.render(a,c)})};L.prototype.resetTemplate=function(a){var b=this.bound,c=this.rendered;b&&(c&&this.unrender(!0),this.unbind());this.template=a;this.createItems();b&&(this.bind(this.context),c&&(a=this.findParentNode(),(b=this.findNextNode())?
(c=g(),this.render(c),a.insertBefore(c,b)):this.render(a)))};L.prototype.resolve=function(a,c){if(!this.context&&this.parent.resolve)return this.parent.resolve(a,c);var b=new tb(this,a,c);this.resolvers.push(b);return b};L.prototype.shuffled=function(){this.items.forEach(function(a){return a.shuffled()})};L.prototype.toHtml=function(){return this.toString()};L.prototype.toString=function(a){return this.items.map(a?de:ce).join("")};L.prototype.unbind=function(){this.items.forEach(Ha);this.bound=!1;
return this};L.prototype.unrender=function(a){this.items.forEach(a?Wj:Bb);this.rendered=!1};L.prototype.update=function(){this.dirty&&(this.updating?this.isRoot&&J.addFragmentToRoot(this):(this.dirty=!1,this.updating=!0,this.items.forEach(ib),this.updating=!1))};L.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var a={},c=oc(this.items,a,this.ractive._guid);this.value=(a=gc(c,a))?a.value:this.toString();this.dirtyValue=!1}return this.value};
var dl=na("reverse").path,el=na("shift").path,fl=na("sort").path,gl=na("splice").path,hl=new da("teardown"),il=new da("unrender"),jl=na("unshift").path,kl={add:function(a,c){return vb(this,a,void 0===c?1:+c)},animate:function(a,c,d){if("object"===typeof a)throw c=Object.keys(a),Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+c.map(function(b){return"'"+b+"': "+a[b]}).join("\n  ")+"\n}, {...}), do\n\n"+c.map(function(b){return"ractive.animate('"+b+"', "+a[b]+
", {...});"}).join("\n")+"\n");return Za(this,this.viewmodel.joinAll(I(a)),c,d)},detach:function(){if(this.isDetached)return this.el;this.el&&O(this.el.__ractive_instances__,this);this.el=this.fragment.detach();this.isDetached=!0;fk.fire(this);return this.el},find:function(a){if(!this.el)throw Error("Cannot call ractive.find('"+a+"') unless instance is rendered to the DOM");return this.fragment.find(a)},findAll:function(a,c){if(!this.el)throw Error("Cannot call ractive.findAll('"+a+"', ...) unless instance is rendered to the DOM");
c=c||{};var b=this._liveQueries,d=b[a];if(d)return c&&c.live?d:d.slice();d=new Qa(this,a,!!c.live,!1);d.live&&(b.push(a),b["_"+a]=d);this.fragment.findAll(a,d);d.init();return d.result},findAllComponents:function(a,c){c=c||{};var b=this._liveComponentQueries,d=b[a];if(d)return c&&c.live?d:d.slice();d=new Qa(this,a,!!c.live,!0);d.live&&(b.push(a),b["_"+a]=d);this.fragment.findAllComponents(a,d);d.init();return d.result},findComponent:function(a){return this.fragment.findComponent(a)},findContainer:function(a){return this.container?
this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null},findParent:function(a){return this.parent?this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null},fire:function(a){for(var b=[],c=arguments.length-1;0<c--;)b[c]=arguments[c+1];return Qd(this,a,{args:b})},get:function(a,c){if("string"!==typeof a)return this.viewmodel.get(!0,a);var b=I(a),d=b[0],e;this.viewmodel.has(d)||!this.component||this.isolated||
(e=qa(this.component.parentFragment,d))&&this.viewmodel.map(d,e);e=this.viewmodel.joinAll(b);return e.get(!0,c)},getNodeInfo:function(a){"string"===typeof a&&(a=this.find(a));return te(a)},insert:function(b,c){if(!this.fragment.rendered)throw Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");b=a(b);c=a(c)||null;if(!b)throw Error("You must specify a valid target to insert into");b.insertBefore(this.detach(),
c);this.el=b;(b.__ractive_instances__||(b.__ractive_instances__=[])).push(this);this.isDetached=!1;ve(this)},link:function(a,c){if(c===a||0===(a+".").indexOf(c+".")||0===(c+".").indexOf(a+"."))throw Error("A keypath cannot be linked to itself.");var b=J.start(),d,e=I(a);!this.viewmodel.has(e[0])&&this.component&&(d=qa(this.component.parentFragment,e[0]),d=d.joinAll(e.slice(1)));this.viewmodel.joinAll(I(c)).link(d||this.viewmodel.joinAll(e),a);J.end();return b},merge:function(a,c,d){return qe(this,
this.viewmodel.joinAll(I(a)),c,d)},observe:function(a,c,d){var b=this,f=[];if(w(a))d=c||{},Object.keys(a).forEach(function(c){var e=a[c];c=c.split(" ");1<c.length&&(c=c.filter(function(a){return a}));c.forEach(function(a){f.push(we(b,a,e,d))})});else{var e;"function"===typeof a?(d=c,c=a,e=[""]):e=a.split(" ");1<e.length&&(e=e.filter(function(a){return a}));e.forEach(function(a){f.push(we(b,a,c,d||{}))})}this._observers.push.apply(this._observers,f);return{cancel:function(){f.forEach(function(a){O(b._observers,
a);a.cancel()})}}},observeList:function(a,c,d){if("string"!==typeof a)throw Error("ractive.observeList() must be passed a string as its first argument");a=this.viewmodel.joinAll(I(a));var b=new rc(this,a,c,d||{});this._observers.push(b);return{cancel:function(){b.cancel()}}},observeOnce:function(a,c,d){if(w(a)||"function"===typeof a)return d=m(c||{},Xf),this.observe(a,d);d=m(d||{},Xf);return this.observe(a,c,d)},off:function(a,c){var b=this;if(a)a.split(" ").map(xe).filter(ye).forEach(function(a){var d=
b._subs[a];d&&(c?(c.off=!0,a=d.indexOf(c),-1!==a&&d.splice(a,1)):b._subs[a]=[])});else for(a in this._subs)delete this._subs[a];return this},on:function(a,c){var b=this;if("object"===typeof a){var d=[],e;for(e in a)a.hasOwnProperty(e)&&d.push(this.on(e,a[e]));return{cancel:function(){for(var a;a=d.pop();)a.cancel()}}}a.split(" ").map(xe).filter(ye).forEach(function(a){(b._subs[a]||(b._subs[a]=[])).push(c)});return{cancel:function(){return b.off(a,c)}}},once:function(a,c){var b=this.on(a,function(){c.apply(this,
arguments);b.cancel()});return b},pop:hk,push:ik,render:function(b,c){if(this.torndown)return N("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();b=a(b)||this.el;if(!this.append&&b){var d=b.__ractive_instances__;d&&d.forEach(Lc);this.enhance||(b.innerHTML="")}var d=this.enhance?pa(b.childNodes):null,e=ze(this,b,c,d);if(d)for(;d.length;)b.removeChild(d.pop());return e},reset:function(a){a=a||{};if("object"!==typeof a)throw Error("The reset method takes either no arguments, or an object containing new data");
a=jc.init(this.constructor,this,{data:a});var b=J.start(this,!0),c=this.viewmodel.wrapper;c&&c.reset?!1===c.reset(a)&&this.viewmodel.set(a):this.viewmodel.set(a);for(var c=od.reset(this),d,e=c.length;e--;)if(-1<Bk.indexOf(c[e])){d=!0;break}d&&(Fk.fire(this),this.fragment.resetTemplate(this.template),Ek.fire(this),Ck.fire(this));J.end();Dk.fire(this,a);return b},resetPartial:function(a,c){var b=[];Ib(this.fragment.items,a,!1,b);var d=J.start(this,!0);this.partials[a]=c;b.forEach(Ii);J.end();return d},
resetTemplate:function(a){gd.init(null,this,{template:a});a=this.transitionsEnabled;this.transitionsEnabled=!1;var b=this.component;b&&(b.shouldDestroy=!0);this.unrender();b&&(b.shouldDestroy=!1);this.fragment.unbind().unrender(!0);this.fragment=new L({template:this.template,root:this,owner:this});var c=g();this.fragment.bind(this.viewmodel).render(c);b?this.fragment.findParentNode().insertBefore(c,b.findNextNode()):this.el.insertBefore(c,this.anchor);this.transitionsEnabled=a},reverse:dl,set:function(a,
c){return ga(this,wb(this,a,c))},shift:el,sort:fl,splice:gl,subtract:function(a,c){return vb(this,a,void 0===c?-1:-c)},teardown:function(){if(this.torndown)return N("ractive.teardown() was called on a Ractive instance that was already torn down"),Oa.resolve();this.torndown=!0;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(Wd);this.fragment.rendered&&this.el.__ractive_instances__&&O(this.el.__ractive_instances__,this);this.shouldDestroy=!0;var a=this.fragment.rendered?this.unrender():
Oa.resolve();hl.fire(this);return a},toggle:function(a){if("string"!==typeof a)throw new TypeError("Bad arguments");return ga(this,ab(this,a).map(function(a){return[a,!a.get()]}))},toCSS:Kf,toCss:Kf,toHTML:Lf,toHtml:Lf,transition:function(a,c,d){c instanceof HTMLElement||w(c)&&(d=c);(c=c||this.event.node)&&c._ractive||M("No node was supplied for transition "+a);d=d||{};c=c._ractive.proxy;var b=new ja({owner:c,parentFragment:c.parentFragment,name:a,params:d});b.bind();a=J.start(this,!0);J.registerTransition(b);
J.end();a.then(function(){return b.unbind()});return a},unlink:function(a){var b=J.start();this.viewmodel.joinAll(I(a),{lastLink:!1}).unlink();J.end();return b},unrender:function(){if(!this.fragment.rendered)return N("ractive.unrender() was called on a Ractive instance that was not rendered"),Oa.resolve();var a=J.start(this,!0);this.fragment.unrender(!this.component||this.component.shouldDestroy||this.shouldDestroy);O(this.el.__ractive_instances__,this);il.fire(this);J.end();return a},unshift:jl,
update:function(a){a&&(a=I(a));return re(this,a?this.viewmodel.joinAll(a):this.viewmodel)},updateModel:function(a,c){var b=J.start(this,!0);a?this.viewmodel.joinAll(I(a)).updateFromBindings(!1!==c):this.viewmodel.updateFromBindings(!0);J.end();return b}};if("function"!==typeof Date.now||"function"!==typeof String.prototype.trim||"function"!==typeof Object.keys||"function"!==typeof Array.prototype.indexOf||"function"!==typeof Array.prototype.forEach||"function"!==typeof Array.prototype.map||"function"!==
typeof Array.prototype.filter||ha&&"function"!==typeof ha.addEventListener)throw Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");m(Z.prototype,kl,Of);Z.prototype.constructor=Z;Z.defaults=Z.prototype;Db(Z,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Mf},escapeKey:{value:za},getNodeInfo:{value:te},
joinKeys:{value:function(){for(var a=[],c=arguments.length;c--;)a[c]=arguments[c];return a.map(za).join(".")}},parse:{value:rb},splitKeypath:{value:function(a){return I(a).map(va)}},unescapeKey:{value:va},getCSS:{value:bc},Promise:{value:Oa},enhance:{writable:!0,value:!1},svg:{value:Rf},magic:{value:kc},VERSION:{value:"0.8.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:Pf},events:{writable:!0,value:{}},interpolators:{writable:!0,
value:Zb},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}});return Z});(function(g,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):g.Ractive.events.tap=a()})(this,function(){function g(a,c){this.node=a;this.callback=c;this.preventMousedownEvents=!1;this.bind(a)}function a(a){this.__tap_handler__.mousedown(a)}function d(a){this.__tap_handler__.touchdown(a)}function c(){this.addEventListener("keydown",l,!1);this.addEventListener("blur",e,!1)}function e(){this.removeEventListener("keydown",l,
!1);this.removeEventListener("blur",e,!1)}function l(a){32===a.which&&this.__tap_handler__.fire()}g.prototype={bind:function(e){window.navigator.pointerEnabled?e.addEventListener("pointerdown",a,!1):window.navigator.msPointerEnabled?e.addEventListener("MSPointerDown",a,!1):e.addEventListener("mousedown",a,!1);e.addEventListener("touchstart",d,!1);"BUTTON"!==e.tagName&&"button"!==e.type||e.addEventListener("focus",c,!1);e.__tap_handler__=this},fire:function(a,c,d){this.callback({node:this.node,original:a,
x:c,y:d})},mousedown:function(a){var c=this;if(!this.preventMousedownEvents&&(void 0===a.which||1===a.which)){var d=a.clientX,e=a.clientY,g=a.pointerId,k=function(a){a.pointerId==g&&(c.fire(a,d,e),x())},l=function(a){a.pointerId==g&&(5<=Math.abs(a.clientX-d)||5<=Math.abs(a.clientY-e))&&x()},x=function M(){c.node.removeEventListener("MSPointerUp",k,!1);document.removeEventListener("MSPointerMove",l,!1);document.removeEventListener("MSPointerCancel",M,!1);c.node.removeEventListener("pointerup",k,!1);
document.removeEventListener("pointermove",l,!1);document.removeEventListener("pointercancel",M,!1);c.node.removeEventListener("click",k,!1);document.removeEventListener("mousemove",l,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",k,!1),document.addEventListener("pointermove",l,!1),document.addEventListener("pointercancel",x,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",k,!1),document.addEventListener("MSPointerMove",l,!1),document.addEventListener("MSPointerCancel",
x,!1)):(this.node.addEventListener("click",k,!1),document.addEventListener("mousemove",l,!1));setTimeout(x,400)}},touchdown:function(){var a=this,c=event.touches[0],d=c.clientX,e=c.clientY,g=c.identifier,l=function(c){c.changedTouches[0].identifier===g&&(c.preventDefault(),a.preventMousedownEvents=!0,clearTimeout(a.preventMousedownTimeout),a.preventMousedownTimeout=setTimeout(function(){a.preventMousedownEvents=!1},400),a.fire(c,d,e));x()},w=function(a){1===a.touches.length&&a.touches[0].identifier===
g||x();a=a.touches[0];(5<=Math.abs(a.clientX-d)||5<=Math.abs(a.clientY-e))&&x()},x=function M(){a.node.removeEventListener("touchend",l,!1);window.removeEventListener("touchmove",w,!1);window.removeEventListener("touchcancel",M,!1)};this.node.addEventListener("touchend",l,!1);window.addEventListener("touchmove",w,!1);window.addEventListener("touchcancel",x,!1);setTimeout(x,400)},teardown:function(){var e=this.node;e.removeEventListener("pointerdown",a,!1);e.removeEventListener("MSPointerDown",a,!1);
e.removeEventListener("mousedown",a,!1);e.removeEventListener("touchstart",d,!1);e.removeEventListener("focus",c,!1)}};return function(a,c){return new g(a,c)}});(function(g,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):a(g.Ractive.events)})(this,function(g){function a(a,c){return function(d,e){function g(g){function k(){g.preventDefault();e({node:d,original:g})}(g.which||g.keyCode)===a&&(c?g[c]&&k():k())}d.addEventListener("keydown",g,!1);return{teardown:function(){d.removeEventListener("keydown",g,!1)}}}}var d=a(13),c=a(9),e=a(27),l=a(32),k=a(37),m=a(39),p=a(40),n=a(38),
t=a(13,"ctrlKey");g.enter=d;g.ctrlenter=t;g.tab=c;g.escape=e;g.space=l;g.leftarrow=k;g.rightarrow=m;g.downarrow=p;g.uparrow=n});/*
 Autolinker.js
 0.26.0

 Copyright(c) 2016 Gregory Jacobs <greg@greg-jacobs.com>
 MIT License

 https://github.com/gregjacobs/Autolinker.js
*/
(function(g,a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports?module.exports=a():g.Autolinker=a()})(this,function(){var g=function(a){a=a||{};this.version=g.version;this.urls=this.normalizeUrlsCfg(a.urls);this.email="boolean"===typeof a.email?a.email:!0;this.twitter="boolean"===typeof a.twitter?a.twitter:!0;this.phone="boolean"===typeof a.phone?a.phone:!0;this.hashtag=a.hashtag||!1;this.newWindow="boolean"===typeof a.newWindow?a.newWindow:!0;this.stripPrefix="boolean"===
typeof a.stripPrefix?a.stripPrefix:!0;var d=this.hashtag;if(!1!==d&&"twitter"!==d&&"facebook"!==d&&"instagram"!==d)throw Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(a.truncate);this.className=a.className||"";this.replaceFn=a.replaceFn||null;this.tagBuilder=this.matchers=this.htmlParser=null};g.link=function(a,d){return(new g(d)).link(a)};g.version="0.26.0";g.prototype={constructor:g,normalizeUrlsCfg:function(a){null==a&&(a=!0);return"boolean"===typeof a?{schemeMatches:a,
wwwMatches:a,tldMatches:a}:{schemeMatches:"boolean"===typeof a.schemeMatches?a.schemeMatches:!0,wwwMatches:"boolean"===typeof a.wwwMatches?a.wwwMatches:!0,tldMatches:"boolean"===typeof a.tldMatches?a.tldMatches:!0}},normalizeTruncateCfg:function(a){return"number"===typeof a?{length:a,location:"end"}:g.Util.defaults(a||{},{length:Number.POSITIVE_INFINITY,location:"end"})},parse:function(a){a=this.getHtmlParser().parse(a);for(var d=0,c=[],e=0,g=a.length;e<g;e++){var k=a[e],m=k.getType();"element"===
m&&"a"===k.getTagName()?k.isClosing()?d=Math.max(d-1,0):d++:"text"===m&&0===d&&(k=this.parseText(k.getText(),k.getOffset()),c.push.apply(c,k))}c=this.compactMatches(c);return c=this.removeUnwantedMatches(c)},compactMatches:function(a){a.sort(function(a,c){return a.getOffset()-c.getOffset()});for(var d=0;d<a.length-1;d++)for(var c=a[d],c=c.getOffset()+c.getMatchedText().length;d+1<a.length&&a[d+1].getOffset()<=c;)a.splice(d+1,1);return a},removeUnwantedMatches:function(a){var d=g.Util.remove;this.hashtag||
d(a,function(a){return"hashtag"===a.getType()});this.email||d(a,function(a){return"email"===a.getType()});this.phone||d(a,function(a){return"phone"===a.getType()});this.twitter||d(a,function(a){return"twitter"===a.getType()});this.urls.schemeMatches||d(a,function(a){return"url"===a.getType()&&"scheme"===a.getUrlMatchType()});this.urls.wwwMatches||d(a,function(a){return"url"===a.getType()&&"www"===a.getUrlMatchType()});this.urls.tldMatches||d(a,function(a){return"url"===a.getType()&&"tld"===a.getUrlMatchType()});
return a},parseText:function(a,d){d=d||0;for(var c=this.getMatchers(),e=[],g=0,k=c.length;g<k;g++){for(var m=c[g].parseMatches(a),p=0,n=m.length;p<n;p++)m[p].setOffset(d+m[p].getOffset());e.push.apply(e,m)}return e},link:function(a){if(!a)return"";for(var d=this.parse(a),c=[],e=0,g=0,k=d.length;g<k;g++){var m=d[g];c.push(a.substring(e,m.getOffset()));c.push(this.createMatchReturnVal(m));e=m.getOffset()+m.getMatchedText().length}c.push(a.substring(e));return c.join("")},createMatchReturnVal:function(a){var d;
this.replaceFn&&(d=this.replaceFn.call(this,this,a));return"string"===typeof d?d:!1===d?a.getMatchedText():d instanceof g.HtmlTag?d.toAnchorString():a.buildTag().toAnchorString()},getHtmlParser:function(){var a=this.htmlParser;a||(a=this.htmlParser=new g.htmlParser.HtmlParser);return a},getMatchers:function(){if(this.matchers)return this.matchers;var a=g.matcher,d=this.getTagBuilder();return this.matchers=[new a.Hashtag({tagBuilder:d,serviceName:this.hashtag}),new a.Email({tagBuilder:d}),new a.Phone({tagBuilder:d}),
new a.Twitter({tagBuilder:d}),new a.Url({tagBuilder:d,stripPrefix:this.stripPrefix})]},getTagBuilder:function(){var a=this.tagBuilder;a||(a=this.tagBuilder=new g.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className}));return a}};g.match={};g.matcher={};g.htmlParser={};g.truncate={};g.Util={abstractMethod:function(){throw"abstract";},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(a,d){for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);return a},defaults:function(a,
d){for(var c in d)d.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=d[c]);return a},extend:function(a,d){var c=a.prototype,e=function(){};e.prototype=c;var l;l=d.hasOwnProperty("constructor")?d.constructor:function(){c.constructor.apply(this,arguments)};e=l.prototype=new e;e.constructor=l;e.superclass=c;delete d.constructor;g.Util.assign(e,d);return l},ellipsis:function(a,d,c){a.length>d&&(c=null==c?"..":c,a=a.substring(0,d-c.length)+c);return a},indexOf:function(a,d){if(Array.prototype.indexOf)return a.indexOf(d);
for(var c=0,e=a.length;c<e;c++)if(a[c]===d)return c;return-1},remove:function(a,d){for(var c=a.length-1;0<=c;c--)!0===d(a[c])&&a.splice(c,1)},splitAndCapture:function(a,d){if(!d.global)throw Error("`splitRegex` must have the 'g' flag set");for(var c=[],e=0,g;g=d.exec(a);)c.push(a.substring(e,g.index)),c.push(g[0]),e=g.index+g[0].length;c.push(a.substring(e));return c},trim:function(a){return a.replace(this.trimRegex,"")}};g.HtmlTag=g.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(a){g.Util.assign(this,
a);this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){this.tagName=a;return this},getTagName:function(){return this.tagName||""},setAttr:function(a,d){this.getAttrs()[a]=d;return this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(a){var d=this.getAttrs();g.Util.assign(d,a);return this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(a){var d=this.getClass(),c=this.whitespaceRegex,
e=g.Util.indexOf,d=d?d.split(c):[];for(a=a.split(c);c=a.shift();)-1===e(d,c)&&d.push(c);this.getAttrs()["class"]=d.join(" ");return this},removeClass:function(a){var d=this.getClass(),c=this.whitespaceRegex,e=g.Util.indexOf,d=d?d.split(c):[];a=a.split(c);for(var l;d.length&&(l=a.shift());)c=e(d,l),-1!==c&&d.splice(c,1);this.getAttrs()["class"]=d.join(" ");return this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},
setInnerHtml:function(a){this.innerHtml=a;return this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var a=this.getTagName(),d=this.buildAttrsStr();return["<",a,d?" "+d:"",">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),d=[],c;for(c in a)a.hasOwnProperty(c)&&d.push(c+'="'+a[c]+'"');return d.join(" ")}});g.RegexLib={alphaNumericCharsStr:"A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
domainNameRegex:RegExp("[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19.\\-]*[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b4\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fd5\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ad\ua7b0-\ua7b7\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19\\-]"),
tldRegex:/(?:travelersinsurance|sandvikcoromant|kerryproperties|cancerresearch|weatherchannel|kerrylogistics|spreadbetting|international|wolterskluwer|lifeinsurance|construction|pamperedchef|scholarships|versicherung|bridgestone|creditunion|kerryhotels|investments|productions|blackfriday|enterprises|lamborghini|photography|motorcycles|williamhill|playstation|contractors|barclaycard|accountants|redumbrella|engineering|management|telefonica|protection|consulting|tatamotors|creditcard|vlaanderen|schaeffler|associates|properties|foundation|republican|bnpparibas|boehringer|eurovision|extraspace|industries|immobilien|university|technology|volkswagen|healthcare|restaurant|cuisinella|vistaprint|apartments|accountant|travelers|homedepot|institute|vacations|furniture|fresenius|insurance|christmas|bloomberg|solutions|barcelona|firestone|financial|kuokgroup|fairwinds|community|passagens|goldpoint|equipment|lifestyle|yodobashi|aquarelle|marketing|analytics|education|amsterdam|statefarm|melbourne|allfinanz|directory|microsoft|stockholm|montblanc|accenture|lancaster|landrover|everbank|istanbul|graphics|grainger|ipiranga|softbank|attorney|pharmacy|saarland|catering|airforce|yokohama|mortgage|frontier|mutuelle|stcgroup|memorial|pictures|football|symantec|cipriani|ventures|telecity|cityeats|verisign|flsmidth|boutique|cleaning|firmdale|clinique|clothing|redstone|infiniti|deloitte|feedback|services|broadway|plumbing|commbank|training|barclays|exchange|computer|brussels|software|delivery|barefoot|builders|business|bargains|engineer|holdings|download|security|helsinki|lighting|movistar|discount|hdfcbank|supplies|marriott|property|diamonds|capetown|partners|democrat|jpmorgan|bradesco|budapest|rexroth|zuerich|shriram|academy|science|support|youtube|singles|surgery|alibaba|statoil|dentist|schwarz|android|cruises|cricket|digital|markets|starhub|systems|courses|coupons|netbank|country|domains|corsica|network|neustar|realtor|lincoln|limited|schmidt|yamaxun|cooking|contact|auction|spiegel|liaison|leclerc|latrobe|lasalle|abogado|compare|lanxess|exposed|express|company|cologne|college|avianca|lacaixa|fashion|recipes|ferrero|komatsu|storage|wanggou|clubmed|sandvik|fishing|fitness|bauhaus|kitchen|flights|florist|flowers|watches|weather|temasek|samsung|bentley|forsale|channel|theater|frogans|theatre|okinawa|website|tickets|jewelry|gallery|tiffany|iselect|shiksha|brother|organic|wedding|genting|toshiba|origins|philips|hyundai|hotmail|hoteles|hosting|rentals|windows|cartier|bugatti|holiday|careers|whoswho|hitachi|panerai|caravan|reviews|guitars|capital|trading|hamburg|hangout|finance|stream|family|abbott|health|review|travel|report|hermes|hiphop|gratis|career|toyota|hockey|dating|repair|google|social|soccer|reisen|global|otsuka|giving|unicom|casino|photos|center|broker|rocher|orange|bostik|garden|insure|ryukyu|bharti|safety|physio|sakura|oracle|online|jaguar|gallup|piaget|tienda|futbol|pictet|joburg|webcam|berlin|office|juegos|kaufen|chanel|chrome|xihuan|church|tennis|circle|kinder|flickr|bayern|claims|clinic|viajes|nowruz|xperia|norton|yachts|studio|coffee|camera|sanofi|nissan|author|expert|events|comsec|lawyer|tattoo|viking|estate|villas|condos|realty|yandex|energy|emerck|virgin|vision|durban|living|school|coupon|london|taobao|natura|taipei|nagoya|luxury|walter|aramco|sydney|madrid|credit|maison|makeup|schule|market|anquan|direct|design|swatch|suzuki|alsace|vuelos|dental|alipay|voyage|shouji|voting|airtel|mutual|degree|supply|agency|museum|mobily|dealer|monash|select|mormon|active|moscow|racing|datsun|quebec|nissay|rodeo|email|gifts|works|photo|chloe|edeka|cheap|earth|vista|tushu|koeln|glass|shoes|globo|tunes|gmail|nokia|space|kyoto|black|ricoh|seven|lamer|sener|epson|cisco|praxi|trust|citic|crown|shell|lease|green|legal|lexus|ninja|tatar|gripe|nikon|group|video|wales|autos|gucci|party|nexus|guide|linde|adult|parts|amica|lixil|boats|azure|loans|locus|cymru|lotte|lotto|stada|click|poker|quest|dabur|lupin|nadex|paris|faith|dance|canon|place|gives|trade|skype|rocks|mango|cloud|boots|smile|final|swiss|homes|honda|media|horse|cards|deals|watch|bosch|house|pizza|miami|osaka|tours|total|xerox|coach|sucks|style|delta|toray|iinet|tools|money|codes|beats|tokyo|salon|archi|movie|baidu|study|actor|yahoo|store|apple|world|forex|today|bible|tmall|tirol|irish|tires|forum|reise|vegas|vodka|sharp|omega|weber|jetzt|audio|promo|build|bingo|chase|gallo|drive|dubai|rehab|press|solar|sale|beer|bbva|bank|band|auto|sapo|sarl|saxo|audi|asia|arte|arpa|army|yoga|ally|zara|scor|scot|sexy|seat|zero|seek|aero|adac|zone|aarp|maif|meet|meme|menu|surf|mini|mobi|mtpc|porn|desi|star|ltda|name|talk|navy|love|loan|live|link|news|limo|like|spot|life|nico|lidl|lgbt|land|taxi|team|tech|kred|kpmg|sony|song|kiwi|kddi|jprs|jobs|sohu|java|itau|tips|info|immo|icbc|hsbc|town|host|page|toys|here|help|pars|haus|guru|guge|tube|goog|golf|gold|sncf|gmbh|gift|ggee|gent|gbiz|game|vana|pics|fund|ford|ping|pink|fish|film|fast|farm|play|fans|fail|plus|skin|pohl|fage|moda|post|erni|dvag|prod|doha|prof|docs|viva|diet|luxe|site|dell|sina|dclk|show|qpon|date|vote|cyou|voto|read|coop|cool|wang|club|city|chat|cern|cash|reit|rent|casa|cars|care|camp|rest|call|cafe|weir|wien|rich|wiki|buzz|wine|book|bond|room|work|rsvp|shia|ruhr|blue|bing|shaw|bike|safe|xbox|best|pwc|mtn|lds|aig|boo|fyi|nra|nrw|ntt|car|gal|obi|zip|aeg|vin|how|one|ong|onl|dad|ooo|bet|esq|org|htc|bar|uol|ibm|ovh|gdn|ice|icu|uno|gea|ifm|bot|top|wtf|lol|day|pet|eus|wtc|ubs|tvs|aco|ing|ltd|ink|tab|abb|afl|cat|int|pid|pin|bid|cba|gle|com|cbn|ads|man|wed|ceb|gmo|sky|ist|gmx|tui|mba|fan|ski|iwc|app|pro|med|ceo|jcb|jcp|goo|dev|men|aaa|meo|pub|jlc|bom|jll|gop|jmp|mil|got|gov|win|jot|mma|joy|trv|red|cfa|cfd|bio|moe|moi|mom|ren|biz|aws|xin|bbc|dnp|buy|kfh|mov|thd|xyz|fit|kia|rio|rip|kim|dog|vet|nyc|bcg|mtr|bcn|bms|bmw|run|bzh|rwe|tel|stc|axa|kpn|fly|krd|cab|bnl|foo|crs|eat|tci|sap|srl|nec|sas|net|cal|sbs|sfr|sca|scb|csc|edu|new|xxx|hiv|fox|wme|ngo|nhk|vip|sex|frl|lat|yun|law|you|tax|soy|sew|om|ac|hu|se|sc|sg|sh|sb|sa|rw|ru|rs|ro|re|qa|py|si|pw|pt|ps|sj|sk|pr|pn|pm|pl|sl|sm|pk|sn|ph|so|pg|pf|pe|pa|zw|nz|nu|nr|np|no|nl|ni|ng|nf|sr|ne|st|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|su|mn|mm|ml|mk|mh|mg|me|sv|md|mc|sx|sy|ma|ly|lv|sz|lu|lt|ls|lr|lk|li|lc|lb|la|tc|kz|td|ky|kw|kr|kp|kn|km|ki|kh|tf|tg|th|kg|ke|jp|jo|jm|je|it|is|ir|tj|tk|tl|tm|iq|tn|to|io|in|im|il|ie|ad|sd|ht|hr|hn|hm|tr|hk|gy|gw|gu|gt|gs|gr|gq|tt|gp|gn|gm|gl|tv|gi|tw|tz|ua|gh|ug|uk|gg|gf|ge|gd|us|uy|uz|va|gb|ga|vc|ve|fr|fo|fm|fk|fj|vg|vi|fi|eu|et|es|er|eg|ee|ec|dz|do|dm|dk|vn|dj|de|cz|cy|cx|cw|vu|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|wf|bz|by|bw|bv|bt|bs|br|bo|bn|bm|bj|bi|ws|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ye|ar|aq|ao|am|al|yt|ai|za|ag|af|ae|zm|id)\b/};
g.AnchorTagBuilder=g.Util.extend(Object,{constructor:function(a){g.Util.assign(this,a)},build:function(a){return new g.HtmlTag({tagName:"a",attrs:this.createAttrs(a.getType(),a.getAnchorHref()),innerHtml:this.processAnchorText(a.getAnchorText())})},createAttrs:function(a,d){var c={href:d},e=this.createCssClass(a);e&&(c["class"]=e);this.newWindow&&(c.target="_blank",c.rel="noopener noreferrer");return c},createCssClass:function(a){var d=this.className;return d?d+" "+d+"-"+a:""},processAnchorText:function(a){return a=
this.doTruncate(a)},doTruncate:function(a){var d=this.truncate;if(!d||!d.length)return a;var c=d.length,d=d.location;return"smart"===d?g.truncate.TruncateSmart(a,c,".."):"middle"===d?g.truncate.TruncateMiddle(a,c,".."):g.truncate.TruncateEnd(a,c,"..")}});g.htmlParser.HtmlParser=g.Util.extend(Object,{htmlRegex:function(){var a=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,d=/[^\s\0"'>\/=\x01-\x1F\x7F]+/.source+"(?:\\s*=\\s*"+a.source+")?";return new RegExp(["(?:<(!DOCTYPE)(?:\\s+(?:",d,"|",a.source+")",")*>)|(?:<(/)?(?:",
/!--([\s\S]+?)--/.source,"|(?:","("+/[0-9a-zA-Z][0-9a-zA-Z:]*/.source+")","(?:\\s*",d,")*\\s*/?))>)"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(a){for(var d=this.htmlRegex,c,e=0,g=[];null!==(c=d.exec(a));){var k=c[0],m=c[3],p=c[1]||c[4],n=!!c[2];c=c.index;var t=a.substring(e,c);t&&(e=this.parseTextAndEntityNodes(e,t),g.push.apply(g,e));m?g.push(this.createCommentNode(c,k,m)):g.push(this.createElementNode(c,k,p,n));e=c+
k.length}e<a.length&&(a=a.substring(e))&&(e=this.parseTextAndEntityNodes(e,a),g.push.apply(g,e));return g},parseTextAndEntityNodes:function(a,d){for(var c=[],e=g.Util.splitAndCapture(d,this.htmlCharacterEntitiesRegex),l=0,k=e.length;l<k;l+=2){var m=e[l],p=e[l+1];m&&(c.push(this.createTextNode(a,m)),a+=m.length);p&&(c.push(this.createEntityNode(a,p)),a+=p.length)}return c},createCommentNode:function(a,d,c){return new g.htmlParser.CommentNode({offset:a,text:d,comment:g.Util.trim(c)})},createElementNode:function(a,
d,c,e){return new g.htmlParser.ElementNode({offset:a,text:d,tagName:c.toLowerCase(),closing:e})},createEntityNode:function(a,d){return new g.htmlParser.EntityNode({offset:a,text:d})},createTextNode:function(a,d){return new g.htmlParser.TextNode({offset:a,text:d})}});g.htmlParser.HtmlNode=g.Util.extend(Object,{offset:void 0,text:void 0,constructor:function(a){g.Util.assign(this,a);if(null==this.offset)throw Error("`offset` cfg required");if(null==this.text)throw Error("`text` cfg required");},getType:g.Util.abstractMethod,
getOffset:function(){return this.offset},getText:function(){return this.text}});g.htmlParser.CommentNode=g.Util.extend(g.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}});g.htmlParser.ElementNode=g.Util.extend(g.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}});g.htmlParser.EntityNode=g.Util.extend(g.htmlParser.HtmlNode,
{getType:function(){return"entity"}});g.htmlParser.TextNode=g.Util.extend(g.htmlParser.HtmlNode,{getType:function(){return"text"}});g.match.Match=g.Util.extend(Object,{constructor:function(a){if(null==a.tagBuilder)throw Error("`tagBuilder` cfg required");if(null==a.matchedText)throw Error("`matchedText` cfg required");if(null==a.offset)throw Error("`offset` cfg required");this.tagBuilder=a.tagBuilder;this.matchedText=a.matchedText;this.offset=a.offset},getType:g.Util.abstractMethod,getMatchedText:function(){return this.matchedText},
setOffset:function(a){this.offset=a},getOffset:function(){return this.offset},getAnchorHref:g.Util.abstractMethod,getAnchorText:g.Util.abstractMethod,buildTag:function(){return this.tagBuilder.build(this)}});g.match.Email=g.Util.extend(g.match.Match,{constructor:function(a){g.match.Match.prototype.constructor.call(this,a);if(!a.email)throw Error("`email` cfg required");this.email=a.email},getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+
this.email},getAnchorText:function(){return this.email}});g.match.Hashtag=g.Util.extend(g.match.Match,{constructor:function(a){g.match.Match.prototype.constructor.call(this,a);if(!a.hashtag)throw Error("`hashtag` cfg required");this.serviceName=a.serviceName;this.hashtag=a.hashtag},getType:function(){return"hashtag"},getServiceName:function(){return this.serviceName},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var a=this.serviceName,d=this.hashtag;switch(a){case "twitter":return"https://twitter.com/hashtag/"+
d;case "facebook":return"https://www.facebook.com/hashtag/"+d;case "instagram":return"https://instagram.com/explore/tags/"+d;default:throw Error("Unknown service name to point hashtag to: ",a);}},getAnchorText:function(){return"#"+this.hashtag}});g.match.Phone=g.Util.extend(g.match.Match,{constructor:function(a){g.match.Match.prototype.constructor.call(this,a);if(!a.number)throw Error("`number` cfg required");if(null==a.plusSign)throw Error("`plusSign` cfg required");this.number=a.number;this.plusSign=
a.plusSign},getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+(this.plusSign?"+":"")+this.number},getAnchorText:function(){return this.matchedText}});g.match.Twitter=g.Util.extend(g.match.Match,{constructor:function(a){g.match.Match.prototype.constructor.call(this,a);if(!a.twitterHandle)throw Error("`twitterHandle` cfg required");this.twitterHandle=a.twitterHandle},getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},
getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}});g.match.Url=g.Util.extend(g.match.Match,{constructor:function(a){g.match.Match.prototype.constructor.call(this,a);if("scheme"!==a.urlMatchType&&"www"!==a.urlMatchType&&"tld"!==a.urlMatchType)throw Error('`urlMatchType` cfg must be one of: "scheme", "www", or "tld"');if(!a.url)throw Error("`url` cfg required");if(null==a.protocolUrlMatch)throw Error("`protocolUrlMatch` cfg required");
if(null==a.protocolRelativeMatch)throw Error("`protocolRelativeMatch` cfg required");if(null==a.stripPrefix)throw Error("`stripPrefix` cfg required");this.urlMatchType=a.urlMatchType;this.url=a.url;this.protocolUrlMatch=a.protocolUrlMatch;this.protocolRelativeMatch=a.protocolRelativeMatch;this.stripPrefix=a.stripPrefix},urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrlMatchType:function(){return this.urlMatchType},getUrl:function(){var a=
this.url;this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0);return a},getAnchorHref:function(){return this.getUrl().replace(/&amp;/g,"&")},getAnchorText:function(){var a=this.getMatchedText();this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a));this.stripPrefix&&(a=this.stripUrlPrefix(a));return a=this.removeTrailingSlash(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,
"")},removeTrailingSlash:function(a){"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1));return a}});g.matcher.Matcher=g.Util.extend(Object,{constructor:function(a){if(!a.tagBuilder)throw Error("`tagBuilder` cfg required");this.tagBuilder=a.tagBuilder},parseMatches:g.Util.abstractMethod});g.matcher.Email=g.Util.extend(g.matcher.Matcher,{matcherRegex:new RegExp([(new RegExp("["+g.RegexLib.alphaNumericCharsStr+"\\-;:&=+$.,]+@")).source,g.RegexLib.domainNameRegex.source,"\\.",g.RegexLib.tldRegex.source].join(""),
"gi"),parseMatches:function(a){for(var d=this.matcherRegex,c=this.tagBuilder,e=[],l;null!==(l=d.exec(a));){var k=l[0];e.push(new g.match.Email({tagBuilder:c,matchedText:k,offset:l.index,email:k}))}return e}});g.matcher.Hashtag=g.Util.extend(g.matcher.Matcher,{matcherRegex:new RegExp("#[_"+g.RegexLib.alphaNumericCharsStr+"]{1,139}","g"),nonWordCharRegex:new RegExp("[^"+g.RegexLib.alphaNumericCharsStr+"]"),constructor:function(a){g.matcher.Matcher.prototype.constructor.call(this,a);this.serviceName=
a.serviceName},parseMatches:function(a){for(var d=this.matcherRegex,c=this.nonWordCharRegex,e=this.serviceName,l=this.tagBuilder,k=[],m;null!==(m=d.exec(a));){var p=m.index,n=a.charAt(p-1);if(0===p||c.test(n))n=m[0],m=m[0].slice(1),k.push(new g.match.Hashtag({tagBuilder:l,matchedText:n,offset:p,serviceName:e,hashtag:m}))}return k}});g.matcher.Phone=g.Util.extend(g.matcher.Matcher,{matcherRegex:/(?:(\+)?\d{1,3}[-\040.])?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]\d{4}/g,parseMatches:function(a){for(var d=this.matcherRegex,
c=this.tagBuilder,e=[],l;null!==(l=d.exec(a));){var k=l[0],m=k.replace(/\D/g,"");e.push(new g.match.Phone({tagBuilder:c,matchedText:k,offset:l.index,number:m,plusSign:!!l[1]}))}return e}});g.matcher.Twitter=g.Util.extend(g.matcher.Matcher,{matcherRegex:new RegExp("@[_"+g.RegexLib.alphaNumericCharsStr+"]{1,20}","g"),nonWordCharRegex:new RegExp("[^"+g.RegexLib.alphaNumericCharsStr+"]"),parseMatches:function(a){for(var d=this.matcherRegex,c=this.nonWordCharRegex,e=this.tagBuilder,l=[],k;null!==(k=d.exec(a));){var m=
k.index,p=a.charAt(m-1);if(0===m||c.test(p))p=k[0],k=k[0].slice(1),l.push(new g.match.Twitter({tagBuilder:e,matchedText:p,offset:m,twitterHandle:k}))}return l}});g.matcher.Url=g.Util.extend(g.matcher.Matcher,{matcherRegex:function(){var a=g.RegexLib.domainNameRegex,d=g.RegexLib.alphaNumericCharsStr;return new RegExp(["(?:(",/(?:[A-Za-z][-.+A-Za-z0-9]*:(?![A-Za-z][-.+A-Za-z0-9]*:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,a.source,")|((//)?",/(?:www\.)/.source,a.source,")|((//)?",a.source+"\\.",g.RegexLib.tldRegex.source,
"))","(?:"+(new RegExp("["+d+"\\-+&@#/%=~_()|'$*\\[\\]?!:,.;]*["+d+"\\-+&@#/%=~_()|'$*\\[\\]]")).source+")?"].join(""),"gi")}(),wordCharRegExp:/\w/,openParensRe:/\(/g,closeParensRe:/\)/g,constructor:function(a){g.matcher.Matcher.prototype.constructor.call(this,a);this.stripPrefix=a.stripPrefix;if(null==this.stripPrefix)throw Error("`stripPrefix` cfg required");},parseMatches:function(a){for(var d=this.matcherRegex,c=this.stripPrefix,e=this.tagBuilder,l=[],k;null!==(k=d.exec(a));){var m=k[0],p=k[1],
n=k[2],t=k[5],q=k.index;k=k[3]||t;t=a.charAt(q-1);!g.matcher.UrlMatchValidator.isValid(m,p)||0<q&&"@"===t||0<q&&k&&this.wordCharRegExp.test(t)||(this.matchHasUnbalancedClosingParen(m)?m=m.substr(0,m.length-1):(t=this.matchHasInvalidCharAfterTld(m,p),-1<t&&(m=m.substr(0,t))),l.push(new g.match.Url({tagBuilder:e,matchedText:m,offset:q,urlMatchType:p?"scheme":n?"www":"tld",url:m,protocolUrlMatch:!!p,protocolRelativeMatch:!!k,stripPrefix:c})))}return l},matchHasUnbalancedClosingParen:function(a){if(")"===
a.charAt(a.length-1)){var d=a.match(this.openParensRe);a=a.match(this.closeParensRe);if((d&&d.length||0)<(a&&a.length||0))return!0}return!1},matchHasInvalidCharAfterTld:function(a,d){if(!a)return-1;var c=0;d&&(c=a.indexOf(":"),a=a.slice(c));var e=/^((.?\/\/)?[A-Za-z0-9\u00C0-\u017F\.\-]*[A-Za-z0-9\u00C0-\u017F\-]\.[A-Za-z]+)/.exec(a);if(null===e)return-1;c+=e[1].length;a=a.slice(e[1].length);return/^[^.A-Za-z:\/?#]/.test(a)?c:-1}});g.matcher.UrlMatchValidator={hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,
uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]*:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z\u00C0-\u017F]/,isValid:function(a,d){return d&&!this.isValidUriScheme(d)||this.urlMatchDoesNotHaveProtocolOrDot(a,d)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,d)?!1:!0},isValidUriScheme:function(a){a=a.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==a&&"vbscript:"!==a},urlMatchDoesNotHaveProtocolOrDot:function(a,d){return!!a&&(!d||!this.hasFullProtocolRegex.test(d))&&-1===a.indexOf(".")},
urlMatchDoesNotHaveAtLeastOneWordChar:function(a,d){return a&&d?!this.hasWordCharAfterProtocolRegex.test(a):!1}};g.truncate.TruncateEnd=function(a,d,c){return g.Util.ellipsis(a,d,c)};g.truncate.TruncateMiddle=function(a,d,c){if(a.length<=d)return a;var e=d-c.length,g="";0<e&&(g=a.substr(-1*Math.floor(e/2)));return(a.substr(0,Math.ceil(e/2))+c+g).substr(0,d)};g.truncate.TruncateSmart=function(a,d,c){var e=function(a){var c="";a.scheme&&a.host&&(c+=a.scheme+"://");a.host&&(c+=a.host);a.path&&(c+="/"+
a.path);a.query&&(c+="?"+a.query);a.fragment&&(c+="#"+a.fragment);return c},g=function(a,d){var e=d/2,g=Math.ceil(e),e=-1*Math.floor(e),k="";0>e&&(k=a.substr(e));return a.substr(0,g)+c+k};if(a.length<=d)return a;var k=d-c.length,m=function(a){var c={},d=a.match(/^([a-z]+):\/\//i);d&&(c.scheme=d[1],a=a.substr(d[0].length));if(d=a.match(/^(.*?)(?=(\?|#|\/|$))/i))c.host=d[1],a=a.substr(d[0].length);if(d=a.match(/^\/(.*?)(?=(\?|#|$))/i))c.path=d[1],a=a.substr(d[0].length);if(d=a.match(/^\?(.*?)(?=(#|$))/i))c.query=
d[1],a=a.substr(d[0].length);if(d=a.match(/^#(.*?)$/i))c.fragment=d[1];return c}(a);if(m.query){var p=m.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);p&&(m.query=m.query.substr(0,p[1].length),a=e(m))}if(a.length<=d)return a;m.host&&(m.host=m.host.replace(/^www\./,""),a=e(m));if(a.length<=d)return a;a="";m.host&&(a+=m.host);if(a.length>=k)return m.host.length==d?(m.host.substr(0,d-c.length)+c).substr(0,d):g(a,k).substr(0,d);e="";m.path&&(e+="/"+m.path);m.query&&(e+="?"+m.query);if(e){if((a+e).length>=k)return(a+
e).length==d?(a+e).substr(0,d):(a+g(e,k-a.length)).substr(0,d);a+=e}if(m.fragment){e="#"+m.fragment;if((a+e).length>=k)return(a+e).length==d?(a+e).substr(0,d):(a+g(e,k-a.length)).substr(0,d);a+=e}if(m.scheme&&m.host&&(g=m.scheme+"://",(a+g).length<k))return(g+a).substr(0,d);if(a.length<=d)return a;g="";0<k&&(g=a.substr(-1*Math.floor(k/2)));return(a.substr(0,Math.ceil(k/2))+c+g).substr(0,d)};return g});(function(g){function a(){}function d(a,c){return function(){a.apply(c,arguments)}}function c(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];n(a,this)}function e(a,d){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(d):(a._handled=!0,c._immediateFn(function(){var c=1===a._state?d.onFulfilled:d.onRejected;if(null===
c)(1===a._state?l:k)(d.promise,a._value);else{var e;try{e=c(a._value)}catch(M){k(d.promise,M);return}l(d.promise,e)}}))}function l(a,e){try{if(e===a)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var g=e.then;if(e instanceof c){a._state=3;a._value=e;m(a);return}if("function"===typeof g){n(d(g,e),a);return}}a._state=1;a._value=e;m(a)}catch(K){k(a,K)}}function k(a,c){a._state=2;a._value=c;m(a)}function m(a){2===a._state&&0===a._deferreds.length&&
c._immediateFn(function(){a._handled||c._unhandledRejectionFn(a._value)});for(var d=0,g=a._deferreds.length;d<g;d++)e(a,a._deferreds[d]);a._deferreds=null}function p(a,c,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof c?c:null;this.promise=d}function n(a,c){var d=!1;try{a(function(a){d||(d=!0,l(c,a))},function(a){d||(d=!0,k(c,a))})}catch(K){d||(d=!0,k(c,K))}}var t=setTimeout;c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(c,
d){var g=new this.constructor(a);e(this,new p(c,d,g));return g};c.all=function(a){var d=Array.prototype.slice.call(a);return new c(function(a,c){function e(k,l){try{if(l&&("object"===typeof l||"function"===typeof l)){var m=l.then;if("function"===typeof m){m.call(l,function(a){e(k,a)},c);return}}d[k]=l;0===--g&&a(d)}catch(wa){c(wa)}}if(0===d.length)return a([]);for(var g=d.length,k=0;k<d.length;k++)e(k,d[k])})};c.resolve=function(a){return a&&"object"===typeof a&&a.constructor===c?a:new c(function(c){c(a)})};
c.reject=function(a){return new c(function(c,d){d(a)})};c.race=function(a){return new c(function(c,d){for(var e=0,g=a.length;e<g;e++)a[e].then(c,d)})};c._immediateFn="function"===typeof setImmediate&&function(a){setImmediate(a)}||function(a){t(a,0)};c._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};c._setImmediateFn=function(a){c._immediateFn=a};c._setUnhandledRejectionFn=function(a){c._unhandledRejectionFn=a};"undefined"!==
typeof module&&module.exports?module.exports=c:g.Promise||(g.Promise=c)})(this);window.SECU=window.SECU||{};
window.SECU.Ajax={_data:{url:{api:{host:"https://api.secu.su",port:"3000",feedback:"/feedback",post:"/s",get:"/s/",stat:"/stat",chat:"/r"},web:{host:"https://secu.su",page:"/",chat:"/c/"}}},assignHost:function(){var g=this._data,a=window.location.host;"secu.su"!==window.location.host&&(g.url.api.host="http://api-test.secu.su",g.url.api.port="7001",g.url.web.host=a)},call:function(g){return new Promise(function(a,d){var c=new XMLHttpRequest;c.open(g.method,g.url,!0);g.contentType&&c.setRequestHeader("Content-type",
g.contentType);c.send(g.data);c.onload=function(){200<=this.status&&300>this.status?a(this.response):d(this.statusText)};c.onerror=function(){d(this.statusText)}})},sendFeedback:function(g){var a=this._data;return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(g),url:a.url.api.host+a.url.api.feedback})},requestContainer:function(g){var a=this._data;return this.call({method:"GET",url:a.url.api.host+a.url.api.get+g})},sendContainer:function(g){var a=this._data;
return this.call({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(g),url:a.url.api.host+a.url.api.post})}};window.SECU=window.SECU||{};
window.SECU.Socket={_data:{},initStats:function(){var g=this._data;g.stats=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port,{secure:!0});g.stats.on("secu-channel:App\\Events\\SecuWasCreated",function(a){window.SECU.App.refreshCount(a.id)})},initChat:function(){var g=this._data,a=window.SECU.App._data.app;g.chat=io.connect(window.SECU.Ajax._data.url.api.host+":"+window.SECU.Ajax._data.url.api.port+"/c",{secure:!0});g.chat.on("connect",function(){window.SECU.Chat.enable()});
g.chat.on("reconnect",function(){window.SECU.Chat.enable()});g.chat.on("connecting",function(){window.SECU.Chat.disable()});g.chat.on("reconnecting",function(){window.SECU.Chat.disable()});g.chat.on("reconnect_failed",function(){window.SECU.Chat.disable()});g.chat.on("disconnect",function(){window.SECU.Chat.disable()});g.chat.on("connect_failed",function(){window.SECU.Chat.disable()});g.chat.on("connect_error",function(){window.SECU.Chat.disable()});g.chat.on("close",function(){window.SECU.Chat.disable()});
g.chat.on("error",function(){window.SECU.Chat.disable()});g.chat.on("room.create",function(d){d.success?(a.set("chat.form.room",d.room),window.SECU.Chat.join(a.get("chat.form"))):(a.set("chat.formDisabled",!1),a.set("chat.formActive",!0),window.SECU.Error.show(d.errors))});g.chat.on("room.join",function(d){d.success?d.hasOwnProperty("key")?(a.set("chat.formDisabled",!1),window.SECU.Chat.start(d)):window.SECU.Chat.appendData({sender:"SYS",data:{text:d.name+" joined the room"}}):(a.set("chat.formDisabled",
!1),a.set("chat.formActive",!0),window.SECU.Error.show(d.errors))});g.chat.on("room.join.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});g.chat.on("room.data.attempt",function(a){window.SECU.Chat.appendData({sender:"SYS",data:{text:a.errors[0]}})});g.chat.on("room.leave",function(a){a.success?a.self||window.SECU.Chat.appendData({sender:"SYS",data:{text:a.name+" left the room"}}):window.SECU.Error.show(a.errors)});g.chat.on("room.roster",function(a){a=window.SECU.Chat.sortRoster(a);
window.SECU.Chat.refreshRoster(a)});g.chat.on("room.data",function(a){a.hasOwnProperty("sender")&&a.hasOwnProperty("data")?window.SECU.Chat.appendData(a):window.SECU.Chat.appendOwnData(a)})},init:function(){this.initStats();this.initChat()}};window.SECU=window.SECU||{};
window.SECU.Crypt={_data:{encryptionParameters:{iterations:4096,keySize:256,authenticationStrength:128,authenticatedData:"S\u00cbCU",cipherMode:"gcm"}},getRandomHexValue:function(g,a){return sjcl.random.randomWords(g,a)},decrypt:function(g){return sjcl.decrypt(g.password,g.message,{},{})},encrypt:function(g){var a=this._data.encryptionParameters,a={adata:a.authenticatedData+"-"+(new Date).getTime(),iter:a.iterations,mode:a.cipherMode,ts:a.authenticationStrength,ks:a.keySize,iv:this.getRandomHexValue(4,
0),salt:this.getRandomHexValue(2,0)};return sjcl.encrypt(g.password,g.message,a,{})}};window.SECU=window.SECU||{};
window.SECU.Helpers={_data:{},getHumanTime:function(g){function a(a){1===a.toString().length&&(a="0"+a);return a}g=new Date(g);return a(g.getHours())+":"+a(g.getMinutes())},checkVisibility:function(){var g=window.SECU.App._data.app;switch(document.visibilityState){case "hidden":g.set("windowFocused",!1);break;default:g.set("windowFocused",!0)}},watchWindowFocus:function(){document.addEventListener("visibilitychange",this.checkVisibility)},parseNewLines:function(g){return g=g.replace(/(?:\r\n|\r|\n)/g,
"<br>")},convertToPlainText:function(g){return g.replace(/[&<>"']/g,function(a){return"&"+{"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39"}[a]+";"})},getPosition:function(g){g=g.getBoundingClientRect();var a=document.body,d=document.documentElement;return{top:Math.round(g.top+(window.pageYOffset||d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0)),left:Math.round(g.left+(window.pageXOffset||d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0))}},generateTimestamp:function(g){return(g?
new Date(g):new Date).getTime()},watchResize:function(){window.addEventListener("resize",this.fixChatFeedHeight,!1)},dockNavbar:function(g){window.SECU.App._data.app.set("dock.navbar",g)},watchScroll:function(){var g=this._data,a=window.SECU.App._data.app;g.nav={};g.nav.spacer=document.getElementsByClassName("navbar-spacer")[0];window.addEventListener("scroll",function(d){if(!a.get("show.chat")||a.get("chat.formActive"))document.body.scrollTop>g.nav.spacer.offsetTop?window.SECU.Helpers.dockNavbar(!0):
window.SECU.Helpers.dockNavbar(!1)},!1)},watchDragDrop:function(){function g(c){c.preventDefault();clearTimeout(d.dropTimeout);var e=null,g=null,k=null;switch(c.type){case "dragenter":case "dragover":a.set("dropActive",!0);d.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "dragleave":d.dropTimeout=setTimeout(function(){a.set("dropActive",!1)},1E3);break;case "drop":a.set("dropActive",!1),k=c.dataTransfer.files,document.getElementById("chatFile")?(e="room",g="chat.room.rawFile"):
document.getElementById("messageFile")&&(e="encrypt",g="encrypt.rawFile"),k.length&&e&&g&&(a.set(g,[c.dataTransfer.files[0]]),a.fire("checkFile",null,e))}}var a=window.SECU.App._data.app,d=this._data;a.get("supportedFeatures.dragdrop")&&(document.body.addEventListener("dragover",g,!1),document.body.addEventListener("dragenter",g,!1),document.body.addEventListener("dragleave",g,!1),document.body.addEventListener("drop",g,!1))},checkLocation:function(){var g;-1<window.location.pathname.indexOf("/c/")?
(g=window.location.pathname.substring(3),g.length&&window.SECU.App._data.app.set("chat.form.room",g),window.SECU.App._data.app.fire("toggleView",null,"chat")):(g=window.location.pathname.substring(1),g.length&&window.SECU.App._data.app.set("decrypt.hash",g))},checkNotification:function(){window.SECU.App._data.app.set("supportedFeatures.notification","Notification"in window)},checkCopy:function(){window.SECU.App._data.app.set("supportedFeatures.copy",document.queryCommandSupported("copy"))},checkDownload:function(){window.SECU.App._data.app.set("supportedFeatures.download",
"download"in document.createElement("a"))},checkDragDrop:function(){var g=document.createElement("div");window.SECU.App._data.app.set("supportedFeatures.dragdrop","ondragstart"in g&&"ondrop"in g)},fixChatFeedHeight:function(){var g=window.SECU.Helpers,a=document.getElementById("chat-feed-block"),d=document.getElementById("chat-form-block"),c=window.SECU.Chat.scrolledToBottom();a&&(a.style.height="0px",a.style.height=g.getPosition(d).top-g.getPosition(a).top+"px",c&&window.SECU.Chat.updateScroll("bottom"))},
fixTextareaHeight:function(g,a){var d=window.SECU.App._data.app,c=g?g.node:document.getElementById(a+"ContainerBody"),e=getComputedStyle(c).getPropertyValue("border-width"),e=e.length?parseInt(e,10):1;d.set(a+".textareaHeight","0px");c.scrollHeight>c.offsetHeight&&d.set(a+".textareaHeight",c.scrollHeight+2*e+"px")},copyText:function(g){g.select();document.execCommand("copy");g.blur();window.getSelection().removeAllRanges()},formatCounter:function(g){g=parseInt(g,10);return g.toLocaleString()}};window.SECU=window.SECU||{};
window.SECU.File={_data:{maxFileSize:1572864},base64ToBlob:function(g){var a=atob(g.split(",")[1]);g=g.split(",")[0].split(":")[1].split(";")[0];for(var d=new ArrayBuffer(a.length),c=new Uint8Array(d),e=0;e<a.length;e++)c[e]=a.charCodeAt(e);a=new Blob([d],{type:g});return URL.createObjectURL(a)},fileToBase64:function(g){var a=new FileReader;return new Promise(function(d,c){try{a.onload=function(a){d(a.target.result)},a.readAsDataURL(g)}catch(e){c(e)}})},getExtension:function(g){return g.split(".").pop()},prettifySize:function(g){g=
Math.round(g/1E3);return g=1E3<=g?(g/1E3).toFixed(1)+"MB":g+"KB"},validated:function(g){return(g=g[0])?g.size>this._data.maxFileSize?["The file is too big"]:g:!1}};window.SECU=window.SECU||{};window.SECU.Error={_data:{},show:function(g){var a=window.SECU.Error,d=a._data,c=window.SECU.App._data.app;c.set("errors.messages",g);c.set("errors.show",!0);clearTimeout(d.errorTimeout);d.errorTimeout=setTimeout(function(){a.hide()},3E3)},hide:function(){var g=window.SECU.Error._data;window.SECU.App._data.app.set("errors.show",!1);clearTimeout(g.errorTimeout)}};window.SECU=window.SECU||{};
window.SECU.Chat={_data:{sentQueue:[]},unreadPos:function(){var g=this.getChat().getElementsByClassName("unread");return g[g.length-1].offsetTop},watchFeedScroll:function(g){function a(a){c.set("chat.room.unread",!1);c.set("chat.room.scrolled",d.scrolledToBottom())}var d=this,c=window.SECU.App._data.app,e=this.getChat();e&&(g?e.removeEventListener("scroll",a,!1):e.addEventListener("scroll",a,!1))},logout:function(g){window.SECU.Socket._data.chat.emit("room.leave",g)},sortRoster:function(g){var a=window.SECU.App._data.app.get("chat.room.connection.name"),
d=null;if(1===g.length||g[0].name===a)return g;for(var c=0;c<g.length;c++)if(g[c].name===a){d=g[c];g.splice(c,1);break}g.unshift(d);return g},addSentQueue:function(g){this._data.sentQueue.push(JSON.parse(JSON.stringify(g)))},extractSentQueue:function(g){for(var a=this._data.sentQueue,d=null,c=0;c<a.length;c++)if(a[c].sent_at===g){d=a[c];break}a.splice(c,1);d.sender=window.SECU.App._data.app.get("chat.room.connection.name");return d},getChat:function(){var g=document.getElementById("chat-feed-block");
return g?g.children[0]:!1},scrollPresent:function(){var g=this.getChat();return g?g.scrollHeight===g.offsetHeight?!1:!0:!1},scrolledToBottom:function(){var g=this.getChat();return g?g.scrollTop>=g.scrollHeight-g.offsetHeight?!0:!1:!1},updateScroll:function(g){var a=this.getChat();if(a){switch(g){case "top":g=0;break;case "bottom":g=a.scrollHeight}a.scrollTop=g}},decryptData:function(g){var a="",d=[];if("string"!==typeof g.text)try{a=window.SECU.Crypt.decrypt({message:JSON.stringify(g.text),password:window.SECU.App._data.app.get("chat.room.connection.key")})}catch(c){a=
"Error. Couldn't decrypt text data."}else a=g.text;g.files&&g.files.length&&(g=g.files[0],d[0]={name:g.name,extension:window.SECU.File.getExtension(g.name)},d[0].data="string"===typeof g.data?window.SECU.File.base64ToBlob(g.data):window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt({message:JSON.stringify(g.data),password:window.SECU.App._data.app.get("chat.room.connection.key")})));return{text:a,files:d}},appendOwnData:function(g){this.appendData(this.extractSentQueue(g.sent_at))},appendData:function(g){var a=
window.SECU.App._data.app,d=this.scrolledToBottom(),c=a.get("windowFocused");g.data=this.decryptData(g.data);g.data.text=window.SECU.Helpers.convertToPlainText(g.data.text);g.data.text=window.SECU.Helpers.parseNewLines(g.data.text);g.data.text=window.SECU.Helpers.Autolinker.link(g.data.text);g.delivered_at=g.delivered_at||window.SECU.Helpers.generateTimestamp();a.get("chat.room.unread")||c&&a.get("show.chat")&&(!this.scrollPresent()||d)||(a.set("chat.room.feed.*.unread",!1),g.unread=!0);a.push("chat.room.feed",
g);c?g.sender===a.get("chat.room.connection.name")||d?(a.set("chat.room.feed.*.unread",!1),this.updateScroll("bottom")):!this.scrollPresent()&&a.get("show.chat")||a.set("chat.room.unread",!0):(a.set("chat.room.unread",!0),a.set("chat.room.scrolled",this.scrolledToBottom()));a.get("supportedFeatures.notification")&&!c&&window.SECU.Notifications.fire({body:"SYS"===g.sender?g.data.text:g.sender+" has sent a message"})},sendData:function(g){window.SECU.Socket._data.chat.emit("room.data",g)},refreshRoster:function(g){window.SECU.App._data.app.set("chat.room.roster",
g)},join:function(g){window.SECU.Socket._data.chat.emit("room.join",g)},create:function(g){window.SECU.Socket._data.chat.emit("room.create",{password:g.password})},enable:function(){window.SECU.App._data.app.set("chat.enabled",!0)},disable:function(){var g=window.SECU.App._data.app;g.get("show.chat")&&window.SECU.App._data.app.fire("toggleView",null,"main");g.get("chat.room.connection.key").length&&(window.SECU.App.reinitApp("chat"),window.SECU.Error.show(["Connection error"]));g.set("chat.enabled",
!1);this.watchFeedScroll(!0)},start:function(g){var a=window.SECU.App._data.app,d=window.SECU.Ajax._data.url,c=a.get("chat.form.room");a.set("chat.done",!0);a.set("chat.room.connection",{link:d.web.host+d.web.chat+c,room:c,name:g.name,key:g.key});this.appendData({sender:"SYS",data:{text:g.name+" joined the room"}});a.set("chat.formActive",!1);a.set("chat.form",{room:"",password:""});a.set("dock.chat",!0);window.SECU.Helpers.dockNavbar(!0);setTimeout(function(){window.SECU.Helpers.fixChatFeedHeight()},
0);this.watchFeedScroll();a.get("supportedFeatures.notification")&&window.SECU.Notifications.init()},init:function(){window.SECU.Helpers.fixChatFeedHeight();this.watchFeedScroll();window.SECU.App._data.app.get("chat.room.unread")?this.updateScroll(this.unreadPos()):this.updateScroll("bottom")}};window.SECU=window.SECU||{};
window.SECU.Notifications={_data:{active:null,activeTimeout:null,timeout:4E3},fire:function(g){if("granted"===Notification.permission){var a=this._data;clearTimeout(a.activeTimeout);a.active&&(g.vibrate=200);g.tag="SECU_SYS";g.icon="/images/secu.png";a.active=new Notification("S\u00cbCU",g);a.activeTimeout=setTimeout(function(){a.active.close();a.active=null},a.timeout)}},init:function(){if("denied"!==Notification.permission){var g=this;"granted"!==Notification.permission&&Notification.requestPermission(function(a){"granted"===
a&&g.fire({body:"Thanks!"})})}}};Ractive.DEBUG=!1;window.SECU=window.SECU||{};
window.SECU.App={_data:{params:{encrypt:{done:!1,link:"",formActive:!0,formDisabled:!1,rawFile:[],fileData:{size:"",name:"",extension:""},file:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},decrypt:{done:!1,success:!0,hash:"",loaded:!1,formDisabled:!1,formActive:!1,message:"",files:[],fileForm:{message:"",password:""},form:{message:"",password:""},textareaHeight:"0px"},feedback:{formDisabled:!1,sent:!1,form:{body:"",email:""},textareaHeight:"0px"},chat:{enabled:!1,done:!1,
formDisabled:!1,formActive:!0,room:{scrolled:!0,unread:!1,connection:{link:"",room:"",name:"",key:""},feed:[],roster:[],rawFile:[],fileData:{size:"",name:"",extension:""},input:{text:"",file:""},feedHeight:"0px"},form:{room:"",password:""}}}},reinitApp:function(g){var a=this._data,d=a.app;d.set("textCopied",!1);d.set("dropActive",!1);g&&(window.SECU.Error.hide(),history.replaceState({},"S\u00ebcu","/"));switch(g){case "package":d.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt)));d.set("encrypt",
JSON.parse(JSON.stringify(a.params.encrypt)));break;case "feedback":d.set("feedback",JSON.parse(JSON.stringify(a.params.feedback)));break;case "chat":d.set("chat",JSON.parse(JSON.stringify(a.params.chat)));break;default:d.set("decrypt",JSON.parse(JSON.stringify(a.params.decrypt))),d.set("encrypt",JSON.parse(JSON.stringify(a.params.encrypt))),d.set("feedback",JSON.parse(JSON.stringify(a.params.feedback))),d.set("chat",JSON.parse(JSON.stringify(a.params.chat)))}},refreshCount:function(g){var a=this._data;
a.app.set("counter.number",window.SECU.Helpers.formatCounter(g));a.app.set("counter.show",!0)},init:function(){var g=this,a=this._data,d=new Ractive({el:document.getElementsByClassName("secuApp")[0],template:"#secuApp",data:{windowFocused:!0,dock:{navbar:!1,chat:!1},modal:{active:!1,closeText:"Close"},counter:{show:!1,number:"9000"},show:{main:!0,chat:!1,faq:!1,feedback:!1},textCopied:!1,dropActive:!1,supportedFeatures:{copy:!0,download:!0,dragdrop:!0},errors:{show:!1,messages:[]},humanTime:window.SECU.Helpers.getHumanTime}});
a.app=d;this.reinitApp();d.on({scrollToBottom:function(){this.get("chat.room.unread")?window.SECU.Chat.updateScroll(window.SECU.Chat.unreadPos()):window.SECU.Chat.updateScroll("bottom")},cancelSubmit:function(){return!1},hideError:function(){window.SECU.Error.hide()},chatLogout:function(){window.SECU.Chat.logout({room:this.get("chat.room.connection.room")});g.reinitApp("chat");window.SECU.Chat.enable();this.set("dock.chat",!1);window.SECU.Helpers.dockNavbar(!1);this.fire("modalClose")},showChatLogout:function(){this.set("modal.type",
"chatLogout");this.set("modal.closeText","No");this.set("modal.active",!0)},showChatLink:function(){this.set("modal.type","chatLink");this.set("modal.closeText","Close");this.set("modal.active",!0)},showChatUsers:function(){this.set("modal.type","chatRoster");this.set("modal.closeText","Close");this.set("modal.active",!0)},modalClose:function(){document.activeElement.blur();this.set("modal.active",!1)},toggleView:function(a,e){a&&a.original&&a.original.preventDefault();if(this.get("show."+e))return!1;
window.SECU.Error.hide();var c=this.get("show"),g;for(g in c)this.set("show."+g,!1);this.set("show."+e,!0);"chat"===e?this.get("chat.formActive")||(this.set("dock.chat",!0),window.SECU.Helpers.dockNavbar(!0),setTimeout(function(){window.SECU.Chat.init();(!window.SECU.Chat.scrollPresent()||window.SECU.Chat.scrollPresent()&&window.SECU.Chat.scrolledToBottom())&&d.set("chat.room.unread",!1)},0)):(this.set("dock.chat",!1),window.SECU.Chat.watchFeedScroll(!0),window.SECU.Helpers.dockNavbar(!1))},sendFeedback:function(a){a&&
a.original&&a.original.preventDefault();a=this.get("feedback.form");var c=this;window.SECU.Error.hide();if(!a.body.length)return window.SECU.Error.show(["The message can't be empty"]),!1;c.set("feedback.formDisabled",!0);window.SECU.Ajax.sendFeedback(a).then(function(a){c.set("feedback.sent",!0);c.set("feedback.formDisabled",!1);c.set("feedback.form",{body:"",email:""})},function(a){window.SECU.Error.show([a])})},fixTextareaHeight:window.SECU.Helpers.fixTextareaHeight,attachFile:function(a,d){a&&
a.original&&a.original.preventDefault();var c=null;switch(d){case "room":c={raw:"chat.room.rawFile",ractive:"chat.room.input.file",id:"#chatFile"};break;case "encrypt":c={raw:"encrypt.rawFile",ractive:"encrypt.file.message",id:"#messageFile"}}this.get(c.raw).length?(this.set(c.raw,[]),this.set(c.ractive,""),this.find(c.id).value=""):this.find(c.id).click()},downloadFile:function(a){this.get("supportedFeatures.download")||(a&&a.original&&a.original.preventDefault(),window.open(a.node.href,"_blank").focus())},
checkFile:function(a,d){window.SECU.Error.hide();var c=this,e=null;switch(d){case "room":e={raw:"chat.room.rawFile",ractive:"chat.room.input.file",data:"chat.room.fileData"};break;case "encrypt":e={raw:"encrypt.rawFile",ractive:"encrypt.file.message",data:"encrypt.fileData"}}e||window.SECU.Error.show(["No file domain"]);var g=window.SECU.File.validated(this.get(e.raw));if(g&&!g[0]){var p=window.SECU.File.prettifySize(g.size),n=window.SECU.File.getExtension(g.name);window.SECU.File.fileToBase64(g).then(function(a){c.set(e.ractive,
a);c.set(e.data,{name:g.name,size:p,extension:n})},function(a){window.SECU.Error.show([a])})}else this.set(e.data,{name:"",size:"",extension:""}),g[0]&&(this.set(e.raw,[]),window.SECU.Error.show(["The file is too big"]))},resetApp:function(a,d){a&&a.original&&a.original.preventDefault();g.reinitApp(d)},requestContainer:function(a,d){a&&a.original&&a.original.preventDefault();var c=this,e=null;c.set("decrypt.formDisabled",!0);window.SECU.Ajax.requestContainer(d).then(function(a){a=JSON.parse(a);"string"===
typeof a.data.text?(c.set("decrypt.message",a.data.text),c.set("decrypt.done",!0),a.data.text.length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt")},0)):c.set("decrypt.form.message",JSON.stringify(a.data.text));a.data.files&&a.data.files[0]&&(e=a.data.files[0],c.set("decrypt.files.0.name",e.name),c.set("decrypt.files.0.extension",window.SECU.File.getExtension(e.name)),"string"===typeof e.data?(c.set("decrypt.done",!0),c.set("decrypt.files.0.data",window.SECU.File.base64ToBlob(e.data))):
c.set("decrypt.fileForm.message",JSON.stringify(e.data)));c.set("decrypt.loaded",!0);c.set("decrypt.formActive",!0);c.set("decrypt.formDisabled",!1)},function(a){window.SECU.Error.show([a])})},selectInput:function(a){a.node.select()},copyText:function(a,d){a&&a.original&&a.original.preventDefault();var c=this;window.SECU.Helpers.copyText(document.getElementById(d));this.set("textCopied",!0);setTimeout(function(){c.set("textCopied",!1)},1E3)},sendChat:function(a){a&&a.original&&a.original.preventDefault();
a=this.get("chat.room");var c=a.input.text,d=a.input.file;if(c.trim().length||d.length){var c=c.trim().length?JSON.parse(window.SECU.Crypt.encrypt({message:c,password:a.connection.key})):"",d=d.length?[{data:JSON.parse(window.SECU.Crypt.encrypt({message:d,password:a.connection.key})),name:a.fileData.name}]:[],g=window.SECU.Helpers.generateTimestamp();a={room:a.connection.room,data:{text:c,files:d},sent_at:g};window.SECU.Chat.addSentQueue(a);window.SECU.Chat.sendData(a);this.set("chat.room.input",
{text:"",file:""});this.set("chat.room.rawFile",[]);this.find("#chatFile").value=""}},createChat:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("chat.form.password").length)return window.SECU.Error.show(["You should provide a password"]),!1;this.set("chat.formDisabled",!0);a=this.get("chat.form");a.room.length?window.SECU.Chat.join(a):window.SECU.Chat.create(a)},createContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();
if(!this.get("encrypt.form.message").length&&!this.get("encrypt.rawFile").length)return window.SECU.Error.show(["There should be either message or file"]),!1;this.set("encrypt.formDisabled",!0);var c=this;a=this.get("encrypt.form.password");var d="",g=[],d=a.length?JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.form"))):this.get("encrypt.form.message");this.get("encrypt.rawFile").length&&(a.length?(this.set("encrypt.file.password",a),g.push({data:JSON.parse(window.SECU.Crypt.encrypt(this.get("encrypt.file"))),
name:this.get("encrypt.fileData.name")})):g.push({data:this.get("encrypt.file.message"),name:this.get("encrypt.fileData.name")}));window.SECU.Ajax.sendContainer({data:{text:d,files:g}}).then(function(a){a=JSON.parse(a);c.set("encrypt.link",window.SECU.Ajax._data.url.web.host+window.SECU.Ajax._data.url.web.page+a.hash);c.set("encrypt.formActive",!1);c.set("encrypt.done",!0);c.set("encrypt.formDisabled",!1);setTimeout(function(){document.getElementById("containerLink").select()},0)},function(a){window.SECU.Error.show([a])})},
decryptContainer:function(a){a&&a.original&&a.original.preventDefault();window.SECU.Error.hide();if(!this.get("decrypt.form.password").length)return window.SECU.Error.show(["You must provide a password"]),!1;a=this.get("decrypt.form.password");this.set("decrypt.formDisabled",!0);this.set("decrypt.fileForm.password",a);if(this.get("decrypt.form.message").length)try{this.set("decrypt.message",window.SECU.Crypt.decrypt(this.get("decrypt.form")))}catch(e){this.set("decrypt.success",!1)}if(this.get("decrypt.fileForm.message").length)try{this.set("decrypt.files.0.data",
window.SECU.File.base64ToBlob(window.SECU.Crypt.decrypt(this.get("decrypt.fileForm"))))}catch(e){this.set("decrypt.success",!1)}this.set("decrypt.fileForm",{message:"",password:""});this.set("decrypt.form",{message:"",password:""});this.set("decrypt.done",!0);this.set("decrypt.formDisabled",!1);this.get("decrypt.success")&&this.get("decrypt.message").length&&setTimeout(function(){window.SECU.Helpers.fixTextareaHeight(null,"decrypt");setTimeout(function(){document.getElementById("decryptContainerBody").select()},
0)},0)}});d.observe("windowFocused",function(a,d,g){a&&this.get("show.chat")&&(window.SECU.Chat.scrollPresent()||this.set("chat.room.unread",!1))});window.SECU.Helpers.Autolinker=new Autolinker({twitter:!1});window.SECU.Helpers.checkLocation();window.SECU.Helpers.checkCopy();window.SECU.Helpers.checkDownload();window.SECU.Helpers.checkDragDrop();window.SECU.Helpers.checkNotification();window.SECU.Helpers.watchDragDrop();window.SECU.Helpers.watchScroll();window.SECU.Helpers.watchResize();window.SECU.Helpers.watchWindowFocus();
window.SECU.Helpers.checkVisibility();window.SECU.Ajax.assignHost();window.SECU.Socket.init()}};window.SECU.App.init();
