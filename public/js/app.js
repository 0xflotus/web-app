var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(d){this.toString=function(){return"CORRUPT: "+this.message};this.message=d},invalid:function(d){this.toString=function(){return"INVALID: "+this.message};this.message=d},bug:function(d){this.toString=function(){return"BUG: "+this.message};this.message=d},notReady:function(d){this.toString=function(){return"NOT READY: "+this.message};this.message=d}}};
"undefined"!==typeof module&&module.exports&&(module.exports=sjcl);"function"===typeof define&&define([],function(){return sjcl});
sjcl.cipher.aes=function(d){this.s[0][0][0]||this.O();var f,g,h,l,n=this.s[0][4],m=this.s[1];f=d.length;var p=1;if(4!==f&&6!==f&&8!==f)throw new sjcl.exception.invalid("invalid aes key size");this.b=[h=d.slice(0),l=[]];for(d=f;d<4*f+28;d++){g=h[d-1];if(0===d%f||8===f&&4===d%f)g=n[g>>>24]<<24^n[g>>16&255]<<16^n[g>>8&255]<<8^n[g&255],0===d%f&&(g=g<<8^g>>>24^p<<24,p=p<<1^283*(p>>7));h[d]=h[d-f]^g}for(f=0;d;f++,d--)g=h[f&3?d:d-4],l[f]=4>=d||4>f?g:m[0][n[g>>>24]]^m[1][n[g>>16&255]]^m[2][n[g>>8&255]]^m[3][n[g&
255]]};
sjcl.cipher.aes.prototype={encrypt:function(d){return u(this,d,0)},decrypt:function(d){return u(this,d,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var d=this.s[0],f=this.s[1],g=d[4],h=f[4],l,n,m,p=[],q=[],r,t,x,I;for(l=0;256>l;l++)q[(p[l]=l<<1^283*(l>>7))^l]=l;for(n=m=0;!g[n];n^=r||1,m=q[m]||1)for(x=m^m<<1^m<<2^m<<3^m<<4,x=x>>8^x&255^99,g[n]=x,h[x]=n,t=p[l=p[r=p[n]]],I=16843009*t^65537*l^257*r^16843008*n,t=257*p[x]^16843008*x,l=0;4>l;l++)d[l][n]=t=t<<24^t>>>8,f[l][x]=I=I<<24^I>>>8;for(l=
0;5>l;l++)d[l]=d[l].slice(0),f[l]=f[l].slice(0)}};
function u(d,f,g){if(4!==f.length)throw new sjcl.exception.invalid("invalid aes block size");var h=d.b[g],l=f[0]^h[0],n=f[g?3:1]^h[1],m=f[2]^h[2];f=f[g?1:3]^h[3];var p,q,r,t=h.length/4-2,x,I=4,L=[0,0,0,0];p=d.s[g];d=p[0];var J=p[1],P=p[2],aa=p[3],la=p[4];for(x=0;x<t;x++)p=d[l>>>24]^J[n>>16&255]^P[m>>8&255]^aa[f&255]^h[I],q=d[n>>>24]^J[m>>16&255]^P[f>>8&255]^aa[l&255]^h[I+1],r=d[m>>>24]^J[f>>16&255]^P[l>>8&255]^aa[n&255]^h[I+2],f=d[f>>>24]^J[l>>16&255]^P[n>>8&255]^aa[m&255]^h[I+3],I+=4,l=p,n=q,m=r;
for(x=0;4>x;x++)L[g?3&-x:x]=la[l>>>24]<<24^la[n>>16&255]<<16^la[m>>8&255]<<8^la[f&255]^h[I++],p=l,l=n,n=m,m=f,f=p;return L}
sjcl.bitArray={bitSlice:function(d,f,g){d=sjcl.bitArray.$(d.slice(f/32),32-(f&31)).slice(1);return void 0===g?d:sjcl.bitArray.clamp(d,g-f)},extract:function(d,f,g){var h=Math.floor(-f-g&31);return((f+g-1^f)&-32?d[f/32|0]<<32-h^d[f/32+1|0]>>>h:d[f/32|0]>>>h)&(1<<g)-1},concat:function(d,f){if(0===d.length||0===f.length)return d.concat(f);var g=d[d.length-1],h=sjcl.bitArray.getPartial(g);return 32===h?d.concat(f):sjcl.bitArray.$(f,h,g|0,d.slice(0,d.length-1))},bitLength:function(d){var f=d.length;return 0===
f?0:32*(f-1)+sjcl.bitArray.getPartial(d[f-1])},clamp:function(d,f){if(32*d.length<f)return d;d=d.slice(0,Math.ceil(f/32));var g=d.length;f&=31;0<g&&f&&(d[g-1]=sjcl.bitArray.partial(f,d[g-1]&2147483648>>f-1,1));return d},partial:function(d,f,g){return 32===d?f:(g?f|0:f<<32-d)+1099511627776*d},getPartial:function(d){return Math.round(d/1099511627776)||32},equal:function(d,f){if(sjcl.bitArray.bitLength(d)!==sjcl.bitArray.bitLength(f))return!1;var g=0,h;for(h=0;h<d.length;h++)g|=d[h]^f[h];return 0===
g},$:function(d,f,g,h){var l;for(void 0===h&&(h=[]);32<=f;f-=32)h.push(g),g=0;if(0===f)return h.concat(d);for(l=0;l<d.length;l++)h.push(g|d[l]>>>f),g=d[l]<<32-f;l=d.length?d[d.length-1]:0;d=sjcl.bitArray.getPartial(l);h.push(sjcl.bitArray.partial(f+d&31,32<f+d?g:h.pop(),1));return h},i:function(d,f){return[d[0]^f[0],d[1]^f[1],d[2]^f[2],d[3]^f[3]]},byteswapM:function(d){var f,g;for(f=0;f<d.length;++f)g=d[f],d[f]=g>>>24|g>>>8&65280|(g&65280)<<8|g<<24;return d}};
sjcl.codec.utf8String={fromBits:function(d){var f="",g=sjcl.bitArray.bitLength(d),h,l;for(h=0;h<g/8;h++)0===(h&3)&&(l=d[h/4]),f+=String.fromCharCode(l>>>24),l<<=8;return decodeURIComponent(escape(f))},toBits:function(d){d=unescape(encodeURIComponent(d));var f=[],g,h=0;for(g=0;g<d.length;g++)h=h<<8|d.charCodeAt(g),3===(g&3)&&(f.push(h),h=0);g&3&&f.push(sjcl.bitArray.partial(8*(g&3),h));return f}};
sjcl.codec.hex={fromBits:function(d){var f="",g;for(g=0;g<d.length;g++)f+=((d[g]|0)+0xf00000000000).toString(16).substr(4);return f.substr(0,sjcl.bitArray.bitLength(d)/4)},toBits:function(d){var f,g=[],h;d=d.replace(/\s|0x/g,"");h=d.length;d+="00000000";for(f=0;f<d.length;f+=8)g.push(parseInt(d.substr(f,8),16)^0);return sjcl.bitArray.clamp(g,4*h)}};
sjcl.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(d,f,g){var h=sjcl.codec.base32.BASE,l=sjcl.codec.base32.REMAINING,n="",m=0,p=sjcl.codec.base32.B,q=0,r=sjcl.bitArray.bitLength(d);g&&(p=sjcl.codec.base32.X);for(g=0;n.length*h<r;)n+=p.charAt((q^d[g]>>>m)>>>l),m<h?(q=d[g]<<h-m,m+=l,g++):(q<<=h,m-=h);for(;n.length&7&&!f;)n+="=";return n},toBits:function(d,f){d=d.replace(/\s|=/g,"").toUpperCase();var g=sjcl.codec.base32.BITS,
h=sjcl.codec.base32.BASE,l=sjcl.codec.base32.REMAINING,n=[],m,p=0,q=sjcl.codec.base32.B,r=0,t,x="base32";f&&(q=sjcl.codec.base32.X,x="base32hex");for(m=0;m<d.length;m++){t=q.indexOf(d.charAt(m));if(0>t){if(!f)try{return sjcl.codec.base32hex.toBits(d)}catch(I){}throw new sjcl.exception.invalid("this isn't "+x+"!");}p>l?(p-=l,n.push(r^t>>>p),r=t<<g-p):(p+=h,r^=t<<g-p)}p&56&&n.push(sjcl.bitArray.partial(p&56,r,1));return n}};
sjcl.codec.base32hex={fromBits:function(d,f){return sjcl.codec.base32.fromBits(d,f,1)},toBits:function(d){return sjcl.codec.base32.toBits(d,1)}};
sjcl.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(d,f,g){var h="",l=0,n=sjcl.codec.base64.B,m=0,p=sjcl.bitArray.bitLength(d);g&&(n=n.substr(0,62)+"-_");for(g=0;6*h.length<p;)h+=n.charAt((m^d[g]>>>l)>>>26),6>l?(m=d[g]<<6-l,l+=26,g++):(m<<=6,l-=6);for(;h.length&3&&!f;)h+="=";return h},toBits:function(d,f){d=d.replace(/\s|=/g,"");var g=[],h,l=0,n=sjcl.codec.base64.B,m=0,p;f&&(n=n.substr(0,62)+"-_");for(h=0;h<d.length;h++){p=n.indexOf(d.charAt(h));
if(0>p)throw new sjcl.exception.invalid("this isn't base64!");26<l?(l-=26,g.push(m^p>>>l),m=p<<32-l):(l+=6,m^=p<<32-l)}l&56&&g.push(sjcl.bitArray.partial(l&56,m,1));return g}};sjcl.codec.base64url={fromBits:function(d){return sjcl.codec.base64.fromBits(d,1,1)},toBits:function(d){return sjcl.codec.base64.toBits(d,1)}};sjcl.hash.sha256=function(d){this.b[0]||this.O();d?(this.F=d.F.slice(0),this.A=d.A.slice(0),this.l=d.l):this.reset()};sjcl.hash.sha256.hash=function(d){return(new sjcl.hash.sha256).update(d).finalize()};
sjcl.hash.sha256.prototype={blockSize:512,reset:function(){this.F=this.Y.slice(0);this.A=[];this.l=0;return this},update:function(d){"string"===typeof d&&(d=sjcl.codec.utf8String.toBits(d));var f,g=this.A=sjcl.bitArray.concat(this.A,d);f=this.l;d=this.l=f+sjcl.bitArray.bitLength(d);for(f=512+f&-512;f<=d;f+=512)v(this,g.splice(0,16));return this},finalize:function(){var d,f=this.A,g=this.F,f=sjcl.bitArray.concat(f,[sjcl.bitArray.partial(1,1)]);for(d=f.length+2;d&15;d++)f.push(0);f.push(Math.floor(this.l/
4294967296));for(f.push(this.l|0);f.length;)v(this,f.splice(0,16));this.reset();return g},Y:[],b:[],O:function(){function d(d){return 4294967296*(d-Math.floor(d))|0}var f=0,g=2,h;a:for(;64>f;g++){for(h=2;h*h<=g;h++)if(0===g%h)continue a;8>f&&(this.Y[f]=d(Math.pow(g,.5)));this.b[f]=d(Math.pow(g,1/3));f++}}};
function v(d,f){var g,h,l,n=f.slice(0),m=d.F,p=d.b,q=m[0],r=m[1],t=m[2],x=m[3],I=m[4],L=m[5],J=m[6],P=m[7];for(g=0;64>g;g++)16>g?h=n[g]:(h=n[g+1&15],l=n[g+14&15],h=n[g&15]=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+n[g&15]+n[g+9&15]|0),h=h+P+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(J^I&(L^J))+p[g],P=J,J=L,L=I,I=x+h|0,x=t,t=r,r=q,q=h+(r&t^x&(r^t))+(r>>>2^r>>>13^r>>>22^r<<30^r<<19^r<<10)|0;m[0]=m[0]+q|0;m[1]=m[1]+r|0;m[2]=m[2]+t|0;m[3]=m[3]+x|0;m[4]=m[4]+I|0;m[5]=m[5]+L|0;m[6]=
m[6]+J|0;m[7]=m[7]+P|0}
sjcl.mode.ccm={name:"ccm",G:[],listenProgress:function(d){sjcl.mode.ccm.G.push(d)},unListenProgress:function(d){d=sjcl.mode.ccm.G.indexOf(d);-1<d&&sjcl.mode.ccm.G.splice(d,1)},fa:function(d){var f=sjcl.mode.ccm.G.slice(),g;for(g=0;g<f.length;g+=1)f[g](d)},encrypt:function(d,f,g,h,l){var n,m=f.slice(0),p=sjcl.bitArray,q=p.bitLength(g)/8,r=p.bitLength(m)/8;l=l||64;h=h||[];if(7>q)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(n=2;4>n&&r>>>8*n;n++);n<15-q&&(n=15-q);g=p.clamp(g,
8*(15-n));f=sjcl.mode.ccm.V(d,f,g,h,l,n);m=sjcl.mode.ccm.C(d,m,g,f,l,n);return p.concat(m.data,m.tag)},decrypt:function(d,f,g,h,l){l=l||64;h=h||[];var n=sjcl.bitArray,m=n.bitLength(g)/8,p=n.bitLength(f),q=n.clamp(f,p-l),r=n.bitSlice(f,p-l),p=(p-l)/8;if(7>m)throw new sjcl.exception.invalid("ccm: iv must be at least 7 bytes");for(f=2;4>f&&p>>>8*f;f++);f<15-m&&(f=15-m);g=n.clamp(g,8*(15-f));q=sjcl.mode.ccm.C(d,q,g,r,l,f);d=sjcl.mode.ccm.V(d,q.data,g,h,l,f);if(!n.equal(q.tag,d))throw new sjcl.exception.corrupt("ccm: tag doesn't match");
return q.data},na:function(d,f,g,h,l,n){var m=[],p=sjcl.bitArray,q=p.i;h=[p.partial(8,(f.length?64:0)|h-2<<2|n-1)];h=p.concat(h,g);h[3]|=l;h=d.encrypt(h);if(f.length)for(g=p.bitLength(f)/8,65279>=g?m=[p.partial(16,g)]:4294967295>=g&&(m=p.concat([p.partial(16,65534)],[g])),m=p.concat(m,f),f=0;f<m.length;f+=4)h=d.encrypt(q(h,m.slice(f,f+4).concat([0,0,0])));return h},V:function(d,f,g,h,l,n){var m=sjcl.bitArray,p=m.i;l/=8;if(l%2||4>l||16<l)throw new sjcl.exception.invalid("ccm: invalid tag length");
if(4294967295<h.length||4294967295<f.length)throw new sjcl.exception.bug("ccm: can't deal with 4GiB or more data");g=sjcl.mode.ccm.na(d,h,g,l,m.bitLength(f)/8,n);for(h=0;h<f.length;h+=4)g=d.encrypt(p(g,f.slice(h,h+4).concat([0,0,0])));return m.clamp(g,8*l)},C:function(d,f,g,h,l,n){var m,p=sjcl.bitArray;m=p.i;var q=f.length,r=p.bitLength(f),t=q/50,x=t;g=p.concat([p.partial(8,n-1)],g).concat([0,0,0]).slice(0,4);h=p.bitSlice(m(h,d.encrypt(g)),0,l);if(!q)return{tag:h,data:[]};for(m=0;m<q;m+=4)m>t&&(sjcl.mode.ccm.fa(m/
q),t+=x),g[3]++,l=d.encrypt(g),f[m]^=l[0],f[m+1]^=l[1],f[m+2]^=l[2],f[m+3]^=l[3];return{tag:h,data:p.clamp(f,r)}}};
sjcl.mode.ocb2={name:"ocb2",encrypt:function(d,f,g,h,l,n){if(128!==sjcl.bitArray.bitLength(g))throw new sjcl.exception.invalid("ocb iv must be 128 bits");var m,p=sjcl.mode.ocb2.S,q=sjcl.bitArray,r=q.i,t=[0,0,0,0];g=p(d.encrypt(g));var x,I=[];h=h||[];l=l||64;for(m=0;m+4<f.length;m+=4)x=f.slice(m,m+4),t=r(t,x),I=I.concat(r(g,d.encrypt(r(g,x)))),g=p(g);x=f.slice(m);f=q.bitLength(x);m=d.encrypt(r(g,[0,0,0,f]));x=q.clamp(r(x.concat([0,0,0]),m),f);t=r(t,r(x.concat([0,0,0]),m));t=d.encrypt(r(t,r(g,p(g))));
h.length&&(t=r(t,n?h:sjcl.mode.ocb2.pmac(d,h)));return I.concat(q.concat(x,q.clamp(t,l)))},decrypt:function(d,f,g,h,l,n){if(128!==sjcl.bitArray.bitLength(g))throw new sjcl.exception.invalid("ocb iv must be 128 bits");l=l||64;var m=sjcl.mode.ocb2.S,p=sjcl.bitArray,q=p.i,r=[0,0,0,0],t=m(d.encrypt(g)),x,I,L=sjcl.bitArray.bitLength(f)-l,J=[];h=h||[];for(g=0;g+4<L/32;g+=4)x=q(t,d.decrypt(q(t,f.slice(g,g+4)))),r=q(r,x),J=J.concat(x),t=m(t);I=L-32*g;x=d.encrypt(q(t,[0,0,0,I]));x=q(x,p.clamp(f.slice(g),I).concat([0,
0,0]));r=q(r,x);r=d.encrypt(q(r,q(t,m(t))));h.length&&(r=q(r,n?h:sjcl.mode.ocb2.pmac(d,h)));if(!p.equal(p.clamp(r,l),p.bitSlice(f,L)))throw new sjcl.exception.corrupt("ocb: tag doesn't match");return J.concat(p.clamp(x,I))},pmac:function(d,f){var g,h=sjcl.mode.ocb2.S,l=sjcl.bitArray,n=l.i,m=[0,0,0,0],p=d.encrypt([0,0,0,0]),p=n(p,h(h(p)));for(g=0;g+4<f.length;g+=4)p=h(p),m=n(m,d.encrypt(n(p,f.slice(g,g+4))));g=f.slice(g);128>l.bitLength(g)&&(p=n(p,h(p)),g=l.concat(g,[-2147483648,0,0,0]));m=n(m,g);
return d.encrypt(n(h(n(p,h(p))),m))},S:function(d){return[d[0]<<1^d[1]>>>31,d[1]<<1^d[2]>>>31,d[2]<<1^d[3]>>>31,d[3]<<1^135*(d[0]>>>31)]}};
sjcl.mode.gcm={name:"gcm",encrypt:function(d,f,g,h,l){var n=f.slice(0);f=sjcl.bitArray;h=h||[];d=sjcl.mode.gcm.C(!0,d,n,h,g,l||128);return f.concat(d.data,d.tag)},decrypt:function(d,f,g,h,l){var n=f.slice(0),m=sjcl.bitArray,p=m.bitLength(n);l=l||128;h=h||[];l<=p?(f=m.bitSlice(n,p-l),n=m.bitSlice(n,0,p-l)):(f=n,n=[]);d=sjcl.mode.gcm.C(!1,d,n,h,g,l);if(!m.equal(d.tag,f))throw new sjcl.exception.corrupt("gcm: tag doesn't match");return d.data},ka:function(d,f){var g,h,l,n,m,p=sjcl.bitArray.i;l=[0,0,
0,0];n=f.slice(0);for(g=0;128>g;g++){0!==(d[Math.floor(g/32)]&1<<31-g%32)&&(l=p(l,n));m=0!==(n[3]&1);for(h=3;0<h;h--)n[h]=n[h]>>>1|(n[h-1]&1)<<31;n[0]>>>=1;m&&(n[0]^=-520093696)}return l},j:function(d,f,g){var h,l=g.length;f=f.slice(0);for(h=0;h<l;h+=4)f[0]^=4294967295&g[h],f[1]^=4294967295&g[h+1],f[2]^=4294967295&g[h+2],f[3]^=4294967295&g[h+3],f=sjcl.mode.gcm.ka(f,d);return f},C:function(d,f,g,h,l,n){var m,p,q,r,t,x,I,L,J=sjcl.bitArray;x=g.length;I=J.bitLength(g);L=J.bitLength(h);p=J.bitLength(l);
m=f.encrypt([0,0,0,0]);96===p?(l=l.slice(0),l=J.concat(l,[1])):(l=sjcl.mode.gcm.j(m,[0,0,0,0],l),l=sjcl.mode.gcm.j(m,l,[0,0,Math.floor(p/4294967296),p&4294967295]));p=sjcl.mode.gcm.j(m,[0,0,0,0],h);t=l.slice(0);h=p.slice(0);d||(h=sjcl.mode.gcm.j(m,p,g));for(r=0;r<x;r+=4)t[3]++,q=f.encrypt(t),g[r]^=q[0],g[r+1]^=q[1],g[r+2]^=q[2],g[r+3]^=q[3];g=J.clamp(g,I);d&&(h=sjcl.mode.gcm.j(m,p,g));d=[Math.floor(L/4294967296),L&4294967295,Math.floor(I/4294967296),I&4294967295];h=sjcl.mode.gcm.j(m,h,d);q=f.encrypt(l);
h[0]^=q[0];h[1]^=q[1];h[2]^=q[2];h[3]^=q[3];return{tag:J.bitSlice(h,0,n),data:g}}};sjcl.misc.hmac=function(d,f){this.W=f=f||sjcl.hash.sha256;var g=[[],[]],h,l=f.prototype.blockSize/32;this.w=[new f,new f];d.length>l&&(d=f.hash(d));for(h=0;h<l;h++)g[0][h]=d[h]^909522486,g[1][h]=d[h]^1549556828;this.w[0].update(g[0]);this.w[1].update(g[1]);this.R=new f(this.w[0])};
sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(d){if(this.aa)throw new sjcl.exception.invalid("encrypt on already updated hmac called!");this.update(d);return this.digest(d)};sjcl.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]);this.aa=!1};sjcl.misc.hmac.prototype.update=function(d){this.aa=!0;this.R.update(d)};sjcl.misc.hmac.prototype.digest=function(){var d=this.R.finalize(),d=(new this.W(this.w[1])).update(d).finalize();this.reset();return d};
sjcl.misc.pbkdf2=function(d,f,g,h,l){g=g||1E3;if(0>h||0>g)throw sjcl.exception.invalid("invalid params to pbkdf2");"string"===typeof d&&(d=sjcl.codec.utf8String.toBits(d));"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));l=l||sjcl.misc.hmac;d=new l(d);var n,m,p,q,r=[],t=sjcl.bitArray;for(q=1;32*r.length<(h||1);q++){l=n=d.encrypt(t.concat(f,[q]));for(m=1;m<g;m++)for(n=d.encrypt(n),p=0;p<n.length;p++)l[p]^=n[p];r=r.concat(l)}h&&(r=t.clamp(r,h));return r};
sjcl.prng=function(d){this.c=[new sjcl.hash.sha256];this.m=[0];this.P=0;this.H={};this.N=0;this.U={};this.Z=this.f=this.o=this.ha=0;this.b=[0,0,0,0,0,0,0,0];this.h=[0,0,0,0];this.L=void 0;this.M=d;this.D=!1;this.K={progress:{},seeded:{}};this.u=this.ga=0;this.I=1;this.J=2;this.ca=65536;this.T=[0,48,64,96,128,192,256,384,512,768,1024];this.da=3E4;this.ba=80};
sjcl.prng.prototype={randomWords:function(d,f){var g=[],h;h=this.isReady(f);var l;if(h===this.u)throw new sjcl.exception.notReady("generator isn't seeded");if(h&this.J){h=!(h&this.I);l=[];var n=0,m;this.Z=l[0]=(new Date).valueOf()+this.da;for(m=0;16>m;m++)l.push(4294967296*Math.random()|0);for(m=0;m<this.c.length&&(l=l.concat(this.c[m].finalize()),n+=this.m[m],this.m[m]=0,h||!(this.P&1<<m));m++);this.P>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.m.push(0));this.f-=n;n>this.o&&(this.o=
n);this.P++;this.b=sjcl.hash.sha256.hash(this.b.concat(l));this.L=new sjcl.cipher.aes(this.b);for(h=0;4>h&&(this.h[h]=this.h[h]+1|0,!this.h[h]);h++);}for(h=0;h<d;h+=4)0===(h+1)%this.ca&&y(this),l=z(this),g.push(l[0],l[1],l[2],l[3]);y(this);return g.slice(0,d)},setDefaultParanoia:function(d,f){if(0===d&&"Setting paranoia=0 will ruin your security; use it only for testing"!==f)throw"Setting paranoia=0 will ruin your security; use it only for testing";this.M=d},addEntropy:function(d,f,g){g=g||"user";
var h,l,n=(new Date).valueOf(),m=this.H[g],p=this.isReady(),q=0;h=this.U[g];void 0===h&&(h=this.U[g]=this.ha++);void 0===m&&(m=this.H[g]=0);this.H[g]=(this.H[g]+1)%this.c.length;switch(typeof d){case "number":void 0===f&&(f=1);this.c[m].update([h,this.N++,1,f,n,1,d|0]);break;case "object":g=Object.prototype.toString.call(d);if("[object Uint32Array]"===g){l=[];for(g=0;g<d.length;g++)l.push(d[g]);d=l}else for("[object Array]"!==g&&(q=1),g=0;g<d.length&&!q;g++)"number"!==typeof d[g]&&(q=1);if(!q){if(void 0===
f)for(g=f=0;g<d.length;g++)for(l=d[g];0<l;)f++,l>>>=1;this.c[m].update([h,this.N++,2,f,n,d.length].concat(d))}break;case "string":void 0===f&&(f=d.length);this.c[m].update([h,this.N++,3,f,n,d.length]);this.c[m].update(d);break;default:q=1}if(q)throw new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[m]+=f;this.f+=f;p===this.u&&(this.isReady()!==this.u&&A("seeded",Math.max(this.o,this.f)),A("progress",this.getProgress()))},isReady:function(d){d=this.T[void 0!==
d?d:this.M];return this.o&&this.o>=d?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=d?this.J|this.u:this.u},getProgress:function(d){d=this.T[d?d:this.M];return this.o>=d?1:this.f>d?1:this.f/d},startCollectors:function(){if(!this.D){this.a={loadTimeCollector:B(this,this.ma),mouseCollector:B(this,this.oa),keyboardCollector:B(this,this.la),accelerometerCollector:B(this,this.ea),touchCollector:B(this,this.qa)};if(window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,
!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new sjcl.exception.bug("can't attach event");
this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",
this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(d,f){this.K[d][this.ga++]=f},removeEventListener:function(d,f){var g,h,l=this.K[d],n=[];for(h in l)l.hasOwnProperty(h)&&l[h]===f&&n.push(h);for(g=0;g<n.length;g++)h=n[g],delete l[h]},la:function(){C(1)},oa:function(d){var f,g;try{f=d.x||d.clientX||d.offsetX||0,g=d.y||d.clientY||d.offsetY||0}catch(h){g=f=0}0!=f&&0!=g&&sjcl.random.addEntropy([f,g],2,"mouse");C(0)},qa:function(d){d=
d.touches[0]||d.changedTouches[0];sjcl.random.addEntropy([d.pageX||d.clientX,d.pageY||d.clientY],1,"touch");C(0)},ma:function(){C(2)},ea:function(d){d=d.accelerationIncludingGravity.x||d.accelerationIncludingGravity.y||d.accelerationIncludingGravity.z;if(window.orientation){var f=window.orientation;"number"===typeof f&&sjcl.random.addEntropy(f,1,"accelerometer")}d&&sjcl.random.addEntropy(d,2,"accelerometer");C(0)}};
function A(d,f){var g,h=sjcl.random.K[d],l=[];for(g in h)h.hasOwnProperty(g)&&l.push(h[g]);for(g=0;g<l.length;g++)l[g](f)}function C(d){"undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),d,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),d,"loadtime")}function y(d){d.b=z(d).concat(z(d));d.L=new sjcl.cipher.aes(d.b)}
function z(d){for(var f=0;4>f&&(d.h[f]=d.h[f]+1|0,!d.h[f]);f++);return d.L.encrypt(d.h)}function B(d,f){return function(){f.apply(d,arguments)}}sjcl.random=new sjcl.prng(6);
a:try{var D,E,F,G;if(G="undefined"!==typeof module&&module.exports){var H;try{H=require("crypto")}catch(d){H=null}G=E=H}if(G&&E.randomBytes)D=E.randomBytes(128),D=new Uint32Array((new Uint8Array(D)).buffer),sjcl.random.addEntropy(D,1024,"crypto['randomBytes']");else if("undefined"!==typeof window&&"undefined"!==typeof Uint32Array){F=new Uint32Array(32);if(window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(F);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(F);
else break a;sjcl.random.addEntropy(F,1024,"crypto['getRandomValues']")}}catch(d){"undefined"!==typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(d))}
sjcl.json={defaults:{v:1,iter:1E3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(d,f,g,h){g=g||{};h=h||{};var l=sjcl.json,n=l.g({iv:sjcl.random.randomWords(4,0)},l.defaults),m;l.g(n,g);g=n.adata;"string"===typeof n.salt&&(n.salt=sjcl.codec.base64.toBits(n.salt));"string"===typeof n.iv&&(n.iv=sjcl.codec.base64.toBits(n.iv));if(!sjcl.mode[n.mode]||!sjcl.cipher[n.cipher]||"string"===typeof d&&100>=n.iter||64!==n.ts&&96!==n.ts&&128!==n.ts||128!==n.ks&&192!==n.ks&&256!==n.ks||2>n.iv.length||
4<n.iv.length)throw new sjcl.exception.invalid("json encrypt: invalid parameters");"string"===typeof d?(m=sjcl.misc.cachedPbkdf2(d,n),d=m.key.slice(0,n.ks/32),n.salt=m.salt):sjcl.ecc&&d instanceof sjcl.ecc.elGamal.publicKey&&(m=d.kem(),n.kemtag=m.tag,d=m.key.slice(0,n.ks/32));"string"===typeof f&&(f=sjcl.codec.utf8String.toBits(f));"string"===typeof g&&(n.adata=g=sjcl.codec.utf8String.toBits(g));m=new sjcl.cipher[n.cipher](d);l.g(h,n);h.key=d;n.ct="ccm"===n.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&
f instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(m,f,n.iv,g,n.ts):sjcl.mode[n.mode].encrypt(m,f,n.iv,g,n.ts);return n},encrypt:function(d,f,g,h){var l=sjcl.json,n=l.ja.apply(l,arguments);return l.encode(n)},ia:function(d,f,g,h){g=g||{};h=h||{};var l=sjcl.json;f=l.g(l.g(l.g({},l.defaults),f),g,!0);var n,m;n=f.adata;"string"===typeof f.salt&&(f.salt=sjcl.codec.base64.toBits(f.salt));"string"===typeof f.iv&&(f.iv=sjcl.codec.base64.toBits(f.iv));if(!sjcl.mode[f.mode]||!sjcl.cipher[f.cipher]||"string"===
typeof d&&100>=f.iter||64!==f.ts&&96!==f.ts&&128!==f.ts||128!==f.ks&&192!==f.ks&&256!==f.ks||!f.iv||2>f.iv.length||4<f.iv.length)throw new sjcl.exception.invalid("json decrypt: invalid parameters");"string"===typeof d?(m=sjcl.misc.cachedPbkdf2(d,f),d=m.key.slice(0,f.ks/32),f.salt=m.salt):sjcl.ecc&&d instanceof sjcl.ecc.elGamal.secretKey&&(d=d.unkem(sjcl.codec.base64.toBits(f.kemtag)).slice(0,f.ks/32));"string"===typeof n&&(n=sjcl.codec.utf8String.toBits(n));m=new sjcl.cipher[f.cipher](d);n="ccm"===
f.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&f.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(m,f.ct,f.iv,f.tag,n,f.ts):sjcl.mode[f.mode].decrypt(m,f.ct,f.iv,n,f.ts);l.g(h,f);h.key=d;return 1===g.raw?n:sjcl.codec.utf8String.fromBits(n)},decrypt:function(d,f,g,h){var l=sjcl.json;return l.ia(d,l.decode(f),g,h)},encode:function(d){var f,g="{",h="";for(f in d)if(d.hasOwnProperty(f)){if(!f.match(/^[a-z0-9]+$/i))throw new sjcl.exception.invalid("json encode: invalid property name");g+=h+'"'+
f+'":';h=",";switch(typeof d[f]){case "number":case "boolean":g+=d[f];break;case "string":g+='"'+escape(d[f])+'"';break;case "object":g+='"'+sjcl.codec.base64.fromBits(d[f],0)+'"';break;default:throw new sjcl.exception.bug("json encode: unsupported type");}}return g+"}"},decode:function(d){d=d.replace(/\s/g,"");if(!d.match(/^\{.*\}$/))throw new sjcl.exception.invalid("json decode: this isn't json!");d=d.replace(/^\{|\}$/g,"").split(/,/);var f={},g,h;for(g=0;g<d.length;g++){if(!(h=d[g].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new sjcl.exception.invalid("json decode: this isn't json!");
null!=h[3]?f[h[2]]=parseInt(h[3],10):null!=h[4]?f[h[2]]=h[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(h[4]):unescape(h[4]):null!=h[5]&&(f[h[2]]="true"===h[5])}return f},g:function(d,f,g){void 0===d&&(d={});if(void 0===f)return d;for(var h in f)if(f.hasOwnProperty(h)){if(g&&void 0!==d[h]&&d[h]!==f[h])throw new sjcl.exception.invalid("required parameter overridden");d[h]=f[h]}return d},sa:function(d,f){var g={},h;for(h in d)d.hasOwnProperty(h)&&d[h]!==f[h]&&(g[h]=d[h]);return g},ra:function(d,
f){var g={},h;for(h=0;h<f.length;h++)void 0!==d[f[h]]&&(g[f[h]]=d[f[h]]);return g}};sjcl.encrypt=sjcl.json.encrypt;sjcl.decrypt=sjcl.json.decrypt;sjcl.misc.pa={};sjcl.misc.cachedPbkdf2=function(d,f){var g=sjcl.misc.pa,h;f=f||{};h=f.iter||1E3;g=g[d]=g[d]||{};h=g[h]=g[h]||{firstSalt:f.salt&&f.salt.length?f.salt.slice(0):sjcl.random.randomWords(2,0)};g=void 0===f.salt?h.firstSalt:f.salt;h[g]=h[g]||sjcl.misc.pbkdf2(d,g,f.iter);return{key:h[g].slice(0),salt:g.slice(0)}};(function(d,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):d.Ractive=f()})(this,function(){function d(a){var b;if(a&&"boolean"!==typeof a)return"undefined"!==typeof window&&document&&a?a.nodeType?a:"string"===typeof a&&(b=document.getElementById(a),!b&&document.querySelector&&(b=document.querySelector(a)),b&&b.nodeType)?b:a[0]&&a[0].nodeType?a[0]:null:null}function f(a){a&&"unknown"!==typeof a.parentNode&&a.parentNode&&
a.parentNode.removeChild(a);return a}function g(a){return null!=a&&a.toString?a:""}function h(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];for(var k;b=c.shift();)for(k in b)ra.call(b,k)&&(a[k]=b[k]);return a}function l(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];c.forEach(function(b){for(var c in b)!b.hasOwnProperty(c)||c in a||(a[c]=b[c])});return a}function n(a){return"[object Array]"===Ma.call(a)}function m(a,b){return null===
a&&null===b?!0:"object"===typeof a||"object"===typeof b?!1:a===b}function p(a){return!isNaN(parseFloat(a))&&isFinite(a)}function q(a){return a&&"[object Object]"===Ma.call(a)}function r(a,b){return a.replace(/%s/g,function(){return b.shift()})}function t(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];a=r(a,c);throw Error(a);}function x(){ma.DEBUG&&wb.apply(null,arguments)}function I(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];
a=r(a,c);bb(a,c)}function L(a){for(var b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-1]=arguments[e];a=r(a,c);Wc[a]||(Wc[a]=!0,bb(a,c))}function J(){ma.DEBUG&&I.apply(null,arguments)}function P(){ma.DEBUG&&L.apply(null,arguments)}function aa(a,b,c){return(b=la(a,b,c))?b[a][c]:null}function la(a,b,c){for(;b;){if(c in b[a])return b;if(b.isolated)return null;b=b.parent}}function xb(a){return function(){return a}}function qg(a){var b="",c,e,k,d,f,g,h;if(!cb[a]){for(e=[];b.length<a;)b+=1;b=parseInt(b,
2);k=function(a){return"1"===a};for(d=0;d<=b;d+=1){for(c=d.toString(2);c.length<a;)c="0"+c;h=[];g=c.length;for(f=0;f<g;f++)h.push(k(c[f]));e[d]=h}cb[a]=e}return cb[a]}function Xc(a,b,c,e){var k=a[b];if(!k||!k.equalsOrStartsWith(e)&&k.equalsOrStartsWith(c))return a[b]=k?k.replace(c,e):e,!0}function K(a){if(null==a)return a;yb.hasOwnProperty(a)||(yb[a]=new Yc(a));return yb[a]}function db(a,b){function c(b,c){var e,k;e=c.isRoot?[].concat(Object.keys(a.viewmodel.data),Object.keys(a.viewmodel.mappings),
Object.keys(a.viewmodel.computations)):(k=(e=a.viewmodel.wrapped[c.str])?e.get():a.viewmodel.get(c))?Object.keys(k):null;e&&e.forEach(function(a){"_ractive"===a&&n(k)||b.push(c.join(a))});return b}var e,k,d;e=b.str.split(".");for(d=[sa];k=e.shift();)"*"===k?d=d.reduce(c,[]):d[0]===sa?d[0]=K(k):d=d.map(rg(k));return d}function rg(a){return function(b){return b.join(a)}}function ba(a){return a?a.replace(sg,".$1"):""}function Zc(a){this.event=a;this.method="on"+a;this.deprecate=tg[a]}function $c(a,b){for(var c=
0,e=a.length;c<e;c++)if(a[c]==b)return!0;return!1}function zb(a,b){var c;if(!n(a)||!n(b)||a.length!==b.length)return!1;for(c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function ad(a){return"string"===typeof a?[a]:void 0===a?[]:a}function na(a){return a[a.length-1]}function T(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function Ab(a){for(var b=[],c=a.length;c--;)b[c]=a[c];return b}function ug(a,b){return function(){for(var c;c=a.shift();)c(b)}}function bd(a,b,c,e){var k;if(b===a)throw new TypeError("A promise's fulfillment handler cannot return the same promise");
if(b instanceof Y)b.then(c,e);else if(!b||"object"!==typeof b&&"function"!==typeof b)c(b);else{try{k=b.then}catch(d){e(d);return}if("function"===typeof k){var wa,f,g;f=function(b){wa||(wa=!0,bd(a,b,c,e))};g=function(a){wa||(wa=!0,e(a))};try{k.call(b,f,g)}catch(d){wa||(e(d),wa=!0)}}else c(b)}}function vg(a,b){var c;void 0!=a&&"string"!==typeof a&&(a=a.str);if("."===b)return K(a);c=a?a.split("."):[];if("../"===b.substr(0,3)){for(;"../"===b.substr(0,3);){if(!c.length)throw Error('Could not resolve reference - too many "../" prefixes');
c.pop();b=b.substring(3)}c.push(b);return K(c.join("."))}return a?K(a+b.replace(/^\.\//,".")):K(b.replace(/^\.\/?/,""))}function Bb(a,b,c,e){var k,d,f,g;if(b.isRoot)return b;for(d=b.firstKey;c;)if(k=c.context,c=c.parent,k&&(g=!0,(f=a.viewmodel.get(k))&&("object"===typeof f||"function"===typeof f)&&d in f))return k.join(b.str);if(cd(a.viewmodel,d))return b;if(a.parent&&!a.isolated&&(g=!0,c=a.component.parentFragment,d=K(d),c=Bb(a.parent,d,c,!0)))return a.viewmodel.map(d,{origin:a.parent.viewmodel,
keypath:c}),b;if(!e&&!g)return a.viewmodel.set(b,void 0),b}function dd(a,b){var c;!a.parent||a.isolated||cd(a.viewmodel,b)||(b=K(b),(c=Bb(a.parent,b,a.component.parentFragment,!0))&&a.viewmodel.map(b,{origin:a.parent.viewmodel,keypath:c}))}function cd(a,b){return""===b||b in a.data||b in a.computations||b in a.mappings}function ed(a){a.teardown()}function ca(a){a.unbind()}function wg(a){a.unrender()}function fd(a){a.cancel()}function xg(a){a.detach()}function yg(a){a.detachNodes()}function eb(a){!a.ready||
a.outros.length||a.outroChildren||(a.outrosComplete||(a.parent?a.parent.decrementOutros(a):a.detachNodes(),a.outrosComplete=!0),a.intros.length||a.totalChildren||("function"===typeof a.callback&&a.callback(),a.parent&&a.parent.decrementTotal()))}function gd(){for(var a,b,c;M.ractives.length;)b=M.ractives.pop(),(c=b.viewmodel.applyChanges())&&zg.fire(b,c);var e;for(b=xa.length;b--;)if(c=xa[b],c.keypath)xa.splice(b,1);else if(e=fb(c.root,c.ref,c.parentFragment))(a||(a=[])).push({item:c,keypath:e}),
xa.splice(b,1);a&&a.forEach(Ag);for(a=0;a<M.views.length;a+=1)M.views[a].update();for(a=M.views.length=0;a<M.tasks.length;a+=1)M.tasks[a]();M.tasks.length=0;if(M.ractives.length)return gd()}function Ag(a){a.item.resolve(a.keypath)}function Cb(a,b,c,e){var k,d;b&&(b=K(ba(b)));null!==b&&(d=a.viewmodel.get(b));Db.abort(b,a);if(m(d,c))return e.complete&&e.complete(e.to),Bg;e.easing&&(k="function"===typeof e.easing?e.easing:a.easing[e.easing],"function"!==typeof k&&(k=null));b=new Cg({keypath:b,from:d,
to:c,root:a,duration:void 0===e.duration?400:e.duration,easing:k,interpolator:e.interpolator,step:e.step,complete:e.complete});Db.add(b);a._animations.push(b);return b}function hd(a){var b;if((b=a.parentFragment)||a.component&&(b=a.component.parentFragment))return b.owner}function id(a){var b;b=[a];for(a=hd(a);a;)b.push(a),a=hd(a);return b}function jd(a,b,c,e,k){k=void 0===k?!1:k;var d,f,g=!0;gb.enqueue(a,c);for(f=b.length;0<=f;f--)if(d=a._subs[b[f]]){var h=a,l=c,m=e,n=null,p=!1;l&&!l._noArg&&(m=
[l].concat(m));d=d.slice();for(var q=0,r=d.length;q<r;q+=1)!1===d[q].apply(h,m)&&(p=!0);l&&!l._noArg&&p&&(n=l.original)&&(n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation());g=!p&&g}gb.dequeue(a);a.parent&&g&&(k&&a.component&&(b=K(a.component.name+"."+b[b.length-1]).wildcardMatches(),c&&(c.component=a)),jd(a.parent,b,c,e))}function kd(a){Dg.fire(a);a.findAllComponents("*").forEach(function(a){kd(a.instance)})}function Eg(a,b,c){switch(b){case "splice":for(void 0!==c[0]&&0>
c[0]&&(c[0]=a.length+Math.max(c[0],-a.length));2>c.length;)c.push(0);c[1]=Math.min(c[1],a.length-c[0]);return c;case "sort":case "reverse":return null;case "pop":return a.length?[a.length-1,1]:[0,0];case "push":return[a.length,0].concat(c);case "shift":return[0,a.length?1:0];case "unshift":return[0,0].concat(c)}}function Fg(a){return a.trim?a.trim():a.replace(/^\s+/,"").replace(/\s+$/,"")}function Gg(a){return a.str}function ld(a,b){b&&b.constructor!==Object&&"function"!==typeof b&&("object"!==typeof b?
t("data option must be an object or a function, `"+b+"` is not valid"):J("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged"));var c="function"===typeof a,e="function"===typeof b;b||c||(b={});return c||e?function(){var k=e?md(b,this):b,d=c?md(a,this):a;return nd(k,d)}:nd(b,a)}function md(a,b){var c=a.call(b);if(c)return"object"!==typeof c&&t("Data function must return an object"),c.constructor!==Object&&P("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),
c}function nd(a,b){if(a&&b){for(var c in b)c in a||(a[c]=b[c]);return a}return a||b}function Hg(a,b){var c,e,k;c=a.pos;if(a.matchString("\\"+b.open)){if(0===c||"\\"!==a.str[c-1])return b.open}else if(!a.matchString(b.open))return null;if(e=Ig(a)){if(!a.matchString(b.close))return null;b.open=e[0];b.close=e[1];a.sortMustacheTags();return Jg}a.allowWhitespace();a.matchString("/")&&(--a.pos,k=a.pos,od(a)?a.pos=k:(a.pos=k-b.close.length,a.error("Attempted to close a section that wasn't open")));for(k=
0;k<b.readers.length;k+=1)if(e=b.readers[k],e=e(a,b))return b.isStatic&&(e.s=!0),a.includeLinePositions&&(e.p=a.getLinePos(c)),e;a.pos=c;return null}function pd(a){var b,c,e;b=a.pos;c=Kg(a);if(null===c)return null;c=[c];return a.matchString(",")?(e=pd(a),e?c.concat(e):(a.pos=b,null)):c}function Eb(a){function b(a){c.push(a)}var c,e;a.allowWhitespace();e=R(a);if(null===e)return null;c=[e];a.allowWhitespace();a.matchString(",")&&(e=Eb(a),null===e&&a.error("Expected a JavaScript expression"),e.forEach(b));
return c}function ya(a,b){var c,e;30===a.t&&-1===b.indexOf(a.n)&&b.unshift(a.n);if(e=a.o||a.m)if(q(e))ya(e,b);else for(c=e.length;c--;)ya(e[c],b);a.x&&ya(a.x,b);a.r&&ya(a.r,b);a.v&&ya(a.v,b)}function qd(a,b){var c;53===b?(c={t:4,n:50,f:[]},oa(rd(a),c)):(c={t:4,n:51,f:[]},oa(a,c));return c}function rd(a){return 33===a.t&&"!"===a.s?a.o:{t:33,s:"!",o:{t:34,x:a}}}function Fb(a){if(1===a.length)return a[0];var b={t:34,x:a[0]};a=Fb(a.slice(1));return{t:36,s:"&&",o:[b,{t:34,x:a}]}}function Gb(a){return a.replace(sd,
function(a,c){var e;return(e="#"!==c[0]?Hb[c]:"x"===c[1]?parseInt(c.substring(2),16):parseInt(c.substring(1),10))?String.fromCharCode(e?10===e?32:128>e?e:159>=e?td[e-128]:55296>e?e:57343>=e?65533:65535>=e?e:65533:65533):a})}function Ib(a){return a.replace(ud,"&amp;").replace(vd,"&lt;").replace(wd,"&gt;")}function za(a){return"string"===typeof a}function ja(a,b,c,e,k){var d,f,g,h,l,m,p;for(d=1;d<a.length;d+=1)f=a[d],g=a[d-1],p=a[d-2],za(f)&&(9===g.t||10===g.t)&&za(p)&&Aa.test(p)&&Ba.test(f)&&(a[d-
2]=p.replace(Aa,"\n"),a[d]=f.replace(Ba,"")),(4===f.t||5===f.t)&&f.f&&za(g)&&Aa.test(g)&&za(f.f[0])&&Ba.test(f.f[0])&&(a[d-1]=g.replace(Aa,"\n"),f.f[0]=f.f[0].replace(Ba,"")),za(f)&&(4===g.t||5===g.t)&&g.f&&(p=na(g.f),za(p)&&Aa.test(p)&&Ba.test(f)&&(g.f[g.f.length-1]=p.replace(Aa,"\n"),a[d]=f.replace(Ba,"")));for(d=a.length;d--;)f=a[d],f.exclude?a.splice(d,1):b&&9===f.t&&a.splice(d,1);xd(a,e?yd:null,k?zd:null);for(d=a.length;d--;){f=a[d];if(f.f){k=7===f.t&&Lg.test(f.e);e=c||k;!c&&k&&xd(f.f,Mg,Ng);
if(!e){k=a[d-1];g=a[d+1];if(!k||"string"===typeof k&&zd.test(k))h=!0;if(!g||"string"===typeof g&&yd.test(g))l=!0}ja(f.f,b,e,h,l)}f.l&&(ja(f.l.f,b,c,h,l),a.splice(d+1,0,f.l),delete f.l);if(f.a)for(m in f.a)f.a.hasOwnProperty(m)&&"string"!==typeof f.a[m]&&ja(f.a[m],b,c,h,l);f.m&&ja(f.m,b,c,h,l);if(f.v)for(m in f.v)f.v.hasOwnProperty(m)&&(n(f.v[m].n)&&ja(f.v[m].n,b,c,h,l),n(f.v[m].d)&&ja(f.v[m].d,b,c,h,l))}for(d=a.length;d--;)"string"===typeof a[d]&&("string"===typeof a[d+1]&&(a[d]+=a[d+1],a.splice(d+
1,1)),c||(a[d]=a[d].replace(Og," ")),""===a[d]&&a.splice(d,1))}function Ad(a){var b,c,e,k;b=a.pos;c=a.matchPattern(Pg);if(!c)return null;e=c;k=a.tags.map(function(a){return a.open});-1!==(e=Jb(e,k))&&(c=c.substr(0,e),a.pos=b+c.length);return c}function Bd(a,b){var c,e,k;c=a.pos;if(!a.matchString(b))return null;a.inAttribute=b;e=[];for(k=Ca(a)||Cd(a,b);null!==k;)e.push(k),k=Ca(a)||Cd(a,b);if(!a.matchString(b))return a.pos=c,null;a.inAttribute=!1;return e}function Cd(a,b){var c,e;e=a.remaining();c=
a.tags.map(function(a){return a.open});c.push(b);c=Jb(e,c);-1===c&&a.error("Quoted attribute value must have a closing quote");if(!c)return null;a.pos+=c;return e.substr(0,c)}function Qg(a){var b;a.allowWhitespace();b=Dd(a);if(!b)return null;b={key:b};a.allowWhitespace();if(!a.matchString(":"))return null;a.allowWhitespace();a=a.read();if(!a)return null;b.value=a.v;return b}function Rg(a,b){var c,e;c=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(b);e=Ed[a];return c&&e?!~e.indexOf(c[1].toLowerCase()):!0}function Fd(a,
b){if(!hb)throw Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return hb(a,b||this.options)}function Gd(a){return a&&"#"===a[0]}function Hd(a,b){var c=Sg(X.getParseOptions(a));return b.call(a,c)}function Sg(a){var b=O(X);b.parse=function(b,e){return X.parse(b,e||a)};return b}function ib(a,b){if("string"===typeof a)"#"===a[0]&&(a=X.fromId(a)),a=hb(a,X.getParseOptions(b));else{if(void 0==a)throw Error("The template cannot be "+a+".");
if("number"!==typeof a.v)throw Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(3!==a.v)throw Error("Mismatched template version (expected 3, got "+a.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");}return a}function Id(a,b,c){if(b)for(var e in b)if(c||!a.hasOwnProperty(e))a[e]=b[e]}function Tg(a,b){var c,e;b in a?(c=
a[b],e="function"===typeof c?c:function(){return c}):e=S;return e}function Jd(a,b,c){return"options."+a+" has been deprecated in favour of options."+b+"."+(c?" You cannot specify both options, please use options."+b+".":"")}function Na(a,b,c){if(b in a){if(c in a)throw Error(Jd(b,c,!0));J(Jd(b,c));a[c]=a[b]}}function Kd(a,b,c,e){Ug(e);for(var k in e)if(Ld.hasOwnProperty(k)){var d=e[k];"el"!==k&&"function"===typeof d?J(""+k+" is a Ractive option that does not expect a function and will be ignored",
"init"===a?c:null):c[k]=d}Oa.forEach(function(k){k[a](b,c,e)});Md[a](b,c,e);Kb[a](b,c,e);Nd[a](b,c,e);Vg(b.prototype,c,e)}function Vg(a,b,c){for(var e in c)if(!Od[e]&&c.hasOwnProperty(e)){var k=c[e];"function"===typeof k&&(k=Wg(a,e,k));b[e]=k}}function Pd(a){var b={};a.forEach(function(a){return b[a]=!0});return b}function Lb(a,b,c,e){e=e||0;return a.map(function(a){var d,f;if(a.text)return a.text;if(a.fragments)return a.fragments.map(function(a){return Lb(a.items,b,c,e)}).join("");d=c+"-"+e++;a=
a.keypath&&(f=a.root.viewmodel.wrapped[a.keypath.str])?f.value:a.getValue();b[d]=a;return"${"+d+"}"}).join("")}function Mb(a,b){for(var c,e=0;e<b.prop.length;e++)if(void 0!==(c=a[b.prop[e]]))return c}function Da(a,b){var c={},e,k,d,f,g,h=!1;b||(c.refs=e={});for(;a;){if((g=a.owner)&&(k=g.indexRefs)){if(b&&(d=g.getIndexRef(b)))return c.ref={fragment:a,ref:d},c;if(!b)for(f in k)d=k[f],e[d.n]||(h=!0,e[d.n]={fragment:a,ref:d})}!a.parent&&a.owner&&a.owner.component&&a.owner.component.parentFragment&&!a.owner.component.instance.isolated?
(c.componentBoundary=!0,a=a.owner.component.parentFragment):a=a.parent}if(h)return c}function Xg(a){return a.call()}function Yg(a,b){return a.replace(/_([0-9]+)/g,function(a,e){var k;if(+e>=b.length)return"_"+e;k=b[e];return void 0===k?"undefined":k.isSpecial?(k=k.value,"number"===typeof k?k:'"'+k+'"'):k.str})}function Zg(a){return void 0!==a&&"@"!==a[0]}function $g(a,b){var c,e,k;if(a.__ractive_nowrap)return a;e="__ractive_"+b._guid;if(c=a[e])return c;if(/this/.test(a.toString())){da(a,e,{value:ah.call(a,
b),configurable:!0});for(k in a)a.hasOwnProperty(k)&&(a[e][k]=a[k]);b._boundFunctions.push({fn:a,prop:e});return a[e]}da(a,"__ractive_nowrap",{value:a});return a.__ractive_nowrap}function bh(a){return a.value}function ch(a){return void 0!=a}function dh(a){a.forceResolution()}function eh(a){a.rebind("","")}function Pa(a,b,c){if(52===b&&a.indexRefs&&a.indexRefs[0]){var e=a.indexRefs[0];(c&&"i"===e.t||!c&&"k"===e.t)&&!c&&(a.length=0,a.fragmentsToUnrender=a.fragments.slice(0),a.fragmentsToUnrender.forEach(function(a){return a.unbind()}));
e.t=c?"k":"i"}a.currentSubtype=b}function fh(a,b){var c={template:a.template.f||[],root:a.root,pElement:a.parentFragment.pElement,owner:a};a.hasContext=!0;if(a.subtype)switch(a.subtype){case 50:return a.hasContext=!1,Nb(a,b,!1,c);case 51:return a.hasContext=!1,Nb(a,b,!0,c);case 53:return Ob(a,c);case 54:return c=b?Ob(a,c):Qd(a),c;case 52:if(q(b))return Pa(a,a.subtype,!0),Rd(a,b,c)}a.ordered=!!Pb.test(Ma.call(b));if(a.ordered){Pa(a,52,!1);var e,k,d;k=b.length;if(k===a.length)c=!1;else{if(k<a.length)a.fragmentsToUnrender=
a.fragments.splice(k,a.length-k),a.fragmentsToUnrender.forEach(ca);else if(k>a.length)for(e=a.length;e<k;e+=1)c.context=a.keypath.join(e),c.index=e,d=new Q(c),a.fragmentsToRender.push(a.fragments[e]=d);a.length=k;c=!0}return c}if(q(b)||"function"===typeof b){if(a.template.i)return Pa(a,52,!0),Rd(a,b,c);Pa(a,53,!1);return Ob(a,c)}Pa(a,50,!1);a.hasContext=!1;return Nb(a,b,!1,c)}function Rd(a,b,c){var e,k,d,f,g,h;d=a.hasKey||(a.hasKey={});for(k=a.fragments.length;k--;)f=a.fragments[k],f.key in b||(g=
!0,f.unbind(),a.fragmentsToUnrender.push(f),a.fragments.splice(k,1),d[f.key]=!1);for(k=a.fragments.length;k--;)f=a.fragments[k],f.index!==k&&(f.index=k,(h=f.registeredIndexRefs)&&h.forEach(gh));k=a.fragments.length;for(e in b)d[e]||(g=!0,c.context=a.keypath.join(e),c.key=e,c.index=k++,f=new Q(c),a.fragmentsToRender.push(f),a.fragments.push(f),d[e]=!0);a.length=a.fragments.length;return g}function Ob(a,b){var c;if(!a.length)return b.context=a.keypath,b.index=0,c=new Q(b),a.fragmentsToRender.push(a.fragments[0]=
c),a.length=1,!0}function Nb(a,b,c,e){var k,d,f;k=Pb.test(Ma.call(b))&&0===b.length;d=!1;if(!Pb.test(Ma.call(b))&&q(b))for(f in d=!0,b){d=!1;break}if(c?k||d||!b:b&&!k&&!d){if(!a.length)return e.index=0,b=new Q(e),a.fragmentsToRender.push(a.fragments[0]=b),a.length=1,!0;if(1<a.length)return a.fragmentsToUnrender=a.fragments.splice(1),a.fragmentsToUnrender.forEach(ca),!0}else return Qd(a)}function Qd(a){if(a.length)return a.fragmentsToUnrender=a.fragments.splice(0,a.fragments.length).filter(hh),a.fragmentsToUnrender.forEach(ca),
a.length=a.fragmentsToRender.length=0,!0}function hh(a){return a.rendered}function gh(a){a.rebind("","")}function ih(a){a.unrender(!0)}function jh(a){a.unrender(!1)}function Qb(a){return Sd[a]||(Sd[a]=ka(a))}function kh(a){return a.selected}function lh(a,b){var c=b?"svg":"div";Rb.innerHTML="<"+c+" "+a+"></"+c+">";return Ab(Rb.childNodes[0].attributes)}function Td(){var a;N.call(this);a=this._ractive.root.viewmodel.get(this._ractive.binding.keypath);this.value=void 0==a?"":a}function mh(){var a=this._ractive.binding,
b=this;a._timeout&&clearTimeout(a._timeout);a._timeout=setTimeout(function(){a.rendered&&N.call(b);a._timeout=void 0},a.element.lazy)}function nh(a){return a.isChecked}function oh(a){return a.element.getAttribute("value")}function pa(a){return a&&a.isBindable}function ph(a){var b,c;b=this.root;if("function"!==typeof b[this.method])throw Error('Attempted to call a non-existent method ("'+this.method+'")');c=this.keypaths.map(function(c){var k,d,f;if(void 0!==c){if(c.eventObject){if(k=a,d=c.refinements.length)for(f=
0;f<d;f+=1)k=k[c.refinements[f]]}else k=b.viewmodel.get(c);return k}});gb.enqueue(b,a);c=this.fn.apply(null,c);b[this.method].apply(b,c);gb.dequeue(b)}function qh(a){Qa(this.root,this.getAction(),{event:a,args:this.params})}function rh(a){var b=this.dynamicParams.getArgsList();"string"===typeof b&&(b=b.substr(1,b.length-2));Qa(this.root,this.getAction(),{event:a,args:b})}function sh(a){Sb[a]||(Sb[a]=function(b){var c=b.node._ractive;b.index=c.index;b.keypath=c.keypath.str;b.context=c.root.viewmodel.get(c.keypath);
c.events[a].fire(b)});return Sb[a]}function th(){var a=this;this.dirty||(this.dirty=!0,w.scheduleTask(function(){uh(a);a.dirty=!1}));this.parentFragment.bubble()}function uh(a){var b,c,e,k;if(b=a.node)b=Ab(b.options),c=a.getAttribute("value"),e=a.getAttribute("multiple"),void 0!==c?(b.forEach(function(a){var b;b=a._ractive?a._ractive.value:a.value;if(e)a:{for(var d=c.length;d--;)if(c[d]==b){b=!0;break a}b=void 0}else b=c==b;b&&(k=!0);a.selected=b}),k||(b[0]&&(b[0].selected=!0),a.binding&&a.binding.forceUpdate())):
a.binding&&a.binding.forceUpdate()}function vh(a){var b;(a.attributes.width||a.attributes.height)&&a.node.addEventListener("load",b=function(){var c=a.getAttribute("width"),e=a.getAttribute("height");void 0!==c&&a.node.setAttribute("width",c);void 0!==e&&a.node.setAttribute("height",e);a.node.removeEventListener("load",b,!1)},!1)}function Ud(){var a=this._ractive.proxy;w.start();a.formBindings.forEach(wh);w.end()}function wh(a){a.root.viewmodel.set(a.keypath,a.resetValue)}function Vd(a){return a}
function Wd(){Ea.hidden=document[Ra]}function Tb(){Ea.hidden=!0}function Ub(){Ea.hidden=!1}function xh(a){var b,c;return(b=a.getAttribute("xmlns"))?b:"svg"===a.name?Z.svg:(c=a.parent)?"foreignObject"===c.name?Z.html:c.node.namespaceURI:a.root.el.namespaceURI}function yh(a){var b,c,e;if(a.select&&(c=a.select.getAttribute("value"),void 0!==c))if(b=a.getAttribute("value"),a.select.node.multiple&&n(c))for(e=c.length;e--;){if(b==c[e]){a.node.selected=!0;break}}else a.node.selected=b==c}function zh(a){var b,
c,e,k;b=a.root;do for(c=b._liveQueries,e=c.length;e--;)k=c[e],k=c["_"+k],k._test(a)&&(a.liveQueries||(a.liveQueries=[])).push(k);while(b=b.parent)}function Xd(a){return(a=a.toString())?" "+a:""}function Ah(a){var b,c;for(c=a.liveQueries.length;c--;)b=a.liveQueries[c],b._remove(a.node)}function Bh(a,b){var c=Ch.exec(b)[0];return null===a||c.length<a.length?c:a}function Yd(a,b){if(a)return a.partials.hasOwnProperty(b)?a:Yd(a._Parent,b)}function Zd(a,b){if(b){if(b.template&&b.template.p&&b.template.p[a])return b.template.p[a];
if(b.parentFragment&&b.parentFragment.owner)return Zd(a,b.parentFragment.owner)}}function $d(a,b){var c,e=la("components",a,b);if(e&&(c=e.components[b],!c._Parent)){var k=c.bind(e);k.isOwner=e.components.hasOwnProperty(b);c=k();if(!c){J('A function was specified for "%s" %s, but no %s was returned',b,"component","component",{ractive:a});return}"string"===typeof c&&(c=$d(a,c));c._fn=k;e.components[b]=c}return c}function Dh(a,b,c){function e(a){var c,e;a.value=b;a.updating||(e=a.ractive,c=a.keypath,
a.updating=!0,w.start(e),e.viewmodel.mark(c),w.end(),a.updating=!1)}var k,d,f,g,h;k=a.obj;d=a.prop;if(c&&!c.configurable){if("length"===d)return;throw Error('Cannot use magic mode with property "'+d+'" - object is not configurable');}c&&(f=c.get,g=c.set);h=function(a){g&&g(a);b=f?f():a;h._ractiveWrappers.forEach(e)};h._ractiveWrappers=[a];Object.defineProperty(k,d,{get:f||function(){return b},set:h,enumerable:!0,configurable:!0})}function Eh(a){var b;Vb[a]||(b=a?a+".":"",Vb[a]=function(c,e){var k;
if("string"===typeof c)return k={},k[b+c]=e,k;if("object"===typeof c){if(b){k=a;var d={},f;if(k){k+=".";for(f in c)c.hasOwnProperty(f)&&(d[k+f]=c[f]);k=d}else k=c}else k=c;return k}});return Vb[a]}function ae(a,b,c){var e,k;b=b.str||b;(b=(e=a.depsMap.patternObservers)&&e[b])&&b.forEach(function(b){k=c.join(b.lastKey);be(a,k);ae(a,b,k)})}function be(a,b){a.patternObservers.forEach(function(a){a.regex.test(b.str)&&a.update(b)})}function ce(a,b,c,e){var k;if(e=de(a,c,e))k=a.get(c),e.forEach(function(a){b&&
a.refineValue?b.push(a):a.setValue(k)})}function Fh(a,b,c){b.forEach(function(b){for(var k=!1,d=0,f=c.length,g=[];d<f;){var h=c[d];if(h===b.keypath){k=!0;break}h.slice(0,b.keypath.length)===b.keypath&&g.push(h);d++}k&&b.setValue(a.get(b.keypath));g.length&&b.refineValue(g)})}function ee(a,b,c){function e(a){a.forEach(k);a.forEach(d)}function k(b){var e=de(a,b,c);e&&f.push({keypath:b,deps:e})}function d(b){var k;(k=a.depsMap[c][b.str])&&e(k)}var f=[];e(b);f.forEach(function(b){var c=a.get(b.keypath);
b.deps.forEach(function(a){return a.setValue(c)})})}function de(a,b,c){return(a=a.deps[c])?a[b.str]:null}function Gh(a){return JSON.stringify(a)}function Hh(a){if(!0===a)return Gh;if("string"===typeof a)return Wb[a]||(Wb[a]=function(b){return b[a]}),Wb[a];if("function"===typeof a)return a;throw Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)");}function Ih(a,b,c){var e,k,d,f;d=function(){e.set?e.set(b.lastKey,c):(k=e.get(),
f())};f=function(){k||(k=fe.test(b.lastKey)?[]:{},a.set(b.parent,k,{silent:!0}));k[b.lastKey]=c};(e=a.wrapped[b.parent.str])?d():(k=a.get(b.parent),(e=a.wrapped[b.parent.str])?d():f())}function Jh(a){return"function"===typeof a.shuffle}function Xb(a){this.hook=new U(a);this.inProcess={};this.queue={}}function ge(a,b){return a[b._guid]||(a[b._guid]=[])}function he(a,b){var c=ge(a.queue,b);for(a.hook.fire(b);c.length;)he(a,c.shift());delete a.queue[b._guid]}function ie(a,b){var c,e;c="return ("+b.replace(Kh,
function(a,b){e=!0;return'__ractive.get("'+b+'")'})+");";e&&(c="var __ractive = this; "+c);c=new Function(c);return e?c.bind(a):c}function Yb(a,b){return/this/.test(a.toString())?a.bind(b):a}function Lh(a,b,c){function e(b){"string"===typeof b&&((b=aa("adaptors",a,b))||t(Fa(b,"adaptor")));return b}var k;b=b.map(e);k=ad(c.adapt).map(e);k=Mh(b,k);b="magic"in c?c.magic:a.magic;c="modifyArrays"in c?c.modifyArrays:a.modifyArrays;if(b){if(!jb)throw Error("Getters and setters (magic mode) are not supported in this browser");
c&&k.push(Nh);k.push(kb)}c&&k.push(Zb);return k}function Mh(a,b){for(var c=a.slice(),e=b.length;e--;)~c.indexOf(b[e])||c.push(b[e]);return c}function Oh(a,b){a._guid="r-"+Ph++;a._subs=O(null);a._config={};a._twowayBindings=O(null);a._animations=[];a.nodes={};a._liveQueries=[];a._liveComponentQueries=[];a._boundFunctions=[];a._observers=[];b.component?(a.parent=b.parent,a.container=b.container||null,a.root=a.parent.root,a.component=b.component,b.component.instance=a,a._inlinePartials=b.inlinePartials):
(a.root=a,a.parent=a.container=null)}function Qh(){throw Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead");}function je(a,b,c){this.parentFragment=a.parentFragment;this.callback=c;this.fragment=new Q({template:b,root:a.root,owner:this});this.update()}function Rh(a,b,c){var e;b.r?e=Sa(a,b.r,c):b.x?e=new $b(a,a.parentFragment,b.x,c):b.rx&&(e=new ke(a,b.rx,c));return e}function Sh(a,b,c,e){"string"!==typeof e&&t("Components currently only support simple events - you cannot include arguments. Sorry!");
a.on(c,function(){var a,c;arguments.length&&arguments[0]&&arguments[0].node&&(a=Array.prototype.shift.call(arguments));c=Array.prototype.slice.call(arguments);Qa(b,e,{event:a,args:c});return!1})}function Th(a){if("string"===typeof a.template)return new Uh(a);switch(a.template.t){case 16:return new Vh(a);case 2:return new Wh(a);case 4:return new Xh(a);case 3:return new Yh(a);case 7:var b=void 0;return(b=Zh(a.parentFragment.root,a.template.e))?new $h(a,b):new ai(a);case 8:return new bi(a);case 9:return new ci(a);
case 18:return new di(a);default:throw Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!");}}function ei(a){return a.toString()}function fi(a){return a.toString(!0)}function gi(a){a.unbind&&a.unbind()}function le(a,b,c){b=K(ba(b));b.isPattern?db(a,b).forEach(function(b){a.viewmodel.set(b,c)}):a.viewmodel.set(b,c)}function hi(a){delete a.fn[a.prop]}function ii(a,b){var c={},e=[];b.forEach(function(a){var b,d;if(!a.radioName||a.element.node.checked)a.checkboxName?
e[a.keypath.str]||a.changed()||(e.push(a.keypath),e[a.keypath.str]=a):(b=a.attribute.value,d=a.getValue(),zb(b,d)||m(b,d)||(c[a.keypath.str]=d))});e.length&&e.forEach(function(a){var b,d;b=e[a.str];d=b.attribute.value;b=b.getValue();zb(d,b)||(c[a.str]=b)});return c}function ji(a,b){Oa.forEach(function(c){ki(c.useDefaults?a.prototype:a,b,c.name)})}function ki(a,b,c){var e,k=Object.keys(a[c]);k.length&&((e=b[c])||(e=b[c]={}),k.filter(function(a){return!(a in e)}).forEach(function(b){return e[b]=a[c][b]}))}
function li(a,b){Object.keys(a.prototype).forEach(function(c){if("computed"!==c){var e=a.prototype[c];if(!(c in b))b[c]=e._method?e._method:e;else if("function"===typeof b[c]&&"function"===typeof e&&b[c]._method){var k=void 0,d=e._method;d&&(e=e._method);k=mi(b[c]._method,e);d&&(k._method=k);b[c]=k}}})}function me(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.length?b.reduce(ne,this):ne(this)}function ne(a,b){var c=void 0===b?{}:b,e,k;c.prototype instanceof ma&&(c=
ni(c));e=function(a){if(!(this instanceof e))return new e(a);ac(this,a)};k=O(a.prototype);k.constructor=e;Ga(e,{defaults:{value:k},extend:{value:me,writable:!0,configurable:!0},_Parent:{value:a}});bc.extend(a,k,c);cc.extend(a,k,c);c.computed&&(k.computed=h(O(a.prototype.computed),c.computed));e.prototype=k;return e}var oe={el:void 0,append:!1,template:{v:3,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},
magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ea,pe,qe,jb,Z,dc,fa;ea="object"===typeof document;pe="undefined"!==typeof navigator&&/jsDom/.test(navigator.appName);qe="undefined"!==typeof console&&"function"===typeof console.warn&&"function"===typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),jb=!0}catch(a){jb=!1}Z={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",
svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};dc="undefined"===typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");fa=["o","ms","moz","webkit"];var ka,ga,Ha,ec,Ta,fc,lb,re,gc;ka=dc?function(a,b){return b&&b!==Z.html?document.createElementNS(b,a):document.createElement(a)}:function(a,b){if(b&&b!==Z.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";
return document.createElement(a)};if(ea){Ha=ka("div");ec=["matches","matchesSelector"];gc=function(a){return function(b,c){return b[a](c)}};for(lb=ec.length;lb--&&!ga;)if(Ta=ec[lb],Ha[Ta])ga=gc(Ta);else for(re=fa.length;re--;)if(fc=fa[lb]+Ta.substr(0,1).toUpperCase()+Ta.substring(1),Ha[fc]){ga=gc(fc);break}ga||(ga=function(a,b){var c,e;c=a.parentNode;c||(Ha.innerHTML="",c=Ha,a=a.cloneNode(),Ha.appendChild(a));c=c.querySelectorAll(b);for(e=c.length;e--;)if(c[e]===a)return!0;return!1})}else ga=null;
var O,da,Ga;try{Object.defineProperty({},"test",{value:0}),ea&&Object.defineProperty(document.createElement("div"),"test",{value:0}),da=Object.defineProperty}catch(a){da=function(a,c,e){a[c]=e.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(a){throw a;}ea&&Object.defineProperties(ka("div"),{test:{value:0}});Ga=Object.defineProperties}catch(a){Ga=function(a,c){for(var e in c)c.hasOwnProperty(e)&&da(a,e,c[e])}}try{Object.create(null),O=Object.create}catch(a){O=function(){var a=function(){};
return function(c,e){var k;if(null===c)return{};a.prototype=c;k=new a;e&&Object.defineProperties(k,e);return k}}()}var ra=Object.prototype.hasOwnProperty,Ma=Object.prototype.toString,Pb=/^\[object (?:Array|FileList)\]$/,S=function(){},Wc={},wb,bb,Ua;qe?function(){var a=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];
Ua=function(){var b=!!console.groupCollapsed;console[b?"groupCollapsed":"log"].apply(console,a);console.log("You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n");
b&&console.groupEnd(a);Ua=S};bb=function(a,c){Ua();if("object"===typeof c[c.length-1]){var e=c.pop(),k=e?e.ractive:null;if(k){var d=void 0;k.component&&(d=k.component.name)&&(a="<"+d+"> "+a);d=void 0;(d=e.node||k.fragment&&k.fragment.rendered&&k.find("*"))&&c.push(d)}}console.warn.apply(console,["%cRactive.js: %c"+a,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(c))};wb=function(){console.log.apply(console,arguments)}}():bb=wb=Ua=S;var Fa=function(a,b){return'Missing "'+a+'" '+b+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+
b+"s"},nb=function(a,b,c,e){if(a===b)return xb(b);if(e){if(c=aa("interpolators",c,e))return c(a,b)||xb(b);t(Fa(e,"interpolator"))}return mb.number(a,b)||mb.array(a,b)||mb.object(a,b)||xb(b)},mb={number:function(a,b){var c;if(!p(a)||!p(b))return null;a=+a;return(c=+b-a)?function(b){return a+b*c}:function(){return a}},array:function(a,b){var c,e,k,d;if(!n(a)||!n(b))return null;c=[];e=[];for(d=k=Math.min(a.length,b.length);d--;)e[d]=nb(a[d],b[d]);for(d=k;d<a.length;d+=1)c[d]=a[d];for(d=k;d<b.length;d+=
1)c[d]=b[d];return function(a){for(var b=k;b--;)c[b]=e[b](a);return c}},object:function(a,b){var c,e,k,d,f;if(!q(a)||!q(b))return null;c=[];d={};k={};for(f in a)ra.call(a,f)&&(ra.call(b,f)?(c.push(f),k[f]=nb(a[f],b[f])):d[f]=a[f]);for(f in b)ra.call(b,f)&&!ra.call(a,f)&&(d[f]=b[f]);e=c.length;return function(a){for(var b=e,f;b--;)f=c[b],d[f]=k[f](a);return d}}},oi=function(a){var b,c,e,k,d;b=a.split(".");(a=cb[b.length])||(a=qg(b.length));k=[];c=function(a,c){return a?"*":b[c]};for(e=a.length;e--;)d=
a[e].map(c).join("."),k.hasOwnProperty(d)||(k.push(d),k[d]=!0);return k},cb={},sg=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,pi=/\*/,yb={},Yc=function(a){var b=a.split(".");this.str=a;if("@"===a[0]){this.isSpecial=!0;var c;c=a.slice(2);c="i"===a[1]?p(c)?+c:c:c;this.value=c}this.firstKey=b[0];this.lastKey=b.pop();this.isPattern=pi.test(a);this.parent=""===a?null:K(b.join("."));this.isRoot=!a};Yc.prototype={equalsOrStartsWith:function(a){return a===this||this.startsWith(a)},join:function(a){return K(this.isRoot?
String(a):this.str+"."+a)},replace:function(a,b){if(this===a)return b;if(this.startsWith(a))return null===b?b:K(this.str.replace(a.str+".",b.str+"."))},startsWith:function(a){return a?a&&this.str.substr(0,a.str.length+1)===a.str+".":!1},toString:function(){throw Error("Bad coercion");},valueOf:function(){throw Error("Bad coercion");},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=oi(this.str))}};var sa=K(""),te=function(a,b,c){if("string"!==typeof b||!p(c))throw Error("Bad arguments");
var e=void 0,k=void 0;if(/\*/.test(b))return k={},db(a,K(ba(b))).forEach(function(b){var e=a.viewmodel.get(b);if(!p(e))throw Error(se);k[b.str]=e+c}),a.set(k);e=a.get(b);if(!p(e))throw Error(se);return a.set(b,+e+c)},se="Cannot add to a non-numeric value",hc;"undefined"===typeof window?hc=null:(function(a,b,c){var e,k;if(!c.requestAnimationFrame){for(e=0;e<a.length&&!c.requestAnimationFrame;++e)c.requestAnimationFrame=c[a[e]+"RequestAnimationFrame"];c.requestAnimationFrame||(k=c.setTimeout,c.requestAnimationFrame=
function(a){var c,e,d;c=Date.now();e=Math.max(0,16-(c-b));d=k(function(){a(c+e)},e);b=c+e;return d})}}(fa,0,window),hc=window.requestAnimationFrame);var ue=hc,ve="undefined"!==typeof window&&window.performance&&"function"===typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},tg={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},
complete:{deprecated:"complete",replacement:"oncomplete"}};Zc.prototype.fire=function(a,b){function c(c){if(a[c])return b?a[c](b):a[c](),!0}c(this.method);!a[this.method]&&this.deprecate&&c(this.deprecate.deprecated)&&(this.deprecate.message?J(this.deprecate.message):J('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement));b?a.fire(this.event,
b):a.fire(this.event)};var U=Zc,Y,ic={},we={},qi={};"function"===typeof Promise?Y=Promise:(Y=function(a){var b=[],c=[],e=ic,k,d,f,g;f=function(a){return function(f){e===ic&&(k=f,e=a,d=ug(e===we?b:c,k),setTimeout(d,0))}};g=f(we);f=f(qi);try{a(g,f)}catch(h){f(h)}return{then:function(a,k){var f=new Y(function(g,h){var l=function(a,b,c){"function"===typeof a?b.push(function(b){var c;try{c=a(b),bd(f,c,g,h)}catch(e){h(e)}}):b.push(c)};l(a,b,g);l(k,c,h);e!==ic&&setTimeout(d,0)});return f},"catch":function(a){return this.then(null,
a)}}},Y.all=function(a){return new Y(function(b,c){var e=[],k,d,f;if(a.length)for(f=function(a,d){a&&"function"===typeof a.then?a.then(function(a){e[d]=a;--k||b(e)},c):(e[d]=a,--k||b(e))},k=d=a.length;d--;)f(a[d],d);else b(e)})},Y.resolve=function(a){return new Y(function(b){b(a)})},Y.reject=function(a){return new Y(function(b,c){c(a)})});var ta=Y,xe=function(a){do if(void 0!==a.context)return a.context;while(a=a.parent);return sa},fb=function(a,b,c){b=ba(b);"~/"===b.substr(0,2)?(b=K(b.substring(2)),
dd(a,b.firstKey,c)):"."===b[0]?(b=vg(xe(c),b))&&dd(a,b.firstKey,c):b=Bb(a,K(b),c);return b},ye=function(a,b){this.callback=a;this.parent=b;this.intros=[];this.outros=[];this.children=[];this.totalChildren=this.outroChildren=0;this.detachQueue=[];this.decoratorQueue=[];this.outrosComplete=!1;b&&b.addChild(this)};ye.prototype={addChild:function(a){this.children.push(a);this.totalChildren+=1;this.outroChildren+=1},decrementOutros:function(){--this.outroChildren;eb(this)},decrementTotal:function(){--this.totalChildren;
eb(this)},add:function(a){(a.isIntro?this.intros:this.outros).push(a)},addDecorator:function(a){this.decoratorQueue.push(a)},remove:function(a){T(a.isIntro?this.intros:this.outros,a);eb(this)},init:function(){this.ready=!0;eb(this)},detachNodes:function(){this.decoratorQueue.forEach(ed);this.detachQueue.forEach(xg);this.children.forEach(yg)}};var M,xa=[],zg=new U("change"),w={start:function(a,b){var c,e;b&&(c=new ta(function(a){return e=a}));M={previousBatch:M,transitionManager:new ye(e,M&&M.transitionManager),
views:[],tasks:[],ractives:[],instance:a};a&&M.ractives.push(a);return c},end:function(){gd();M.transitionManager.init();!M.previousBatch&&M.instance&&(M.instance.viewmodel.changes=[]);M=M.previousBatch},addRactive:function(a){if(M){var b=M.ractives;-1===b.indexOf(a)&&b.push(a)}},registerTransition:function(a){a._manager=M.transitionManager;M.transitionManager.add(a)},registerDecorator:function(a){M.transitionManager.addDecorator(a)},addView:function(a){M.views.push(a)},addUnresolved:function(a){xa.push(a)},
removeUnresolved:function(a){T(xa,a)},detachWhenReady:function(a){M.transitionManager.detachQueue.push(a)},scheduleTask:function(a,b){var c;if(M){for(c=M;b&&c.previousBatch;)c=c.previousBatch;c.tasks.push(a)}else a()}},ua=[],Ia={tick:function(){var a,b,c;c=ve();w.start();for(a=0;a<ua.length;a+=1)b=ua[a],b.tick(c)||ua.splice(a--,1);w.end();ua.length?ue(Ia.tick):Ia.running=!1},add:function(a){ua.push(a);Ia.running||(Ia.running=!0,ue(Ia.tick))},abort:function(a,b){for(var c=ua.length,e;c--;)e=ua[c],
e.root===b&&e.keypath===a&&e.stop()}},Db=Ia,ze=function(a){var b;this.startTime=Date.now();for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.interpolator=nb(this.from,this.to,this.root,this.interpolator);this.running=!0;this.tick()};ze.prototype={tick:function(){var a,b,c;c=this.keypath;if(this.running){a=Date.now();a-=this.startTime;if(a>=this.duration)return null!==c&&(w.start(this.root),this.root.viewmodel.set(c,this.to),w.end()),this.step&&this.step(1,this.to),this.complete(this.to),b=this.root._animations.indexOf(this),
-1===b&&J("Animation was not found"),this.root._animations.splice(b,1),this.running=!1;a=this.easing?this.easing(a/this.duration):a/this.duration;null!==c&&(b=this.interpolator(a),w.start(this.root),this.root.viewmodel.set(c,b),w.end());this.step&&this.step(a,b);return!0}return!1},stop:function(){var a;this.running=!1;a=this.root._animations.indexOf(this);-1===a&&J("Animation was not found");this.root._animations.splice(a,1)}};var Cg=ze,Bg={stop:S},ri=new U("detach"),si=function(a,b){if(this._isComponentQuery?
!this.selector||a.name===this.selector:a.node&&ga(a.node,this.selector))return this.push(a.node||a.instance),b||this._makeDirty(),!0},ti=function(){var a,b,c;a=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"];b=this.selector;c=a.indexOf(b);-1!==c&&(a.splice(c,1),a[b]=null)},Ae=function(a,b){var c,e,k,d,f,g,h;c=id(a.component||a._ractive.proxy);e=id(b.component||b._ractive.proxy);k=na(c);for(d=na(e);k&&k===d;)c.pop(),e.pop(),f=k,k=na(c),d=na(e);k=k.component||k;d=d.component||
d;g=k.parentFragment;h=d.parentFragment;if(g===h)return g=g.items.indexOf(k),h=h.items.indexOf(d),g-h||c.length-e.length;if(d=f.fragments)return g=d.indexOf(g),h=d.indexOf(h),g-h||c.length-e.length;throw Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!");},ui=function(a,b){var c;return a.compareDocumentPosition?(c=a.compareDocumentPosition(b),c&2?1:-1):Ae(a,b)},vi=function(){this.sort(this._isComponentQuery?
Ae:ui);this._dirty=!1},wi=function(){var a=this;this._dirty||(this._dirty=!0,w.scheduleTask(function(){a._sort()}))},xi=function(a){a=this.indexOf(this._isComponentQuery?a.instance:a);-1!==a&&this.splice(a,1)},Be=function(a,b,c,e){var k=[];Ga(k,{selector:{value:b},live:{value:c},_isComponentQuery:{value:e},_test:{value:si}});if(!c)return k;Ga(k,{cancel:{value:ti},_root:{value:a},_sort:{value:vi},_makeDirty:{value:wi},_remove:{value:xi},_dirty:{value:!1,writable:!0}});return k},gb={enqueue:function(a,
b){a.event&&(a._eventQueue=a._eventQueue||[],a._eventQueue.push(a.event));a.event=b},dequeue:function(a){a._eventQueue&&a._eventQueue.length?a.event=a._eventQueue.pop():delete a.event}},Qa=function(a,b,c){c=void 0===c?{}:c;b&&(c.event?c.event.name=b:c.event={name:b,_noArg:!0},b=K(b).wildcardMatches(),jd(a,b,c.event,c.args,!0))},yi={capture:!0,noUnwrap:!0,fullRootGet:!0},Dg=new U("insert"),Ce=function(a,b,c,e){this.root=a;this.keypath=b;this.callback=c;this.defer=e.defer;this.context=e&&e.context?
e.context:a};Ce.prototype={init:function(a){this.value=this.root.get(this.keypath.str);!1!==a?this.update():this.oldValue=this.value},setValue:function(a){var b=this;m(a,this.value)||(this.value=a,this.defer&&this.ready?w.scheduleTask(function(){return b.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var De=function(a,b){var c,e;c=db(a,b);e={};c.forEach(function(b){e[b.str]=
a.get(b.str)});return e},jc,zi=Array.prototype.slice;jc=function(a,b,c,e){this.root=a;this.callback=c;this.defer=e.defer;this.keypath=b;this.regex=new RegExp("^"+b.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$");this.values={};this.defer&&(this.proxies=[]);this.context=e&&e.context?e.context:a};jc.prototype={init:function(a){var b,c;b=De(this.root,this.keypath);if(!1!==a)for(c in b)b.hasOwnProperty(c)&&this.update(K(c));else this.values=b},update:function(a){var b=this,c;if(a.isPattern)for(a in c=
De(this.root,a),c)c.hasOwnProperty(a)&&this.update(K(a));else this.root.viewmodel.implicitChanges[a.str]||(this.defer&&this.ready?w.scheduleTask(function(){return b.getProxy(a).update()}):this.reallyUpdate(a))},reallyUpdate:function(a){var b,c;b=a.str;a=this.root.viewmodel.get(a);this.updating?this.values[b]=a:(this.updating=!0,m(a,this.values[b])&&this.ready||(c=zi.call(this.regex.exec(b),1),c=[a,this.values[b],b].concat(c),this.values[b]=a,this.callback.apply(this.context,c)),this.updating=!1)},
getProxy:function(a){var b=this;this.proxies[a.str]||(this.proxies[a.str]={update:function(){return b.reallyUpdate(a)}});return this.proxies[a.str]}};var kc=function(a,b,c,e){var k,d,f;b=K(ba(b));e=e||Ai;b.isPattern?(k=new jc(a,b,c,e),a.viewmodel.patternObservers.push(k),d=!0):k=new Ce(a,b,c,e);k.init(e.init);a.viewmodel.register(b,k,d?"patternObservers":"observers");k.ready=!0;c={cancel:function(){var c;f||(d?(c=a.viewmodel.patternObservers.indexOf(k),a.viewmodel.patternObservers.splice(c,1),a.viewmodel.unregister(b,
k,"patternObservers")):a.viewmodel.unregister(b,k,"observers"),f=!0)}};a._observers.push(c);return c},Ai={},Ee=function(a){return a.trim()},Fe=function(a){return""!==a},Ge=function(a,b,c){var e=[],k,d,f,g;b=Eg(a,b,c);if(!b)return null;c=a.length;f=b.length-2-b[1];k=Math.min(c,b[0]);d=k+b[1];for(g=0;g<k;g+=1)e.push(g);for(;g<d;g+=1)e.push(-1);for(;g<c;g+=1)e.push(g+f);e.touchedFrom=0!==f?b[0]:a.length;return e},Bi=Array.prototype,va=function(a){return function(b){for(var c=arguments.length,e=Array(1<
c?c-1:0),k=1;k<c;k++)e[k-1]=arguments[k];var k=[],d;b=K(ba(b));c=this.viewmodel.get(b);if(!n(c))throw Error("Called ractive."+a+"('"+b.str+"'), but '"+b.str+"' does not refer to an array");k=Ge(c,a,e);d=Bi[a].apply(c,e);e=w.start(this,!0).then(function(){return d});k?this.viewmodel.smartUpdate(b,c,k):this.viewmodel.mark(b);w.end();return e}},Ci=va("pop"),Di=va("push"),lc,He,Va,Ie,mc,nc,Je=[],oc=!1;ea?(Va=document.createElement("style"),Va.type="text/css",Ie=document.getElementsByTagName("head")[0],
nc=!1,mc=Va.styleSheet,He=function(){var a="/* Ractive.js component styles */\n"+Je.map(function(a){return"\n/* {"+a.id+"} */\n"+a.styles}).join("\n");mc?mc.cssText=a:Va.innerHTML=a;nc||(Ie.appendChild(Va),nc=!0)},lc={add:function(a){Je.push(a);oc=!0},apply:function(){oc&&(He(),oc=!1)}}):lc={add:S,apply:S};var Ke=lc,Ei=new U("render"),Fi=new U("complete"),Md={extend:function(a,b,c){a=ad(c.adapt);c=b.adapt.slice();for(var e=a.length;e--;)~c.indexOf(a[e])||c.push(a[e]);b.adapt=c},init:function(){}},
Ki=function(a,b){var c,e;c='[data-ractive-css~="{'+b+'}"]';e=function(a){var b,e,d,f,g=[];for(b=[];e=Gi.exec(a);)b.push({str:e[0],base:e[1],modifiers:e[2]});a=b.map(Gg);for(f=b.length;f--;)e=a.slice(),d=b[f],e[f]=d.base+c+d.modifiers||"",d=a.slice(),d[f]=c+" "+d[f],g.push(e.join(" "),d.join(" "));return g.join(", ")};return Le.test(a)?a.replace(Le,c):a.replace(Hi,"").replace(Ii,function(a,b){var c;if(Ji.test(b))return a;c=b.split(",").map(Fg).map(e).join(", ")+" ";return a.replace(b,c)})},Ii=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,
Hi=/\/\*.*?\*\//g,Gi=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,Ji=/^@media/,Le=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Li=1,Nd={name:"css",extend:function(a,b,c){c.css&&(a=Li++,c=c.noCssTransform?c.css:Ki(c.css,a),b.cssId=a,Ke.add({id:a,styles:c}))},init:function(){}},cc={name:"data",extend:function(a,b,c){var e=a=void 0;if(c.data&&q(c.data))for(a in c.data)(e=c.data[a])&&"object"===typeof e&&(q(e)||n(e))&&J("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");
b.data=ld(b.data,c.data)},init:function(a,b,c){a=ld(a.prototype.data,c.data);"function"===typeof a&&(a=a.call(b));return a||{}},reset:function(a){var b=this.init(a.constructor,a,a.viewmodel);a.viewmodel.reset(b);return!0}},qa,pc,Mi=/^\s+/;pc=function(a){this.name="ParseError";this.message=a;try{throw Error(a);}catch(b){this.stack=b.stack}};pc.prototype=Error.prototype;qa=function(a,b){var c,e,k=0;this.str=a;this.options=b||{};this.pos=0;this.lines=this.str.split("\n");this.lineEnds=this.lines.map(function(a){return k=
a=k+a.length+1},0);this.init&&this.init(a,b);for(c=[];this.pos<this.str.length&&(e=this.read());)c.push(e);this.leftover=this.remaining();this.result=this.postProcess?this.postProcess(c,b):c};qa.prototype={read:function(a){var b,c,e,k;a||(a=this.converters);b=this.pos;e=a.length;for(c=0;c<e;c+=1)if(this.pos=b,k=a[c](this))return k;return null},getLinePos:function(a){for(var b=0,c=0;a>=this.lineEnds[b];)c=this.lineEnds[b],b+=1;return[b+1,a-c+1,a]},error:function(a){var b=this.getLinePos(this.pos),
c=b[0],e=b[1],k=0,d=this.lines[b[0]-1].replace(/\t/g,function(a,c){c<b[1]&&(k+=1);return"  "})+"\n"+Array(b[1]+k).join(" ")+"^----",c=new pc(""+a+" at line "+c+" character "+e+":\n"+d);c.line=b[0];c.character=b[1];c.shortMessage=a;throw c;},matchString:function(a){if(this.str.substr(this.pos,a.length)===a)return this.pos+=a.length,a},matchPattern:function(a){if(a=a.exec(this.remaining()))return this.pos+=a[0].length,a[1]||a[0]},allowWhitespace:function(){this.matchPattern(Mi)},remaining:function(){return this.str.substring(this.pos)},
nextChar:function(){return this.str.charAt(this.pos)}};qa.extend=function(a){var b,c;b=function(a,b){qa.call(this,a,b)};b.prototype=O(this.prototype);for(c in a)ra.call(a,c)&&(b.prototype[c]=a[c]);b.extend=qa.extend;return b};var Ig=function(a){var b,c,e;if(!a.matchString("="))return null;b=a.pos;a.allowWhitespace();c=a.matchPattern(Me);if(!c)return a.pos=b,null;if(!a.matchPattern(Ni))return null;e=a.matchPattern(Me);if(!e)return a.pos=b,null;a.allowWhitespace();return a.matchString("=")?[c,e]:(a.pos=
b,null)},Me=/^[^\s=]+/,Ni=/^\s+/,od=function(a){var b;return(b=a.matchPattern(Oi))?{t:25,v:b}:null},Oi=/^(\/(?:[^\n\r\u2028\u2029/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Ca=function(a){var b,c;if(!1===a.interpolate[a.inside])return null;for(c=0;c<a.tags.length;c+=1)if(b=Hg(a,a.tags[c]))return b},Jg={t:10,exclude:!0},Ne=function(a){var b;return(b=a.matchPattern(Pi))?{t:20,v:b}:null},Pi=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,
Oe,Pe,Qe;Oe=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/;Pe=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/;Qe=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Re=function(a){return function(b){var c,e,k;c='"';for(e=!1;!e;)(k=b.matchPattern(Oe)||b.matchPattern(Pe)||b.matchString(a))?c='"'===k?c+'\\"':"\\'"===k?c+"'":c+k:(k=b.matchPattern(Qe))?c+="\\u"+("000"+k.charCodeAt(1).toString(16)).slice(-4):e=!0;return JSON.parse(c+'"')}},Qi=Re('"'),Ri=Re("'"),qc=function(a){var b,c;b=a.pos;
return a.matchString('"')?(c=Ri(a),a.matchString('"')?{t:21,v:c}:(a.pos=b,null)):a.matchString("'")?(c=Qi(a),a.matchString("'")?{t:21,v:c}:(a.pos=b,null)):null},Se=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Dd=function(a){var b;if(b=qc(a))return Si.test(b.v)?b.v:'"'+b.v.replace(/"/g,'\\"')+'"';if(b=Ne(a))return b.v;if(b=a.matchPattern(Se))return b},Si=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Kg=function(a){var b,c,e;b=a.pos;a.allowWhitespace();c=Dd(a);if(null===c)return a.pos=b,null;a.allowWhitespace();if(!a.matchString(":"))return a.pos=
b,null;a.allowWhitespace();e=R(a);return null===e?(a.pos=b,null):{t:27,k:c,v:e}},Ue=function(a){var b,c,e;b=a.pos;e=a.matchPattern(/^@(?:keypath|index|key)/);e||(c=a.matchPattern(Ti)||"",e=!c&&a.relaxedNames&&a.matchPattern(Ui)||a.matchPattern(Vi),e||"."!==c||(c="",e="."));if(!e)return null;if(!c&&!a.relaxedNames&&Te.test(e))return a.pos=b,null;if(!c&&rc.test(e))return c=rc.exec(e)[0],a.pos=b+c.length,{t:26,v:c};c=(c||"")+ba(e);a.matchString("(")&&(e=c.lastIndexOf("."),-1!==e?(c=c.substr(0,e),a.pos=
b+c.length):--a.pos);return{t:30,n:c.replace(/^this\./,"./").replace(/^this$/,".")}},Ti=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/,rc,Te;rc=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/;Te=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Vi=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,
Ui=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Wi=function(a){var b,c;(b=Ne(a))||(b=a.remaining(),"true"===b.substr(0,4)?(a.pos+=4,b={t:24,v:"true"}):"false"===b.substr(0,5)?(a.pos+=5,b={t:24,v:"false"}):b=null);(b=b||qc(a))||(b=a.pos,a.allowWhitespace(),a.matchString("{")?(c=pd(a),a.allowWhitespace(),a.matchString("}")?b={t:23,m:c}:(a.pos=b,b=null)):(a.pos=b,b=null));b||(b=a.pos,a.allowWhitespace(),a.matchString("[")?(c=Eb(a),a.matchString("]")?b={t:22,m:c}:(a.pos=b,b=null)):(a.pos=b,b=null));(b=b||od(a)||Ue(a))||
(a.matchString("(")?(a.allowWhitespace(),(b=R(a))||a.error("Expected a JavaScript expression"),a.allowWhitespace(),a.matchString(")")||a.error("Expected closing paren"),b={t:34,x:b}):b=null);if(!b)return null;for(;b;){a:{c=a;var e=void 0,e=void 0;c.allowWhitespace();if(c.matchString(".")){c.allowWhitespace();if(e=c.matchPattern(Se)){c={t:31,n:e};break a}c.error("Expected a property name")}c.matchString("[")?(c.allowWhitespace(),(e=R(c))||c.error("Expected a JavaScript expression"),c.allowWhitespace(),
c.matchString("]")||c.error("Expected ']'"),c={t:31,x:e}):c=null}if(c)b={t:32,x:b,r:c};else if(a.matchString("("))a.allowWhitespace(),c=Eb(a),a.allowWhitespace(),a.matchString(")")||a.error("Expected closing paren"),b={t:40,x:b},c&&(b.o=c);else break}return b},Ve,We;We=function(a,b){return function(c){var e;if(e=b(c))return e;if(!c.matchString(a))return null;c.allowWhitespace();(e=R(c))||c.error("Expected a JavaScript expression");return{s:a,o:e,t:33}}};(function(){var a,b,c,e;e=["!","~","+","-",
"typeof"];c=Wi;a=0;for(b=e.length;a<b;a+=1)c=We(e[a],c);Ve=c})();var Xi=Ve,Xe,Ye;Ye=function(a,b){return function(c){var e,k,d;k=b(c);if(!k)return null;for(;;){e=c.pos;c.allowWhitespace();if(!c.matchString(a)||"in"===a&&/[a-zA-Z_$0-9]/.test(c.remaining().charAt(0)))return c.pos=e,k;c.allowWhitespace();d=b(c);if(!d)return c.pos=e,k;k={t:36,s:a,o:[k,d]}}}};(function(){var a,b,c,e;e="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" ");c=Xi;a=0;for(b=e.length;a<b;a+=1)c=
Ye(e[a],c);Xe=c})();var Yi=Xe,R=function(a){var b,c,e;c=Yi(a);if(!c)return null;b=a.pos;a.allowWhitespace();if(!a.matchString("?"))return a.pos=b,c;a.allowWhitespace();(b=R(a))||a.error("Expected a JavaScript expression");a.allowWhitespace();a.matchString(":")||a.error('Expected ":"');a.allowWhitespace();(e=R(a))||a.error("Expected a JavaScript expression");return{t:35,o:[c,b,e]}},Wa=function(a){function b(a){switch(a.t){case 24:case 26:case 20:case 25:return a.v;case 21:return JSON.stringify(String(a.v));
case 22:return"["+(a.m?a.m.map(b).join(","):"")+"]";case 23:return"{"+(a.m?a.m.map(b).join(","):"")+"}";case 27:return a.k+":"+b(a.v);case 33:return("typeof"===a.s?"typeof ":a.s)+b(a.o);case 36:return b(a.o[0])+("in"===a.s.substr(0,2)?" "+a.s+" ":a.s)+b(a.o[1]);case 40:return b(a.x)+"("+(a.o?a.o.map(b).join(","):"")+")";case 34:return"("+b(a.x)+")";case 32:return b(a.x)+b(a.r);case 31:return a.n?"."+a.n:"["+b(a.x)+"]";case 35:return b(a.o[0])+"?"+b(a.o[1])+":"+b(a.o[2]);case 30:return"_"+c.indexOf(a.n);
default:throw Error("Expected legal JavaScript");}}var c;ya(a,c=[]);return{r:c,s:b(a)}},oa=function(a,b){if(a){for(;34===a.t&&a.x;)a=a.x;if(30===a.t)b.r=a.n;else if(20===a.t&&Zi.test(a.v))b.r=a.v;else{var c;c=a;for(var e=[],k;32===c.t&&31===c.r.t;)k=c.r,k.x?30===k.x.t?e.unshift(k.x):e.unshift(Wa(k.x)):e.unshift(k.n),c=c.x;c=30!==c.t?null:{r:c.n,m:e};c?b.rx=c:b.x=Wa(a)}return b}},Zi=/^[0-9][1-9]*$/,Ze=function(a,b){var c,e;if(!a.matchString("&"))return null;a.allowWhitespace();c=R(a);if(!c)return null;
a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'");e={t:3};oa(c,e);return e},$e=function(a,b){var c,e,k;c=a.pos;try{a:{var d=[b.close],f,g,h;f=a.pos;if(g=R(a)){for(h=0;h<d.length;h+=1)if(a.remaining().substr(0,d[h].length)===d[h]){e=g;break a}a.pos=f;e=Ue(a)}else e=null}}catch(l){k=l}if(!e){if("!"===a.str.charAt(c))return a.pos=c,null;if(k)throw k;}if(!a.matchString(b.close)&&(a.error("Expected closing delimiter '"+b.close+"' after reference"),!e)){if("!"===a.nextChar())return null;
a.error("Expected expression or legal reference")}c={t:2};oa(e,c);return c},$i=/^yield\s*/,sc=function(a,b){var c,e,k;c=a.pos;if(!a.matchString(b.open))return null;a.allowWhitespace();if(!a.matchString("/"))return a.pos=c,null;a.allowWhitespace();e=a.remaining();k=e.indexOf(b.close);if(-1!==k)return c={t:6,r:e.substr(0,k).split(" ")[0]},a.pos+=k,a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'"),c;a.pos=c;return null},aj=/^\s*else\s*/,bj=/^\s*elseif\s+/,af={each:52,"if":50,
"if-with":54,"with":53,unless:51},bf=function(a,b){var c,e,k,d,f,g,h,l,m;c=a.pos;if(a.matchString("^"))e={t:4,f:[],n:51};else if(a.matchString("#")){if(e={t:4,f:[]},a.matchString("partial")&&(a.pos=c-a.standardDelimiters[0].length,a.error("Partial definitions can only be at the top level of the template, or immediately inside components")),c=a.matchPattern(cj))m=c,e.n=af[c]}else return null;a.allowWhitespace();(c=R(a))||a.error("Expected expression");if(d=a.matchPattern(dj))h=void 0,(h=a.matchPattern(ej))?
e.i=d+","+h:e.i=d;a.allowWhitespace();a.matchString(b.close)||a.error("Expected closing delimiter '"+b.close+"'");a.sectionDepth+=1;d=e.f;h=[];do if(k=sc(a,b))m&&k.r!==m&&a.error("Expected "+b.open+"/"+m+""+b.close),--a.sectionDepth,l=!0;else{k=a;var n=b,p=k.pos,q=void 0;k.matchString(n.open)?k.matchPattern(bj)?(q=R(k),k.matchString(n.close)||k.error("Expected closing delimiter '"+n.close+"'"),k={t:61,x:q}):(k.pos=p,k=null):k=null;if(k)51===e.n&&a.error("{{else}} not allowed in {{#unless}}"),f&&a.error("illegal {{elseif...}} after {{else}}"),
g||(g=qd(c,e.n)),g.f.push({t:4,n:50,x:Wa(Fb(h.concat(k.x))),f:d=[]}),h.push(rd(k.x));else if(k=a,n=b,p=k.pos,k.matchString(n.open)?k.matchPattern(aj)?(k.matchString(n.close)||k.error("Expected closing delimiter '"+n.close+"'"),k={t:60}):(k.pos=p,k=null):k=null,k)51===e.n&&a.error("{{else}} not allowed in {{#unless}}"),f&&a.error("there can only be one {{else}} block, at the end of a section"),f=!0,g?g.f.push({t:4,n:50,x:Wa(Fb(h)),f:d=[]}):(g=qd(c,e.n),d=g.f);else{k=a.read(Xa);if(!k)break;d.push(k)}}while(!l);
g&&(53===e.n&&(e.n=54),e.l=g);oa(c,e);e.f.length||delete e.f;return e},dj=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,ej=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,cj=new RegExp("^("+Object.keys(af).join("|")+")\\b"),cf,ob,Hb,td,sd,vd,wd,ud;cf=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i;
ob=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i;Hb={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,
AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,
divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,
nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,
uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,
lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};td=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376];sd=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Hb).join("|")+"));?","g");vd=/</g;wd=/>/g;ud=/&/g;var Ba=/^\s*\r?\n/,Aa=/\r?\n\s*$/,xd=function(a,b,c){var e;b&&(e=a[0],"string"===typeof e&&((e=e.replace(b,""))?a[0]=e:a.shift()));c&&(e=na(a),"string"===
typeof e&&((e=e.replace(c,""))?a[a.length-1]=e:a.pop()))},Og=/[ \t\f\r\n]+/g,Lg=/^(?:pre|script|style|textarea)$/i,yd=/^[ \t\f\r\n]+/,zd=/[ \t\f\r\n]+$/,Mg=/^(?:\r\n|\r|\n)/,Ng=/(?:\r\n|\r|\n)$/,gj=function(a){var b,c;b=a.pos;if(!a.matchString("</"))return null;if(c=a.matchPattern(fj))return a.inside&&c!==a.inside?(a.pos=b,null):{t:14,e:c};a.pos-=2;a.error("Illegal closing tag")},fj=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Jb=function(a,b){var c,e,k;for(c=b.length;c--;){e=a.indexOf(b[c]);if(!e)return 0;
-1!==e&&(!k||e<k)&&(k=e)}return k||-1},ij=function(a){var b;a.allowWhitespace();b=a.matchPattern(hj);if(!b)return null;b={name:b};var c,e,k;c=a.pos;/[=\/>\s]/.test(a.nextChar())||a.error("Expected `=`, `/`, `>` or whitespace");a.allowWhitespace();if(a.matchString("=")){a.allowWhitespace();c=a.pos;e=a.sectionDepth;if(!(k=Bd(a,"'")||Bd(a,'"'))){var d;a.inAttribute=!0;k=[];for(d=Ca(a)||Ad(a);null!==d;)k.push(d),d=Ca(a)||Ad(a);k.length?a.inAttribute=!1:k=null}null===k&&a.error("Expected valid attribute value");
a.sectionDepth!==e&&(a.pos=c,a.error("An attribute value must contain as many opening section tags as closing section tags"));a=k.length?1===k.length&&"string"===typeof k[0]?Gb(k[0]):k:""}else a.pos=c,a=null;null!=a&&(b.value=a);return b},hj=/^[^\s"'>\/=]+/,Pg=/^[^\s"'=<>`]+/,df,tc,ef,ff,gf,hf,jf;tc={"true":!0,"false":!1,undefined:void 0,"null":null};ef=new RegExp("^(?:"+Object.keys(tc).join("|")+")");ff=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;
gf=/\$\{([^\}]+)\}/g;hf=/^\$\{([^\}]+)\}/;jf=/^\s*$/;df=qa.extend({init:function(a,b){this.values=b.values;this.allowWhitespace()},postProcess:function(a){return 1===a.length&&jf.test(this.leftover)?{value:a[0].v}:null},converters:[function(a){var b;if(!a.values)return null;if((b=a.matchPattern(hf))&&a.values.hasOwnProperty(b))return{v:a.values[b]}},function(a){if(a=a.matchPattern(ef))return{v:tc[a]}},function(a){if(a=a.matchPattern(ff))return{v:+a}},function(a){var b=qc(a),c;return b&&(c=a.values)?
{v:b.v.replace(gf,function(a,b){return b in c?c[b]:b})}:b},function(a){var b,c;if(!a.matchString("{"))return null;b={};a.allowWhitespace();if(a.matchString("}"))return{v:b};for(;c=Qg(a);){b[c.key]=c.value;a.allowWhitespace();if(a.matchString("}"))return{v:b};if(!a.matchString(","))break}return null},function(a){var b,c;if(!a.matchString("["))return null;b=[];a.allowWhitespace();if(a.matchString("]"))return{v:b};for(;c=a.read();){b.push(c.v);a.allowWhitespace();if(a.matchString("]"))return{v:b};if(!a.matchString(","))break;
a.allowWhitespace()}return null}]});var pb=function(a,b){return(new df(a,{values:b})).result},lf=function(a,b){var c,e,d,f;if("string"===typeof a){if(c=jj.exec(a))return e=a.lastIndexOf(")"),kj.test(a)||b.error("Invalid input after method call expression '"+a.slice(e+1)+"'"),c={m:c[1]},e="["+a.slice(c.m.length+1,e)+"]",e=new kf(e),c.a=Wa(e.result[0]),c;if(-1===a.indexOf(":"))return a.trim();a=[a]}f=[];e=[];if(a){for(;a.length;)if(c=a.shift(),"string"===typeof c)if(d=c.indexOf(":"),-1===d)f.push(c);
else{d&&f.push(c.substr(0,d));c.length>d+1&&(e[0]=c.substring(d+1));break}else f.push(c);e=e.concat(a)}f.length?e.length||"string"!==typeof f?(c={n:1===f.length&&"string"===typeof f[0]?f[0]:f},1===e.length&&"string"===typeof e[0]?(d=pb("["+e[0]+"]"),c.a=d?d.value:e[0].trim()):c.d=e):c=f:c="";return c},jj=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,kj=/\)\s*$/,kf;kf=qa.extend({converters:[function(a){return R(a)}]});var lj=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,mj=/^[\s\n\/>]/,nj=/^on/,oj=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,
pj=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,qj={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},rj={exclude:!0},Ed;Ed={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],
tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var mf=/[-/\\^$*+?.()|[\]{}]/g,sj=/^\x3c!--\s*/,tj=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,uj=/\s*--\x3e/,nf,vj=/^#\s*partial\s+/,hb=function(a,b){return(new of(a,b||{})).result},wj=[function(a,b){var c,e,d;if(!a.matchString(">"))return null;a.allowWhitespace();a.relaxedNames=!0;c=R(a);a.relaxedNames=!1;a.allowWhitespace();e=R(a);a.allowWhitespace();if(!c)return null;d={t:8};oa(c,d);a.allowWhitespace();e&&(d={t:4,n:53,f:[d]},oa(e,d));a.matchString(b.close)||
a.error("Expected closing delimiter '"+b.close+"'");return d},Ze,bf,function(a,b){var c,e;if(!a.matchPattern($i))return null;c=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);a.allowWhitespace();a.matchString(b.close)||a.error("expected legal partial name");e={t:16};c&&(e.n=c);return e},$e,function(a,b){var c;if(!a.matchString("!"))return null;c=a.remaining().indexOf(b.close);if(-1!==c)return a.pos+=c+b.close.length,{t:9}}],pf=[function(a,b){var c=R(a),e;if(!c)return null;a.matchString(b.close)||a.error("Expected closing delimiter '"+
b.close+"'");e={t:3};oa(c,e);return e}],xj=[Ze,bf,$e],of=void 0,Xa=[Ca,function(a){var b,c,e;b=a.pos;if(!a.matchString("\x3c!--"))return null;c=a.remaining();e=c.indexOf("--\x3e");-1===e&&a.error("Illegal HTML - expected closing comment sequence ('--\x3e')");c=c.substr(0,e);a.pos+=e+3;e={t:9,c:c};a.includeLinePositions&&(e.p=a.getLinePos(b));return e},function(a){var b,c,e,d,f,g,h,l,m;b=a.pos;if(a.inside||a.inAttribute||!a.matchString("<")||"/"===a.nextChar())return null;c={};a.includeLinePositions&&
(c.p=a.getLinePos(b));if(a.matchString("!"))return c.t=18,a.matchPattern(/^doctype/i)||a.error("Expected DOCTYPE declaration"),c.a=a.matchPattern(/^(.+?)>/),c;c.t=7;c.e=a.matchPattern(lj);if(!c.e)return null;mj.test(a.nextChar())||a.error("Illegal tag name");b=function(b,e){var d=e.n||e;pj.test(d)&&(a.pos-=d.length,a.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)"));c.v[b]=e};for(a.allowWhitespace();d=Ca(a)||ij(a);)d.name?
(e=qj[d.name])?c[e]=lf(d.value,a):(e=oj.exec(d.name))?(c.v||(c.v={}),d=lf(d.value,a),b(e[1],d)):a.sanitizeEventAttributes&&nj.test(d.name)||(c.a||(c.a={}),c.a[d.name]=d.value||(""===d.value?"":0)):(c.m||(c.m=[]),c.m.push(d)),a.allowWhitespace();a.allowWhitespace();a.matchString("/")&&(f=!0);if(!a.matchString(">"))return null;b=c.e.toLowerCase();e=a.preserveWhitespace;if(!f&&!ob.test(c.e)){a.elementStack.push(b);if("script"===b||"style"===b)a.inside=b;f=[];d=O(null);do m=a.pos,h=a.remaining(),Rg(b,
h)?(h=gj(a))?(l=!0,h=h.e.toLowerCase(),h!==b&&(a.pos=m,~a.elementStack.indexOf(h)||(m="Unexpected closing tag",ob.test(h)&&(m+=" (<"+h+"> is a void element - it cannot contain children)"),a.error(m)))):(h=sc(a,{open:a.standardDelimiters[0],close:a.standardDelimiters[1]}))?(l=!0,a.pos=m):(h=a.read(qf))?(d[h.n]&&(a.pos=m,a.error("Duplicate partial definition")),ja(h.f,a.stripComments,e,!e,!e),d[h.n]=h.f,g=!0):(h=a.read(Xa))?f.push(h):l=!0:l=!0;while(!l);f.length&&(c.f=f);g&&(c.p=d);a.elementStack.pop()}a.inside=
null;return a.sanitizeElements&&-1!==a.sanitizeElements.indexOf(b)?rj:c},function(a){var b,c,e;c=a.remaining();e=a.inside?"</"+a.inside:"<";a.inside&&!a.interpolate[a.inside]?b=c.indexOf(e):(b=a.tags.map(function(a){return a.open}),b=b.concat(a.tags.map(function(a){return"\\"+a.open})),!0===a.inAttribute?b.push('"',"'","=","<",">","`"):a.inAttribute?b.push(a.inAttribute):b.push(e),b=Jb(c,b));if(!b)return null;-1===b&&(b=c.length);a.pos+=b;return a.inside?c.substr(0,b):Gb(c.substr(0,b))}],qf=[function(a){var b=
a.pos,c=a.standardDelimiters[0],e=a.standardDelimiters[1],d=void 0,f=void 0;if(!a.matchPattern(sj)||!a.matchString(c))return a.pos=b,null;var g=a.matchPattern(tj);P("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+g+"}} ... {{/partial}}\n\n...instead of this:\n  \x3c!-- {{>"+g+"}} --\x3e ... \x3c!-- {{/"+g+"}} --\x3e'");if(!a.matchString(e)||!a.matchPattern(uj))return a.pos=b,null;d=[];b=new RegExp("^\x3c!--\\s*"+c.replace(mf,"\\$&")+"\\s*\\/\\s*"+g+"\\s*"+e.replace(mf,"\\$&")+
"\\s*--\x3e");do a.matchPattern(b)?f=!0:((nf=a.read(Xa))||a.error("expected closing comment ('\x3c!-- "+c+"/"+g+""+e+" --\x3e')"),d.push(nf));while(!f);return{t:17,f:d,n:g}},function(a){var b,c,e,d;b=a.pos;var f=a.standardDelimiters;if(!a.matchString(f[0]))return null;if(!a.matchPattern(vj))return a.pos=b,null;(b=a.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/))||a.error("expected legal partial name");a.matchString(f[1])||a.error("Expected closing delimiter '"+f[1]+"'");c=[];do(e=sc(a,{open:a.standardDelimiters[0],
close:a.standardDelimiters[1]}))?("partial"===!e.r&&a.error("Expected "+f[0]+"/partial"+f[1]),d=!0):((e=a.read(Xa))||a.error("Expected "+f[0]+"/partial"+f[1]),c.push(e));while(!d);return{t:17,n:b,f:c}}],of=qa.extend({init:function(a,b){var c=b.tripleDelimiters||["{{{","}}}"],e=b.staticDelimiters||["[[","]]"],d=b.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=b.delimiters||["{{","}}"];this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],
readers:wj},{isStatic:!1,isTriple:!0,open:c[0],close:c[1],readers:pf},{isStatic:!0,isTriple:!1,open:e[0],close:e[1],readers:xj},{isStatic:!0,isTriple:!0,open:d[0],close:d[1],readers:pf}];this.sortMustacheTags();this.sectionDepth=0;this.elementStack=[];this.interpolate={script:!b.interpolate||!1!==b.interpolate.script,style:!b.interpolate||!1!==b.interpolate.style};!0===b.sanitize&&(b.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),
eventAttributes:!0});this.stripComments=!1!==b.stripComments;this.preserveWhitespace=b.preserveWhitespace;this.sanitizeElements=b.sanitize&&b.sanitize.elements;this.sanitizeEventAttributes=b.sanitize&&b.sanitize.eventAttributes;this.includeLinePositions=b.includeLinePositions},postProcess:function(a){if(!a.length)return{t:[],v:3};0<this.sectionDepth&&this.error("A section was left open");ja(a[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace);return a[0]},
converters:[function(a){for(var b=[],c=O(null),e=!1,d=a.preserveWhitespace;a.pos<a.str.length;){var f=a.pos,g=void 0,h=void 0;(h=a.read(qf))?(c[h.n]&&(a.pos=f,a.error("Duplicated partial definition")),ja(h.f,a.stripComments,d,!d,!d),c[h.n]=h.f,e=!0):(g=a.read(Xa))?b.push(g):a.error("Unexpected template content")}a={v:3,t:b};e&&(a.p=c);return a}],sortMustacheTags:function(){this.tags.sort(function(a,b){return b.open.length-a.open.length})}}),yj="preserveWhitespace sanitize stripComments delimiters tripleDelimiters interpolate".split(" "),
rf={fromId:function(a,b){var c;if(!ea){if(b&&b.noThrow)return;throw Error("Cannot retrieve template #"+a+" as Ractive is not running in a browser.");}Gd(a)&&(a=a.substring(1));if(!(c=document.getElementById(a))){if(b&&b.noThrow)return;throw Error("Could not find template element with id #"+a);}if("SCRIPT"!==c.tagName.toUpperCase()){if(b&&b.noThrow)return;throw Error("Template element with id #"+a+", must be a <script> element");}return"textContent"in c?c.textContent:c.innerHTML},isHashedId:Gd,isParsed:function(a){return"string"!==
typeof a},getParseOptions:function(a){a.defaults&&(a=a.defaults);return yj.reduce(function(b,c){b[c]=a[c];return b},{})},createHelper:function(a){var b=O(rf);b.parse=function(b,e){return Fd(b,e||a)};return b},parse:Fd},X=rf,Kb={name:"template",extend:function(a,b,c){"template"in c&&(a=c.template,b.template="function"===typeof a?a:ib(a,b))},init:function(a,b,c){a="template"in c?c.template:a.prototype.template;"function"===typeof a&&(c=a,a=Hd(b,c),b._config.template={fn:c,result:a});a=ib(a,b);b.template=
a.t;a.p&&Id(b.partials,a.p)},reset:function(a){var b;b=a._config.template;var c;b&&b.fn?(c=Hd(a,b.fn),c!==b.result?(b.result=c,b=c=ib(c,a)):b=void 0):b=void 0;if(b)return b=ib(b,a),a.template=b.t,Id(a.partials,b.p,!0),!0}},qb;qb=function(a,b){this.name=a;this.useDefaults=b};qb.prototype={constructor:qb,extend:function(a,b,c){this.configure(this.useDefaults?a.defaults:a,this.useDefaults?b:b.constructor,c)},init:function(){},configure:function(a,b,c){var e=this.name;c=c[e];a=O(a[e]);for(var d in c)a[d]=
c[d];b[e]=a},reset:function(a){var b=a[this.name],c=!1;Object.keys(b).forEach(function(a){var d=b[a];d._fn&&(d._fn.isOwner?b[a]=d._fn:delete b[a],c=!0)});return c}};var Oa="adaptors components computed decorators easing events interpolators partials transitions".split(" ").map(function(a){return new qb(a,"computed"===a)}),Wg=function(a,b,c){if(!/_super/.test(c))return c;var e=function(){var a=Tg(e._parent,b),d="_super"in this,f=this._super;this._super=a;a=c.apply(this,arguments);d?this._super=f:delete this._super;
return a};e._parent=a;e._method=c;return e},Ug=function(a){Na(a,"beforeInit","onconstruct");Na(a,"init","onrender");Na(a,"complete","oncomplete");Na(a,"eventDefinitions","events");n(a.adaptors)&&Na(a,"adaptors","adapt")},uc,rb,Ja,Od,Ld;Ja={adapt:Md,css:Nd,data:cc,template:Kb};rb=Object.keys(oe);Ld=Pd(rb.filter(function(a){return!Ja[a]}));Od=Pd(rb.concat(Oa.map(function(a){return a.name})));uc=[].concat(rb.filter(function(a){return!Oa[a]&&!Ja[a]}),Oa,Ja.data,Ja.template,Ja.css);var bc={extend:function(a,
b,c){return Kd("extend",a,b,c)},init:function(a,b,c){return Kd("init",a,b,c)},reset:function(a){return uc.filter(function(b){return b.reset&&b.reset(a)}).map(function(a){return a.name})},order:uc},vc=function(){return f(this.node)},sf=function(a){this.type=1;this.text=a.template};sf.prototype={detach:vc,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createTextNode(this.text));return this.node},toString:function(a){return a?Ib(this.text):this.text},unrender:function(a){if(a)return this.detach()}};
var Uh=sf,Ka=function(){this.registered&&this.root.viewmodel.unregister(this.keypath,this);this.resolver&&this.resolver.unbind()},wc=function(a,b,c){this.ref=b;this.resolved=!1;this.root=a.root;this.parentFragment=a.parentFragment;this.callback=c;a=fb(a.root,b,a.parentFragment);void 0!=a?this.resolve(a):w.addUnresolved(this)};wc.prototype={resolve:function(a){this.keypath&&!a&&w.addUnresolved(this);this.resolved=!0;this.keypath=a;this.callback(a)},forceResolution:function(){this.resolve(K(this.ref))},
rebind:function(a,b){var c;void 0!=this.keypath&&(c=this.keypath.replace(a,b),void 0!==c&&this.resolve(c))},unbind:function(){this.resolved||w.removeUnresolved(this)}};var tf=function(a,b,c){this.parentFragment=a.parentFragment;this.ref=b;this.callback=c;this.rebind()},zj={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};tf.prototype={rebind:function(){var a=this.ref,b=this.parentFragment,c=zj[a],e;if(!c)throw Error('Unknown special reference "'+
a+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(K("@"+c.prefix+Mb(this.cached,c)));if(-1!==c.prop.indexOf("index")||-1!==c.prop.indexOf("key"))for(;b;){if(52===b.owner.currentSubtype&&void 0!==(e=Mb(b,c)))return this.cached=b,b.registerIndexRef(this),this.callback(K("@"+c.prefix+e));b=!b.parent&&b.owner&&b.owner.component&&b.owner.component.parentFragment&&!b.owner.component.instance.isolated?b.owner.component.parentFragment:b.parent}else for(;b;){if(void 0!==
(e=Mb(b,c)))return this.callback(K("@"+c.prefix+e.str));b=b.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var uf=function(a,b,c){this.parentFragment=a.parentFragment;this.ref=b;this.callback=c;b.ref.fragment.registerIndexRef(this);this.rebind()};uf.prototype={rebind:function(){var a;a=this.ref.ref;a="k"===a.ref.t?"k"+a.fragment.key:"i"+a.fragment.index;void 0!==a&&this.callback(K("@"+a))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};Da.resolve=
function(a){var b={},c,e;for(c in a.refs)e=a.refs[c],b[e.ref.n]="k"===e.ref.t?e.fragment.key:e.fragment.index;return b};var Sa=function(a,b,c){var e;return"@"===b.charAt(0)?new tf(a,b,c):(e=Da(a.parentFragment,b))?new uf(a,e,c):new wc(a,b,c)},vf=function(a,b){var c;if(xc[a])return xc[a];for(c=[];b--;)c[b]="_"+b;c=new Function(c.join(","),"return("+a+")");return xc[a]=c},xc={},yc,ah=Function.prototype.bind;yc=function(a,b,c,e){var d=this;this.root=a.root;this.parentFragment=b;this.callback=e;this.owner=
a;this.str=c.s;this.keypaths=[];this.pending=c.r.length;this.refResolvers=c.r.map(function(a,b){return Sa(d,a,function(a){d.resolve(b,a)})});this.ready=!0;this.bubble()};yc.prototype={bubble:function(){this.ready&&(this.uniqueString=Yg(this.str,this.keypaths),this.keypath=K("${"+this.uniqueString.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}"),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var a;a=this.refResolvers.pop();)a.unbind()},resolve:function(a,b){this.keypaths[a]=
b;this.bubble()},createEvaluator:function(){var a=this,b,c,e,d;e=this.keypath;(b=this.root.viewmodel.computations[e.str])?this.root.viewmodel.mark(e):(d=vf(this.str,this.refResolvers.length),c=this.keypaths.map(function(b){var c;return"undefined"===b?function(){}:b.isSpecial?(c=b.value,function(){return c}):function(){var c=a.root.viewmodel.get(b,{noUnwrap:!0,fullRootGet:!0});"function"===typeof c&&(c=$g(c,a.root));return c}}),b={deps:this.keypaths.filter(Zg),getter:function(){var a=c.map(Xg);return d.apply(null,
a)}},b=this.root.viewmodel.compute(e,b))},rebind:function(a,b){this.refResolvers.forEach(function(c){return c.rebind(a,b)})}};var $b=yc,wf=function(a,b,c){var e=this;this.resolver=b;this.root=b.root;this.parentFragment=c;this.viewmodel=b.root.viewmodel;"string"===typeof a?this.value=a:30===a.t?this.refResolver=Sa(this,a.n,function(a){e.resolve(a)}):new $b(b,c,a,function(a){e.resolve(a)})};wf.prototype={resolve:function(a){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.keypath=a;this.value=
this.viewmodel.get(a);this.bind();this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(a,b){this.refResolver&&this.refResolver.rebind(a,b)},setValue:function(a){this.value=a;this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this);this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var xf=function(a,b,c){var e=this,d,f,g;this.parentFragment=
g=a.parentFragment;this.root=d=a.root;this.mustache=a;this.ref=a=b.r;this.callback=c;this.unresolved=[];(f=fb(d,a,g))?this.base=f:this.baseResolver=new wc(this,a,function(a){e.base=a;e.baseResolver=null;e.bubble()});this.members=b.m.map(function(a){return new wf(a,e,g)});this.ready=!0;this.bubble()};xf.prototype={getKeypath:function(){var a=this.members.map(bh);return!a.every(ch)||this.baseResolver?null:this.base.join(a.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},
unbind:function(){this.members.forEach(ca)},rebind:function(a,b){var c;if(this.base){var e=this.base.replace(a,b);e&&e!==this.base&&(this.base=e,c=!0)}this.members.forEach(function(e){e.rebind(a,b)&&(c=!0)});c&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=K(this.ref),this.baseResolver.unbind(),this.baseResolver=null);this.members.forEach(dh);this.bubble()}};var ke=xf,yf=function(a,b){this.fragments&&this.fragments.forEach(function(c){return c.rebind(a,b)});this.resolver&&
this.resolver.rebind(a,b)},V={getValue:function(){return this.value},init:function(a,b){function c(b){a.resolve(b)}function e(b){var c=a.keypath;b!=c&&(a.resolve(b),void 0!==c&&a.fragments&&a.fragments.forEach(function(a){a.rebind(c,b)}))}var d,f;f=b.parentFragment;d=b.template;a.root=f.root;a.parentFragment=f;a.pElement=f.pElement;a.template=b.template;a.index=b.index||0;a.isStatic=b.template.s;a.type=b.template.t;a.registered=!1;if(d=d.r)a.resolver=Sa(a,d,c);b.template.x&&(a.resolver=new $b(a,f,
b.template.x,e));b.template.rx&&(a.resolver=new ke(a,b.template.rx,e));51!==a.template.n||a.hasOwnProperty("value")||a.setValue(void 0)},resolve:function(a){var b,c,e;a&&a.isSpecial?(this.keypath=a,this.setValue(a.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,b=!0),this.keypath=a,void 0!=a&&(c=this.root.viewmodel.get(a),this.root.viewmodel.register(a,this),this.registered=!0),this.setValue(c),b&&(e=this.twowayBinding)&&e.rebound())},rebind:yf},zf=
function(a){this.type=2;V.init(this,a)};zf.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:V.resolve,rebind:V.rebind,detach:vc,unbind:Ka,render:function(){this.node||(this.node=document.createTextNode(g(this.value)));return this.node},unrender:function(a){a&&f(this.node)},getValue:V.getValue,setValue:function(a){var b;this.keypath&&(b=this.root.viewmodel.wrapped[this.keypath.str])&&(a=b.get());m(a,this.value)||(this.value=a,this.parentFragment.bubble(),this.node&&
w.addView(this))},firstNode:function(){return this.node},toString:function(a){var b=""+g(this.value);return a?Ib(b):b}};var Wh=zf,Af=function(a){this.type=4;this.subtype=this.currentSubtype=a.template.n;this.inverted=51===this.subtype;this.pElement=a.pElement;this.fragments=[];this.fragmentsToCreate=[];this.fragmentsToRender=[];this.fragmentsToUnrender=[];a.template.i&&(this.indexRefs=a.template.i.split(",").map(function(a,c){return{n:a,t:0===c?"k":"i"}}));this.renderedFragments=[];this.length=0;
V.init(this,a)};Af.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var a;if(1===this.fragments.length)return this.fragments[0].detach();a=document.createDocumentFragment();this.fragments.forEach(function(b){a.appendChild(b.detach())});return a},find:function(a){var b,c,e;c=this.fragments.length;for(b=0;b<c;b+=1)if(e=this.fragments[b].find(a))return e;return null},findAll:function(a,b){var c,e;e=this.fragments.length;for(c=0;c<e;c+=1)this.fragments[c].findAll(a,b)},findAllComponents:function(a,
b){var c,e;e=this.fragments.length;for(c=0;c<e;c+=1)this.fragments[c].findAllComponents(a,b)},findComponent:function(a){var b,c,e;c=this.fragments.length;for(b=0;b<c;b+=1)if(e=this.fragments[b].findComponent(a))return e;return null},findNextNode:function(a){return this.fragments[a.index+1]?this.fragments[a.index+1].firstNode():this.parentFragment.findNextNode(this)},firstNode:function(){var a,b,c;if(a=this.fragments.length)for(b=0;b<a;b+=1)if(c=this.fragments[b].firstNode())return c;return this.parentFragment.findNextNode(this)},
getIndexRef:function(a){if(this.indexRefs)for(var b=this.indexRefs.length;b--;){var c=this.indexRefs[b];if(c.n===a)return c}},getValue:V.getValue,shuffle:function(a){var b=this,c,e,d,f;if(!this.shuffling&&!this.unbound&&52===this.currentSubtype){this.shuffling=!0;w.scheduleTask(function(){return b.shuffling=!1});d=[];a.forEach(function(a,e){var f,g,h,l;a===e?d[a]=b.fragments[e]:(f=b.fragments[e],void 0===c&&(c=e),-1===a?(b.fragmentsToUnrender.push(f),f.unbind()):(g=b.keypath.join(e),h=b.keypath.join(a),
f.index=a,(l=f.registeredIndexRefs)&&l.forEach(eh),f.rebind(g,h),d[a]=f))});e=this.root.viewmodel.get(this.keypath).length;if(void 0===c){if(this.length===e)return;c=this.length}this.length=this.fragments.length=e;this.rendered&&w.addView(this);for(a=c;a<e;a+=1)(f=d[a])||this.fragmentsToCreate.push(a),this.fragments[a]=f}},rebind:function(a,b){V.rebind.call(this,a,b)},render:function(){var a=this;this.docFrag=document.createDocumentFragment();this.fragments.forEach(function(b){return a.docFrag.appendChild(b.render())});
this.renderedFragments=this.fragments.slice();this.fragmentsToRender=[];this.rendered=!0;return this.docFrag},resolve:V.resolve,setValue:function(a){var b=this,c,e;this.updating||(this.updating=!0,this.keypath&&(c=this.root.viewmodel.wrapped[this.keypath.str])&&(a=c.get()),this.fragmentsToCreate.length?(e={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(a){var c;e.context=b.keypath.join(a);e.index=a;c=new Q(e);b.fragmentsToRender.push(b.fragments[a]=
c)}),this.fragmentsToCreate.length=0):fh(this,a)&&(this.bubble(),this.rendered&&w.addView(this)),this.value=a,this.updating=!1)},toString:function(a){var b,c,e;b="";e=this.length;for(c=0;c<e;c+=1)b+=this.fragments[c].toString(a);return b},unbind:function(){var a=this;this.fragments.forEach(ca);this.fragmentsToRender.forEach(function(b){return T(a.fragments,b)});this.fragmentsToRender=[];Ka.call(this);this.length=0;this.unbound=!0},unrender:function(a){this.fragments.forEach(a?ih:jh);this.renderedFragments=
[];this.rendered=!1},update:function(){var a,b,c,e,d,f;for(c=this.renderedFragments;a=this.fragmentsToUnrender.pop();)a.unrender(!0),c.splice(c.indexOf(a),1);for(;a=this.fragmentsToRender.shift();)a.render();this.rendered&&(e=this.parentFragment.getNode());f=this.fragments.length;for(d=0;d<f;d+=1)a=this.fragments[d],b=c.indexOf(a,d),b===d?this.docFrag.childNodes.length&&(a=a.firstNode(),e.insertBefore(this.docFrag,a)):(this.docFrag.appendChild(a.detach()),-1!==b&&c.splice(b,1),c.splice(d,0,a));this.rendered&&
this.docFrag.childNodes.length&&(a=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,a));this.renderedFragments=this.fragments.slice()}};var Xh=Af,Sd={},Bf,Cf;try{ka("table").innerHTML="foo"}catch(a){Bf=!0,Cf={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Df=function(a,b,c){var e,d=[],f,g;if(null!=
a&&""!==a){Bf&&(f=Cf[b.tagName])?(e=Qb("DIV"),e.innerHTML=f[0]+a+f[1],e=e.querySelector(".x"),"SELECT"===e.tagName&&(g=e.options[e.selectedIndex])):b.namespaceURI===Z.svg?(e=Qb("DIV"),e.innerHTML='<svg class="x">'+a+"</svg>",e=e.querySelector(".x")):(e=Qb(b.tagName),e.innerHTML=a,"SELECT"===e.tagName&&(g=e.options[e.selectedIndex]));for(;a=e.firstChild;)d.push(a),c.appendChild(a);if("SELECT"===b.tagName)for(b=d.length;b--;)d[b]!==g&&(d[b].selected=!1)}return d},Ef=function(a){var b,c;if(a&&"select"===
a.name&&a.binding){b=Ab(a.node.options).filter(kh);if(a.getAttribute("multiple"))c=b.map(function(a){return a.value});else if(b=b[0])c=b.value;void 0!==c&&a.binding.setValue(c);a.bubble()}},Ff=function(a){this.type=3;V.init(this,a)};Ff.prototype={detach:function(){var a,b;if(this.docFrag){a=this.nodes.length;for(b=0;b<a;b+=1)this.docFrag.appendChild(this.nodes[b]);return this.docFrag}},find:function(a){var b,c,e;c=this.nodes.length;for(b=0;b<c;b+=1)if(e=this.nodes[b],1===e.nodeType&&(ga(e,a)||(e=
e.querySelector(a))))return e;return null},findAll:function(a,b){var c,e,d,f,g;e=this.nodes.length;for(c=0;c<e;c+=1)if(d=this.nodes[c],1===d.nodeType&&(ga(d,a)&&b.push(d),d=d.querySelectorAll(a)))for(f=d.length,g=0;g<f;g+=1)b.push(d[g])},firstNode:function(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)},getValue:V.getValue,rebind:V.rebind,render:function(){if(this.rendered)throw Error("Attempted to render an item that was already rendered");this.docFrag=
document.createDocumentFragment();this.nodes=Df(this.value,this.parentFragment.getNode(),this.docFrag);Ef(this.pElement);this.rendered=!0;return this.docFrag},resolve:V.resolve,setValue:function(a){var b;if(b=this.root.viewmodel.wrapped[this.keypath.str])a=b.get();a!==this.value&&(this.value=a,this.parentFragment.bubble(),this.rendered&&w.addView(this))},toString:function(){return void 0!=this.value?Gb(""+this.value):""},unbind:Ka,unrender:function(a){this.rendered&&a&&(this.nodes.forEach(f),this.rendered=
!1)},update:function(){var a;if(this.rendered){for(;this.nodes&&this.nodes.length;)a=this.nodes.pop(),a.parentNode.removeChild(a);a=this.parentFragment.getNode();this.nodes=Df(this.value,a,this.docFrag);a.insertBefore(this.docFrag,this.parentFragment.findNextNode(this));Ef(this.pElement)}}};var Yh=Ff,Gf=/^true|on|yes|1$/i,Aj=/^[0-9]+$/,Hf;Hf=function(a){for(var b={},c=a.length;c--;)b[a[c].toLowerCase()]=a[c];return b}("altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" ").concat("attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" ")));
var zc=function(a){a=a.toLowerCase();return Hf[a]||a},Bj={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Cj=function(){var a=this.value,b,c,e,d;if(!this.locked)for(this.node._ractive.value=
a,b=this.node.options,d=b.length;d--;)if(c=b[d],e=c._ractive?c._ractive.value:c.value,e==a){c.selected=!0;break}},Dj=function(){var a=this.value,b,c,e,d;n(a)||(a=[a]);b=this.node.options;for(c=b.length;c--;)e=b[c],d=e._ractive?e._ractive.value:e.value,e.selected=$c(a,d)},Ej=function(){var a=this.node;a.checked=this.value==a._ractive.value},Fj=function(){var a,b=this.node,c;a=b.checked;b.value=this.element.getAttribute("value");b.checked=this.element.getAttribute("value")===this.element.getAttribute("name");
if(a&&!b.checked&&this.element.binding&&(a=this.element.binding.siblings,b=a.length)){for(;b--;){c=a[b];if(!c.element.node)return;if(c.element.node.checked)return w.addRactive(c.root),c.handleChange()}this.root.viewmodel.set(c.keypath,void 0)}},Gj=function(){var a=this.element,b=this.node,c=this.value,e=a.binding,d,a=a.getAttribute("value");if(n(c)){for(d=c.length;d--;)if(a==c[d]){e.isChecked=b.checked=!0;return}e.isChecked=b.checked=!1}else e.isChecked=b.checked=c==a},Hj=function(){this.node.className=
g(this.value)},Ij=function(){var a=this.node,b=this.value;this.root.nodes[b]=a;a.id=b},Jj=function(){var a,b;a=this.node;b=this.value;void 0===b&&(b="");a.style.setAttribute("cssText",b)},Kj=function(){var a=this.value;void 0===a&&(a="");this.locked||(this.node.innerHTML=a)},If=function(){var a=this.node,b=this.value;a._ractive.value=b;this.locked||(a.value=void 0==b?"":b)},Lj=function(){this.locked||(this.node[this.propertyName]=this.value)},Mj=function(){var a=this.node,b=this.namespace,c=this.name,
e=this.value,d=this.fragment;b?a.setAttributeNS(b,c,(d||e).toString()):this.isBoolean?e?a.setAttribute(c,""):a.removeAttribute(c):null==e?a.removeAttribute(c):a.setAttribute(c,(d||e).toString())},Jf=function(a){this.init(a)};Jf.prototype={bubble:function(){var a=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();m(a,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=a,"value"===this.name&&this.node&&(this.node._ractive.value=a),
this.rendered&&w.addView(this))},init:function(a){this.type=13;this.element=a.element;this.root=a.root;a:{var b=a.name,c,e;c=b.indexOf(":");if(-1!==c&&(e=b.substr(0,c),"xmlns"!==e)){b=b.substring(c+1);this.name=zc(b);this.namespace=Z[e.toLowerCase()];this.namespacePrefix=e;if(!this.namespace)throw'Unknown namespace ("'+e+'")';break a}this.name=this.element.namespace!==Z.html?zc(b):b}this.isBoolean=cf.test(this.name);a.value&&"string"!==typeof a.value?(this.parentFragment=this.element.parentFragment,
this.fragment=new Q({template:a.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),a=this.fragment.items,a=1===a.length&&2===a[0].type?a[0]:void 0,this.interpolator=a,this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,this.ready=!0):this.value=this.isBoolean?!0:a.value||""},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},render:function(a){var b;this.node=a;if(!a.namespaceURI||a.namespaceURI===Z.html){b=Bj[this.name]||this.name;void 0!==a[b]&&(this.propertyName=
b);if(this.isBoolean||this.isTwoway)this.useProperty=!0;"value"===b&&(a._ractive.value=this.value)}this.rendered=!0;this.update()},toString:function(){var a=this.name,b=this.namespacePrefix,c=this.value,e=this.interpolator,d=this.fragment;if("value"!==a||"select"!==this.element.name&&"textarea"!==this.element.name)if("value"!==a||void 0===this.element.getAttribute("contenteditable")){if("name"===a&&"input"===this.element.name&&e)return"name={{"+(e.keypath.str||e.ref)+"}}";if(this.isBoolean)return c?
a:"";if(d){if(1===d.items.length&&null==d.items[0].value)return"";c=d.toString()}b&&(a=b+":"+a);return c?a+'="'+c.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")+'"':a}},unbind:function(){this.fragment&&this.fragment.unbind();"id"===this.name&&delete this.root.nodes[this.value]},update:function(){var a=this.name,b=this.element,c=this.node,e;"id"===a?e=Ij:"value"===a?"select"===b.name&&"value"===a?e=b.getAttribute("multiple")?Dj:Cj:"textarea"===b.name?e=If:null!=b.getAttribute("contenteditable")?
e=Kj:"input"===b.name&&(a=b.getAttribute("type"),e="file"===a?S:"radio"===a&&b.binding&&"name"===b.binding.name?Fj:If):this.isTwoway&&"name"===a?"radio"===c.type?e=Ej:"checkbox"===c.type&&(e=Gj):"style"===a&&c.style.setAttribute?e=Jj:"class"!==a||c.namespaceURI&&c.namespaceURI!==Z.html?this.useProperty&&(e=Lj):e=Hj;e||(e=Mj);this.update=e;this.update()}};var Rb;"undefined"!==typeof document&&(Rb=ka("div"));var Kf=function(a,b){this.element=a;this.root=a.root;this.parentFragment=a.parentFragment;this.attributes=
[];this.fragment=new Q({root:a.root,owner:this,template:[b]})};Kf.prototype={bubble:function(){this.node&&this.update();this.element.bubble()},rebind:function(a,b){this.fragment.rebind(a,b)},render:function(a){this.node=a;this.isSvg=a.namespaceURI===Z.svg;this.update()},unbind:function(){this.fragment.unbind()},update:function(){var a=this,b;b=lh(this.fragment.toString(),this.isSvg);this.attributes.filter(function(a){a:{for(var e=b.length;e--;)if(b[e].name===a.name){a=!1;break a}a=!0}return a}).forEach(function(b){a.node.removeAttribute(b.name)});
b.forEach(function(b){a.node.setAttribute(b.name,b.value)});this.attributes=b},toString:function(){return this.fragment.toString()}};var Nj=function(a,b){return b?b.map(function(b){return new Kf(a,b)}):[]},W=function(a){var b,c;this.element=a;this.root=a.root;this.attribute=a.attributes[this.name||"value"];b=this.attribute.interpolator;b.twowayBinding=this;if(c=b.keypath){if("}"===c.str.slice(-1))return P("Two-way binding does not work with expressions (`%s` on <%s>)",b.resolver.uniqueString,a.name,
{ractive:this.root}),!1;if(c.isSpecial)return P("Two-way binding does not work with %s",b.resolver.ref,{ractive:this.root}),!1}else J("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",b.template.r?"'"+b.template.r+"' reference":"expression",{ractive:this.root}),b.resolver.forceResolution(),c=b.keypath;this.attribute.isTwoway=!0;this.keypath=c;b=this.root.viewmodel.get(c);void 0===b&&this.getInitialValue&&
(b=this.getInitialValue(),void 0!==b&&this.root.viewmodel.set(c,b));a:{for(;a=a.parent;)if("form"===a.name)break a;a=void 0}a&&(this.resetValue=b,a.formBindings.push(this))};W.prototype={handleChange:function(){var a=this;w.start(this.root);this.attribute.locked=!0;this.root.viewmodel.set(this.keypath,this.getValue());w.scheduleTask(function(){return a.attribute.locked=!1});w.end()},rebound:function(){var a,b;a=this.keypath;b=this.attribute.interpolator.keypath;a!==b&&(T(this.root._twowayBindings[a.str],
this),this.keypath=b,a=this.root._twowayBindings[b.str]||(this.root._twowayBindings[b.str]=[]),a.push(this))},unbind:function(){}};W.extend=function(a){var b;b=function(a){W.call(this,a);this.init&&this.init()};b.prototype=O(this.prototype);h(b.prototype,a);b.extend=W.extend;return b};var N=function(){this._ractive.binding.handleChange()},sb=W.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var a=this.element.node,b,c=!1;this.rendered=
!0;b=this.root.lazy;!0===this.element.lazy?b=!0:!1===this.element.lazy?b=!1:p(this.element.lazy)?(b=!1,c=+this.element.lazy):p(b||"")&&(c=+b,b=!1,this.element.lazy=c);this.handler=c?mh:N;a.addEventListener("change",N,!1);b||(a.addEventListener("input",this.handler,!1),a.attachEvent&&a.addEventListener("keyup",this.handler,!1));a.addEventListener("blur",Td,!1)},unrender:function(){var a=this.element.node;this.rendered=!1;a.removeEventListener("change",N,!1);a.removeEventListener("input",this.handler,
!1);a.removeEventListener("keyup",this.handler,!1);a.removeEventListener("blur",Td,!1)}}),Oj=sb.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Ac=function(a,b,c){a=a+b+c;return Lf[a]||(Lf[a]=[])},Lf={},Pj=W.extend({name:"checked",init:function(){this.siblings=Ac(this.root._guid,"radio",this.element.getAttribute("name"));this.siblings.push(this)},render:function(){var a=this.element.node;
a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},handleChange:function(){w.start(this.root);this.siblings.forEach(function(a){a.root.viewmodel.set(a.keypath,a.getValue())});w.end()},getValue:function(){return this.element.node.checked},unbind:function(){T(this.siblings,this)}}),Qj=W.extend({name:"name",init:function(){this.siblings=Ac(this.root._guid,
"radioname",this.keypath.str);this.siblings.push(this);this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value")},render:function(){var a=this.element.node;a.name="{{"+this.keypath.str+"}}";a.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value");a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",
N,!1);a.removeEventListener("click",N,!1)},getValue:function(){var a=this.element.node;return a._ractive?a._ractive.value:a.value},handleChange:function(){this.element.node.checked&&W.prototype.handleChange.call(this)},rebound:function(a,b){var c;W.prototype.rebound.call(this,a,b);if(c=this.element.node)c.name="{{"+this.keypath.str+"}}"},unbind:function(){T(this.siblings,this)}}),Rj=W.extend({name:"name",getInitialValue:function(){this.noInitialValue=!0;return[]},init:function(){var a,b;this.checkboxName=
!0;this.siblings=Ac(this.root._guid,"checkboxes",this.keypath.str);this.siblings.push(this);this.noInitialValue&&(this.siblings.noInitialValue=!0);this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(a=this.root.viewmodel.get(this.keypath),b=this.element.getAttribute("value"),a.push(b))},unbind:function(){T(this.siblings,this)},render:function(){var a=this.element.node,b,c;b=this.root.viewmodel.get(this.keypath);c=this.element.getAttribute("value");n(b)?this.isChecked=$c(b,c):this.isChecked=
b==c;a.name="{{"+this.keypath.str+"}}";a.checked=this.isChecked;a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},changed:function(){var a=!!this.isChecked;this.isChecked=this.element.node.checked;return this.isChecked===a},handleChange:function(){this.isChecked=this.element.node.checked;W.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(nh).map(oh)}}),
Sj=W.extend({name:"checked",render:function(){var a=this.element.node;a.addEventListener("change",N,!1);a.attachEvent&&a.addEventListener("click",N,!1)},unrender:function(){var a=this.element.node;a.removeEventListener("change",N,!1);a.removeEventListener("click",N,!1)},getValue:function(){return this.element.node.checked}}),Bc=W.extend({getInitialValue:function(){var a=this.element.options,b,c,e,d;if(void 0===this.element.getAttribute("value")&&(c=b=a.length)){for(;c--;)if(a[c].getAttribute("selected")){e=
a[c].getAttribute("value");d=!0;break}if(!d)for(;++c<b;)if(!a[c].getAttribute("disabled")){e=a[c].getAttribute("value");break}void 0!==e&&(this.element.attributes.value.value=e);return e}},render:function(){this.element.node.addEventListener("change",N,!1)},unrender:function(){this.element.node.removeEventListener("change",N,!1)},setValue:function(a){this.root.viewmodel.set(this.keypath,a)},getValue:function(){var a,b,c,e;a=this.element.node.options;c=a.length;for(b=0;b<c;b+=1)if(e=a[b],a[b].selected)return a=
e._ractive?e._ractive.value:e.value},forceUpdate:function(){var a=this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,w.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))}}),Tj=Bc.extend({getInitialValue:function(){return this.element.options.filter(function(a){return a.getAttribute("selected")}).map(function(a){return a.getAttribute("value")})},render:function(){this.element.node.addEventListener("change",N,!1);void 0===this.root.viewmodel.get(this.keypath)&&
this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",N,!1)},setValue:function(){throw Error("TODO not implemented yet");},getValue:function(){var a,b,c,e,d;a=[];b=this.element.node.options;e=b.length;for(c=0;c<e;c+=1)d=b[c],d.selected&&(d=d._ractive?d._ractive.value:d.value,a.push(d));return a},handleChange:function(){var a,b;a=this.attribute.value;b=this.getValue();void 0!==a&&zb(b,a)||Bc.prototype.handleChange.call(this);return this},forceUpdate:function(){var a=
this,b=this.getValue();void 0!==b&&(this.attribute.locked=!0,w.scheduleTask(function(){return a.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,b))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Uj=W.extend({render:function(){this.element.node.addEventListener("change",N,!1)},unrender:function(){this.element.node.removeEventListener("change",N,!1)},getValue:function(){return this.element.node.files}}),
Vj=sb.extend({getInitialValue:function(){},getValue:function(){var a=parseFloat(this.element.node.value);return isNaN(a)?void 0:a}}),Wj=/^event(?:\.(.+))?/,Mf=function(a){var b,c,e,d={};b=this._ractive;c=b.events[a.type];if(e=Da(c.element.parentFragment))d=Da.resolve(e);c.fire({node:this,original:a,index:d,keypath:b.keypath.str,context:b.root.viewmodel.get(b.keypath)})},Sb={},Xj={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Nf=function(a,b,c){this.init(a,b,c)};Nf.prototype=
{bubble:function(){var a=this.getAction();a&&!this.hasListener?this.listen():!a&&this.hasListener&&this.unrender()},fire:function(a){Qa(this.root,this.getAction(),{event:a})},getAction:function(){return this.action.toString().trim()},init:function(a,b,c){var e=this;this.element=a;this.root=a.root;this.parentFragment=a.parentFragment;this.name=b;-1!==b.indexOf("*")&&(t('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',a.name,b),this.invalid=!0);c.m?(b=c.a.r,this.method=
c.m,this.keypaths=[],this.fn=vf(c.a.s,b.length),this.parentFragment=a.parentFragment,this.refResolvers=[],b.forEach(function(a,b){var c=void 0;(c=Wj.exec(a))?e.keypaths[b]={eventObject:!0,refinements:c[1]?c[1].split("."):[]}:e.refResolvers.push(Sa(e,a,function(a){return e.resolve(b,a)}))}),this.fire=ph):(a=c.n||c,"string"!==typeof a&&(a=new Q({template:a,root:this.root,owner:this})),this.action=a,c.d?(this.dynamicParams=new Q({template:c.d,root:this.root,owner:this.element}),this.fire=rh):c.a&&(this.params=
c.a,this.fire=qh))},listen:function(){var a,b=this.name;if(!this.invalid){if(a=aa("events",this.root,b))this.custom=a(this.node,sh(b));else{if(!("on"+b in this.node||window&&"on"+b in window||pe)){Xj[b]||P(Fa(b,"event"),{node:this.node});return}this.node.addEventListener(b,Mf,!1)}this.hasListener=!0}},rebind:function(a,b){function c(c){c&&c.rebind(a,b)}this.method?this.refResolvers.forEach(c):("string"!==typeof this.action&&c(this.action),this.dynamicParams&&c(this.dynamicParams))},render:function(){this.node=
this.element.node;this.node._ractive.events[this.name]=this;(this.method||this.getAction())&&this.listen()},resolve:function(a,b){this.keypaths[a]=b},unbind:function(){this.method?this.refResolvers.forEach(ca):("string"!==typeof this.action&&this.action.unbind(),this.dynamicParams&&this.dynamicParams.unbind())},unrender:function(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,Mf,!1);this.hasListener=!1}};var Of=function(a,b){var c=this,e,d,f;this.element=a;this.root=e=
a.root;d=b.n||b;if("string"!==typeof d&&(f=new Q({template:d,root:e,owner:a}),d=f.toString(),f.unbind(),""===d))return;b.a?this.params=b.a:b.d&&(this.fragment=new Q({template:b.d,root:e,owner:a}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0;c.params=this.getArgsList();c.ready&&c.update()});(this.fn=aa("decorators",e,d))||t(Fa(d,"decorator"))};Of.prototype={init:function(){var a;a=this.element.node;this.params?(a=[a].concat(this.params),
a=this.fn.apply(this.root,a)):a=this.fn.call(this.root,a);if(!a||!a.teardown)throw Error("Decorator definition must return an object with a teardown method");this.actual=a;this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(a,b){this.fragment&&this.fragment.rebind(a,b)},teardown:function(a){this.torndown=!0;this.ready&&this.actual.teardown();!a&&this.fragment&&this.fragment.unbind()}};var Cc=function(a){return a.replace(/-([a-zA-Z])/g,
function(a,c){return c.toUpperCase()})},Dc,Ya,Ec;ea?(Ya={},Ec=ka("div").style,Dc=function(a){var b,c,e;a=Cc(a);if(!Ya[a])if(void 0!==Ec[a])Ya[a]=a;else for(e=a.charAt(0).toUpperCase()+a.substring(1),b=fa.length;b--;)if(c=fa[b],void 0!==Ec[c+e]){Ya[a]=c+e;break}return Ya[a]}):Dc=null;var ha=Dc,Fc,Pf;ea?(Pf=window.getComputedStyle||null.getComputedStyle,Fc=function(a){var b,c,e,d,f;b=Pf(this.node);if("string"===typeof a)return f=b[ha(a)],"0px"===f&&(f=0),f;if(!n(a))throw Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");
c={};for(e=a.length;e--;)d=a[e],f=b[ha(d)],"0px"===f&&(f=0),c[d]=f;return c}):Fc=null;var Yj=Fc,Qf=function(a){var b;this.duration=a.duration;this.step=a.step;this.complete=a.complete;"string"===typeof a.easing?(b=a.root.easing[a.easing],b||(P(Fa(a.easing,"easing")),b=Vd)):b="function"===typeof a.easing?a.easing:Vd;this.easing=b;this.start=ve();this.end=this.start+this.duration;this.running=!0;Db.add(this)};Qf.prototype={tick:function(a){if(!this.running)return!1;if(a>this.end)return this.step&&this.step(1),
this.complete&&this.complete(1),!1;a=this.easing((a-this.start)/this.duration);this.step&&this.step(a);return!0},stop:function(){this.abort&&this.abort();this.running=!1}};var Zj=new RegExp("^-(?:"+fa.join("|")+")-"),ak=new RegExp("^(?:"+fa.join("|")+")([A-Z])"),Rf=function(a){if(!a)return"";ak.test(a)&&(a="-"+a);return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},Gc,Hc,La,Za,$a,Sf,Tf,Uf,Ic={},tb={};ea?(Hc=ka("div").style,void 0!==Hc.transition?(La="transition",Za="transitionend",$a=
!0):void 0!==Hc.webkitTransition?(La="webkitTransition",Za="webkitTransitionEnd",$a=!0):$a=!1,La&&(Sf=La+"Duration",Tf=La+"Property",Uf=La+"TimingFunction"),Gc=function(a,b,c,e,d){setTimeout(function(){var f,g,h,l,m;l=function(){g&&h&&(a.root.fire(a.name+":end",a.node,a.isIntro),d())};f=(a.node.namespaceURI||"")+a.node.tagName;a.node.style[Tf]=e.map(ha).map(Rf).join(",");a.node.style[Uf]=Rf(c.easing||"linear");a.node.style[Sf]=c.duration/1E3+"s";m=function(b){b=e.indexOf(Cc(b.propertyName.replace(Zj,
"")));-1!==b&&e.splice(b,1);e.length||(a.node.removeEventListener(Za,m,!1),h=!0,l())};a.node.addEventListener(Za,m,!1);setTimeout(function(){for(var d=e.length,k,n,p=[],q;d--;)if(q=e[d],k=f+q,$a&&!tb[k]&&(a.node.style[ha(q)]=b[q],Ic[k]||(n=a.getStyle(q),Ic[k]=a.getStyle(q)!=b[q],tb[k]=!Ic[k],tb[k]&&(a.node.style[ha(q)]=n))),!$a||tb[k])void 0===n&&(n=a.getStyle(q)),k=e.indexOf(q),-1===k?J("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",
{node:a.node}):e.splice(k,1),k=/[^\d]*$/.exec(b[q])[0],p.push({name:ha(q),interpolator:nb(parseFloat(n),parseFloat(b[q])),suffix:k});p.length?new Qf({root:a.root,duration:c.duration,easing:Cc(c.easing||""),step:function(b){var c,e;for(e=p.length;e--;)c=p[e],a.node.style[c.name]=c.interpolator(b)+c.suffix},complete:function(){g=!0;l()}}):g=!0;e.length||(a.node.removeEventListener(Za,m,!1),h=!0,l())},0)},c.delay||0)}):Gc=null;var bk=Gc,Ra,Jc,ub,Kc,Ea;if("undefined"!==typeof document){Ra="hidden";Ea=
{};if(Ra in document)ub="";else for(Kc=fa.length;Kc--;)Jc=fa[Kc],Ra=Jc+"Hidden",Ra in document&&(ub=Jc);void 0!==ub?(document.addEventListener(ub+"visibilitychange",Wd),Wd()):("onfocusout"in document?(document.addEventListener("focusout",Tb),document.addEventListener("focusin",Ub)):(window.addEventListener("pagehide",Tb),window.addEventListener("blur",Tb),window.addEventListener("pageshow",Ub),window.addEventListener("focus",Ub)),Ea.hidden=!1)}var ck=Ea,Lc,Vf,Wf;ea?(Vf=window.getComputedStyle||null.getComputedStyle,
Lc=function(a,b,c){var e=this,d;if(4===arguments.length)throw Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(ck.hidden)return this.setStyle(a,b),Wf||(Wf=ta.resolve());"string"===typeof a?(d={},d[a]=b):(d=a,c=b);c||(P('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),c=this);return new ta(function(a){var b,
f,g,h,l,m;if(c.duration){b=Object.keys(d);f=[];g=Vf(e.node);for(l=b.length;l--;)m=b[l],h=g[ha(m)],"0px"===h&&(h=0),h!=d[m]&&(f.push(m),e.node.style[ha(m)]=h);f.length?bk(e,d,c,f,a):a()}else e.setStyle(d),a()})}):Lc=null;var Mc=function(a,b,c){this.init(a,b,c)};Mc.prototype={init:function(a,b,c){var e,d;this.element=a;this.root=e=a.root;this.isIntro=c;c=b.n||b;if("string"!==typeof c&&(d=new Q({template:c,root:e,owner:a}),c=d.toString(),d.unbind(),""===c))return;this.name=c;b.a?this.params=b.a:b.d&&
(d=new Q({template:b.d,root:e,owner:a}),this.params=d.getArgsList(),d.unbind());(this._fn=aa("transitions",e,c))||P(Fa(c,"transition"),{ractive:this.root})},start:function(){var a=this,b,c,e;b=this.node=this.element.node;c=b.getAttribute("style");this.complete=function(d){e||(!d&&a.isIntro&&(c?b.setAttribute("style",c):(b.getAttribute("style"),b.removeAttribute("style"))),b._ractive.transition=null,a._manager.remove(a),e=!0)};this._fn?this._fn.apply(this.root,[this].concat(this.params)):this.complete()},
getStyle:Yj,setStyle:function(a,b){var c;if("string"===typeof a)this.node.style[ha(a)]=b;else for(c in a)a.hasOwnProperty(c)&&(this.node.style[ha(c)]=a[c]);return this},animateStyle:Lc,processParams:function(a,b){"number"===typeof a?a={duration:a}:"string"===typeof a?a="slow"===a?{duration:600}:"fast"===a?{duration:200}:{duration:400}:a||(a={});return l({},a,b)}};var Xf,Yf;Xf=function(){var a=this.node,b=this.fragment.toString(!1);window&&window.appearsToBeIELessEqual8&&(a.type="text/css");if(a.styleSheet)a.styleSheet.cssText=
b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(b))}};Yf=function(){this.node.type&&"text/javascript"!==this.node.type||J("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root});this.node.text=this.fragment.toString(!1)};var Zf=function(a){this.init(a)};Zf.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){var a=this.node,b;if(a)return(b=a.parentNode)&&b.removeChild(a),a},find:function(a){if(!this.node)return null;
if(ga(this.node,a))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(a)},findAll:function(a,b){b._test(this,!0)&&b.live&&(this.liveQueries||(this.liveQueries=[])).push(b);this.fragment&&this.fragment.findAll(a,b)},findAllComponents:function(a,b){this.fragment&&this.fragment.findAllComponents(a,b)},findComponent:function(a){if(this.fragment)return this.fragment.findComponent(a)},findNextNode:function(){return null},firstNode:function(){return this.node},getAttribute:function(a){if(this.attributes&&
this.attributes[a])return this.attributes[a].value},init:function(a){var b,c,e,d,f,g;this.type=7;c=this.parentFragment=a.parentFragment;e=this.template=a.template;this.parent=a.pElement||c.pElement;this.root=c=c.root;this.index=a.index;this.key=a.key;this.name=zc(e.e);if("option"===this.name){b:{if(a=this.parent){do if("select"===a.name)break b;while(a=a.parent)}a=void 0}if(this.select=a)this.select.options.push(this),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),
"selected"in e.a&&void 0!==this.select.getAttribute("value")&&delete e.a.selected}"select"===this.name&&(this.options=[],this.bubble=th);"form"===this.name&&(this.formBindings=[]);var h,l;l=e.a||{};b=a=void 0;h=l.twoway;void 0!==h&&(a=0===h||Gf.test(h));h=l.lazy;void 0!==h&&(0!==h&&Aj.test(h)?b=parseInt(h):b=0===h||Gf.test(h));h=e.a;var m;l=[];for(g in h)"twoway"!==g&&"lazy"!==g&&h.hasOwnProperty(g)&&(m=new Jf({element:this,name:g,value:h[g],root:this.root}),l[g]=m,"value"!==g&&l.push(m));(m=l.value)&&
l.push(m);this.attributes=l;this.conditionalAttributes=Nj(this,e.m);e.f&&(this.fragment=new Q({template:e.f,root:c,owner:this,pElement:this,cssIds:null}));g=c.twoway;!1===a?g=!1:!0===a&&(g=!0);this.twoway=g;this.lazy=b;if(g){var n;m=this.attributes;this.binding&&(this.binding.teardown(),this.binding=null);(this.getAttribute("contenteditable")||m.contenteditable&&pa(m.contenteditable))&&pa(m.value)?n=Oj:"input"===this.name?(d=this.getAttribute("type"),"radio"===d||"checkbox"===d?(g=pa(m.name),m=pa(m.checked),
g&&m&&J("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:this.root}),g?n="radio"===d?Qj:Rj:m&&(n="radio"===d?Pj:Sj)):"file"===d&&pa(m.value)?n=Uj:pa(m.value)&&(n="number"===d||"range"===d?Vj:sb)):"select"===this.name&&pa(m.value)?n=this.getAttribute("multiple")?Tj:Bc:"textarea"===this.name&&pa(m.value)&&(n=sb);n=n&&(f=new n(this))&&f.keypath?f:void 0;g=d=n}g&&(this.binding=d,f=this.root._twowayBindings[d.keypath.str]||(this.root._twowayBindings[d.keypath.str]=
[]),f.push(d));if(e.v){f=e.v;var p;m=[];for(p in f)if(f.hasOwnProperty(p))for(d=p.split("-"),n=d.length;n--;)g=new Nf(this,d[n],f[p]),m.push(g);this.eventHandlers=m}e.o&&(this.decorator=new Of(this,e.o));this.intro=e.t0||e.t1;this.outro=e.t0||e.t2},rebind:function(a,b){function c(c){c.rebind(a,b)}var e,d,f;this.attributes&&this.attributes.forEach(c);this.conditionalAttributes&&this.conditionalAttributes.forEach(c);this.eventHandlers&&this.eventHandlers.forEach(c);this.decorator&&c(this.decorator);
this.fragment&&c(this.fragment);if(f=this.liveQueries)for(e=f.length;e--;)f[e]._makeDirty();this.node&&(d=this.node._ractive)&&Xc(d,"keypath",a,b)},render:function(){var a=this,b=this.root,c,e,d;c=xh(this);e=this.node=ka(this.name,c);this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(a){return"{"+a+"}"}).join(" "));da(this.node,"_ractive",{value:{proxy:this,keypath:xe(this.parentFragment),events:O(null),root:b}});this.attributes.forEach(function(a){return a.render(e)});
this.conditionalAttributes.forEach(function(a){return a.render(e)});this.fragment&&("script"===this.name?(this.bubble=Yf,this.node.text=this.fragment.toString(!1),this.fragment.unrender=S):"style"===this.name?(this.bubble=Xf,this.bubble(),this.fragment.unrender=S):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=S:this.node.appendChild(this.fragment.render()));this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding);this.eventHandlers&&this.eventHandlers.forEach(function(a){return a.render()});
"option"===this.name&&yh(this);"img"===this.name?vh(this):"form"===this.name?this.node.addEventListener("reset",Ud,!1):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected);this.decorator&&this.decorator.fn&&w.scheduleTask(function(){a.decorator.torndown||a.decorator.init()},!0);b.transitionsEnabled&&this.intro&&(d=new Mc(this,this.intro,!0),w.registerTransition(d),w.scheduleTask(function(){return d.start()},
!0),this.transition=d);this.node.autofocus&&w.scheduleTask(function(){return a.node.focus()},!0);zh(this);return this.node},toString:function(){var a,b;if(this.template.y)return"<!DOCTYPE"+this.template.dd+">";a="<"+this.template.e;a+=this.attributes.map(Xd).join("")+this.conditionalAttributes.map(Xd).join("");if(b="option"===this.name)a:{var c,e;b=this.getAttribute("value");if(void 0!==b&&this.select)if(c=this.select.getAttribute("value"),c==b)b=!0;else{if(this.select.getAttribute("multiple")&&n(c))for(e=
c.length;e--;)if(c[e]==b){b=!0;break a}b=void 0}else b=!1}b&&(a+=" selected");if(b="input"===this.name)e=this.attributes,b=e.type,c=e.value,e=e.name,b=b&&"radio"===b.value&&c&&e.interpolator?c.value===e.interpolator.value?!0:void 0:void 0;b&&(a+=" checked");a+=">";"textarea"===this.name&&void 0!==this.getAttribute("value")?a+=Ib(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(a+=this.getAttribute("value")||"");this.fragment&&(b="script"!==this.name&&"style"!==this.name,
a+=this.fragment.toString(b));ob.test(this.template.e)||(a+="</"+this.template.e+">");return a},unbind:function(){this.fragment&&this.fragment.unbind();this.binding&&this.binding.unbind();this.eventHandlers&&this.eventHandlers.forEach(ca);"option"===this.name&&this.select&&T(this.select.options,this);this.attributes.forEach(ca);this.conditionalAttributes.forEach(ca)},unrender:function(a){var b,c;(c=this.transition)&&c.complete();"option"===this.name?this.detach():a&&w.detachWhenReady(this);this.fragment&&
this.fragment.unrender(!1);if(a=this.binding)this.binding.unrender(),this.node._ractive.binding=null,b=this.root._twowayBindings[a.keypath.str],b.splice(b.indexOf(a),1);this.eventHandlers&&this.eventHandlers.forEach(wg);this.decorator&&w.registerDecorator(this.decorator);this.root.transitionsEnabled&&this.outro&&(c=new Mc(this,this.outro,!1),w.registerTransition(c),w.scheduleTask(function(){return c.start()}));this.liveQueries&&Ah(this);"form"===this.name&&this.node.removeEventListener("reset",Ud,
!1)}};var ai=Zf,$f=/^\s*$/,Ch=/^\s*/,dk=function(a){var b,c,e;b=a.split("\n");c=b[0];void 0!==c&&$f.test(c)&&b.shift();c=na(b);void 0!==c&&$f.test(c)&&b.pop();(e=b.reduce(Bh,null))&&(a=b.map(function(a){return a.replace(e,"")}).join("\n"));return a},Nc=function(a,b,c){var e;e=void 0;var d=Zd(b,(c||{}).owner);d?e=d:(c=la("partials",a,b))?(d=c.partials[b],"function"===typeof d&&(e=d.bind(c),e.isOwner=c.partials.hasOwnProperty(b),d=e.call(a,X)),d||""===d?(X.isParsed(d)||(d=X.parse(d,X.getParseOptions(c)),
d.p&&J("Partials ({{>%s}}) cannot contain nested inline partials",b,{ractive:a}),(e?c:c.partials.hasOwnProperty(b)?c:Yd(c.constructor,b)).partials[b]=d=d.t),e&&(d._fn=e),e=d.v?d.t:d):(J('A function was specified for "%s" %s, but no %s was returned',b,"partial","partial",{ractive:a}),e=void 0)):e=void 0;if(e)return e;if(e=X.fromId(b,{noThrow:!0}))return e=dk(e),e=X.parse(e,X.getParseOptions(a)),a.partials[b]=e.t},ek=function(a,b){return b?a.split("\n").map(function(a,e){return e?b+a:a}).join("\n"):
a},ag=function(a){var b;b=this.parentFragment=a.parentFragment;this.root=b.root;this.type=8;this.index=a.index;this.name=a.template.r;this.rendered=!1;this.fragment=this.fragmentToRender=this.fragmentToUnrender=null;V.init(this,a);this.keypath||((a=Nc(this.root,this.name,b))?(Ka.call(this),this.isNamed=!0,this.setTemplate(a)):P('Could not find template for partial "%s"',this.name))};ag.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},
findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,b)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(a,
b){this.isNamed||yf.call(this,a,b);this.fragment&&this.fragment.rebind(a,b)},render:function(){this.docFrag=document.createDocumentFragment();this.update();this.rendered=!0;return this.docFrag},resolve:V.resolve,setValue:function(a){var b;if(void 0===a||a!==this.value)void 0!==a&&(b=Nc(this.root,""+a,this.parentFragment)),!b&&this.name&&(b=Nc(this.root,this.name,this.parentFragment))&&(Ka.call(this),this.isNamed=!0),b||P('Could not find template for partial "%s"',this.name,{ractive:this.root}),this.value=
a,this.setTemplate(b||[]),this.bubble(),this.rendered&&w.addView(this)},setTemplate:function(a){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment));this.fragmentToRender=this.fragment=new Q({template:a,root:this.root,owner:this,pElement:this.parentFragment.pElement})},toString:function(a){var b,c;a=this.fragment.toString(a);b=this.parentFragment.items[this.index-1];if(!b||1!==b.type)return a;b=b.text.split("\n").pop();return(c=/^\s+$/.exec(b))?ek(a,c[0]):
a},unbind:function(){this.isNamed||Ka.call(this);this.fragment&&this.fragment.unbind()},unrender:function(a){this.rendered&&(this.fragment&&this.fragment.unrender(a),this.rendered=!1)},update:function(){var a,b;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null);this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null);this.rendered&&(a=this.parentFragment.getNode(),b=this.parentFragment.findNextNode(this),
a.insertBefore(this.docFrag,b))}};var bi=ag,Zh=$d,fk=new U("detach"),Oc=[],ab="pop push reverse shift sort splice unshift".split(" "),vb,Pc;ab.forEach(function(a){da(Oc,a,{value:function(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];var d,b=Ge(this,a,c),c=Array.prototype[a].apply(this,arguments);w.start();this._ractive.setting=!0;for(e=this._ractive.wrappers.length;e--;){d=this._ractive.wrappers[e];w.addRactive(d.root);var f=d.root;d=d.keypath;b?f.viewmodel.smartUpdate(d,this,
b):f.viewmodel.mark(d)}w.end();this._ractive.setting=!1;return c}})});({}).__proto__?(vb=function(a){a.__proto__=Oc},Pc=function(a){a.__proto__=Array.prototype}):(vb=function(a){var b,c;for(b=ab.length;b--;)c=ab[b],da(a,c,{value:Oc[c],configurable:!0})},Pc=function(a){var b;for(b=ab.length;b--;)delete a[ab[b]]});vb.unpatch=Pc;var bg=vb,Qc,Rc;Qc=function(a,b,c){this.root=a;this.value=b;this.keypath=K(c);b._ractive||(da(b,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),bg(b));
b._ractive.instances[a._guid]||(b._ractive.instances[a._guid]=0,b._ractive.instances.push(a));b._ractive.instances[a._guid]+=1;b._ractive.wrappers.push(this)};Qc.prototype={get:function(){return this.value},teardown:function(){var a,b,c,e;a=this.value;b=a._ractive;c=b.wrappers;e=b.instances;if(b.setting)return!1;b=c.indexOf(this);if(-1===b)throw Error(Rc);c.splice(b,1);if(c.length){if(--e[this.root._guid],!e[this.root._guid]){b=e.indexOf(this.root);if(-1===b)throw Error(Rc);e.splice(b,1)}}else delete a._ractive,
bg.unpatch(this.value)}};Rc="Something went wrong in a rather interesting way";var Zb={filter:function(a){return n(a)&&(!a._ractive||!a._ractive.setting)},wrap:function(a,b,c){return new Qc(a,b,c)}},fe=/^\s*[0-9]+\s*$/,Sc,Tc;try{Object.defineProperty({},"test",{value:0}),Sc={filter:function(a,b,c){var e;if(!b)return!1;b=K(b);if((e=c.viewmodel.wrapped[b.parent.str])&&!e.magic)return!1;a=c.viewmodel.get(b.parent);return n(a)&&/^[0-9]+$/.test(b.lastKey)?!1:a&&("object"===typeof a||"function"===typeof a)},
wrap:function(a,b,c){return new Tc(a,b,c)}},Tc=function(a,b,c){var e;c=K(c);this.magic=!0;this.ractive=a;this.keypath=c;this.value=b;this.prop=c.lastKey;c=c.parent;this.obj=c.isRoot?a.viewmodel.data:a.viewmodel.get(c);(a=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&a.set&&(e=a.set._ractiveWrappers)?-1===e.indexOf(this)&&e.push(this):Dh(this,b,a)},Tc.prototype={get:function(){return this.value},reset:function(a){if(!this.updating)return this.updating=!0,this.obj[this.prop]=
a,w.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0},set:function(a,b){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=fe.test(a)?[]:{},this.updating=!1),this.obj[this.prop][a]=b)},teardown:function(){var a,b;if(this.updating)return!1;if(a=(a=Object.getOwnPropertyDescriptor(this.obj,this.prop))&&a.set)a=a._ractiveWrappers,b=a.indexOf(this),-1!==b&&a.splice(b,1),a.length||(a=this.obj[this.prop],Object.defineProperty(this.obj,
this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=a)}}}catch(a){Sc=!1}var kb=Sc,cg,Uc;kb&&(cg={filter:function(a,b,c){return kb.filter(a,b,c)&&Zb.filter(a)},wrap:function(a,b,c){return new Uc(a,b,c)}},Uc=function(a,b,c){this.value=b;this.magic=!0;this.magicWrapper=kb.wrap(a,b,c);this.arrayWrapper=Zb.wrap(a,b,c)},Uc.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown();this.magicWrapper.teardown()},reset:function(a){return this.magicWrapper.reset(a)}});
var Nh=cg,Vb={},gk=function(a){var b=[sa],c,e;for(c=a.length;c--;)for(e=a[c].parent;e&&!e.isRoot;){if(-1===a.indexOf(e)){var d=b,f=e;-1===d.indexOf(f)&&d.push(f)}e=e.parent}return b},dg=function(a,b,c){be(a,b);c||(c=b.wildcardMatches(),c.forEach(function(c){ae(a,c,b)}))},eg=function(a,b){this.computation=a;this.viewmodel=a.viewmodel;this.ref=b;this.root=this.viewmodel.ractive;this.parentFragment=this.root.component&&this.root.component.parentFragment};eg.prototype={resolve:function(a){this.computation.softDeps.push(a);
this.computation.unresolvedDeps[a.str]=null;this.viewmodel.register(a,this.computation,"computed")}};var Vc=function(a,b){this.key=a;this.getter=b.getter;this.setter=b.setter;this.hardDeps=b.deps||[];this.softDeps=[];this.unresolvedDeps={};this.depValues={};this._dirty=this._firstRun=!0};Vc.prototype={constructor:Vc,init:function(a){var b=this,c;this.viewmodel=a;this.bypass=!0;c=a.get(this.key);a.clearCache(this.key.str);this.bypass=!1;this.setter&&void 0!==c&&this.set(c);this.hardDeps&&this.hardDeps.forEach(function(c){return a.register(c,
b,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var a=this,b,c=!1;if(this.getting)return L("The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`"),this.value;this.getting=!0;if(this._dirty){this._firstRun||!this.hardDeps.length&&!this.softDeps.length?c=!0:[this.hardDeps,this.softDeps].forEach(function(b){var d,
f,g;if(!c)for(g=b.length;g--;)if(d=b[g],f=a.viewmodel.get(d),!m(f,a.depValues[d.str])){a.depValues[d.str]=f;c=!0;break}});if(c){this.viewmodel.capture();try{this.value=this.getter()}catch(e){J('Failed to compute "%s"',this.key.str),x(e.stack||e),this.value=void 0}b=this.viewmodel.release();(b=this.updateDependencies(b))&&[this.hardDeps,this.softDeps].forEach(function(b){b.forEach(function(b){a.depValues[b.str]=a.viewmodel.get(b)})})}this._dirty=!1}this.getting=this._firstRun=!1;return this.value},
set:function(a){if(this.setting)this.value=a;else{if(!this.setter)throw Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(a)}},updateDependencies:function(a){var b,c,e,d,f;c=this.softDeps;for(b=c.length;b--;)e=c[b],-1===a.indexOf(e)&&(d=!0,this.viewmodel.unregister(e,this,"computed"));for(b=a.length;b--;)if(e=a[b],-1===c.indexOf(e)&&(!this.hardDeps||-1===this.hardDeps.indexOf(e))){d=!0;f=this.viewmodel;var g=e.firstKey;g in f.data||
g in f.computations||g in f.mappings||this.unresolvedDeps[e.str]?this.viewmodel.register(e,this,"computed"):(f=new eg(this,e.str),a.splice(b,1),this.unresolvedDeps[e.str]=f,w.addUnresolved(f))}d&&(this.softDeps=a.slice());return d}};var fg={FAILED_LOOKUP:!0},hk={},gg=function(a,b){this.localKey=a;this.keypath=b.keypath;this.origin=b.origin;this.deps=[];this.unresolved=[];this.resolved=!1};gg.prototype={forceResolution:function(){this.keypath=this.localKey;this.setup()},get:function(a,b){return this.resolved?
this.origin.get(this.map(a),b):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(a){this.local=a;this.setup()},map:function(a){return void 0===typeof this.keypath?this.localKey:a.replace(this.localKey,this.keypath)},register:function(a,b,c){this.deps.push({keypath:a,dep:b,group:c});this.resolved&&this.origin.register(this.map(a),b,c)},resolve:function(a){void 0!==this.keypath&&this.unbind(!0);this.keypath=a;this.setup()},set:function(a,b){this.resolved||
this.forceResolution();this.origin.set(this.map(a),b)},setup:function(){var a=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(b){var c=a.map(b.keypath);a.origin.register(c,b.dep,b.group);if(b.dep.setValue)b.dep.setValue(a.origin.get(c));else if(b.dep.invalidate)b.dep.invalidate();else throw Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");}),this.origin.mark(this.keypath)))},setValue:function(a){if(!this.keypath)throw Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");
this.origin.set(this.keypath,a)},unbind:function(a){var b=this;a||delete this.local.mappings[this.localKey];this.resolved&&(this.deps.forEach(function(a){b.origin.unregister(b.map(a.keypath),a.dep,a.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(a,b,c){var e,d;if(this.resolved){e=this.deps;for(d=e.length;d--;)if(e[d].dep===b){e.splice(d,1);break}this.origin.unregister(this.map(a),b,c)}}};var ik=function(a,b){var c,e;c={};e=0;return a.map(function(a,
d){var f,g,h;g=e;h=b.length;do{f=b.indexOf(a,g);if(-1===f)return-1;g=f+1}while(c[f]&&g<h);f===e&&(e+=1);c[f]=!0;return f})},Wb={},jk={implicit:!0},hg={noCascade:!0},ig=function(a){var b=a.adapt,c=a.data,e=a.computed,d=a.mappings,f,g;this.ractive=a.ractive;this.adaptors=b;this.onchange=a.onchange;this.cache={};this.cacheMap=O(null);this.deps={computed:O(null),"default":O(null)};this.depsMap={computed:O(null),"default":O(null)};this.patternObservers=[];this.specials=O(null);this.wrapped=O(null);this.computations=
O(null);this.captureGroups=[];this.unresolvedImplicitDependencies=[];this.changes=[];this.implicitChanges={};this.noCascade={};this.data=c;this.mappings=O(null);for(f in d)this.map(K(f),d[f]);if(c)for(f in c)(g=this.mappings[f])&&void 0===g.getValue()&&g.setValue(c[f]);for(f in e)d&&f in d&&t("Cannot map to a computed property ('%s')",f),this.compute(K(f),e[f]);this.ready=!0};ig.prototype={adapt:function(a,b){var c,e,d;if(this.adaptors)for(c=this.adaptors.length,e=0;e<c;e+=1)if(d=this.adaptors[e],
d.filter(b,a,this.ractive)){c=this.wrapped[a]=d.wrap(this.ractive,b,a,Eh(a));c.value=b;break}},applyChanges:function(){function a(a){var c=a.key;a.viewmodel===e?(e.clearCache(c.str),a.invalidate(),d.push(c),b(c)):a.viewmodel.mark(c)}function b(c){var d,f;e.noCascade.hasOwnProperty(c.str)||((f=e.deps.computed[c.str])&&f.forEach(a),(d=e.depsMap.computed[c.str])&&d.forEach(b))}var c=this,e=this,d,f,g={},h;d=this.changes;if(d.length)return d.slice().forEach(b),f=gk(d),f.forEach(function(b){var c;-1===
d.indexOf(b)&&(c=e.deps.computed[b.str])&&c.forEach(a)}),this.changes=[],this.patternObservers.length&&(f.forEach(function(a){return dg(c,a,!0)}),d.forEach(function(a){return dg(c,a)})),this.deps.observers&&(f.forEach(function(a){return ce(c,null,a,"observers")}),ee(this,d,"observers")),this.deps["default"]&&(h=[],f.forEach(function(a){return ce(c,h,a,"default")}),h.length&&Fh(this,h,d),ee(this,d,"default")),d.forEach(function(a){g[a.str]=c.get(a)}),this.implicitChanges={},this.noCascade={},g},capture:function(){this.captureGroups.push([])},
clearCache:function(a,b){var c;b||(c=this.wrapped[a])&&!1!==c.teardown()&&(this.wrapped[a]=null);this.cache[a]=void 0;if(c=this.cacheMap[a])for(;c.length;)this.clearCache(c.pop())},compute:function(a,b){var c=new Vc(a,b);this.ready&&c.init(this);return this.computations[a.str]=c},get:function(a,b){var c=this.cache,e,d,f,g,h=a.str,m;b=b||hk;b.capture&&(g=na(this.captureGroups))&&(~g.indexOf(a)||g.push(a));if(ra.call(this.mappings,a.firstKey))return this.mappings[a.firstKey].get(a,b);if(a.isSpecial)return a.value;
if(void 0===c[h]){if((d=this.computations[h])&&!d.bypass)e=d.get(),this.adapt(h,e);else if(f=this.wrapped[h])e=f.value;else if(a.isRoot)this.adapt("",this.data),e=this.data;else{d=this.get(a.parent);if(g=this.wrapped[a.parent.str])d=g.get();null===d||void 0===d?e=void 0:((e=this.cacheMap[a.parent.str])?-1===e.indexOf(a.str)&&e.push(a.str):this.cacheMap[a.parent.str]=[a.str],"object"!==typeof d||a.lastKey in d?(e=d[a.lastKey],this.adapt(a.str,e,!1),this.cache[a.str]=e):e=this.cache[a.str]=fg)}c[h]=
e}else e=c[h];!b.noUnwrap&&(f=this.wrapped[h])&&(e=f.get());if(a.isRoot&&b.fullRootGet)for(m in this.mappings)e[m]=this.mappings[m].getValue();return e===fg?void 0:e},init:function(){for(var a in this.computations)this.computations[a].init(this)},map:function(a,b){var c=this.mappings[a.str]=new gg(a,b);c.initViewmodel(this);return c},mark:function(a,b){var c,e=a.str;b&&(b.implicit&&(this.implicitChanges[e]=!0),b.noCascade&&(this.noCascade[e]=!0));(c=this.computations[e])&&c.invalidate();-1===this.changes.indexOf(a)&&
this.changes.push(a);this.clearCache(e,b?b.keepExistingWrapper:!1);if(this.ready)this.onchange()},merge:function(a,b,c,e){var d,f;this.mark(a);if(e&&e.compare){e=Hh(e.compare);try{d=b.map(e),f=c.map(e)}catch(g){J('merge(): "%s" comparison failed. Falling back to identity checking',a),d=b,f=c}}else d=b,f=c;d=ik(d,f);this.smartUpdate(a,c,d,b.length!==c.length)},register:function(a,b,c){c=void 0===c?"default":c;var e;if(!b.isStatic)if(e=this.mappings[a.firstKey])e.register(a,b,c);else if(e=this.deps[c]||
(this.deps[c]={}),e=e[a.str]||(e[a.str]=[]),e.push(b),this.depsMap[c]||(this.depsMap[c]={}),!a.isRoot)for(;!a.isRoot;)b=this.depsMap[c],b=b[a.parent.str]||(b[a.parent.str]=[]),e=a.str,void 0===b["_"+e]&&(b["_"+e]=0,b.push(a)),b["_"+e]+=1,a=a.parent},release:function(){return this.captureGroups.pop()},reset:function(a){this.data=a;this.clearCache("")},set:function(a,b,c){c=void 0===c?{}:c;var e,d,f;if(!c.noMapping&&(e=this.mappings[a.firstKey]))return e.set(a,b);if(e=this.computations[a.str]){if(e.setting)return;
e.set(b);b=e.get()}m(this.cache[a.str],b)||((d=this.wrapped[a.str])&&d.reset&&(f=!1!==d.reset(b))&&(b=d.get()),e||f||Ih(this,a,b),c.silent?this.clearCache(a.str):this.mark(a))},smartUpdate:function(a,b,c){var e=this,d,f;f=c.length;c.forEach(function(b,c){-1===b&&e.mark(a.join(c),hg)});this.set(a,b,{silent:!0});(d=this.deps["default"][a.str])&&d.filter(Jh).forEach(function(a){return a.shuffle(c,b)});if(f!==b.length){this.mark(a.join("length"),jk);for(d=c.touchedFrom;d<b.length;d+=1)this.mark(a.join(d));
for(d=b.length;d<f;d+=1)this.mark(a.join(d),hg)}},teardown:function(){var a=this,b;for(Object.keys(this.cache).forEach(function(b){return a.clearCache(b)});b=this.unresolvedImplicitDependencies.pop();)b.teardown()},unregister:function(a,b,c){c=void 0===c?"default":c;var e;if(!b.isStatic){if(e=this.mappings[a.firstKey])return e.unregister(a,b,c);e=this.deps[c][a.str];b=e.indexOf(b);if(-1===b)throw Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");
e.splice(b,1);if(!a.isRoot)for(;!a.isRoot;)b=this.depsMap[c],b=b[a.parent.str],--b["_"+a.str],b["_"+a.str]||(T(b,a),b["_"+a.str]=void 0),a=a.parent}}};Xb.prototype={constructor:Xb,begin:function(a){this.inProcess[a._guid]=!0},end:function(a){var b=a.parent;b&&this.inProcess[b._guid]?ge(this.queue,b).push(a):he(this,a);delete this.inProcess[a._guid]}};var kk=function(a,b){var c={},e;for(e in b){var d=e,f=a,g=e,h=b[e],m=void 0,l=void 0;"function"===typeof h&&(m=Yb(h,f));"string"===typeof h&&(m=ie(f,
h));"object"===typeof h&&("string"===typeof h.get?m=ie(f,h.get):"function"===typeof h.get?m=Yb(h.get,f):t("`%s` computation must have a `get()` method",g),"function"===typeof h.set&&(l=Yb(h.set,f)));c[d]={getter:m,setter:l}}return c},Kh=/\$\{([^\}]+)\}/g,lk=new U("construct"),mk=new U("config"),jg=new Xb("init"),Ph=0,nk="adaptors components decorators easing events interpolators partials transitions".split(" "),ac=function(a,b,c){var e=void 0===b?{}:b;b=void 0===c?{}:c;ma.DEBUG&&Ua();Oh(a,b);da(a,
"data",{get:Qh});lk.fire(a,e);nk.forEach(function(b){a[b]=h(O(a.constructor[b]||null),e[b])});c=new ig({adapt:Lh(a,a.adapt,e),data:cc.init(a.constructor,a,e),computed:kk(a,h(O(a.constructor.prototype.computed),e.computed)),mappings:b.mappings,ractive:a,onchange:function(){return w.addRactive(a)}});a.viewmodel=c;c.init();bc.init(a.constructor,a,e);mk.fire(a);jg.begin(a);if(a.template){c=void 0;if(b.cssIds||a.cssId)c=b.cssIds?b.cssIds.slice():[],a.cssId&&c.push(a.cssId);a.fragment=new Q({template:a.template,
root:a,owner:a,cssIds:c})}jg.end(a);if(b=d(a.el))if(b=a.render(b,a.append),ma.DEBUG_PROMISES)b["catch"](function(b){P("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;");J("An error happened during rendering",{ractive:a});b.stack&&x(b.stack);throw b;})};je.prototype={bubble:function(){this.dirty||(this.dirty=!0,w.addView(this))},
update:function(){this.callback(this.fragment.getValue());this.dirty=!1},rebind:function(a,b){this.fragment.rebind(a,b)},unbind:function(){this.fragment.unbind()}};var ok=function(a,b,c,e,d){var f,g,m,l,p={},q={},r={},t,x=[];g=a.parentFragment;m=a.root;d=d||{};h(p,d);d.content=e||[];p[""]=d.content;b.defaults.el&&J("The <%s/> component has a default `el` property; it has been disregarded",a.name);for(e=g;e;){if(16===e.owner.type){l=e.owner.container;break}e=e.parent}c&&Object.keys(c).forEach(function(b){var e=
c[b],d;if("string"===typeof e)d=pb(e),q[b]=d?d.value:e;else if(0===e)q[b]=!0;else if(n(e))1===e.length&&2===e[0].t?(r[b]={origin:a.root.viewmodel,keypath:void 0},e=Rh(a,e[0],function(a){a.isSpecial?t?f.set(b,a.value):(q[b]=a.value,delete r[b]):t?f.viewmodel.mappings[b].resolve(a):r[b].keypath=a})):e=new je(a,e,function(a){t?f.set(b,a):q[b]=a}),x.push(e);else throw Error("erm wut");});f=O(b.prototype);ac(f,{el:null,append:!0,data:q,partials:d,magic:m.magic||b.defaults.magic,modifyArrays:m.modifyArrays,
adapt:m.adapt},{parent:m,component:a,container:l,mappings:r,inlinePartials:p,cssIds:g.cssIds});t=!0;a.resolvers=x;return f},pk=new U("teardown"),kg=function(a,b){this.init(a,b)};kg.prototype={detach:function(){var a=this.instance.fragment.detach();fk.fire(this.instance);return a},find:function(a){return this.instance.fragment.find(a)},findAll:function(a,b){return this.instance.fragment.findAll(a,b)},findAllComponents:function(a,b){b._test(this,!0);this.instance.fragment&&this.instance.fragment.findAllComponents(a,
b)},findComponent:function(a){return a&&a!==this.name?this.instance.fragment?this.instance.fragment.findComponent(a):null:this.instance},findNextNode:function(){return this.parentFragment.findNextNode(this)},firstNode:function(){return this.rendered?this.instance.fragment.firstNode():null},init:function(a,b){if(!b)throw Error('Component "'+this.name+'" not found');this.root=(this.parentFragment=a.parentFragment).root;this.type=15;this.name=a.template.e;this.index=a.index;this.indexRefBindings={};
this.yielders={};this.resolvers=[];ok(this,b,a.template.a,a.template.f,a.template.p);var c=a.template.v,e;for(e in c)c.hasOwnProperty(e)&&Sh(this.instance,this.root,e,c[e]);(a.template.t0||a.template.t1||a.template.t2||a.template.o)&&J('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});for(var d,c=this.root;c;)(d=c._liveComponentQueries["_"+this.name])&&d.push(this.instance),c=c.parent},rebind:function(a,b){function c(c){c.rebind(a,b)}var e;this.resolvers.forEach(c);
for(var d in this.yielders)this.yielders[d][0]&&c(this.yielders[d][0]);(e=this.root._liveComponentQueries["_"+this.name])&&e._makeDirty()},render:function(){var a=this.instance;a.render(this.parentFragment.getNode());this.rendered=!0;return a.fragment.detach()},toString:function(){return this.instance.fragment.toString()},unbind:function(){var a=this.instance;this.resolvers.forEach(ca);var b,c;b=this.root;do(c=b._liveComponentQueries["_"+this.name])&&c._remove(this);while(b=b.parent);a._observers.forEach(fd);
a.fragment.unbind();a.viewmodel.teardown();a.fragment.rendered&&a.el.__ractive_instances__&&T(a.el.__ractive_instances__,a);pk.fire(a)},unrender:function(a){this.shouldDestroy=a;this.instance.unrender()}};var $h=kg,lg=function(a){this.type=9;this.value=a.template.c};lg.prototype={detach:vc,firstNode:function(){return this.node},render:function(){this.node||(this.node=document.createComment(this.value));return this.node},toString:function(){return"\x3c!--"+this.value+"--\x3e"},unrender:function(a){a&&
this.node.parentNode.removeChild(this.node)}};var ci=lg,mg=function(a){var b,c;this.type=16;this.container=b=a.parentFragment.root;this.component=c=b.component;this.container=b;this.containerFragment=a.parentFragment;this.parentFragment=c.parentFragment;var e=this.name=a.template.n||"",d=b._inlinePartials[e];d||(J('Could not find template for partial "'+e+'"',{ractive:a.root}),d=[]);this.fragment=new Q({owner:this,root:b.parent,template:d,pElement:this.containerFragment.pElement});n(c.yielders[e])?
c.yielders[e].push(this):c.yielders[e]=[this];w.scheduleTask(function(){if(1<c.yielders[e].length)throw Error("A component template can only have one {{yield"+(e?" "+e:"")+"}} declaration at a time");})};mg.prototype={detach:function(){return this.fragment.detach()},find:function(a){return this.fragment.find(a)},findAll:function(a,b){return this.fragment.findAll(a,b)},findComponent:function(a){return this.fragment.findComponent(a)},findAllComponents:function(a,b){return this.fragment.findAllComponents(a,
b)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(a){return this.fragment.getValue(a)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(a){this.fragment.unrender(a);T(this.component.yielders[this.name],this)},rebind:function(a,b){this.fragment.rebind(a,b)},toString:function(){return this.fragment.toString()}};var Vh=mg,ng=function(a){this.declaration=
a.template.a};ng.prototype={init:S,render:S,unrender:S,teardown:S,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var di=ng,og=function(a){this.init(a)};og.prototype={bubble:function(){this.dirtyValue=this.dirtyArgs=!0;this.bound&&"function"===typeof this.owner.bubble&&this.owner.bubble()},detach:function(){var a;if(1===this.items.length)return this.items[0].detach();a=document.createDocumentFragment();this.items.forEach(function(b){(b=b.detach())&&a.appendChild(b)});return a},find:function(a){var b,
c,e,d;if(this.items){c=this.items.length;for(b=0;b<c;b+=1)if(e=this.items[b],e.find&&(d=e.find(a)))return d;return null}},findAll:function(a,b){var c,e,d;if(this.items)for(e=this.items.length,c=0;c<e;c+=1)d=this.items[c],d.findAll&&d.findAll(a,b);return b},findAllComponents:function(a,b){var c,e,d;if(this.items)for(e=this.items.length,c=0;c<e;c+=1)d=this.items[c],d.findAllComponents&&d.findAllComponents(a,b);return b},findComponent:function(a){var b,c,e,d;if(this.items){b=this.items.length;for(c=
0;c<b;c+=1)if(e=this.items[c],e.findComponent&&(d=e.findComponent(a)))return d;return null}},findNextNode:function(a){a=a.index;return this.items[a+1]?this.items[a+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)},firstNode:function(){return this.items&&this.items[0]?this.items[0].firstNode():null},getArgsList:function(){var a,b;this.dirtyArgs&&(b=Lb(this.items,a={},this.root._guid),this.argsList=a=(a=pb("["+b+"]",a))?
a.value:[this.toString()],this.dirtyArgs=!1);return this.argsList},getNode:function(){var a=this;do if(a.pElement)return a.pElement.node;while(a=a.parent);return this.root.detached||this.root.el},getValue:function(){var a,b;this.dirtyValue&&(b=Lb(this.items,a={},this.root._guid),this.value=a=(a=pb(b,a))?a.value:this.toString(),this.dirtyValue=!1);return this.value},init:function(a){var b=this;this.owner=a.owner;this.parent=this.owner.parentFragment;this.root=a.root;this.pElement=a.pElement;this.context=
a.context;this.index=a.index;this.key=a.key;this.registeredIndexRefs=[];this.cssIds="cssIds"in a?a.cssIds:this.parent?this.parent.cssIds:null;this.items=a.template.map(function(c,e){return Th({parentFragment:b,pElement:a.pElement,template:c,index:e})});this.value=this.argsList=null;this.bound=this.dirtyArgs=this.dirtyValue=!0},rebind:function(a,b){this.owner&&!this.owner.hasContext||Xc(this,"context",a,b);this.items.forEach(function(c){c.rebind&&c.rebind(a,b)})},registerIndexRef:function(a){var b=
this.registeredIndexRefs;-1===b.indexOf(a)&&b.push(a)},render:function(){var a;1===this.items.length?a=this.items[0].render():(a=document.createDocumentFragment(),this.items.forEach(function(b){a.appendChild(b.render())}));this.rendered=!0;return a},toString:function(a){return this.items?this.items.map(a?fi:ei).join(""):""},unbind:function(){this.bound&&(this.items.forEach(gi),this.bound=!1)},unregisterIndexRef:function(a){var b=this.registeredIndexRefs;b.splice(b.indexOf(a),1)},unrender:function(a){if(!this.rendered)throw Error("Attempted to unrender a fragment that was not rendered");
this.items.forEach(function(b){return b.unrender(a)});this.rendered=!1}};var Q=og,qk=["template","partials","components","decorators","events"],rk=new U("reset"),sk=va("reverse"),tk=va("shift"),uk=va("sort"),vk=va("splice"),wk=new U("teardown"),pg=function(){return this.fragment.toString(!0)},xk=new U("unrender"),yk=va("unshift"),zk=new U("update"),Ak={add:function(a,b){return te(this,a,void 0===b?1:+b)},animate:function(a,b,c){var e,d,f,g,h,m,l,n,p,q,r,t;e=new ta(function(a){return d=a});if("object"===
typeof a){c=b||{};b=c.easing;m=c.duration;h=[];l=c.step;n=c.complete;if(l||n)q={},c.step=null,c.complete=null,p=function(a){return function(b,c){q[a]=c}};for(f in a)if(a.hasOwnProperty(f)){if(l||n)r=p(f),c={easing:b,duration:m},l&&(c.step=r);c.complete=n?r:S;h.push(Cb(this,f,a[f],c))}a={easing:b,duration:m};l&&(a.step=function(a){return l(a,q)});n&&e.then(function(a){return n(a,q)});a.complete=d;t=Cb(this,null,null,a);h.push(t);e.stop=function(){for(var a;a=h.pop();)a.stop();t&&t.stop()};return e}c=
c||{};c.complete&&e.then(c.complete);c.complete=d;g=Cb(this,a,b,c);e.stop=function(){return g.stop()};return e},detach:function(){if(this.detached)return this.detached;this.el&&T(this.el.__ractive_instances__,this);this.detached=this.fragment.detach();ri.fire(this);return this.detached},find:function(a){return this.el?this.fragment.find(a):null},findAll:function(a,b){var c,e;if(!this.el)return[];b=b||{};c=this._liveQueries;if(e=c[a])return b&&b.live?e:e.slice();e=Be(this,a,!!b.live,!1);e.live&&(c.push(a),
c["_"+a]=e);this.fragment.findAll(a,e);return e},findAllComponents:function(a,b){var c,e;b=b||{};c=this._liveComponentQueries;if(e=c[a])return b&&b.live?e:e.slice();e=Be(this,a,!!b.live,!0);e.live&&(c.push(a),c["_"+a]=e);this.fragment.findAllComponents(a,e);return e},findComponent:function(a){return this.fragment.findComponent(a)},findContainer:function(a){return this.container?this.container.component&&this.container.component.name===a?this.container:this.container.findContainer(a):null},findParent:function(a){return this.parent?
this.parent.component&&this.parent.component.name===a?this.parent:this.parent.findParent(a):null},fire:function(a){var b={args:Array.prototype.slice.call(arguments,1)};Qa(this,a,b)},get:function(a){var b;a=K(ba(a));b=this.viewmodel.get(a,yi);void 0===b&&this.parent&&!this.isolated&&fb(this,a.str,this.component.parentFragment)&&(b=this.viewmodel.get(a));return b},insert:function(a,b){if(!this.fragment.rendered)throw Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");
a=d(a);b=d(b)||null;if(!a)throw Error("You must specify a valid target to insert into");a.insertBefore(this.detach(),b);this.el=a;(a.__ractive_instances__||(a.__ractive_instances__=[])).push(this);this.detached=null;kd(this)},merge:function(a,b,c){var e,d;a=K(ba(a));e=this.viewmodel.get(a);if(!n(e)||!n(b))return this.set(a,b,c&&c.complete);d=w.start(this,!0);this.viewmodel.merge(a,e,b,c);w.end();return d},observe:function(a,b,c){var e,d,f;if(q(a)){c=b;d=a;e=[];for(a in d)d.hasOwnProperty(a)&&(b=d[a],
e.push(this.observe(a,b,c)));return{cancel:function(){for(;e.length;)e.pop().cancel()}}}if("function"===typeof a)return c=b,b=a,kc(this,"",b,c);d=a.split(" ");if(1===d.length)return kc(this,a,b,c);e=[];for(f=d.length;f--;)(a=d[f])&&e.push(kc(this,a,b,c));return{cancel:function(){for(;e.length;)e.pop().cancel()}}},observeOnce:function(a,b,c){var e=this.observe(a,function(){b.apply(this,arguments);e.cancel()},{init:!1,defer:c&&c.defer});return e},off:function(a,b){var c=this,e;if(a)e=a.split(" ").map(Ee).filter(Fe),
e.forEach(function(a){var e;if(e=c._subs[a])b?(a=e.indexOf(b),-1!==a&&e.splice(a,1)):c._subs[a]=[]});else for(a in this._subs)delete this._subs[a];return this},on:function(a,b){var c=this,e,d;if("object"===typeof a){e=[];for(d in a)a.hasOwnProperty(d)&&e.push(this.on(d,a[d]));return{cancel:function(){for(var a;a=e.pop();)a.cancel()}}}a.split(" ").map(Ee).filter(Fe).forEach(function(a){(c._subs[a]||(c._subs[a]=[])).push(b)});return{cancel:function(){return c.off(a,b)}}},once:function(a,b){var c=this.on(a,
function(){b.apply(this,arguments);c.cancel()});return c},pop:Ci,push:Di,render:function(a,b){var c=this,e,f,g;g=this.transitionsEnabled;this.noIntro&&(this.transitionsEnabled=!1);e=w.start(this,!0);w.scheduleTask(function(){return Ei.fire(c)},!0);if(this.fragment.rendered)throw Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");a=d(a)||this.el;b=d(b)||this.anchor;this.el=a;this.anchor=b;if(!this.append&&a){var h=a.__ractive_instances__;h&&h.length&&
h.splice(0,h.length).forEach(ed);a.innerHTML=""}this.cssId&&Ke.apply();a&&((f=a.__ractive_instances__)?f.push(this):a.__ractive_instances__=[this],b?a.insertBefore(this.fragment.render(),b):a.appendChild(this.fragment.render()));w.end();this.transitionsEnabled=g;return e.then(function(){return Fi.fire(c)})},reset:function(a){var b,c,e;a=a||{};if("object"!==typeof a)throw Error("The reset method takes either no arguments, or an object containing new data");(c=this.viewmodel.wrapped[""])&&c.reset?!1===
c.reset(a)&&this.viewmodel.reset(a):this.viewmodel.reset(a);c=bc.reset(this);for(e=c.length;e--;)if(-1<qk.indexOf(c[e])){b=!0;break}if(b){b=void 0;this.viewmodel.mark(sa);if(b=this.component)b.shouldDestroy=!0;this.unrender();b&&(b.shouldDestroy=!1);this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new Q({template:this.template,root:this,owner:this}));b=this.render(this.el,this.anchor)}else b=w.start(this,!0),this.viewmodel.mark(sa),w.end();rk.fire(this,a);return b},resetPartial:function(a,
b){function c(b,e,d){d&&d.partials[a]||b.forEach(function(b){8===b.type&&b.getPartialName()===a&&e.push(b);b.fragment&&c(b.fragment.items,e,d);n(b.fragments)?c(b.fragments,e,d):n(b.items)?c(b.items,e,d):15===b.type&&b.instance&&c(b.instance.fragment.items,e,b.instance);7===b.type&&(n(b.attributes)&&c(b.attributes,e,d),n(b.conditionalAttributes)&&c(b.conditionalAttributes,e,d))})}var e,d=[];c(this.fragment.items,d);this.partials[a]=b;e=w.start(this,!0);d.forEach(function(b){b.value=void 0;b.setValue(a)});
w.end();return e},resetTemplate:function(a){var b;Kb.init(null,this,{template:a});a=this.transitionsEnabled;this.transitionsEnabled=!1;if(b=this.component)b.shouldDestroy=!0;this.unrender();b&&(b.shouldDestroy=!1);this.fragment.unbind();this.fragment=new Q({template:this.template,root:this,owner:this});this.render(this.el,this.anchor);this.transitionsEnabled=a},reverse:sk,set:function(a,b){var c,e;e=w.start(this,!0);if(q(a))for(a in c=a,c)c.hasOwnProperty(a)&&(b=c[a],le(this,a,b));else le(this,a,
b);w.end();return e},shift:tk,sort:uk,splice:vk,subtract:function(a,b){return te(this,a,void 0===b?-1:-b)},teardown:function(){var a;this.fragment.unbind();this.viewmodel.teardown();this._observers.forEach(fd);this.fragment.rendered&&this.el.__ractive_instances__&&T(this.el.__ractive_instances__,this);this.shouldDestroy=!0;a=this.fragment.rendered?this.unrender():ta.resolve();wk.fire(this);this._boundFunctions.forEach(hi);return a},toggle:function(a){var b=this;if("string"!==typeof a)throw new TypeError("Bad arguments");
var c=void 0;return/\*/.test(a)?(c={},db(this,K(ba(a))).forEach(function(a){c[a.str]=!b.viewmodel.get(a)}),this.set(c)):this.set(a,!this.get(a))},toHTML:pg,toHtml:pg,unrender:function(){var a,b;if(!this.fragment.rendered)return J("ractive.unrender() was called on a Ractive instance that was not rendered"),ta.resolve();a=w.start(this,!0);for(b=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();this.fragment.unrender(b);T(this.el.__ractive_instances__,
this);xk.fire(this);w.end();return a},unshift:yk,update:function(a){var b;a=K(a)||sa;b=w.start(this,!0);this.viewmodel.mark(a);w.end();zk.fire(this,a);return b},updateModel:function(a,b){var c,e;if("string"!==typeof a||b)for(c in e=[],this._twowayBindings)a&&!K(c).equalsOrStartsWith(a)||e.push.apply(e,this._twowayBindings[c]);else e=this._twowayBindings[a];c=ii(this,e);return this.set(c)}},mi=function(a,b,c){return c||"function"===typeof b&&/_super/.test(a)?function(){var c="_super"in this,d=this._super,
f;this._super=b;f=a.apply(this,arguments);c&&(this._super=d);return f}:a},ni=function(a){for(var b={};a;)ji(a,b),li(a,b),a=a._Parent!==ma?a._Parent:!1;return b},ia;ia=function(a){if(!(this instanceof ia))return new ia(a);ac(this,a)};Ga(ia,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:me},getNodeInfo:{value:function(a){var b={},c;if(!a||!(c=a._ractive))return b;b.ractive=c.root;b.keypath=c.keypath.str;b.index={};if(a=Da(c.proxy.parentFragment))b.index=Da.resolve(a);
return b}},parse:{value:hb},Promise:{value:ta},svg:{value:dc},magic:{value:jb},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:{linear:function(a){return a},easeIn:function(a){return Math.pow(a,3)},easeOut:function(a){return Math.pow(a-1,3)+1},easeInOut:function(a){return 1>(a/=.5)?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}}},events:{writable:!0,value:{}},interpolators:{writable:!0,value:mb},partials:{writable:!0,
value:{}},transitions:{writable:!0,value:{}}});ia.prototype=h(Ak,oe);ia.prototype.constructor=ia;ia.defaults=ia.prototype;if("function"!==typeof Date.now||"function"!==typeof String.prototype.trim||"function"!==typeof Object.keys||"function"!==typeof Array.prototype.indexOf||"function"!==typeof Array.prototype.forEach||"function"!==typeof Array.prototype.map||"function"!==typeof Array.prototype.filter||"undefined"!==typeof window&&"function"!==typeof window.addEventListener)throw Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");
var ma=ia;return ma});(function(d,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):d.Ractive.events.tap=f()})(this,function(){function d(d,f){this.node=d;this.callback=f;this.preventMousedownEvents=!1;this.bind(d)}function f(d){this.__tap_handler__.mousedown(d)}function g(d){this.__tap_handler__.touchdown(d)}function h(){this.addEventListener("keydown",n,!1);this.addEventListener("blur",l,!1)}function l(){this.removeEventListener("keydown",n,
!1);this.removeEventListener("blur",l,!1)}function n(d){32===d.which&&this.__tap_handler__.fire()}d.prototype={bind:function(d){window.navigator.pointerEnabled?d.addEventListener("pointerdown",f,!1):window.navigator.msPointerEnabled?d.addEventListener("MSPointerDown",f,!1):d.addEventListener("mousedown",f,!1);d.addEventListener("touchstart",g,!1);"BUTTON"!==d.tagName&&"button"!==d.type||d.addEventListener("focus",h,!1);d.__tap_handler__=this},fire:function(d,f,g){this.callback({node:this.node,original:d,
x:f,y:g})},mousedown:function(d){var f=this;if(!this.preventMousedownEvents&&(void 0===d.which||1===d.which)){var g=d.clientX,h=d.clientY,l=d.pointerId,n=function(d){d.pointerId==l&&(f.fire(d,g,h),L())},I=function(d){d.pointerId==l&&(5<=Math.abs(d.clientX-g)||5<=Math.abs(d.clientY-h))&&L()},L=function P(){f.node.removeEventListener("MSPointerUp",n,!1);document.removeEventListener("MSPointerMove",I,!1);document.removeEventListener("MSPointerCancel",P,!1);f.node.removeEventListener("pointerup",n,!1);
document.removeEventListener("pointermove",I,!1);document.removeEventListener("pointercancel",P,!1);f.node.removeEventListener("click",n,!1);document.removeEventListener("mousemove",I,!1)};window.navigator.pointerEnabled?(this.node.addEventListener("pointerup",n,!1),document.addEventListener("pointermove",I,!1),document.addEventListener("pointercancel",L,!1)):window.navigator.msPointerEnabled?(this.node.addEventListener("MSPointerUp",n,!1),document.addEventListener("MSPointerMove",I,!1),document.addEventListener("MSPointerCancel",
L,!1)):(this.node.addEventListener("click",n,!1),document.addEventListener("mousemove",I,!1));setTimeout(L,400)}},touchdown:function(){var d=this,f=event.touches[0],g=f.clientX,h=f.clientY,l=f.identifier,n=function(f){f.changedTouches[0].identifier===l&&(f.preventDefault(),d.preventMousedownEvents=!0,clearTimeout(d.preventMousedownTimeout),d.preventMousedownTimeout=setTimeout(function(){d.preventMousedownEvents=!1},400),d.fire(f,g,h));L()},I=function(d){1===d.touches.length&&d.touches[0].identifier===
l||L();d=d.touches[0];(5<=Math.abs(d.clientX-g)||5<=Math.abs(d.clientY-h))&&L()},L=function P(){d.node.removeEventListener("touchend",n,!1);window.removeEventListener("touchmove",I,!1);window.removeEventListener("touchcancel",P,!1)};this.node.addEventListener("touchend",n,!1);window.addEventListener("touchmove",I,!1);window.addEventListener("touchcancel",L,!1);setTimeout(L,400)},teardown:function(){var d=this.node;d.removeEventListener("pointerdown",f,!1);d.removeEventListener("MSPointerDown",f,!1);
d.removeEventListener("mousedown",f,!1);d.removeEventListener("touchstart",g,!1);d.removeEventListener("focus",h,!1)}};return function(f,g){return new d(f,g)}});(function(d,f){"object"===typeof exports&&"undefined"!==typeof module?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(d.Ractive.events)})(this,function(d){function f(d){return function(f,g){function h(l){(l.which||l.keyCode)===d&&(l.preventDefault(),g({node:f,original:l}))}f.addEventListener("keydown",h,!1);return{teardown:function(){f.removeEventListener("keydown",h,!1)}}}}var g=f(13),h=f(9),l=f(27),n=f(32),m=f(37),p=f(39),q=f(40),r=f(38);d.enter=g;d.tab=h;d.escape=l;d.space=
n;d.leftarrow=m;d.rightarrow=p;d.downarrow=q;d.uparrow=r});Ractive.DEBUG=!1;
window.SECU={_data:{params:{maxFileSize:1572864},nav:{},url:{api:{host:"https://api.secu.su",feedback:"/feedback",post:"/s",get:"/s/"},web:{host:"https://secu.su",page:"/"}},encryptionParameters:{iterations:4096,keySize:256,authenticationStrength:128,authenticatedData:"S\u00cbCU",cipherMode:"gcm"}},watchScroll:function(){var d=this._data;d.nav.bar=document.getElementsByClassName("navbar")[0];d.nav.spacer=document.getElementsByClassName("navbar-spacer")[0];window.addEventListener("scroll",function(f){document.body.scrollTop>
d.nav.spacer.offsetTop?(d.nav.bar.classList.add("docked"),d.nav.spacer.classList.add("docked")):(d.nav.bar.classList.remove("docked"),d.nav.spacer.classList.remove("docked"))},!1)},error:{show:function(d){var f=window.SECU,g=f._data,h=g.app;h.set("errorMessages",d);h.set("showError",!0);clearTimeout(g.errorTimeout);g.errorTimeout=setTimeout(function(){f.error.hide()},3E3)},hide:function(){var d=window.SECU._data;d.app.set("showError",!1);clearTimeout(d.errorTimeout)}},ajax:function(d){return new Promise(function(f,
g){var h=new XMLHttpRequest;h.open(d.method,d.url,!0);d.contentType&&h.setRequestHeader("Content-type",d.contentType);h.send(d.data);h.onload=function(){200<=this.status&&300>this.status?f(this.response):g(this.statusText)};h.onerror=function(){g(this.statusText)}})},getRandomHexValue:function(d,f){return sjcl.random.randomWords(d,f)},decrypt:function(d){return sjcl.decrypt(d.password,d.message,{},{})},encrypt:function(d){var f=this._data.encryptionParameters,f={adata:f.authenticatedData+"-"+(new Date).getTime(),
iter:f.iterations,mode:f.cipherMode,ts:f.authenticationStrength,ks:f.keySize,iv:this.getRandomHexValue(4,0),salt:this.getRandomHexValue(2,0)};return sjcl.encrypt(d.password,d.message,f,{})},checkLocation:function(){var d=this._data,f=window.location.pathname.substring(1);f.length&&d.app.set("decryptHash",f)},getFileExtension:function(d){return d.split(".").pop()},checkCopy:function(){this._data.app.set("copySupported",document.queryCommandSupported("copy"))},checkDownload:function(){this._data.app.set("downloadSupported",
"download"in document.createElement("a"))},fixHeight:function(d,f){var g=SECU._data.app,h=d?d.node:document.getElementById(f+"ContainerBody"),l=getComputedStyle(h).getPropertyValue("border-width"),l=l.length?parseInt(l,10):1;g.set(f+"TextareaHeight","0px");h.scrollHeight>h.offsetHeight&&g.set(f+"TextareaHeight",h.scrollHeight+2*l+"px")},base64ToBlob:function(d){var f=atob(d.split(",")[1]);d=d.split(",")[0].split(":")[1].split(";")[0];for(var g=new ArrayBuffer(f.length),h=new Uint8Array(g),l=0;l<f.length;l++)h[l]=
f.charCodeAt(l);f=new Blob([g],{type:d});return URL.createObjectURL(f)},fileToBase64:function(d){var f=new FileReader;return new Promise(function(g,h){try{f.onload=function(d){g(d.target.result)},f.readAsDataURL(d)}catch(l){h(l)}})},prettifySize:function(d){d=Math.round(d/1E3);return d=1E3<=d?(d/1E3).toFixed(1)+"MB":d+"KB"},resetApp:function(){var d=this._data.app;this.error.hide();history.replaceState({},"S\u00ebcu","/");d.set("encryptForm",{message:"",file:"",password:""});d.set("formDisabled",
!1);d.set("textCopied",!1);d.set("decryptDone",!1);d.set("decryptSuccess",!0);d.set("decryptHash","");d.set("decryptLoaded",!1);d.set("decryptFormActive",!1);d.set("decryptMessage","");d.set("decryptFiles",[]);d.set("decryptFileForm",{message:"",password:""});d.set("decryptForm",{message:"",password:""});d.set("encryptDone",!1);d.set("encryptLink","");d.set("encryptFormActive",!0);d.set("encryptLink","");d.set("encryptRawFile",[]);d.set("encryptFileData",{size:"",name:"",extension:""});d.set("encryptFile",
{message:"",password:""});d.set("encryptForm",{message:"",password:""})},init:function(){var d=this,f=this._data;f.app=new Ractive({el:document.getElementsByClassName("secuApp")[0],template:"#secuApp",data:{show:{main:!0,faq:!1,feedback:!1},formDisabled:!1,textCopied:!1,copySupported:!0,downloadSupported:!0,showError:!1,errorMessages:[],feedbackSent:!1,feedbackForm:{body:"",email:""},decryptHash:"",decryptDone:!1,decryptSuccess:!0,decryptLoaded:!1,decryptFormActive:!1,decryptMessage:"",decryptFiles:[],
decryptFileForm:{message:"",password:""},decryptForm:{message:"",password:""},encryptDone:!1,encryptFormActive:!1,encryptLink:"",encryptRawFile:[],encryptFileData:{size:"",name:"",extension:""},encryptFile:{message:"",password:""},encryptForm:{message:"",password:""}}});f.app.on({hideError:function(){d.error.hide()},toggleView:function(f,h){f.original.preventDefault();d.error.hide();var l=this.get("show"),n;for(n in l)this.set("show."+n,!1);this.set("show."+h,!0)},sendFeedback:function(g){g.original.preventDefault();
d.error.hide();if(this.get("feedbackForm.body").length){var h=this;this.set("formDisabled",!0);SECU.ajax({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(this.get("feedbackForm")),url:f.url.api.host+f.url.api.feedback}).then(function(d){h.set("feedbackSent",!0);h.set("formDisabled",!1);h.set("feedbackForm",{body:"",email:""})},function(f){d.error.show([f])})}else d.error.show(["The message can't be empty"])},fixHeight:d.fixHeight,uploadFile:function(d){d.original.preventDefault();
this.get("encryptRawFile").length?this.set("encryptRawFile",[]):this.find("#messageFile").click()},downloadFile:function(d){this.get("downloadSupported")||(d.original.preventDefault(),window.open(d.node.href,"_blank").focus())},checkFile:function(g){var h=this.get("encryptRawFile.0");d.error.hide();if(h)if(h.size>f.params.maxFileSize)this.set("encryptRawFile",[]),this.set("encryptFileData",{name:h.name,size:n,extension:m}),d.error.show(["The file is too big"]);else{var l=this,n=d.prettifySize(h.size),
m=d.getFileExtension(h.name);d.fileToBase64(h).then(function(d){l.set("encryptFile.message",d);l.set("encryptFileData",{name:h.name,size:n,extension:m})},function(f){d.error.show([f])})}else this.set("encryptFileData",{name:"",size:"",extension:""})},resetApp:function(f){f.original.preventDefault();d.resetApp()},requestContainer:function(g,h){g.original.preventDefault();var l=this;this.set("formDisabled",!0);SECU.ajax({method:"GET",url:f.url.api.host+f.url.api.get+h}).then(function(f){f=JSON.parse(f);
f.data.hasOwnProperty("text")?"string"===typeof f.data.text?(l.set("decryptMessage",f.data.text),l.set("decryptDone",!0),f.data.text.length&&setTimeout(function(){d.fixHeight(null,"decrypt")},0)):l.set("decryptForm.message",JSON.stringify(f.data.text)):f.data.hasOwnProperty("plaintext")?(l.set("decryptMessage",f.data.plaintext),l.set("decryptDone",!0),f.data.plaintext.lebgth&&setTimeout(function(){d.fixHeight(null,"decrypt")},0)):l.set("decryptForm.message",JSON.stringify(f.data));f.data.files&&f.data.files[0]&&
(l.set("decryptFiles.0.name",f.data.files[0].name),l.set("decryptFiles.0.extension",d.getFileExtension(f.data.files[0].name)),"string"===typeof f.data.files[0].data?(l.set("decryptDone",!0),l.set("decryptFiles.0.data",d.base64ToBlob(f.data.files[0].data))):l.set("decryptFileForm.message",JSON.stringify(f.data.files[0].data)));l.set("decryptLoaded",!0);l.set("decryptFormActive",!0);l.set("formDisabled",!1)},function(f){d.error.show([f])})},selectInput:function(d){d.node.select()},copyText:function(d,
f){d.original.preventDefault();var l=this,n=document.getElementById(f);n.select();document.execCommand("copy");n.blur();window.getSelection().removeAllRanges();this.set("textCopied",!0);setTimeout(function(){l.set("textCopied",!1)},1E3)},createContainer:function(g){g.original.preventDefault();d.error.hide();if(this.get("encryptForm.message").length||this.get("encryptRawFile").length){this.set("formDisabled",!0);var h=this;g=this.get("encryptForm.password");var l="",n=[],l=g.length?JSON.parse(d.encrypt(this.get("encryptForm"))):
this.get("encryptForm.message");this.get("encryptRawFile").length&&(g.length?(this.set("encryptFile.password",g),n.push({data:JSON.parse(d.encrypt(this.get("encryptFile"))),name:this.get("encryptFileData.name")})):n.push({data:this.get("encryptFile.message"),name:this.get("encryptFileData.name")}));SECU.ajax({method:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify({data:{text:l,files:n}}),url:f.url.api.host+f.url.api.post}).then(function(d){d=JSON.parse(d);h.set("encryptLink",
f.url.web.host+f.url.web.page+d.hash);h.set("encryptFormActive",!1);h.set("encryptDone",!0);h.set("formDisabled",!1);setTimeout(function(){document.getElementById("containerLink").select()},0)},function(f){d.error.show([f])})}else d.error.show(["There should be either message or file"])},decryptContainer:function(f){f.original.preventDefault();d.error.hide();if(this.get("decryptForm.password").length){f=this.get("decryptForm.password");this.set("formDisabled",!0);this.set("decryptFileForm.password",
f);if(this.get("decryptForm.message").length)try{this.set("decryptMessage",d.decrypt(this.get("decryptForm")))}catch(h){this.set("decryptMessage",h.toString()),this.set("decryptSuccess",!1)}if(this.get("decryptFileForm.message").length)try{this.set("decryptFiles.0.data",d.base64ToBlob(d.decrypt(this.get("decryptFileForm"))))}catch(h){this.set("decryptSuccess",!1)}this.set("decryptFileForm",{message:"",password:""});this.set("decryptForm",{message:"",password:""});this.set("decryptDone",!0);this.set("formDisabled",
!1);this.get("decryptSuccess")&&this.get("decryptMessage").length&&setTimeout(function(){d.fixHeight(null,"decrypt");setTimeout(function(){document.getElementById("decryptContainerBody").select()},0)},0)}else d.error.show(["You have to provide a password"])}});this.checkLocation();this.checkCopy();this.checkDownload();this.watchScroll()}};window.SECU.init();
